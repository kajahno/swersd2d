/**
 * Created by bolaj on 02/02/2017.
 */

//animated scrolling
$(function() {
    $('a[href*="#"]:not([href="#"])').click(function() {
        if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'') && location.hostname == this.hostname) {
            var target = $(this.hash);
            target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
            if (target.length) {
                $('html, body').animate({
                    scrollTop: target.offset().top
                }, 1000);
                return false;
            }
        }
    });
});
(function($){
  $(function(){

    $('.button-collapse').sideNav();
    $('.parallax').parallax();

  }); // end of document ready
})(jQuery); // end of jQuery name space
/*!
 * Materialize v0.97.8 (http://materializecss.com)
 * Copyright 2014-2015 Materialize
 * MIT License (https://raw.githubusercontent.com/Dogfalo/materialize/master/LICENSE)
 */
// Check for jQuery.
if (typeof(jQuery) === 'undefined') {
  var jQuery;
  // Check if require is a defined function.
  if (typeof(require) === 'function') {
    jQuery = $ = require('jquery');
  // Else use the dollar sign alias.
  } else {
    jQuery = $;
  }
}
;/*
 * jQuery Easing v1.3 - http://gsgd.co.uk/sandbox/jquery/easing/
 *
 * Uses the built in easing capabilities added In jQuery 1.1
 * to offer multiple easing options
 *
 * TERMS OF USE - jQuery Easing
 *
 * Open source under the BSD License.
 *
 * Copyright © 2008 George McGinley Smith
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * Redistributions of source code must retain the above copyright notice, this list of
 * conditions and the following disclaimer.
 * Redistributions in binary form must reproduce the above copyright notice, this list
 * of conditions and the following disclaimer in the documentation and/or other materials
 * provided with the distribution.
 *
 * Neither the name of the author nor the names of contributors may be used to endorse
 * or promote products derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
 *  COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 *  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
 *  GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED
 * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 *  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED
 * OF THE POSSIBILITY OF SUCH DAMAGE.
 *
*/

// t: current time, b: begInnIng value, c: change In value, d: duration
jQuery.easing['jswing'] = jQuery.easing['swing'];

jQuery.extend( jQuery.easing,
{
	def: 'easeOutQuad',
	swing: function (x, t, b, c, d) {
		//alert(jQuery.easing.default);
		return jQuery.easing[jQuery.easing.def](x, t, b, c, d);
	},
	easeInQuad: function (x, t, b, c, d) {
		return c*(t/=d)*t + b;
	},
	easeOutQuad: function (x, t, b, c, d) {
		return -c *(t/=d)*(t-2) + b;
	},
	easeInOutQuad: function (x, t, b, c, d) {
		if ((t/=d/2) < 1) return c/2*t*t + b;
		return -c/2 * ((--t)*(t-2) - 1) + b;
	},
	easeInCubic: function (x, t, b, c, d) {
		return c*(t/=d)*t*t + b;
	},
	easeOutCubic: function (x, t, b, c, d) {
		return c*((t=t/d-1)*t*t + 1) + b;
	},
	easeInOutCubic: function (x, t, b, c, d) {
		if ((t/=d/2) < 1) return c/2*t*t*t + b;
		return c/2*((t-=2)*t*t + 2) + b;
	},
	easeInQuart: function (x, t, b, c, d) {
		return c*(t/=d)*t*t*t + b;
	},
	easeOutQuart: function (x, t, b, c, d) {
		return -c * ((t=t/d-1)*t*t*t - 1) + b;
	},
	easeInOutQuart: function (x, t, b, c, d) {
		if ((t/=d/2) < 1) return c/2*t*t*t*t + b;
		return -c/2 * ((t-=2)*t*t*t - 2) + b;
	},
	easeInQuint: function (x, t, b, c, d) {
		return c*(t/=d)*t*t*t*t + b;
	},
	easeOutQuint: function (x, t, b, c, d) {
		return c*((t=t/d-1)*t*t*t*t + 1) + b;
	},
	easeInOutQuint: function (x, t, b, c, d) {
		if ((t/=d/2) < 1) return c/2*t*t*t*t*t + b;
		return c/2*((t-=2)*t*t*t*t + 2) + b;
	},
	easeInSine: function (x, t, b, c, d) {
		return -c * Math.cos(t/d * (Math.PI/2)) + c + b;
	},
	easeOutSine: function (x, t, b, c, d) {
		return c * Math.sin(t/d * (Math.PI/2)) + b;
	},
	easeInOutSine: function (x, t, b, c, d) {
		return -c/2 * (Math.cos(Math.PI*t/d) - 1) + b;
	},
	easeInExpo: function (x, t, b, c, d) {
		return (t==0) ? b : c * Math.pow(2, 10 * (t/d - 1)) + b;
	},
	easeOutExpo: function (x, t, b, c, d) {
		return (t==d) ? b+c : c * (-Math.pow(2, -10 * t/d) + 1) + b;
	},
	easeInOutExpo: function (x, t, b, c, d) {
		if (t==0) return b;
		if (t==d) return b+c;
		if ((t/=d/2) < 1) return c/2 * Math.pow(2, 10 * (t - 1)) + b;
		return c/2 * (-Math.pow(2, -10 * --t) + 2) + b;
	},
	easeInCirc: function (x, t, b, c, d) {
		return -c * (Math.sqrt(1 - (t/=d)*t) - 1) + b;
	},
	easeOutCirc: function (x, t, b, c, d) {
		return c * Math.sqrt(1 - (t=t/d-1)*t) + b;
	},
	easeInOutCirc: function (x, t, b, c, d) {
		if ((t/=d/2) < 1) return -c/2 * (Math.sqrt(1 - t*t) - 1) + b;
		return c/2 * (Math.sqrt(1 - (t-=2)*t) + 1) + b;
	},
	easeInElastic: function (x, t, b, c, d) {
		var s=1.70158;var p=0;var a=c;
		if (t==0) return b;  if ((t/=d)==1) return b+c;  if (!p) p=d*.3;
		if (a < Math.abs(c)) { a=c; var s=p/4; }
		else var s = p/(2*Math.PI) * Math.asin (c/a);
		return -(a*Math.pow(2,10*(t-=1)) * Math.sin( (t*d-s)*(2*Math.PI)/p )) + b;
	},
	easeOutElastic: function (x, t, b, c, d) {
		var s=1.70158;var p=0;var a=c;
		if (t==0) return b;  if ((t/=d)==1) return b+c;  if (!p) p=d*.3;
		if (a < Math.abs(c)) { a=c; var s=p/4; }
		else var s = p/(2*Math.PI) * Math.asin (c/a);
		return a*Math.pow(2,-10*t) * Math.sin( (t*d-s)*(2*Math.PI)/p ) + c + b;
	},
	easeInOutElastic: function (x, t, b, c, d) {
		var s=1.70158;var p=0;var a=c;
		if (t==0) return b;  if ((t/=d/2)==2) return b+c;  if (!p) p=d*(.3*1.5);
		if (a < Math.abs(c)) { a=c; var s=p/4; }
		else var s = p/(2*Math.PI) * Math.asin (c/a);
		if (t < 1) return -.5*(a*Math.pow(2,10*(t-=1)) * Math.sin( (t*d-s)*(2*Math.PI)/p )) + b;
		return a*Math.pow(2,-10*(t-=1)) * Math.sin( (t*d-s)*(2*Math.PI)/p )*.5 + c + b;
	},
	easeInBack: function (x, t, b, c, d, s) {
		if (s == undefined) s = 1.70158;
		return c*(t/=d)*t*((s+1)*t - s) + b;
	},
	easeOutBack: function (x, t, b, c, d, s) {
		if (s == undefined) s = 1.70158;
		return c*((t=t/d-1)*t*((s+1)*t + s) + 1) + b;
	},
	easeInOutBack: function (x, t, b, c, d, s) {
		if (s == undefined) s = 1.70158;
		if ((t/=d/2) < 1) return c/2*(t*t*(((s*=(1.525))+1)*t - s)) + b;
		return c/2*((t-=2)*t*(((s*=(1.525))+1)*t + s) + 2) + b;
	},
	easeInBounce: function (x, t, b, c, d) {
		return c - jQuery.easing.easeOutBounce (x, d-t, 0, c, d) + b;
	},
	easeOutBounce: function (x, t, b, c, d) {
		if ((t/=d) < (1/2.75)) {
			return c*(7.5625*t*t) + b;
		} else if (t < (2/2.75)) {
			return c*(7.5625*(t-=(1.5/2.75))*t + .75) + b;
		} else if (t < (2.5/2.75)) {
			return c*(7.5625*(t-=(2.25/2.75))*t + .9375) + b;
		} else {
			return c*(7.5625*(t-=(2.625/2.75))*t + .984375) + b;
		}
	},
	easeInOutBounce: function (x, t, b, c, d) {
		if (t < d/2) return jQuery.easing.easeInBounce (x, t*2, 0, c, d) * .5 + b;
		return jQuery.easing.easeOutBounce (x, t*2-d, 0, c, d) * .5 + c*.5 + b;
	}
});

/*
 *
 * TERMS OF USE - EASING EQUATIONS
 *
 * Open source under the BSD License.
 *
 * Copyright © 2001 Robert Penner
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * Redistributions of source code must retain the above copyright notice, this list of
 * conditions and the following disclaimer.
 * Redistributions in binary form must reproduce the above copyright notice, this list
 * of conditions and the following disclaimer in the documentation and/or other materials
 * provided with the distribution.
 *
 * Neither the name of the author nor the names of contributors may be used to endorse
 * or promote products derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
 *  COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 *  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
 *  GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED
 * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 *  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED
 * OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 */;    // Custom Easing
    jQuery.extend( jQuery.easing,
    {
      easeInOutMaterial: function (x, t, b, c, d) {
        if ((t/=d/2) < 1) return c/2*t*t + b;
        return c/4*((t-=2)*t*t + 2) + b;
      }
    });

;/*! VelocityJS.org (1.2.3). (C) 2014 Julian Shapiro. MIT @license: en.wikipedia.org/wiki/MIT_License */
/*! VelocityJS.org jQuery Shim (1.0.1). (C) 2014 The jQuery Foundation. MIT @license: en.wikipedia.org/wiki/MIT_License. */
/*! Note that this has been modified by Materialize to confirm that Velocity is not already being imported. */
jQuery.Velocity?console.log("Velocity is already loaded. You may be needlessly importing Velocity again; note that Materialize includes Velocity."):(!function(e){function t(e){var t=e.length,a=r.type(e);return"function"===a||r.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===a||0===t||"number"==typeof t&&t>0&&t-1 in e}if(!e.jQuery){var r=function(e,t){return new r.fn.init(e,t)};r.isWindow=function(e){return null!=e&&e==e.window},r.type=function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?n[i.call(e)]||"object":typeof e},r.isArray=Array.isArray||function(e){return"array"===r.type(e)},r.isPlainObject=function(e){var t;if(!e||"object"!==r.type(e)||e.nodeType||r.isWindow(e))return!1;try{if(e.constructor&&!o.call(e,"constructor")&&!o.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(a){return!1}for(t in e);return void 0===t||o.call(e,t)},r.each=function(e,r,a){var n,o=0,i=e.length,s=t(e);if(a){if(s)for(;i>o&&(n=r.apply(e[o],a),n!==!1);o++);else for(o in e)if(n=r.apply(e[o],a),n===!1)break}else if(s)for(;i>o&&(n=r.call(e[o],o,e[o]),n!==!1);o++);else for(o in e)if(n=r.call(e[o],o,e[o]),n===!1)break;return e},r.data=function(e,t,n){if(void 0===n){var o=e[r.expando],i=o&&a[o];if(void 0===t)return i;if(i&&t in i)return i[t]}else if(void 0!==t){var o=e[r.expando]||(e[r.expando]=++r.uuid);return a[o]=a[o]||{},a[o][t]=n,n}},r.removeData=function(e,t){var n=e[r.expando],o=n&&a[n];o&&r.each(t,function(e,t){delete o[t]})},r.extend=function(){var e,t,a,n,o,i,s=arguments[0]||{},l=1,u=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[l]||{},l++),"object"!=typeof s&&"function"!==r.type(s)&&(s={}),l===u&&(s=this,l--);u>l;l++)if(null!=(o=arguments[l]))for(n in o)e=s[n],a=o[n],s!==a&&(c&&a&&(r.isPlainObject(a)||(t=r.isArray(a)))?(t?(t=!1,i=e&&r.isArray(e)?e:[]):i=e&&r.isPlainObject(e)?e:{},s[n]=r.extend(c,i,a)):void 0!==a&&(s[n]=a));return s},r.queue=function(e,a,n){function o(e,r){var a=r||[];return null!=e&&(t(Object(e))?!function(e,t){for(var r=+t.length,a=0,n=e.length;r>a;)e[n++]=t[a++];if(r!==r)for(;void 0!==t[a];)e[n++]=t[a++];return e.length=n,e}(a,"string"==typeof e?[e]:e):[].push.call(a,e)),a}if(e){a=(a||"fx")+"queue";var i=r.data(e,a);return n?(!i||r.isArray(n)?i=r.data(e,a,o(n)):i.push(n),i):i||[]}},r.dequeue=function(e,t){r.each(e.nodeType?[e]:e,function(e,a){t=t||"fx";var n=r.queue(a,t),o=n.shift();"inprogress"===o&&(o=n.shift()),o&&("fx"===t&&n.unshift("inprogress"),o.call(a,function(){r.dequeue(a,t)}))})},r.fn=r.prototype={init:function(e){if(e.nodeType)return this[0]=e,this;throw new Error("Not a DOM node.")},offset:function(){var t=this[0].getBoundingClientRect?this[0].getBoundingClientRect():{top:0,left:0};return{top:t.top+(e.pageYOffset||document.scrollTop||0)-(document.clientTop||0),left:t.left+(e.pageXOffset||document.scrollLeft||0)-(document.clientLeft||0)}},position:function(){function e(){for(var e=this.offsetParent||document;e&&"html"===!e.nodeType.toLowerCase&&"static"===e.style.position;)e=e.offsetParent;return e||document}var t=this[0],e=e.apply(t),a=this.offset(),n=/^(?:body|html)$/i.test(e.nodeName)?{top:0,left:0}:r(e).offset();return a.top-=parseFloat(t.style.marginTop)||0,a.left-=parseFloat(t.style.marginLeft)||0,e.style&&(n.top+=parseFloat(e.style.borderTopWidth)||0,n.left+=parseFloat(e.style.borderLeftWidth)||0),{top:a.top-n.top,left:a.left-n.left}}};var a={};r.expando="velocity"+(new Date).getTime(),r.uuid=0;for(var n={},o=n.hasOwnProperty,i=n.toString,s="Boolean Number String Function Array Date RegExp Object Error".split(" "),l=0;l<s.length;l++)n["[object "+s[l]+"]"]=s[l].toLowerCase();r.fn.init.prototype=r.fn,e.Velocity={Utilities:r}}}(window),function(e){"object"==typeof module&&"object"==typeof module.exports?module.exports=e():"function"==typeof define&&define.amd?define(e):e()}(function(){return function(e,t,r,a){function n(e){for(var t=-1,r=e?e.length:0,a=[];++t<r;){var n=e[t];n&&a.push(n)}return a}function o(e){return m.isWrapped(e)?e=[].slice.call(e):m.isNode(e)&&(e=[e]),e}function i(e){var t=f.data(e,"velocity");return null===t?a:t}function s(e){return function(t){return Math.round(t*e)*(1/e)}}function l(e,r,a,n){function o(e,t){return 1-3*t+3*e}function i(e,t){return 3*t-6*e}function s(e){return 3*e}function l(e,t,r){return((o(t,r)*e+i(t,r))*e+s(t))*e}function u(e,t,r){return 3*o(t,r)*e*e+2*i(t,r)*e+s(t)}function c(t,r){for(var n=0;m>n;++n){var o=u(r,e,a);if(0===o)return r;var i=l(r,e,a)-t;r-=i/o}return r}function p(){for(var t=0;b>t;++t)w[t]=l(t*x,e,a)}function f(t,r,n){var o,i,s=0;do i=r+(n-r)/2,o=l(i,e,a)-t,o>0?n=i:r=i;while(Math.abs(o)>h&&++s<v);return i}function d(t){for(var r=0,n=1,o=b-1;n!=o&&w[n]<=t;++n)r+=x;--n;var i=(t-w[n])/(w[n+1]-w[n]),s=r+i*x,l=u(s,e,a);return l>=y?c(t,s):0==l?s:f(t,r,r+x)}function g(){V=!0,(e!=r||a!=n)&&p()}var m=4,y=.001,h=1e-7,v=10,b=11,x=1/(b-1),S="Float32Array"in t;if(4!==arguments.length)return!1;for(var P=0;4>P;++P)if("number"!=typeof arguments[P]||isNaN(arguments[P])||!isFinite(arguments[P]))return!1;e=Math.min(e,1),a=Math.min(a,1),e=Math.max(e,0),a=Math.max(a,0);var w=S?new Float32Array(b):new Array(b),V=!1,C=function(t){return V||g(),e===r&&a===n?t:0===t?0:1===t?1:l(d(t),r,n)};C.getControlPoints=function(){return[{x:e,y:r},{x:a,y:n}]};var T="generateBezier("+[e,r,a,n]+")";return C.toString=function(){return T},C}function u(e,t){var r=e;return m.isString(e)?b.Easings[e]||(r=!1):r=m.isArray(e)&&1===e.length?s.apply(null,e):m.isArray(e)&&2===e.length?x.apply(null,e.concat([t])):m.isArray(e)&&4===e.length?l.apply(null,e):!1,r===!1&&(r=b.Easings[b.defaults.easing]?b.defaults.easing:v),r}function c(e){if(e){var t=(new Date).getTime(),r=b.State.calls.length;r>1e4&&(b.State.calls=n(b.State.calls));for(var o=0;r>o;o++)if(b.State.calls[o]){var s=b.State.calls[o],l=s[0],u=s[2],d=s[3],g=!!d,y=null;d||(d=b.State.calls[o][3]=t-16);for(var h=Math.min((t-d)/u.duration,1),v=0,x=l.length;x>v;v++){var P=l[v],V=P.element;if(i(V)){var C=!1;if(u.display!==a&&null!==u.display&&"none"!==u.display){if("flex"===u.display){var T=["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex"];f.each(T,function(e,t){S.setPropertyValue(V,"display",t)})}S.setPropertyValue(V,"display",u.display)}u.visibility!==a&&"hidden"!==u.visibility&&S.setPropertyValue(V,"visibility",u.visibility);for(var k in P)if("element"!==k){var A,F=P[k],j=m.isString(F.easing)?b.Easings[F.easing]:F.easing;if(1===h)A=F.endValue;else{var E=F.endValue-F.startValue;if(A=F.startValue+E*j(h,u,E),!g&&A===F.currentValue)continue}if(F.currentValue=A,"tween"===k)y=A;else{if(S.Hooks.registered[k]){var H=S.Hooks.getRoot(k),N=i(V).rootPropertyValueCache[H];N&&(F.rootPropertyValue=N)}var L=S.setPropertyValue(V,k,F.currentValue+(0===parseFloat(A)?"":F.unitType),F.rootPropertyValue,F.scrollData);S.Hooks.registered[k]&&(i(V).rootPropertyValueCache[H]=S.Normalizations.registered[H]?S.Normalizations.registered[H]("extract",null,L[1]):L[1]),"transform"===L[0]&&(C=!0)}}u.mobileHA&&i(V).transformCache.translate3d===a&&(i(V).transformCache.translate3d="(0px, 0px, 0px)",C=!0),C&&S.flushTransformCache(V)}}u.display!==a&&"none"!==u.display&&(b.State.calls[o][2].display=!1),u.visibility!==a&&"hidden"!==u.visibility&&(b.State.calls[o][2].visibility=!1),u.progress&&u.progress.call(s[1],s[1],h,Math.max(0,d+u.duration-t),d,y),1===h&&p(o)}}b.State.isTicking&&w(c)}function p(e,t){if(!b.State.calls[e])return!1;for(var r=b.State.calls[e][0],n=b.State.calls[e][1],o=b.State.calls[e][2],s=b.State.calls[e][4],l=!1,u=0,c=r.length;c>u;u++){var p=r[u].element;if(t||o.loop||("none"===o.display&&S.setPropertyValue(p,"display",o.display),"hidden"===o.visibility&&S.setPropertyValue(p,"visibility",o.visibility)),o.loop!==!0&&(f.queue(p)[1]===a||!/\.velocityQueueEntryFlag/i.test(f.queue(p)[1]))&&i(p)){i(p).isAnimating=!1,i(p).rootPropertyValueCache={};var d=!1;f.each(S.Lists.transforms3D,function(e,t){var r=/^scale/.test(t)?1:0,n=i(p).transformCache[t];i(p).transformCache[t]!==a&&new RegExp("^\\("+r+"[^.]").test(n)&&(d=!0,delete i(p).transformCache[t])}),o.mobileHA&&(d=!0,delete i(p).transformCache.translate3d),d&&S.flushTransformCache(p),S.Values.removeClass(p,"velocity-animating")}if(!t&&o.complete&&!o.loop&&u===c-1)try{o.complete.call(n,n)}catch(g){setTimeout(function(){throw g},1)}s&&o.loop!==!0&&s(n),i(p)&&o.loop===!0&&!t&&(f.each(i(p).tweensContainer,function(e,t){/^rotate/.test(e)&&360===parseFloat(t.endValue)&&(t.endValue=0,t.startValue=360),/^backgroundPosition/.test(e)&&100===parseFloat(t.endValue)&&"%"===t.unitType&&(t.endValue=0,t.startValue=100)}),b(p,"reverse",{loop:!0,delay:o.delay})),o.queue!==!1&&f.dequeue(p,o.queue)}b.State.calls[e]=!1;for(var m=0,y=b.State.calls.length;y>m;m++)if(b.State.calls[m]!==!1){l=!0;break}l===!1&&(b.State.isTicking=!1,delete b.State.calls,b.State.calls=[])}var f,d=function(){if(r.documentMode)return r.documentMode;for(var e=7;e>4;e--){var t=r.createElement("div");if(t.innerHTML="<!--[if IE "+e+"]><span></span><![endif]-->",t.getElementsByTagName("span").length)return t=null,e}return a}(),g=function(){var e=0;return t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||function(t){var r,a=(new Date).getTime();return r=Math.max(0,16-(a-e)),e=a+r,setTimeout(function(){t(a+r)},r)}}(),m={isString:function(e){return"string"==typeof e},isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)},isNode:function(e){return e&&e.nodeType},isNodeList:function(e){return"object"==typeof e&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(Object.prototype.toString.call(e))&&e.length!==a&&(0===e.length||"object"==typeof e[0]&&e[0].nodeType>0)},isWrapped:function(e){return e&&(e.jquery||t.Zepto&&t.Zepto.zepto.isZ(e))},isSVG:function(e){return t.SVGElement&&e instanceof t.SVGElement},isEmptyObject:function(e){for(var t in e)return!1;return!0}},y=!1;if(e.fn&&e.fn.jquery?(f=e,y=!0):f=t.Velocity.Utilities,8>=d&&!y)throw new Error("Velocity: IE8 and below require jQuery to be loaded before Velocity.");if(7>=d)return void(jQuery.fn.velocity=jQuery.fn.animate);var h=400,v="swing",b={State:{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isAndroid:/Android/i.test(navigator.userAgent),isGingerbread:/Android 2\.3\.[3-7]/i.test(navigator.userAgent),isChrome:t.chrome,isFirefox:/Firefox/i.test(navigator.userAgent),prefixElement:r.createElement("div"),prefixMatches:{},scrollAnchor:null,scrollPropertyLeft:null,scrollPropertyTop:null,isTicking:!1,calls:[]},CSS:{},Utilities:f,Redirects:{},Easings:{},Promise:t.Promise,defaults:{queue:"",duration:h,easing:v,begin:a,complete:a,progress:a,display:a,visibility:a,loop:!1,delay:!1,mobileHA:!0,_cacheValues:!0},init:function(e){f.data(e,"velocity",{isSVG:m.isSVG(e),isAnimating:!1,computedStyle:null,tweensContainer:null,rootPropertyValueCache:{},transformCache:{}})},hook:null,mock:!1,version:{major:1,minor:2,patch:2},debug:!1};t.pageYOffset!==a?(b.State.scrollAnchor=t,b.State.scrollPropertyLeft="pageXOffset",b.State.scrollPropertyTop="pageYOffset"):(b.State.scrollAnchor=r.documentElement||r.body.parentNode||r.body,b.State.scrollPropertyLeft="scrollLeft",b.State.scrollPropertyTop="scrollTop");var x=function(){function e(e){return-e.tension*e.x-e.friction*e.v}function t(t,r,a){var n={x:t.x+a.dx*r,v:t.v+a.dv*r,tension:t.tension,friction:t.friction};return{dx:n.v,dv:e(n)}}function r(r,a){var n={dx:r.v,dv:e(r)},o=t(r,.5*a,n),i=t(r,.5*a,o),s=t(r,a,i),l=1/6*(n.dx+2*(o.dx+i.dx)+s.dx),u=1/6*(n.dv+2*(o.dv+i.dv)+s.dv);return r.x=r.x+l*a,r.v=r.v+u*a,r}return function a(e,t,n){var o,i,s,l={x:-1,v:0,tension:null,friction:null},u=[0],c=0,p=1e-4,f=.016;for(e=parseFloat(e)||500,t=parseFloat(t)||20,n=n||null,l.tension=e,l.friction=t,o=null!==n,o?(c=a(e,t),i=c/n*f):i=f;s=r(s||l,i),u.push(1+s.x),c+=16,Math.abs(s.x)>p&&Math.abs(s.v)>p;);return o?function(e){return u[e*(u.length-1)|0]}:c}}();b.Easings={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},spring:function(e){return 1-Math.cos(4.5*e*Math.PI)*Math.exp(6*-e)}},f.each([["ease",[.25,.1,.25,1]],["ease-in",[.42,0,1,1]],["ease-out",[0,0,.58,1]],["ease-in-out",[.42,0,.58,1]],["easeInSine",[.47,0,.745,.715]],["easeOutSine",[.39,.575,.565,1]],["easeInOutSine",[.445,.05,.55,.95]],["easeInQuad",[.55,.085,.68,.53]],["easeOutQuad",[.25,.46,.45,.94]],["easeInOutQuad",[.455,.03,.515,.955]],["easeInCubic",[.55,.055,.675,.19]],["easeOutCubic",[.215,.61,.355,1]],["easeInOutCubic",[.645,.045,.355,1]],["easeInQuart",[.895,.03,.685,.22]],["easeOutQuart",[.165,.84,.44,1]],["easeInOutQuart",[.77,0,.175,1]],["easeInQuint",[.755,.05,.855,.06]],["easeOutQuint",[.23,1,.32,1]],["easeInOutQuint",[.86,0,.07,1]],["easeInExpo",[.95,.05,.795,.035]],["easeOutExpo",[.19,1,.22,1]],["easeInOutExpo",[1,0,0,1]],["easeInCirc",[.6,.04,.98,.335]],["easeOutCirc",[.075,.82,.165,1]],["easeInOutCirc",[.785,.135,.15,.86]]],function(e,t){b.Easings[t[0]]=l.apply(null,t[1])});var S=b.CSS={RegEx:{isHex:/^#([A-f\d]{3}){1,2}$/i,valueUnwrap:/^[A-z]+\((.*)\)$/i,wrappedValueAlreadyExtracted:/[0-9.]+ [0-9.]+ [0-9.]+( [0-9.]+)?/,valueSplit:/([A-z]+\(.+\))|(([A-z0-9#-.]+?)(?=\s|$))/gi},Lists:{colors:["fill","stroke","stopColor","color","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","outlineColor"],transformsBase:["translateX","translateY","scale","scaleX","scaleY","skewX","skewY","rotateZ"],transforms3D:["transformPerspective","translateZ","scaleZ","rotateX","rotateY"]},Hooks:{templates:{textShadow:["Color X Y Blur","black 0px 0px 0px"],boxShadow:["Color X Y Blur Spread","black 0px 0px 0px 0px"],clip:["Top Right Bottom Left","0px 0px 0px 0px"],backgroundPosition:["X Y","0% 0%"],transformOrigin:["X Y Z","50% 50% 0px"],perspectiveOrigin:["X Y","50% 50%"]},registered:{},register:function(){for(var e=0;e<S.Lists.colors.length;e++){var t="color"===S.Lists.colors[e]?"0 0 0 1":"255 255 255 1";S.Hooks.templates[S.Lists.colors[e]]=["Red Green Blue Alpha",t]}var r,a,n;if(d)for(r in S.Hooks.templates){a=S.Hooks.templates[r],n=a[0].split(" ");var o=a[1].match(S.RegEx.valueSplit);"Color"===n[0]&&(n.push(n.shift()),o.push(o.shift()),S.Hooks.templates[r]=[n.join(" "),o.join(" ")])}for(r in S.Hooks.templates){a=S.Hooks.templates[r],n=a[0].split(" ");for(var e in n){var i=r+n[e],s=e;S.Hooks.registered[i]=[r,s]}}},getRoot:function(e){var t=S.Hooks.registered[e];return t?t[0]:e},cleanRootPropertyValue:function(e,t){return S.RegEx.valueUnwrap.test(t)&&(t=t.match(S.RegEx.valueUnwrap)[1]),S.Values.isCSSNullValue(t)&&(t=S.Hooks.templates[e][1]),t},extractValue:function(e,t){var r=S.Hooks.registered[e];if(r){var a=r[0],n=r[1];return t=S.Hooks.cleanRootPropertyValue(a,t),t.toString().match(S.RegEx.valueSplit)[n]}return t},injectValue:function(e,t,r){var a=S.Hooks.registered[e];if(a){var n,o,i=a[0],s=a[1];return r=S.Hooks.cleanRootPropertyValue(i,r),n=r.toString().match(S.RegEx.valueSplit),n[s]=t,o=n.join(" ")}return r}},Normalizations:{registered:{clip:function(e,t,r){switch(e){case"name":return"clip";case"extract":var a;return S.RegEx.wrappedValueAlreadyExtracted.test(r)?a=r:(a=r.toString().match(S.RegEx.valueUnwrap),a=a?a[1].replace(/,(\s+)?/g," "):r),a;case"inject":return"rect("+r+")"}},blur:function(e,t,r){switch(e){case"name":return b.State.isFirefox?"filter":"-webkit-filter";case"extract":var a=parseFloat(r);if(!a&&0!==a){var n=r.toString().match(/blur\(([0-9]+[A-z]+)\)/i);a=n?n[1]:0}return a;case"inject":return parseFloat(r)?"blur("+r+")":"none"}},opacity:function(e,t,r){if(8>=d)switch(e){case"name":return"filter";case"extract":var a=r.toString().match(/alpha\(opacity=(.*)\)/i);return r=a?a[1]/100:1;case"inject":return t.style.zoom=1,parseFloat(r)>=1?"":"alpha(opacity="+parseInt(100*parseFloat(r),10)+")"}else switch(e){case"name":return"opacity";case"extract":return r;case"inject":return r}}},register:function(){9>=d||b.State.isGingerbread||(S.Lists.transformsBase=S.Lists.transformsBase.concat(S.Lists.transforms3D));for(var e=0;e<S.Lists.transformsBase.length;e++)!function(){var t=S.Lists.transformsBase[e];S.Normalizations.registered[t]=function(e,r,n){switch(e){case"name":return"transform";case"extract":return i(r)===a||i(r).transformCache[t]===a?/^scale/i.test(t)?1:0:i(r).transformCache[t].replace(/[()]/g,"");case"inject":var o=!1;switch(t.substr(0,t.length-1)){case"translate":o=!/(%|px|em|rem|vw|vh|\d)$/i.test(n);break;case"scal":case"scale":b.State.isAndroid&&i(r).transformCache[t]===a&&1>n&&(n=1),o=!/(\d)$/i.test(n);break;case"skew":o=!/(deg|\d)$/i.test(n);break;case"rotate":o=!/(deg|\d)$/i.test(n)}return o||(i(r).transformCache[t]="("+n+")"),i(r).transformCache[t]}}}();for(var e=0;e<S.Lists.colors.length;e++)!function(){var t=S.Lists.colors[e];S.Normalizations.registered[t]=function(e,r,n){switch(e){case"name":return t;case"extract":var o;if(S.RegEx.wrappedValueAlreadyExtracted.test(n))o=n;else{var i,s={black:"rgb(0, 0, 0)",blue:"rgb(0, 0, 255)",gray:"rgb(128, 128, 128)",green:"rgb(0, 128, 0)",red:"rgb(255, 0, 0)",white:"rgb(255, 255, 255)"};/^[A-z]+$/i.test(n)?i=s[n]!==a?s[n]:s.black:S.RegEx.isHex.test(n)?i="rgb("+S.Values.hexToRgb(n).join(" ")+")":/^rgba?\(/i.test(n)||(i=s.black),o=(i||n).toString().match(S.RegEx.valueUnwrap)[1].replace(/,(\s+)?/g," ")}return 8>=d||3!==o.split(" ").length||(o+=" 1"),o;case"inject":return 8>=d?4===n.split(" ").length&&(n=n.split(/\s+/).slice(0,3).join(" ")):3===n.split(" ").length&&(n+=" 1"),(8>=d?"rgb":"rgba")+"("+n.replace(/\s+/g,",").replace(/\.(\d)+(?=,)/g,"")+")"}}}()}},Names:{camelCase:function(e){return e.replace(/-(\w)/g,function(e,t){return t.toUpperCase()})},SVGAttribute:function(e){var t="width|height|x|y|cx|cy|r|rx|ry|x1|x2|y1|y2";return(d||b.State.isAndroid&&!b.State.isChrome)&&(t+="|transform"),new RegExp("^("+t+")$","i").test(e)},prefixCheck:function(e){if(b.State.prefixMatches[e])return[b.State.prefixMatches[e],!0];for(var t=["","Webkit","Moz","ms","O"],r=0,a=t.length;a>r;r++){var n;if(n=0===r?e:t[r]+e.replace(/^\w/,function(e){return e.toUpperCase()}),m.isString(b.State.prefixElement.style[n]))return b.State.prefixMatches[e]=n,[n,!0]}return[e,!1]}},Values:{hexToRgb:function(e){var t,r=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i;return e=e.replace(r,function(e,t,r,a){return t+t+r+r+a+a}),t=a.exec(e),t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:[0,0,0]},isCSSNullValue:function(e){return 0==e||/^(none|auto|transparent|(rgba\(0, ?0, ?0, ?0\)))$/i.test(e)},getUnitType:function(e){return/^(rotate|skew)/i.test(e)?"deg":/(^(scale|scaleX|scaleY|scaleZ|alpha|flexGrow|flexHeight|zIndex|fontWeight)$)|((opacity|red|green|blue|alpha)$)/i.test(e)?"":"px"},getDisplayType:function(e){var t=e&&e.tagName.toString().toLowerCase();return/^(b|big|i|small|tt|abbr|acronym|cite|code|dfn|em|kbd|strong|samp|var|a|bdo|br|img|map|object|q|script|span|sub|sup|button|input|label|select|textarea)$/i.test(t)?"inline":/^(li)$/i.test(t)?"list-item":/^(tr)$/i.test(t)?"table-row":/^(table)$/i.test(t)?"table":/^(tbody)$/i.test(t)?"table-row-group":"block"},addClass:function(e,t){e.classList?e.classList.add(t):e.className+=(e.className.length?" ":"")+t},removeClass:function(e,t){e.classList?e.classList.remove(t):e.className=e.className.toString().replace(new RegExp("(^|\\s)"+t.split(" ").join("|")+"(\\s|$)","gi")," ")}},getPropertyValue:function(e,r,n,o){function s(e,r){function n(){u&&S.setPropertyValue(e,"display","none")}var l=0;if(8>=d)l=f.css(e,r);else{var u=!1;if(/^(width|height)$/.test(r)&&0===S.getPropertyValue(e,"display")&&(u=!0,S.setPropertyValue(e,"display",S.Values.getDisplayType(e))),!o){if("height"===r&&"border-box"!==S.getPropertyValue(e,"boxSizing").toString().toLowerCase()){var c=e.offsetHeight-(parseFloat(S.getPropertyValue(e,"borderTopWidth"))||0)-(parseFloat(S.getPropertyValue(e,"borderBottomWidth"))||0)-(parseFloat(S.getPropertyValue(e,"paddingTop"))||0)-(parseFloat(S.getPropertyValue(e,"paddingBottom"))||0);return n(),c}if("width"===r&&"border-box"!==S.getPropertyValue(e,"boxSizing").toString().toLowerCase()){var p=e.offsetWidth-(parseFloat(S.getPropertyValue(e,"borderLeftWidth"))||0)-(parseFloat(S.getPropertyValue(e,"borderRightWidth"))||0)-(parseFloat(S.getPropertyValue(e,"paddingLeft"))||0)-(parseFloat(S.getPropertyValue(e,"paddingRight"))||0);return n(),p}}var g;g=i(e)===a?t.getComputedStyle(e,null):i(e).computedStyle?i(e).computedStyle:i(e).computedStyle=t.getComputedStyle(e,null),"borderColor"===r&&(r="borderTopColor"),l=9===d&&"filter"===r?g.getPropertyValue(r):g[r],(""===l||null===l)&&(l=e.style[r]),n()}if("auto"===l&&/^(top|right|bottom|left)$/i.test(r)){var m=s(e,"position");("fixed"===m||"absolute"===m&&/top|left/i.test(r))&&(l=f(e).position()[r]+"px")}return l}var l;if(S.Hooks.registered[r]){var u=r,c=S.Hooks.getRoot(u);n===a&&(n=S.getPropertyValue(e,S.Names.prefixCheck(c)[0])),S.Normalizations.registered[c]&&(n=S.Normalizations.registered[c]("extract",e,n)),l=S.Hooks.extractValue(u,n)}else if(S.Normalizations.registered[r]){var p,g;p=S.Normalizations.registered[r]("name",e),"transform"!==p&&(g=s(e,S.Names.prefixCheck(p)[0]),S.Values.isCSSNullValue(g)&&S.Hooks.templates[r]&&(g=S.Hooks.templates[r][1])),l=S.Normalizations.registered[r]("extract",e,g)}if(!/^[\d-]/.test(l))if(i(e)&&i(e).isSVG&&S.Names.SVGAttribute(r))if(/^(height|width)$/i.test(r))try{l=e.getBBox()[r]}catch(m){l=0}else l=e.getAttribute(r);else l=s(e,S.Names.prefixCheck(r)[0]);return S.Values.isCSSNullValue(l)&&(l=0),b.debug>=2&&console.log("Get "+r+": "+l),l},setPropertyValue:function(e,r,a,n,o){var s=r;if("scroll"===r)o.container?o.container["scroll"+o.direction]=a:"Left"===o.direction?t.scrollTo(a,o.alternateValue):t.scrollTo(o.alternateValue,a);else if(S.Normalizations.registered[r]&&"transform"===S.Normalizations.registered[r]("name",e))S.Normalizations.registered[r]("inject",e,a),s="transform",a=i(e).transformCache[r];else{if(S.Hooks.registered[r]){var l=r,u=S.Hooks.getRoot(r);n=n||S.getPropertyValue(e,u),a=S.Hooks.injectValue(l,a,n),r=u}if(S.Normalizations.registered[r]&&(a=S.Normalizations.registered[r]("inject",e,a),r=S.Normalizations.registered[r]("name",e)),s=S.Names.prefixCheck(r)[0],8>=d)try{e.style[s]=a}catch(c){b.debug&&console.log("Browser does not support ["+a+"] for ["+s+"]")}else i(e)&&i(e).isSVG&&S.Names.SVGAttribute(r)?e.setAttribute(r,a):e.style[s]=a;b.debug>=2&&console.log("Set "+r+" ("+s+"): "+a)}return[s,a]},flushTransformCache:function(e){function t(t){return parseFloat(S.getPropertyValue(e,t))}var r="";if((d||b.State.isAndroid&&!b.State.isChrome)&&i(e).isSVG){var a={translate:[t("translateX"),t("translateY")],skewX:[t("skewX")],skewY:[t("skewY")],scale:1!==t("scale")?[t("scale"),t("scale")]:[t("scaleX"),t("scaleY")],rotate:[t("rotateZ"),0,0]};f.each(i(e).transformCache,function(e){/^translate/i.test(e)?e="translate":/^scale/i.test(e)?e="scale":/^rotate/i.test(e)&&(e="rotate"),a[e]&&(r+=e+"("+a[e].join(" ")+") ",delete a[e])})}else{var n,o;f.each(i(e).transformCache,function(t){return n=i(e).transformCache[t],"transformPerspective"===t?(o=n,!0):(9===d&&"rotateZ"===t&&(t="rotate"),void(r+=t+n+" "))}),o&&(r="perspective"+o+" "+r)}S.setPropertyValue(e,"transform",r)}};S.Hooks.register(),S.Normalizations.register(),b.hook=function(e,t,r){var n=a;return e=o(e),f.each(e,function(e,o){if(i(o)===a&&b.init(o),r===a)n===a&&(n=b.CSS.getPropertyValue(o,t));else{var s=b.CSS.setPropertyValue(o,t,r);"transform"===s[0]&&b.CSS.flushTransformCache(o),n=s}}),n};var P=function(){function e(){return s?k.promise||null:l}function n(){function e(e){function p(e,t){var r=a,n=a,i=a;return m.isArray(e)?(r=e[0],!m.isArray(e[1])&&/^[\d-]/.test(e[1])||m.isFunction(e[1])||S.RegEx.isHex.test(e[1])?i=e[1]:(m.isString(e[1])&&!S.RegEx.isHex.test(e[1])||m.isArray(e[1]))&&(n=t?e[1]:u(e[1],s.duration),e[2]!==a&&(i=e[2]))):r=e,t||(n=n||s.easing),m.isFunction(r)&&(r=r.call(o,V,w)),m.isFunction(i)&&(i=i.call(o,V,w)),[r||0,n,i]}function d(e,t){var r,a;return a=(t||"0").toString().toLowerCase().replace(/[%A-z]+$/,function(e){return r=e,""}),r||(r=S.Values.getUnitType(e)),[a,r]}function h(){var e={myParent:o.parentNode||r.body,position:S.getPropertyValue(o,"position"),fontSize:S.getPropertyValue(o,"fontSize")},a=e.position===L.lastPosition&&e.myParent===L.lastParent,n=e.fontSize===L.lastFontSize;L.lastParent=e.myParent,L.lastPosition=e.position,L.lastFontSize=e.fontSize;var s=100,l={};if(n&&a)l.emToPx=L.lastEmToPx,l.percentToPxWidth=L.lastPercentToPxWidth,l.percentToPxHeight=L.lastPercentToPxHeight;else{var u=i(o).isSVG?r.createElementNS("http://www.w3.org/2000/svg","rect"):r.createElement("div");b.init(u),e.myParent.appendChild(u),f.each(["overflow","overflowX","overflowY"],function(e,t){b.CSS.setPropertyValue(u,t,"hidden")}),b.CSS.setPropertyValue(u,"position",e.position),b.CSS.setPropertyValue(u,"fontSize",e.fontSize),b.CSS.setPropertyValue(u,"boxSizing","content-box"),f.each(["minWidth","maxWidth","width","minHeight","maxHeight","height"],function(e,t){b.CSS.setPropertyValue(u,t,s+"%")}),b.CSS.setPropertyValue(u,"paddingLeft",s+"em"),l.percentToPxWidth=L.lastPercentToPxWidth=(parseFloat(S.getPropertyValue(u,"width",null,!0))||1)/s,l.percentToPxHeight=L.lastPercentToPxHeight=(parseFloat(S.getPropertyValue(u,"height",null,!0))||1)/s,l.emToPx=L.lastEmToPx=(parseFloat(S.getPropertyValue(u,"paddingLeft"))||1)/s,e.myParent.removeChild(u)}return null===L.remToPx&&(L.remToPx=parseFloat(S.getPropertyValue(r.body,"fontSize"))||16),null===L.vwToPx&&(L.vwToPx=parseFloat(t.innerWidth)/100,L.vhToPx=parseFloat(t.innerHeight)/100),l.remToPx=L.remToPx,l.vwToPx=L.vwToPx,l.vhToPx=L.vhToPx,b.debug>=1&&console.log("Unit ratios: "+JSON.stringify(l),o),l}if(s.begin&&0===V)try{s.begin.call(g,g)}catch(x){setTimeout(function(){throw x},1)}if("scroll"===A){var P,C,T,F=/^x$/i.test(s.axis)?"Left":"Top",j=parseFloat(s.offset)||0;s.container?m.isWrapped(s.container)||m.isNode(s.container)?(s.container=s.container[0]||s.container,P=s.container["scroll"+F],T=P+f(o).position()[F.toLowerCase()]+j):s.container=null:(P=b.State.scrollAnchor[b.State["scrollProperty"+F]],C=b.State.scrollAnchor[b.State["scrollProperty"+("Left"===F?"Top":"Left")]],T=f(o).offset()[F.toLowerCase()]+j),l={scroll:{rootPropertyValue:!1,startValue:P,currentValue:P,endValue:T,unitType:"",easing:s.easing,scrollData:{container:s.container,direction:F,alternateValue:C}},element:o},b.debug&&console.log("tweensContainer (scroll): ",l.scroll,o)}else if("reverse"===A){if(!i(o).tweensContainer)return void f.dequeue(o,s.queue);"none"===i(o).opts.display&&(i(o).opts.display="auto"),"hidden"===i(o).opts.visibility&&(i(o).opts.visibility="visible"),i(o).opts.loop=!1,i(o).opts.begin=null,i(o).opts.complete=null,v.easing||delete s.easing,v.duration||delete s.duration,s=f.extend({},i(o).opts,s);var E=f.extend(!0,{},i(o).tweensContainer);for(var H in E)if("element"!==H){var N=E[H].startValue;E[H].startValue=E[H].currentValue=E[H].endValue,E[H].endValue=N,m.isEmptyObject(v)||(E[H].easing=s.easing),b.debug&&console.log("reverse tweensContainer ("+H+"): "+JSON.stringify(E[H]),o)}l=E}else if("start"===A){var E;i(o).tweensContainer&&i(o).isAnimating===!0&&(E=i(o).tweensContainer),f.each(y,function(e,t){if(RegExp("^"+S.Lists.colors.join("$|^")+"$").test(e)){var r=p(t,!0),n=r[0],o=r[1],i=r[2];if(S.RegEx.isHex.test(n)){for(var s=["Red","Green","Blue"],l=S.Values.hexToRgb(n),u=i?S.Values.hexToRgb(i):a,c=0;c<s.length;c++){var f=[l[c]];o&&f.push(o),u!==a&&f.push(u[c]),y[e+s[c]]=f}delete y[e]}}});for(var z in y){var O=p(y[z]),q=O[0],$=O[1],M=O[2];z=S.Names.camelCase(z);var I=S.Hooks.getRoot(z),B=!1;if(i(o).isSVG||"tween"===I||S.Names.prefixCheck(I)[1]!==!1||S.Normalizations.registered[I]!==a){(s.display!==a&&null!==s.display&&"none"!==s.display||s.visibility!==a&&"hidden"!==s.visibility)&&/opacity|filter/.test(z)&&!M&&0!==q&&(M=0),s._cacheValues&&E&&E[z]?(M===a&&(M=E[z].endValue+E[z].unitType),B=i(o).rootPropertyValueCache[I]):S.Hooks.registered[z]?M===a?(B=S.getPropertyValue(o,I),M=S.getPropertyValue(o,z,B)):B=S.Hooks.templates[I][1]:M===a&&(M=S.getPropertyValue(o,z));var W,G,Y,D=!1;if(W=d(z,M),M=W[0],Y=W[1],W=d(z,q),q=W[0].replace(/^([+-\/*])=/,function(e,t){return D=t,""}),G=W[1],M=parseFloat(M)||0,q=parseFloat(q)||0,"%"===G&&(/^(fontSize|lineHeight)$/.test(z)?(q/=100,G="em"):/^scale/.test(z)?(q/=100,G=""):/(Red|Green|Blue)$/i.test(z)&&(q=q/100*255,G="")),/[\/*]/.test(D))G=Y;else if(Y!==G&&0!==M)if(0===q)G=Y;else{n=n||h();var Q=/margin|padding|left|right|width|text|word|letter/i.test(z)||/X$/.test(z)||"x"===z?"x":"y";switch(Y){case"%":M*="x"===Q?n.percentToPxWidth:n.percentToPxHeight;break;case"px":break;default:M*=n[Y+"ToPx"]}switch(G){case"%":M*=1/("x"===Q?n.percentToPxWidth:n.percentToPxHeight);break;case"px":break;default:M*=1/n[G+"ToPx"]}}switch(D){case"+":q=M+q;break;case"-":q=M-q;break;case"*":q=M*q;break;case"/":q=M/q}l[z]={rootPropertyValue:B,startValue:M,currentValue:M,endValue:q,unitType:G,easing:$},b.debug&&console.log("tweensContainer ("+z+"): "+JSON.stringify(l[z]),o)}else b.debug&&console.log("Skipping ["+I+"] due to a lack of browser support.")}l.element=o}l.element&&(S.Values.addClass(o,"velocity-animating"),R.push(l),""===s.queue&&(i(o).tweensContainer=l,i(o).opts=s),i(o).isAnimating=!0,V===w-1?(b.State.calls.push([R,g,s,null,k.resolver]),b.State.isTicking===!1&&(b.State.isTicking=!0,c())):V++)}var n,o=this,s=f.extend({},b.defaults,v),l={};switch(i(o)===a&&b.init(o),parseFloat(s.delay)&&s.queue!==!1&&f.queue(o,s.queue,function(e){b.velocityQueueEntryFlag=!0,i(o).delayTimer={setTimeout:setTimeout(e,parseFloat(s.delay)),next:e}}),s.duration.toString().toLowerCase()){case"fast":s.duration=200;break;case"normal":s.duration=h;break;case"slow":s.duration=600;break;default:s.duration=parseFloat(s.duration)||1}b.mock!==!1&&(b.mock===!0?s.duration=s.delay=1:(s.duration*=parseFloat(b.mock)||1,s.delay*=parseFloat(b.mock)||1)),s.easing=u(s.easing,s.duration),s.begin&&!m.isFunction(s.begin)&&(s.begin=null),s.progress&&!m.isFunction(s.progress)&&(s.progress=null),s.complete&&!m.isFunction(s.complete)&&(s.complete=null),s.display!==a&&null!==s.display&&(s.display=s.display.toString().toLowerCase(),"auto"===s.display&&(s.display=b.CSS.Values.getDisplayType(o))),s.visibility!==a&&null!==s.visibility&&(s.visibility=s.visibility.toString().toLowerCase()),s.mobileHA=s.mobileHA&&b.State.isMobile&&!b.State.isGingerbread,s.queue===!1?s.delay?setTimeout(e,s.delay):e():f.queue(o,s.queue,function(t,r){return r===!0?(k.promise&&k.resolver(g),!0):(b.velocityQueueEntryFlag=!0,void e(t))}),""!==s.queue&&"fx"!==s.queue||"inprogress"===f.queue(o)[0]||f.dequeue(o)}var s,l,d,g,y,v,x=arguments[0]&&(arguments[0].p||f.isPlainObject(arguments[0].properties)&&!arguments[0].properties.names||m.isString(arguments[0].properties));if(m.isWrapped(this)?(s=!1,d=0,g=this,l=this):(s=!0,d=1,g=x?arguments[0].elements||arguments[0].e:arguments[0]),g=o(g)){x?(y=arguments[0].properties||arguments[0].p,v=arguments[0].options||arguments[0].o):(y=arguments[d],v=arguments[d+1]);var w=g.length,V=0;if(!/^(stop|finish)$/i.test(y)&&!f.isPlainObject(v)){var C=d+1;v={};for(var T=C;T<arguments.length;T++)m.isArray(arguments[T])||!/^(fast|normal|slow)$/i.test(arguments[T])&&!/^\d/.test(arguments[T])?m.isString(arguments[T])||m.isArray(arguments[T])?v.easing=arguments[T]:m.isFunction(arguments[T])&&(v.complete=arguments[T]):v.duration=arguments[T]}var k={promise:null,resolver:null,rejecter:null};s&&b.Promise&&(k.promise=new b.Promise(function(e,t){k.resolver=e,k.rejecter=t}));var A;switch(y){case"scroll":A="scroll";break;case"reverse":A="reverse";break;case"finish":case"stop":f.each(g,function(e,t){i(t)&&i(t).delayTimer&&(clearTimeout(i(t).delayTimer.setTimeout),i(t).delayTimer.next&&i(t).delayTimer.next(),delete i(t).delayTimer)});var F=[];return f.each(b.State.calls,function(e,t){t&&f.each(t[1],function(r,n){var o=v===a?"":v;return o===!0||t[2].queue===o||v===a&&t[2].queue===!1?void f.each(g,function(r,a){a===n&&((v===!0||m.isString(v))&&(f.each(f.queue(a,m.isString(v)?v:""),function(e,t){
m.isFunction(t)&&t(null,!0)}),f.queue(a,m.isString(v)?v:"",[])),"stop"===y?(i(a)&&i(a).tweensContainer&&o!==!1&&f.each(i(a).tweensContainer,function(e,t){t.endValue=t.currentValue}),F.push(e)):"finish"===y&&(t[2].duration=1))}):!0})}),"stop"===y&&(f.each(F,function(e,t){p(t,!0)}),k.promise&&k.resolver(g)),e();default:if(!f.isPlainObject(y)||m.isEmptyObject(y)){if(m.isString(y)&&b.Redirects[y]){var j=f.extend({},v),E=j.duration,H=j.delay||0;return j.backwards===!0&&(g=f.extend(!0,[],g).reverse()),f.each(g,function(e,t){parseFloat(j.stagger)?j.delay=H+parseFloat(j.stagger)*e:m.isFunction(j.stagger)&&(j.delay=H+j.stagger.call(t,e,w)),j.drag&&(j.duration=parseFloat(E)||(/^(callout|transition)/.test(y)?1e3:h),j.duration=Math.max(j.duration*(j.backwards?1-e/w:(e+1)/w),.75*j.duration,200)),b.Redirects[y].call(t,t,j||{},e,w,g,k.promise?k:a)}),e()}var N="Velocity: First argument ("+y+") was not a property map, a known action, or a registered redirect. Aborting.";return k.promise?k.rejecter(new Error(N)):console.log(N),e()}A="start"}var L={lastParent:null,lastPosition:null,lastFontSize:null,lastPercentToPxWidth:null,lastPercentToPxHeight:null,lastEmToPx:null,remToPx:null,vwToPx:null,vhToPx:null},R=[];f.each(g,function(e,t){m.isNode(t)&&n.call(t)});var z,j=f.extend({},b.defaults,v);if(j.loop=parseInt(j.loop),z=2*j.loop-1,j.loop)for(var O=0;z>O;O++){var q={delay:j.delay,progress:j.progress};O===z-1&&(q.display=j.display,q.visibility=j.visibility,q.complete=j.complete),P(g,"reverse",q)}return e()}};b=f.extend(P,b),b.animate=P;var w=t.requestAnimationFrame||g;return b.State.isMobile||r.hidden===a||r.addEventListener("visibilitychange",function(){r.hidden?(w=function(e){return setTimeout(function(){e(!0)},16)},c()):w=t.requestAnimationFrame||g}),e.Velocity=b,e!==t&&(e.fn.velocity=P,e.fn.velocity.defaults=b.defaults),f.each(["Down","Up"],function(e,t){b.Redirects["slide"+t]=function(e,r,n,o,i,s){var l=f.extend({},r),u=l.begin,c=l.complete,p={height:"",marginTop:"",marginBottom:"",paddingTop:"",paddingBottom:""},d={};l.display===a&&(l.display="Down"===t?"inline"===b.CSS.Values.getDisplayType(e)?"inline-block":"block":"none"),l.begin=function(){u&&u.call(i,i);for(var r in p){d[r]=e.style[r];var a=b.CSS.getPropertyValue(e,r);p[r]="Down"===t?[a,0]:[0,a]}d.overflow=e.style.overflow,e.style.overflow="hidden"},l.complete=function(){for(var t in d)e.style[t]=d[t];c&&c.call(i,i),s&&s.resolver(i)},b(e,p,l)}}),f.each(["In","Out"],function(e,t){b.Redirects["fade"+t]=function(e,r,n,o,i,s){var l=f.extend({},r),u={opacity:"In"===t?1:0},c=l.complete;l.complete=n!==o-1?l.begin=null:function(){c&&c.call(i,i),s&&s.resolver(i)},l.display===a&&(l.display="In"===t?"auto":"none"),b(this,u,l)}}),b}(window.jQuery||window.Zepto||window,window,document)}));
;!function(a,b,c,d){"use strict";function k(a,b,c){return setTimeout(q(a,c),b)}function l(a,b,c){return Array.isArray(a)?(m(a,c[b],c),!0):!1}function m(a,b,c){var e;if(a)if(a.forEach)a.forEach(b,c);else if(a.length!==d)for(e=0;e<a.length;)b.call(c,a[e],e,a),e++;else for(e in a)a.hasOwnProperty(e)&&b.call(c,a[e],e,a)}function n(a,b,c){for(var e=Object.keys(b),f=0;f<e.length;)(!c||c&&a[e[f]]===d)&&(a[e[f]]=b[e[f]]),f++;return a}function o(a,b){return n(a,b,!0)}function p(a,b,c){var e,d=b.prototype;e=a.prototype=Object.create(d),e.constructor=a,e._super=d,c&&n(e,c)}function q(a,b){return function(){return a.apply(b,arguments)}}function r(a,b){return typeof a==g?a.apply(b?b[0]||d:d,b):a}function s(a,b){return a===d?b:a}function t(a,b,c){m(x(b),function(b){a.addEventListener(b,c,!1)})}function u(a,b,c){m(x(b),function(b){a.removeEventListener(b,c,!1)})}function v(a,b){for(;a;){if(a==b)return!0;a=a.parentNode}return!1}function w(a,b){return a.indexOf(b)>-1}function x(a){return a.trim().split(/\s+/g)}function y(a,b,c){if(a.indexOf&&!c)return a.indexOf(b);for(var d=0;d<a.length;){if(c&&a[d][c]==b||!c&&a[d]===b)return d;d++}return-1}function z(a){return Array.prototype.slice.call(a,0)}function A(a,b,c){for(var d=[],e=[],f=0;f<a.length;){var g=b?a[f][b]:a[f];y(e,g)<0&&d.push(a[f]),e[f]=g,f++}return c&&(d=b?d.sort(function(a,c){return a[b]>c[b]}):d.sort()),d}function B(a,b){for(var c,f,g=b[0].toUpperCase()+b.slice(1),h=0;h<e.length;){if(c=e[h],f=c?c+g:b,f in a)return f;h++}return d}function D(){return C++}function E(a){var b=a.ownerDocument;return b.defaultView||b.parentWindow}function ab(a,b){var c=this;this.manager=a,this.callback=b,this.element=a.element,this.target=a.options.inputTarget,this.domHandler=function(b){r(a.options.enable,[a])&&c.handler(b)},this.init()}function bb(a){var b,c=a.options.inputClass;return b=c?c:H?wb:I?Eb:G?Gb:rb,new b(a,cb)}function cb(a,b,c){var d=c.pointers.length,e=c.changedPointers.length,f=b&O&&0===d-e,g=b&(Q|R)&&0===d-e;c.isFirst=!!f,c.isFinal=!!g,f&&(a.session={}),c.eventType=b,db(a,c),a.emit("hammer.input",c),a.recognize(c),a.session.prevInput=c}function db(a,b){var c=a.session,d=b.pointers,e=d.length;c.firstInput||(c.firstInput=gb(b)),e>1&&!c.firstMultiple?c.firstMultiple=gb(b):1===e&&(c.firstMultiple=!1);var f=c.firstInput,g=c.firstMultiple,h=g?g.center:f.center,i=b.center=hb(d);b.timeStamp=j(),b.deltaTime=b.timeStamp-f.timeStamp,b.angle=lb(h,i),b.distance=kb(h,i),eb(c,b),b.offsetDirection=jb(b.deltaX,b.deltaY),b.scale=g?nb(g.pointers,d):1,b.rotation=g?mb(g.pointers,d):0,fb(c,b);var k=a.element;v(b.srcEvent.target,k)&&(k=b.srcEvent.target),b.target=k}function eb(a,b){var c=b.center,d=a.offsetDelta||{},e=a.prevDelta||{},f=a.prevInput||{};(b.eventType===O||f.eventType===Q)&&(e=a.prevDelta={x:f.deltaX||0,y:f.deltaY||0},d=a.offsetDelta={x:c.x,y:c.y}),b.deltaX=e.x+(c.x-d.x),b.deltaY=e.y+(c.y-d.y)}function fb(a,b){var f,g,h,j,c=a.lastInterval||b,e=b.timeStamp-c.timeStamp;if(b.eventType!=R&&(e>N||c.velocity===d)){var k=c.deltaX-b.deltaX,l=c.deltaY-b.deltaY,m=ib(e,k,l);g=m.x,h=m.y,f=i(m.x)>i(m.y)?m.x:m.y,j=jb(k,l),a.lastInterval=b}else f=c.velocity,g=c.velocityX,h=c.velocityY,j=c.direction;b.velocity=f,b.velocityX=g,b.velocityY=h,b.direction=j}function gb(a){for(var b=[],c=0;c<a.pointers.length;)b[c]={clientX:h(a.pointers[c].clientX),clientY:h(a.pointers[c].clientY)},c++;return{timeStamp:j(),pointers:b,center:hb(b),deltaX:a.deltaX,deltaY:a.deltaY}}function hb(a){var b=a.length;if(1===b)return{x:h(a[0].clientX),y:h(a[0].clientY)};for(var c=0,d=0,e=0;b>e;)c+=a[e].clientX,d+=a[e].clientY,e++;return{x:h(c/b),y:h(d/b)}}function ib(a,b,c){return{x:b/a||0,y:c/a||0}}function jb(a,b){return a===b?S:i(a)>=i(b)?a>0?T:U:b>0?V:W}function kb(a,b,c){c||(c=$);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return Math.sqrt(d*d+e*e)}function lb(a,b,c){c||(c=$);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return 180*Math.atan2(e,d)/Math.PI}function mb(a,b){return lb(b[1],b[0],_)-lb(a[1],a[0],_)}function nb(a,b){return kb(b[0],b[1],_)/kb(a[0],a[1],_)}function rb(){this.evEl=pb,this.evWin=qb,this.allow=!0,this.pressed=!1,ab.apply(this,arguments)}function wb(){this.evEl=ub,this.evWin=vb,ab.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function Ab(){this.evTarget=yb,this.evWin=zb,this.started=!1,ab.apply(this,arguments)}function Bb(a,b){var c=z(a.touches),d=z(a.changedTouches);return b&(Q|R)&&(c=A(c.concat(d),"identifier",!0)),[c,d]}function Eb(){this.evTarget=Db,this.targetIds={},ab.apply(this,arguments)}function Fb(a,b){var c=z(a.touches),d=this.targetIds;if(b&(O|P)&&1===c.length)return d[c[0].identifier]=!0,[c,c];var e,f,g=z(a.changedTouches),h=[],i=this.target;if(f=c.filter(function(a){return v(a.target,i)}),b===O)for(e=0;e<f.length;)d[f[e].identifier]=!0,e++;for(e=0;e<g.length;)d[g[e].identifier]&&h.push(g[e]),b&(Q|R)&&delete d[g[e].identifier],e++;return h.length?[A(f.concat(h),"identifier",!0),h]:void 0}function Gb(){ab.apply(this,arguments);var a=q(this.handler,this);this.touch=new Eb(this.manager,a),this.mouse=new rb(this.manager,a)}function Pb(a,b){this.manager=a,this.set(b)}function Qb(a){if(w(a,Mb))return Mb;var b=w(a,Nb),c=w(a,Ob);return b&&c?Nb+" "+Ob:b||c?b?Nb:Ob:w(a,Lb)?Lb:Kb}function Yb(a){this.id=D(),this.manager=null,this.options=o(a||{},this.defaults),this.options.enable=s(this.options.enable,!0),this.state=Rb,this.simultaneous={},this.requireFail=[]}function Zb(a){return a&Wb?"cancel":a&Ub?"end":a&Tb?"move":a&Sb?"start":""}function $b(a){return a==W?"down":a==V?"up":a==T?"left":a==U?"right":""}function _b(a,b){var c=b.manager;return c?c.get(a):a}function ac(){Yb.apply(this,arguments)}function bc(){ac.apply(this,arguments),this.pX=null,this.pY=null}function cc(){ac.apply(this,arguments)}function dc(){Yb.apply(this,arguments),this._timer=null,this._input=null}function ec(){ac.apply(this,arguments)}function fc(){ac.apply(this,arguments)}function gc(){Yb.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function hc(a,b){return b=b||{},b.recognizers=s(b.recognizers,hc.defaults.preset),new kc(a,b)}function kc(a,b){b=b||{},this.options=o(b,hc.defaults),this.options.inputTarget=this.options.inputTarget||a,this.handlers={},this.session={},this.recognizers=[],this.element=a,this.input=bb(this),this.touchAction=new Pb(this,this.options.touchAction),lc(this,!0),m(b.recognizers,function(a){var b=this.add(new a[0](a[1]));a[2]&&b.recognizeWith(a[2]),a[3]&&b.requireFailure(a[3])},this)}function lc(a,b){var c=a.element;m(a.options.cssProps,function(a,d){c.style[B(c.style,d)]=b?a:""})}function mc(a,c){var d=b.createEvent("Event");d.initEvent(a,!0,!0),d.gesture=c,c.target.dispatchEvent(d)}var e=["","webkit","moz","MS","ms","o"],f=b.createElement("div"),g="function",h=Math.round,i=Math.abs,j=Date.now,C=1,F=/mobile|tablet|ip(ad|hone|od)|android/i,G="ontouchstart"in a,H=B(a,"PointerEvent")!==d,I=G&&F.test(navigator.userAgent),J="touch",K="pen",L="mouse",M="kinect",N=25,O=1,P=2,Q=4,R=8,S=1,T=2,U=4,V=8,W=16,X=T|U,Y=V|W,Z=X|Y,$=["x","y"],_=["clientX","clientY"];ab.prototype={handler:function(){},init:function(){this.evEl&&t(this.element,this.evEl,this.domHandler),this.evTarget&&t(this.target,this.evTarget,this.domHandler),this.evWin&&t(E(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&u(this.element,this.evEl,this.domHandler),this.evTarget&&u(this.target,this.evTarget,this.domHandler),this.evWin&&u(E(this.element),this.evWin,this.domHandler)}};var ob={mousedown:O,mousemove:P,mouseup:Q},pb="mousedown",qb="mousemove mouseup";p(rb,ab,{handler:function(a){var b=ob[a.type];b&O&&0===a.button&&(this.pressed=!0),b&P&&1!==a.which&&(b=Q),this.pressed&&this.allow&&(b&Q&&(this.pressed=!1),this.callback(this.manager,b,{pointers:[a],changedPointers:[a],pointerType:L,srcEvent:a}))}});var sb={pointerdown:O,pointermove:P,pointerup:Q,pointercancel:R,pointerout:R},tb={2:J,3:K,4:L,5:M},ub="pointerdown",vb="pointermove pointerup pointercancel";a.MSPointerEvent&&(ub="MSPointerDown",vb="MSPointerMove MSPointerUp MSPointerCancel"),p(wb,ab,{handler:function(a){var b=this.store,c=!1,d=a.type.toLowerCase().replace("ms",""),e=sb[d],f=tb[a.pointerType]||a.pointerType,g=f==J,h=y(b,a.pointerId,"pointerId");e&O&&(0===a.button||g)?0>h&&(b.push(a),h=b.length-1):e&(Q|R)&&(c=!0),0>h||(b[h]=a,this.callback(this.manager,e,{pointers:b,changedPointers:[a],pointerType:f,srcEvent:a}),c&&b.splice(h,1))}});var xb={touchstart:O,touchmove:P,touchend:Q,touchcancel:R},yb="touchstart",zb="touchstart touchmove touchend touchcancel";p(Ab,ab,{handler:function(a){var b=xb[a.type];if(b===O&&(this.started=!0),this.started){var c=Bb.call(this,a,b);b&(Q|R)&&0===c[0].length-c[1].length&&(this.started=!1),this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:J,srcEvent:a})}}});var Cb={touchstart:O,touchmove:P,touchend:Q,touchcancel:R},Db="touchstart touchmove touchend touchcancel";p(Eb,ab,{handler:function(a){var b=Cb[a.type],c=Fb.call(this,a,b);c&&this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:J,srcEvent:a})}}),p(Gb,ab,{handler:function(a,b,c){var d=c.pointerType==J,e=c.pointerType==L;if(d)this.mouse.allow=!1;else if(e&&!this.mouse.allow)return;b&(Q|R)&&(this.mouse.allow=!0),this.callback(a,b,c)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Hb=B(f.style,"touchAction"),Ib=Hb!==d,Jb="compute",Kb="auto",Lb="manipulation",Mb="none",Nb="pan-x",Ob="pan-y";Pb.prototype={set:function(a){a==Jb&&(a=this.compute()),Ib&&(this.manager.element.style[Hb]=a),this.actions=a.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var a=[];return m(this.manager.recognizers,function(b){r(b.options.enable,[b])&&(a=a.concat(b.getTouchAction()))}),Qb(a.join(" "))},preventDefaults:function(a){if(!Ib){var b=a.srcEvent,c=a.offsetDirection;if(this.manager.session.prevented)return b.preventDefault(),void 0;var d=this.actions,e=w(d,Mb),f=w(d,Ob),g=w(d,Nb);return e||f&&c&X||g&&c&Y?this.preventSrc(b):void 0}},preventSrc:function(a){this.manager.session.prevented=!0,a.preventDefault()}};var Rb=1,Sb=2,Tb=4,Ub=8,Vb=Ub,Wb=16,Xb=32;Yb.prototype={defaults:{},set:function(a){return n(this.options,a),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(a){if(l(a,"recognizeWith",this))return this;var b=this.simultaneous;return a=_b(a,this),b[a.id]||(b[a.id]=a,a.recognizeWith(this)),this},dropRecognizeWith:function(a){return l(a,"dropRecognizeWith",this)?this:(a=_b(a,this),delete this.simultaneous[a.id],this)},requireFailure:function(a){if(l(a,"requireFailure",this))return this;var b=this.requireFail;return a=_b(a,this),-1===y(b,a)&&(b.push(a),a.requireFailure(this)),this},dropRequireFailure:function(a){if(l(a,"dropRequireFailure",this))return this;a=_b(a,this);var b=y(this.requireFail,a);return b>-1&&this.requireFail.splice(b,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(a){return!!this.simultaneous[a.id]},emit:function(a){function d(d){b.manager.emit(b.options.event+(d?Zb(c):""),a)}var b=this,c=this.state;Ub>c&&d(!0),d(),c>=Ub&&d(!0)},tryEmit:function(a){return this.canEmit()?this.emit(a):(this.state=Xb,void 0)},canEmit:function(){for(var a=0;a<this.requireFail.length;){if(!(this.requireFail[a].state&(Xb|Rb)))return!1;a++}return!0},recognize:function(a){var b=n({},a);return r(this.options.enable,[this,b])?(this.state&(Vb|Wb|Xb)&&(this.state=Rb),this.state=this.process(b),this.state&(Sb|Tb|Ub|Wb)&&this.tryEmit(b),void 0):(this.reset(),this.state=Xb,void 0)},process:function(){},getTouchAction:function(){},reset:function(){}},p(ac,Yb,{defaults:{pointers:1},attrTest:function(a){var b=this.options.pointers;return 0===b||a.pointers.length===b},process:function(a){var b=this.state,c=a.eventType,d=b&(Sb|Tb),e=this.attrTest(a);return d&&(c&R||!e)?b|Wb:d||e?c&Q?b|Ub:b&Sb?b|Tb:Sb:Xb}}),p(bc,ac,{defaults:{event:"pan",threshold:10,pointers:1,direction:Z},getTouchAction:function(){var a=this.options.direction,b=[];return a&X&&b.push(Ob),a&Y&&b.push(Nb),b},directionTest:function(a){var b=this.options,c=!0,d=a.distance,e=a.direction,f=a.deltaX,g=a.deltaY;return e&b.direction||(b.direction&X?(e=0===f?S:0>f?T:U,c=f!=this.pX,d=Math.abs(a.deltaX)):(e=0===g?S:0>g?V:W,c=g!=this.pY,d=Math.abs(a.deltaY))),a.direction=e,c&&d>b.threshold&&e&b.direction},attrTest:function(a){return ac.prototype.attrTest.call(this,a)&&(this.state&Sb||!(this.state&Sb)&&this.directionTest(a))},emit:function(a){this.pX=a.deltaX,this.pY=a.deltaY;var b=$b(a.direction);b&&this.manager.emit(this.options.event+b,a),this._super.emit.call(this,a)}}),p(cc,ac,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Mb]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.scale-1)>this.options.threshold||this.state&Sb)},emit:function(a){if(this._super.emit.call(this,a),1!==a.scale){var b=a.scale<1?"in":"out";this.manager.emit(this.options.event+b,a)}}}),p(dc,Yb,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return[Kb]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,e=a.deltaTime>b.time;if(this._input=a,!d||!c||a.eventType&(Q|R)&&!e)this.reset();else if(a.eventType&O)this.reset(),this._timer=k(function(){this.state=Vb,this.tryEmit()},b.time,this);else if(a.eventType&Q)return Vb;return Xb},reset:function(){clearTimeout(this._timer)},emit:function(a){this.state===Vb&&(a&&a.eventType&Q?this.manager.emit(this.options.event+"up",a):(this._input.timeStamp=j(),this.manager.emit(this.options.event,this._input)))}}),p(ec,ac,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Mb]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.rotation)>this.options.threshold||this.state&Sb)}}),p(fc,ac,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:X|Y,pointers:1},getTouchAction:function(){return bc.prototype.getTouchAction.call(this)},attrTest:function(a){var c,b=this.options.direction;return b&(X|Y)?c=a.velocity:b&X?c=a.velocityX:b&Y&&(c=a.velocityY),this._super.attrTest.call(this,a)&&b&a.direction&&a.distance>this.options.threshold&&i(c)>this.options.velocity&&a.eventType&Q},emit:function(a){var b=$b(a.direction);b&&this.manager.emit(this.options.event+b,a),this.manager.emit(this.options.event,a)}}),p(gc,Yb,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[Lb]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,e=a.deltaTime<b.time;if(this.reset(),a.eventType&O&&0===this.count)return this.failTimeout();if(d&&e&&c){if(a.eventType!=Q)return this.failTimeout();var f=this.pTime?a.timeStamp-this.pTime<b.interval:!0,g=!this.pCenter||kb(this.pCenter,a.center)<b.posThreshold;this.pTime=a.timeStamp,this.pCenter=a.center,g&&f?this.count+=1:this.count=1,this._input=a;var h=this.count%b.taps;if(0===h)return this.hasRequireFailures()?(this._timer=k(function(){this.state=Vb,this.tryEmit()},b.interval,this),Sb):Vb}return Xb},failTimeout:function(){return this._timer=k(function(){this.state=Xb},this.options.interval,this),Xb},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Vb&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),hc.VERSION="2.0.4",hc.defaults={domEvents:!1,touchAction:Jb,enable:!0,inputTarget:null,inputClass:null,preset:[[ec,{enable:!1}],[cc,{enable:!1},["rotate"]],[fc,{direction:X}],[bc,{direction:X},["swipe"]],[gc],[gc,{event:"doubletap",taps:2},["tap"]],[dc]],cssProps:{userSelect:"default",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var ic=1,jc=2;kc.prototype={set:function(a){return n(this.options,a),a.touchAction&&this.touchAction.update(),a.inputTarget&&(this.input.destroy(),this.input.target=a.inputTarget,this.input.init()),this},stop:function(a){this.session.stopped=a?jc:ic},recognize:function(a){var b=this.session;if(!b.stopped){this.touchAction.preventDefaults(a);var c,d=this.recognizers,e=b.curRecognizer;(!e||e&&e.state&Vb)&&(e=b.curRecognizer=null);for(var f=0;f<d.length;)c=d[f],b.stopped===jc||e&&c!=e&&!c.canRecognizeWith(e)?c.reset():c.recognize(a),!e&&c.state&(Sb|Tb|Ub)&&(e=b.curRecognizer=c),f++}},get:function(a){if(a instanceof Yb)return a;for(var b=this.recognizers,c=0;c<b.length;c++)if(b[c].options.event==a)return b[c];return null},add:function(a){if(l(a,"add",this))return this;var b=this.get(a.options.event);return b&&this.remove(b),this.recognizers.push(a),a.manager=this,this.touchAction.update(),a},remove:function(a){if(l(a,"remove",this))return this;var b=this.recognizers;return a=this.get(a),b.splice(y(b,a),1),this.touchAction.update(),this},on:function(a,b){var c=this.handlers;return m(x(a),function(a){c[a]=c[a]||[],c[a].push(b)}),this},off:function(a,b){var c=this.handlers;return m(x(a),function(a){b?c[a].splice(y(c[a],b),1):delete c[a]}),this},emit:function(a,b){this.options.domEvents&&mc(a,b);var c=this.handlers[a]&&this.handlers[a].slice();if(c&&c.length){b.type=a,b.preventDefault=function(){b.srcEvent.preventDefault()};for(var d=0;d<c.length;)c[d](b),d++}},destroy:function(){this.element&&lc(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},n(hc,{INPUT_START:O,INPUT_MOVE:P,INPUT_END:Q,INPUT_CANCEL:R,STATE_POSSIBLE:Rb,STATE_BEGAN:Sb,STATE_CHANGED:Tb,STATE_ENDED:Ub,STATE_RECOGNIZED:Vb,STATE_CANCELLED:Wb,STATE_FAILED:Xb,DIRECTION_NONE:S,DIRECTION_LEFT:T,DIRECTION_RIGHT:U,DIRECTION_UP:V,DIRECTION_DOWN:W,DIRECTION_HORIZONTAL:X,DIRECTION_VERTICAL:Y,DIRECTION_ALL:Z,Manager:kc,Input:ab,TouchAction:Pb,TouchInput:Eb,MouseInput:rb,PointerEventInput:wb,TouchMouseInput:Gb,SingleTouchInput:Ab,Recognizer:Yb,AttrRecognizer:ac,Tap:gc,Pan:bc,Swipe:fc,Pinch:cc,Rotate:ec,Press:dc,on:t,off:u,each:m,merge:o,extend:n,inherit:p,bindFn:q,prefixed:B}),typeof define==g&&define.amd?define(function(){return hc}):"undefined"!=typeof module&&module.exports?module.exports=hc:a[c]=hc}(window,document,"Hammer");;(function(factory) {
    if (typeof define === 'function' && define.amd) {
        define(['jquery', 'hammerjs'], factory);
    } else if (typeof exports === 'object') {
        factory(require('jquery'), require('hammerjs'));
    } else {
        factory(jQuery, Hammer);
    }
}(function($, Hammer) {
    function hammerify(el, options) {
        var $el = $(el);
        if(!$el.data("hammer")) {
            $el.data("hammer", new Hammer($el[0], options));
        }
    }

    $.fn.hammer = function(options) {
        return this.each(function() {
            hammerify(this, options);
        });
    };

    // extend the emit method to also trigger jQuery events
    Hammer.Manager.prototype.emit = (function(originalEmit) {
        return function(type, data) {
            originalEmit.call(this, type, data);
            $(this.element).trigger({
                type: type,
                gesture: data
            });
        };
    })(Hammer.Manager.prototype.emit);
}));
;// Required for Meteor package, the use of window prevents export by Meteor
(function(window){
  if(window.Package){
    Materialize = {};
  } else {
    window.Materialize = {};
  }
})(window);


/*
 * raf.js
 * https://github.com/ngryman/raf.js
 *
 * original requestAnimationFrame polyfill by Erik Möller
 * inspired from paul_irish gist and post
 *
 * Copyright (c) 2013 ngryman
 * Licensed under the MIT license.
 */
(function(window) {
  var lastTime = 0,
    vendors = ['webkit', 'moz'],
    requestAnimationFrame = window.requestAnimationFrame,
    cancelAnimationFrame = window.cancelAnimationFrame,
    i = vendors.length;

  // try to un-prefix existing raf
  while (--i >= 0 && !requestAnimationFrame) {
    requestAnimationFrame = window[vendors[i] + 'RequestAnimationFrame'];
    cancelAnimationFrame = window[vendors[i] + 'CancelRequestAnimationFrame'];
  }

  // polyfill with setTimeout fallback
  // heavily inspired from @darius gist mod: https://gist.github.com/paulirish/1579671#comment-837945
  if (!requestAnimationFrame || !cancelAnimationFrame) {
    requestAnimationFrame = function(callback) {
      var now = +Date.now(),
        nextTime = Math.max(lastTime + 16, now);
      return setTimeout(function() {
        callback(lastTime = nextTime);
      }, nextTime - now);
    };

    cancelAnimationFrame = clearTimeout;
  }

  // export to window
  window.requestAnimationFrame = requestAnimationFrame;
  window.cancelAnimationFrame = cancelAnimationFrame;
}(window));


// Unique ID
Materialize.guid = (function() {
  function s4() {
    return Math.floor((1 + Math.random()) * 0x10000)
      .toString(16)
      .substring(1);
  }
  return function() {
    return s4() + s4() + '-' + s4() + '-' + s4() + '-' +
           s4() + '-' + s4() + s4() + s4();
  };
})();

/**
 * Escapes hash from special characters
 * @param {string} hash  String returned from this.hash
 * @returns {string}
 */
Materialize.escapeHash = function(hash) {
  return hash.replace( /(:|\.|\[|\]|,|=)/g, "\\$1" );
};

Materialize.elementOrParentIsFixed = function(element) {
    var $element = $(element);
    var $checkElements = $element.add($element.parents());
    var isFixed = false;
    $checkElements.each(function(){
        if ($(this).css("position") === "fixed") {
            isFixed = true;
            return false;
        }
    });
    return isFixed;
};

// Velocity has conflicts when loaded with jQuery, this will check for it
// First, check if in noConflict mode
var Vel;
if (jQuery) {
  Vel = jQuery.Velocity;
} else if ($) {
  Vel = $.Velocity;
} else {
  Vel = Velocity;
}
;(function ($) {
  $.fn.collapsible = function(options) {
    var defaults = {
      accordion: undefined,
      onOpen: undefined,
      onClose: undefined
    };

    options = $.extend(defaults, options);


    return this.each(function() {

      var $this = $(this);

      var $panel_headers = $(this).find('> li > .collapsible-header');

      var collapsible_type = $this.data("collapsible");

      // Turn off any existing event handlers
      $this.off('click.collapse', '> li > .collapsible-header');
      $panel_headers.off('click.collapse');


      /****************
      Helper Functions
      ****************/

      // Accordion Open
      function accordionOpen(object) {
        $panel_headers = $this.find('> li > .collapsible-header');
        if (object.hasClass('active')) {
          object.parent().addClass('active');
        }
        else {
          object.parent().removeClass('active');
        }
        if (object.parent().hasClass('active')){
          object.siblings('.collapsible-body').stop(true,false).slideDown({ duration: 350, easing: "easeOutQuart", queue: false, complete: function() {$(this).css('height', '');}});
        }
        else{
          object.siblings('.collapsible-body').stop(true,false).slideUp({ duration: 350, easing: "easeOutQuart", queue: false, complete: function() {$(this).css('height', '');}});
        }

        $panel_headers.not(object).removeClass('active').parent().removeClass('active');

        // Close previously open accordion elements.
        $panel_headers.not(object).parent().children('.collapsible-body').stop(true,false).each(function() {
          if ($(this).is(':visible')) {
            $(this).slideUp({
              duration: 350,
              easing: "easeOutQuart",
              queue: false,
              complete:
                function() {
                  $(this).css('height', '');
                  execCallbacks($(this).siblings('.collapsible-header'));
                }
            });
          }
        });
      }

      // Expandable Open
      function expandableOpen(object) {
        if (object.hasClass('active')) {
          object.parent().addClass('active');
        }
        else {
          object.parent().removeClass('active');
        }
        if (object.parent().hasClass('active')){
          object.siblings('.collapsible-body').stop(true,false).slideDown({ duration: 350, easing: "easeOutQuart", queue: false, complete: function() {$(this).css('height', '');}});
        }
        else {
          object.siblings('.collapsible-body').stop(true,false).slideUp({ duration: 350, easing: "easeOutQuart", queue: false, complete: function() {$(this).css('height', '');}});
        }
      }

      // Open collapsible. object: .collapsible-header
      function collapsibleOpen(object) {
        if (options.accordion || collapsible_type === "accordion" || collapsible_type === undefined) { // Handle Accordion
          accordionOpen(object);
        } else { // Handle Expandables
          expandableOpen(object);
        }

        execCallbacks(object);
      }

      // Handle callbacks
      function execCallbacks(object) {
        if (object.hasClass('active')) {
          if (typeof(options.onOpen) === "function") {
            options.onOpen.call(this, object.parent());
          }
        } else {
          if (typeof(options.onClose) === "function") {
            options.onClose.call(this, object.parent());
          }
        }
      }

      /**
       * Check if object is children of panel header
       * @param  {Object}  object Jquery object
       * @return {Boolean} true if it is children
       */
      function isChildrenOfPanelHeader(object) {

        var panelHeader = getPanelHeader(object);

        return panelHeader.length > 0;
      }

      /**
       * Get panel header from a children element
       * @param  {Object} object Jquery object
       * @return {Object} panel header object
       */
      function getPanelHeader(object) {

        return object.closest('li > .collapsible-header');
      }

      /*****  End Helper Functions  *****/



      // Add click handler to only direct collapsible header children
      $this.on('click.collapse', '> li > .collapsible-header', function(e) {
        var element = $(e.target);

        if (isChildrenOfPanelHeader(element)) {
          element = getPanelHeader(element);
        }

        element.toggleClass('active');

        collapsibleOpen(element);
      });


      // Open first active
      if (options.accordion || collapsible_type === "accordion" || collapsible_type === undefined) { // Handle Accordion
        collapsibleOpen($panel_headers.filter('.active').first());

      } else { // Handle Expandables
        $panel_headers.filter('.active').each(function() {
          collapsibleOpen($(this));
        });
      }

    });
  };

  $(document).ready(function(){
    $('.collapsible').collapsible();
  });
}( jQuery ));;(function ($) {

  // Add posibility to scroll to selected option
  // usefull for select for example
  $.fn.scrollTo = function(elem) {
    $(this).scrollTop($(this).scrollTop() - $(this).offset().top + $(elem).offset().top);
    return this;
  };

  $.fn.dropdown = function (options) {
    var defaults = {
      inDuration: 300,
      outDuration: 225,
      constrain_width: true, // Constrains width of dropdown to the activator
      hover: false,
      gutter: 0, // Spacing from edge
      belowOrigin: false,
      alignment: 'left',
      stopPropagation: false
    };

    // Open dropdown.
    if (options === "open") {
      this.each(function() {
        $(this).trigger('open');
      });
      return false;
    }

    // Close dropdown.
    if (options === "close") {
      this.each(function() {
        $(this).trigger('close');
      });
      return false;
    }

    this.each(function(){
      var origin = $(this);
      var curr_options = $.extend({}, defaults, options);
      var isFocused = false;

      // Dropdown menu
      var activates = $("#"+ origin.attr('data-activates'));

      function updateOptions() {
        if (origin.data('induration') !== undefined)
          curr_options.inDuration = origin.data('induration');
        if (origin.data('outduration') !== undefined)
          curr_options.outDuration = origin.data('outduration');
        if (origin.data('constrainwidth') !== undefined)
          curr_options.constrain_width = origin.data('constrainwidth');
        if (origin.data('hover') !== undefined)
          curr_options.hover = origin.data('hover');
        if (origin.data('gutter') !== undefined)
          curr_options.gutter = origin.data('gutter');
        if (origin.data('beloworigin') !== undefined)
          curr_options.belowOrigin = origin.data('beloworigin');
        if (origin.data('alignment') !== undefined)
          curr_options.alignment = origin.data('alignment');
        if (origin.data('stoppropagation') !== undefined)
          curr_options.stopPropagation = origin.data('stoppropagation');
      }

      updateOptions();

      // Attach dropdown to its activator
      origin.after(activates);

      /*
        Helper function to position and resize dropdown.
        Used in hover and click handler.
      */
      function placeDropdown(eventType) {
        // Check for simultaneous focus and click events.
        if (eventType === 'focus') {
          isFocused = true;
        }

        // Check html data attributes
        updateOptions();

        // Set Dropdown state
        activates.addClass('active');
        origin.addClass('active');

        // Constrain width
        if (curr_options.constrain_width === true) {
          activates.css('width', origin.outerWidth());

        } else {
          activates.css('white-space', 'nowrap');
        }

        // Offscreen detection
        var windowHeight = window.innerHeight;
        var originHeight = origin.innerHeight();
        var offsetLeft = origin.offset().left;
        var offsetTop = origin.offset().top - $(window).scrollTop();
        var currAlignment = curr_options.alignment;
        var gutterSpacing = 0;
        var leftPosition = 0;

        // Below Origin
        var verticalOffset = 0;
        if (curr_options.belowOrigin === true) {
          verticalOffset = originHeight;
        }

        // Check for scrolling positioned container.
        var scrollYOffset = 0;
        var scrollXOffset = 0;
        var wrapper = origin.parent();
        if (!wrapper.is('body')) {
          if (wrapper[0].scrollHeight > wrapper[0].clientHeight) {
            scrollYOffset = wrapper[0].scrollTop;
          }
          if (wrapper[0].scrollWidth > wrapper[0].clientWidth) {
            scrollXOffset = wrapper[0].scrollLeft;
          }
        }


        if (offsetLeft + activates.innerWidth() > $(window).width()) {
          // Dropdown goes past screen on right, force right alignment
          currAlignment = 'right';

        } else if (offsetLeft - activates.innerWidth() + origin.innerWidth() < 0) {
          // Dropdown goes past screen on left, force left alignment
          currAlignment = 'left';
        }
        // Vertical bottom offscreen detection
        if (offsetTop + activates.innerHeight() > windowHeight) {
          // If going upwards still goes offscreen, just crop height of dropdown.
          if (offsetTop + originHeight - activates.innerHeight() < 0) {
            var adjustedHeight = windowHeight - offsetTop - verticalOffset;
            activates.css('max-height', adjustedHeight);
          } else {
            // Flow upwards.
            if (!verticalOffset) {
              verticalOffset += originHeight;
            }
            verticalOffset -= activates.innerHeight();
          }
        }

        // Handle edge alignment
        if (currAlignment === 'left') {
          gutterSpacing = curr_options.gutter;
          leftPosition = origin.position().left + gutterSpacing;
        }
        else if (currAlignment === 'right') {
          var offsetRight = origin.position().left + origin.outerWidth() - activates.outerWidth();
          gutterSpacing = -curr_options.gutter;
          leftPosition =  offsetRight + gutterSpacing;
        }

        // Position dropdown
        activates.css({
          position: 'absolute',
          top: origin.position().top + verticalOffset + scrollYOffset,
          left: leftPosition + scrollXOffset
        });


        // Show dropdown
        activates.stop(true, true).css('opacity', 0)
          .slideDown({
            queue: false,
            duration: curr_options.inDuration,
            easing: 'easeOutCubic',
            complete: function() {
              $(this).css('height', '');
            }
          })
          .animate( {opacity: 1}, {queue: false, duration: curr_options.inDuration, easing: 'easeOutSine'});
      }

      function hideDropdown() {
        // Check for simultaneous focus and click events.
        isFocused = false;
        activates.fadeOut(curr_options.outDuration);
        activates.removeClass('active');
        origin.removeClass('active');
        setTimeout(function() { activates.css('max-height', ''); }, curr_options.outDuration);
      }

      // Hover
      if (curr_options.hover) {
        var open = false;
        origin.unbind('click.' + origin.attr('id'));
        // Hover handler to show dropdown
        origin.on('mouseenter', function(e){ // Mouse over
          if (open === false) {
            placeDropdown();
            open = true;
          }
        });
        origin.on('mouseleave', function(e){
          // If hover on origin then to something other than dropdown content, then close
          var toEl = e.toElement || e.relatedTarget; // added browser compatibility for target element
          if(!$(toEl).closest('.dropdown-content').is(activates)) {
            activates.stop(true, true);
            hideDropdown();
            open = false;
          }
        });

        activates.on('mouseleave', function(e){ // Mouse out
          var toEl = e.toElement || e.relatedTarget;
          if(!$(toEl).closest('.dropdown-button').is(origin)) {
            activates.stop(true, true);
            hideDropdown();
            open = false;
          }
        });

        // Click
      } else {
        // Click handler to show dropdown
        origin.unbind('click.' + origin.attr('id'));
        origin.bind('click.'+origin.attr('id'), function(e){
          if (!isFocused) {
            if ( origin[0] == e.currentTarget &&
                 !origin.hasClass('active') &&
                 ($(e.target).closest('.dropdown-content').length === 0)) {
              e.preventDefault(); // Prevents button click from moving window
              if (curr_options.stopPropagation) {
                e.stopPropagation();
              }
              placeDropdown('click');
            }
            // If origin is clicked and menu is open, close menu
            else if (origin.hasClass('active')) {
              hideDropdown();
              $(document).unbind('click.'+ activates.attr('id') + ' touchstart.' + activates.attr('id'));
            }
            // If menu open, add click close handler to document
            if (activates.hasClass('active')) {
              $(document).bind('click.'+ activates.attr('id') + ' touchstart.' + activates.attr('id'), function (e) {
                if (!activates.is(e.target) && !origin.is(e.target) && (!origin.find(e.target).length) ) {
                  hideDropdown();
                  $(document).unbind('click.'+ activates.attr('id') + ' touchstart.' + activates.attr('id'));
                }
              });
            }
          }
        });

      } // End else

      // Listen to open and close event - useful for select component
      origin.on('open', function(e, eventType) {
        placeDropdown(eventType);
      });
      origin.on('close', hideDropdown);


    });
  }; // End dropdown plugin

  $(document).ready(function(){
    $('.dropdown-button').dropdown();
  });
}( jQuery ));
;(function($) {
  var _stack = 0,
  _lastID = 0,
  _generateID = function() {
    _lastID++;
    return 'materialize-modal-overlay-' + _lastID;
  };

  var methods = {
    init : function(options) {
      var defaults = {
        opacity: 0.5,
        in_duration: 350,
        out_duration: 250,
        ready: undefined,
        complete: undefined,
        dismissible: true,
        starting_top: '4%',
        ending_top: '10%'
      };

      // Override defaults
      options = $.extend(defaults, options);

      return this.each(function() {
        var $modal = $(this);
        var modal_id = $(this).attr("id") || '#' + $(this).data('target');

        var closeModal = function() {
          var overlayID = $modal.data('overlay-id');
          var $overlay = $('#' + overlayID);
          $modal.removeClass('open');

          // Enable scrolling
          $('body').css({
            overflow: '',
            width: ''
          });

          $modal.find('.modal-close').off('click.close');
          $(document).off('keyup.modal' + overlayID);

          $overlay.velocity( { opacity: 0}, {duration: options.out_duration, queue: false, ease: "easeOutQuart"});


          // Define Bottom Sheet animation
          var exitVelocityOptions = {
            duration: options.out_duration,
            queue: false,
            ease: "easeOutCubic",
            // Handle modal ready callback
            complete: function() {
              $(this).css({display:"none"});

              // Call complete callback
              if (typeof(options.complete) === "function") {
                options.complete.call(this, $modal);
              }
              $overlay.remove();
              _stack--;
            }
          };
          if ($modal.hasClass('bottom-sheet')) {
            $modal.velocity({bottom: "-100%", opacity: 0}, exitVelocityOptions);
          }
          else {
            $modal.velocity(
              { top: options.starting_top, opacity: 0, scaleX: 0.7},
              exitVelocityOptions
            );
          }
        };

        var openModal = function($trigger) {
          var $body = $('body');
          var oldWidth = $body.innerWidth();
          $body.css('overflow', 'hidden');
          $body.width(oldWidth);

          if ($modal.hasClass('open')) {
            return;
          }

          var overlayID = _generateID();
          var $overlay = $('<div class="modal-overlay"></div>');
          lStack = (++_stack);

          // Store a reference of the overlay
          $overlay.attr('id', overlayID).css('z-index', 1000 + lStack * 2);
          $modal.data('overlay-id', overlayID).css('z-index', 1000 + lStack * 2 + 1);
          $modal.addClass('open');

          $("body").append($overlay);

          if (options.dismissible) {
            $overlay.click(function() {
              closeModal();
            });
            // Return on ESC
            $(document).on('keyup.modal' + overlayID, function(e) {
              if (e.keyCode === 27) {   // ESC key
                closeModal();
              }
            });
          }

          $modal.find(".modal-close").on('click.close', function(e) {
            closeModal();
          });

          $overlay.css({ display : "block", opacity : 0 });

          $modal.css({
            display : "block",
            opacity: 0
          });

          $overlay.velocity({opacity: options.opacity}, {duration: options.in_duration, queue: false, ease: "easeOutCubic"});
          $modal.data('associated-overlay', $overlay[0]);

          // Define Bottom Sheet animation
          var enterVelocityOptions = {
            duration: options.in_duration,
            queue: false,
            ease: "easeOutCubic",
            // Handle modal ready callback
            complete: function() {
              if (typeof(options.ready) === "function") {
                options.ready.call(this, $modal, $trigger);
              }
            }
          };
          if ($modal.hasClass('bottom-sheet')) {
            $modal.velocity({bottom: "0", opacity: 1}, enterVelocityOptions);
          }
          else {
            $.Velocity.hook($modal, "scaleX", 0.7);
            $modal.css({ top: options.starting_top });
            $modal.velocity({top: options.ending_top, opacity: 1, scaleX: '1'}, enterVelocityOptions);
          }

        };

        // Reset handlers
        $(document).off('click.modalTrigger', 'a[href="#' + modal_id + '"], [data-target="' + modal_id + '"]');
        $(this).off('openModal');
        $(this).off('closeModal');

        // Close Handlers
        $(document).on('click.modalTrigger', 'a[href="#' + modal_id + '"], [data-target="' + modal_id + '"]', function(e) {
          options.starting_top = ($(this).offset().top - $(window).scrollTop()) /1.15;
          openModal($(this));
          e.preventDefault();
        }); // done set on click

        $(this).on('openModal', function() {
          var modal_id = $(this).attr("href") || '#' + $(this).data('target');
          openModal();
        });

        $(this).on('closeModal', function() {
          closeModal();
        });
      }); // done return
    },
    open : function() {
      $(this).trigger('openModal');
    },
    close : function() {
      $(this).trigger('closeModal');
    }
  };

  $.fn.modal = function(methodOrOptions) {
    if ( methods[methodOrOptions] ) {
      return methods[ methodOrOptions ].apply( this, Array.prototype.slice.call( arguments, 1 ));
    } else if ( typeof methodOrOptions === 'object' || ! methodOrOptions ) {
      // Default to "init"
      return methods.init.apply( this, arguments );
    } else {
      $.error( 'Method ' +  methodOrOptions + ' does not exist on jQuery.modal' );
    }
  };
})(jQuery);
;(function ($) {

  $.fn.materialbox = function () {

    return this.each(function() {

      if ($(this).hasClass('initialized')) {
        return;
      }

      $(this).addClass('initialized');

      var overlayActive = false;
      var doneAnimating = true;
      var inDuration = 275;
      var outDuration = 200;
      var origin = $(this);
      var placeholder = $('<div></div>').addClass('material-placeholder');
      var originalWidth = 0;
      var originalHeight = 0;
      var ancestorsChanged;
      var ancestor;
      origin.wrap(placeholder);


      origin.on('click', function(){
        var placeholder = origin.parent('.material-placeholder');
        var windowWidth = window.innerWidth;
        var windowHeight = window.innerHeight;
        var originalWidth = origin.width();
        var originalHeight = origin.height();


        // If already modal, return to original
        if (doneAnimating === false) {
          returnToOriginal();
          return false;
        }
        else if (overlayActive && doneAnimating===true) {
          returnToOriginal();
          return false;
        }


        // Set states
        doneAnimating = false;
        origin.addClass('active');
        overlayActive = true;

        // Set positioning for placeholder
        placeholder.css({
          width: placeholder[0].getBoundingClientRect().width,
          height: placeholder[0].getBoundingClientRect().height,
          position: 'relative',
          top: 0,
          left: 0
        });

        // Find ancestor with overflow: hidden; and remove it
        ancestorsChanged = undefined;
        ancestor = placeholder[0].parentNode;
        var count = 0;
        while (ancestor !== null && !$(ancestor).is(document)) {
          var curr = $(ancestor);
          if (curr.css('overflow') !== 'visible') {
            curr.css('overflow', 'visible');
            if (ancestorsChanged === undefined) {
              ancestorsChanged = curr;
            }
            else {
              ancestorsChanged = ancestorsChanged.add(curr);
            }
          }
          ancestor = ancestor.parentNode;
        }

        // Set css on origin
        origin.css({position: 'absolute', 'z-index': 1000})
        .data('width', originalWidth)
        .data('height', originalHeight);

        // Add overlay
        var overlay = $('<div id="materialbox-overlay"></div>')
          .css({
            opacity: 0
          })
          .click(function(){
            if (doneAnimating === true)
            returnToOriginal();
          });
          // Animate Overlay
          // Put before in origin image to preserve z-index layering.
          origin.before(overlay);
          overlay.velocity({opacity: 1},
                           {duration: inDuration, queue: false, easing: 'easeOutQuad'} );

        // Add and animate caption if it exists
        if (origin.data('caption') !== "") {
          var $photo_caption = $('<div class="materialbox-caption"></div>');
          $photo_caption.text(origin.data('caption'));
          $('body').append($photo_caption);
          $photo_caption.css({ "display": "inline" });
          $photo_caption.velocity({opacity: 1}, {duration: inDuration, queue: false, easing: 'easeOutQuad'});
        }

        // Resize Image
        var ratio = 0;
        var widthPercent = originalWidth / windowWidth;
        var heightPercent = originalHeight / windowHeight;
        var newWidth = 0;
        var newHeight = 0;

        if (widthPercent > heightPercent) {
          ratio = originalHeight / originalWidth;
          newWidth = windowWidth * 0.9;
          newHeight = windowWidth * 0.9 * ratio;
        }
        else {
          ratio = originalWidth / originalHeight;
          newWidth = (windowHeight * 0.9) * ratio;
          newHeight = windowHeight * 0.9;
        }

        // Animate image + set z-index
        if(origin.hasClass('responsive-img')) {
          origin.velocity({'max-width': newWidth, 'width': originalWidth}, {duration: 0, queue: false,
            complete: function(){
              origin.css({left: 0, top: 0})
              .velocity(
                {
                  height: newHeight,
                  width: newWidth,
                  left: $(document).scrollLeft() + windowWidth/2 - origin.parent('.material-placeholder').offset().left - newWidth/2,
                  top: $(document).scrollTop() + windowHeight/2 - origin.parent('.material-placeholder').offset().top - newHeight/ 2
                },
                {
                  duration: inDuration,
                  queue: false,
                  easing: 'easeOutQuad',
                  complete: function(){doneAnimating = true;}
                }
              );
            } // End Complete
          }); // End Velocity
        }
        else {
          origin.css('left', 0)
          .css('top', 0)
          .velocity(
            {
              height: newHeight,
              width: newWidth,
              left: $(document).scrollLeft() + windowWidth/2 - origin.parent('.material-placeholder').offset().left - newWidth/2,
              top: $(document).scrollTop() + windowHeight/2 - origin.parent('.material-placeholder').offset().top - newHeight/ 2
            },
            {
              duration: inDuration,
              queue: false,
              easing: 'easeOutQuad',
              complete: function(){doneAnimating = true;}
            }
            ); // End Velocity
        }

    }); // End origin on click


      // Return on scroll
      $(window).scroll(function() {
        if (overlayActive) {
          returnToOriginal();
        }
      });

      // Return on ESC
      $(document).keyup(function(e) {

        if (e.keyCode === 27 && doneAnimating === true) {   // ESC key
          if (overlayActive) {
            returnToOriginal();
          }
        }
      });


      // This function returns the modaled image to the original spot
      function returnToOriginal() {

          doneAnimating = false;

          var placeholder = origin.parent('.material-placeholder');
          var windowWidth = window.innerWidth;
          var windowHeight = window.innerHeight;
          var originalWidth = origin.data('width');
          var originalHeight = origin.data('height');

          origin.velocity("stop", true);
          $('#materialbox-overlay').velocity("stop", true);
          $('.materialbox-caption').velocity("stop", true);


          $('#materialbox-overlay').velocity({opacity: 0}, {
            duration: outDuration, // Delay prevents animation overlapping
            queue: false, easing: 'easeOutQuad',
            complete: function(){
              // Remove Overlay
              overlayActive = false;
              $(this).remove();
            }
          });

          // Resize Image
          origin.velocity(
            {
              width: originalWidth,
              height: originalHeight,
              left: 0,
              top: 0
            },
            {
              duration: outDuration,
              queue: false, easing: 'easeOutQuad'
            }
          );

          // Remove Caption + reset css settings on image
          $('.materialbox-caption').velocity({opacity: 0}, {
            duration: outDuration, // Delay prevents animation overlapping
            queue: false, easing: 'easeOutQuad',
            complete: function(){
              placeholder.css({
                height: '',
                width: '',
                position: '',
                top: '',
                left: ''
              });

              origin.css({
                height: '',
                top: '',
                left: '',
                width: '',
                'max-width': '',
                position: '',
                'z-index': ''
              });

              // Remove class
              origin.removeClass('active');
              doneAnimating = true;
              $(this).remove();

              // Remove overflow overrides on ancestors
              if (ancestorsChanged) {
                ancestorsChanged.css('overflow', '');
              }
            }
          });

        }
        });
};

$(document).ready(function(){
  $('.materialboxed').materialbox();
});

}( jQuery ));
;(function ($) {

    $.fn.parallax = function () {
      var window_width = $(window).width();
      // Parallax Scripts
      return this.each(function(i) {
        var $this = $(this);
        $this.addClass('parallax');

        function updateParallax(initial) {
          var container_height;
          if (window_width < 601) {
            container_height = ($this.height() > 0) ? $this.height() : $this.children("img").height();
          }
          else {
            container_height = ($this.height() > 0) ? $this.height() : 500;
          }
          var $img = $this.children("img").first();
          var img_height = $img.height();
          var parallax_dist = img_height - container_height;
          var bottom = $this.offset().top + container_height;
          var top = $this.offset().top;
          var scrollTop = $(window).scrollTop();
          var windowHeight = window.innerHeight;
          var windowBottom = scrollTop + windowHeight;
          var percentScrolled = (windowBottom - top) / (container_height + windowHeight);
          var parallax = Math.round((parallax_dist * percentScrolled));

          if (initial) {
            $img.css('display', 'block');
          }
          if ((bottom > scrollTop) && (top < (scrollTop + windowHeight))) {
            $img.css('transform', "translate3D(-50%," + parallax + "px, 0)");
          }

        }

        // Wait for image load
        $this.children("img").one("load", function() {
          updateParallax(true);
        }).each(function() {
          if (this.complete) $(this).trigger("load");
        });

        $(window).scroll(function() {
          window_width = $(window).width();
          updateParallax(false);
        });

        $(window).resize(function() {
          window_width = $(window).width();
          updateParallax(false);
        });

      });

    };
}( jQuery ));
;(function ($) {

  var methods = {
    init : function(options) {
      var defaults = {
        onShow: null
      };
      options = $.extend(defaults, options);

      return this.each(function() {

      // For each set of tabs, we want to keep track of
      // which tab is active and its associated content
      var $this = $(this),
          window_width = $(window).width();

      var $active, $content, $links = $this.find('li.tab a'),
          $tabs_width = $this.width(),
          $tab_width = Math.max($tabs_width, $this[0].scrollWidth) / $links.length,
          $index = 0;

      // Finds right attribute for indicator based on active tab.
      // el: jQuery Object
      var calcRightPos = function(el) {
        return $tabs_width - el.position().left - el.outerWidth() - $this.scrollLeft();
      };

      // Finds left attribute for indicator based on active tab.
      // el: jQuery Object
      var calcLeftPos = function(el) {
        return el.position().left + $this.scrollLeft();
      };

      // If the location.hash matches one of the links, use that as the active tab.
      $active = $($links.filter('[href="'+location.hash+'"]'));

      // If no match is found, use the first link or any with class 'active' as the initial active tab.
      if ($active.length === 0) {
        $active = $(this).find('li.tab a.active').first();
      }
      if ($active.length === 0) {
        $active = $(this).find('li.tab a').first();
      }

      $active.addClass('active');
      $index = $links.index($active);
      if ($index < 0) {
        $index = 0;
      }

      if ($active[0] !== undefined) {
        $content = $($active[0].hash);
      }

      // append indicator then set indicator width to tab width
      $this.append('<div class="indicator"></div>');
      var $indicator = $this.find('.indicator');
      if ($this.is(":visible")) {
        // $indicator.css({"right": $tabs_width - (($index + 1) * $tab_width)});
        // $indicator.css({"left": $index * $tab_width});
        setTimeout(function() {
          $indicator.css({"right": calcRightPos($active) });
          $indicator.css({"left": calcLeftPos($active) });
        }, 0);
      }
      $(window).resize(function () {
        $tabs_width = $this.width();
        $tab_width = Math.max($tabs_width, $this[0].scrollWidth) / $links.length;
        if ($index < 0) {
          $index = 0;
        }
        if ($tab_width !== 0 && $tabs_width !== 0) {
          $indicator.css({"right": calcRightPos($active) });
          $indicator.css({"left": calcLeftPos($active) });
        }
      });

      // Hide the remaining content
      $links.not($active).each(function () {
        $(Materialize.escapeHash(this.hash)).hide();
      });


      // Bind the click event handler
      $this.on('click', 'a', function(e) {
        if ($(this).parent().hasClass('disabled')) {
          e.preventDefault();
          return;
        }

        // Act as regular link if target attribute is specified.
        if (!!$(this).attr("target")) {
          return;
        }

        $tabs_width = $this.width();
        $tab_width = Math.max($tabs_width, $this[0].scrollWidth) / $links.length;

        // Make the old tab inactive.
        $active.removeClass('active');
        if ($content !== undefined) {
          $content.hide();
        }

        // Update the variables with the new link and content
        $active = $(this);
        $content = $(Materialize.escapeHash(this.hash));
        $links = $this.find('li.tab a');
        var activeRect = $active.position();

        // Make the tab active.
        $active.addClass('active');
        var $prev_index = $index;
        $index = $links.index($(this));
        if ($index < 0) {
          $index = 0;
        }
        // Change url to current tab
        // window.location.hash = $active.attr('href');

        if ($content !== undefined) {
          $content.show();
          if (typeof(options.onShow) === "function") {
            options.onShow.call(this, $content);
          }
        }

        // Update indicator

        if (($index - $prev_index) >= 0) {
          $indicator.velocity({"right": calcRightPos($active) }, { duration: 300, queue: false, easing: 'easeOutQuad'});
          $indicator.velocity({"left": calcLeftPos($active) }, {duration: 300, queue: false, easing: 'easeOutQuad', delay: 90});

        } else {
          $indicator.velocity({"left": calcLeftPos($active) }, { duration: 300, queue: false, easing: 'easeOutQuad'});
          $indicator.velocity({"right": calcRightPos($active) }, {duration: 300, queue: false, easing: 'easeOutQuad', delay: 90});
        }

        // Prevent the anchor's default click action
        e.preventDefault();
      });
    });

    },
    select_tab : function( id ) {
      this.find('a[href="#' + id + '"]').trigger('click');
    }
  };

  $.fn.tabs = function(methodOrOptions) {
    if ( methods[methodOrOptions] ) {
      return methods[ methodOrOptions ].apply( this, Array.prototype.slice.call( arguments, 1 ));
    } else if ( typeof methodOrOptions === 'object' || ! methodOrOptions ) {
      // Default to "init"
      return methods.init.apply( this, arguments );
    } else {
      $.error( 'Method ' +  methodOrOptions + ' does not exist on jQuery.tabs' );
    }
  };

  $(document).ready(function(){
    $('ul.tabs').tabs();
  });
}( jQuery ));
;(function ($) {
    $.fn.tooltip = function (options) {
      var timeout = null,
      margin = 5;

      // Defaults
      var defaults = {
        delay: 350,
        tooltip: '',
        position: 'bottom',
        html: false
      };

      // Remove tooltip from the activator
      if (options === "remove") {
        this.each(function() {
          $('#' + $(this).attr('data-tooltip-id')).remove();
          $(this).off('mouseenter.tooltip mouseleave.tooltip');
        });
        return false;
      }

      options = $.extend(defaults, options);

      return this.each(function() {
        var tooltipId = Materialize.guid();
        var origin = $(this);

        // Destroy old tooltip
        if (origin.attr('data-tooltip-id')) {
          $('#' + origin.attr('data-tooltip-id')).remove();
        }

        origin.attr('data-tooltip-id', tooltipId);

        // Get attributes.
        var allowHtml,
            tooltipDelay,
            tooltipPosition,
            tooltipText,
            tooltipEl,
            backdrop;
        var setAttributes = function() {
          allowHtml = origin.attr('data-html') ? origin.attr('data-html') === 'true' : options.html;
          tooltipDelay = origin.attr('data-delay');
          tooltipDelay = (tooltipDelay === undefined || tooltipDelay === '') ?
              options.delay : tooltipDelay;
          tooltipPosition = origin.attr('data-position');
          tooltipPosition = (tooltipPosition === undefined || tooltipPosition === '') ?
              options.position : tooltipPosition;
          tooltipText = origin.attr('data-tooltip');
          tooltipText = (tooltipText === undefined || tooltipText === '') ?
              options.tooltip : tooltipText;
        };
        setAttributes();

        var renderTooltipEl = function() {
          var tooltip = $('<div class="material-tooltip"></div>');

          // Create Text span
          if (allowHtml) {
            tooltipText = $('<span></span>').html(tooltipText);
          } else{
            tooltipText = $('<span></span>').text(tooltipText);
          }

          // Create tooltip
          tooltip.append(tooltipText)
            .appendTo($('body'))
            .attr('id', tooltipId);

          // Create backdrop
          backdrop = $('<div class="backdrop"></div>');
          backdrop.appendTo(tooltip);
          return tooltip;
        };
        tooltipEl = renderTooltipEl();

        // Destroy previously binded events
        origin.off('mouseenter.tooltip mouseleave.tooltip');
        // Mouse In
        var started = false, timeoutRef;
        origin.on({'mouseenter.tooltip': function(e) {
          var showTooltip = function() {
            setAttributes();
            started = true;
            tooltipEl.velocity('stop');
            backdrop.velocity('stop');
            tooltipEl.css({ display: 'block', left: '0px', top: '0px' });

            // Tooltip positioning
            var originWidth = origin.outerWidth();
            var originHeight = origin.outerHeight();

            var tooltipHeight = tooltipEl.outerHeight();
            var tooltipWidth = tooltipEl.outerWidth();
            var tooltipVerticalMovement = '0px';
            var tooltipHorizontalMovement = '0px';
            var scaleXFactor = 8;
            var scaleYFactor = 8;
            var targetTop, targetLeft, newCoordinates;

            if (tooltipPosition === "top") {
              // Top Position
              targetTop = origin.offset().top - tooltipHeight - margin;
              targetLeft = origin.offset().left + originWidth/2 - tooltipWidth/2;
              newCoordinates = repositionWithinScreen(targetLeft, targetTop, tooltipWidth, tooltipHeight);

              tooltipVerticalMovement = '-10px';
              backdrop.css({
                bottom: 0,
                left: 0,
                borderRadius: '14px 14px 0 0',
                transformOrigin: '50% 100%',
                marginTop: tooltipHeight,
                marginLeft: (tooltipWidth/2) - (backdrop.width()/2)
              });
            }
            // Left Position
            else if (tooltipPosition === "left") {
              targetTop = origin.offset().top + originHeight/2 - tooltipHeight/2;
              targetLeft =  origin.offset().left - tooltipWidth - margin;
              newCoordinates = repositionWithinScreen(targetLeft, targetTop, tooltipWidth, tooltipHeight);

              tooltipHorizontalMovement = '-10px';
              backdrop.css({
                top: '-7px',
                right: 0,
                width: '14px',
                height: '14px',
                borderRadius: '14px 0 0 14px',
                transformOrigin: '95% 50%',
                marginTop: tooltipHeight/2,
                marginLeft: tooltipWidth
              });
            }
            // Right Position
            else if (tooltipPosition === "right") {
              targetTop = origin.offset().top + originHeight/2 - tooltipHeight/2;
              targetLeft = origin.offset().left + originWidth + margin;
              newCoordinates = repositionWithinScreen(targetLeft, targetTop, tooltipWidth, tooltipHeight);

              tooltipHorizontalMovement = '+10px';
              backdrop.css({
                top: '-7px',
                left: 0,
                width: '14px',
                height: '14px',
                borderRadius: '0 14px 14px 0',
                transformOrigin: '5% 50%',
                marginTop: tooltipHeight/2,
                marginLeft: '0px'
              });
            }
            else {
              // Bottom Position
              targetTop = origin.offset().top + origin.outerHeight() + margin;
              targetLeft = origin.offset().left + originWidth/2 - tooltipWidth/2;
              newCoordinates = repositionWithinScreen(targetLeft, targetTop, tooltipWidth, tooltipHeight);
              tooltipVerticalMovement = '+10px';
              backdrop.css({
                top: 0,
                left: 0,
                marginLeft: (tooltipWidth/2) - (backdrop.width()/2)
              });
            }

            // Set tooptip css placement
            tooltipEl.css({
              top: newCoordinates.y,
              left: newCoordinates.x
            });

            // Calculate Scale to fill
            scaleXFactor = Math.SQRT2 * tooltipWidth / parseInt(backdrop.css('width'));
            scaleYFactor = Math.SQRT2 * tooltipHeight / parseInt(backdrop.css('height'));

            tooltipEl.velocity({ marginTop: tooltipVerticalMovement, marginLeft: tooltipHorizontalMovement}, { duration: 350, queue: false })
              .velocity({opacity: 1}, {duration: 300, delay: 50, queue: false});
            backdrop.css({ display: 'block' })
              .velocity({opacity:1},{duration: 55, delay: 0, queue: false})
              .velocity({scaleX: scaleXFactor, scaleY: scaleYFactor}, {duration: 300, delay: 0, queue: false, easing: 'easeInOutQuad'});
          };

          timeoutRef = setTimeout(showTooltip, tooltipDelay); // End Interval

        // Mouse Out
        },
        'mouseleave.tooltip': function(){
          // Reset State
          started = false;
          clearTimeout(timeoutRef);

          // Animate back
          setTimeout(function() {
            if (started !== true) {
              tooltipEl.velocity({
                opacity: 0, marginTop: 0, marginLeft: 0}, { duration: 225, queue: false});
              backdrop.velocity({opacity: 0, scaleX: 1, scaleY: 1}, {
                duration:225,
                queue: false,
                complete: function(){
                  backdrop.css('display', 'none');
                  tooltipEl.css('display', 'none');
                  started = false;}
              });
            }
          },225);
        }
        });
    });
  };

  var repositionWithinScreen = function(x, y, width, height) {
    var newX = x;
    var newY = y;

    if (newX < 0) {
      newX = 4;
    } else if (newX + width > window.innerWidth) {
      newX -= newX + width - window.innerWidth;
    }

    if (newY < 0) {
      newY = 4;
    } else if (newY + height > window.innerHeight + $(window).scrollTop) {
      newY -= newY + height - window.innerHeight;
    }

    return {x: newX, y: newY};
  };

  $(document).ready(function(){
     $('.tooltipped').tooltip();
   });
}( jQuery ));
;/*!
 * Waves v0.6.4
 * http://fian.my.id/Waves
 *
 * Copyright 2014 Alfiana E. Sibuea and other contributors
 * Released under the MIT license
 * https://github.com/fians/Waves/blob/master/LICENSE
 */

;(function(window) {
    'use strict';

    var Waves = Waves || {};
    var $$ = document.querySelectorAll.bind(document);

    // Find exact position of element
    function isWindow(obj) {
        return obj !== null && obj === obj.window;
    }

    function getWindow(elem) {
        return isWindow(elem) ? elem : elem.nodeType === 9 && elem.defaultView;
    }

    function offset(elem) {
        var docElem, win,
            box = {top: 0, left: 0},
            doc = elem && elem.ownerDocument;

        docElem = doc.documentElement;

        if (typeof elem.getBoundingClientRect !== typeof undefined) {
            box = elem.getBoundingClientRect();
        }
        win = getWindow(doc);
        return {
            top: box.top + win.pageYOffset - docElem.clientTop,
            left: box.left + win.pageXOffset - docElem.clientLeft
        };
    }

    function convertStyle(obj) {
        var style = '';

        for (var a in obj) {
            if (obj.hasOwnProperty(a)) {
                style += (a + ':' + obj[a] + ';');
            }
        }

        return style;
    }

    var Effect = {

        // Effect delay
        duration: 750,

        show: function(e, element) {

            // Disable right click
            if (e.button === 2) {
                return false;
            }

            var el = element || this;

            // Create ripple
            var ripple = document.createElement('div');
            ripple.className = 'waves-ripple';
            el.appendChild(ripple);

            // Get click coordinate and element witdh
            var pos         = offset(el);
            var relativeY   = (e.pageY - pos.top);
            var relativeX   = (e.pageX - pos.left);
            var scale       = 'scale('+((el.clientWidth / 100) * 10)+')';

            // Support for touch devices
            if ('touches' in e) {
              relativeY   = (e.touches[0].pageY - pos.top);
              relativeX   = (e.touches[0].pageX - pos.left);
            }

            // Attach data to element
            ripple.setAttribute('data-hold', Date.now());
            ripple.setAttribute('data-scale', scale);
            ripple.setAttribute('data-x', relativeX);
            ripple.setAttribute('data-y', relativeY);

            // Set ripple position
            var rippleStyle = {
                'top': relativeY+'px',
                'left': relativeX+'px'
            };

            ripple.className = ripple.className + ' waves-notransition';
            ripple.setAttribute('style', convertStyle(rippleStyle));
            ripple.className = ripple.className.replace('waves-notransition', '');

            // Scale the ripple
            rippleStyle['-webkit-transform'] = scale;
            rippleStyle['-moz-transform'] = scale;
            rippleStyle['-ms-transform'] = scale;
            rippleStyle['-o-transform'] = scale;
            rippleStyle.transform = scale;
            rippleStyle.opacity   = '1';

            rippleStyle['-webkit-transition-duration'] = Effect.duration + 'ms';
            rippleStyle['-moz-transition-duration']    = Effect.duration + 'ms';
            rippleStyle['-o-transition-duration']      = Effect.duration + 'ms';
            rippleStyle['transition-duration']         = Effect.duration + 'ms';

            rippleStyle['-webkit-transition-timing-function'] = 'cubic-bezier(0.250, 0.460, 0.450, 0.940)';
            rippleStyle['-moz-transition-timing-function']    = 'cubic-bezier(0.250, 0.460, 0.450, 0.940)';
            rippleStyle['-o-transition-timing-function']      = 'cubic-bezier(0.250, 0.460, 0.450, 0.940)';
            rippleStyle['transition-timing-function']         = 'cubic-bezier(0.250, 0.460, 0.450, 0.940)';

            ripple.setAttribute('style', convertStyle(rippleStyle));
        },

        hide: function(e) {
            TouchHandler.touchup(e);

            var el = this;
            var width = el.clientWidth * 1.4;

            // Get first ripple
            var ripple = null;
            var ripples = el.getElementsByClassName('waves-ripple');
            if (ripples.length > 0) {
                ripple = ripples[ripples.length - 1];
            } else {
                return false;
            }

            var relativeX   = ripple.getAttribute('data-x');
            var relativeY   = ripple.getAttribute('data-y');
            var scale       = ripple.getAttribute('data-scale');

            // Get delay beetween mousedown and mouse leave
            var diff = Date.now() - Number(ripple.getAttribute('data-hold'));
            var delay = 350 - diff;

            if (delay < 0) {
                delay = 0;
            }

            // Fade out ripple after delay
            setTimeout(function() {
                var style = {
                    'top': relativeY+'px',
                    'left': relativeX+'px',
                    'opacity': '0',

                    // Duration
                    '-webkit-transition-duration': Effect.duration + 'ms',
                    '-moz-transition-duration': Effect.duration + 'ms',
                    '-o-transition-duration': Effect.duration + 'ms',
                    'transition-duration': Effect.duration + 'ms',
                    '-webkit-transform': scale,
                    '-moz-transform': scale,
                    '-ms-transform': scale,
                    '-o-transform': scale,
                    'transform': scale,
                };

                ripple.setAttribute('style', convertStyle(style));

                setTimeout(function() {
                    try {
                        el.removeChild(ripple);
                    } catch(e) {
                        return false;
                    }
                }, Effect.duration);
            }, delay);
        },

        // Little hack to make <input> can perform waves effect
        wrapInput: function(elements) {
            for (var a = 0; a < elements.length; a++) {
                var el = elements[a];

                if (el.tagName.toLowerCase() === 'input') {
                    var parent = el.parentNode;

                    // If input already have parent just pass through
                    if (parent.tagName.toLowerCase() === 'i' && parent.className.indexOf('waves-effect') !== -1) {
                        continue;
                    }

                    // Put element class and style to the specified parent
                    var wrapper = document.createElement('i');
                    wrapper.className = el.className + ' waves-input-wrapper';

                    var elementStyle = el.getAttribute('style');

                    if (!elementStyle) {
                        elementStyle = '';
                    }

                    wrapper.setAttribute('style', elementStyle);

                    el.className = 'waves-button-input';
                    el.removeAttribute('style');

                    // Put element as child
                    parent.replaceChild(wrapper, el);
                    wrapper.appendChild(el);
                }
            }
        }
    };


    /**
     * Disable mousedown event for 500ms during and after touch
     */
    var TouchHandler = {
        /* uses an integer rather than bool so there's no issues with
         * needing to clear timeouts if another touch event occurred
         * within the 500ms. Cannot mouseup between touchstart and
         * touchend, nor in the 500ms after touchend. */
        touches: 0,
        allowEvent: function(e) {
            var allow = true;

            if (e.type === 'touchstart') {
                TouchHandler.touches += 1; //push
            } else if (e.type === 'touchend' || e.type === 'touchcancel') {
                setTimeout(function() {
                    if (TouchHandler.touches > 0) {
                        TouchHandler.touches -= 1; //pop after 500ms
                    }
                }, 500);
            } else if (e.type === 'mousedown' && TouchHandler.touches > 0) {
                allow = false;
            }

            return allow;
        },
        touchup: function(e) {
            TouchHandler.allowEvent(e);
        }
    };


    /**
     * Delegated click handler for .waves-effect element.
     * returns null when .waves-effect element not in "click tree"
     */
    function getWavesEffectElement(e) {
        if (TouchHandler.allowEvent(e) === false) {
            return null;
        }

        var element = null;
        var target = e.target || e.srcElement;

        while (target.parentElement !== null) {
            if (!(target instanceof SVGElement) && target.className.indexOf('waves-effect') !== -1) {
                element = target;
                break;
            } else if (target.classList.contains('waves-effect')) {
                element = target;
                break;
            }
            target = target.parentElement;
        }

        return element;
    }

    /**
     * Bubble the click and show effect if .waves-effect elem was found
     */
    function showEffect(e) {
        var element = getWavesEffectElement(e);

        if (element !== null) {
            Effect.show(e, element);

            if ('ontouchstart' in window) {
                element.addEventListener('touchend', Effect.hide, false);
                element.addEventListener('touchcancel', Effect.hide, false);
            }

            element.addEventListener('mouseup', Effect.hide, false);
            element.addEventListener('mouseleave', Effect.hide, false);
        }
    }

    Waves.displayEffect = function(options) {
        options = options || {};

        if ('duration' in options) {
            Effect.duration = options.duration;
        }

        //Wrap input inside <i> tag
        Effect.wrapInput($$('.waves-effect'));

        if ('ontouchstart' in window) {
            document.body.addEventListener('touchstart', showEffect, false);
        }

        document.body.addEventListener('mousedown', showEffect, false);
    };

    /**
     * Attach Waves to an input element (or any element which doesn't
     * bubble mouseup/mousedown events).
     *   Intended to be used with dynamically loaded forms/inputs, or
     * where the user doesn't want a delegated click handler.
     */
    Waves.attach = function(element) {
        //FUTURE: automatically add waves classes and allow users
        // to specify them with an options param? Eg. light/classic/button
        if (element.tagName.toLowerCase() === 'input') {
            Effect.wrapInput([element]);
            element = element.parentElement;
        }

        if ('ontouchstart' in window) {
            element.addEventListener('touchstart', showEffect, false);
        }

        element.addEventListener('mousedown', showEffect, false);
    };

    window.Waves = Waves;

    document.addEventListener('DOMContentLoaded', function() {
        Waves.displayEffect();
    }, false);

})(window);
;Materialize.toast = function (message, displayLength, className, completeCallback) {
    className = className || "";

    var container = document.getElementById('toast-container');

    // Create toast container if it does not exist
    if (container === null) {
        // create notification container
        container = document.createElement('div');
        container.id = 'toast-container';
        document.body.appendChild(container);
    }

    // Select and append toast
    var newToast = createToast(message);

    // only append toast if message is not undefined
    if(message){
        container.appendChild(newToast);
    }

    newToast.style.top = '35px';
    newToast.style.opacity = 0;

    // Animate toast in
    Vel(newToast, { "top" : "0px", opacity: 1 }, {duration: 300,
      easing: 'easeOutCubic',
      queue: false});

    // Allows timer to be pause while being panned
    var timeLeft = displayLength;
    var counterInterval;
    if (timeLeft != null)  {
      counterInterval = setInterval (function(){
        if (newToast.parentNode === null)
          window.clearInterval(counterInterval);

        // If toast is not being dragged, decrease its time remaining
        if (!newToast.classList.contains('panning')) {
          timeLeft -= 20;
        }

        if (timeLeft <= 0) {
          // Animate toast out
          Vel(newToast, {"opacity": 0, marginTop: '-40px'}, { duration: 375,
              easing: 'easeOutExpo',
              queue: false,
              complete: function(){
                // Call the optional callback
                if(typeof(completeCallback) === "function")
                  completeCallback();
                // Remove toast after it times out
                this[0].parentNode.removeChild(this[0]);
              }
            });
          window.clearInterval(counterInterval);
        }
      }, 20);
    }



    function createToast(html) {

        // Create toast
        var toast = document.createElement('div');
        toast.classList.add('toast');
        if (className) {
            var classes = className.split(' ');

            for (var i = 0, count = classes.length; i < count; i++) {
                toast.classList.add(classes[i]);
            }
        }
        // If type of parameter is HTML Element
        if ( typeof HTMLElement === "object" ? html instanceof HTMLElement : html && typeof html === "object" && html !== null && html.nodeType === 1 && typeof html.nodeName==="string"
) {
          toast.appendChild(html);
        }
        else if (html instanceof jQuery) {
          // Check if it is jQuery object
          toast.appendChild(html[0]);
        }
        else {
          // Insert as text;
          toast.innerHTML = html;
        }
        // Bind hammer
        var hammerHandler = new Hammer(toast, {prevent_default: false});
        hammerHandler.on('pan', function(e) {
          var deltaX = e.deltaX;
          var activationDistance = 80;

          // Change toast state
          if (!toast.classList.contains('panning')){
            toast.classList.add('panning');
          }

          var opacityPercent = 1-Math.abs(deltaX / activationDistance);
          if (opacityPercent < 0)
            opacityPercent = 0;

          Vel(toast, {left: deltaX, opacity: opacityPercent }, {duration: 50, queue: false, easing: 'easeOutQuad'});

        });

        hammerHandler.on('panend', function(e) {
          var deltaX = e.deltaX;
          var activationDistance = 80;

          // If toast dragged past activation point
          if (Math.abs(deltaX) > activationDistance) {
            Vel(toast, {marginTop: '-40px'}, { duration: 375,
                easing: 'easeOutExpo',
                queue: false,
                complete: function(){
                  if(typeof(completeCallback) === "function") {
                    completeCallback();
                  }
                  toast.parentNode.removeChild(toast);
                }
            });

          } else {
            toast.classList.remove('panning');
            // Put toast back into original position
            Vel(toast, { left: 0, opacity: 1 }, { duration: 300,
              easing: 'easeOutExpo',
              queue: false
            });

          }
        });

        return toast;
    }
};
;(function ($) {

  var methods = {
    init : function(options) {
      var defaults = {
        menuWidth: 300,
        edge: 'left',
        closeOnClick: false,
        draggable: true
      };
      options = $.extend(defaults, options);

      $(this).each(function(){
        var $this = $(this);
        var menu_id = $("#"+ $this.attr('data-activates'));

        // Set to width
        if (options.menuWidth != 300) {
          menu_id.css('width', options.menuWidth);
        }

        // Add Touch Area
        var $dragTarget;
        if (options.draggable) {
          $dragTarget = $('<div class="drag-target"></div>').attr('data-sidenav', $this.attr('data-activates'));
          $('body').append($dragTarget);
        } else {
          $dragTarget = $();
        }

        if (options.edge == 'left') {
          menu_id.css('transform', 'translateX(-100%)');
          $dragTarget.css({'left': 0}); // Add Touch Area
        }
        else {
          menu_id.addClass('right-aligned') // Change text-alignment to right
            .css('transform', 'translateX(100%)');
          $dragTarget.css({'right': 0}); // Add Touch Area
        }

        // If fixed sidenav, bring menu out
        if (menu_id.hasClass('fixed')) {
            if (window.innerWidth > 992) {
              menu_id.css('transform', 'translateX(0)');
            }
          }

        // Window resize to reset on large screens fixed
        if (menu_id.hasClass('fixed')) {
          $(window).resize( function() {
            if (window.innerWidth > 992) {
              // Close menu if window is resized bigger than 992 and user has fixed sidenav
              if ($('#sidenav-overlay').length !== 0 && menuOut) {
                removeMenu(true);
              }
              else {
                // menu_id.removeAttr('style');
                menu_id.css('transform', 'translateX(0%)');
                // menu_id.css('width', options.menuWidth);
              }
            }
            else if (menuOut === false){
              if (options.edge === 'left') {
                menu_id.css('transform', 'translateX(-100%)');
              } else {
                menu_id.css('transform', 'translateX(100%)');
              }

            }

          });
        }

        // if closeOnClick, then add close event for all a tags in side sideNav
        if (options.closeOnClick === true) {
          menu_id.on("click.itemclick", "a:not(.collapsible-header)", function(){
            removeMenu();
          });
        }

        var removeMenu = function(restoreNav) {
          panning = false;
          menuOut = false;
          // Reenable scrolling
          $('body').css({
            overflow: '',
            width: ''
          });

          $('#sidenav-overlay').velocity({opacity: 0}, {duration: 200,
              queue: false, easing: 'easeOutQuad',
            complete: function() {
              $(this).remove();
            } });
          if (options.edge === 'left') {
            // Reset phantom div
            $dragTarget.css({width: '', right: '', left: '0'});
            menu_id.velocity(
              {'translateX': '-100%'},
              { duration: 200,
                queue: false,
                easing: 'easeOutCubic',
                complete: function() {
                  if (restoreNav === true) {
                    // Restore Fixed sidenav
                    menu_id.removeAttr('style');
                    menu_id.css('width', options.menuWidth);
                  }
                }

            });
          }
          else {
            // Reset phantom div
            $dragTarget.css({width: '', right: '0', left: ''});
            menu_id.velocity(
              {'translateX': '100%'},
              { duration: 200,
                queue: false,
                easing: 'easeOutCubic',
                complete: function() {
                  if (restoreNav === true) {
                    // Restore Fixed sidenav
                    menu_id.removeAttr('style');
                    menu_id.css('width', options.menuWidth);
                  }
                }
              });
          }
        };



        // Touch Event
        var panning = false;
        var menuOut = false;

        if (options.draggable) {
          $dragTarget.on('click', function(){
            if (menuOut) {
              removeMenu();
            }
          });

          $dragTarget.hammer({
            prevent_default: false
          }).bind('pan', function(e) {

            if (e.gesture.pointerType == "touch") {

              var direction = e.gesture.direction;
              var x = e.gesture.center.x;
              var y = e.gesture.center.y;
              var velocityX = e.gesture.velocityX;

              // Disable Scrolling
              var $body = $('body');
              var $overlay = $('#sidenav-overlay');
              var oldWidth = $body.innerWidth();
              $body.css('overflow', 'hidden');
              $body.width(oldWidth);

              // If overlay does not exist, create one and if it is clicked, close menu
              if ($overlay.length === 0) {
                $overlay = $('<div id="sidenav-overlay"></div>');
                $overlay.css('opacity', 0).click( function(){
                  removeMenu();
                });
                $('body').append($overlay);
              }

              // Keep within boundaries
              if (options.edge === 'left') {
                if (x > options.menuWidth) { x = options.menuWidth; }
                else if (x < 0) { x = 0; }
              }

              if (options.edge === 'left') {
                // Left Direction
                if (x < (options.menuWidth / 2)) { menuOut = false; }
                // Right Direction
                else if (x >= (options.menuWidth / 2)) { menuOut = true; }
                menu_id.css('transform', 'translateX(' + (x - options.menuWidth) + 'px)');
              }
              else {
                // Left Direction
                if (x < (window.innerWidth - options.menuWidth / 2)) {
                  menuOut = true;
                }
                // Right Direction
                else if (x >= (window.innerWidth - options.menuWidth / 2)) {
                 menuOut = false;
               }
                var rightPos = (x - options.menuWidth / 2);
                if (rightPos < 0) {
                  rightPos = 0;
                }

                menu_id.css('transform', 'translateX(' + rightPos + 'px)');
              }


              // Percentage overlay
              var overlayPerc;
              if (options.edge === 'left') {
                overlayPerc = x / options.menuWidth;
                $overlay.velocity({opacity: overlayPerc }, {duration: 10, queue: false, easing: 'easeOutQuad'});
              }
              else {
                overlayPerc = Math.abs((x - window.innerWidth) / options.menuWidth);
                $overlay.velocity({opacity: overlayPerc }, {duration: 10, queue: false, easing: 'easeOutQuad'});
              }
            }

          }).bind('panend', function(e) {

            if (e.gesture.pointerType == "touch") {
              var $overlay = $('<div id="sidenav-overlay"></div>');
              var velocityX = e.gesture.velocityX;
              var x = e.gesture.center.x;
              var leftPos = x - options.menuWidth;
              var rightPos = x - options.menuWidth / 2;
              if (leftPos > 0 ) {
                leftPos = 0;
              }
              if (rightPos < 0) {
                rightPos = 0;
              }
              panning = false;

              if (options.edge === 'left') {
                // If velocityX <= 0.3 then the user is flinging the menu closed so ignore menuOut
                if ((menuOut && velocityX <= 0.3) || velocityX < -0.5) {
                  // Return menu to open
                  if (leftPos !== 0) {
                    menu_id.velocity({'translateX': [0, leftPos]}, {duration: 300, queue: false, easing: 'easeOutQuad'});
                  }

                  $overlay.velocity({opacity: 1 }, {duration: 50, queue: false, easing: 'easeOutQuad'});
                  $dragTarget.css({width: '50%', right: 0, left: ''});
                  menuOut = true;
                }
                else if (!menuOut || velocityX > 0.3) {
                  // Enable Scrolling
                  $('body').css({
                    overflow: '',
                    width: ''
                  });
                  // Slide menu closed
                  menu_id.velocity({'translateX': [-1 * options.menuWidth - 10, leftPos]}, {duration: 200, queue: false, easing: 'easeOutQuad'});
                  $overlay.velocity({opacity: 0 }, {duration: 200, queue: false, easing: 'easeOutQuad',
                    complete: function () {
                      $(this).remove();
                    }});
                  $dragTarget.css({width: '10px', right: '', left: 0});
                }
              }
              else {
                if ((menuOut && velocityX >= -0.3) || velocityX > 0.5) {
                  // Return menu to open
                  if (rightPos !== 0) {
                    menu_id.velocity({'translateX': [0, rightPos]}, {duration: 300, queue: false, easing: 'easeOutQuad'});
                  }

                  $overlay.velocity({opacity: 1 }, {duration: 50, queue: false, easing: 'easeOutQuad'});
                  $dragTarget.css({width: '50%', right: '', left: 0});
                  menuOut = true;
                }
                else if (!menuOut || velocityX < -0.3) {
                  // Enable Scrolling
                  $('body').css({
                    overflow: '',
                    width: ''
                  });

                  // Slide menu closed
                  menu_id.velocity({'translateX': [options.menuWidth + 10, rightPos]}, {duration: 200, queue: false, easing: 'easeOutQuad'});
                  $overlay.velocity({opacity: 0 }, {duration: 200, queue: false, easing: 'easeOutQuad',
                    complete: function () {
                      $(this).remove();
                    }});
                  $dragTarget.css({width: '10px', right: 0, left: ''});
                }
              }

            }
          });
        }

        $this.click(function() {
          if (menuOut === true) {
            menuOut = false;
            panning = false;
            removeMenu();
          }
          else {

            // Disable Scrolling
            var $body = $('body');
            var $overlay = $('<div id="sidenav-overlay"></div>');
            var oldWidth = $body.innerWidth();
            $body.css('overflow', 'hidden');
            $body.width(oldWidth);

            // Push current drag target on top of DOM tree
            $('body').append($dragTarget);

            if (options.edge === 'left') {
              $dragTarget.css({width: '50%', right: 0, left: ''});
              menu_id.velocity({'translateX': [0, -1 * options.menuWidth]}, {duration: 300, queue: false, easing: 'easeOutQuad'});
            }
            else {
              $dragTarget.css({width: '50%', right: '', left: 0});
              menu_id.velocity({'translateX': [0, options.menuWidth]}, {duration: 300, queue: false, easing: 'easeOutQuad'});
            }

            $overlay.css('opacity', 0)
            .click(function(){
              menuOut = false;
              panning = false;
              removeMenu();
              $overlay.velocity({opacity: 0}, {duration: 300, queue: false, easing: 'easeOutQuad',
                complete: function() {
                  $(this).remove();
                } });

            });
            $('body').append($overlay);
            $overlay.velocity({opacity: 1}, {duration: 300, queue: false, easing: 'easeOutQuad',
              complete: function () {
                menuOut = true;
                panning = false;
              }
            });
          }

          return false;
        });
      });


    },
    destroy: function () {
      var $overlay = $('#sidenav-overlay');
      var $dragTarget = $('.drag-target[data-sidenav="' + $(this).attr('data-activates') + '"]');
      $overlay.trigger('click');
      $dragTarget.remove();
      $(this).off('click');
      $overlay.remove();
    },
    show : function() {
      this.trigger('click');
    },
    hide : function() {
      $('#sidenav-overlay').trigger('click');
    }
  };


    $.fn.sideNav = function(methodOrOptions) {
      if ( methods[methodOrOptions] ) {
        return methods[ methodOrOptions ].apply( this, Array.prototype.slice.call( arguments, 1 ));
      } else if ( typeof methodOrOptions === 'object' || ! methodOrOptions ) {
        // Default to "init"
        return methods.init.apply( this, arguments );
      } else {
        $.error( 'Method ' +  methodOrOptions + ' does not exist on jQuery.sideNav' );
      }
    }; // Plugin end
}( jQuery ));
;/**
 * Extend jquery with a scrollspy plugin.
 * This watches the window scroll and fires events when elements are scrolled into viewport.
 *
 * throttle() and getTime() taken from Underscore.js
 * https://github.com/jashkenas/underscore
 *
 * @author Copyright 2013 John Smart
 * @license https://raw.github.com/thesmart/jquery-scrollspy/master/LICENSE
 * @see https://github.com/thesmart
 * @version 0.1.2
 */
(function($) {

	var jWindow = $(window);
	var elements = [];
	var elementsInView = [];
	var isSpying = false;
	var ticks = 0;
	var unique_id = 1;
	var offset = {
		top : 0,
		right : 0,
		bottom : 0,
		left : 0,
	}

	/**
	 * Find elements that are within the boundary
	 * @param {number} top
	 * @param {number} right
	 * @param {number} bottom
	 * @param {number} left
	 * @return {jQuery}		A collection of elements
	 */
	function findElements(top, right, bottom, left) {
		var hits = $();
		$.each(elements, function(i, element) {
			if (element.height() > 0) {
				var elTop = element.offset().top,
					elLeft = element.offset().left,
					elRight = elLeft + element.width(),
					elBottom = elTop + element.height();

				var isIntersect = !(elLeft > right ||
					elRight < left ||
					elTop > bottom ||
					elBottom < top);

				if (isIntersect) {
					hits.push(element);
				}
			}
		});

		return hits;
	}


	/**
	 * Called when the user scrolls the window
	 */
	function onScroll(scrollOffset) {
		// unique tick id
		++ticks;

		// viewport rectangle
		var top = jWindow.scrollTop(),
			left = jWindow.scrollLeft(),
			right = left + jWindow.width(),
			bottom = top + jWindow.height();

		// determine which elements are in view
		var intersections = findElements(top+offset.top + scrollOffset || 200, right+offset.right, bottom+offset.bottom, left+offset.left);
		$.each(intersections, function(i, element) {

			var lastTick = element.data('scrollSpy:ticks');
			if (typeof lastTick != 'number') {
				// entered into view
				element.triggerHandler('scrollSpy:enter');
			}

			// update tick id
			element.data('scrollSpy:ticks', ticks);
		});

		// determine which elements are no longer in view
		$.each(elementsInView, function(i, element) {
			var lastTick = element.data('scrollSpy:ticks');
			if (typeof lastTick == 'number' && lastTick !== ticks) {
				// exited from view
				element.triggerHandler('scrollSpy:exit');
				element.data('scrollSpy:ticks', null);
			}
		});

		// remember elements in view for next tick
		elementsInView = intersections;
	}

	/**
	 * Called when window is resized
	*/
	function onWinSize() {
		jWindow.trigger('scrollSpy:winSize');
	}

	/**
	 * Get time in ms
   * @license https://raw.github.com/jashkenas/underscore/master/LICENSE
	 * @type {function}
	 * @return {number}
	 */
	var getTime = (Date.now || function () {
		return new Date().getTime();
	});

	/**
	 * Returns a function, that, when invoked, will only be triggered at most once
	 * during a given window of time. Normally, the throttled function will run
	 * as much as it can, without ever going more than once per `wait` duration;
	 * but if you'd like to disable the execution on the leading edge, pass
	 * `{leading: false}`. To disable execution on the trailing edge, ditto.
	 * @license https://raw.github.com/jashkenas/underscore/master/LICENSE
	 * @param {function} func
	 * @param {number} wait
	 * @param {Object=} options
	 * @returns {Function}
	 */
	function throttle(func, wait, options) {
		var context, args, result;
		var timeout = null;
		var previous = 0;
		options || (options = {});
		var later = function () {
			previous = options.leading === false ? 0 : getTime();
			timeout = null;
			result = func.apply(context, args);
			context = args = null;
		};
		return function () {
			var now = getTime();
			if (!previous && options.leading === false) previous = now;
			var remaining = wait - (now - previous);
			context = this;
			args = arguments;
			if (remaining <= 0) {
				clearTimeout(timeout);
				timeout = null;
				previous = now;
				result = func.apply(context, args);
				context = args = null;
			} else if (!timeout && options.trailing !== false) {
				timeout = setTimeout(later, remaining);
			}
			return result;
		};
	};

	/**
	 * Enables ScrollSpy using a selector
	 * @param {jQuery|string} selector  The elements collection, or a selector
	 * @param {Object=} options	Optional.
        throttle : number -> scrollspy throttling. Default: 100 ms
        offsetTop : number -> offset from top. Default: 0
        offsetRight : number -> offset from right. Default: 0
        offsetBottom : number -> offset from bottom. Default: 0
        offsetLeft : number -> offset from left. Default: 0
	 * @returns {jQuery}
	 */
	$.scrollSpy = function(selector, options) {
	  var defaults = {
			throttle: 100,
			scrollOffset: 200 // offset - 200 allows elements near bottom of page to scroll
    };
    options = $.extend(defaults, options);

		var visible = [];
		selector = $(selector);
		selector.each(function(i, element) {
			elements.push($(element));
			$(element).data("scrollSpy:id", i);
			// Smooth scroll to section
		  $('a[href="#' + $(element).attr('id') + '"]').click(function(e) {
		    e.preventDefault();
		    var offset = $(Materialize.escapeHash(this.hash)).offset().top + 1;
	    	$('html, body').animate({ scrollTop: offset - options.scrollOffset }, {duration: 400, queue: false, easing: 'easeOutCubic'});
		  });
		});

		offset.top = options.offsetTop || 0;
		offset.right = options.offsetRight || 0;
		offset.bottom = options.offsetBottom || 0;
		offset.left = options.offsetLeft || 0;

		var throttledScroll = throttle(function() {
			onScroll(options.scrollOffset);
		}, options.throttle || 100);
		var readyScroll = function(){
			$(document).ready(throttledScroll);
		};

		if (!isSpying) {
			jWindow.on('scroll', readyScroll);
			jWindow.on('resize', readyScroll);
			isSpying = true;
		}

		// perform a scan once, after current execution context, and after dom is ready
		setTimeout(readyScroll, 0);


		selector.on('scrollSpy:enter', function() {
			visible = $.grep(visible, function(value) {
	      return value.height() != 0;
	    });

			var $this = $(this);

			if (visible[0]) {
				$('a[href="#' + visible[0].attr('id') + '"]').removeClass('active');
				if ($this.data('scrollSpy:id') < visible[0].data('scrollSpy:id')) {
					visible.unshift($(this));
				}
				else {
					visible.push($(this));
				}
			}
			else {
				visible.push($(this));
			}


			$('a[href="#' + visible[0].attr('id') + '"]').addClass('active');
		});
		selector.on('scrollSpy:exit', function() {
			visible = $.grep(visible, function(value) {
	      return value.height() != 0;
	    });

			if (visible[0]) {
				$('a[href="#' + visible[0].attr('id') + '"]').removeClass('active');
				var $this = $(this);
				visible = $.grep(visible, function(value) {
	        return value.attr('id') != $this.attr('id');
	      });
	      if (visible[0]) { // Check if empty
					$('a[href="#' + visible[0].attr('id') + '"]').addClass('active');
	      }
			}
		});

		return selector;
	};

	/**
	 * Listen for window resize events
	 * @param {Object=} options						Optional. Set { throttle: number } to change throttling. Default: 100 ms
	 * @returns {jQuery}		$(window)
	 */
	$.winSizeSpy = function(options) {
		$.winSizeSpy = function() { return jWindow; }; // lock from multiple calls
		options = options || {
			throttle: 100
		};
		return jWindow.on('resize', throttle(onWinSize, options.throttle || 100));
	};

	/**
	 * Enables ScrollSpy on a collection of elements
	 * e.g. $('.scrollSpy').scrollSpy()
	 * @param {Object=} options	Optional.
											throttle : number -> scrollspy throttling. Default: 100 ms
											offsetTop : number -> offset from top. Default: 0
											offsetRight : number -> offset from right. Default: 0
											offsetBottom : number -> offset from bottom. Default: 0
											offsetLeft : number -> offset from left. Default: 0
	 * @returns {jQuery}
	 */
	$.fn.scrollSpy = function(options) {
		return $.scrollSpy($(this), options);
	};

})(jQuery);
;(function ($) {
  $(document).ready(function() {

    // Function to update labels of text fields
    Materialize.updateTextFields = function() {
      var input_selector = 'input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], textarea';
      $(input_selector).each(function(index, element) {
        if ($(element).val().length > 0 || element.autofocus ||$(this).attr('placeholder') !== undefined || $(element)[0].validity.badInput === true) {
          $(this).siblings('label').addClass('active');
        }
        else {
          $(this).siblings('label').removeClass('active');
        }
      });
    };

    // Text based inputs
    var input_selector = 'input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], textarea';

    // Add active if form auto complete
    $(document).on('change', input_selector, function () {
      if($(this).val().length !== 0 || $(this).attr('placeholder') !== undefined) {
        $(this).siblings('label').addClass('active');
      }
      validate_field($(this));
    });

    // Add active if input element has been pre-populated on document ready
    $(document).ready(function() {
      Materialize.updateTextFields();
    });

    // HTML DOM FORM RESET handling
    $(document).on('reset', function(e) {
      var formReset = $(e.target);
      if (formReset.is('form')) {
        formReset.find(input_selector).removeClass('valid').removeClass('invalid');
        formReset.find(input_selector).each(function () {
          if ($(this).attr('value') === '') {
            $(this).siblings('label').removeClass('active');
          }
        });

        // Reset select
        formReset.find('select.initialized').each(function () {
          var reset_text = formReset.find('option[selected]').text();
          formReset.siblings('input.select-dropdown').val(reset_text);
        });
      }
    });

    // Add active when element has focus
    $(document).on('focus', input_selector, function () {
      $(this).siblings('label, .prefix').addClass('active');
    });

    $(document).on('blur', input_selector, function () {
      var $inputElement = $(this);
      var selector = ".prefix";

      if ($inputElement.val().length === 0 && $inputElement[0].validity.badInput !== true && $inputElement.attr('placeholder') === undefined) {
        selector += ", label";
      }

      $inputElement.siblings(selector).removeClass('active');

      validate_field($inputElement);
    });

    window.validate_field = function(object) {
      var hasLength = object.attr('length') !== undefined;
      var lenAttr = parseInt(object.attr('length'));
      var len = object.val().length;

      if (object.val().length === 0 && object[0].validity.badInput === false) {
        if (object.hasClass('validate')) {
          object.removeClass('valid');
          object.removeClass('invalid');
        }
      }
      else {
        if (object.hasClass('validate')) {
          // Check for character counter attributes
          if ((object.is(':valid') && hasLength && (len <= lenAttr)) || (object.is(':valid') && !hasLength)) {
            object.removeClass('invalid');
            object.addClass('valid');
          }
          else {
            object.removeClass('valid');
            object.addClass('invalid');
          }
        }
      }
    };

    // Radio and Checkbox focus class
    var radio_checkbox = 'input[type=radio], input[type=checkbox]';
    $(document).on('keyup.radio', radio_checkbox, function(e) {
      // TAB, check if tabbing to radio or checkbox.
      if (e.which === 9) {
        $(this).addClass('tabbed');
        var $this = $(this);
        $this.one('blur', function(e) {

          $(this).removeClass('tabbed');
        });
        return;
      }
    });

    // Textarea Auto Resize
    var hiddenDiv = $('.hiddendiv').first();
    if (!hiddenDiv.length) {
      hiddenDiv = $('<div class="hiddendiv common"></div>');
      $('body').append(hiddenDiv);
    }
    var text_area_selector = '.materialize-textarea';

    function textareaAutoResize($textarea) {
      // Set font properties of hiddenDiv

      var fontFamily = $textarea.css('font-family');
      var fontSize = $textarea.css('font-size');
      var lineHeight = $textarea.css('line-height');

      if (fontSize) { hiddenDiv.css('font-size', fontSize); }
      if (fontFamily) { hiddenDiv.css('font-family', fontFamily); }
      if (lineHeight) { hiddenDiv.css('line-height', lineHeight); }

      if ($textarea.attr('wrap') === "off") {
        hiddenDiv.css('overflow-wrap', "normal")
                 .css('white-space', "pre");
      }

      hiddenDiv.text($textarea.val() + '\n');
      var content = hiddenDiv.html().replace(/\n/g, '<br>');
      hiddenDiv.html(content);


      // When textarea is hidden, width goes crazy.
      // Approximate with half of window size

      if ($textarea.is(':visible')) {
        hiddenDiv.css('width', $textarea.width());
      }
      else {
        hiddenDiv.css('width', $(window).width()/2);
      }

      $textarea.css('height', hiddenDiv.height());
    }

    $(text_area_selector).each(function () {
      var $textarea = $(this);
      if ($textarea.val().length) {
        textareaAutoResize($textarea);
      }
    });

    $('body').on('keyup keydown autoresize', text_area_selector, function () {
      textareaAutoResize($(this));
    });

    // File Input Path
    $(document).on('change', '.file-field input[type="file"]', function () {
      var file_field = $(this).closest('.file-field');
      var path_input = file_field.find('input.file-path');
      var files      = $(this)[0].files;
      var file_names = [];
      for (var i = 0; i < files.length; i++) {
        file_names.push(files[i].name);
      }
      path_input.val(file_names.join(", "));
      path_input.trigger('change');
    });

    /****************
    *  Range Input  *
    ****************/

    var range_type = 'input[type=range]';
    var range_mousedown = false;
    var left;

    $(range_type).each(function () {
      var thumb = $('<span class="thumb"><span class="value"></span></span>');
      $(this).after(thumb);
    });

    var range_wrapper = '.range-field';
    $(document).on('change', range_type, function(e) {
      var thumb = $(this).siblings('.thumb');
      thumb.find('.value').html($(this).val());
    });

    $(document).on('input mousedown touchstart', range_type, function(e) {
      var thumb = $(this).siblings('.thumb');
      var width = $(this).outerWidth();

      // If thumb indicator does not exist yet, create it
      if (thumb.length <= 0) {
        thumb = $('<span class="thumb"><span class="value"></span></span>');
        $(this).after(thumb);
      }

      // Set indicator value
      thumb.find('.value').html($(this).val());

      range_mousedown = true;
      $(this).addClass('active');

      if (!thumb.hasClass('active')) {
        thumb.velocity({ height: "30px", width: "30px", top: "-20px", marginLeft: "-15px"}, { duration: 300, easing: 'easeOutExpo' });
      }

      if (e.type !== 'input') {
        if(e.pageX === undefined || e.pageX === null){//mobile
           left = e.originalEvent.touches[0].pageX - $(this).offset().left;
        }
        else{ // desktop
           left = e.pageX - $(this).offset().left;
        }
        if (left < 0) {
          left = 0;
        }
        else if (left > width) {
          left = width;
        }
        thumb.addClass('active').css('left', left);
      }

      thumb.find('.value').html($(this).val());
    });

    $(document).on('mouseup touchend', range_wrapper, function() {
      range_mousedown = false;
      $(this).removeClass('active');
    });

    $(document).on('mousemove touchmove', range_wrapper, function(e) {
      var thumb = $(this).children('.thumb');
      var left;
      if (range_mousedown) {
        if (!thumb.hasClass('active')) {
          thumb.velocity({ height: '30px', width: '30px', top: '-20px', marginLeft: '-15px'}, { duration: 300, easing: 'easeOutExpo' });
        }
        if (e.pageX === undefined || e.pageX === null) { //mobile
          left = e.originalEvent.touches[0].pageX - $(this).offset().left;
        }
        else{ // desktop
          left = e.pageX - $(this).offset().left;
        }
        var width = $(this).outerWidth();

        if (left < 0) {
          left = 0;
        }
        else if (left > width) {
          left = width;
        }
        thumb.addClass('active').css('left', left);
        thumb.find('.value').html(thumb.siblings(range_type).val());
      }
    });

    $(document).on('mouseout touchleave', range_wrapper, function() {
      if (!range_mousedown) {

        var thumb = $(this).children('.thumb');

        if (thumb.hasClass('active')) {
          thumb.velocity({ height: '0', width: '0', top: '10px', marginLeft: '-6px'}, { duration: 100 });
        }
        thumb.removeClass('active');
      }
    });

    /**************************
     * Auto complete plugin  *
     *************************/
    $.fn.autocomplete = function (options) {
      // Defaults
      var defaults = {
        data: {}
      };

      options = $.extend(defaults, options);

      return this.each(function() {
        var $input = $(this);
        var data = options.data,
            $inputDiv = $input.closest('.input-field'); // Div to append on

        // Check if data isn't empty
        if (!$.isEmptyObject(data)) {
          // Create autocomplete element
          var $autocomplete = $('<ul class="autocomplete-content dropdown-content"></ul>');

          // Append autocomplete element
          if ($inputDiv.length) {
            $inputDiv.append($autocomplete); // Set ul in body
          } else {
            $input.after($autocomplete);
          }

          var highlight = function(string, $el) {
            var img = $el.find('img');
            var matchStart = $el.text().toLowerCase().indexOf("" + string.toLowerCase() + ""),
                matchEnd = matchStart + string.length - 1,
                beforeMatch = $el.text().slice(0, matchStart),
                matchText = $el.text().slice(matchStart, matchEnd + 1),
                afterMatch = $el.text().slice(matchEnd + 1);
            $el.html("<span>" + beforeMatch + "<span class='highlight'>" + matchText + "</span>" + afterMatch + "</span>");
            if (img.length) {
              $el.prepend(img);
            }
          };

          // Perform search
          $input.on('keyup', function (e) {
            // Capture Enter
            if (e.which === 13) {
              $autocomplete.find('li').first().click();
              return;
            }

            var val = $input.val().toLowerCase();
            $autocomplete.empty();

            // Check if the input isn't empty
            if (val !== '') {
              for(var key in data) {
                if (data.hasOwnProperty(key) &&
                    key.toLowerCase().indexOf(val) !== -1 &&
                    key.toLowerCase() !== val) {
                  var autocompleteOption = $('<li></li>');
                  if(!!data[key]) {
                    autocompleteOption.append('<img src="'+ data[key] +'" class="right circle"><span>'+ key +'</span>');
                  } else {
                    autocompleteOption.append('<span>'+ key +'</span>');
                  }
                  $autocomplete.append(autocompleteOption);

                  highlight(val, autocompleteOption);
                }
              }
            }
          });

          // Set input value
          $autocomplete.on('click', 'li', function () {
            $input.val($(this).text().trim());
            $input.trigger('change');
            $autocomplete.empty();
          });
        }
      });
    };

  }); // End of $(document).ready

  /*******************
   *  Select Plugin  *
   ******************/
  $.fn.material_select = function (callback) {
    $(this).each(function(){
      var $select = $(this);

      if ($select.hasClass('browser-default')) {
        return; // Continue to next (return false breaks out of entire loop)
      }

      var multiple = $select.attr('multiple') ? true : false,
          lastID = $select.data('select-id'); // Tear down structure if Select needs to be rebuilt

      if (lastID) {
        $select.parent().find('span.caret').remove();
        $select.parent().find('input').remove();

        $select.unwrap();
        $('ul#select-options-'+lastID).remove();
      }

      // If destroying the select, remove the selelct-id and reset it to it's uninitialized state.
      if(callback === 'destroy') {
        $select.data('select-id', null).removeClass('initialized');
        return;
      }

      var uniqueID = Materialize.guid();
      $select.data('select-id', uniqueID);
      var wrapper = $('<div class="select-wrapper"></div>');
      wrapper.addClass($select.attr('class'));
      var options = $('<ul id="select-options-' + uniqueID +'" class="dropdown-content select-dropdown ' + (multiple ? 'multiple-select-dropdown' : '') + '"></ul>'),
          selectChildren = $select.children('option, optgroup'),
          valuesSelected = [],
          optionsHover = false;

      var label = $select.find('option:selected').html() || $select.find('option:first').html() || "";

      // Function that renders and appends the option taking into
      // account type and possible image icon.
      var appendOptionWithIcon = function(select, option, type) {
        // Add disabled attr if disabled
        var disabledClass = (option.is(':disabled')) ? 'disabled ' : '';
        var optgroupClass = (type === 'optgroup-option') ? 'optgroup-option ' : '';

        // add icons
        var icon_url = option.data('icon');
        var classes = option.attr('class');
        if (!!icon_url) {
          var classString = '';
          if (!!classes) classString = ' class="' + classes + '"';

          // Check for multiple type.
          if (type === 'multiple') {
            options.append($('<li class="' + disabledClass + '"><img alt="" src="' + icon_url + '"' + classString + '><span><input type="checkbox"' + disabledClass + '/><label></label>' + option.html() + '</span></li>'));
          } else {
            options.append($('<li class="' + disabledClass + optgroupClass + '"><img alt="" src="' + icon_url + '"' + classString + '><span>' + option.html() + '</span></li>'));
          }
          return true;
        }

        // Check for multiple type.
        if (type === 'multiple') {
          options.append($('<li class="' + disabledClass + '"><span><input type="checkbox"' + disabledClass + '/><label></label>' + option.html() + '</span></li>'));
        } else {
          options.append($('<li class="' + disabledClass + optgroupClass + '"><span>' + option.html() + '</span></li>'));
        }
      };

      /* Create dropdown structure. */
      if (selectChildren.length) {
        selectChildren.each(function() {
          if ($(this).is('option')) {
            // Direct descendant option.
            if (multiple) {
              appendOptionWithIcon($select, $(this), 'multiple');

            } else {
              appendOptionWithIcon($select, $(this));
            }
          } else if ($(this).is('optgroup')) {
            // Optgroup.
            var selectOptions = $(this).children('option');
            options.append($('<li class="optgroup"><span>' + $(this).attr('label') + '</span></li>'));

            selectOptions.each(function() {
              appendOptionWithIcon($select, $(this), 'optgroup-option');
            });
          }
        });
      }

      options.find('li:not(.optgroup)').each(function (i) {
        $(this).click(function (e) {
          // Check if option element is disabled
          if (!$(this).hasClass('disabled') && !$(this).hasClass('optgroup')) {
            var selected = true;

            if (multiple) {
              $('input[type="checkbox"]', this).prop('checked', function(i, v) { return !v; });
              selected = toggleEntryFromArray(valuesSelected, $(this).index(), $select);
              $newSelect.trigger('focus');
            } else {
              options.find('li').removeClass('active');
              $(this).toggleClass('active');
              $newSelect.val($(this).text());
            }

            activateOption(options, $(this));
            $select.find('option').eq(i).prop('selected', selected);
            // Trigger onchange() event
            $select.trigger('change');
            if (typeof callback !== 'undefined') callback();
          }

          e.stopPropagation();
        });
      });

      // Wrap Elements
      $select.wrap(wrapper);
      // Add Select Display Element
      var dropdownIcon = $('<span class="caret">&#9660;</span>');
      if ($select.is(':disabled'))
        dropdownIcon.addClass('disabled');

      // escape double quotes
      var sanitizedLabelHtml = label.replace(/"/g, '&quot;');

      var $newSelect = $('<input type="text" class="select-dropdown" readonly="true" ' + (($select.is(':disabled')) ? 'disabled' : '') + ' data-activates="select-options-' + uniqueID +'" value="'+ sanitizedLabelHtml +'"/>');
      $select.before($newSelect);
      $newSelect.before(dropdownIcon);

      $newSelect.after(options);
      // Check if section element is disabled
      if (!$select.is(':disabled')) {
        $newSelect.dropdown({'hover': false, 'closeOnClick': false});
      }

      // Copy tabindex
      if ($select.attr('tabindex')) {
        $($newSelect[0]).attr('tabindex', $select.attr('tabindex'));
      }

      $select.addClass('initialized');

      $newSelect.on({
        'focus': function (){
          if ($('ul.select-dropdown').not(options[0]).is(':visible')) {
            $('input.select-dropdown').trigger('close');
          }
          if (!options.is(':visible')) {
            $(this).trigger('open', ['focus']);
            var label = $(this).val();
            var selectedOption = options.find('li').filter(function() {
              return $(this).text().toLowerCase() === label.toLowerCase();
            })[0];
            activateOption(options, selectedOption);
          }
        },
        'click': function (e){
          e.stopPropagation();
        }
      });

      $newSelect.on('blur', function() {
        if (!multiple) {
          $(this).trigger('close');
        }
        options.find('li.selected').removeClass('selected');
      });

      options.hover(function() {
        optionsHover = true;
      }, function () {
        optionsHover = false;
      });

      $(window).on({
        'click': function () {
          multiple && (optionsHover || $newSelect.trigger('close'));
        }
      });

      // Add initial multiple selections.
      if (multiple) {
        $select.find("option:selected:not(:disabled)").each(function () {
          var index = $(this).index();

          toggleEntryFromArray(valuesSelected, index, $select);
          options.find("li").eq(index).find(":checkbox").prop("checked", true);
        });
      }

      // Make option as selected and scroll to selected position
      var activateOption = function(collection, newOption) {
        if (newOption) {
          collection.find('li.selected').removeClass('selected');
          var option = $(newOption);
          option.addClass('selected');
          options.scrollTo(option);
        }
      };

      // Allow user to search by typing
      // this array is cleared after 1 second
      var filterQuery = [],
          onKeyDown = function(e){
            // TAB - switch to another input
            if(e.which == 9){
              $newSelect.trigger('close');
              return;
            }

            // ARROW DOWN WHEN SELECT IS CLOSED - open select options
            if(e.which == 40 && !options.is(':visible')){
              $newSelect.trigger('open');
              return;
            }

            // ENTER WHEN SELECT IS CLOSED - submit form
            if(e.which == 13 && !options.is(':visible')){
              return;
            }

            e.preventDefault();

            // CASE WHEN USER TYPE LETTERS
            var letter = String.fromCharCode(e.which).toLowerCase(),
                nonLetters = [9,13,27,38,40];
            if (letter && (nonLetters.indexOf(e.which) === -1)) {
              filterQuery.push(letter);

              var string = filterQuery.join(''),
                  newOption = options.find('li').filter(function() {
                    return $(this).text().toLowerCase().indexOf(string) === 0;
                  })[0];

              if (newOption) {
                activateOption(options, newOption);
              }
            }

            // ENTER - select option and close when select options are opened
            if (e.which == 13) {
              var activeOption = options.find('li.selected:not(.disabled)')[0];
              if(activeOption){
                $(activeOption).trigger('click');
                if (!multiple) {
                  $newSelect.trigger('close');
                }
              }
            }

            // ARROW DOWN - move to next not disabled option
            if (e.which == 40) {
              if (options.find('li.selected').length) {
                newOption = options.find('li.selected').next('li:not(.disabled)')[0];
              } else {
                newOption = options.find('li:not(.disabled)')[0];
              }
              activateOption(options, newOption);
            }

            // ESC - close options
            if (e.which == 27) {
              $newSelect.trigger('close');
            }

            // ARROW UP - move to previous not disabled option
            if (e.which == 38) {
              newOption = options.find('li.selected').prev('li:not(.disabled)')[0];
              if(newOption)
                activateOption(options, newOption);
            }

            // Automaticaly clean filter query so user can search again by starting letters
            setTimeout(function(){ filterQuery = []; }, 1000);
          };

      $newSelect.on('keydown', onKeyDown);
    });

    function toggleEntryFromArray(entriesArray, entryIndex, select) {
      var index = entriesArray.indexOf(entryIndex),
          notAdded = index === -1;

      if (notAdded) {
        entriesArray.push(entryIndex);
      } else {
        entriesArray.splice(index, 1);
      }

      select.siblings('ul.dropdown-content').find('li').eq(entryIndex).toggleClass('active');

      // use notAdded instead of true (to detect if the option is selected or not)
      select.find('option').eq(entryIndex).prop('selected', notAdded);
      setValueToInput(entriesArray, select);

      return notAdded;
    }

    function setValueToInput(entriesArray, select) {
      var value = '';

      for (var i = 0, count = entriesArray.length; i < count; i++) {
        var text = select.find('option').eq(entriesArray[i]).text();

        i === 0 ? value += text : value += ', ' + text;
      }

      if (value === '') {
        value = select.find('option:disabled').eq(0).text();
      }

      select.siblings('input.select-dropdown').val(value);
    }
  };

}( jQuery ));
;(function ($) {

  var methods = {

    init : function(options) {
      var defaults = {
        indicators: true,
        height: 400,
        transition: 500,
        interval: 6000
      };
      options = $.extend(defaults, options);

      return this.each(function() {

        // For each slider, we want to keep track of
        // which slide is active and its associated content
        var $this = $(this);
        var $slider = $this.find('ul.slides').first();
        var $slides = $slider.find('> li');
        var $active_index = $slider.find('.active').index();
        var $active, $indicators, $interval;
        if ($active_index != -1) { $active = $slides.eq($active_index); }

        // Transitions the caption depending on alignment
        function captionTransition(caption, duration) {
          if (caption.hasClass("center-align")) {
            caption.velocity({opacity: 0, translateY: -100}, {duration: duration, queue: false});
          }
          else if (caption.hasClass("right-align")) {
            caption.velocity({opacity: 0, translateX: 100}, {duration: duration, queue: false});
          }
          else if (caption.hasClass("left-align")) {
            caption.velocity({opacity: 0, translateX: -100}, {duration: duration, queue: false});
          }
        }

        // This function will transition the slide to any index of the next slide
        function moveToSlide(index) {
          // Wrap around indices.
          if (index >= $slides.length) index = 0;
          else if (index < 0) index = $slides.length -1;

          $active_index = $slider.find('.active').index();

          // Only do if index changes
          if ($active_index != index) {
            $active = $slides.eq($active_index);
            $caption = $active.find('.caption');

            $active.removeClass('active');
            $active.velocity({opacity: 0}, {duration: options.transition, queue: false, easing: 'easeOutQuad',
                              complete: function() {
                                $slides.not('.active').velocity({opacity: 0, translateX: 0, translateY: 0}, {duration: 0, queue: false});
                              } });
            captionTransition($caption, options.transition);


            // Update indicators
            if (options.indicators) {
              $indicators.eq($active_index).removeClass('active');
            }

            $slides.eq(index).velocity({opacity: 1}, {duration: options.transition, queue: false, easing: 'easeOutQuad'});
            $slides.eq(index).find('.caption').velocity({opacity: 1, translateX: 0, translateY: 0}, {duration: options.transition, delay: options.transition, queue: false, easing: 'easeOutQuad'});
            $slides.eq(index).addClass('active');


            // Update indicators
            if (options.indicators) {
              $indicators.eq(index).addClass('active');
            }
          }
        }

        // Set height of slider
        // If fullscreen, do nothing
        if (!$this.hasClass('fullscreen')) {
          if (options.indicators) {
            // Add height if indicators are present
            $this.height(options.height + 40);
          }
          else {
            $this.height(options.height);
          }
          $slider.height(options.height);
        }


        // Set initial positions of captions
        $slides.find('.caption').each(function () {
          captionTransition($(this), 0);
        });

        // Move img src into background-image
        $slides.find('img').each(function () {
          var placeholderBase64 = 'data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';
          if ($(this).attr('src') !== placeholderBase64) {
            $(this).css('background-image', 'url(' + $(this).attr('src') + ')' );
            $(this).attr('src', placeholderBase64);
          }
        });

        // dynamically add indicators
        if (options.indicators) {
          $indicators = $('<ul class="indicators"></ul>');
          $slides.each(function( index ) {
            var $indicator = $('<li class="indicator-item"></li>');

            // Handle clicks on indicators
            $indicator.click(function () {
              var $parent = $slider.parent();
              var curr_index = $parent.find($(this)).index();
              moveToSlide(curr_index);

              // reset interval
              clearInterval($interval);
              $interval = setInterval(
                function(){
                  $active_index = $slider.find('.active').index();
                  if ($slides.length == $active_index + 1) $active_index = 0; // loop to start
                  else $active_index += 1;

                  moveToSlide($active_index);

                }, options.transition + options.interval
              );
            });
            $indicators.append($indicator);
          });
          $this.append($indicators);
          $indicators = $this.find('ul.indicators').find('li.indicator-item');
        }

        if ($active) {
          $active.show();
        }
        else {
          $slides.first().addClass('active').velocity({opacity: 1}, {duration: options.transition, queue: false, easing: 'easeOutQuad'});

          $active_index = 0;
          $active = $slides.eq($active_index);

          // Update indicators
          if (options.indicators) {
            $indicators.eq($active_index).addClass('active');
          }
        }

        // Adjust height to current slide
        $active.find('img').each(function() {
          $active.find('.caption').velocity({opacity: 1, translateX: 0, translateY: 0}, {duration: options.transition, queue: false, easing: 'easeOutQuad'});
        });

        // auto scroll
        $interval = setInterval(
          function(){
            $active_index = $slider.find('.active').index();
            moveToSlide($active_index + 1);

          }, options.transition + options.interval
        );


        // HammerJS, Swipe navigation

        // Touch Event
        var panning = false;
        var swipeLeft = false;
        var swipeRight = false;

        $this.hammer({
            prevent_default: false
        }).bind('pan', function(e) {
          if (e.gesture.pointerType === "touch") {

            // reset interval
            clearInterval($interval);

            var direction = e.gesture.direction;
            var x = e.gesture.deltaX;
            var velocityX = e.gesture.velocityX;

            $curr_slide = $slider.find('.active');
            $curr_slide.velocity({ translateX: x
                }, {duration: 50, queue: false, easing: 'easeOutQuad'});

            // Swipe Left
            if (direction === 4 && (x > ($this.innerWidth() / 2) || velocityX < -0.65)) {
              swipeRight = true;
            }
            // Swipe Right
            else if (direction === 2 && (x < (-1 * $this.innerWidth() / 2) || velocityX > 0.65)) {
              swipeLeft = true;
            }

            // Make Slide Behind active slide visible
            var next_slide;
            if (swipeLeft) {
              next_slide = $curr_slide.next();
              if (next_slide.length === 0) {
                next_slide = $slides.first();
              }
              next_slide.velocity({ opacity: 1
                  }, {duration: 300, queue: false, easing: 'easeOutQuad'});
            }
            if (swipeRight) {
              next_slide = $curr_slide.prev();
              if (next_slide.length === 0) {
                next_slide = $slides.last();
              }
              next_slide.velocity({ opacity: 1
                  }, {duration: 300, queue: false, easing: 'easeOutQuad'});
            }


          }

        }).bind('panend', function(e) {
          if (e.gesture.pointerType === "touch") {

            $curr_slide = $slider.find('.active');
            panning = false;
            curr_index = $slider.find('.active').index();

            if (!swipeRight && !swipeLeft || $slides.length <=1) {
              // Return to original spot
              $curr_slide.velocity({ translateX: 0
                  }, {duration: 300, queue: false, easing: 'easeOutQuad'});
            }
            else if (swipeLeft) {
              moveToSlide(curr_index + 1);
              $curr_slide.velocity({translateX: -1 * $this.innerWidth() }, {duration: 300, queue: false, easing: 'easeOutQuad',
                                    complete: function() {
                                      $curr_slide.velocity({opacity: 0, translateX: 0}, {duration: 0, queue: false});
                                    } });
            }
            else if (swipeRight) {
              moveToSlide(curr_index - 1);
              $curr_slide.velocity({translateX: $this.innerWidth() }, {duration: 300, queue: false, easing: 'easeOutQuad',
                                    complete: function() {
                                      $curr_slide.velocity({opacity: 0, translateX: 0}, {duration: 0, queue: false});
                                    } });
            }
            swipeLeft = false;
            swipeRight = false;

            // Restart interval
            clearInterval($interval);
            $interval = setInterval(
              function(){
                $active_index = $slider.find('.active').index();
                if ($slides.length == $active_index + 1) $active_index = 0; // loop to start
                else $active_index += 1;

                moveToSlide($active_index);

              }, options.transition + options.interval
            );
          }
        });

        $this.on('sliderPause', function() {
          clearInterval($interval);
        });

        $this.on('sliderStart', function() {
          clearInterval($interval);
          $interval = setInterval(
            function(){
              $active_index = $slider.find('.active').index();
              if ($slides.length == $active_index + 1) $active_index = 0; // loop to start
              else $active_index += 1;

              moveToSlide($active_index);

            }, options.transition + options.interval
          );
        });

        $this.on('sliderNext', function() {
          $active_index = $slider.find('.active').index();
          moveToSlide($active_index + 1);
        });

        $this.on('sliderPrev', function() {
          $active_index = $slider.find('.active').index();
          moveToSlide($active_index - 1);
        });

      });



    },
    pause : function() {
      $(this).trigger('sliderPause');
    },
    start : function() {
      $(this).trigger('sliderStart');
    },
    next : function() {
      $(this).trigger('sliderNext');
    },
    prev : function() {
      $(this).trigger('sliderPrev');
    }
  };


    $.fn.slider = function(methodOrOptions) {
      if ( methods[methodOrOptions] ) {
        return methods[ methodOrOptions ].apply( this, Array.prototype.slice.call( arguments, 1 ));
      } else if ( typeof methodOrOptions === 'object' || ! methodOrOptions ) {
        // Default to "init"
        return methods.init.apply( this, arguments );
      } else {
        $.error( 'Method ' +  methodOrOptions + ' does not exist on jQuery.tooltip' );
      }
    }; // Plugin end
}( jQuery ));
;(function ($) {
  $(document).ready(function() {

    $(document).on('click.card', '.card', function (e) {
      if ($(this).find('> .card-reveal').length) {
        if ($(e.target).is($('.card-reveal .card-title')) || $(e.target).is($('.card-reveal .card-title i'))) {
          // Make Reveal animate down and display none
          $(this).find('.card-reveal').velocity(
            {translateY: 0}, {
              duration: 225,
              queue: false,
              easing: 'easeInOutQuad',
              complete: function() { $(this).css({ display: 'none'}); }
            }
          );
        }
        else if ($(e.target).is($('.card .activator')) ||
                 $(e.target).is($('.card .activator i')) ) {
          $(e.target).closest('.card').css('overflow', 'hidden');
          $(this).find('.card-reveal').css({ display: 'block'}).velocity("stop", false).velocity({translateY: '-100%'}, {duration: 300, queue: false, easing: 'easeInOutQuad'});
        }
      }
    });

  });
}( jQuery ));;(function ($) {
  var chipsHandleEvents = false;
  var materialChipsDefaults = {
    data: [],
    placeholder: '',
    secondaryPlaceholder: '',
  };

  $(document).ready(function() {
    // Handle removal of static chips.
    $(document).on('click', '.chip .close', function(e){
      var $chips = $(this).closest('.chips');
      if ($chips.attr('data-initialized')) {
        return;
      }
      $(this).closest('.chip').remove();
    });
  });

  $.fn.material_chip = function (options) {
    var self = this;
    this.$el = $(this);
    this.$document = $(document);
    this.SELS = {
      CHIPS: '.chips',
      CHIP: '.chip',
      INPUT: 'input',
      DELETE: '.material-icons',
      SELECTED_CHIP: '.selected',
    };

    if ('data' === options) {
      return this.$el.data('chips');
    }

    var curr_options = $.extend({}, materialChipsDefaults, options);


    // Initialize
    this.init = function() {
      var i = 0;
      var chips;
      self.$el.each(function(){
        var $chips = $(this);
        var chipId = Materialize.guid();

        if (!curr_options.data || !(curr_options.data instanceof Array)) {
          curr_options.data = [];
        }
        $chips.data('chips', curr_options.data);
        $chips.attr('data-index', i);
        $chips.attr('data-initialized', true);

        if (!$chips.hasClass(self.SELS.CHIPS)) {
          $chips.addClass('chips');
        }

        self.chips($chips, chipId);
        i++;
      });
    };

    this.handleEvents = function(){
      var SELS = self.SELS;

      self.$document.off('click.chips-focus', SELS.CHIPS).on('click.chips-focus', SELS.CHIPS, function(e){
        $(e.target).find(SELS.INPUT).focus();
      });

      self.$document.off('click.chips-select', SELS.CHIP).on('click.chips-select', SELS.CHIP, function(e){
        $(SELS.CHIP).removeClass('selected');
        $(this).toggleClass('selected');
      });

      self.$document.off('keydown.chips').on('keydown.chips', function(e){
        if ($(e.target).is('input, textarea')) {
          return;
        }

        // delete
        var $chip = self.$document.find(SELS.CHIP + SELS.SELECTED_CHIP);
        var $chips = $chip.closest(SELS.CHIPS);
        var length = $chip.siblings(SELS.CHIP).length;
        var index;

        if (!$chip.length) {
          return;
        }

        if (e.which === 8 || e.which === 46) {
          e.preventDefault();

          index = $chip.index();
          self.deleteChip(index, $chips);

          var selectIndex = null;
          if ((index + 1) < length) {
            selectIndex = index;
          } else if (index === length || (index + 1) === length) {
            selectIndex = length - 1;
          }

          if (selectIndex < 0) selectIndex = null;

          if (null !== selectIndex) {
            self.selectChip(selectIndex, $chips);
          }
          if (!length) $chips.find('input').focus();

        // left
        } else if (e.which === 37) {
          index = $chip.index() - 1;
          if (index < 0) {
            return;
          }
          $(SELS.CHIP).removeClass('selected');
          self.selectChip(index, $chips);

        // right
        } else if (e.which === 39) {
          index = $chip.index() + 1;
          $(SELS.CHIP).removeClass('selected');
          if (index > length) {
            $chips.find('input').focus();
            return;
          }
          self.selectChip(index, $chips);
        }
      });

      self.$document.off('focusin.chips', SELS.CHIPS + ' ' + SELS.INPUT).on('focusin.chips', SELS.CHIPS + ' ' + SELS.INPUT, function(e){
        var $currChips = $(e.target).closest(SELS.CHIPS);
        $currChips.addClass('focus');
        $currChips.siblings('label, .prefix').addClass('active');
        $(SELS.CHIP).removeClass('selected');
      });

      self.$document.off('focusout.chips', SELS.CHIPS + ' ' + SELS.INPUT).on('focusout.chips', SELS.CHIPS + ' ' + SELS.INPUT, function(e){
        var $currChips = $(e.target).closest(SELS.CHIPS);
        $currChips.removeClass('focus');

        // Remove active if empty
        if (!$currChips.data('chips').length) {
          $currChips.siblings('label').removeClass('active');
        }
        $currChips.siblings('.prefix').removeClass('active');
      });

      self.$document.off('keydown.chips-add', SELS.CHIPS + ' ' + SELS.INPUT).on('keydown.chips-add', SELS.CHIPS + ' ' + SELS.INPUT, function(e){
        var $target = $(e.target);
        var $chips = $target.closest(SELS.CHIPS);
        var chipsLength = $chips.children(SELS.CHIP).length;

        // enter
        if (13 === e.which) {
          e.preventDefault();
          self.addChip({tag: $target.val()}, $chips);
          $target.val('');
          return;
        }

        // delete or left
         if ((8 === e.keyCode || 37 === e.keyCode) && '' === $target.val() && chipsLength) {
          self.selectChip(chipsLength - 1, $chips);
          $target.blur();
          return;
        }
      });

      // Click on delete icon in chip.
      self.$document.off('click.chips-delete', SELS.CHIPS + ' ' + SELS.DELETE).on('click.chips-delete', SELS.CHIPS + ' ' + SELS.DELETE, function(e) {
        var $target = $(e.target);
        var $chips = $target.closest(SELS.CHIPS);
        var $chip = $target.closest(SELS.CHIP);
        e.stopPropagation();
        self.deleteChip($chip.index(), $chips);
        $chips.find('input').focus();
      });
    };

    this.chips = function($chips, chipId) {
      var html = '';
      $chips.data('chips').forEach(function(elem){
        html += self.renderChip(elem);
      });
      html += '<input id="' + chipId +'" class="input" placeholder="">';
      $chips.html(html);
      self.setPlaceholder($chips);

      // Set for attribute for label
      var label = $chips.next('label');
      if (label.length) {
        label.attr('for', chipId);

        if ($chips.data('chips').length) {
          label.addClass('active');
        }
      }
    };

    this.renderChip = function(elem) {
      if (!elem.tag) return;

      var html = '<div class="chip">' + elem.tag;
      if (elem.image) {
        html += ' <img src="' + elem.image + '"> ';
      }
      html += '<i class="material-icons close">close</i>';
      html += '</div>';
      return html;
    };

    this.setPlaceholder = function($chips) {
      if ($chips.data('chips').length && curr_options.placeholder) {
        $chips.find('input').prop('placeholder', curr_options.placeholder);

      } else if (!$chips.data('chips').length && curr_options.secondaryPlaceholder) {
        $chips.find('input').prop('placeholder', curr_options.secondaryPlaceholder);
      }
    };

    this.isValid = function($chips, elem) {
      var chips = $chips.data('chips');
      var exists = false;
      for (var i=0; i < chips.length; i++) {
        if (chips[i].tag === elem.tag) {
            exists = true;
            return;
        }
      }
      return '' !== elem.tag && !exists;
    };

    this.addChip = function(elem, $chips) {
      if (!self.isValid($chips, elem)) {
        return;
      }
      var chipHtml = self.renderChip(elem);
      var newData = [];
      var oldData = $chips.data('chips');
      for (var i = 0; i < oldData.length; i++) {
        newData.push(oldData[i]);
      }
      newData.push(elem);

      $chips.data('chips', newData);
      $(chipHtml).insertBefore($chips.find('input'));
      $chips.trigger('chip.add', elem);
      self.setPlaceholder($chips);
    };

    this.deleteChip = function(chipIndex, $chips) {
      var chip = $chips.data('chips')[chipIndex];
      $chips.find('.chip').eq(chipIndex).remove();

      var newData = [];
      var oldData = $chips.data('chips');
      for (var i = 0; i < oldData.length; i++) {
        if (i !== chipIndex) {
          newData.push(oldData[i]);
        }
      }

      $chips.data('chips', newData);
      $chips.trigger('chip.delete', chip);
      self.setPlaceholder($chips);
    };

    this.selectChip = function(chipIndex, $chips) {
      var $chip = $chips.find('.chip').eq(chipIndex);
      if ($chip && false === $chip.hasClass('selected')) {
        $chip.addClass('selected');
        $chips.trigger('chip.select', $chips.data('chips')[chipIndex]);
      }
    };

    this.getChipsElement = function(index, $chips) {
      return $chips.eq(index);
    };

    // init
    this.init();

    if (!chipsHandleEvents) {
      this.handleEvents();
      chipsHandleEvents = true;
    }
  };
}( jQuery ));;(function ($) {
  $.fn.pushpin = function (options) {
    // Defaults
    var defaults = {
      top: 0,
      bottom: Infinity,
      offset: 0
    };

    // Remove pushpin event and classes
    if (options === "remove") {
      this.each(function () {
        if (id = $(this).data('pushpin-id')) {
          $(window).off('scroll.' + id);
          $(this).removeData('pushpin-id').removeClass('pin-top pinned pin-bottom').removeAttr('style');
        }
      });
      return false;
    }

    options = $.extend(defaults, options);


    $index = 0;
    return this.each(function() {
      var $uniqueId = Materialize.guid(),
          $this = $(this),
          $original_offset = $(this).offset().top;

      function removePinClasses(object) {
        object.removeClass('pin-top');
        object.removeClass('pinned');
        object.removeClass('pin-bottom');
      }

      function updateElements(objects, scrolled) {
        objects.each(function () {
          // Add position fixed (because its between top and bottom)
          if (options.top <= scrolled && options.bottom >= scrolled && !$(this).hasClass('pinned')) {
            removePinClasses($(this));
            $(this).css('top', options.offset);
            $(this).addClass('pinned');
          }

          // Add pin-top (when scrolled position is above top)
          if (scrolled < options.top && !$(this).hasClass('pin-top')) {
            removePinClasses($(this));
            $(this).css('top', 0);
            $(this).addClass('pin-top');
          }

          // Add pin-bottom (when scrolled position is below bottom)
          if (scrolled > options.bottom && !$(this).hasClass('pin-bottom')) {
            removePinClasses($(this));
            $(this).addClass('pin-bottom');
            $(this).css('top', options.bottom - $original_offset);
          }
        });
      }

      $(this).data('pushpin-id', $uniqueId);
      updateElements($this, $(window).scrollTop());
      $(window).on('scroll.' + $uniqueId, function () {
        var $scrolled = $(window).scrollTop() + options.offset;
        updateElements($this, $scrolled);
      });

    });

  };
}( jQuery ));;(function ($) {
  $(document).ready(function() {

    // jQuery reverse
    $.fn.reverse = [].reverse;

    // Hover behaviour: make sure this doesn't work on .click-to-toggle FABs!
    $(document).on('mouseenter.fixedActionBtn', '.fixed-action-btn:not(.click-to-toggle):not(.toolbar)', function(e) {
      var $this = $(this);
      openFABMenu($this);
    });
    $(document).on('mouseleave.fixedActionBtn', '.fixed-action-btn:not(.click-to-toggle):not(.toolbar)', function(e) {
      var $this = $(this);
      closeFABMenu($this);
    });

    // Toggle-on-click behaviour.
    $(document).on('click.fabClickToggle', '.fixed-action-btn.click-to-toggle > a', function(e) {
      var $this = $(this);
      var $menu = $this.parent();
      if ($menu.hasClass('active')) {
        closeFABMenu($menu);
      } else {
        openFABMenu($menu);
      }
    });

    // Toolbar transition behaviour.
    $(document).on('click.fabToolbar', '.fixed-action-btn.toolbar > a', function(e) {
      var $this = $(this);
      var $menu = $this.parent();
      FABtoToolbar($menu);
    });

  });

  $.fn.extend({
    openFAB: function() {
      openFABMenu($(this));
    },
    closeFAB: function() {
      closeFABMenu($(this));
    },
    openToolbar: function() {
      FABtoToolbar($(this));
    },
    closeToolbar: function() {
      toolbarToFAB($(this));
    }
  });


  var openFABMenu = function (btn) {
    var $this = btn;
    if ($this.hasClass('active') === false) {

      // Get direction option
      var horizontal = $this.hasClass('horizontal');
      var offsetY, offsetX;

      if (horizontal === true) {
        offsetX = 40;
      } else {
        offsetY = 40;
      }

      $this.addClass('active');
      $this.find('ul .btn-floating').velocity(
        { scaleY: ".4", scaleX: ".4", translateY: offsetY + 'px', translateX: offsetX + 'px'},
        { duration: 0 });

      var time = 0;
      $this.find('ul .btn-floating').reverse().each( function () {
        $(this).velocity(
          { opacity: "1", scaleX: "1", scaleY: "1", translateY: "0", translateX: '0'},
          { duration: 80, delay: time });
        time += 40;
      });
    }
  };

  var closeFABMenu = function (btn) {
    var $this = btn;
    // Get direction option
    var horizontal = $this.hasClass('horizontal');
    var offsetY, offsetX;

    if (horizontal === true) {
      offsetX = 40;
    } else {
      offsetY = 40;
    }

    $this.removeClass('active');
    var time = 0;
    $this.find('ul .btn-floating').velocity("stop", true);
    $this.find('ul .btn-floating').velocity(
      { opacity: "0", scaleX: ".4", scaleY: ".4", translateY: offsetY + 'px', translateX: offsetX + 'px'},
      { duration: 80 }
    );
  };


  /**
   * Transform FAB into toolbar
   * @param  {Object}  object jQuery object
   */
  var FABtoToolbar = function(btn) {
    if (btn.attr('data-open') === "true") {
      return;
    }

    var offsetX, offsetY, scaleFactor;
    var windowWidth = window.innerWidth;
    var windowHeight = window.innerHeight;
    var btnRect = btn[0].getBoundingClientRect();
    var anchor = btn.find('> a').first();
    var menu = btn.find('> ul').first();
    var backdrop = $('<div class="fab-backdrop"></div>');
    var fabColor = anchor.css('background-color');
    anchor.append(backdrop);

    offsetX = btnRect.left - (windowWidth / 2) + (btnRect.width / 2);
    offsetY = windowHeight - btnRect.bottom;
    scaleFactor = windowWidth / backdrop.width();
    btn.attr('data-origin-bottom', btnRect.bottom);
    btn.attr('data-origin-left', btnRect.left);
    btn.attr('data-origin-width', btnRect.width);

    // Set initial state
    btn.addClass('active');
    btn.attr('data-open', true);
    btn.css({
      'text-align': 'center',
      width: '100%',
      bottom: 0,
      left: 0,
      transform: 'translateX(' + offsetX + 'px)',
      transition: 'none'
    });
    anchor.css({
      transform: 'translateY(' + -offsetY + 'px)',
      transition: 'none'
    });
    backdrop.css({
      'background-color': fabColor
    });


    setTimeout(function() {
      btn.css({
        transform: '',
        transition: 'transform .2s cubic-bezier(0.550, 0.085, 0.680, 0.530), background-color 0s linear .2s'
      });
      anchor.css({
        overflow: 'visible',
        transform: '',
        transition: 'transform .2s'
      });

      setTimeout(function() {
        btn.css({
          overflow: 'hidden',
          'background-color': fabColor
        });
        backdrop.css({
          transform: 'scale(' + scaleFactor + ')',
          transition: 'transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)'
        });
        menu.find('> li > a').css({
          opacity: 1
        });

        // Scroll to close.
        $(window).on('scroll.fabToolbarClose', function() {
          toolbarToFAB(btn);
          $(window).off('scroll.fabToolbarClose');
          $(document).off('click.fabToolbarClose');
        });

        $(document).on('click.fabToolbarClose', function(e) {
          if (!$(e.target).closest(menu).length) {
            toolbarToFAB(btn);
            $(window).off('scroll.fabToolbarClose');
            $(document).off('click.fabToolbarClose');
          }
        });
      }, 100);
    }, 0);
  };

  /**
   * Transform toolbar back into FAB
   * @param  {Object}  object jQuery object
   */
  var toolbarToFAB = function(btn) {
    if (btn.attr('data-open') !== "true") {
      return;
    }

    var offsetX, offsetY, scaleFactor;
    var windowWidth = window.innerWidth;
    var windowHeight = window.innerHeight;
    var btnWidth = btn.attr('data-origin-width');
    var btnBottom = btn.attr('data-origin-bottom');
    var btnLeft = btn.attr('data-origin-left');
    var anchor = btn.find('> .btn-floating').first();
    var menu = btn.find('> ul').first();
    var backdrop = btn.find('.fab-backdrop');
    var fabColor = anchor.css('background-color');

    offsetX = btnLeft - (windowWidth / 2) + (btnWidth / 2);
    offsetY = windowHeight - btnBottom;
    scaleFactor = windowWidth / backdrop.width();


    // Hide backdrop
    btn.removeClass('active');
    btn.attr('data-open', false);
    btn.css({
      'background-color': 'transparent',
      transition: 'none'
    });
    anchor.css({
      transition: 'none'
    });
    backdrop.css({
      transform: 'scale(0)',
      'background-color': fabColor
    });
    menu.find('> li > a').css({
      opacity: ''
    });

    setTimeout(function() {
      backdrop.remove();

      // Set initial state.
      btn.css({
        'text-align': '',
        width: '',
        bottom: '',
        left: '',
        overflow: '',
        'background-color': '',
        transform: 'translate3d(' + -offsetX + 'px,0,0)'
      });
      anchor.css({
        overflow: '',
        transform: 'translate3d(0,' + offsetY + 'px,0)'
      });

      setTimeout(function() {
        btn.css({
          transform: 'translate3d(0,0,0)',
          transition: 'transform .2s'
        });
        anchor.css({
          transform: 'translate3d(0,0,0)',
          transition: 'transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)'
        });
      }, 20);
    }, 200);
  };


}( jQuery ));
;(function ($) {
  // Image transition function
  Materialize.fadeInImage =  function(selectorOrEl) {
    var element;
    if (typeof(selectorOrEl) === 'string') {
      element = $(selectorOrEl);
    } else if (typeof(selectorOrEl) === 'object') {
      element = selectorOrEl;
    } else {
      return;
    }
    element.css({opacity: 0});
    $(element).velocity({opacity: 1}, {
        duration: 650,
        queue: false,
        easing: 'easeOutSine'
      });
    $(element).velocity({opacity: 1}, {
          duration: 1300,
          queue: false,
          easing: 'swing',
          step: function(now, fx) {
              fx.start = 100;
              var grayscale_setting = now/100;
              var brightness_setting = 150 - (100 - now)/1.75;

              if (brightness_setting < 100) {
                brightness_setting = 100;
              }
              if (now >= 0) {
                $(this).css({
                    "-webkit-filter": "grayscale("+grayscale_setting+")" + "brightness("+brightness_setting+"%)",
                    "filter": "grayscale("+grayscale_setting+")" + "brightness("+brightness_setting+"%)"
                });
              }
          }
      });
  };

  // Horizontal staggered list
  Materialize.showStaggeredList = function(selectorOrEl) {
    var element;
    if (typeof(selectorOrEl) === 'string') {
      element = $(selectorOrEl);
    } else if (typeof(selectorOrEl) === 'object') {
      element = selectorOrEl;
    } else {
      return;
    }
    var time = 0;
    element.find('li').velocity(
        { translateX: "-100px"},
        { duration: 0 });

    element.find('li').each(function() {
      $(this).velocity(
        { opacity: "1", translateX: "0"},
        { duration: 800, delay: time, easing: [60, 10] });
      time += 120;
    });
  };


  $(document).ready(function() {
    // Hardcoded .staggered-list scrollFire
    // var staggeredListOptions = [];
    // $('ul.staggered-list').each(function (i) {

    //   var label = 'scrollFire-' + i;
    //   $(this).addClass(label);
    //   staggeredListOptions.push(
    //     {selector: 'ul.staggered-list.' + label,
    //      offset: 200,
    //      callback: 'showStaggeredList("ul.staggered-list.' + label + '")'});
    // });
    // scrollFire(staggeredListOptions);

    // HammerJS, Swipe navigation

    // Touch Event
    var swipeLeft = false;
    var swipeRight = false;


    // Dismissible Collections
    $('.dismissable').each(function() {
      $(this).hammer({
        prevent_default: false
      }).bind('pan', function(e) {
        if (e.gesture.pointerType === "touch") {
          var $this = $(this);
          var direction = e.gesture.direction;
          var x = e.gesture.deltaX;
          var velocityX = e.gesture.velocityX;

          $this.velocity({ translateX: x
              }, {duration: 50, queue: false, easing: 'easeOutQuad'});

          // Swipe Left
          if (direction === 4 && (x > ($this.innerWidth() / 2) || velocityX < -0.75)) {
            swipeLeft = true;
          }

          // Swipe Right
          if (direction === 2 && (x < (-1 * $this.innerWidth() / 2) || velocityX > 0.75)) {
            swipeRight = true;
          }
        }
      }).bind('panend', function(e) {
        // Reset if collection is moved back into original position
        if (Math.abs(e.gesture.deltaX) < ($(this).innerWidth() / 2)) {
          swipeRight = false;
          swipeLeft = false;
        }

        if (e.gesture.pointerType === "touch") {
          var $this = $(this);
          if (swipeLeft || swipeRight) {
            var fullWidth;
            if (swipeLeft) { fullWidth = $this.innerWidth(); }
            else { fullWidth = -1 * $this.innerWidth(); }

            $this.velocity({ translateX: fullWidth,
              }, {duration: 100, queue: false, easing: 'easeOutQuad', complete:
              function() {
                $this.css('border', 'none');
                $this.velocity({ height: 0, padding: 0,
                  }, {duration: 200, queue: false, easing: 'easeOutQuad', complete:
                    function() { $this.remove(); }
                  });
              }
            });
          }
          else {
            $this.velocity({ translateX: 0,
              }, {duration: 100, queue: false, easing: 'easeOutQuad'});
          }
          swipeLeft = false;
          swipeRight = false;
        }
      });

    });


    // time = 0
    // // Vertical Staggered list
    // $('ul.staggered-list.vertical li').velocity(
    //     { translateY: "100px"},
    //     { duration: 0 });

    // $('ul.staggered-list.vertical li').each(function() {
    //   $(this).velocity(
    //     { opacity: "1", translateY: "0"},
    //     { duration: 800, delay: time, easing: [60, 25] });
    //   time += 120;
    // });

    // // Fade in and Scale
    // $('.fade-in.scale').velocity(
    //     { scaleX: .4, scaleY: .4, translateX: -600},
    //     { duration: 0});
    // $('.fade-in').each(function() {
    //   $(this).velocity(
    //     { opacity: "1", scaleX: 1, scaleY: 1, translateX: 0},
    //     { duration: 800, easing: [60, 10] });
    // });
  });
}( jQuery ));
;(function($) {

  // Input: Array of JSON objects {selector, offset, callback}

  Materialize.scrollFire = function(options) {

    var didScroll = false;

    window.addEventListener("scroll", function() {
      didScroll = true;
    });

    // Rate limit to 100ms
    setInterval(function() {
      if(didScroll) {
          didScroll = false;

          var windowScroll = window.pageYOffset + window.innerHeight;

          for (var i = 0 ; i < options.length; i++) {
            // Get options from each line
            var value = options[i];
            var selector = value.selector,
                offset = value.offset,
                callback = value.callback;

            var currentElement = document.querySelector(selector);
            if ( currentElement !== null) {
              var elementOffset = currentElement.getBoundingClientRect().top + window.pageYOffset;

              if (windowScroll > (elementOffset + offset)) {
                if (value.done !== true) {
                  if (typeof(callback) === 'function') {
                    callback.call(this, currentElement);
                  } else if (typeof(callback) === 'string') {
                    var callbackFunc = new Function(callback);
                    callbackFunc(currentElement);
                  }
                  value.done = true;
                }
              }
            }
          }
      }
    }, 100);
  };

})(jQuery);
;/*!
 * pickadate.js v3.5.0, 2014/04/13
 * By Amsul, http://amsul.ca
 * Hosted on http://amsul.github.io/pickadate.js
 * Licensed under MIT
 */

(function ( factory ) {

    // AMD.
    if ( typeof define == 'function' && define.amd )
        define( 'picker', ['jquery'], factory )

    // Node.js/browserify.
    else if ( typeof exports == 'object' )
        module.exports = factory( require('jquery') )

    // Browser globals.
    else this.Picker = factory( jQuery )

}(function( $ ) {

var $window = $( window )
var $document = $( document )
var $html = $( document.documentElement )


/**
 * The picker constructor that creates a blank picker.
 */
function PickerConstructor( ELEMENT, NAME, COMPONENT, OPTIONS ) {

    // If there’s no element, return the picker constructor.
    if ( !ELEMENT ) return PickerConstructor


    var
        IS_DEFAULT_THEME = false,


        // The state of the picker.
        STATE = {
            id: ELEMENT.id || 'P' + Math.abs( ~~(Math.random() * new Date()) )
        },


        // Merge the defaults and options passed.
        SETTINGS = COMPONENT ? $.extend( true, {}, COMPONENT.defaults, OPTIONS ) : OPTIONS || {},


        // Merge the default classes with the settings classes.
        CLASSES = $.extend( {}, PickerConstructor.klasses(), SETTINGS.klass ),


        // The element node wrapper into a jQuery object.
        $ELEMENT = $( ELEMENT ),


        // Pseudo picker constructor.
        PickerInstance = function() {
            return this.start()
        },


        // The picker prototype.
        P = PickerInstance.prototype = {

            constructor: PickerInstance,

            $node: $ELEMENT,


            /**
             * Initialize everything
             */
            start: function() {

                // If it’s already started, do nothing.
                if ( STATE && STATE.start ) return P


                // Update the picker states.
                STATE.methods = {}
                STATE.start = true
                STATE.open = false
                STATE.type = ELEMENT.type


                // Confirm focus state, convert into text input to remove UA stylings,
                // and set as readonly to prevent keyboard popup.
                ELEMENT.autofocus = ELEMENT == getActiveElement()
                ELEMENT.readOnly = !SETTINGS.editable
                ELEMENT.id = ELEMENT.id || STATE.id
                if ( ELEMENT.type != 'text' ) {
                    ELEMENT.type = 'text'
                }


                // Create a new picker component with the settings.
                P.component = new COMPONENT(P, SETTINGS)


                // Create the picker root with a holder and then prepare it.
                P.$root = $( PickerConstructor._.node('div', createWrappedComponent(), CLASSES.picker, 'id="' + ELEMENT.id + '_root" tabindex="0"') )
                prepareElementRoot()


                // If there’s a format for the hidden input element, create the element.
                if ( SETTINGS.formatSubmit ) {
                    prepareElementHidden()
                }


                // Prepare the input element.
                prepareElement()


                // Insert the root as specified in the settings.
                if ( SETTINGS.container ) $( SETTINGS.container ).append( P.$root )
                else $ELEMENT.after( P.$root )


                // Bind the default component and settings events.
                P.on({
                    start: P.component.onStart,
                    render: P.component.onRender,
                    stop: P.component.onStop,
                    open: P.component.onOpen,
                    close: P.component.onClose,
                    set: P.component.onSet
                }).on({
                    start: SETTINGS.onStart,
                    render: SETTINGS.onRender,
                    stop: SETTINGS.onStop,
                    open: SETTINGS.onOpen,
                    close: SETTINGS.onClose,
                    set: SETTINGS.onSet
                })


                // Once we’re all set, check the theme in use.
                IS_DEFAULT_THEME = isUsingDefaultTheme( P.$root.children()[ 0 ] )


                // If the element has autofocus, open the picker.
                if ( ELEMENT.autofocus ) {
                    P.open()
                }


                // Trigger queued the “start” and “render” events.
                return P.trigger( 'start' ).trigger( 'render' )
            }, //start


            /**
             * Render a new picker
             */
            render: function( entireComponent ) {

                // Insert a new component holder in the root or box.
                if ( entireComponent ) P.$root.html( createWrappedComponent() )
                else P.$root.find( '.' + CLASSES.box ).html( P.component.nodes( STATE.open ) )

                // Trigger the queued “render” events.
                return P.trigger( 'render' )
            }, //render


            /**
             * Destroy everything
             */
            stop: function() {

                // If it’s already stopped, do nothing.
                if ( !STATE.start ) return P

                // Then close the picker.
                P.close()

                // Remove the hidden field.
                if ( P._hidden ) {
                    P._hidden.parentNode.removeChild( P._hidden )
                }

                // Remove the root.
                P.$root.remove()

                // Remove the input class, remove the stored data, and unbind
                // the events (after a tick for IE - see `P.close`).
                $ELEMENT.removeClass( CLASSES.input ).removeData( NAME )
                setTimeout( function() {
                    $ELEMENT.off( '.' + STATE.id )
                }, 0)

                // Restore the element state
                ELEMENT.type = STATE.type
                ELEMENT.readOnly = false

                // Trigger the queued “stop” events.
                P.trigger( 'stop' )

                // Reset the picker states.
                STATE.methods = {}
                STATE.start = false

                return P
            }, //stop


            /**
             * Open up the picker
             */
            open: function( dontGiveFocus ) {

                // If it’s already open, do nothing.
                if ( STATE.open ) return P

                // Add the “active” class.
                $ELEMENT.addClass( CLASSES.active )
                aria( ELEMENT, 'expanded', true )

                // * A Firefox bug, when `html` has `overflow:hidden`, results in
                //   killing transitions :(. So add the “opened” state on the next tick.
                //   Bug: https://bugzilla.mozilla.org/show_bug.cgi?id=625289
                setTimeout( function() {

                    // Add the “opened” class to the picker root.
                    P.$root.addClass( CLASSES.opened )
                    aria( P.$root[0], 'hidden', false )

                }, 0 )

                // If we have to give focus, bind the element and doc events.
                if ( dontGiveFocus !== false ) {

                    // Set it as open.
                    STATE.open = true

                    // Prevent the page from scrolling.
                    if ( IS_DEFAULT_THEME ) {
                        $html.
                            css( 'overflow', 'hidden' ).
                            css( 'padding-right', '+=' + getScrollbarWidth() )
                    }

                    // Pass focus to the root element’s jQuery object.
                    // * Workaround for iOS8 to bring the picker’s root into view.
                    P.$root.eq(0).focus()

                    // Bind the document events.
                    $document.on( 'click.' + STATE.id + ' focusin.' + STATE.id, function( event ) {

                        var target = event.target

                        // If the target of the event is not the element, close the picker picker.
                        // * Don’t worry about clicks or focusins on the root because those don’t bubble up.
                        //   Also, for Firefox, a click on an `option` element bubbles up directly
                        //   to the doc. So make sure the target wasn't the doc.
                        // * In Firefox stopPropagation() doesn’t prevent right-click events from bubbling,
                        //   which causes the picker to unexpectedly close when right-clicking it. So make
                        //   sure the event wasn’t a right-click.
                        if ( target != ELEMENT && target != document && event.which != 3 ) {

                            // If the target was the holder that covers the screen,
                            // keep the element focused to maintain tabindex.
                            P.close( target === P.$root.children()[0] )
                        }

                    }).on( 'keydown.' + STATE.id, function( event ) {

                        var
                            // Get the keycode.
                            keycode = event.keyCode,

                            // Translate that to a selection change.
                            keycodeToMove = P.component.key[ keycode ],

                            // Grab the target.
                            target = event.target


                        // On escape, close the picker and give focus.
                        if ( keycode == 27 ) {
                            P.close( true )
                        }


                        // Check if there is a key movement or “enter” keypress on the element.
                        else if ( target == P.$root[0] && ( keycodeToMove || keycode == 13 ) ) {

                            // Prevent the default action to stop page movement.
                            event.preventDefault()

                            // Trigger the key movement action.
                            if ( keycodeToMove ) {
                                PickerConstructor._.trigger( P.component.key.go, P, [ PickerConstructor._.trigger( keycodeToMove ) ] )
                            }

                            // On “enter”, if the highlighted item isn’t disabled, set the value and close.
                            else if ( !P.$root.find( '.' + CLASSES.highlighted ).hasClass( CLASSES.disabled ) ) {
                                P.set( 'select', P.component.item.highlight ).close()
                            }
                        }


                        // If the target is within the root and “enter” is pressed,
                        // prevent the default action and trigger a click on the target instead.
                        else if ( $.contains( P.$root[0], target ) && keycode == 13 ) {
                            event.preventDefault()
                            target.click()
                        }
                    })
                }

                // Trigger the queued “open” events.
                return P.trigger( 'open' )
            }, //open


            /**
             * Close the picker
             */
            close: function( giveFocus ) {

                // If we need to give focus, do it before changing states.
                if ( giveFocus ) {
                    // ....ah yes! It would’ve been incomplete without a crazy workaround for IE :|
                    // The focus is triggered *after* the close has completed - causing it
                    // to open again. So unbind and rebind the event at the next tick.
                    P.$root.off( 'focus.toOpen' ).eq(0).focus()
                    setTimeout( function() {
                        P.$root.on( 'focus.toOpen', handleFocusToOpenEvent )
                    }, 0 )
                }

                // Remove the “active” class.
                $ELEMENT.removeClass( CLASSES.active )
                aria( ELEMENT, 'expanded', false )

                // * A Firefox bug, when `html` has `overflow:hidden`, results in
                //   killing transitions :(. So remove the “opened” state on the next tick.
                //   Bug: https://bugzilla.mozilla.org/show_bug.cgi?id=625289
                setTimeout( function() {

                    // Remove the “opened” and “focused” class from the picker root.
                    P.$root.removeClass( CLASSES.opened + ' ' + CLASSES.focused )
                    aria( P.$root[0], 'hidden', true )

                }, 0 )

                // If it’s already closed, do nothing more.
                if ( !STATE.open ) return P

                // Set it as closed.
                STATE.open = false

                // Allow the page to scroll.
                if ( IS_DEFAULT_THEME ) {
                    $html.
                        css( 'overflow', '' ).
                        css( 'padding-right', '-=' + getScrollbarWidth() )
                }

                // Unbind the document events.
                $document.off( '.' + STATE.id )

                // Trigger the queued “close” events.
                return P.trigger( 'close' )
            }, //close


            /**
             * Clear the values
             */
            clear: function( options ) {
                return P.set( 'clear', null, options )
            }, //clear


            /**
             * Set something
             */
            set: function( thing, value, options ) {

                var thingItem, thingValue,
                    thingIsObject = $.isPlainObject( thing ),
                    thingObject = thingIsObject ? thing : {}

                // Make sure we have usable options.
                options = thingIsObject && $.isPlainObject( value ) ? value : options || {}

                if ( thing ) {

                    // If the thing isn’t an object, make it one.
                    if ( !thingIsObject ) {
                        thingObject[ thing ] = value
                    }

                    // Go through the things of items to set.
                    for ( thingItem in thingObject ) {

                        // Grab the value of the thing.
                        thingValue = thingObject[ thingItem ]

                        // First, if the item exists and there’s a value, set it.
                        if ( thingItem in P.component.item ) {
                            if ( thingValue === undefined ) thingValue = null
                            P.component.set( thingItem, thingValue, options )
                        }

                        // Then, check to update the element value and broadcast a change.
                        if ( thingItem == 'select' || thingItem == 'clear' ) {
                            $ELEMENT.
                                val( thingItem == 'clear' ? '' : P.get( thingItem, SETTINGS.format ) ).
                                trigger( 'change' )
                        }
                    }

                    // Render a new picker.
                    P.render()
                }

                // When the method isn’t muted, trigger queued “set” events and pass the `thingObject`.
                return options.muted ? P : P.trigger( 'set', thingObject )
            }, //set


            /**
             * Get something
             */
            get: function( thing, format ) {

                // Make sure there’s something to get.
                thing = thing || 'value'

                // If a picker state exists, return that.
                if ( STATE[ thing ] != null ) {
                    return STATE[ thing ]
                }

                // Return the submission value, if that.
                if ( thing == 'valueSubmit' ) {
                    if ( P._hidden ) {
                        return P._hidden.value
                    }
                    thing = 'value'
                }

                // Return the value, if that.
                if ( thing == 'value' ) {
                    return ELEMENT.value
                }

                // Check if a component item exists, return that.
                if ( thing in P.component.item ) {
                    if ( typeof format == 'string' ) {
                        var thingValue = P.component.get( thing )
                        return thingValue ?
                            PickerConstructor._.trigger(
                                P.component.formats.toString,
                                P.component,
                                [ format, thingValue ]
                            ) : ''
                    }
                    return P.component.get( thing )
                }
            }, //get



            /**
             * Bind events on the things.
             */
            on: function( thing, method, internal ) {

                var thingName, thingMethod,
                    thingIsObject = $.isPlainObject( thing ),
                    thingObject = thingIsObject ? thing : {}

                if ( thing ) {

                    // If the thing isn’t an object, make it one.
                    if ( !thingIsObject ) {
                        thingObject[ thing ] = method
                    }

                    // Go through the things to bind to.
                    for ( thingName in thingObject ) {

                        // Grab the method of the thing.
                        thingMethod = thingObject[ thingName ]

                        // If it was an internal binding, prefix it.
                        if ( internal ) {
                            thingName = '_' + thingName
                        }

                        // Make sure the thing methods collection exists.
                        STATE.methods[ thingName ] = STATE.methods[ thingName ] || []

                        // Add the method to the relative method collection.
                        STATE.methods[ thingName ].push( thingMethod )
                    }
                }

                return P
            }, //on



            /**
             * Unbind events on the things.
             */
            off: function() {
                var i, thingName,
                    names = arguments;
                for ( i = 0, namesCount = names.length; i < namesCount; i += 1 ) {
                    thingName = names[i]
                    if ( thingName in STATE.methods ) {
                        delete STATE.methods[thingName]
                    }
                }
                return P
            },


            /**
             * Fire off method events.
             */
            trigger: function( name, data ) {
                var _trigger = function( name ) {
                    var methodList = STATE.methods[ name ]
                    if ( methodList ) {
                        methodList.map( function( method ) {
                            PickerConstructor._.trigger( method, P, [ data ] )
                        })
                    }
                }
                _trigger( '_' + name )
                _trigger( name )
                return P
            } //trigger
        } //PickerInstance.prototype


    /**
     * Wrap the picker holder components together.
     */
    function createWrappedComponent() {

        // Create a picker wrapper holder
        return PickerConstructor._.node( 'div',

            // Create a picker wrapper node
            PickerConstructor._.node( 'div',

                // Create a picker frame
                PickerConstructor._.node( 'div',

                    // Create a picker box node
                    PickerConstructor._.node( 'div',

                        // Create the components nodes.
                        P.component.nodes( STATE.open ),

                        // The picker box class
                        CLASSES.box
                    ),

                    // Picker wrap class
                    CLASSES.wrap
                ),

                // Picker frame class
                CLASSES.frame
            ),

            // Picker holder class
            CLASSES.holder
        ) //endreturn
    } //createWrappedComponent



    /**
     * Prepare the input element with all bindings.
     */
    function prepareElement() {

        $ELEMENT.

            // Store the picker data by component name.
            data(NAME, P).

            // Add the “input” class name.
            addClass(CLASSES.input).

            // Remove the tabindex.
            attr('tabindex', -1).

            // If there’s a `data-value`, update the value of the element.
            val( $ELEMENT.data('value') ?
                P.get('select', SETTINGS.format) :
                ELEMENT.value
            )


        // Only bind keydown events if the element isn’t editable.
        if ( !SETTINGS.editable ) {

            $ELEMENT.

                // On focus/click, focus onto the root to open it up.
                on( 'focus.' + STATE.id + ' click.' + STATE.id, function( event ) {
                    event.preventDefault()
                    P.$root.eq(0).focus()
                }).

                // Handle keyboard event based on the picker being opened or not.
                on( 'keydown.' + STATE.id, handleKeydownEvent )
        }


        // Update the aria attributes.
        aria(ELEMENT, {
            haspopup: true,
            expanded: false,
            readonly: false,
            owns: ELEMENT.id + '_root'
        })
    }


    /**
     * Prepare the root picker element with all bindings.
     */
    function prepareElementRoot() {

        P.$root.

            on({

                // For iOS8.
                keydown: handleKeydownEvent,

                // When something within the root is focused, stop from bubbling
                // to the doc and remove the “focused” state from the root.
                focusin: function( event ) {
                    P.$root.removeClass( CLASSES.focused )
                    event.stopPropagation()
                },

                // When something within the root holder is clicked, stop it
                // from bubbling to the doc.
                'mousedown click': function( event ) {

                    var target = event.target

                    // Make sure the target isn’t the root holder so it can bubble up.
                    if ( target != P.$root.children()[ 0 ] ) {

                        event.stopPropagation()

                        // * For mousedown events, cancel the default action in order to
                        //   prevent cases where focus is shifted onto external elements
                        //   when using things like jQuery mobile or MagnificPopup (ref: #249 & #120).
                        //   Also, for Firefox, don’t prevent action on the `option` element.
                        if ( event.type == 'mousedown' && !$( target ).is( 'input, select, textarea, button, option' )) {

                            event.preventDefault()

                            // Re-focus onto the root so that users can click away
                            // from elements focused within the picker.
                            P.$root.eq(0).focus()
                        }
                    }
                }
            }).

            // Add/remove the “target” class on focus and blur.
            on({
                focus: function() {
                    $ELEMENT.addClass( CLASSES.target )
                },
                blur: function() {
                    $ELEMENT.removeClass( CLASSES.target )
                }
            }).

            // Open the picker and adjust the root “focused” state
            on( 'focus.toOpen', handleFocusToOpenEvent ).

            // If there’s a click on an actionable element, carry out the actions.
            on( 'click', '[data-pick], [data-nav], [data-clear], [data-close]', function() {

                var $target = $( this ),
                    targetData = $target.data(),
                    targetDisabled = $target.hasClass( CLASSES.navDisabled ) || $target.hasClass( CLASSES.disabled ),

                    // * For IE, non-focusable elements can be active elements as well
                    //   (http://stackoverflow.com/a/2684561).
                    activeElement = getActiveElement()
                    activeElement = activeElement && ( activeElement.type || activeElement.href )

                // If it’s disabled or nothing inside is actively focused, re-focus the element.
                if ( targetDisabled || activeElement && !$.contains( P.$root[0], activeElement ) ) {
                    P.$root.eq(0).focus()
                }

                // If something is superficially changed, update the `highlight` based on the `nav`.
                if ( !targetDisabled && targetData.nav ) {
                    P.set( 'highlight', P.component.item.highlight, { nav: targetData.nav } )
                }

                // If something is picked, set `select` then close with focus.
                else if ( !targetDisabled && 'pick' in targetData ) {
                    P.set( 'select', targetData.pick )
                }

                // If a “clear” button is pressed, empty the values and close with focus.
                else if ( targetData.clear ) {
                    P.clear().close( true )
                }

                else if ( targetData.close ) {
                    P.close( true )
                }

            }) //P.$root

        aria( P.$root[0], 'hidden', true )
    }


     /**
      * Prepare the hidden input element along with all bindings.
      */
    function prepareElementHidden() {

        var name

        if ( SETTINGS.hiddenName === true ) {
            name = ELEMENT.name
            ELEMENT.name = ''
        }
        else {
            name = [
                typeof SETTINGS.hiddenPrefix == 'string' ? SETTINGS.hiddenPrefix : '',
                typeof SETTINGS.hiddenSuffix == 'string' ? SETTINGS.hiddenSuffix : '_submit'
            ]
            name = name[0] + ELEMENT.name + name[1]
        }

        P._hidden = $(
            '<input ' +
            'type=hidden ' +

            // Create the name using the original input’s with a prefix and suffix.
            'name="' + name + '"' +

            // If the element has a value, set the hidden value as well.
            (
                $ELEMENT.data('value') || ELEMENT.value ?
                    ' value="' + P.get('select', SETTINGS.formatSubmit) + '"' :
                    ''
            ) +
            '>'
        )[0]

        $ELEMENT.

            // If the value changes, update the hidden input with the correct format.
            on('change.' + STATE.id, function() {
                P._hidden.value = ELEMENT.value ?
                    P.get('select', SETTINGS.formatSubmit) :
                    ''
            })


        // Insert the hidden input as specified in the settings.
        if ( SETTINGS.container ) $( SETTINGS.container ).append( P._hidden )
        else $ELEMENT.after( P._hidden )
    }


    // For iOS8.
    function handleKeydownEvent( event ) {

        var keycode = event.keyCode,

            // Check if one of the delete keys was pressed.
            isKeycodeDelete = /^(8|46)$/.test(keycode)

        // For some reason IE clears the input value on “escape”.
        if ( keycode == 27 ) {
            P.close()
            return false
        }

        // Check if `space` or `delete` was pressed or the picker is closed with a key movement.
        if ( keycode == 32 || isKeycodeDelete || !STATE.open && P.component.key[keycode] ) {

            // Prevent it from moving the page and bubbling to doc.
            event.preventDefault()
            event.stopPropagation()

            // If `delete` was pressed, clear the values and close the picker.
            // Otherwise open the picker.
            if ( isKeycodeDelete ) { P.clear().close() }
            else { P.open() }
        }
    }


    // Separated for IE
    function handleFocusToOpenEvent( event ) {

        // Stop the event from propagating to the doc.
        event.stopPropagation()

        // If it’s a focus event, add the “focused” class to the root.
        if ( event.type == 'focus' ) {
            P.$root.addClass( CLASSES.focused )
        }

        // And then finally open the picker.
        P.open()
    }


    // Return a new picker instance.
    return new PickerInstance()
} //PickerConstructor



/**
 * The default classes and prefix to use for the HTML classes.
 */
PickerConstructor.klasses = function( prefix ) {
    prefix = prefix || 'picker'
    return {

        picker: prefix,
        opened: prefix + '--opened',
        focused: prefix + '--focused',

        input: prefix + '__input',
        active: prefix + '__input--active',
        target: prefix + '__input--target',

        holder: prefix + '__holder',

        frame: prefix + '__frame',
        wrap: prefix + '__wrap',

        box: prefix + '__box'
    }
} //PickerConstructor.klasses



/**
 * Check if the default theme is being used.
 */
function isUsingDefaultTheme( element ) {

    var theme,
        prop = 'position'

    // For IE.
    if ( element.currentStyle ) {
        theme = element.currentStyle[prop]
    }

    // For normal browsers.
    else if ( window.getComputedStyle ) {
        theme = getComputedStyle( element )[prop]
    }

    return theme == 'fixed'
}



/**
 * Get the width of the browser’s scrollbar.
 * Taken from: https://github.com/VodkaBears/Remodal/blob/master/src/jquery.remodal.js
 */
function getScrollbarWidth() {

    if ( $html.height() <= $window.height() ) {
        return 0
    }

    var $outer = $( '<div style="visibility:hidden;width:100px" />' ).
        appendTo( 'body' )

    // Get the width without scrollbars.
    var widthWithoutScroll = $outer[0].offsetWidth

    // Force adding scrollbars.
    $outer.css( 'overflow', 'scroll' )

    // Add the inner div.
    var $inner = $( '<div style="width:100%" />' ).appendTo( $outer )

    // Get the width with scrollbars.
    var widthWithScroll = $inner[0].offsetWidth

    // Remove the divs.
    $outer.remove()

    // Return the difference between the widths.
    return widthWithoutScroll - widthWithScroll
}



/**
 * PickerConstructor helper methods.
 */
PickerConstructor._ = {

    /**
     * Create a group of nodes. Expects:
     * `
        {
            min:    {Integer},
            max:    {Integer},
            i:      {Integer},
            node:   {String},
            item:   {Function}
        }
     * `
     */
    group: function( groupObject ) {

        var
            // Scope for the looped object
            loopObjectScope,

            // Create the nodes list
            nodesList = '',

            // The counter starts from the `min`
            counter = PickerConstructor._.trigger( groupObject.min, groupObject )


        // Loop from the `min` to `max`, incrementing by `i`
        for ( ; counter <= PickerConstructor._.trigger( groupObject.max, groupObject, [ counter ] ); counter += groupObject.i ) {

            // Trigger the `item` function within scope of the object
            loopObjectScope = PickerConstructor._.trigger( groupObject.item, groupObject, [ counter ] )

            // Splice the subgroup and create nodes out of the sub nodes
            nodesList += PickerConstructor._.node(
                groupObject.node,
                loopObjectScope[ 0 ],   // the node
                loopObjectScope[ 1 ],   // the classes
                loopObjectScope[ 2 ]    // the attributes
            )
        }

        // Return the list of nodes
        return nodesList
    }, //group


    /**
     * Create a dom node string
     */
    node: function( wrapper, item, klass, attribute ) {

        // If the item is false-y, just return an empty string
        if ( !item ) return ''

        // If the item is an array, do a join
        item = $.isArray( item ) ? item.join( '' ) : item

        // Check for the class
        klass = klass ? ' class="' + klass + '"' : ''

        // Check for any attributes
        attribute = attribute ? ' ' + attribute : ''

        // Return the wrapped item
        return '<' + wrapper + klass + attribute + '>' + item + '</' + wrapper + '>'
    }, //node


    /**
     * Lead numbers below 10 with a zero.
     */
    lead: function( number ) {
        return ( number < 10 ? '0': '' ) + number
    },


    /**
     * Trigger a function otherwise return the value.
     */
    trigger: function( callback, scope, args ) {
        return typeof callback == 'function' ? callback.apply( scope, args || [] ) : callback
    },


    /**
     * If the second character is a digit, length is 2 otherwise 1.
     */
    digits: function( string ) {
        return ( /\d/ ).test( string[ 1 ] ) ? 2 : 1
    },


    /**
     * Tell if something is a date object.
     */
    isDate: function( value ) {
        return {}.toString.call( value ).indexOf( 'Date' ) > -1 && this.isInteger( value.getDate() )
    },


    /**
     * Tell if something is an integer.
     */
    isInteger: function( value ) {
        return {}.toString.call( value ).indexOf( 'Number' ) > -1 && value % 1 === 0
    },


    /**
     * Create ARIA attribute strings.
     */
    ariaAttr: ariaAttr
} //PickerConstructor._



/**
 * Extend the picker with a component and defaults.
 */
PickerConstructor.extend = function( name, Component ) {

    // Extend jQuery.
    $.fn[ name ] = function( options, action ) {

        // Grab the component data.
        var componentData = this.data( name )

        // If the picker is requested, return the data object.
        if ( options == 'picker' ) {
            return componentData
        }

        // If the component data exists and `options` is a string, carry out the action.
        if ( componentData && typeof options == 'string' ) {
            return PickerConstructor._.trigger( componentData[ options ], componentData, [ action ] )
        }

        // Otherwise go through each matched element and if the component
        // doesn’t exist, create a new picker using `this` element
        // and merging the defaults and options with a deep copy.
        return this.each( function() {
            var $this = $( this )
            if ( !$this.data( name ) ) {
                new PickerConstructor( this, name, Component, options )
            }
        })
    }

    // Set the defaults.
    $.fn[ name ].defaults = Component.defaults
} //PickerConstructor.extend



function aria(element, attribute, value) {
    if ( $.isPlainObject(attribute) ) {
        for ( var key in attribute ) {
            ariaSet(element, key, attribute[key])
        }
    }
    else {
        ariaSet(element, attribute, value)
    }
}
function ariaSet(element, attribute, value) {
    element.setAttribute(
        (attribute == 'role' ? '' : 'aria-') + attribute,
        value
    )
}
function ariaAttr(attribute, data) {
    if ( !$.isPlainObject(attribute) ) {
        attribute = { attribute: data }
    }
    data = ''
    for ( var key in attribute ) {
        var attr = (key == 'role' ? '' : 'aria-') + key,
            attrVal = attribute[key]
        data += attrVal == null ? '' : attr + '="' + attribute[key] + '"'
    }
    return data
}

// IE8 bug throws an error for activeElements within iframes.
function getActiveElement() {
    try {
        return document.activeElement
    } catch ( err ) { }
}



// Expose the picker constructor.
return PickerConstructor


}));


;/*!
 * Date picker for pickadate.js v3.5.0
 * http://amsul.github.io/pickadate.js/date.htm
 */

(function ( factory ) {

    // AMD.
    if ( typeof define == 'function' && define.amd )
        define( ['picker', 'jquery'], factory )

    // Node.js/browserify.
    else if ( typeof exports == 'object' )
        module.exports = factory( require('./picker.js'), require('jquery') )

    // Browser globals.
    else factory( Picker, jQuery )

}(function( Picker, $ ) {


/**
 * Globals and constants
 */
var DAYS_IN_WEEK = 7,
    WEEKS_IN_CALENDAR = 6,
    _ = Picker._



/**
 * The date picker constructor
 */
function DatePicker( picker, settings ) {

    var calendar = this,
        element = picker.$node[ 0 ],
        elementValue = element.value,
        elementDataValue = picker.$node.data( 'value' ),
        valueString = elementDataValue || elementValue,
        formatString = elementDataValue ? settings.formatSubmit : settings.format,
        isRTL = function() {

            return element.currentStyle ?

                // For IE.
                element.currentStyle.direction == 'rtl' :

                // For normal browsers.
                getComputedStyle( picker.$root[0] ).direction == 'rtl'
        }

    calendar.settings = settings
    calendar.$node = picker.$node

    // The queue of methods that will be used to build item objects.
    calendar.queue = {
        min: 'measure create',
        max: 'measure create',
        now: 'now create',
        select: 'parse create validate',
        highlight: 'parse navigate create validate',
        view: 'parse create validate viewset',
        disable: 'deactivate',
        enable: 'activate'
    }

    // The component's item object.
    calendar.item = {}

    calendar.item.clear = null
    calendar.item.disable = ( settings.disable || [] ).slice( 0 )
    calendar.item.enable = -(function( collectionDisabled ) {
        return collectionDisabled[ 0 ] === true ? collectionDisabled.shift() : -1
    })( calendar.item.disable )

    calendar.
        set( 'min', settings.min ).
        set( 'max', settings.max ).
        set( 'now' )

    // When there’s a value, set the `select`, which in turn
    // also sets the `highlight` and `view`.
    if ( valueString ) {
        calendar.set( 'select', valueString, { format: formatString })
    }

    // If there’s no value, default to highlighting “today”.
    else {
        calendar.
            set( 'select', null ).
            set( 'highlight', calendar.item.now )
    }


    // The keycode to movement mapping.
    calendar.key = {
        40: 7, // Down
        38: -7, // Up
        39: function() { return isRTL() ? -1 : 1 }, // Right
        37: function() { return isRTL() ? 1 : -1 }, // Left
        go: function( timeChange ) {
            var highlightedObject = calendar.item.highlight,
                targetDate = new Date( highlightedObject.year, highlightedObject.month, highlightedObject.date + timeChange )
            calendar.set(
                'highlight',
                targetDate,
                { interval: timeChange }
            )
            this.render()
        }
    }


    // Bind some picker events.
    picker.
        on( 'render', function() {
            picker.$root.find( '.' + settings.klass.selectMonth ).on( 'change', function() {
                var value = this.value
                if ( value ) {
                    picker.set( 'highlight', [ picker.get( 'view' ).year, value, picker.get( 'highlight' ).date ] )
                    picker.$root.find( '.' + settings.klass.selectMonth ).trigger( 'focus' )
                }
            })
            picker.$root.find( '.' + settings.klass.selectYear ).on( 'change', function() {
                var value = this.value
                if ( value ) {
                    picker.set( 'highlight', [ value, picker.get( 'view' ).month, picker.get( 'highlight' ).date ] )
                    picker.$root.find( '.' + settings.klass.selectYear ).trigger( 'focus' )
                }
            })
        }, 1 ).
        on( 'open', function() {
            var includeToday = ''
            if ( calendar.disabled( calendar.get('now') ) ) {
                includeToday = ':not(.' + settings.klass.buttonToday + ')'
            }
            picker.$root.find( 'button' + includeToday + ', select' ).attr( 'disabled', false )
        }, 1 ).
        on( 'close', function() {
            picker.$root.find( 'button, select' ).attr( 'disabled', true )
        }, 1 )

} //DatePicker


/**
 * Set a datepicker item object.
 */
DatePicker.prototype.set = function( type, value, options ) {

    var calendar = this,
        calendarItem = calendar.item

    // If the value is `null` just set it immediately.
    if ( value === null ) {
        if ( type == 'clear' ) type = 'select'
        calendarItem[ type ] = value
        return calendar
    }

    // Otherwise go through the queue of methods, and invoke the functions.
    // Update this as the time unit, and set the final value as this item.
    // * In the case of `enable`, keep the queue but set `disable` instead.
    //   And in the case of `flip`, keep the queue but set `enable` instead.
    calendarItem[ ( type == 'enable' ? 'disable' : type == 'flip' ? 'enable' : type ) ] = calendar.queue[ type ].split( ' ' ).map( function( method ) {
        value = calendar[ method ]( type, value, options )
        return value
    }).pop()

    // Check if we need to cascade through more updates.
    if ( type == 'select' ) {
        calendar.set( 'highlight', calendarItem.select, options )
    }
    else if ( type == 'highlight' ) {
        calendar.set( 'view', calendarItem.highlight, options )
    }
    else if ( type.match( /^(flip|min|max|disable|enable)$/ ) ) {
        if ( calendarItem.select && calendar.disabled( calendarItem.select ) ) {
            calendar.set( 'select', calendarItem.select, options )
        }
        if ( calendarItem.highlight && calendar.disabled( calendarItem.highlight ) ) {
            calendar.set( 'highlight', calendarItem.highlight, options )
        }
    }

    return calendar
} //DatePicker.prototype.set


/**
 * Get a datepicker item object.
 */
DatePicker.prototype.get = function( type ) {
    return this.item[ type ]
} //DatePicker.prototype.get


/**
 * Create a picker date object.
 */
DatePicker.prototype.create = function( type, value, options ) {

    var isInfiniteValue,
        calendar = this

    // If there’s no value, use the type as the value.
    value = value === undefined ? type : value


    // If it’s infinity, update the value.
    if ( value == -Infinity || value == Infinity ) {
        isInfiniteValue = value
    }

    // If it’s an object, use the native date object.
    else if ( $.isPlainObject( value ) && _.isInteger( value.pick ) ) {
        value = value.obj
    }

    // If it’s an array, convert it into a date and make sure
    // that it’s a valid date – otherwise default to today.
    else if ( $.isArray( value ) ) {
        value = new Date( value[ 0 ], value[ 1 ], value[ 2 ] )
        value = _.isDate( value ) ? value : calendar.create().obj
    }

    // If it’s a number or date object, make a normalized date.
    else if ( _.isInteger( value ) || _.isDate( value ) ) {
        value = calendar.normalize( new Date( value ), options )
    }

    // If it’s a literal true or any other case, set it to now.
    else /*if ( value === true )*/ {
        value = calendar.now( type, value, options )
    }

    // Return the compiled object.
    return {
        year: isInfiniteValue || value.getFullYear(),
        month: isInfiniteValue || value.getMonth(),
        date: isInfiniteValue || value.getDate(),
        day: isInfiniteValue || value.getDay(),
        obj: isInfiniteValue || value,
        pick: isInfiniteValue || value.getTime()
    }
} //DatePicker.prototype.create


/**
 * Create a range limit object using an array, date object,
 * literal “true”, or integer relative to another time.
 */
DatePicker.prototype.createRange = function( from, to ) {

    var calendar = this,
        createDate = function( date ) {
            if ( date === true || $.isArray( date ) || _.isDate( date ) ) {
                return calendar.create( date )
            }
            return date
        }

    // Create objects if possible.
    if ( !_.isInteger( from ) ) {
        from = createDate( from )
    }
    if ( !_.isInteger( to ) ) {
        to = createDate( to )
    }

    // Create relative dates.
    if ( _.isInteger( from ) && $.isPlainObject( to ) ) {
        from = [ to.year, to.month, to.date + from ];
    }
    else if ( _.isInteger( to ) && $.isPlainObject( from ) ) {
        to = [ from.year, from.month, from.date + to ];
    }

    return {
        from: createDate( from ),
        to: createDate( to )
    }
} //DatePicker.prototype.createRange


/**
 * Check if a date unit falls within a date range object.
 */
DatePicker.prototype.withinRange = function( range, dateUnit ) {
    range = this.createRange(range.from, range.to)
    return dateUnit.pick >= range.from.pick && dateUnit.pick <= range.to.pick
}


/**
 * Check if two date range objects overlap.
 */
DatePicker.prototype.overlapRanges = function( one, two ) {

    var calendar = this

    // Convert the ranges into comparable dates.
    one = calendar.createRange( one.from, one.to )
    two = calendar.createRange( two.from, two.to )

    return calendar.withinRange( one, two.from ) || calendar.withinRange( one, two.to ) ||
        calendar.withinRange( two, one.from ) || calendar.withinRange( two, one.to )
}


/**
 * Get the date today.
 */
DatePicker.prototype.now = function( type, value, options ) {
    value = new Date()
    if ( options && options.rel ) {
        value.setDate( value.getDate() + options.rel )
    }
    return this.normalize( value, options )
}


/**
 * Navigate to next/prev month.
 */
DatePicker.prototype.navigate = function( type, value, options ) {

    var targetDateObject,
        targetYear,
        targetMonth,
        targetDate,
        isTargetArray = $.isArray( value ),
        isTargetObject = $.isPlainObject( value ),
        viewsetObject = this.item.view/*,
        safety = 100*/


    if ( isTargetArray || isTargetObject ) {

        if ( isTargetObject ) {
            targetYear = value.year
            targetMonth = value.month
            targetDate = value.date
        }
        else {
            targetYear = +value[0]
            targetMonth = +value[1]
            targetDate = +value[2]
        }

        // If we’re navigating months but the view is in a different
        // month, navigate to the view’s year and month.
        if ( options && options.nav && viewsetObject && viewsetObject.month !== targetMonth ) {
            targetYear = viewsetObject.year
            targetMonth = viewsetObject.month
        }

        // Figure out the expected target year and month.
        targetDateObject = new Date( targetYear, targetMonth + ( options && options.nav ? options.nav : 0 ), 1 )
        targetYear = targetDateObject.getFullYear()
        targetMonth = targetDateObject.getMonth()

        // If the month we’re going to doesn’t have enough days,
        // keep decreasing the date until we reach the month’s last date.
        while ( /*safety &&*/ new Date( targetYear, targetMonth, targetDate ).getMonth() !== targetMonth ) {
            targetDate -= 1
            /*safety -= 1
            if ( !safety ) {
                throw 'Fell into an infinite loop while navigating to ' + new Date( targetYear, targetMonth, targetDate ) + '.'
            }*/
        }

        value = [ targetYear, targetMonth, targetDate ]
    }

    return value
} //DatePicker.prototype.navigate


/**
 * Normalize a date by setting the hours to midnight.
 */
DatePicker.prototype.normalize = function( value/*, options*/ ) {
    value.setHours( 0, 0, 0, 0 )
    return value
}


/**
 * Measure the range of dates.
 */
DatePicker.prototype.measure = function( type, value/*, options*/ ) {

    var calendar = this

    // If it’s anything false-y, remove the limits.
    if ( !value ) {
        value = type == 'min' ? -Infinity : Infinity
    }

    // If it’s a string, parse it.
    else if ( typeof value == 'string' ) {
        value = calendar.parse( type, value )
    }

    // If it's an integer, get a date relative to today.
    else if ( _.isInteger( value ) ) {
        value = calendar.now( type, value, { rel: value } )
    }

    return value
} ///DatePicker.prototype.measure


/**
 * Create a viewset object based on navigation.
 */
DatePicker.prototype.viewset = function( type, dateObject/*, options*/ ) {
    return this.create([ dateObject.year, dateObject.month, 1 ])
}


/**
 * Validate a date as enabled and shift if needed.
 */
DatePicker.prototype.validate = function( type, dateObject, options ) {

    var calendar = this,

        // Keep a reference to the original date.
        originalDateObject = dateObject,

        // Make sure we have an interval.
        interval = options && options.interval ? options.interval : 1,

        // Check if the calendar enabled dates are inverted.
        isFlippedBase = calendar.item.enable === -1,

        // Check if we have any enabled dates after/before now.
        hasEnabledBeforeTarget, hasEnabledAfterTarget,

        // The min & max limits.
        minLimitObject = calendar.item.min,
        maxLimitObject = calendar.item.max,

        // Check if we’ve reached the limit during shifting.
        reachedMin, reachedMax,

        // Check if the calendar is inverted and at least one weekday is enabled.
        hasEnabledWeekdays = isFlippedBase && calendar.item.disable.filter( function( value ) {

            // If there’s a date, check where it is relative to the target.
            if ( $.isArray( value ) ) {
                var dateTime = calendar.create( value ).pick
                if ( dateTime < dateObject.pick ) hasEnabledBeforeTarget = true
                else if ( dateTime > dateObject.pick ) hasEnabledAfterTarget = true
            }

            // Return only integers for enabled weekdays.
            return _.isInteger( value )
        }).length/*,

        safety = 100*/



    // Cases to validate for:
    // [1] Not inverted and date disabled.
    // [2] Inverted and some dates enabled.
    // [3] Not inverted and out of range.
    //
    // Cases to **not** validate for:
    // • Navigating months.
    // • Not inverted and date enabled.
    // • Inverted and all dates disabled.
    // • ..and anything else.
    if ( !options || !options.nav ) if (
        /* 1 */ ( !isFlippedBase && calendar.disabled( dateObject ) ) ||
        /* 2 */ ( isFlippedBase && calendar.disabled( dateObject ) && ( hasEnabledWeekdays || hasEnabledBeforeTarget || hasEnabledAfterTarget ) ) ||
        /* 3 */ ( !isFlippedBase && (dateObject.pick <= minLimitObject.pick || dateObject.pick >= maxLimitObject.pick) )
    ) {


        // When inverted, flip the direction if there aren’t any enabled weekdays
        // and there are no enabled dates in the direction of the interval.
        if ( isFlippedBase && !hasEnabledWeekdays && ( ( !hasEnabledAfterTarget && interval > 0 ) || ( !hasEnabledBeforeTarget && interval < 0 ) ) ) {
            interval *= -1
        }


        // Keep looping until we reach an enabled date.
        while ( /*safety &&*/ calendar.disabled( dateObject ) ) {

            /*safety -= 1
            if ( !safety ) {
                throw 'Fell into an infinite loop while validating ' + dateObject.obj + '.'
            }*/


            // If we’ve looped into the next/prev month with a large interval, return to the original date and flatten the interval.
            if ( Math.abs( interval ) > 1 && ( dateObject.month < originalDateObject.month || dateObject.month > originalDateObject.month ) ) {
                dateObject = originalDateObject
                interval = interval > 0 ? 1 : -1
            }


            // If we’ve reached the min/max limit, reverse the direction, flatten the interval and set it to the limit.
            if ( dateObject.pick <= minLimitObject.pick ) {
                reachedMin = true
                interval = 1
                dateObject = calendar.create([
                    minLimitObject.year,
                    minLimitObject.month,
                    minLimitObject.date + (dateObject.pick === minLimitObject.pick ? 0 : -1)
                ])
            }
            else if ( dateObject.pick >= maxLimitObject.pick ) {
                reachedMax = true
                interval = -1
                dateObject = calendar.create([
                    maxLimitObject.year,
                    maxLimitObject.month,
                    maxLimitObject.date + (dateObject.pick === maxLimitObject.pick ? 0 : 1)
                ])
            }


            // If we’ve reached both limits, just break out of the loop.
            if ( reachedMin && reachedMax ) {
                break
            }


            // Finally, create the shifted date using the interval and keep looping.
            dateObject = calendar.create([ dateObject.year, dateObject.month, dateObject.date + interval ])
        }

    } //endif


    // Return the date object settled on.
    return dateObject
} //DatePicker.prototype.validate


/**
 * Check if a date is disabled.
 */
DatePicker.prototype.disabled = function( dateToVerify ) {

    var
        calendar = this,

        // Filter through the disabled dates to check if this is one.
        isDisabledMatch = calendar.item.disable.filter( function( dateToDisable ) {

            // If the date is a number, match the weekday with 0index and `firstDay` check.
            if ( _.isInteger( dateToDisable ) ) {
                return dateToVerify.day === ( calendar.settings.firstDay ? dateToDisable : dateToDisable - 1 ) % 7
            }

            // If it’s an array or a native JS date, create and match the exact date.
            if ( $.isArray( dateToDisable ) || _.isDate( dateToDisable ) ) {
                return dateToVerify.pick === calendar.create( dateToDisable ).pick
            }

            // If it’s an object, match a date within the “from” and “to” range.
            if ( $.isPlainObject( dateToDisable ) ) {
                return calendar.withinRange( dateToDisable, dateToVerify )
            }
        })

    // If this date matches a disabled date, confirm it’s not inverted.
    isDisabledMatch = isDisabledMatch.length && !isDisabledMatch.filter(function( dateToDisable ) {
        return $.isArray( dateToDisable ) && dateToDisable[3] == 'inverted' ||
            $.isPlainObject( dateToDisable ) && dateToDisable.inverted
    }).length

    // Check the calendar “enabled” flag and respectively flip the
    // disabled state. Then also check if it’s beyond the min/max limits.
    return calendar.item.enable === -1 ? !isDisabledMatch : isDisabledMatch ||
        dateToVerify.pick < calendar.item.min.pick ||
        dateToVerify.pick > calendar.item.max.pick

} //DatePicker.prototype.disabled


/**
 * Parse a string into a usable type.
 */
DatePicker.prototype.parse = function( type, value, options ) {

    var calendar = this,
        parsingObject = {}

    // If it’s already parsed, we’re good.
    if ( !value || typeof value != 'string' ) {
        return value
    }

    // We need a `.format` to parse the value with.
    if ( !( options && options.format ) ) {
        options = options || {}
        options.format = calendar.settings.format
    }

    // Convert the format into an array and then map through it.
    calendar.formats.toArray( options.format ).map( function( label ) {

        var
            // Grab the formatting label.
            formattingLabel = calendar.formats[ label ],

            // The format length is from the formatting label function or the
            // label length without the escaping exclamation (!) mark.
            formatLength = formattingLabel ? _.trigger( formattingLabel, calendar, [ value, parsingObject ] ) : label.replace( /^!/, '' ).length

        // If there's a format label, split the value up to the format length.
        // Then add it to the parsing object with appropriate label.
        if ( formattingLabel ) {
            parsingObject[ label ] = value.substr( 0, formatLength )
        }

        // Update the value as the substring from format length to end.
        value = value.substr( formatLength )
    })

    // Compensate for month 0index.
    return [
        parsingObject.yyyy || parsingObject.yy,
        +( parsingObject.mm || parsingObject.m ) - 1,
        parsingObject.dd || parsingObject.d
    ]
} //DatePicker.prototype.parse


/**
 * Various formats to display the object in.
 */
DatePicker.prototype.formats = (function() {

    // Return the length of the first word in a collection.
    function getWordLengthFromCollection( string, collection, dateObject ) {

        // Grab the first word from the string.
        var word = string.match( /\w+/ )[ 0 ]

        // If there's no month index, add it to the date object
        if ( !dateObject.mm && !dateObject.m ) {
            dateObject.m = collection.indexOf( word ) + 1
        }

        // Return the length of the word.
        return word.length
    }

    // Get the length of the first word in a string.
    function getFirstWordLength( string ) {
        return string.match( /\w+/ )[ 0 ].length
    }

    return {

        d: function( string, dateObject ) {

            // If there's string, then get the digits length.
            // Otherwise return the selected date.
            return string ? _.digits( string ) : dateObject.date
        },
        dd: function( string, dateObject ) {

            // If there's a string, then the length is always 2.
            // Otherwise return the selected date with a leading zero.
            return string ? 2 : _.lead( dateObject.date )
        },
        ddd: function( string, dateObject ) {

            // If there's a string, then get the length of the first word.
            // Otherwise return the short selected weekday.
            return string ? getFirstWordLength( string ) : this.settings.weekdaysShort[ dateObject.day ]
        },
        dddd: function( string, dateObject ) {

            // If there's a string, then get the length of the first word.
            // Otherwise return the full selected weekday.
            return string ? getFirstWordLength( string ) : this.settings.weekdaysFull[ dateObject.day ]
        },
        m: function( string, dateObject ) {

            // If there's a string, then get the length of the digits
            // Otherwise return the selected month with 0index compensation.
            return string ? _.digits( string ) : dateObject.month + 1
        },
        mm: function( string, dateObject ) {

            // If there's a string, then the length is always 2.
            // Otherwise return the selected month with 0index and leading zero.
            return string ? 2 : _.lead( dateObject.month + 1 )
        },
        mmm: function( string, dateObject ) {

            var collection = this.settings.monthsShort

            // If there's a string, get length of the relevant month from the short
            // months collection. Otherwise return the selected month from that collection.
            return string ? getWordLengthFromCollection( string, collection, dateObject ) : collection[ dateObject.month ]
        },
        mmmm: function( string, dateObject ) {

            var collection = this.settings.monthsFull

            // If there's a string, get length of the relevant month from the full
            // months collection. Otherwise return the selected month from that collection.
            return string ? getWordLengthFromCollection( string, collection, dateObject ) : collection[ dateObject.month ]
        },
        yy: function( string, dateObject ) {

            // If there's a string, then the length is always 2.
            // Otherwise return the selected year by slicing out the first 2 digits.
            return string ? 2 : ( '' + dateObject.year ).slice( 2 )
        },
        yyyy: function( string, dateObject ) {

            // If there's a string, then the length is always 4.
            // Otherwise return the selected year.
            return string ? 4 : dateObject.year
        },

        // Create an array by splitting the formatting string passed.
        toArray: function( formatString ) { return formatString.split( /(d{1,4}|m{1,4}|y{4}|yy|!.)/g ) },

        // Format an object into a string using the formatting options.
        toString: function ( formatString, itemObject ) {
            var calendar = this
            return calendar.formats.toArray( formatString ).map( function( label ) {
                return _.trigger( calendar.formats[ label ], calendar, [ 0, itemObject ] ) || label.replace( /^!/, '' )
            }).join( '' )
        }
    }
})() //DatePicker.prototype.formats




/**
 * Check if two date units are the exact.
 */
DatePicker.prototype.isDateExact = function( one, two ) {

    var calendar = this

    // When we’re working with weekdays, do a direct comparison.
    if (
        ( _.isInteger( one ) && _.isInteger( two ) ) ||
        ( typeof one == 'boolean' && typeof two == 'boolean' )
     ) {
        return one === two
    }

    // When we’re working with date representations, compare the “pick” value.
    if (
        ( _.isDate( one ) || $.isArray( one ) ) &&
        ( _.isDate( two ) || $.isArray( two ) )
    ) {
        return calendar.create( one ).pick === calendar.create( two ).pick
    }

    // When we’re working with range objects, compare the “from” and “to”.
    if ( $.isPlainObject( one ) && $.isPlainObject( two ) ) {
        return calendar.isDateExact( one.from, two.from ) && calendar.isDateExact( one.to, two.to )
    }

    return false
}


/**
 * Check if two date units overlap.
 */
DatePicker.prototype.isDateOverlap = function( one, two ) {

    var calendar = this,
        firstDay = calendar.settings.firstDay ? 1 : 0

    // When we’re working with a weekday index, compare the days.
    if ( _.isInteger( one ) && ( _.isDate( two ) || $.isArray( two ) ) ) {
        one = one % 7 + firstDay
        return one === calendar.create( two ).day + 1
    }
    if ( _.isInteger( two ) && ( _.isDate( one ) || $.isArray( one ) ) ) {
        two = two % 7 + firstDay
        return two === calendar.create( one ).day + 1
    }

    // When we’re working with range objects, check if the ranges overlap.
    if ( $.isPlainObject( one ) && $.isPlainObject( two ) ) {
        return calendar.overlapRanges( one, two )
    }

    return false
}


/**
 * Flip the “enabled” state.
 */
DatePicker.prototype.flipEnable = function(val) {
    var itemObject = this.item
    itemObject.enable = val || (itemObject.enable == -1 ? 1 : -1)
}


/**
 * Mark a collection of dates as “disabled”.
 */
DatePicker.prototype.deactivate = function( type, datesToDisable ) {

    var calendar = this,
        disabledItems = calendar.item.disable.slice(0)


    // If we’re flipping, that’s all we need to do.
    if ( datesToDisable == 'flip' ) {
        calendar.flipEnable()
    }

    else if ( datesToDisable === false ) {
        calendar.flipEnable(1)
        disabledItems = []
    }

    else if ( datesToDisable === true ) {
        calendar.flipEnable(-1)
        disabledItems = []
    }

    // Otherwise go through the dates to disable.
    else {

        datesToDisable.map(function( unitToDisable ) {

            var matchFound

            // When we have disabled items, check for matches.
            // If something is matched, immediately break out.
            for ( var index = 0; index < disabledItems.length; index += 1 ) {
                if ( calendar.isDateExact( unitToDisable, disabledItems[index] ) ) {
                    matchFound = true
                    break
                }
            }

            // If nothing was found, add the validated unit to the collection.
            if ( !matchFound ) {
                if (
                    _.isInteger( unitToDisable ) ||
                    _.isDate( unitToDisable ) ||
                    $.isArray( unitToDisable ) ||
                    ( $.isPlainObject( unitToDisable ) && unitToDisable.from && unitToDisable.to )
                ) {
                    disabledItems.push( unitToDisable )
                }
            }
        })
    }

    // Return the updated collection.
    return disabledItems
} //DatePicker.prototype.deactivate


/**
 * Mark a collection of dates as “enabled”.
 */
DatePicker.prototype.activate = function( type, datesToEnable ) {

    var calendar = this,
        disabledItems = calendar.item.disable,
        disabledItemsCount = disabledItems.length

    // If we’re flipping, that’s all we need to do.
    if ( datesToEnable == 'flip' ) {
        calendar.flipEnable()
    }

    else if ( datesToEnable === true ) {
        calendar.flipEnable(1)
        disabledItems = []
    }

    else if ( datesToEnable === false ) {
        calendar.flipEnable(-1)
        disabledItems = []
    }

    // Otherwise go through the disabled dates.
    else {

        datesToEnable.map(function( unitToEnable ) {

            var matchFound,
                disabledUnit,
                index,
                isExactRange

            // Go through the disabled items and try to find a match.
            for ( index = 0; index < disabledItemsCount; index += 1 ) {

                disabledUnit = disabledItems[index]

                // When an exact match is found, remove it from the collection.
                if ( calendar.isDateExact( disabledUnit, unitToEnable ) ) {
                    matchFound = disabledItems[index] = null
                    isExactRange = true
                    break
                }

                // When an overlapped match is found, add the “inverted” state to it.
                else if ( calendar.isDateOverlap( disabledUnit, unitToEnable ) ) {
                    if ( $.isPlainObject( unitToEnable ) ) {
                        unitToEnable.inverted = true
                        matchFound = unitToEnable
                    }
                    else if ( $.isArray( unitToEnable ) ) {
                        matchFound = unitToEnable
                        if ( !matchFound[3] ) matchFound.push( 'inverted' )
                    }
                    else if ( _.isDate( unitToEnable ) ) {
                        matchFound = [ unitToEnable.getFullYear(), unitToEnable.getMonth(), unitToEnable.getDate(), 'inverted' ]
                    }
                    break
                }
            }

            // If a match was found, remove a previous duplicate entry.
            if ( matchFound ) for ( index = 0; index < disabledItemsCount; index += 1 ) {
                if ( calendar.isDateExact( disabledItems[index], unitToEnable ) ) {
                    disabledItems[index] = null
                    break
                }
            }

            // In the event that we’re dealing with an exact range of dates,
            // make sure there are no “inverted” dates because of it.
            if ( isExactRange ) for ( index = 0; index < disabledItemsCount; index += 1 ) {
                if ( calendar.isDateOverlap( disabledItems[index], unitToEnable ) ) {
                    disabledItems[index] = null
                    break
                }
            }

            // If something is still matched, add it into the collection.
            if ( matchFound ) {
                disabledItems.push( matchFound )
            }
        })
    }

    // Return the updated collection.
    return disabledItems.filter(function( val ) { return val != null })
} //DatePicker.prototype.activate


/**
 * Create a string for the nodes in the picker.
 */
DatePicker.prototype.nodes = function( isOpen ) {

    var
        calendar = this,
        settings = calendar.settings,
        calendarItem = calendar.item,
        nowObject = calendarItem.now,
        selectedObject = calendarItem.select,
        highlightedObject = calendarItem.highlight,
        viewsetObject = calendarItem.view,
        disabledCollection = calendarItem.disable,
        minLimitObject = calendarItem.min,
        maxLimitObject = calendarItem.max,


        // Create the calendar table head using a copy of weekday labels collection.
        // * We do a copy so we don't mutate the original array.
        tableHead = (function( collection, fullCollection ) {

            // If the first day should be Monday, move Sunday to the end.
            if ( settings.firstDay ) {
                collection.push( collection.shift() )
                fullCollection.push( fullCollection.shift() )
            }

            // Create and return the table head group.
            return _.node(
                'thead',
                _.node(
                    'tr',
                    _.group({
                        min: 0,
                        max: DAYS_IN_WEEK - 1,
                        i: 1,
                        node: 'th',
                        item: function( counter ) {
                            return [
                                collection[ counter ],
                                settings.klass.weekdays,
                                'scope=col title="' + fullCollection[ counter ] + '"'
                            ]
                        }
                    })
                )
            ) //endreturn

        // Materialize modified
        })( ( settings.showWeekdaysFull ? settings.weekdaysFull : settings.weekdaysLetter ).slice( 0 ), settings.weekdaysFull.slice( 0 ) ), //tableHead


        // Create the nav for next/prev month.
        createMonthNav = function( next ) {

            // Otherwise, return the created month tag.
            return _.node(
                'div',
                ' ',
                settings.klass[ 'nav' + ( next ? 'Next' : 'Prev' ) ] + (

                    // If the focused month is outside the range, disabled the button.
                    ( next && viewsetObject.year >= maxLimitObject.year && viewsetObject.month >= maxLimitObject.month ) ||
                    ( !next && viewsetObject.year <= minLimitObject.year && viewsetObject.month <= minLimitObject.month ) ?
                    ' ' + settings.klass.navDisabled : ''
                ),
                'data-nav=' + ( next || -1 ) + ' ' +
                _.ariaAttr({
                    role: 'button',
                    controls: calendar.$node[0].id + '_table'
                }) + ' ' +
                'title="' + (next ? settings.labelMonthNext : settings.labelMonthPrev ) + '"'
            ) //endreturn
        }, //createMonthNav


        // Create the month label.
        //Materialize modified
        createMonthLabel = function(override) {

            var monthsCollection = settings.showMonthsShort ? settings.monthsShort : settings.monthsFull

             // Materialize modified
            if (override == "short_months") {
              monthsCollection = settings.monthsShort;
            }

            // If there are months to select, add a dropdown menu.
            if ( settings.selectMonths  && override == undefined) {

                return _.node( 'select',
                    _.group({
                        min: 0,
                        max: 11,
                        i: 1,
                        node: 'option',
                        item: function( loopedMonth ) {

                            return [

                                // The looped month and no classes.
                                monthsCollection[ loopedMonth ], 0,

                                // Set the value and selected index.
                                'value=' + loopedMonth +
                                ( viewsetObject.month == loopedMonth ? ' selected' : '' ) +
                                (
                                    (
                                        ( viewsetObject.year == minLimitObject.year && loopedMonth < minLimitObject.month ) ||
                                        ( viewsetObject.year == maxLimitObject.year && loopedMonth > maxLimitObject.month )
                                    ) ?
                                    ' disabled' : ''
                                )
                            ]
                        }
                    }),
                    settings.klass.selectMonth + ' browser-default',
                    ( isOpen ? '' : 'disabled' ) + ' ' +
                    _.ariaAttr({ controls: calendar.$node[0].id + '_table' }) + ' ' +
                    'title="' + settings.labelMonthSelect + '"'
                )
            }

            // Materialize modified
            if (override == "short_months")
                if (selectedObject != null)
                return _.node( 'div', monthsCollection[ selectedObject.month ] );
                else return _.node( 'div', monthsCollection[ viewsetObject.month ] );

            // If there's a need for a month selector
            return _.node( 'div', monthsCollection[ viewsetObject.month ], settings.klass.month )
        }, //createMonthLabel


        // Create the year label.
        // Materialize modified
        createYearLabel = function(override) {

            var focusedYear = viewsetObject.year,

            // If years selector is set to a literal "true", set it to 5. Otherwise
            // divide in half to get half before and half after focused year.
            numberYears = settings.selectYears === true ? 5 : ~~( settings.selectYears / 2 )

            // If there are years to select, add a dropdown menu.
            if ( numberYears ) {

                var
                    minYear = minLimitObject.year,
                    maxYear = maxLimitObject.year,
                    lowestYear = focusedYear - numberYears,
                    highestYear = focusedYear + numberYears

                // If the min year is greater than the lowest year, increase the highest year
                // by the difference and set the lowest year to the min year.
                if ( minYear > lowestYear ) {
                    highestYear += minYear - lowestYear
                    lowestYear = minYear
                }

                // If the max year is less than the highest year, decrease the lowest year
                // by the lower of the two: available and needed years. Then set the
                // highest year to the max year.
                if ( maxYear < highestYear ) {

                    var availableYears = lowestYear - minYear,
                        neededYears = highestYear - maxYear

                    lowestYear -= availableYears > neededYears ? neededYears : availableYears
                    highestYear = maxYear
                }

                if ( settings.selectYears  && override == undefined ) {
                    return _.node( 'select',
                        _.group({
                            min: lowestYear,
                            max: highestYear,
                            i: 1,
                            node: 'option',
                            item: function( loopedYear ) {
                                return [

                                    // The looped year and no classes.
                                    loopedYear, 0,

                                    // Set the value and selected index.
                                    'value=' + loopedYear + ( focusedYear == loopedYear ? ' selected' : '' )
                                ]
                            }
                        }),
                        settings.klass.selectYear + ' browser-default',
                        ( isOpen ? '' : 'disabled' ) + ' ' + _.ariaAttr({ controls: calendar.$node[0].id + '_table' }) + ' ' +
                        'title="' + settings.labelYearSelect + '"'
                    )
                }
            }

            // Materialize modified
            if (override == "raw")
                return _.node( 'div', focusedYear )

            // Otherwise just return the year focused
            return _.node( 'div', focusedYear, settings.klass.year )
        } //createYearLabel


        // Materialize modified
        createDayLabel = function() {
                if (selectedObject != null)
                    return _.node( 'div', selectedObject.date)
                else return _.node( 'div', nowObject.date)
            }
        createWeekdayLabel = function() {
            var display_day;

            if (selectedObject != null)
                display_day = selectedObject.day;
            else
                display_day = nowObject.day;
            var weekday = settings.weekdaysFull[ display_day ]
            return weekday
        }


    // Create and return the entire calendar.
return _.node(
        // Date presentation View
        'div',
            _.node(
                'div',
                createWeekdayLabel(),
                "picker__weekday-display"
            )+
            _.node(
                // Div for short Month
                'div',
                createMonthLabel("short_months"),
                settings.klass.month_display
            )+
            _.node(
                // Div for Day
                'div',
                createDayLabel() ,
                settings.klass.day_display
            )+
            _.node(
                // Div for Year
                'div',
                createYearLabel("raw") ,
                settings.klass.year_display
            ),
        settings.klass.date_display
    )+
    // Calendar container
    _.node('div',
        _.node('div',
        ( settings.selectYears ?  createMonthLabel() + createYearLabel() : createMonthLabel() + createYearLabel() ) +
        createMonthNav() + createMonthNav( 1 ),
        settings.klass.header
    ) + _.node(
        'table',
        tableHead +
        _.node(
            'tbody',
            _.group({
                min: 0,
                max: WEEKS_IN_CALENDAR - 1,
                i: 1,
                node: 'tr',
                item: function( rowCounter ) {

                    // If Monday is the first day and the month starts on Sunday, shift the date back a week.
                    var shiftDateBy = settings.firstDay && calendar.create([ viewsetObject.year, viewsetObject.month, 1 ]).day === 0 ? -7 : 0

                    return [
                        _.group({
                            min: DAYS_IN_WEEK * rowCounter - viewsetObject.day + shiftDateBy + 1, // Add 1 for weekday 0index
                            max: function() {
                                return this.min + DAYS_IN_WEEK - 1
                            },
                            i: 1,
                            node: 'td',
                            item: function( targetDate ) {

                                // Convert the time date from a relative date to a target date.
                                targetDate = calendar.create([ viewsetObject.year, viewsetObject.month, targetDate + ( settings.firstDay ? 1 : 0 ) ])

                                var isSelected = selectedObject && selectedObject.pick == targetDate.pick,
                                    isHighlighted = highlightedObject && highlightedObject.pick == targetDate.pick,
                                    isDisabled = disabledCollection && calendar.disabled( targetDate ) || targetDate.pick < minLimitObject.pick || targetDate.pick > maxLimitObject.pick,
                                    formattedDate = _.trigger( calendar.formats.toString, calendar, [ settings.format, targetDate ] )

                                return [
                                    _.node(
                                        'div',
                                        targetDate.date,
                                        (function( klasses ) {

                                            // Add the `infocus` or `outfocus` classes based on month in view.
                                            klasses.push( viewsetObject.month == targetDate.month ? settings.klass.infocus : settings.klass.outfocus )

                                            // Add the `today` class if needed.
                                            if ( nowObject.pick == targetDate.pick ) {
                                                klasses.push( settings.klass.now )
                                            }

                                            // Add the `selected` class if something's selected and the time matches.
                                            if ( isSelected ) {
                                                klasses.push( settings.klass.selected )
                                            }

                                            // Add the `highlighted` class if something's highlighted and the time matches.
                                            if ( isHighlighted ) {
                                                klasses.push( settings.klass.highlighted )
                                            }

                                            // Add the `disabled` class if something's disabled and the object matches.
                                            if ( isDisabled ) {
                                                klasses.push( settings.klass.disabled )
                                            }

                                            return klasses.join( ' ' )
                                        })([ settings.klass.day ]),
                                        'data-pick=' + targetDate.pick + ' ' + _.ariaAttr({
                                            role: 'gridcell',
                                            label: formattedDate,
                                            selected: isSelected && calendar.$node.val() === formattedDate ? true : null,
                                            activedescendant: isHighlighted ? true : null,
                                            disabled: isDisabled ? true : null
                                        })
                                    ),
                                    '',
                                    _.ariaAttr({ role: 'presentation' })
                                ] //endreturn
                            }
                        })
                    ] //endreturn
                }
            })
        ),
        settings.klass.table,
        'id="' + calendar.$node[0].id + '_table' + '" ' + _.ariaAttr({
            role: 'grid',
            controls: calendar.$node[0].id,
            readonly: true
        })
    )
    , settings.klass.calendar_container) // end calendar

     +

    // * For Firefox forms to submit, make sure to set the buttons’ `type` attributes as “button”.
    _.node(
        'div',
        _.node( 'button', settings.today, "btn-flat picker__today",
            'type=button data-pick=' + nowObject.pick +
            ( isOpen && !calendar.disabled(nowObject) ? '' : ' disabled' ) + ' ' +
            _.ariaAttr({ controls: calendar.$node[0].id }) ) +
        _.node( 'button', settings.clear, "btn-flat picker__clear",
            'type=button data-clear=1' +
            ( isOpen ? '' : ' disabled' ) + ' ' +
            _.ariaAttr({ controls: calendar.$node[0].id }) ) +
        _.node('button', settings.close, "btn-flat picker__close",
            'type=button data-close=true ' +
            ( isOpen ? '' : ' disabled' ) + ' ' +
            _.ariaAttr({ controls: calendar.$node[0].id }) ),
        settings.klass.footer
    ) //endreturn
} //DatePicker.prototype.nodes




/**
 * The date picker defaults.
 */
DatePicker.defaults = (function( prefix ) {

    return {

        // The title label to use for the month nav buttons
        labelMonthNext: 'Next month',
        labelMonthPrev: 'Previous month',

        // The title label to use for the dropdown selectors
        labelMonthSelect: 'Select a month',
        labelYearSelect: 'Select a year',

        // Months and weekdays
        monthsFull: [ 'January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December' ],
        monthsShort: [ 'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec' ],
        weekdaysFull: [ 'Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday' ],
        weekdaysShort: [ 'Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat' ],

        // Materialize modified
        weekdaysLetter: [ 'S', 'M', 'T', 'W', 'T', 'F', 'S' ],

        // Today and clear
        today: 'Today',
        clear: 'Clear',
        close: 'Close',

        // The format to show on the `input` element
        format: 'd mmmm, yyyy',

        // Classes
        klass: {

            table: prefix + 'table',

            header: prefix + 'header',


            // Materialize Added klasses
            date_display: prefix + 'date-display',
            day_display: prefix + 'day-display',
            month_display: prefix + 'month-display',
            year_display: prefix + 'year-display',
            calendar_container: prefix + 'calendar-container',
            // end



            navPrev: prefix + 'nav--prev',
            navNext: prefix + 'nav--next',
            navDisabled: prefix + 'nav--disabled',

            month: prefix + 'month',
            year: prefix + 'year',

            selectMonth: prefix + 'select--month',
            selectYear: prefix + 'select--year',

            weekdays: prefix + 'weekday',

            day: prefix + 'day',
            disabled: prefix + 'day--disabled',
            selected: prefix + 'day--selected',
            highlighted: prefix + 'day--highlighted',
            now: prefix + 'day--today',
            infocus: prefix + 'day--infocus',
            outfocus: prefix + 'day--outfocus',

            footer: prefix + 'footer',

            buttonClear: prefix + 'button--clear',
            buttonToday: prefix + 'button--today',
            buttonClose: prefix + 'button--close'
        }
    }
})( Picker.klasses().picker + '__' )





/**
 * Extend the picker to add the date picker.
 */
Picker.extend( 'pickadate', DatePicker )


}));


;(function ($) {

  $.fn.characterCounter = function(){
    return this.each(function(){
      var $input = $(this);
      var $counterElement = $input.parent().find('span[class="character-counter"]');

      // character counter has already been added appended to the parent container
      if ($counterElement.length) {
        return;
      }

      var itHasLengthAttribute = $input.attr('length') !== undefined;

      if(itHasLengthAttribute){
        $input.on('input', updateCounter);
        $input.on('focus', updateCounter);
        $input.on('blur', removeCounterElement);

        addCounterElement($input);
      }

    });
  };

  function updateCounter(){
    var maxLength     = +$(this).attr('length'),
    actualLength      = +$(this).val().length,
    isValidLength     = actualLength <= maxLength;

    $(this).parent().find('span[class="character-counter"]')
                    .html( actualLength + '/' + maxLength);

    addInputStyle(isValidLength, $(this));
  }

  function addCounterElement($input) {
    var $counterElement = $input.parent().find('span[class="character-counter"]');

    if ($counterElement.length) {
      return;
    }

    $counterElement = $('<span/>')
                        .addClass('character-counter')
                        .css('float','right')
                        .css('font-size','12px')
                        .css('height', 1);

    $input.parent().append($counterElement);
  }

  function removeCounterElement(){
    $(this).parent().find('span[class="character-counter"]').html('');
  }

  function addInputStyle(isValidLength, $input){
    var inputHasInvalidClass = $input.hasClass('invalid');
    if (isValidLength && inputHasInvalidClass) {
      $input.removeClass('invalid');
    }
    else if(!isValidLength && !inputHasInvalidClass){
      $input.removeClass('valid');
      $input.addClass('invalid');
    }
  }

  $(document).ready(function(){
    $('input, textarea').characterCounter();
  });

}( jQuery ));
;(function ($) {

  var methods = {

    init : function(options) {
      var defaults = {
        time_constant: 200, // ms
        dist: -100, // zoom scale TODO: make this more intuitive as an option
        shift: 0, // spacing for center image
        padding: 0, // Padding between non center items
        full_width: false, // Change to full width styles
        indicators: false, // Toggle indicators
        no_wrap: false // Don't wrap around and cycle through items.
      };
      options = $.extend(defaults, options);

      return this.each(function() {

        var images, offset, center, pressed, dim, count,
            reference, referenceY, amplitude, target, velocity,
            xform, frame, timestamp, ticker, dragged, vertical_dragged;
        var $indicators = $('<ul class="indicators"></ul>');


        // Initialize
        var view = $(this);
        var showIndicators = view.attr('data-indicators') || options.indicators;

        // Don't double initialize.
        if (view.hasClass('initialized')) {
          // Redraw carousel.
          $(this).trigger('carouselNext', [0.000001]);
          return true;
        }


        // Options
        if (options.full_width) {
          options.dist = 0;
          var firstImage = view.find('.carousel-item img').first();
          if (firstImage.length) {
            imageHeight = firstImage.on('load', function(){
              view.css('height', $(this).height());
            });
          } else {
            imageHeight = view.find('.carousel-item').first().height();
            view.css('height', imageHeight);
          }

          // Offset fixed items when indicators.
          if (showIndicators) {
            view.find('.carousel-fixed-item').addClass('with-indicators');
          }
        }


        view.addClass('initialized');
        pressed = false;
        offset = target = 0;
        images = [];
        item_width = view.find('.carousel-item').first().innerWidth();
        dim = item_width * 2 + options.padding;

        view.find('.carousel-item').each(function (i) {
          images.push($(this)[0]);
          if (showIndicators) {
            var $indicator = $('<li class="indicator-item"></li>');

            // Add active to first by default.
            if (i === 0) {
              $indicator.addClass('active');
            }

            // Handle clicks on indicators.
            $indicator.click(function () {
              var index = $(this).index();
              cycleTo(index);
            });
            $indicators.append($indicator);
          }
        });

        if (showIndicators) {
          view.append($indicators);
        }
        count = images.length;


        function setupEvents() {
          if (typeof window.ontouchstart !== 'undefined') {
            view[0].addEventListener('touchstart', tap);
            view[0].addEventListener('touchmove', drag);
            view[0].addEventListener('touchend', release);
          }
          view[0].addEventListener('mousedown', tap);
          view[0].addEventListener('mousemove', drag);
          view[0].addEventListener('mouseup', release);
          view[0].addEventListener('mouseleave', release);
          view[0].addEventListener('click', click);
        }

        function xpos(e) {
          // touch event
          if (e.targetTouches && (e.targetTouches.length >= 1)) {
            return e.targetTouches[0].clientX;
          }

          // mouse event
          return e.clientX;
        }

        function ypos(e) {
          // touch event
          if (e.targetTouches && (e.targetTouches.length >= 1)) {
            return e.targetTouches[0].clientY;
          }

          // mouse event
          return e.clientY;
        }

        function wrap(x) {
          return (x >= count) ? (x % count) : (x < 0) ? wrap(count + (x % count)) : x;
        }

        function scroll(x) {
          var i, half, delta, dir, tween, el, alignment, xTranslation;

          offset = (typeof x === 'number') ? x : offset;
          center = Math.floor((offset + dim / 2) / dim);
          delta = offset - center * dim;
          dir = (delta < 0) ? 1 : -1;
          tween = -dir * delta * 2 / dim;
          half = count >> 1;

          if (!options.full_width) {
            alignment = 'translateX(' + (view[0].clientWidth - item_width) / 2 + 'px) ';
            alignment += 'translateY(' + (view[0].clientHeight - item_width) / 2 + 'px)';
          } else {
            alignment = 'translateX(0)';
          }

          // Set indicator active
          if (showIndicators) {
            var diff = (center % count);
            var activeIndicator = $indicators.find('.indicator-item.active');
            if (activeIndicator.index() !== diff) {
              activeIndicator.removeClass('active');
              $indicators.find('.indicator-item').eq(diff).addClass('active');
            }
          }

          // center
          // Don't show wrapped items.
          if (!options.no_wrap || (center >= 0 && center < count)) {
            el = images[wrap(center)];
            el.style[xform] = alignment +
              ' translateX(' + (-delta / 2) + 'px)' +
              ' translateX(' + (dir * options.shift * tween * i) + 'px)' +
              ' translateZ(' + (options.dist * tween) + 'px)';
            el.style.zIndex = 0;
            if (options.full_width) { tweenedOpacity = 1; }
            else { tweenedOpacity = 1 - 0.2 * tween; }
            el.style.opacity = tweenedOpacity;
            el.style.display = 'block';
          }

          for (i = 1; i <= half; ++i) {
            // right side
            if (options.full_width) {
              zTranslation = options.dist;
              tweenedOpacity = (i === half && delta < 0) ? 1 - tween : 1;
            } else {
              zTranslation = options.dist * (i * 2 + tween * dir);
              tweenedOpacity = 1 - 0.2 * (i * 2 + tween * dir);
            }
            // Don't show wrapped items.
            if (!options.no_wrap || center + i < count) {
              el = images[wrap(center + i)];
              el.style[xform] = alignment +
                ' translateX(' + (options.shift + (dim * i - delta) / 2) + 'px)' +
                ' translateZ(' + zTranslation + 'px)';
              el.style.zIndex = -i;
              el.style.opacity = tweenedOpacity;
              el.style.display = 'block';
            }


            // left side
            if (options.full_width) {
              zTranslation = options.dist;
              tweenedOpacity = (i === half && delta > 0) ? 1 - tween : 1;
            } else {
              zTranslation = options.dist * (i * 2 - tween * dir);
              tweenedOpacity = 1 - 0.2 * (i * 2 - tween * dir);
            }
            // Don't show wrapped items.
            if (!options.no_wrap || center - i >= 0) {
              el = images[wrap(center - i)];
              el.style[xform] = alignment +
                ' translateX(' + (-options.shift + (-dim * i - delta) / 2) + 'px)' +
                ' translateZ(' + zTranslation + 'px)';
              el.style.zIndex = -i;
              el.style.opacity = tweenedOpacity;
              el.style.display = 'block';
            }
          }

          // center
          // Don't show wrapped items.
          if (!options.no_wrap || (center >= 0 && center < count)) {
            el = images[wrap(center)];
            el.style[xform] = alignment +
              ' translateX(' + (-delta / 2) + 'px)' +
              ' translateX(' + (dir * options.shift * tween) + 'px)' +
              ' translateZ(' + (options.dist * tween) + 'px)';
            el.style.zIndex = 0;
            if (options.full_width) { tweenedOpacity = 1; }
            else { tweenedOpacity = 1 - 0.2 * tween; }
            el.style.opacity = tweenedOpacity;
            el.style.display = 'block';
          }
        }

        function track() {
          var now, elapsed, delta, v;

          now = Date.now();
          elapsed = now - timestamp;
          timestamp = now;
          delta = offset - frame;
          frame = offset;

          v = 1000 * delta / (1 + elapsed);
          velocity = 0.8 * v + 0.2 * velocity;
        }

        function autoScroll() {
          var elapsed, delta;

          if (amplitude) {
            elapsed = Date.now() - timestamp;
            delta = amplitude * Math.exp(-elapsed / options.time_constant);
            if (delta > 2 || delta < -2) {
                scroll(target - delta);
                requestAnimationFrame(autoScroll);
            } else {
                scroll(target);
            }
          }
        }

        function click(e) {
          // Disable clicks if carousel was dragged.
          if (dragged) {
            e.preventDefault();
            e.stopPropagation();
            return false;

          } else if (!options.full_width) {
            var clickedIndex = $(e.target).closest('.carousel-item').index();
            var diff = (center % count) - clickedIndex;

            // Disable clicks if carousel was shifted by click
            if (diff !== 0) {
              e.preventDefault();
              e.stopPropagation();
            }
            cycleTo(clickedIndex);
          }
        }

        function cycleTo(n) {
          var diff = (center % count) - n;

          // Account for wraparound.
          if (!options.no_wrap) {
            if (diff < 0) {
              if (Math.abs(diff + count) < Math.abs(diff)) { diff += count; }

            } else if (diff > 0) {
              if (Math.abs(diff - count) < diff) { diff -= count; }
            }
          }

          // Call prev or next accordingly.
          if (diff < 0) {
            view.trigger('carouselNext', [Math.abs(diff)]);

          } else if (diff > 0) {
            view.trigger('carouselPrev', [diff]);
          }
        }

        function tap(e) {
          pressed = true;
          dragged = false;
          vertical_dragged = false;
          reference = xpos(e);
          referenceY = ypos(e);

          velocity = amplitude = 0;
          frame = offset;
          timestamp = Date.now();
          clearInterval(ticker);
          ticker = setInterval(track, 100);

        }

        function drag(e) {
          var x, delta, deltaY;
          if (pressed) {
            x = xpos(e);
            y = ypos(e);
            delta = reference - x;
            deltaY = Math.abs(referenceY - y);
            if (deltaY < 30 && !vertical_dragged) {
              // If vertical scrolling don't allow dragging.
              if (delta > 2 || delta < -2) {
                dragged = true;
                reference = x;
                scroll(offset + delta);
              }

            } else if (dragged) {
              // If dragging don't allow vertical scroll.
              e.preventDefault();
              e.stopPropagation();
              return false;

            } else {
              // Vertical scrolling.
              vertical_dragged = true;
            }
          }

          if (dragged) {
            // If dragging don't allow vertical scroll.
            e.preventDefault();
            e.stopPropagation();
            return false;
          }
        }

        function release(e) {
          if (pressed) {
            pressed = false;
          } else {
            return;
          }

          clearInterval(ticker);
          target = offset;
          if (velocity > 10 || velocity < -10) {
            amplitude = 0.9 * velocity;
            target = offset + amplitude;
          }
          target = Math.round(target / dim) * dim;

          // No wrap of items.
          if (options.no_wrap) {
            if (target >= dim * (count - 1)) {
              target = dim * (count - 1);
            } else if (target < 0) {
              target = 0;
            }
          }
          amplitude = target - offset;
          timestamp = Date.now();
          requestAnimationFrame(autoScroll);

          if (dragged) {
            e.preventDefault();
            e.stopPropagation();
          }
          return false;
        }

        xform = 'transform';
        ['webkit', 'Moz', 'O', 'ms'].every(function (prefix) {
          var e = prefix + 'Transform';
          if (typeof document.body.style[e] !== 'undefined') {
            xform = e;
            return false;
          }
          return true;
        });



        window.onresize = scroll;

        setupEvents();
        scroll(offset);

        $(this).on('carouselNext', function(e, n) {
          if (n === undefined) {
            n = 1;
          }
          target = offset + dim * n;
          if (offset !== target) {
            amplitude = target - offset;
            timestamp = Date.now();
            requestAnimationFrame(autoScroll);
          }
        });

        $(this).on('carouselPrev', function(e, n) {
          if (n === undefined) {
            n = 1;
          }
          target = offset - dim * n;
          if (offset !== target) {
            amplitude = target - offset;
            timestamp = Date.now();
            requestAnimationFrame(autoScroll);
          }
        });

        $(this).on('carouselSet', function(e, n) {
          if (n === undefined) {
            n = 0;
          }
          cycleTo(n);
        });

      });



    },
    next : function(n) {
      $(this).trigger('carouselNext', [n]);
    },
    prev : function(n) {
      $(this).trigger('carouselPrev', [n]);
    },
    set : function(n) {
      $(this).trigger('carouselSet', [n]);
    }
  };


    $.fn.carousel = function(methodOrOptions) {
      if ( methods[methodOrOptions] ) {
        return methods[ methodOrOptions ].apply( this, Array.prototype.slice.call( arguments, 1 ));
      } else if ( typeof methodOrOptions === 'object' || ! methodOrOptions ) {
        // Default to "init"
        return methods.init.apply( this, arguments );
      } else {
        $.error( 'Method ' +  methodOrOptions + ' does not exist on jQuery.carousel' );
      }
    }; // Plugin end
}( jQuery ));
/*!
 * Materialize v0.97.8 (http://materializecss.com)
 * Copyright 2014-2015 Materialize
 * MIT License (https://raw.githubusercontent.com/Dogfalo/materialize/master/LICENSE)
 */
if("undefined"==typeof jQuery){var jQuery;jQuery="function"==typeof require?$=require("jquery"):$}jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(a,b,c,d,e){return jQuery.easing[jQuery.easing.def](a,b,c,d,e)},easeInQuad:function(a,b,c,d,e){return d*(b/=e)*b+c},easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c},easeInOutQuad:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b+c:-d/2*(--b*(b-2)-1)+c},easeInCubic:function(a,b,c,d,e){return d*(b/=e)*b*b+c},easeOutCubic:function(a,b,c,d,e){return d*((b=b/e-1)*b*b+1)+c},easeInOutCubic:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b+c:d/2*((b-=2)*b*b+2)+c},easeInQuart:function(a,b,c,d,e){return d*(b/=e)*b*b*b+c},easeOutQuart:function(a,b,c,d,e){return-d*((b=b/e-1)*b*b*b-1)+c},easeInOutQuart:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b+c:-d/2*((b-=2)*b*b*b-2)+c},easeInQuint:function(a,b,c,d,e){return d*(b/=e)*b*b*b*b+c},easeOutQuint:function(a,b,c,d,e){return d*((b=b/e-1)*b*b*b*b+1)+c},easeInOutQuint:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b*b+c:d/2*((b-=2)*b*b*b*b+2)+c},easeInSine:function(a,b,c,d,e){return-d*Math.cos(b/e*(Math.PI/2))+d+c},easeOutSine:function(a,b,c,d,e){return d*Math.sin(b/e*(Math.PI/2))+c},easeInOutSine:function(a,b,c,d,e){return-d/2*(Math.cos(Math.PI*b/e)-1)+c},easeInExpo:function(a,b,c,d,e){return 0==b?c:d*Math.pow(2,10*(b/e-1))+c},easeOutExpo:function(a,b,c,d,e){return b==e?c+d:d*(-Math.pow(2,-10*b/e)+1)+c},easeInOutExpo:function(a,b,c,d,e){return 0==b?c:b==e?c+d:(b/=e/2)<1?d/2*Math.pow(2,10*(b-1))+c:d/2*(-Math.pow(2,-10*--b)+2)+c},easeInCirc:function(a,b,c,d,e){return-d*(Math.sqrt(1-(b/=e)*b)-1)+c},easeOutCirc:function(a,b,c,d,e){return d*Math.sqrt(1-(b=b/e-1)*b)+c},easeInOutCirc:function(a,b,c,d,e){return(b/=e/2)<1?-d/2*(Math.sqrt(1-b*b)-1)+c:d/2*(Math.sqrt(1-(b-=2)*b)+1)+c},easeInElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(0==b)return c;if(1==(b/=e))return c+d;if(g||(g=.3*e),h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return-(h*Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*(2*Math.PI)/g))+c},easeOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(0==b)return c;if(1==(b/=e))return c+d;if(g||(g=.3*e),h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return h*Math.pow(2,-10*b)*Math.sin((b*e-f)*(2*Math.PI)/g)+d+c},easeInOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(0==b)return c;if(2==(b/=e/2))return c+d;if(g||(g=e*(.3*1.5)),h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return 1>b?-.5*(h*Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*(2*Math.PI)/g))+c:h*Math.pow(2,-10*(b-=1))*Math.sin((b*e-f)*(2*Math.PI)/g)*.5+d+c},easeInBack:function(a,b,c,d,e,f){return void 0==f&&(f=1.70158),d*(b/=e)*b*((f+1)*b-f)+c},easeOutBack:function(a,b,c,d,e,f){return void 0==f&&(f=1.70158),d*((b=b/e-1)*b*((f+1)*b+f)+1)+c},easeInOutBack:function(a,b,c,d,e,f){return void 0==f&&(f=1.70158),(b/=e/2)<1?d/2*(b*b*(((f*=1.525)+1)*b-f))+c:d/2*((b-=2)*b*(((f*=1.525)+1)*b+f)+2)+c},easeInBounce:function(a,b,c,d,e){return d-jQuery.easing.easeOutBounce(a,e-b,0,d,e)+c},easeOutBounce:function(a,b,c,d,e){return(b/=e)<1/2.75?d*(7.5625*b*b)+c:2/2.75>b?d*(7.5625*(b-=1.5/2.75)*b+.75)+c:2.5/2.75>b?d*(7.5625*(b-=2.25/2.75)*b+.9375)+c:d*(7.5625*(b-=2.625/2.75)*b+.984375)+c},easeInOutBounce:function(a,b,c,d,e){return e/2>b?.5*jQuery.easing.easeInBounce(a,2*b,0,d,e)+c:.5*jQuery.easing.easeOutBounce(a,2*b-e,0,d,e)+.5*d+c}}),jQuery.extend(jQuery.easing,{easeInOutMaterial:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b+c:d/4*((b-=2)*b*b+2)+c}}),jQuery.Velocity?console.log("Velocity is already loaded. You may be needlessly importing Velocity again; note that Materialize includes Velocity."):(!function(a){function b(a){var b=a.length,d=c.type(a);return"function"===d||c.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===d||0===b||"number"==typeof b&&b>0&&b-1 in a}if(!a.jQuery){var c=function(a,b){return new c.fn.init(a,b)};c.isWindow=function(a){return null!=a&&a==a.window},c.type=function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?e[g.call(a)]||"object":typeof a},c.isArray=Array.isArray||function(a){return"array"===c.type(a)},c.isPlainObject=function(a){var b;if(!a||"object"!==c.type(a)||a.nodeType||c.isWindow(a))return!1;try{if(a.constructor&&!f.call(a,"constructor")&&!f.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(d){return!1}for(b in a);return void 0===b||f.call(a,b)},c.each=function(a,c,d){var e,f=0,g=a.length,h=b(a);if(d){if(h)for(;g>f&&(e=c.apply(a[f],d),e!==!1);f++);else for(f in a)if(e=c.apply(a[f],d),e===!1)break}else if(h)for(;g>f&&(e=c.call(a[f],f,a[f]),e!==!1);f++);else for(f in a)if(e=c.call(a[f],f,a[f]),e===!1)break;return a},c.data=function(a,b,e){if(void 0===e){var f=a[c.expando],g=f&&d[f];if(void 0===b)return g;if(g&&b in g)return g[b]}else if(void 0!==b){var f=a[c.expando]||(a[c.expando]=++c.uuid);return d[f]=d[f]||{},d[f][b]=e,e}},c.removeData=function(a,b){var e=a[c.expando],f=e&&d[e];f&&c.each(b,function(a,b){delete f[b]})},c.extend=function(){var a,b,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;for("boolean"==typeof h&&(k=h,h=arguments[i]||{},i++),"object"!=typeof h&&"function"!==c.type(h)&&(h={}),i===j&&(h=this,i--);j>i;i++)if(null!=(f=arguments[i]))for(e in f)a=h[e],d=f[e],h!==d&&(k&&d&&(c.isPlainObject(d)||(b=c.isArray(d)))?(b?(b=!1,g=a&&c.isArray(a)?a:[]):g=a&&c.isPlainObject(a)?a:{},h[e]=c.extend(k,g,d)):void 0!==d&&(h[e]=d));return h},c.queue=function(a,d,e){function f(a,c){var d=c||[];return null!=a&&(b(Object(a))?!function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;)a[e++]=b[d++];if(c!==c)for(;void 0!==b[d];)a[e++]=b[d++];return a.length=e,a}(d,"string"==typeof a?[a]:a):[].push.call(d,a)),d}if(a){d=(d||"fx")+"queue";var g=c.data(a,d);return e?(!g||c.isArray(e)?g=c.data(a,d,f(e)):g.push(e),g):g||[]}},c.dequeue=function(a,b){c.each(a.nodeType?[a]:a,function(a,d){b=b||"fx";var e=c.queue(d,b),f=e.shift();"inprogress"===f&&(f=e.shift()),f&&("fx"===b&&e.unshift("inprogress"),f.call(d,function(){c.dequeue(d,b)}))})},c.fn=c.prototype={init:function(a){if(a.nodeType)return this[0]=a,this;throw new Error("Not a DOM node.")},offset:function(){var b=this[0].getBoundingClientRect?this[0].getBoundingClientRect():{top:0,left:0};return{top:b.top+(a.pageYOffset||document.scrollTop||0)-(document.clientTop||0),left:b.left+(a.pageXOffset||document.scrollLeft||0)-(document.clientLeft||0)}},position:function(){function a(){for(var a=this.offsetParent||document;a&&"html"===!a.nodeType.toLowerCase&&"static"===a.style.position;)a=a.offsetParent;return a||document}var b=this[0],a=a.apply(b),d=this.offset(),e=/^(?:body|html)$/i.test(a.nodeName)?{top:0,left:0}:c(a).offset();return d.top-=parseFloat(b.style.marginTop)||0,d.left-=parseFloat(b.style.marginLeft)||0,a.style&&(e.top+=parseFloat(a.style.borderTopWidth)||0,e.left+=parseFloat(a.style.borderLeftWidth)||0),{top:d.top-e.top,left:d.left-e.left}}};var d={};c.expando="velocity"+(new Date).getTime(),c.uuid=0;for(var e={},f=e.hasOwnProperty,g=e.toString,h="Boolean Number String Function Array Date RegExp Object Error".split(" "),i=0;i<h.length;i++)e["[object "+h[i]+"]"]=h[i].toLowerCase();c.fn.init.prototype=c.fn,a.Velocity={Utilities:c}}}(window),function(a){"object"==typeof module&&"object"==typeof module.exports?module.exports=a():"function"==typeof define&&define.amd?define(a):a()}(function(){return function(a,b,c,d){function e(a){for(var b=-1,c=a?a.length:0,d=[];++b<c;){var e=a[b];e&&d.push(e)}return d}function f(a){return p.isWrapped(a)?a=[].slice.call(a):p.isNode(a)&&(a=[a]),a}function g(a){var b=m.data(a,"velocity");return null===b?d:b}function h(a){return function(b){return Math.round(b*a)*(1/a)}}function i(a,c,d,e){function f(a,b){return 1-3*b+3*a}function g(a,b){return 3*b-6*a}function h(a){return 3*a}function i(a,b,c){return((f(b,c)*a+g(b,c))*a+h(b))*a}function j(a,b,c){return 3*f(b,c)*a*a+2*g(b,c)*a+h(b)}function k(b,c){for(var e=0;p>e;++e){var f=j(c,a,d);if(0===f)return c;var g=i(c,a,d)-b;c-=g/f}return c}function l(){for(var b=0;t>b;++b)x[b]=i(b*u,a,d)}function m(b,c,e){var f,g,h=0;do g=c+(e-c)/2,f=i(g,a,d)-b,f>0?e=g:c=g;while(Math.abs(f)>r&&++h<s);return g}function n(b){for(var c=0,e=1,f=t-1;e!=f&&x[e]<=b;++e)c+=u;--e;var g=(b-x[e])/(x[e+1]-x[e]),h=c+g*u,i=j(h,a,d);return i>=q?k(b,h):0==i?h:m(b,c,c+u)}function o(){y=!0,(a!=c||d!=e)&&l()}var p=4,q=.001,r=1e-7,s=10,t=11,u=1/(t-1),v="Float32Array"in b;if(4!==arguments.length)return!1;for(var w=0;4>w;++w)if("number"!=typeof arguments[w]||isNaN(arguments[w])||!isFinite(arguments[w]))return!1;a=Math.min(a,1),d=Math.min(d,1),a=Math.max(a,0),d=Math.max(d,0);var x=v?new Float32Array(t):new Array(t),y=!1,z=function(b){return y||o(),a===c&&d===e?b:0===b?0:1===b?1:i(n(b),c,e)};z.getControlPoints=function(){return[{x:a,y:c},{x:d,y:e}]};var A="generateBezier("+[a,c,d,e]+")";return z.toString=function(){return A},z}function j(a,b){var c=a;return p.isString(a)?t.Easings[a]||(c=!1):c=p.isArray(a)&&1===a.length?h.apply(null,a):p.isArray(a)&&2===a.length?u.apply(null,a.concat([b])):p.isArray(a)&&4===a.length?i.apply(null,a):!1,c===!1&&(c=t.Easings[t.defaults.easing]?t.defaults.easing:s),c}function k(a){if(a){var b=(new Date).getTime(),c=t.State.calls.length;c>1e4&&(t.State.calls=e(t.State.calls));for(var f=0;c>f;f++)if(t.State.calls[f]){var h=t.State.calls[f],i=h[0],j=h[2],n=h[3],o=!!n,q=null;n||(n=t.State.calls[f][3]=b-16);for(var r=Math.min((b-n)/j.duration,1),s=0,u=i.length;u>s;s++){var w=i[s],y=w.element;if(g(y)){var z=!1;if(j.display!==d&&null!==j.display&&"none"!==j.display){if("flex"===j.display){var A=["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex"];m.each(A,function(a,b){v.setPropertyValue(y,"display",b)})}v.setPropertyValue(y,"display",j.display)}j.visibility!==d&&"hidden"!==j.visibility&&v.setPropertyValue(y,"visibility",j.visibility);for(var B in w)if("element"!==B){var C,D=w[B],E=p.isString(D.easing)?t.Easings[D.easing]:D.easing;if(1===r)C=D.endValue;else{var F=D.endValue-D.startValue;if(C=D.startValue+F*E(r,j,F),!o&&C===D.currentValue)continue}if(D.currentValue=C,"tween"===B)q=C;else{if(v.Hooks.registered[B]){var G=v.Hooks.getRoot(B),H=g(y).rootPropertyValueCache[G];H&&(D.rootPropertyValue=H)}var I=v.setPropertyValue(y,B,D.currentValue+(0===parseFloat(C)?"":D.unitType),D.rootPropertyValue,D.scrollData);v.Hooks.registered[B]&&(g(y).rootPropertyValueCache[G]=v.Normalizations.registered[G]?v.Normalizations.registered[G]("extract",null,I[1]):I[1]),"transform"===I[0]&&(z=!0)}}j.mobileHA&&g(y).transformCache.translate3d===d&&(g(y).transformCache.translate3d="(0px, 0px, 0px)",z=!0),z&&v.flushTransformCache(y)}}j.display!==d&&"none"!==j.display&&(t.State.calls[f][2].display=!1),j.visibility!==d&&"hidden"!==j.visibility&&(t.State.calls[f][2].visibility=!1),j.progress&&j.progress.call(h[1],h[1],r,Math.max(0,n+j.duration-b),n,q),1===r&&l(f)}}t.State.isTicking&&x(k)}function l(a,b){if(!t.State.calls[a])return!1;for(var c=t.State.calls[a][0],e=t.State.calls[a][1],f=t.State.calls[a][2],h=t.State.calls[a][4],i=!1,j=0,k=c.length;k>j;j++){var l=c[j].element;if(b||f.loop||("none"===f.display&&v.setPropertyValue(l,"display",f.display),"hidden"===f.visibility&&v.setPropertyValue(l,"visibility",f.visibility)),f.loop!==!0&&(m.queue(l)[1]===d||!/\.velocityQueueEntryFlag/i.test(m.queue(l)[1]))&&g(l)){g(l).isAnimating=!1,g(l).rootPropertyValueCache={};var n=!1;m.each(v.Lists.transforms3D,function(a,b){var c=/^scale/.test(b)?1:0,e=g(l).transformCache[b];g(l).transformCache[b]!==d&&new RegExp("^\\("+c+"[^.]").test(e)&&(n=!0,delete g(l).transformCache[b])}),f.mobileHA&&(n=!0,delete g(l).transformCache.translate3d),n&&v.flushTransformCache(l),v.Values.removeClass(l,"velocity-animating")}if(!b&&f.complete&&!f.loop&&j===k-1)try{f.complete.call(e,e)}catch(o){setTimeout(function(){throw o},1)}h&&f.loop!==!0&&h(e),g(l)&&f.loop===!0&&!b&&(m.each(g(l).tweensContainer,function(a,b){/^rotate/.test(a)&&360===parseFloat(b.endValue)&&(b.endValue=0,b.startValue=360),/^backgroundPosition/.test(a)&&100===parseFloat(b.endValue)&&"%"===b.unitType&&(b.endValue=0,b.startValue=100)}),t(l,"reverse",{loop:!0,delay:f.delay})),f.queue!==!1&&m.dequeue(l,f.queue)}t.State.calls[a]=!1;for(var p=0,q=t.State.calls.length;q>p;p++)if(t.State.calls[p]!==!1){i=!0;break}i===!1&&(t.State.isTicking=!1,delete t.State.calls,t.State.calls=[])}var m,n=function(){if(c.documentMode)return c.documentMode;for(var a=7;a>4;a--){var b=c.createElement("div");if(b.innerHTML="<!--[if IE "+a+"]><span></span><![endif]-->",b.getElementsByTagName("span").length)return b=null,a}return d}(),o=function(){var a=0;return b.webkitRequestAnimationFrame||b.mozRequestAnimationFrame||function(b){var c,d=(new Date).getTime();return c=Math.max(0,16-(d-a)),a=d+c,setTimeout(function(){b(d+c)},c)}}(),p={isString:function(a){return"string"==typeof a},isArray:Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},isFunction:function(a){return"[object Function]"===Object.prototype.toString.call(a)},isNode:function(a){return a&&a.nodeType},isNodeList:function(a){return"object"==typeof a&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(Object.prototype.toString.call(a))&&a.length!==d&&(0===a.length||"object"==typeof a[0]&&a[0].nodeType>0)},isWrapped:function(a){return a&&(a.jquery||b.Zepto&&b.Zepto.zepto.isZ(a))},isSVG:function(a){return b.SVGElement&&a instanceof b.SVGElement},isEmptyObject:function(a){for(var b in a)return!1;return!0}},q=!1;if(a.fn&&a.fn.jquery?(m=a,q=!0):m=b.Velocity.Utilities,8>=n&&!q)throw new Error("Velocity: IE8 and below require jQuery to be loaded before Velocity.");if(7>=n)return void(jQuery.fn.velocity=jQuery.fn.animate);var r=400,s="swing",t={State:{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isAndroid:/Android/i.test(navigator.userAgent),isGingerbread:/Android 2\.3\.[3-7]/i.test(navigator.userAgent),isChrome:b.chrome,isFirefox:/Firefox/i.test(navigator.userAgent),prefixElement:c.createElement("div"),prefixMatches:{},scrollAnchor:null,scrollPropertyLeft:null,scrollPropertyTop:null,isTicking:!1,calls:[]},CSS:{},Utilities:m,Redirects:{},Easings:{},Promise:b.Promise,defaults:{queue:"",duration:r,easing:s,begin:d,complete:d,progress:d,display:d,visibility:d,loop:!1,delay:!1,mobileHA:!0,_cacheValues:!0},init:function(a){m.data(a,"velocity",{isSVG:p.isSVG(a),isAnimating:!1,computedStyle:null,tweensContainer:null,rootPropertyValueCache:{},transformCache:{}})},hook:null,mock:!1,version:{major:1,minor:2,patch:2},debug:!1};b.pageYOffset!==d?(t.State.scrollAnchor=b,t.State.scrollPropertyLeft="pageXOffset",t.State.scrollPropertyTop="pageYOffset"):(t.State.scrollAnchor=c.documentElement||c.body.parentNode||c.body,t.State.scrollPropertyLeft="scrollLeft",t.State.scrollPropertyTop="scrollTop");var u=function(){function a(a){return-a.tension*a.x-a.friction*a.v}function b(b,c,d){var e={x:b.x+d.dx*c,v:b.v+d.dv*c,tension:b.tension,friction:b.friction};return{dx:e.v,dv:a(e)}}function c(c,d){var e={dx:c.v,dv:a(c)},f=b(c,.5*d,e),g=b(c,.5*d,f),h=b(c,d,g),i=1/6*(e.dx+2*(f.dx+g.dx)+h.dx),j=1/6*(e.dv+2*(f.dv+g.dv)+h.dv);return c.x=c.x+i*d,c.v=c.v+j*d,c}return function d(a,b,e){var f,g,h,i={x:-1,v:0,tension:null,friction:null},j=[0],k=0,l=1e-4,m=.016;for(a=parseFloat(a)||500,b=parseFloat(b)||20,e=e||null,i.tension=a,i.friction=b,f=null!==e,f?(k=d(a,b),g=k/e*m):g=m;h=c(h||i,g),j.push(1+h.x),k+=16,Math.abs(h.x)>l&&Math.abs(h.v)>l;);return f?function(a){return j[a*(j.length-1)|0]}:k}}();t.Easings={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},spring:function(a){return 1-Math.cos(4.5*a*Math.PI)*Math.exp(6*-a)}},m.each([["ease",[.25,.1,.25,1]],["ease-in",[.42,0,1,1]],["ease-out",[0,0,.58,1]],["ease-in-out",[.42,0,.58,1]],["easeInSine",[.47,0,.745,.715]],["easeOutSine",[.39,.575,.565,1]],["easeInOutSine",[.445,.05,.55,.95]],["easeInQuad",[.55,.085,.68,.53]],["easeOutQuad",[.25,.46,.45,.94]],["easeInOutQuad",[.455,.03,.515,.955]],["easeInCubic",[.55,.055,.675,.19]],["easeOutCubic",[.215,.61,.355,1]],["easeInOutCubic",[.645,.045,.355,1]],["easeInQuart",[.895,.03,.685,.22]],["easeOutQuart",[.165,.84,.44,1]],["easeInOutQuart",[.77,0,.175,1]],["easeInQuint",[.755,.05,.855,.06]],["easeOutQuint",[.23,1,.32,1]],["easeInOutQuint",[.86,0,.07,1]],["easeInExpo",[.95,.05,.795,.035]],["easeOutExpo",[.19,1,.22,1]],["easeInOutExpo",[1,0,0,1]],["easeInCirc",[.6,.04,.98,.335]],["easeOutCirc",[.075,.82,.165,1]],["easeInOutCirc",[.785,.135,.15,.86]]],function(a,b){t.Easings[b[0]]=i.apply(null,b[1])});var v=t.CSS={RegEx:{isHex:/^#([A-f\d]{3}){1,2}$/i,valueUnwrap:/^[A-z]+\((.*)\)$/i,wrappedValueAlreadyExtracted:/[0-9.]+ [0-9.]+ [0-9.]+( [0-9.]+)?/,valueSplit:/([A-z]+\(.+\))|(([A-z0-9#-.]+?)(?=\s|$))/gi},Lists:{colors:["fill","stroke","stopColor","color","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","outlineColor"],transformsBase:["translateX","translateY","scale","scaleX","scaleY","skewX","skewY","rotateZ"],transforms3D:["transformPerspective","translateZ","scaleZ","rotateX","rotateY"]},Hooks:{templates:{textShadow:["Color X Y Blur","black 0px 0px 0px"],boxShadow:["Color X Y Blur Spread","black 0px 0px 0px 0px"],clip:["Top Right Bottom Left","0px 0px 0px 0px"],backgroundPosition:["X Y","0% 0%"],transformOrigin:["X Y Z","50% 50% 0px"],perspectiveOrigin:["X Y","50% 50%"]},registered:{},register:function(){for(var a=0;a<v.Lists.colors.length;a++){var b="color"===v.Lists.colors[a]?"0 0 0 1":"255 255 255 1";v.Hooks.templates[v.Lists.colors[a]]=["Red Green Blue Alpha",b]}var c,d,e;if(n)for(c in v.Hooks.templates){d=v.Hooks.templates[c],e=d[0].split(" ");var f=d[1].match(v.RegEx.valueSplit);"Color"===e[0]&&(e.push(e.shift()),f.push(f.shift()),v.Hooks.templates[c]=[e.join(" "),f.join(" ")])}for(c in v.Hooks.templates){d=v.Hooks.templates[c],e=d[0].split(" ");for(var a in e){var g=c+e[a],h=a;v.Hooks.registered[g]=[c,h]}}},getRoot:function(a){var b=v.Hooks.registered[a];return b?b[0]:a},cleanRootPropertyValue:function(a,b){return v.RegEx.valueUnwrap.test(b)&&(b=b.match(v.RegEx.valueUnwrap)[1]),v.Values.isCSSNullValue(b)&&(b=v.Hooks.templates[a][1]),b},extractValue:function(a,b){var c=v.Hooks.registered[a];if(c){var d=c[0],e=c[1];return b=v.Hooks.cleanRootPropertyValue(d,b),b.toString().match(v.RegEx.valueSplit)[e]}return b},injectValue:function(a,b,c){var d=v.Hooks.registered[a];if(d){var e,f,g=d[0],h=d[1];return c=v.Hooks.cleanRootPropertyValue(g,c),e=c.toString().match(v.RegEx.valueSplit),e[h]=b,f=e.join(" ")}return c}},Normalizations:{registered:{clip:function(a,b,c){switch(a){case"name":return"clip";case"extract":var d;return v.RegEx.wrappedValueAlreadyExtracted.test(c)?d=c:(d=c.toString().match(v.RegEx.valueUnwrap),d=d?d[1].replace(/,(\s+)?/g," "):c),d;case"inject":return"rect("+c+")"}},blur:function(a,b,c){switch(a){case"name":return t.State.isFirefox?"filter":"-webkit-filter";case"extract":var d=parseFloat(c);if(!d&&0!==d){var e=c.toString().match(/blur\(([0-9]+[A-z]+)\)/i);d=e?e[1]:0}return d;case"inject":return parseFloat(c)?"blur("+c+")":"none"}},opacity:function(a,b,c){if(8>=n)switch(a){case"name":return"filter";case"extract":var d=c.toString().match(/alpha\(opacity=(.*)\)/i);return c=d?d[1]/100:1;case"inject":return b.style.zoom=1,parseFloat(c)>=1?"":"alpha(opacity="+parseInt(100*parseFloat(c),10)+")"}else switch(a){case"name":return"opacity";case"extract":return c;case"inject":return c}}},register:function(){9>=n||t.State.isGingerbread||(v.Lists.transformsBase=v.Lists.transformsBase.concat(v.Lists.transforms3D));for(var a=0;a<v.Lists.transformsBase.length;a++)!function(){var b=v.Lists.transformsBase[a];v.Normalizations.registered[b]=function(a,c,e){switch(a){case"name":return"transform";case"extract":return g(c)===d||g(c).transformCache[b]===d?/^scale/i.test(b)?1:0:g(c).transformCache[b].replace(/[()]/g,"");case"inject":var f=!1;switch(b.substr(0,b.length-1)){case"translate":f=!/(%|px|em|rem|vw|vh|\d)$/i.test(e);break;case"scal":case"scale":t.State.isAndroid&&g(c).transformCache[b]===d&&1>e&&(e=1),f=!/(\d)$/i.test(e);break;case"skew":f=!/(deg|\d)$/i.test(e);break;case"rotate":f=!/(deg|\d)$/i.test(e)}return f||(g(c).transformCache[b]="("+e+")"),g(c).transformCache[b]}}}();for(var a=0;a<v.Lists.colors.length;a++)!function(){var b=v.Lists.colors[a];v.Normalizations.registered[b]=function(a,c,e){switch(a){case"name":return b;case"extract":var f;if(v.RegEx.wrappedValueAlreadyExtracted.test(e))f=e;else{var g,h={black:"rgb(0, 0, 0)",blue:"rgb(0, 0, 255)",gray:"rgb(128, 128, 128)",green:"rgb(0, 128, 0)",red:"rgb(255, 0, 0)",white:"rgb(255, 255, 255)"};/^[A-z]+$/i.test(e)?g=h[e]!==d?h[e]:h.black:v.RegEx.isHex.test(e)?g="rgb("+v.Values.hexToRgb(e).join(" ")+")":/^rgba?\(/i.test(e)||(g=h.black),f=(g||e).toString().match(v.RegEx.valueUnwrap)[1].replace(/,(\s+)?/g," ")}return 8>=n||3!==f.split(" ").length||(f+=" 1"),f;case"inject":return 8>=n?4===e.split(" ").length&&(e=e.split(/\s+/).slice(0,3).join(" ")):3===e.split(" ").length&&(e+=" 1"),(8>=n?"rgb":"rgba")+"("+e.replace(/\s+/g,",").replace(/\.(\d)+(?=,)/g,"")+")"}}}()}},Names:{camelCase:function(a){return a.replace(/-(\w)/g,function(a,b){return b.toUpperCase()})},SVGAttribute:function(a){var b="width|height|x|y|cx|cy|r|rx|ry|x1|x2|y1|y2";return(n||t.State.isAndroid&&!t.State.isChrome)&&(b+="|transform"),new RegExp("^("+b+")$","i").test(a)},prefixCheck:function(a){if(t.State.prefixMatches[a])return[t.State.prefixMatches[a],!0];for(var b=["","Webkit","Moz","ms","O"],c=0,d=b.length;d>c;c++){var e;if(e=0===c?a:b[c]+a.replace(/^\w/,function(a){return a.toUpperCase()}),p.isString(t.State.prefixElement.style[e]))return t.State.prefixMatches[a]=e,[e,!0]}return[a,!1]}},Values:{hexToRgb:function(a){var b,c=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,d=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i;return a=a.replace(c,function(a,b,c,d){return b+b+c+c+d+d}),b=d.exec(a),b?[parseInt(b[1],16),parseInt(b[2],16),parseInt(b[3],16)]:[0,0,0]},isCSSNullValue:function(a){return 0==a||/^(none|auto|transparent|(rgba\(0, ?0, ?0, ?0\)))$/i.test(a)},getUnitType:function(a){return/^(rotate|skew)/i.test(a)?"deg":/(^(scale|scaleX|scaleY|scaleZ|alpha|flexGrow|flexHeight|zIndex|fontWeight)$)|((opacity|red|green|blue|alpha)$)/i.test(a)?"":"px"},getDisplayType:function(a){var b=a&&a.tagName.toString().toLowerCase();return/^(b|big|i|small|tt|abbr|acronym|cite|code|dfn|em|kbd|strong|samp|var|a|bdo|br|img|map|object|q|script|span|sub|sup|button|input|label|select|textarea)$/i.test(b)?"inline":/^(li)$/i.test(b)?"list-item":/^(tr)$/i.test(b)?"table-row":/^(table)$/i.test(b)?"table":/^(tbody)$/i.test(b)?"table-row-group":"block"},addClass:function(a,b){a.classList?a.classList.add(b):a.className+=(a.className.length?" ":"")+b},removeClass:function(a,b){a.classList?a.classList.remove(b):a.className=a.className.toString().replace(new RegExp("(^|\\s)"+b.split(" ").join("|")+"(\\s|$)","gi")," ")}},getPropertyValue:function(a,c,e,f){function h(a,c){function e(){j&&v.setPropertyValue(a,"display","none")}var i=0;if(8>=n)i=m.css(a,c);else{var j=!1;if(/^(width|height)$/.test(c)&&0===v.getPropertyValue(a,"display")&&(j=!0,v.setPropertyValue(a,"display",v.Values.getDisplayType(a))),!f){if("height"===c&&"border-box"!==v.getPropertyValue(a,"boxSizing").toString().toLowerCase()){var k=a.offsetHeight-(parseFloat(v.getPropertyValue(a,"borderTopWidth"))||0)-(parseFloat(v.getPropertyValue(a,"borderBottomWidth"))||0)-(parseFloat(v.getPropertyValue(a,"paddingTop"))||0)-(parseFloat(v.getPropertyValue(a,"paddingBottom"))||0);return e(),k}if("width"===c&&"border-box"!==v.getPropertyValue(a,"boxSizing").toString().toLowerCase()){var l=a.offsetWidth-(parseFloat(v.getPropertyValue(a,"borderLeftWidth"))||0)-(parseFloat(v.getPropertyValue(a,"borderRightWidth"))||0)-(parseFloat(v.getPropertyValue(a,"paddingLeft"))||0)-(parseFloat(v.getPropertyValue(a,"paddingRight"))||0);return e(),l}}var o;o=g(a)===d?b.getComputedStyle(a,null):g(a).computedStyle?g(a).computedStyle:g(a).computedStyle=b.getComputedStyle(a,null),"borderColor"===c&&(c="borderTopColor"),i=9===n&&"filter"===c?o.getPropertyValue(c):o[c],(""===i||null===i)&&(i=a.style[c]),e()}if("auto"===i&&/^(top|right|bottom|left)$/i.test(c)){var p=h(a,"position");("fixed"===p||"absolute"===p&&/top|left/i.test(c))&&(i=m(a).position()[c]+"px")}return i}var i;if(v.Hooks.registered[c]){var j=c,k=v.Hooks.getRoot(j);e===d&&(e=v.getPropertyValue(a,v.Names.prefixCheck(k)[0])),v.Normalizations.registered[k]&&(e=v.Normalizations.registered[k]("extract",a,e)),i=v.Hooks.extractValue(j,e)}else if(v.Normalizations.registered[c]){var l,o;l=v.Normalizations.registered[c]("name",a),"transform"!==l&&(o=h(a,v.Names.prefixCheck(l)[0]),v.Values.isCSSNullValue(o)&&v.Hooks.templates[c]&&(o=v.Hooks.templates[c][1])),i=v.Normalizations.registered[c]("extract",a,o)}if(!/^[\d-]/.test(i))if(g(a)&&g(a).isSVG&&v.Names.SVGAttribute(c))if(/^(height|width)$/i.test(c))try{i=a.getBBox()[c]}catch(p){i=0}else i=a.getAttribute(c);else i=h(a,v.Names.prefixCheck(c)[0]);return v.Values.isCSSNullValue(i)&&(i=0),t.debug>=2&&console.log("Get "+c+": "+i),i},setPropertyValue:function(a,c,d,e,f){var h=c;if("scroll"===c)f.container?f.container["scroll"+f.direction]=d:"Left"===f.direction?b.scrollTo(d,f.alternateValue):b.scrollTo(f.alternateValue,d);else if(v.Normalizations.registered[c]&&"transform"===v.Normalizations.registered[c]("name",a))v.Normalizations.registered[c]("inject",a,d),h="transform",d=g(a).transformCache[c];else{if(v.Hooks.registered[c]){var i=c,j=v.Hooks.getRoot(c);e=e||v.getPropertyValue(a,j),d=v.Hooks.injectValue(i,d,e),c=j}if(v.Normalizations.registered[c]&&(d=v.Normalizations.registered[c]("inject",a,d),c=v.Normalizations.registered[c]("name",a)),h=v.Names.prefixCheck(c)[0],8>=n)try{a.style[h]=d}catch(k){t.debug&&console.log("Browser does not support ["+d+"] for ["+h+"]")}else g(a)&&g(a).isSVG&&v.Names.SVGAttribute(c)?a.setAttribute(c,d):a.style[h]=d;t.debug>=2&&console.log("Set "+c+" ("+h+"): "+d)}return[h,d]},flushTransformCache:function(a){function b(b){return parseFloat(v.getPropertyValue(a,b))}var c="";if((n||t.State.isAndroid&&!t.State.isChrome)&&g(a).isSVG){var d={translate:[b("translateX"),b("translateY")],skewX:[b("skewX")],skewY:[b("skewY")],scale:1!==b("scale")?[b("scale"),b("scale")]:[b("scaleX"),b("scaleY")],rotate:[b("rotateZ"),0,0]};m.each(g(a).transformCache,function(a){/^translate/i.test(a)?a="translate":/^scale/i.test(a)?a="scale":/^rotate/i.test(a)&&(a="rotate"),d[a]&&(c+=a+"("+d[a].join(" ")+") ",delete d[a])})}else{var e,f;m.each(g(a).transformCache,function(b){return e=g(a).transformCache[b],"transformPerspective"===b?(f=e,!0):(9===n&&"rotateZ"===b&&(b="rotate"),void(c+=b+e+" "))}),f&&(c="perspective"+f+" "+c)}v.setPropertyValue(a,"transform",c)}};v.Hooks.register(),v.Normalizations.register(),t.hook=function(a,b,c){var e=d;return a=f(a),m.each(a,function(a,f){if(g(f)===d&&t.init(f),c===d)e===d&&(e=t.CSS.getPropertyValue(f,b));else{var h=t.CSS.setPropertyValue(f,b,c);"transform"===h[0]&&t.CSS.flushTransformCache(f),e=h}}),e};var w=function(){function a(){return h?B.promise||null:i}function e(){function a(a){function l(a,b){var c=d,e=d,g=d;return p.isArray(a)?(c=a[0],!p.isArray(a[1])&&/^[\d-]/.test(a[1])||p.isFunction(a[1])||v.RegEx.isHex.test(a[1])?g=a[1]:(p.isString(a[1])&&!v.RegEx.isHex.test(a[1])||p.isArray(a[1]))&&(e=b?a[1]:j(a[1],h.duration),a[2]!==d&&(g=a[2]))):c=a,b||(e=e||h.easing),p.isFunction(c)&&(c=c.call(f,y,x)),p.isFunction(g)&&(g=g.call(f,y,x)),[c||0,e,g]}function n(a,b){var c,d;return d=(b||"0").toString().toLowerCase().replace(/[%A-z]+$/,function(a){return c=a,""}),c||(c=v.Values.getUnitType(a)),[d,c]}function r(){var a={myParent:f.parentNode||c.body,position:v.getPropertyValue(f,"position"),fontSize:v.getPropertyValue(f,"fontSize")},d=a.position===I.lastPosition&&a.myParent===I.lastParent,e=a.fontSize===I.lastFontSize;I.lastParent=a.myParent,I.lastPosition=a.position,I.lastFontSize=a.fontSize;var h=100,i={};if(e&&d)i.emToPx=I.lastEmToPx,i.percentToPxWidth=I.lastPercentToPxWidth,i.percentToPxHeight=I.lastPercentToPxHeight;else{var j=g(f).isSVG?c.createElementNS("http://www.w3.org/2000/svg","rect"):c.createElement("div");t.init(j),a.myParent.appendChild(j),m.each(["overflow","overflowX","overflowY"],function(a,b){t.CSS.setPropertyValue(j,b,"hidden")}),t.CSS.setPropertyValue(j,"position",a.position),t.CSS.setPropertyValue(j,"fontSize",a.fontSize),t.CSS.setPropertyValue(j,"boxSizing","content-box"),m.each(["minWidth","maxWidth","width","minHeight","maxHeight","height"],function(a,b){t.CSS.setPropertyValue(j,b,h+"%")}),t.CSS.setPropertyValue(j,"paddingLeft",h+"em"),i.percentToPxWidth=I.lastPercentToPxWidth=(parseFloat(v.getPropertyValue(j,"width",null,!0))||1)/h,i.percentToPxHeight=I.lastPercentToPxHeight=(parseFloat(v.getPropertyValue(j,"height",null,!0))||1)/h,i.emToPx=I.lastEmToPx=(parseFloat(v.getPropertyValue(j,"paddingLeft"))||1)/h,a.myParent.removeChild(j)}return null===I.remToPx&&(I.remToPx=parseFloat(v.getPropertyValue(c.body,"fontSize"))||16),null===I.vwToPx&&(I.vwToPx=parseFloat(b.innerWidth)/100,I.vhToPx=parseFloat(b.innerHeight)/100),i.remToPx=I.remToPx,i.vwToPx=I.vwToPx,i.vhToPx=I.vhToPx,t.debug>=1&&console.log("Unit ratios: "+JSON.stringify(i),f),i}if(h.begin&&0===y)try{h.begin.call(o,o)}catch(u){setTimeout(function(){throw u},1)}if("scroll"===C){var w,z,A,D=/^x$/i.test(h.axis)?"Left":"Top",E=parseFloat(h.offset)||0;h.container?p.isWrapped(h.container)||p.isNode(h.container)?(h.container=h.container[0]||h.container,w=h.container["scroll"+D],A=w+m(f).position()[D.toLowerCase()]+E):h.container=null:(w=t.State.scrollAnchor[t.State["scrollProperty"+D]],z=t.State.scrollAnchor[t.State["scrollProperty"+("Left"===D?"Top":"Left")]],A=m(f).offset()[D.toLowerCase()]+E),i={scroll:{rootPropertyValue:!1,startValue:w,currentValue:w,endValue:A,unitType:"",easing:h.easing,scrollData:{container:h.container,direction:D,alternateValue:z}},element:f},t.debug&&console.log("tweensContainer (scroll): ",i.scroll,f)}else if("reverse"===C){if(!g(f).tweensContainer)return void m.dequeue(f,h.queue);"none"===g(f).opts.display&&(g(f).opts.display="auto"),"hidden"===g(f).opts.visibility&&(g(f).opts.visibility="visible"),g(f).opts.loop=!1,g(f).opts.begin=null,g(f).opts.complete=null,s.easing||delete h.easing,s.duration||delete h.duration,h=m.extend({},g(f).opts,h);var F=m.extend(!0,{},g(f).tweensContainer);for(var G in F)if("element"!==G){var H=F[G].startValue;F[G].startValue=F[G].currentValue=F[G].endValue,F[G].endValue=H,p.isEmptyObject(s)||(F[G].easing=h.easing),t.debug&&console.log("reverse tweensContainer ("+G+"): "+JSON.stringify(F[G]),f)}i=F}else if("start"===C){var F;g(f).tweensContainer&&g(f).isAnimating===!0&&(F=g(f).tweensContainer),m.each(q,function(a,b){if(RegExp("^"+v.Lists.colors.join("$|^")+"$").test(a)){var c=l(b,!0),e=c[0],f=c[1],g=c[2];if(v.RegEx.isHex.test(e)){for(var h=["Red","Green","Blue"],i=v.Values.hexToRgb(e),j=g?v.Values.hexToRgb(g):d,k=0;k<h.length;k++){var m=[i[k]];f&&m.push(f),j!==d&&m.push(j[k]),q[a+h[k]]=m}delete q[a]}}});for(var K in q){var L=l(q[K]),M=L[0],N=L[1],O=L[2];K=v.Names.camelCase(K);var P=v.Hooks.getRoot(K),Q=!1;if(g(f).isSVG||"tween"===P||v.Names.prefixCheck(P)[1]!==!1||v.Normalizations.registered[P]!==d){(h.display!==d&&null!==h.display&&"none"!==h.display||h.visibility!==d&&"hidden"!==h.visibility)&&/opacity|filter/.test(K)&&!O&&0!==M&&(O=0),h._cacheValues&&F&&F[K]?(O===d&&(O=F[K].endValue+F[K].unitType),Q=g(f).rootPropertyValueCache[P]):v.Hooks.registered[K]?O===d?(Q=v.getPropertyValue(f,P),O=v.getPropertyValue(f,K,Q)):Q=v.Hooks.templates[P][1]:O===d&&(O=v.getPropertyValue(f,K));var R,S,T,U=!1;if(R=n(K,O),O=R[0],T=R[1],R=n(K,M),M=R[0].replace(/^([+-\/*])=/,function(a,b){return U=b,""}),S=R[1],O=parseFloat(O)||0,M=parseFloat(M)||0,"%"===S&&(/^(fontSize|lineHeight)$/.test(K)?(M/=100,S="em"):/^scale/.test(K)?(M/=100,S=""):/(Red|Green|Blue)$/i.test(K)&&(M=M/100*255,S="")),/[\/*]/.test(U))S=T;else if(T!==S&&0!==O)if(0===M)S=T;else{e=e||r();var V=/margin|padding|left|right|width|text|word|letter/i.test(K)||/X$/.test(K)||"x"===K?"x":"y";
switch(T){case"%":O*="x"===V?e.percentToPxWidth:e.percentToPxHeight;break;case"px":break;default:O*=e[T+"ToPx"]}switch(S){case"%":O*=1/("x"===V?e.percentToPxWidth:e.percentToPxHeight);break;case"px":break;default:O*=1/e[S+"ToPx"]}}switch(U){case"+":M=O+M;break;case"-":M=O-M;break;case"*":M=O*M;break;case"/":M=O/M}i[K]={rootPropertyValue:Q,startValue:O,currentValue:O,endValue:M,unitType:S,easing:N},t.debug&&console.log("tweensContainer ("+K+"): "+JSON.stringify(i[K]),f)}else t.debug&&console.log("Skipping ["+P+"] due to a lack of browser support.")}i.element=f}i.element&&(v.Values.addClass(f,"velocity-animating"),J.push(i),""===h.queue&&(g(f).tweensContainer=i,g(f).opts=h),g(f).isAnimating=!0,y===x-1?(t.State.calls.push([J,o,h,null,B.resolver]),t.State.isTicking===!1&&(t.State.isTicking=!0,k())):y++)}var e,f=this,h=m.extend({},t.defaults,s),i={};switch(g(f)===d&&t.init(f),parseFloat(h.delay)&&h.queue!==!1&&m.queue(f,h.queue,function(a){t.velocityQueueEntryFlag=!0,g(f).delayTimer={setTimeout:setTimeout(a,parseFloat(h.delay)),next:a}}),h.duration.toString().toLowerCase()){case"fast":h.duration=200;break;case"normal":h.duration=r;break;case"slow":h.duration=600;break;default:h.duration=parseFloat(h.duration)||1}t.mock!==!1&&(t.mock===!0?h.duration=h.delay=1:(h.duration*=parseFloat(t.mock)||1,h.delay*=parseFloat(t.mock)||1)),h.easing=j(h.easing,h.duration),h.begin&&!p.isFunction(h.begin)&&(h.begin=null),h.progress&&!p.isFunction(h.progress)&&(h.progress=null),h.complete&&!p.isFunction(h.complete)&&(h.complete=null),h.display!==d&&null!==h.display&&(h.display=h.display.toString().toLowerCase(),"auto"===h.display&&(h.display=t.CSS.Values.getDisplayType(f))),h.visibility!==d&&null!==h.visibility&&(h.visibility=h.visibility.toString().toLowerCase()),h.mobileHA=h.mobileHA&&t.State.isMobile&&!t.State.isGingerbread,h.queue===!1?h.delay?setTimeout(a,h.delay):a():m.queue(f,h.queue,function(b,c){return c===!0?(B.promise&&B.resolver(o),!0):(t.velocityQueueEntryFlag=!0,void a(b))}),""!==h.queue&&"fx"!==h.queue||"inprogress"===m.queue(f)[0]||m.dequeue(f)}var h,i,n,o,q,s,u=arguments[0]&&(arguments[0].p||m.isPlainObject(arguments[0].properties)&&!arguments[0].properties.names||p.isString(arguments[0].properties));if(p.isWrapped(this)?(h=!1,n=0,o=this,i=this):(h=!0,n=1,o=u?arguments[0].elements||arguments[0].e:arguments[0]),o=f(o)){u?(q=arguments[0].properties||arguments[0].p,s=arguments[0].options||arguments[0].o):(q=arguments[n],s=arguments[n+1]);var x=o.length,y=0;if(!/^(stop|finish)$/i.test(q)&&!m.isPlainObject(s)){var z=n+1;s={};for(var A=z;A<arguments.length;A++)p.isArray(arguments[A])||!/^(fast|normal|slow)$/i.test(arguments[A])&&!/^\d/.test(arguments[A])?p.isString(arguments[A])||p.isArray(arguments[A])?s.easing=arguments[A]:p.isFunction(arguments[A])&&(s.complete=arguments[A]):s.duration=arguments[A]}var B={promise:null,resolver:null,rejecter:null};h&&t.Promise&&(B.promise=new t.Promise(function(a,b){B.resolver=a,B.rejecter=b}));var C;switch(q){case"scroll":C="scroll";break;case"reverse":C="reverse";break;case"finish":case"stop":m.each(o,function(a,b){g(b)&&g(b).delayTimer&&(clearTimeout(g(b).delayTimer.setTimeout),g(b).delayTimer.next&&g(b).delayTimer.next(),delete g(b).delayTimer)});var D=[];return m.each(t.State.calls,function(a,b){b&&m.each(b[1],function(c,e){var f=s===d?"":s;return f===!0||b[2].queue===f||s===d&&b[2].queue===!1?void m.each(o,function(c,d){d===e&&((s===!0||p.isString(s))&&(m.each(m.queue(d,p.isString(s)?s:""),function(a,b){p.isFunction(b)&&b(null,!0)}),m.queue(d,p.isString(s)?s:"",[])),"stop"===q?(g(d)&&g(d).tweensContainer&&f!==!1&&m.each(g(d).tweensContainer,function(a,b){b.endValue=b.currentValue}),D.push(a)):"finish"===q&&(b[2].duration=1))}):!0})}),"stop"===q&&(m.each(D,function(a,b){l(b,!0)}),B.promise&&B.resolver(o)),a();default:if(!m.isPlainObject(q)||p.isEmptyObject(q)){if(p.isString(q)&&t.Redirects[q]){var E=m.extend({},s),F=E.duration,G=E.delay||0;return E.backwards===!0&&(o=m.extend(!0,[],o).reverse()),m.each(o,function(a,b){parseFloat(E.stagger)?E.delay=G+parseFloat(E.stagger)*a:p.isFunction(E.stagger)&&(E.delay=G+E.stagger.call(b,a,x)),E.drag&&(E.duration=parseFloat(F)||(/^(callout|transition)/.test(q)?1e3:r),E.duration=Math.max(E.duration*(E.backwards?1-a/x:(a+1)/x),.75*E.duration,200)),t.Redirects[q].call(b,b,E||{},a,x,o,B.promise?B:d)}),a()}var H="Velocity: First argument ("+q+") was not a property map, a known action, or a registered redirect. Aborting.";return B.promise?B.rejecter(new Error(H)):console.log(H),a()}C="start"}var I={lastParent:null,lastPosition:null,lastFontSize:null,lastPercentToPxWidth:null,lastPercentToPxHeight:null,lastEmToPx:null,remToPx:null,vwToPx:null,vhToPx:null},J=[];m.each(o,function(a,b){p.isNode(b)&&e.call(b)});var K,E=m.extend({},t.defaults,s);if(E.loop=parseInt(E.loop),K=2*E.loop-1,E.loop)for(var L=0;K>L;L++){var M={delay:E.delay,progress:E.progress};L===K-1&&(M.display=E.display,M.visibility=E.visibility,M.complete=E.complete),w(o,"reverse",M)}return a()}};t=m.extend(w,t),t.animate=w;var x=b.requestAnimationFrame||o;return t.State.isMobile||c.hidden===d||c.addEventListener("visibilitychange",function(){c.hidden?(x=function(a){return setTimeout(function(){a(!0)},16)},k()):x=b.requestAnimationFrame||o}),a.Velocity=t,a!==b&&(a.fn.velocity=w,a.fn.velocity.defaults=t.defaults),m.each(["Down","Up"],function(a,b){t.Redirects["slide"+b]=function(a,c,e,f,g,h){var i=m.extend({},c),j=i.begin,k=i.complete,l={height:"",marginTop:"",marginBottom:"",paddingTop:"",paddingBottom:""},n={};i.display===d&&(i.display="Down"===b?"inline"===t.CSS.Values.getDisplayType(a)?"inline-block":"block":"none"),i.begin=function(){j&&j.call(g,g);for(var c in l){n[c]=a.style[c];var d=t.CSS.getPropertyValue(a,c);l[c]="Down"===b?[d,0]:[0,d]}n.overflow=a.style.overflow,a.style.overflow="hidden"},i.complete=function(){for(var b in n)a.style[b]=n[b];k&&k.call(g,g),h&&h.resolver(g)},t(a,l,i)}}),m.each(["In","Out"],function(a,b){t.Redirects["fade"+b]=function(a,c,e,f,g,h){var i=m.extend({},c),j={opacity:"In"===b?1:0},k=i.complete;i.complete=e!==f-1?i.begin=null:function(){k&&k.call(g,g),h&&h.resolver(g)},i.display===d&&(i.display="In"===b?"auto":"none"),t(this,j,i)}}),t}(window.jQuery||window.Zepto||window,window,document)})),!function(a,b,c,d){"use strict";function e(a,b,c){return setTimeout(k(a,c),b)}function f(a,b,c){return Array.isArray(a)?(g(a,c[b],c),!0):!1}function g(a,b,c){var e;if(a)if(a.forEach)a.forEach(b,c);else if(a.length!==d)for(e=0;e<a.length;)b.call(c,a[e],e,a),e++;else for(e in a)a.hasOwnProperty(e)&&b.call(c,a[e],e,a)}function h(a,b,c){for(var e=Object.keys(b),f=0;f<e.length;)(!c||c&&a[e[f]]===d)&&(a[e[f]]=b[e[f]]),f++;return a}function i(a,b){return h(a,b,!0)}function j(a,b,c){var d,e=b.prototype;d=a.prototype=Object.create(e),d.constructor=a,d._super=e,c&&h(d,c)}function k(a,b){return function(){return a.apply(b,arguments)}}function l(a,b){return typeof a==ka?a.apply(b?b[0]||d:d,b):a}function m(a,b){return a===d?b:a}function n(a,b,c){g(r(b),function(b){a.addEventListener(b,c,!1)})}function o(a,b,c){g(r(b),function(b){a.removeEventListener(b,c,!1)})}function p(a,b){for(;a;){if(a==b)return!0;a=a.parentNode}return!1}function q(a,b){return a.indexOf(b)>-1}function r(a){return a.trim().split(/\s+/g)}function s(a,b,c){if(a.indexOf&&!c)return a.indexOf(b);for(var d=0;d<a.length;){if(c&&a[d][c]==b||!c&&a[d]===b)return d;d++}return-1}function t(a){return Array.prototype.slice.call(a,0)}function u(a,b,c){for(var d=[],e=[],f=0;f<a.length;){var g=b?a[f][b]:a[f];s(e,g)<0&&d.push(a[f]),e[f]=g,f++}return c&&(d=b?d.sort(function(a,c){return a[b]>c[b]}):d.sort()),d}function v(a,b){for(var c,e,f=b[0].toUpperCase()+b.slice(1),g=0;g<ia.length;){if(c=ia[g],e=c?c+f:b,e in a)return e;g++}return d}function w(){return oa++}function x(a){var b=a.ownerDocument;return b.defaultView||b.parentWindow}function y(a,b){var c=this;this.manager=a,this.callback=b,this.element=a.element,this.target=a.options.inputTarget,this.domHandler=function(b){l(a.options.enable,[a])&&c.handler(b)},this.init()}function z(a){var b,c=a.options.inputClass;return new(b=c?c:ra?N:sa?Q:qa?S:M)(a,A)}function A(a,b,c){var d=c.pointers.length,e=c.changedPointers.length,f=b&ya&&0===d-e,g=b&(Aa|Ba)&&0===d-e;c.isFirst=!!f,c.isFinal=!!g,f&&(a.session={}),c.eventType=b,B(a,c),a.emit("hammer.input",c),a.recognize(c),a.session.prevInput=c}function B(a,b){var c=a.session,d=b.pointers,e=d.length;c.firstInput||(c.firstInput=E(b)),e>1&&!c.firstMultiple?c.firstMultiple=E(b):1===e&&(c.firstMultiple=!1);var f=c.firstInput,g=c.firstMultiple,h=g?g.center:f.center,i=b.center=F(d);b.timeStamp=na(),b.deltaTime=b.timeStamp-f.timeStamp,b.angle=J(h,i),b.distance=I(h,i),C(c,b),b.offsetDirection=H(b.deltaX,b.deltaY),b.scale=g?L(g.pointers,d):1,b.rotation=g?K(g.pointers,d):0,D(c,b);var j=a.element;p(b.srcEvent.target,j)&&(j=b.srcEvent.target),b.target=j}function C(a,b){var c=b.center,d=a.offsetDelta||{},e=a.prevDelta||{},f=a.prevInput||{};(b.eventType===ya||f.eventType===Aa)&&(e=a.prevDelta={x:f.deltaX||0,y:f.deltaY||0},d=a.offsetDelta={x:c.x,y:c.y}),b.deltaX=e.x+(c.x-d.x),b.deltaY=e.y+(c.y-d.y)}function D(a,b){var c,e,f,g,h=a.lastInterval||b,i=b.timeStamp-h.timeStamp;if(b.eventType!=Ba&&(i>xa||h.velocity===d)){var j=h.deltaX-b.deltaX,k=h.deltaY-b.deltaY,l=G(i,j,k);e=l.x,f=l.y,c=ma(l.x)>ma(l.y)?l.x:l.y,g=H(j,k),a.lastInterval=b}else c=h.velocity,e=h.velocityX,f=h.velocityY,g=h.direction;b.velocity=c,b.velocityX=e,b.velocityY=f,b.direction=g}function E(a){for(var b=[],c=0;c<a.pointers.length;)b[c]={clientX:la(a.pointers[c].clientX),clientY:la(a.pointers[c].clientY)},c++;return{timeStamp:na(),pointers:b,center:F(b),deltaX:a.deltaX,deltaY:a.deltaY}}function F(a){var b=a.length;if(1===b)return{x:la(a[0].clientX),y:la(a[0].clientY)};for(var c=0,d=0,e=0;b>e;)c+=a[e].clientX,d+=a[e].clientY,e++;return{x:la(c/b),y:la(d/b)}}function G(a,b,c){return{x:b/a||0,y:c/a||0}}function H(a,b){return a===b?Ca:ma(a)>=ma(b)?a>0?Da:Ea:b>0?Fa:Ga}function I(a,b,c){c||(c=Ka);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return Math.sqrt(d*d+e*e)}function J(a,b,c){c||(c=Ka);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return 180*Math.atan2(e,d)/Math.PI}function K(a,b){return J(b[1],b[0],La)-J(a[1],a[0],La)}function L(a,b){return I(b[0],b[1],La)/I(a[0],a[1],La)}function M(){this.evEl=Na,this.evWin=Oa,this.allow=!0,this.pressed=!1,y.apply(this,arguments)}function N(){this.evEl=Ra,this.evWin=Sa,y.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function O(){this.evTarget=Ua,this.evWin=Va,this.started=!1,y.apply(this,arguments)}function P(a,b){var c=t(a.touches),d=t(a.changedTouches);return b&(Aa|Ba)&&(c=u(c.concat(d),"identifier",!0)),[c,d]}function Q(){this.evTarget=Xa,this.targetIds={},y.apply(this,arguments)}function R(a,b){var c=t(a.touches),d=this.targetIds;if(b&(ya|za)&&1===c.length)return d[c[0].identifier]=!0,[c,c];var e,f,g=t(a.changedTouches),h=[],i=this.target;if(f=c.filter(function(a){return p(a.target,i)}),b===ya)for(e=0;e<f.length;)d[f[e].identifier]=!0,e++;for(e=0;e<g.length;)d[g[e].identifier]&&h.push(g[e]),b&(Aa|Ba)&&delete d[g[e].identifier],e++;return h.length?[u(f.concat(h),"identifier",!0),h]:void 0}function S(){y.apply(this,arguments);var a=k(this.handler,this);this.touch=new Q(this.manager,a),this.mouse=new M(this.manager,a)}function T(a,b){this.manager=a,this.set(b)}function U(a){if(q(a,bb))return bb;var b=q(a,cb),c=q(a,db);return b&&c?cb+" "+db:b||c?b?cb:db:q(a,ab)?ab:_a}function V(a){this.id=w(),this.manager=null,this.options=i(a||{},this.defaults),this.options.enable=m(this.options.enable,!0),this.state=eb,this.simultaneous={},this.requireFail=[]}function W(a){return a&jb?"cancel":a&hb?"end":a&gb?"move":a&fb?"start":""}function X(a){return a==Ga?"down":a==Fa?"up":a==Da?"left":a==Ea?"right":""}function Y(a,b){var c=b.manager;return c?c.get(a):a}function Z(){V.apply(this,arguments)}function $(){Z.apply(this,arguments),this.pX=null,this.pY=null}function _(){Z.apply(this,arguments)}function aa(){V.apply(this,arguments),this._timer=null,this._input=null}function ba(){Z.apply(this,arguments)}function ca(){Z.apply(this,arguments)}function da(){V.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ea(a,b){return b=b||{},b.recognizers=m(b.recognizers,ea.defaults.preset),new fa(a,b)}function fa(a,b){b=b||{},this.options=i(b,ea.defaults),this.options.inputTarget=this.options.inputTarget||a,this.handlers={},this.session={},this.recognizers=[],this.element=a,this.input=z(this),this.touchAction=new T(this,this.options.touchAction),ga(this,!0),g(b.recognizers,function(a){var b=this.add(new a[0](a[1]));a[2]&&b.recognizeWith(a[2]),a[3]&&b.requireFailure(a[3])},this)}function ga(a,b){var c=a.element;g(a.options.cssProps,function(a,d){c.style[v(c.style,d)]=b?a:""})}function ha(a,c){var d=b.createEvent("Event");d.initEvent(a,!0,!0),d.gesture=c,c.target.dispatchEvent(d)}var ia=["","webkit","moz","MS","ms","o"],ja=b.createElement("div"),ka="function",la=Math.round,ma=Math.abs,na=Date.now,oa=1,pa=/mobile|tablet|ip(ad|hone|od)|android/i,qa="ontouchstart"in a,ra=v(a,"PointerEvent")!==d,sa=qa&&pa.test(navigator.userAgent),ta="touch",ua="pen",va="mouse",wa="kinect",xa=25,ya=1,za=2,Aa=4,Ba=8,Ca=1,Da=2,Ea=4,Fa=8,Ga=16,Ha=Da|Ea,Ia=Fa|Ga,Ja=Ha|Ia,Ka=["x","y"],La=["clientX","clientY"];y.prototype={handler:function(){},init:function(){this.evEl&&n(this.element,this.evEl,this.domHandler),this.evTarget&&n(this.target,this.evTarget,this.domHandler),this.evWin&&n(x(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&o(this.element,this.evEl,this.domHandler),this.evTarget&&o(this.target,this.evTarget,this.domHandler),this.evWin&&o(x(this.element),this.evWin,this.domHandler)}};var Ma={mousedown:ya,mousemove:za,mouseup:Aa},Na="mousedown",Oa="mousemove mouseup";j(M,y,{handler:function(a){var b=Ma[a.type];b&ya&&0===a.button&&(this.pressed=!0),b&za&&1!==a.which&&(b=Aa),this.pressed&&this.allow&&(b&Aa&&(this.pressed=!1),this.callback(this.manager,b,{pointers:[a],changedPointers:[a],pointerType:va,srcEvent:a}))}});var Pa={pointerdown:ya,pointermove:za,pointerup:Aa,pointercancel:Ba,pointerout:Ba},Qa={2:ta,3:ua,4:va,5:wa},Ra="pointerdown",Sa="pointermove pointerup pointercancel";a.MSPointerEvent&&(Ra="MSPointerDown",Sa="MSPointerMove MSPointerUp MSPointerCancel"),j(N,y,{handler:function(a){var b=this.store,c=!1,d=a.type.toLowerCase().replace("ms",""),e=Pa[d],f=Qa[a.pointerType]||a.pointerType,g=f==ta,h=s(b,a.pointerId,"pointerId");e&ya&&(0===a.button||g)?0>h&&(b.push(a),h=b.length-1):e&(Aa|Ba)&&(c=!0),0>h||(b[h]=a,this.callback(this.manager,e,{pointers:b,changedPointers:[a],pointerType:f,srcEvent:a}),c&&b.splice(h,1))}});var Ta={touchstart:ya,touchmove:za,touchend:Aa,touchcancel:Ba},Ua="touchstart",Va="touchstart touchmove touchend touchcancel";j(O,y,{handler:function(a){var b=Ta[a.type];if(b===ya&&(this.started=!0),this.started){var c=P.call(this,a,b);b&(Aa|Ba)&&0===c[0].length-c[1].length&&(this.started=!1),this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:ta,srcEvent:a})}}});var Wa={touchstart:ya,touchmove:za,touchend:Aa,touchcancel:Ba},Xa="touchstart touchmove touchend touchcancel";j(Q,y,{handler:function(a){var b=Wa[a.type],c=R.call(this,a,b);c&&this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:ta,srcEvent:a})}}),j(S,y,{handler:function(a,b,c){var d=c.pointerType==ta,e=c.pointerType==va;if(d)this.mouse.allow=!1;else if(e&&!this.mouse.allow)return;b&(Aa|Ba)&&(this.mouse.allow=!0),this.callback(a,b,c)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Ya=v(ja.style,"touchAction"),Za=Ya!==d,$a="compute",_a="auto",ab="manipulation",bb="none",cb="pan-x",db="pan-y";T.prototype={set:function(a){a==$a&&(a=this.compute()),Za&&(this.manager.element.style[Ya]=a),this.actions=a.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var a=[];return g(this.manager.recognizers,function(b){l(b.options.enable,[b])&&(a=a.concat(b.getTouchAction()))}),U(a.join(" "))},preventDefaults:function(a){if(!Za){var b=a.srcEvent,c=a.offsetDirection;if(this.manager.session.prevented)return void b.preventDefault();var d=this.actions,e=q(d,bb),f=q(d,db),g=q(d,cb);return e||f&&c&Ha||g&&c&Ia?this.preventSrc(b):void 0}},preventSrc:function(a){this.manager.session.prevented=!0,a.preventDefault()}};var eb=1,fb=2,gb=4,hb=8,ib=hb,jb=16,kb=32;V.prototype={defaults:{},set:function(a){return h(this.options,a),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(a){if(f(a,"recognizeWith",this))return this;var b=this.simultaneous;return a=Y(a,this),b[a.id]||(b[a.id]=a,a.recognizeWith(this)),this},dropRecognizeWith:function(a){return f(a,"dropRecognizeWith",this)?this:(a=Y(a,this),delete this.simultaneous[a.id],this)},requireFailure:function(a){if(f(a,"requireFailure",this))return this;var b=this.requireFail;return a=Y(a,this),-1===s(b,a)&&(b.push(a),a.requireFailure(this)),this},dropRequireFailure:function(a){if(f(a,"dropRequireFailure",this))return this;a=Y(a,this);var b=s(this.requireFail,a);return b>-1&&this.requireFail.splice(b,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(a){return!!this.simultaneous[a.id]},emit:function(a){function b(b){c.manager.emit(c.options.event+(b?W(d):""),a)}var c=this,d=this.state;hb>d&&b(!0),b(),d>=hb&&b(!0)},tryEmit:function(a){return this.canEmit()?this.emit(a):void(this.state=kb)},canEmit:function(){for(var a=0;a<this.requireFail.length;){if(!(this.requireFail[a].state&(kb|eb)))return!1;a++}return!0},recognize:function(a){var b=h({},a);return l(this.options.enable,[this,b])?(this.state&(ib|jb|kb)&&(this.state=eb),this.state=this.process(b),void(this.state&(fb|gb|hb|jb)&&this.tryEmit(b))):(this.reset(),void(this.state=kb))},process:function(){},getTouchAction:function(){},reset:function(){}},j(Z,V,{defaults:{pointers:1},attrTest:function(a){var b=this.options.pointers;return 0===b||a.pointers.length===b},process:function(a){var b=this.state,c=a.eventType,d=b&(fb|gb),e=this.attrTest(a);return d&&(c&Ba||!e)?b|jb:d||e?c&Aa?b|hb:b&fb?b|gb:fb:kb}}),j($,Z,{defaults:{event:"pan",threshold:10,pointers:1,direction:Ja},getTouchAction:function(){var a=this.options.direction,b=[];return a&Ha&&b.push(db),a&Ia&&b.push(cb),b},directionTest:function(a){var b=this.options,c=!0,d=a.distance,e=a.direction,f=a.deltaX,g=a.deltaY;return e&b.direction||(b.direction&Ha?(e=0===f?Ca:0>f?Da:Ea,c=f!=this.pX,d=Math.abs(a.deltaX)):(e=0===g?Ca:0>g?Fa:Ga,c=g!=this.pY,d=Math.abs(a.deltaY))),a.direction=e,c&&d>b.threshold&&e&b.direction},attrTest:function(a){return Z.prototype.attrTest.call(this,a)&&(this.state&fb||!(this.state&fb)&&this.directionTest(a))},emit:function(a){this.pX=a.deltaX,this.pY=a.deltaY;var b=X(a.direction);b&&this.manager.emit(this.options.event+b,a),this._super.emit.call(this,a)}}),j(_,Z,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[bb]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.scale-1)>this.options.threshold||this.state&fb)},emit:function(a){if(this._super.emit.call(this,a),1!==a.scale){var b=a.scale<1?"in":"out";this.manager.emit(this.options.event+b,a)}}}),j(aa,V,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return[_a]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime>b.time;if(this._input=a,!d||!c||a.eventType&(Aa|Ba)&&!f)this.reset();else if(a.eventType&ya)this.reset(),this._timer=e(function(){this.state=ib,this.tryEmit()},b.time,this);else if(a.eventType&Aa)return ib;return kb},reset:function(){clearTimeout(this._timer)},emit:function(a){this.state===ib&&(a&&a.eventType&Aa?this.manager.emit(this.options.event+"up",a):(this._input.timeStamp=na(),this.manager.emit(this.options.event,this._input)))}}),j(ba,Z,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[bb]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.rotation)>this.options.threshold||this.state&fb)}}),j(ca,Z,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:Ha|Ia,pointers:1},getTouchAction:function(){return $.prototype.getTouchAction.call(this)},attrTest:function(a){var b,c=this.options.direction;return c&(Ha|Ia)?b=a.velocity:c&Ha?b=a.velocityX:c&Ia&&(b=a.velocityY),this._super.attrTest.call(this,a)&&c&a.direction&&a.distance>this.options.threshold&&ma(b)>this.options.velocity&&a.eventType&Aa},emit:function(a){var b=X(a.direction);b&&this.manager.emit(this.options.event+b,a),this.manager.emit(this.options.event,a)}}),j(da,V,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[ab]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime<b.time;if(this.reset(),a.eventType&ya&&0===this.count)return this.failTimeout();if(d&&f&&c){if(a.eventType!=Aa)return this.failTimeout();var g=this.pTime?a.timeStamp-this.pTime<b.interval:!0,h=!this.pCenter||I(this.pCenter,a.center)<b.posThreshold;this.pTime=a.timeStamp,this.pCenter=a.center,h&&g?this.count+=1:this.count=1,this._input=a;var i=this.count%b.taps;if(0===i)return this.hasRequireFailures()?(this._timer=e(function(){this.state=ib,this.tryEmit()},b.interval,this),fb):ib}return kb},failTimeout:function(){return this._timer=e(function(){this.state=kb},this.options.interval,this),kb},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ib&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ea.VERSION="2.0.4",ea.defaults={domEvents:!1,touchAction:$a,enable:!0,inputTarget:null,inputClass:null,preset:[[ba,{enable:!1}],[_,{enable:!1},["rotate"]],[ca,{direction:Ha}],[$,{direction:Ha},["swipe"]],[da],[da,{event:"doubletap",taps:2},["tap"]],[aa]],cssProps:{userSelect:"default",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var lb=1,mb=2;fa.prototype={set:function(a){return h(this.options,a),a.touchAction&&this.touchAction.update(),a.inputTarget&&(this.input.destroy(),this.input.target=a.inputTarget,this.input.init()),this},stop:function(a){this.session.stopped=a?mb:lb},recognize:function(a){var b=this.session;if(!b.stopped){this.touchAction.preventDefaults(a);var c,d=this.recognizers,e=b.curRecognizer;(!e||e&&e.state&ib)&&(e=b.curRecognizer=null);for(var f=0;f<d.length;)c=d[f],b.stopped===mb||e&&c!=e&&!c.canRecognizeWith(e)?c.reset():c.recognize(a),!e&&c.state&(fb|gb|hb)&&(e=b.curRecognizer=c),f++}},get:function(a){if(a instanceof V)return a;for(var b=this.recognizers,c=0;c<b.length;c++)if(b[c].options.event==a)return b[c];return null},add:function(a){if(f(a,"add",this))return this;var b=this.get(a.options.event);return b&&this.remove(b),this.recognizers.push(a),a.manager=this,this.touchAction.update(),a},remove:function(a){if(f(a,"remove",this))return this;var b=this.recognizers;return a=this.get(a),b.splice(s(b,a),1),this.touchAction.update(),this},on:function(a,b){var c=this.handlers;return g(r(a),function(a){c[a]=c[a]||[],c[a].push(b)}),this},off:function(a,b){var c=this.handlers;return g(r(a),function(a){b?c[a].splice(s(c[a],b),1):delete c[a]}),this},emit:function(a,b){this.options.domEvents&&ha(a,b);var c=this.handlers[a]&&this.handlers[a].slice();if(c&&c.length){b.type=a,b.preventDefault=function(){b.srcEvent.preventDefault()};for(var d=0;d<c.length;)c[d](b),d++}},destroy:function(){this.element&&ga(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},h(ea,{INPUT_START:ya,INPUT_MOVE:za,INPUT_END:Aa,INPUT_CANCEL:Ba,STATE_POSSIBLE:eb,STATE_BEGAN:fb,STATE_CHANGED:gb,STATE_ENDED:hb,STATE_RECOGNIZED:ib,STATE_CANCELLED:jb,STATE_FAILED:kb,DIRECTION_NONE:Ca,DIRECTION_LEFT:Da,DIRECTION_RIGHT:Ea,DIRECTION_UP:Fa,DIRECTION_DOWN:Ga,DIRECTION_HORIZONTAL:Ha,DIRECTION_VERTICAL:Ia,DIRECTION_ALL:Ja,Manager:fa,Input:y,TouchAction:T,TouchInput:Q,MouseInput:M,PointerEventInput:N,TouchMouseInput:S,SingleTouchInput:O,Recognizer:V,AttrRecognizer:Z,Tap:da,Pan:$,Swipe:ca,Pinch:_,Rotate:ba,Press:aa,on:n,off:o,each:g,merge:i,extend:h,inherit:j,bindFn:k,prefixed:v}),typeof define==ka&&define.amd?define(function(){return ea}):"undefined"!=typeof module&&module.exports?module.exports=ea:a[c]=ea}(window,document,"Hammer"),function(a){"function"==typeof define&&define.amd?define(["jquery","hammerjs"],a):"object"==typeof exports?a(require("jquery"),require("hammerjs")):a(jQuery,Hammer)}(function(a,b){function c(c,d){var e=a(c);e.data("hammer")||e.data("hammer",new b(e[0],d))}a.fn.hammer=function(a){return this.each(function(){c(this,a)})},b.Manager.prototype.emit=function(b){return function(c,d){b.call(this,c,d),a(this.element).trigger({type:c,gesture:d})}}(b.Manager.prototype.emit)}),function(a){a.Package?Materialize={}:a.Materialize={}}(window),function(a){for(var b=0,c=["webkit","moz"],d=a.requestAnimationFrame,e=a.cancelAnimationFrame,f=c.length;--f>=0&&!d;)d=a[c[f]+"RequestAnimationFrame"],e=a[c[f]+"CancelRequestAnimationFrame"];d&&e||(d=function(a){var c=+Date.now(),d=Math.max(b+16,c);return setTimeout(function(){a(b=d)},d-c)},e=clearTimeout),a.requestAnimationFrame=d,a.cancelAnimationFrame=e}(window),Materialize.guid=function(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()}}(),Materialize.escapeHash=function(a){return a.replace(/(:|\.|\[|\]|,|=)/g,"\\$1")},Materialize.elementOrParentIsFixed=function(a){var b=$(a),c=b.add(b.parents()),d=!1;return c.each(function(){return"fixed"===$(this).css("position")?(d=!0,!1):void 0}),d};var Vel;Vel=jQuery?jQuery.Velocity:$?$.Velocity:Velocity,function(a){a.fn.collapsible=function(b){var c={accordion:void 0,onOpen:void 0,onClose:void 0};return b=a.extend(c,b),this.each(function(){function c(b){j=i.find("> li > .collapsible-header"),b.hasClass("active")?b.parent().addClass("active"):b.parent().removeClass("active"),b.parent().hasClass("active")?b.siblings(".collapsible-body").stop(!0,!1).slideDown({duration:350,easing:"easeOutQuart",queue:!1,complete:function(){a(this).css("height","")}}):b.siblings(".collapsible-body").stop(!0,!1).slideUp({duration:350,easing:"easeOutQuart",queue:!1,complete:function(){a(this).css("height","")}}),j.not(b).removeClass("active").parent().removeClass("active"),j.not(b).parent().children(".collapsible-body").stop(!0,!1).each(function(){a(this).is(":visible")&&a(this).slideUp({duration:350,easing:"easeOutQuart",queue:!1,complete:function(){a(this).css("height",""),f(a(this).siblings(".collapsible-header"))}})})}function d(b){b.hasClass("active")?b.parent().addClass("active"):b.parent().removeClass("active"),b.parent().hasClass("active")?b.siblings(".collapsible-body").stop(!0,!1).slideDown({duration:350,easing:"easeOutQuart",queue:!1,complete:function(){a(this).css("height","")}}):b.siblings(".collapsible-body").stop(!0,!1).slideUp({duration:350,easing:"easeOutQuart",queue:!1,complete:function(){a(this).css("height","")}})}function e(a){b.accordion||"accordion"===k||void 0===k?c(a):d(a),f(a)}function f(a){a.hasClass("active")?"function"==typeof b.onOpen&&b.onOpen.call(this,a.parent()):"function"==typeof b.onClose&&b.onClose.call(this,a.parent())}function g(a){var b=h(a);return b.length>0}function h(a){return a.closest("li > .collapsible-header")}var i=a(this),j=a(this).find("> li > .collapsible-header"),k=i.data("collapsible");i.off("click.collapse","> li > .collapsible-header"),j.off("click.collapse"),i.on("click.collapse","> li > .collapsible-header",function(b){var c=a(b.target);g(c)&&(c=h(c)),c.toggleClass("active"),e(c)}),b.accordion||"accordion"===k||void 0===k?e(j.filter(".active").first()):j.filter(".active").each(function(){e(a(this))})})},a(document).ready(function(){a(".collapsible").collapsible()})}(jQuery),function(a){a.fn.scrollTo=function(b){return a(this).scrollTop(a(this).scrollTop()-a(this).offset().top+a(b).offset().top),this},a.fn.dropdown=function(b){var c={inDuration:300,outDuration:225,constrain_width:!0,hover:!1,gutter:0,belowOrigin:!1,alignment:"left",stopPropagation:!1};return"open"===b?(this.each(function(){a(this).trigger("open")}),!1):"close"===b?(this.each(function(){a(this).trigger("close")}),!1):void this.each(function(){function d(){void 0!==g.data("induration")&&(h.inDuration=g.data("induration")),void 0!==g.data("outduration")&&(h.outDuration=g.data("outduration")),void 0!==g.data("constrainwidth")&&(h.constrain_width=g.data("constrainwidth")),void 0!==g.data("hover")&&(h.hover=g.data("hover")),void 0!==g.data("gutter")&&(h.gutter=g.data("gutter")),void 0!==g.data("beloworigin")&&(h.belowOrigin=g.data("beloworigin")),void 0!==g.data("alignment")&&(h.alignment=g.data("alignment")),void 0!==g.data("stoppropagation")&&(h.stopPropagation=g.data("stoppropagation"))}function e(b){"focus"===b&&(i=!0),d(),j.addClass("active"),g.addClass("active"),h.constrain_width===!0?j.css("width",g.outerWidth()):j.css("white-space","nowrap");var c=window.innerHeight,e=g.innerHeight(),f=g.offset().left,k=g.offset().top-a(window).scrollTop(),l=h.alignment,m=0,n=0,o=0;h.belowOrigin===!0&&(o=e);var p=0,q=0,r=g.parent();if(r.is("body")||(r[0].scrollHeight>r[0].clientHeight&&(p=r[0].scrollTop),r[0].scrollWidth>r[0].clientWidth&&(q=r[0].scrollLeft)),f+j.innerWidth()>a(window).width()?l="right":f-j.innerWidth()+g.innerWidth()<0&&(l="left"),k+j.innerHeight()>c)if(k+e-j.innerHeight()<0){var s=c-k-o;j.css("max-height",s)}else o||(o+=e),o-=j.innerHeight();if("left"===l)m=h.gutter,n=g.position().left+m;else if("right"===l){var t=g.position().left+g.outerWidth()-j.outerWidth();m=-h.gutter,n=t+m}j.css({position:"absolute",top:g.position().top+o+p,left:n+q}),j.stop(!0,!0).css("opacity",0).slideDown({queue:!1,duration:h.inDuration,easing:"easeOutCubic",complete:function(){a(this).css("height","")}}).animate({opacity:1},{queue:!1,duration:h.inDuration,easing:"easeOutSine"})}function f(){i=!1,j.fadeOut(h.outDuration),j.removeClass("active"),g.removeClass("active"),setTimeout(function(){j.css("max-height","")},h.outDuration)}var g=a(this),h=a.extend({},c,b),i=!1,j=a("#"+g.attr("data-activates"));if(d(),g.after(j),h.hover){var k=!1;g.unbind("click."+g.attr("id")),g.on("mouseenter",function(a){k===!1&&(e(),k=!0)}),g.on("mouseleave",function(b){var c=b.toElement||b.relatedTarget;a(c).closest(".dropdown-content").is(j)||(j.stop(!0,!0),f(),k=!1)}),j.on("mouseleave",function(b){var c=b.toElement||b.relatedTarget;a(c).closest(".dropdown-button").is(g)||(j.stop(!0,!0),f(),k=!1)})}else g.unbind("click."+g.attr("id")),g.bind("click."+g.attr("id"),function(b){i||(g[0]!=b.currentTarget||g.hasClass("active")||0!==a(b.target).closest(".dropdown-content").length?g.hasClass("active")&&(f(),a(document).unbind("click."+j.attr("id")+" touchstart."+j.attr("id"))):(b.preventDefault(),h.stopPropagation&&b.stopPropagation(),e("click")),j.hasClass("active")&&a(document).bind("click."+j.attr("id")+" touchstart."+j.attr("id"),function(b){j.is(b.target)||g.is(b.target)||g.find(b.target).length||(f(),a(document).unbind("click."+j.attr("id")+" touchstart."+j.attr("id")))}))});g.on("open",function(a,b){e(b)}),g.on("close",f)})},a(document).ready(function(){a(".dropdown-button").dropdown()})}(jQuery),function(a){var b=0,c=0,d=function(){return c++,"materialize-modal-overlay-"+c},e={init:function(c){var e={opacity:.5,in_duration:350,out_duration:250,ready:void 0,complete:void 0,dismissible:!0,starting_top:"4%",ending_top:"10%"};return c=a.extend(e,c),this.each(function(){var e=a(this),f=a(this).attr("id")||"#"+a(this).data("target"),g=function(){var d=e.data("overlay-id"),f=a("#"+d);e.removeClass("open"),a("body").css({overflow:"",width:""}),e.find(".modal-close").off("click.close"),a(document).off("keyup.modal"+d),f.velocity({opacity:0},{duration:c.out_duration,queue:!1,ease:"easeOutQuart"});var g={
duration:c.out_duration,queue:!1,ease:"easeOutCubic",complete:function(){a(this).css({display:"none"}),"function"==typeof c.complete&&c.complete.call(this,e),f.remove(),b--}};e.hasClass("bottom-sheet")?e.velocity({bottom:"-100%",opacity:0},g):e.velocity({top:c.starting_top,opacity:0,scaleX:.7},g)},h=function(f){var h=a("body"),i=h.innerWidth();if(h.css("overflow","hidden"),h.width(i),!e.hasClass("open")){var j=d(),k=a('<div class="modal-overlay"></div>');lStack=++b,k.attr("id",j).css("z-index",1e3+2*lStack),e.data("overlay-id",j).css("z-index",1e3+2*lStack+1),e.addClass("open"),a("body").append(k),c.dismissible&&(k.click(function(){g()}),a(document).on("keyup.modal"+j,function(a){27===a.keyCode&&g()})),e.find(".modal-close").on("click.close",function(a){g()}),k.css({display:"block",opacity:0}),e.css({display:"block",opacity:0}),k.velocity({opacity:c.opacity},{duration:c.in_duration,queue:!1,ease:"easeOutCubic"}),e.data("associated-overlay",k[0]);var l={duration:c.in_duration,queue:!1,ease:"easeOutCubic",complete:function(){"function"==typeof c.ready&&c.ready.call(this,e,f)}};e.hasClass("bottom-sheet")?e.velocity({bottom:"0",opacity:1},l):(a.Velocity.hook(e,"scaleX",.7),e.css({top:c.starting_top}),e.velocity({top:c.ending_top,opacity:1,scaleX:"1"},l))}};a(document).off("click.modalTrigger",'a[href="#'+f+'"], [data-target="'+f+'"]'),a(this).off("openModal"),a(this).off("closeModal"),a(document).on("click.modalTrigger",'a[href="#'+f+'"], [data-target="'+f+'"]',function(b){c.starting_top=(a(this).offset().top-a(window).scrollTop())/1.15,h(a(this)),b.preventDefault()}),a(this).on("openModal",function(){a(this).attr("href")||"#"+a(this).data("target");h()}),a(this).on("closeModal",function(){g()})})},open:function(){a(this).trigger("openModal")},close:function(){a(this).trigger("closeModal")}};a.fn.modal=function(b){return e[b]?e[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?void a.error("Method "+b+" does not exist on jQuery.modal"):e.init.apply(this,arguments)}}(jQuery),function(a){a.fn.materialbox=function(){return this.each(function(){function b(){f=!1;var b=i.parent(".material-placeholder"),d=(window.innerWidth,window.innerHeight,i.data("width")),g=i.data("height");i.velocity("stop",!0),a("#materialbox-overlay").velocity("stop",!0),a(".materialbox-caption").velocity("stop",!0),a("#materialbox-overlay").velocity({opacity:0},{duration:h,queue:!1,easing:"easeOutQuad",complete:function(){e=!1,a(this).remove()}}),i.velocity({width:d,height:g,left:0,top:0},{duration:h,queue:!1,easing:"easeOutQuad"}),a(".materialbox-caption").velocity({opacity:0},{duration:h,queue:!1,easing:"easeOutQuad",complete:function(){b.css({height:"",width:"",position:"",top:"",left:""}),i.css({height:"",top:"",left:"",width:"","max-width":"",position:"","z-index":""}),i.removeClass("active"),f=!0,a(this).remove(),c&&c.css("overflow","")}})}if(!a(this).hasClass("initialized")){a(this).addClass("initialized");var c,d,e=!1,f=!0,g=275,h=200,i=a(this),j=a("<div></div>").addClass("material-placeholder");i.wrap(j),i.on("click",function(){var h=i.parent(".material-placeholder"),j=window.innerWidth,k=window.innerHeight,l=i.width(),m=i.height();if(f===!1)return b(),!1;if(e&&f===!0)return b(),!1;f=!1,i.addClass("active"),e=!0,h.css({width:h[0].getBoundingClientRect().width,height:h[0].getBoundingClientRect().height,position:"relative",top:0,left:0}),c=void 0,d=h[0].parentNode;for(;null!==d&&!a(d).is(document);){var n=a(d);"visible"!==n.css("overflow")&&(n.css("overflow","visible"),c=void 0===c?n:c.add(n)),d=d.parentNode}i.css({position:"absolute","z-index":1e3}).data("width",l).data("height",m);var o=a('<div id="materialbox-overlay"></div>').css({opacity:0}).click(function(){f===!0&&b()});if(i.before(o),o.velocity({opacity:1},{duration:g,queue:!1,easing:"easeOutQuad"}),""!==i.data("caption")){var p=a('<div class="materialbox-caption"></div>');p.text(i.data("caption")),a("body").append(p),p.css({display:"inline"}),p.velocity({opacity:1},{duration:g,queue:!1,easing:"easeOutQuad"})}var q=0,r=l/j,s=m/k,t=0,u=0;r>s?(q=m/l,t=.9*j,u=.9*j*q):(q=l/m,t=.9*k*q,u=.9*k),i.hasClass("responsive-img")?i.velocity({"max-width":t,width:l},{duration:0,queue:!1,complete:function(){i.css({left:0,top:0}).velocity({height:u,width:t,left:a(document).scrollLeft()+j/2-i.parent(".material-placeholder").offset().left-t/2,top:a(document).scrollTop()+k/2-i.parent(".material-placeholder").offset().top-u/2},{duration:g,queue:!1,easing:"easeOutQuad",complete:function(){f=!0}})}}):i.css("left",0).css("top",0).velocity({height:u,width:t,left:a(document).scrollLeft()+j/2-i.parent(".material-placeholder").offset().left-t/2,top:a(document).scrollTop()+k/2-i.parent(".material-placeholder").offset().top-u/2},{duration:g,queue:!1,easing:"easeOutQuad",complete:function(){f=!0}})}),a(window).scroll(function(){e&&b()}),a(document).keyup(function(a){27===a.keyCode&&f===!0&&e&&b()})}})},a(document).ready(function(){a(".materialboxed").materialbox()})}(jQuery),function(a){a.fn.parallax=function(){var b=a(window).width();return this.each(function(c){function d(c){var d;d=601>b?e.height()>0?e.height():e.children("img").height():e.height()>0?e.height():500;var f=e.children("img").first(),g=f.height(),h=g-d,i=e.offset().top+d,j=e.offset().top,k=a(window).scrollTop(),l=window.innerHeight,m=k+l,n=(m-j)/(d+l),o=Math.round(h*n);c&&f.css("display","block"),i>k&&k+l>j&&f.css("transform","translate3D(-50%,"+o+"px, 0)")}var e=a(this);e.addClass("parallax"),e.children("img").one("load",function(){d(!0)}).each(function(){this.complete&&a(this).trigger("load")}),a(window).scroll(function(){b=a(window).width(),d(!1)}),a(window).resize(function(){b=a(window).width(),d(!1)})})}}(jQuery),function(a){var b={init:function(b){var c={onShow:null};return b=a.extend(c,b),this.each(function(){var c,d,e=a(this),f=(a(window).width(),e.find("li.tab a")),g=e.width(),h=Math.max(g,e[0].scrollWidth)/f.length,i=0,j=function(a){return g-a.position().left-a.outerWidth()-e.scrollLeft()},k=function(a){return a.position().left+e.scrollLeft()};c=a(f.filter('[href="'+location.hash+'"]')),0===c.length&&(c=a(this).find("li.tab a.active").first()),0===c.length&&(c=a(this).find("li.tab a").first()),c.addClass("active"),i=f.index(c),0>i&&(i=0),void 0!==c[0]&&(d=a(c[0].hash)),e.append('<div class="indicator"></div>');var l=e.find(".indicator");e.is(":visible")&&setTimeout(function(){l.css({right:j(c)}),l.css({left:k(c)})},0),a(window).resize(function(){g=e.width(),h=Math.max(g,e[0].scrollWidth)/f.length,0>i&&(i=0),0!==h&&0!==g&&(l.css({right:j(c)}),l.css({left:k(c)}))}),f.not(c).each(function(){a(Materialize.escapeHash(this.hash)).hide()}),e.on("click","a",function(m){if(a(this).parent().hasClass("disabled"))return void m.preventDefault();if(!a(this).attr("target")){g=e.width(),h=Math.max(g,e[0].scrollWidth)/f.length,c.removeClass("active"),void 0!==d&&d.hide(),c=a(this),d=a(Materialize.escapeHash(this.hash)),f=e.find("li.tab a");c.position();c.addClass("active");var n=i;i=f.index(a(this)),0>i&&(i=0),void 0!==d&&(d.show(),"function"==typeof b.onShow&&b.onShow.call(this,d)),i-n>=0?(l.velocity({right:j(c)},{duration:300,queue:!1,easing:"easeOutQuad"}),l.velocity({left:k(c)},{duration:300,queue:!1,easing:"easeOutQuad",delay:90})):(l.velocity({left:k(c)},{duration:300,queue:!1,easing:"easeOutQuad"}),l.velocity({right:j(c)},{duration:300,queue:!1,easing:"easeOutQuad",delay:90})),m.preventDefault()}})})},select_tab:function(a){this.find('a[href="#'+a+'"]').trigger("click")}};a.fn.tabs=function(c){return b[c]?b[c].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof c&&c?void a.error("Method "+c+" does not exist on jQuery.tabs"):b.init.apply(this,arguments)},a(document).ready(function(){a("ul.tabs").tabs()})}(jQuery),function(a){a.fn.tooltip=function(c){var d=5,e={delay:350,tooltip:"",position:"bottom",html:!1};return"remove"===c?(this.each(function(){a("#"+a(this).attr("data-tooltip-id")).remove(),a(this).off("mouseenter.tooltip mouseleave.tooltip")}),!1):(c=a.extend(e,c),this.each(function(){var e=Materialize.guid(),f=a(this);f.attr("data-tooltip-id")&&a("#"+f.attr("data-tooltip-id")).remove(),f.attr("data-tooltip-id",e);var g,h,i,j,k,l,m=function(){g=f.attr("data-html")?"true"===f.attr("data-html"):c.html,h=f.attr("data-delay"),h=void 0===h||""===h?c.delay:h,i=f.attr("data-position"),i=void 0===i||""===i?c.position:i,j=f.attr("data-tooltip"),j=void 0===j||""===j?c.tooltip:j};m();var n=function(){var b=a('<div class="material-tooltip"></div>');return j=g?a("<span></span>").html(j):a("<span></span>").text(j),b.append(j).appendTo(a("body")).attr("id",e),l=a('<div class="backdrop"></div>'),l.appendTo(b),b};k=n(),f.off("mouseenter.tooltip mouseleave.tooltip");var o,p=!1;f.on({"mouseenter.tooltip":function(a){var c=function(){m(),p=!0,k.velocity("stop"),l.velocity("stop"),k.css({display:"block",left:"0px",top:"0px"});var a,c,e,g=f.outerWidth(),h=f.outerHeight(),j=k.outerHeight(),n=k.outerWidth(),o="0px",q="0px",r=8,s=8;"top"===i?(a=f.offset().top-j-d,c=f.offset().left+g/2-n/2,e=b(c,a,n,j),o="-10px",l.css({bottom:0,left:0,borderRadius:"14px 14px 0 0",transformOrigin:"50% 100%",marginTop:j,marginLeft:n/2-l.width()/2})):"left"===i?(a=f.offset().top+h/2-j/2,c=f.offset().left-n-d,e=b(c,a,n,j),q="-10px",l.css({top:"-7px",right:0,width:"14px",height:"14px",borderRadius:"14px 0 0 14px",transformOrigin:"95% 50%",marginTop:j/2,marginLeft:n})):"right"===i?(a=f.offset().top+h/2-j/2,c=f.offset().left+g+d,e=b(c,a,n,j),q="+10px",l.css({top:"-7px",left:0,width:"14px",height:"14px",borderRadius:"0 14px 14px 0",transformOrigin:"5% 50%",marginTop:j/2,marginLeft:"0px"})):(a=f.offset().top+f.outerHeight()+d,c=f.offset().left+g/2-n/2,e=b(c,a,n,j),o="+10px",l.css({top:0,left:0,marginLeft:n/2-l.width()/2})),k.css({top:e.y,left:e.x}),r=Math.SQRT2*n/parseInt(l.css("width")),s=Math.SQRT2*j/parseInt(l.css("height")),k.velocity({marginTop:o,marginLeft:q},{duration:350,queue:!1}).velocity({opacity:1},{duration:300,delay:50,queue:!1}),l.css({display:"block"}).velocity({opacity:1},{duration:55,delay:0,queue:!1}).velocity({scaleX:r,scaleY:s},{duration:300,delay:0,queue:!1,easing:"easeInOutQuad"})};o=setTimeout(c,h)},"mouseleave.tooltip":function(){p=!1,clearTimeout(o),setTimeout(function(){p!==!0&&(k.velocity({opacity:0,marginTop:0,marginLeft:0},{duration:225,queue:!1}),l.velocity({opacity:0,scaleX:1,scaleY:1},{duration:225,queue:!1,complete:function(){l.css("display","none"),k.css("display","none"),p=!1}}))},225)}})}))};var b=function(b,c,d,e){var f=b,g=c;return 0>f?f=4:f+d>window.innerWidth&&(f-=f+d-window.innerWidth),0>g?g=4:g+e>window.innerHeight+a(window).scrollTop&&(g-=g+e-window.innerHeight),{x:f,y:g}};a(document).ready(function(){a(".tooltipped").tooltip()})}(jQuery),function(a){"use strict";function b(a){return null!==a&&a===a.window}function c(a){return b(a)?a:9===a.nodeType&&a.defaultView}function d(a){var b,d,e={top:0,left:0},f=a&&a.ownerDocument;return b=f.documentElement,"undefined"!=typeof a.getBoundingClientRect&&(e=a.getBoundingClientRect()),d=c(f),{top:e.top+d.pageYOffset-b.clientTop,left:e.left+d.pageXOffset-b.clientLeft}}function e(a){var b="";for(var c in a)a.hasOwnProperty(c)&&(b+=c+":"+a[c]+";");return b}function f(a){if(k.allowEvent(a)===!1)return null;for(var b=null,c=a.target||a.srcElement;null!==c.parentElement;){if(!(c instanceof SVGElement||-1===c.className.indexOf("waves-effect"))){b=c;break}if(c.classList.contains("waves-effect")){b=c;break}c=c.parentElement}return b}function g(b){var c=f(b);null!==c&&(j.show(b,c),"ontouchstart"in a&&(c.addEventListener("touchend",j.hide,!1),c.addEventListener("touchcancel",j.hide,!1)),c.addEventListener("mouseup",j.hide,!1),c.addEventListener("mouseleave",j.hide,!1))}var h=h||{},i=document.querySelectorAll.bind(document),j={duration:750,show:function(a,b){if(2===a.button)return!1;var c=b||this,f=document.createElement("div");f.className="waves-ripple",c.appendChild(f);var g=d(c),h=a.pageY-g.top,i=a.pageX-g.left,k="scale("+c.clientWidth/100*10+")";"touches"in a&&(h=a.touches[0].pageY-g.top,i=a.touches[0].pageX-g.left),f.setAttribute("data-hold",Date.now()),f.setAttribute("data-scale",k),f.setAttribute("data-x",i),f.setAttribute("data-y",h);var l={top:h+"px",left:i+"px"};f.className=f.className+" waves-notransition",f.setAttribute("style",e(l)),f.className=f.className.replace("waves-notransition",""),l["-webkit-transform"]=k,l["-moz-transform"]=k,l["-ms-transform"]=k,l["-o-transform"]=k,l.transform=k,l.opacity="1",l["-webkit-transition-duration"]=j.duration+"ms",l["-moz-transition-duration"]=j.duration+"ms",l["-o-transition-duration"]=j.duration+"ms",l["transition-duration"]=j.duration+"ms",l["-webkit-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",l["-moz-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",l["-o-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",l["transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",f.setAttribute("style",e(l))},hide:function(a){k.touchup(a);var b=this,c=(1.4*b.clientWidth,null),d=b.getElementsByClassName("waves-ripple");if(!(d.length>0))return!1;c=d[d.length-1];var f=c.getAttribute("data-x"),g=c.getAttribute("data-y"),h=c.getAttribute("data-scale"),i=Date.now()-Number(c.getAttribute("data-hold")),l=350-i;0>l&&(l=0),setTimeout(function(){var a={top:g+"px",left:f+"px",opacity:"0","-webkit-transition-duration":j.duration+"ms","-moz-transition-duration":j.duration+"ms","-o-transition-duration":j.duration+"ms","transition-duration":j.duration+"ms","-webkit-transform":h,"-moz-transform":h,"-ms-transform":h,"-o-transform":h,transform:h};c.setAttribute("style",e(a)),setTimeout(function(){try{b.removeChild(c)}catch(a){return!1}},j.duration)},l)},wrapInput:function(a){for(var b=0;b<a.length;b++){var c=a[b];if("input"===c.tagName.toLowerCase()){var d=c.parentNode;if("i"===d.tagName.toLowerCase()&&-1!==d.className.indexOf("waves-effect"))continue;var e=document.createElement("i");e.className=c.className+" waves-input-wrapper";var f=c.getAttribute("style");f||(f=""),e.setAttribute("style",f),c.className="waves-button-input",c.removeAttribute("style"),d.replaceChild(e,c),e.appendChild(c)}}}},k={touches:0,allowEvent:function(a){var b=!0;return"touchstart"===a.type?k.touches+=1:"touchend"===a.type||"touchcancel"===a.type?setTimeout(function(){k.touches>0&&(k.touches-=1)},500):"mousedown"===a.type&&k.touches>0&&(b=!1),b},touchup:function(a){k.allowEvent(a)}};h.displayEffect=function(b){b=b||{},"duration"in b&&(j.duration=b.duration),j.wrapInput(i(".waves-effect")),"ontouchstart"in a&&document.body.addEventListener("touchstart",g,!1),document.body.addEventListener("mousedown",g,!1)},h.attach=function(b){"input"===b.tagName.toLowerCase()&&(j.wrapInput([b]),b=b.parentElement),"ontouchstart"in a&&b.addEventListener("touchstart",g,!1),b.addEventListener("mousedown",g,!1)},a.Waves=h,document.addEventListener("DOMContentLoaded",function(){h.displayEffect()},!1)}(window),Materialize.toast=function(a,b,c,d){function e(a){var b=document.createElement("div");if(b.classList.add("toast"),c)for(var e=c.split(" "),f=0,g=e.length;g>f;f++)b.classList.add(e[f]);("object"==typeof HTMLElement?a instanceof HTMLElement:a&&"object"==typeof a&&null!==a&&1===a.nodeType&&"string"==typeof a.nodeName)?b.appendChild(a):a instanceof jQuery?b.appendChild(a[0]):b.innerHTML=a;var h=new Hammer(b,{prevent_default:!1});return h.on("pan",function(a){var c=a.deltaX,d=80;b.classList.contains("panning")||b.classList.add("panning");var e=1-Math.abs(c/d);0>e&&(e=0),Vel(b,{left:c,opacity:e},{duration:50,queue:!1,easing:"easeOutQuad"})}),h.on("panend",function(a){var c=a.deltaX,e=80;Math.abs(c)>e?Vel(b,{marginTop:"-40px"},{duration:375,easing:"easeOutExpo",queue:!1,complete:function(){"function"==typeof d&&d(),b.parentNode.removeChild(b)}}):(b.classList.remove("panning"),Vel(b,{left:0,opacity:1},{duration:300,easing:"easeOutExpo",queue:!1}))}),b}c=c||"";var f=document.getElementById("toast-container");null===f&&(f=document.createElement("div"),f.id="toast-container",document.body.appendChild(f));var g=e(a);a&&f.appendChild(g),g.style.top="35px",g.style.opacity=0,Vel(g,{top:"0px",opacity:1},{duration:300,easing:"easeOutCubic",queue:!1});var h,i=b;null!=i&&(h=setInterval(function(){null===g.parentNode&&window.clearInterval(h),g.classList.contains("panning")||(i-=20),0>=i&&(Vel(g,{opacity:0,marginTop:"-40px"},{duration:375,easing:"easeOutExpo",queue:!1,complete:function(){"function"==typeof d&&d(),this[0].parentNode.removeChild(this[0])}}),window.clearInterval(h))},20))},function(a){var b={init:function(b){var c={menuWidth:300,edge:"left",closeOnClick:!1,draggable:!0};b=a.extend(c,b),a(this).each(function(){var c=a(this),d=a("#"+c.attr("data-activates"));300!=b.menuWidth&&d.css("width",b.menuWidth);var e;b.draggable?(e=a('<div class="drag-target"></div>').attr("data-sidenav",c.attr("data-activates")),a("body").append(e)):e=a(),"left"==b.edge?(d.css("transform","translateX(-100%)"),e.css({left:0})):(d.addClass("right-aligned").css("transform","translateX(100%)"),e.css({right:0})),d.hasClass("fixed")&&window.innerWidth>992&&d.css("transform","translateX(0)"),d.hasClass("fixed")&&a(window).resize(function(){window.innerWidth>992?0!==a("#sidenav-overlay").length&&h?f(!0):d.css("transform","translateX(0%)"):h===!1&&("left"===b.edge?d.css("transform","translateX(-100%)"):d.css("transform","translateX(100%)"))}),b.closeOnClick===!0&&d.on("click.itemclick","a:not(.collapsible-header)",function(){f()});var f=function(c){g=!1,h=!1,a("body").css({overflow:"",width:""}),a("#sidenav-overlay").velocity({opacity:0},{duration:200,queue:!1,easing:"easeOutQuad",complete:function(){a(this).remove()}}),"left"===b.edge?(e.css({width:"",right:"",left:"0"}),d.velocity({translateX:"-100%"},{duration:200,queue:!1,easing:"easeOutCubic",complete:function(){c===!0&&(d.removeAttr("style"),d.css("width",b.menuWidth))}})):(e.css({width:"",right:"0",left:""}),d.velocity({translateX:"100%"},{duration:200,queue:!1,easing:"easeOutCubic",complete:function(){c===!0&&(d.removeAttr("style"),d.css("width",b.menuWidth))}}))},g=!1,h=!1;b.draggable&&(e.on("click",function(){h&&f()}),e.hammer({prevent_default:!1}).bind("pan",function(c){if("touch"==c.gesture.pointerType){var e=(c.gesture.direction,c.gesture.center.x),g=(c.gesture.center.y,c.gesture.velocityX,a("body")),i=a("#sidenav-overlay"),j=g.innerWidth();if(g.css("overflow","hidden"),g.width(j),0===i.length&&(i=a('<div id="sidenav-overlay"></div>'),i.css("opacity",0).click(function(){f()}),a("body").append(i)),"left"===b.edge&&(e>b.menuWidth?e=b.menuWidth:0>e&&(e=0)),"left"===b.edge)e<b.menuWidth/2?h=!1:e>=b.menuWidth/2&&(h=!0),d.css("transform","translateX("+(e-b.menuWidth)+"px)");else{e<window.innerWidth-b.menuWidth/2?h=!0:e>=window.innerWidth-b.menuWidth/2&&(h=!1);var k=e-b.menuWidth/2;0>k&&(k=0),d.css("transform","translateX("+k+"px)")}var l;"left"===b.edge?(l=e/b.menuWidth,i.velocity({opacity:l},{duration:10,queue:!1,easing:"easeOutQuad"})):(l=Math.abs((e-window.innerWidth)/b.menuWidth),i.velocity({opacity:l},{duration:10,queue:!1,easing:"easeOutQuad"}))}}).bind("panend",function(c){if("touch"==c.gesture.pointerType){var f=a('<div id="sidenav-overlay"></div>'),i=c.gesture.velocityX,j=c.gesture.center.x,k=j-b.menuWidth,l=j-b.menuWidth/2;k>0&&(k=0),0>l&&(l=0),g=!1,"left"===b.edge?h&&.3>=i||-.5>i?(0!==k&&d.velocity({translateX:[0,k]},{duration:300,queue:!1,easing:"easeOutQuad"}),f.velocity({opacity:1},{duration:50,queue:!1,easing:"easeOutQuad"}),e.css({width:"50%",right:0,left:""}),h=!0):(!h||i>.3)&&(a("body").css({overflow:"",width:""}),d.velocity({translateX:[-1*b.menuWidth-10,k]},{duration:200,queue:!1,easing:"easeOutQuad"}),f.velocity({opacity:0},{duration:200,queue:!1,easing:"easeOutQuad",complete:function(){a(this).remove()}}),e.css({width:"10px",right:"",left:0})):h&&i>=-.3||i>.5?(0!==l&&d.velocity({translateX:[0,l]},{duration:300,queue:!1,easing:"easeOutQuad"}),f.velocity({opacity:1},{duration:50,queue:!1,easing:"easeOutQuad"}),e.css({width:"50%",right:"",left:0}),h=!0):(!h||-.3>i)&&(a("body").css({overflow:"",width:""}),d.velocity({translateX:[b.menuWidth+10,l]},{duration:200,queue:!1,easing:"easeOutQuad"}),f.velocity({opacity:0},{duration:200,queue:!1,easing:"easeOutQuad",complete:function(){a(this).remove()}}),e.css({width:"10px",right:0,left:""}))}})),c.click(function(){if(h===!0)h=!1,g=!1,f();else{var c=a("body"),i=a('<div id="sidenav-overlay"></div>'),j=c.innerWidth();c.css("overflow","hidden"),c.width(j),a("body").append(e),"left"===b.edge?(e.css({width:"50%",right:0,left:""}),d.velocity({translateX:[0,-1*b.menuWidth]},{duration:300,queue:!1,easing:"easeOutQuad"})):(e.css({width:"50%",right:"",left:0}),d.velocity({translateX:[0,b.menuWidth]},{duration:300,queue:!1,easing:"easeOutQuad"})),i.css("opacity",0).click(function(){h=!1,g=!1,f(),i.velocity({opacity:0},{duration:300,queue:!1,easing:"easeOutQuad",complete:function(){a(this).remove()}})}),a("body").append(i),i.velocity({opacity:1},{duration:300,queue:!1,easing:"easeOutQuad",complete:function(){h=!0,g=!1}})}return!1})})},destroy:function(){var b=a("#sidenav-overlay"),c=a('.drag-target[data-sidenav="'+a(this).attr("data-activates")+'"]');b.trigger("click"),c.remove(),a(this).off("click"),b.remove()},show:function(){this.trigger("click")},hide:function(){a("#sidenav-overlay").trigger("click")}};a.fn.sideNav=function(c){return b[c]?b[c].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof c&&c?void a.error("Method "+c+" does not exist on jQuery.sideNav"):b.init.apply(this,arguments)}}(jQuery),function(a){function b(b,c,d,e){var f=a();return a.each(g,function(a,g){if(g.height()>0){var h=g.offset().top,i=g.offset().left,j=i+g.width(),k=h+g.height(),l=!(i>c||e>j||h>d||b>k);l&&f.push(g)}}),f}function c(c){++j;var d=f.scrollTop(),e=f.scrollLeft(),g=e+f.width(),i=d+f.height(),l=b(d+k.top+c||200,g+k.right,i+k.bottom,e+k.left);a.each(l,function(a,b){var c=b.data("scrollSpy:ticks");"number"!=typeof c&&b.triggerHandler("scrollSpy:enter"),b.data("scrollSpy:ticks",j)}),a.each(h,function(a,b){var c=b.data("scrollSpy:ticks");"number"==typeof c&&c!==j&&(b.triggerHandler("scrollSpy:exit"),b.data("scrollSpy:ticks",null))}),h=l}function d(){f.trigger("scrollSpy:winSize")}function e(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:l(),g=null,f=a.apply(d,e),d=e=null};return function(){var j=l();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k?(clearTimeout(g),g=null,h=j,f=a.apply(d,e),d=e=null):g||c.trailing===!1||(g=setTimeout(i,k)),f}}var f=a(window),g=[],h=[],i=!1,j=0,k={top:0,right:0,bottom:0,left:0},l=Date.now||function(){return(new Date).getTime()};a.scrollSpy=function(b,d){var h={throttle:100,scrollOffset:200};d=a.extend(h,d);var j=[];b=a(b),b.each(function(b,c){g.push(a(c)),a(c).data("scrollSpy:id",b),a('a[href="#'+a(c).attr("id")+'"]').click(function(b){b.preventDefault();var c=a(Materialize.escapeHash(this.hash)).offset().top+1;a("html, body").animate({scrollTop:c-d.scrollOffset},{duration:400,queue:!1,easing:"easeOutCubic"})})}),k.top=d.offsetTop||0,k.right=d.offsetRight||0,k.bottom=d.offsetBottom||0,k.left=d.offsetLeft||0;var l=e(function(){c(d.scrollOffset)},d.throttle||100),m=function(){a(document).ready(l)};return i||(f.on("scroll",m),f.on("resize",m),i=!0),setTimeout(m,0),b.on("scrollSpy:enter",function(){j=a.grep(j,function(a){return 0!=a.height()});var b=a(this);j[0]?(a('a[href="#'+j[0].attr("id")+'"]').removeClass("active"),b.data("scrollSpy:id")<j[0].data("scrollSpy:id")?j.unshift(a(this)):j.push(a(this))):j.push(a(this)),a('a[href="#'+j[0].attr("id")+'"]').addClass("active")}),b.on("scrollSpy:exit",function(){if(j=a.grep(j,function(a){return 0!=a.height()}),j[0]){a('a[href="#'+j[0].attr("id")+'"]').removeClass("active");var b=a(this);j=a.grep(j,function(a){return a.attr("id")!=b.attr("id")}),j[0]&&a('a[href="#'+j[0].attr("id")+'"]').addClass("active")}}),b},a.winSizeSpy=function(b){return a.winSizeSpy=function(){return f},b=b||{throttle:100},f.on("resize",e(d,b.throttle||100))},a.fn.scrollSpy=function(b){return a.scrollSpy(a(this),b)}}(jQuery),function(a){a(document).ready(function(){function b(b){var c=b.css("font-family"),d=b.css("font-size"),f=b.css("line-height");d&&e.css("font-size",d),c&&e.css("font-family",c),f&&e.css("line-height",f),"off"===b.attr("wrap")&&e.css("overflow-wrap","normal").css("white-space","pre"),e.text(b.val()+"\n");var g=e.html().replace(/\n/g,"<br>");e.html(g),b.is(":visible")?e.css("width",b.width()):e.css("width",a(window).width()/2),b.css("height",e.height())}Materialize.updateTextFields=function(){var b="input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], textarea";a(b).each(function(b,c){a(c).val().length>0||c.autofocus||void 0!==a(this).attr("placeholder")||a(c)[0].validity.badInput===!0?a(this).siblings("label").addClass("active"):a(this).siblings("label").removeClass("active")})};var c="input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], textarea";a(document).on("change",c,function(){(0!==a(this).val().length||void 0!==a(this).attr("placeholder"))&&a(this).siblings("label").addClass("active"),validate_field(a(this))}),a(document).ready(function(){Materialize.updateTextFields()}),a(document).on("reset",function(b){var d=a(b.target);d.is("form")&&(d.find(c).removeClass("valid").removeClass("invalid"),d.find(c).each(function(){""===a(this).attr("value")&&a(this).siblings("label").removeClass("active")}),d.find("select.initialized").each(function(){var a=d.find("option[selected]").text();d.siblings("input.select-dropdown").val(a)}))}),a(document).on("focus",c,function(){a(this).siblings("label, .prefix").addClass("active")}),a(document).on("blur",c,function(){var b=a(this),c=".prefix";0===b.val().length&&b[0].validity.badInput!==!0&&void 0===b.attr("placeholder")&&(c+=", label"),b.siblings(c).removeClass("active"),validate_field(b)}),window.validate_field=function(a){var b=void 0!==a.attr("length"),c=parseInt(a.attr("length")),d=a.val().length;0===a.val().length&&a[0].validity.badInput===!1?a.hasClass("validate")&&(a.removeClass("valid"),a.removeClass("invalid")):a.hasClass("validate")&&(a.is(":valid")&&b&&c>=d||a.is(":valid")&&!b?(a.removeClass("invalid"),a.addClass("valid")):(a.removeClass("valid"),a.addClass("invalid")))};var d="input[type=radio], input[type=checkbox]";a(document).on("keyup.radio",d,function(b){if(9===b.which){a(this).addClass("tabbed");var c=a(this);return void c.one("blur",function(b){a(this).removeClass("tabbed")})}});var e=a(".hiddendiv").first();e.length||(e=a('<div class="hiddendiv common"></div>'),a("body").append(e));var f=".materialize-textarea";a(f).each(function(){var c=a(this);c.val().length&&b(c)}),a("body").on("keyup keydown autoresize",f,function(){b(a(this))}),a(document).on("change",'.file-field input[type="file"]',function(){for(var b=a(this).closest(".file-field"),c=b.find("input.file-path"),d=a(this)[0].files,e=[],f=0;f<d.length;f++)e.push(d[f].name);c.val(e.join(", ")),c.trigger("change")});var g,h="input[type=range]",i=!1;a(h).each(function(){var b=a('<span class="thumb"><span class="value"></span></span>');a(this).after(b)});var j=".range-field";a(document).on("change",h,function(b){var c=a(this).siblings(".thumb");c.find(".value").html(a(this).val())}),a(document).on("input mousedown touchstart",h,function(b){var c=a(this).siblings(".thumb"),d=a(this).outerWidth();c.length<=0&&(c=a('<span class="thumb"><span class="value"></span></span>'),a(this).after(c)),c.find(".value").html(a(this).val()),i=!0,a(this).addClass("active"),c.hasClass("active")||c.velocity({height:"30px",width:"30px",top:"-20px",marginLeft:"-15px"},{duration:300,easing:"easeOutExpo"}),"input"!==b.type&&(g=void 0===b.pageX||null===b.pageX?b.originalEvent.touches[0].pageX-a(this).offset().left:b.pageX-a(this).offset().left,0>g?g=0:g>d&&(g=d),c.addClass("active").css("left",g)),c.find(".value").html(a(this).val())}),a(document).on("mouseup touchend",j,function(){i=!1,a(this).removeClass("active")}),a(document).on("mousemove touchmove",j,function(b){var c,d=a(this).children(".thumb");if(i){d.hasClass("active")||d.velocity({height:"30px",width:"30px",top:"-20px",marginLeft:"-15px"},{duration:300,easing:"easeOutExpo"}),c=void 0===b.pageX||null===b.pageX?b.originalEvent.touches[0].pageX-a(this).offset().left:b.pageX-a(this).offset().left;var e=a(this).outerWidth();0>c?c=0:c>e&&(c=e),d.addClass("active").css("left",c),d.find(".value").html(d.siblings(h).val())}}),a(document).on("mouseout touchleave",j,function(){if(!i){var b=a(this).children(".thumb");b.hasClass("active")&&b.velocity({height:"0",width:"0",top:"10px",marginLeft:"-6px"},{duration:100}),b.removeClass("active")}}),a.fn.autocomplete=function(b){var c={data:{}};return b=a.extend(c,b),this.each(function(){var c=a(this),d=b.data,e=c.closest(".input-field");if(!a.isEmptyObject(d)){var f=a('<ul class="autocomplete-content dropdown-content"></ul>');e.length?e.append(f):c.after(f);var g=function(a,b){var c=b.find("img"),d=b.text().toLowerCase().indexOf(""+a.toLowerCase()),e=d+a.length-1,f=b.text().slice(0,d),g=b.text().slice(d,e+1),h=b.text().slice(e+1);b.html("<span>"+f+"<span class='highlight'>"+g+"</span>"+h+"</span>"),c.length&&b.prepend(c)};c.on("keyup",function(b){if(13===b.which)return void f.find("li").first().click();var e=c.val().toLowerCase();if(f.empty(),""!==e)for(var h in d)if(d.hasOwnProperty(h)&&-1!==h.toLowerCase().indexOf(e)&&h.toLowerCase()!==e){var i=a("<li></li>");d[h]?i.append('<img src="'+d[h]+'" class="right circle"><span>'+h+"</span>"):i.append("<span>"+h+"</span>"),f.append(i),g(e,i)}}),f.on("click","li",function(){c.val(a(this).text().trim()),c.trigger("change"),f.empty()})}})}}),a.fn.material_select=function(b){function c(a,b,c){var e=a.indexOf(b),f=-1===e;return f?a.push(b):a.splice(e,1),c.siblings("ul.dropdown-content").find("li").eq(b).toggleClass("active"),c.find("option").eq(b).prop("selected",f),d(a,c),f}function d(a,b){for(var c="",d=0,e=a.length;e>d;d++){var f=b.find("option").eq(a[d]).text();c+=0===d?f:", "+f}""===c&&(c=b.find("option:disabled").eq(0).text()),b.siblings("input.select-dropdown").val(c)}a(this).each(function(){var d=a(this);if(!d.hasClass("browser-default")){var e=d.attr("multiple")?!0:!1,f=d.data("select-id");if(f&&(d.parent().find("span.caret").remove(),d.parent().find("input").remove(),d.unwrap(),a("ul#select-options-"+f).remove()),"destroy"===b)return void d.data("select-id",null).removeClass("initialized");var g=Materialize.guid();d.data("select-id",g);var h=a('<div class="select-wrapper"></div>');h.addClass(d.attr("class"));var i=a('<ul id="select-options-'+g+'" class="dropdown-content select-dropdown '+(e?"multiple-select-dropdown":"")+'"></ul>'),j=d.children("option, optgroup"),k=[],l=!1,m=d.find("option:selected").html()||d.find("option:first").html()||"",n=function(b,c,d){var e=c.is(":disabled")?"disabled ":"",f="optgroup-option"===d?"optgroup-option ":"",g=c.data("icon"),h=c.attr("class");if(g){var j="";return h&&(j=' class="'+h+'"'),"multiple"===d?i.append(a('<li class="'+e+'"><img alt="" src="'+g+'"'+j+'><span><input type="checkbox"'+e+"/><label></label>"+c.html()+"</span></li>")):i.append(a('<li class="'+e+f+'"><img alt="" src="'+g+'"'+j+"><span>"+c.html()+"</span></li>")),!0}"multiple"===d?i.append(a('<li class="'+e+'"><span><input type="checkbox"'+e+"/><label></label>"+c.html()+"</span></li>")):i.append(a('<li class="'+e+f+'"><span>'+c.html()+"</span></li>"))};j.length&&j.each(function(){if(a(this).is("option"))e?n(d,a(this),"multiple"):n(d,a(this));else if(a(this).is("optgroup")){var b=a(this).children("option");i.append(a('<li class="optgroup"><span>'+a(this).attr("label")+"</span></li>")),b.each(function(){n(d,a(this),"optgroup-option")})}}),i.find("li:not(.optgroup)").each(function(f){a(this).click(function(g){if(!a(this).hasClass("disabled")&&!a(this).hasClass("optgroup")){
var h=!0;e?(a('input[type="checkbox"]',this).prop("checked",function(a,b){return!b}),h=c(k,a(this).index(),d),q.trigger("focus")):(i.find("li").removeClass("active"),a(this).toggleClass("active"),q.val(a(this).text())),r(i,a(this)),d.find("option").eq(f).prop("selected",h),d.trigger("change"),"undefined"!=typeof b&&b()}g.stopPropagation()})}),d.wrap(h);var o=a('<span class="caret">&#9660;</span>');d.is(":disabled")&&o.addClass("disabled");var p=m.replace(/"/g,"&quot;"),q=a('<input type="text" class="select-dropdown" readonly="true" '+(d.is(":disabled")?"disabled":"")+' data-activates="select-options-'+g+'" value="'+p+'"/>');d.before(q),q.before(o),q.after(i),d.is(":disabled")||q.dropdown({hover:!1,closeOnClick:!1}),d.attr("tabindex")&&a(q[0]).attr("tabindex",d.attr("tabindex")),d.addClass("initialized"),q.on({focus:function(){if(a("ul.select-dropdown").not(i[0]).is(":visible")&&a("input.select-dropdown").trigger("close"),!i.is(":visible")){a(this).trigger("open",["focus"]);var b=a(this).val(),c=i.find("li").filter(function(){return a(this).text().toLowerCase()===b.toLowerCase()})[0];r(i,c)}},click:function(a){a.stopPropagation()}}),q.on("blur",function(){e||a(this).trigger("close"),i.find("li.selected").removeClass("selected")}),i.hover(function(){l=!0},function(){l=!1}),a(window).on({click:function(){e&&(l||q.trigger("close"))}}),e&&d.find("option:selected:not(:disabled)").each(function(){var b=a(this).index();c(k,b,d),i.find("li").eq(b).find(":checkbox").prop("checked",!0)});var r=function(b,c){if(c){b.find("li.selected").removeClass("selected");var d=a(c);d.addClass("selected"),i.scrollTo(d)}},s=[],t=function(b){if(9==b.which)return void q.trigger("close");if(40==b.which&&!i.is(":visible"))return void q.trigger("open");if(13!=b.which||i.is(":visible")){b.preventDefault();var c=String.fromCharCode(b.which).toLowerCase(),d=[9,13,27,38,40];if(c&&-1===d.indexOf(b.which)){s.push(c);var f=s.join(""),g=i.find("li").filter(function(){return 0===a(this).text().toLowerCase().indexOf(f)})[0];g&&r(i,g)}if(13==b.which){var h=i.find("li.selected:not(.disabled)")[0];h&&(a(h).trigger("click"),e||q.trigger("close"))}40==b.which&&(g=i.find("li.selected").length?i.find("li.selected").next("li:not(.disabled)")[0]:i.find("li:not(.disabled)")[0],r(i,g)),27==b.which&&q.trigger("close"),38==b.which&&(g=i.find("li.selected").prev("li:not(.disabled)")[0],g&&r(i,g)),setTimeout(function(){s=[]},1e3)}};q.on("keydown",t)}})}}(jQuery),function(a){var b={init:function(b){var c={indicators:!0,height:400,transition:500,interval:6e3};return b=a.extend(c,b),this.each(function(){function c(a,b){a.hasClass("center-align")?a.velocity({opacity:0,translateY:-100},{duration:b,queue:!1}):a.hasClass("right-align")?a.velocity({opacity:0,translateX:100},{duration:b,queue:!1}):a.hasClass("left-align")&&a.velocity({opacity:0,translateX:-100},{duration:b,queue:!1})}function d(a){a>=j.length?a=0:0>a&&(a=j.length-1),k=i.find(".active").index(),k!=a&&(e=j.eq(k),$caption=e.find(".caption"),e.removeClass("active"),e.velocity({opacity:0},{duration:b.transition,queue:!1,easing:"easeOutQuad",complete:function(){j.not(".active").velocity({opacity:0,translateX:0,translateY:0},{duration:0,queue:!1})}}),c($caption,b.transition),b.indicators&&f.eq(k).removeClass("active"),j.eq(a).velocity({opacity:1},{duration:b.transition,queue:!1,easing:"easeOutQuad"}),j.eq(a).find(".caption").velocity({opacity:1,translateX:0,translateY:0},{duration:b.transition,delay:b.transition,queue:!1,easing:"easeOutQuad"}),j.eq(a).addClass("active"),b.indicators&&f.eq(a).addClass("active"))}var e,f,g,h=a(this),i=h.find("ul.slides").first(),j=i.find("> li"),k=i.find(".active").index();-1!=k&&(e=j.eq(k)),h.hasClass("fullscreen")||(b.indicators?h.height(b.height+40):h.height(b.height),i.height(b.height)),j.find(".caption").each(function(){c(a(this),0)}),j.find("img").each(function(){var b="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";a(this).attr("src")!==b&&(a(this).css("background-image","url("+a(this).attr("src")+")"),a(this).attr("src",b))}),b.indicators&&(f=a('<ul class="indicators"></ul>'),j.each(function(c){var e=a('<li class="indicator-item"></li>');e.click(function(){var c=i.parent(),e=c.find(a(this)).index();d(e),clearInterval(g),g=setInterval(function(){k=i.find(".active").index(),j.length==k+1?k=0:k+=1,d(k)},b.transition+b.interval)}),f.append(e)}),h.append(f),f=h.find("ul.indicators").find("li.indicator-item")),e?e.show():(j.first().addClass("active").velocity({opacity:1},{duration:b.transition,queue:!1,easing:"easeOutQuad"}),k=0,e=j.eq(k),b.indicators&&f.eq(k).addClass("active")),e.find("img").each(function(){e.find(".caption").velocity({opacity:1,translateX:0,translateY:0},{duration:b.transition,queue:!1,easing:"easeOutQuad"})}),g=setInterval(function(){k=i.find(".active").index(),d(k+1)},b.transition+b.interval);var l=!1,m=!1,n=!1;h.hammer({prevent_default:!1}).bind("pan",function(a){if("touch"===a.gesture.pointerType){clearInterval(g);var b=a.gesture.direction,c=a.gesture.deltaX,d=a.gesture.velocityX;$curr_slide=i.find(".active"),$curr_slide.velocity({translateX:c},{duration:50,queue:!1,easing:"easeOutQuad"}),4===b&&(c>h.innerWidth()/2||-.65>d)?n=!0:2===b&&(c<-1*h.innerWidth()/2||d>.65)&&(m=!0);var e;m&&(e=$curr_slide.next(),0===e.length&&(e=j.first()),e.velocity({opacity:1},{duration:300,queue:!1,easing:"easeOutQuad"})),n&&(e=$curr_slide.prev(),0===e.length&&(e=j.last()),e.velocity({opacity:1},{duration:300,queue:!1,easing:"easeOutQuad"}))}}).bind("panend",function(a){"touch"===a.gesture.pointerType&&($curr_slide=i.find(".active"),l=!1,curr_index=i.find(".active").index(),!n&&!m||j.length<=1?$curr_slide.velocity({translateX:0},{duration:300,queue:!1,easing:"easeOutQuad"}):m?(d(curr_index+1),$curr_slide.velocity({translateX:-1*h.innerWidth()},{duration:300,queue:!1,easing:"easeOutQuad",complete:function(){$curr_slide.velocity({opacity:0,translateX:0},{duration:0,queue:!1})}})):n&&(d(curr_index-1),$curr_slide.velocity({translateX:h.innerWidth()},{duration:300,queue:!1,easing:"easeOutQuad",complete:function(){$curr_slide.velocity({opacity:0,translateX:0},{duration:0,queue:!1})}})),m=!1,n=!1,clearInterval(g),g=setInterval(function(){k=i.find(".active").index(),j.length==k+1?k=0:k+=1,d(k)},b.transition+b.interval))}),h.on("sliderPause",function(){clearInterval(g)}),h.on("sliderStart",function(){clearInterval(g),g=setInterval(function(){k=i.find(".active").index(),j.length==k+1?k=0:k+=1,d(k)},b.transition+b.interval)}),h.on("sliderNext",function(){k=i.find(".active").index(),d(k+1)}),h.on("sliderPrev",function(){k=i.find(".active").index(),d(k-1)})})},pause:function(){a(this).trigger("sliderPause")},start:function(){a(this).trigger("sliderStart")},next:function(){a(this).trigger("sliderNext")},prev:function(){a(this).trigger("sliderPrev")}};a.fn.slider=function(c){return b[c]?b[c].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof c&&c?void a.error("Method "+c+" does not exist on jQuery.tooltip"):b.init.apply(this,arguments)}}(jQuery),function(a){a(document).ready(function(){a(document).on("click.card",".card",function(b){a(this).find("> .card-reveal").length&&(a(b.target).is(a(".card-reveal .card-title"))||a(b.target).is(a(".card-reveal .card-title i"))?a(this).find(".card-reveal").velocity({translateY:0},{duration:225,queue:!1,easing:"easeInOutQuad",complete:function(){a(this).css({display:"none"})}}):(a(b.target).is(a(".card .activator"))||a(b.target).is(a(".card .activator i")))&&(a(b.target).closest(".card").css("overflow","hidden"),a(this).find(".card-reveal").css({display:"block"}).velocity("stop",!1).velocity({translateY:"-100%"},{duration:300,queue:!1,easing:"easeInOutQuad"})))})})}(jQuery),function(a){var b=!1,c={data:[],placeholder:"",secondaryPlaceholder:""};a(document).ready(function(){a(document).on("click",".chip .close",function(b){var c=a(this).closest(".chips");c.attr("data-initialized")||a(this).closest(".chip").remove()})}),a.fn.material_chip=function(d){var e=this;if(this.$el=a(this),this.$document=a(document),this.SELS={CHIPS:".chips",CHIP:".chip",INPUT:"input",DELETE:".material-icons",SELECTED_CHIP:".selected"},"data"===d)return this.$el.data("chips");var f=a.extend({},c,d);this.init=function(){var b=0;e.$el.each(function(){var c=a(this),d=Materialize.guid();f.data&&f.data instanceof Array||(f.data=[]),c.data("chips",f.data),c.attr("data-index",b),c.attr("data-initialized",!0),c.hasClass(e.SELS.CHIPS)||c.addClass("chips"),e.chips(c,d),b++})},this.handleEvents=function(){var b=e.SELS;e.$document.off("click.chips-focus",b.CHIPS).on("click.chips-focus",b.CHIPS,function(c){a(c.target).find(b.INPUT).focus()}),e.$document.off("click.chips-select",b.CHIP).on("click.chips-select",b.CHIP,function(c){a(b.CHIP).removeClass("selected"),a(this).toggleClass("selected")}),e.$document.off("keydown.chips").on("keydown.chips",function(c){if(!a(c.target).is("input, textarea")){var d,f=e.$document.find(b.CHIP+b.SELECTED_CHIP),g=f.closest(b.CHIPS),h=f.siblings(b.CHIP).length;if(f.length)if(8===c.which||46===c.which){c.preventDefault(),d=f.index(),e.deleteChip(d,g);var i=null;h>d+1?i=d:(d===h||d+1===h)&&(i=h-1),0>i&&(i=null),null!==i&&e.selectChip(i,g),h||g.find("input").focus()}else if(37===c.which){if(d=f.index()-1,0>d)return;a(b.CHIP).removeClass("selected"),e.selectChip(d,g)}else if(39===c.which){if(d=f.index()+1,a(b.CHIP).removeClass("selected"),d>h)return void g.find("input").focus();e.selectChip(d,g)}}}),e.$document.off("focusin.chips",b.CHIPS+" "+b.INPUT).on("focusin.chips",b.CHIPS+" "+b.INPUT,function(c){var d=a(c.target).closest(b.CHIPS);d.addClass("focus"),d.siblings("label, .prefix").addClass("active"),a(b.CHIP).removeClass("selected")}),e.$document.off("focusout.chips",b.CHIPS+" "+b.INPUT).on("focusout.chips",b.CHIPS+" "+b.INPUT,function(c){var d=a(c.target).closest(b.CHIPS);d.removeClass("focus"),d.data("chips").length||d.siblings("label").removeClass("active"),d.siblings(".prefix").removeClass("active")}),e.$document.off("keydown.chips-add",b.CHIPS+" "+b.INPUT).on("keydown.chips-add",b.CHIPS+" "+b.INPUT,function(c){var d=a(c.target),f=d.closest(b.CHIPS),g=f.children(b.CHIP).length;return 13===c.which?(c.preventDefault(),e.addChip({tag:d.val()},f),void d.val("")):8!==c.keyCode&&37!==c.keyCode||""!==d.val()||!g?void 0:(e.selectChip(g-1,f),void d.blur())}),e.$document.off("click.chips-delete",b.CHIPS+" "+b.DELETE).on("click.chips-delete",b.CHIPS+" "+b.DELETE,function(c){var d=a(c.target),f=d.closest(b.CHIPS),g=d.closest(b.CHIP);c.stopPropagation(),e.deleteChip(g.index(),f),f.find("input").focus()})},this.chips=function(a,b){var c="";a.data("chips").forEach(function(a){c+=e.renderChip(a)}),c+='<input id="'+b+'" class="input" placeholder="">',a.html(c),e.setPlaceholder(a);var d=a.next("label");d.length&&(d.attr("for",b),a.data("chips").length&&d.addClass("active"))},this.renderChip=function(a){if(a.tag){var b='<div class="chip">'+a.tag;return a.image&&(b+=' <img src="'+a.image+'"> '),b+='<i class="material-icons close">close</i>',b+="</div>"}},this.setPlaceholder=function(a){a.data("chips").length&&f.placeholder?a.find("input").prop("placeholder",f.placeholder):!a.data("chips").length&&f.secondaryPlaceholder&&a.find("input").prop("placeholder",f.secondaryPlaceholder)},this.isValid=function(a,b){for(var c=a.data("chips"),d=!1,e=0;e<c.length;e++)if(c[e].tag===b.tag)return void(d=!0);return""!==b.tag&&!d},this.addChip=function(b,c){if(e.isValid(c,b)){for(var d=e.renderChip(b),f=[],g=c.data("chips"),h=0;h<g.length;h++)f.push(g[h]);f.push(b),c.data("chips",f),a(d).insertBefore(c.find("input")),c.trigger("chip.add",b),e.setPlaceholder(c)}},this.deleteChip=function(a,b){var c=b.data("chips")[a];b.find(".chip").eq(a).remove();for(var d=[],f=b.data("chips"),g=0;g<f.length;g++)g!==a&&d.push(f[g]);b.data("chips",d),b.trigger("chip.delete",c),e.setPlaceholder(b)},this.selectChip=function(a,b){var c=b.find(".chip").eq(a);c&&!1===c.hasClass("selected")&&(c.addClass("selected"),b.trigger("chip.select",b.data("chips")[a]))},this.getChipsElement=function(a,b){return b.eq(a)},this.init(),b||(this.handleEvents(),b=!0)}}(jQuery),function(a){a.fn.pushpin=function(b){var c={top:0,bottom:1/0,offset:0};return"remove"===b?(this.each(function(){(id=a(this).data("pushpin-id"))&&(a(window).off("scroll."+id),a(this).removeData("pushpin-id").removeClass("pin-top pinned pin-bottom").removeAttr("style"))}),!1):(b=a.extend(c,b),$index=0,this.each(function(){function c(a){a.removeClass("pin-top"),a.removeClass("pinned"),a.removeClass("pin-bottom")}function d(d,e){d.each(function(){b.top<=e&&b.bottom>=e&&!a(this).hasClass("pinned")&&(c(a(this)),a(this).css("top",b.offset),a(this).addClass("pinned")),e<b.top&&!a(this).hasClass("pin-top")&&(c(a(this)),a(this).css("top",0),a(this).addClass("pin-top")),e>b.bottom&&!a(this).hasClass("pin-bottom")&&(c(a(this)),a(this).addClass("pin-bottom"),a(this).css("top",b.bottom-g))})}var e=Materialize.guid(),f=a(this),g=a(this).offset().top;a(this).data("pushpin-id",e),d(f,a(window).scrollTop()),a(window).on("scroll."+e,function(){var c=a(window).scrollTop()+b.offset;d(f,c)})}))}}(jQuery),function(a){a(document).ready(function(){a.fn.reverse=[].reverse,a(document).on("mouseenter.fixedActionBtn",".fixed-action-btn:not(.click-to-toggle):not(.toolbar)",function(c){var d=a(this);b(d)}),a(document).on("mouseleave.fixedActionBtn",".fixed-action-btn:not(.click-to-toggle):not(.toolbar)",function(b){var d=a(this);c(d)}),a(document).on("click.fabClickToggle",".fixed-action-btn.click-to-toggle > a",function(d){var e=a(this),f=e.parent();f.hasClass("active")?c(f):b(f)}),a(document).on("click.fabToolbar",".fixed-action-btn.toolbar > a",function(b){var c=a(this),e=c.parent();d(e)})}),a.fn.extend({openFAB:function(){b(a(this))},closeFAB:function(){c(a(this))},openToolbar:function(){d(a(this))},closeToolbar:function(){e(a(this))}});var b=function(b){var c=b;if(c.hasClass("active")===!1){var d,e,f=c.hasClass("horizontal");f===!0?e=40:d=40,c.addClass("active"),c.find("ul .btn-floating").velocity({scaleY:".4",scaleX:".4",translateY:d+"px",translateX:e+"px"},{duration:0});var g=0;c.find("ul .btn-floating").reverse().each(function(){a(this).velocity({opacity:"1",scaleX:"1",scaleY:"1",translateY:"0",translateX:"0"},{duration:80,delay:g}),g+=40})}},c=function(a){var b,c,d=a,e=d.hasClass("horizontal");e===!0?c=40:b=40,d.removeClass("active");d.find("ul .btn-floating").velocity("stop",!0),d.find("ul .btn-floating").velocity({opacity:"0",scaleX:".4",scaleY:".4",translateY:b+"px",translateX:c+"px"},{duration:80})},d=function(b){if("true"!==b.attr("data-open")){var c,d,f,g=window.innerWidth,h=window.innerHeight,i=b[0].getBoundingClientRect(),j=b.find("> a").first(),k=b.find("> ul").first(),l=a('<div class="fab-backdrop"></div>'),m=j.css("background-color");j.append(l),c=i.left-g/2+i.width/2,d=h-i.bottom,f=g/l.width(),b.attr("data-origin-bottom",i.bottom),b.attr("data-origin-left",i.left),b.attr("data-origin-width",i.width),b.addClass("active"),b.attr("data-open",!0),b.css({"text-align":"center",width:"100%",bottom:0,left:0,transform:"translateX("+c+"px)",transition:"none"}),j.css({transform:"translateY("+-d+"px)",transition:"none"}),l.css({"background-color":m}),setTimeout(function(){b.css({transform:"",transition:"transform .2s cubic-bezier(0.550, 0.085, 0.680, 0.530), background-color 0s linear .2s"}),j.css({overflow:"visible",transform:"",transition:"transform .2s"}),setTimeout(function(){b.css({overflow:"hidden","background-color":m}),l.css({transform:"scale("+f+")",transition:"transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)"}),k.find("> li > a").css({opacity:1}),a(window).on("scroll.fabToolbarClose",function(){e(b),a(window).off("scroll.fabToolbarClose"),a(document).off("click.fabToolbarClose")}),a(document).on("click.fabToolbarClose",function(c){a(c.target).closest(k).length||(e(b),a(window).off("scroll.fabToolbarClose"),a(document).off("click.fabToolbarClose"))})},100)},0)}},e=function(a){if("true"===a.attr("data-open")){var b,c,d,e=window.innerWidth,f=window.innerHeight,g=a.attr("data-origin-width"),h=a.attr("data-origin-bottom"),i=a.attr("data-origin-left"),j=a.find("> .btn-floating").first(),k=a.find("> ul").first(),l=a.find(".fab-backdrop"),m=j.css("background-color");b=i-e/2+g/2,c=f-h,d=e/l.width(),a.removeClass("active"),a.attr("data-open",!1),a.css({"background-color":"transparent",transition:"none"}),j.css({transition:"none"}),l.css({transform:"scale(0)","background-color":m}),k.find("> li > a").css({opacity:""}),setTimeout(function(){l.remove(),a.css({"text-align":"",width:"",bottom:"",left:"",overflow:"","background-color":"",transform:"translate3d("+-b+"px,0,0)"}),j.css({overflow:"",transform:"translate3d(0,"+c+"px,0)"}),setTimeout(function(){a.css({transform:"translate3d(0,0,0)",transition:"transform .2s"}),j.css({transform:"translate3d(0,0,0)",transition:"transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)"})},20)},200)}}}(jQuery),function(a){Materialize.fadeInImage=function(b){var c;if("string"==typeof b)c=a(b);else{if("object"!=typeof b)return;c=b}c.css({opacity:0}),a(c).velocity({opacity:1},{duration:650,queue:!1,easing:"easeOutSine"}),a(c).velocity({opacity:1},{duration:1300,queue:!1,easing:"swing",step:function(b,c){c.start=100;var d=b/100,e=150-(100-b)/1.75;100>e&&(e=100),b>=0&&a(this).css({"-webkit-filter":"grayscale("+d+")brightness("+e+"%)",filter:"grayscale("+d+")brightness("+e+"%)"})}})},Materialize.showStaggeredList=function(b){var c;if("string"==typeof b)c=a(b);else{if("object"!=typeof b)return;c=b}var d=0;c.find("li").velocity({translateX:"-100px"},{duration:0}),c.find("li").each(function(){a(this).velocity({opacity:"1",translateX:"0"},{duration:800,delay:d,easing:[60,10]}),d+=120})},a(document).ready(function(){var b=!1,c=!1;a(".dismissable").each(function(){a(this).hammer({prevent_default:!1}).bind("pan",function(d){if("touch"===d.gesture.pointerType){var e=a(this),f=d.gesture.direction,g=d.gesture.deltaX,h=d.gesture.velocityX;e.velocity({translateX:g},{duration:50,queue:!1,easing:"easeOutQuad"}),4===f&&(g>e.innerWidth()/2||-.75>h)&&(b=!0),2===f&&(g<-1*e.innerWidth()/2||h>.75)&&(c=!0)}}).bind("panend",function(d){if(Math.abs(d.gesture.deltaX)<a(this).innerWidth()/2&&(c=!1,b=!1),"touch"===d.gesture.pointerType){var e=a(this);if(b||c){var f;f=b?e.innerWidth():-1*e.innerWidth(),e.velocity({translateX:f},{duration:100,queue:!1,easing:"easeOutQuad",complete:function(){e.css("border","none"),e.velocity({height:0,padding:0},{duration:200,queue:!1,easing:"easeOutQuad",complete:function(){e.remove()}})}})}else e.velocity({translateX:0},{duration:100,queue:!1,easing:"easeOutQuad"});b=!1,c=!1}})})})}(jQuery),function(a){Materialize.scrollFire=function(a){var b=!1;window.addEventListener("scroll",function(){b=!0}),setInterval(function(){if(b){b=!1;for(var c=window.pageYOffset+window.innerHeight,d=0;d<a.length;d++){var e=a[d],f=e.selector,g=e.offset,h=e.callback,i=document.querySelector(f);if(null!==i){var j=i.getBoundingClientRect().top+window.pageYOffset;if(c>j+g&&e.done!==!0){if("function"==typeof h)h.call(this,i);else if("string"==typeof h){var k=new Function(h);k(i)}e.done=!0}}}}},100)}}(jQuery),function(a){"function"==typeof define&&define.amd?define("picker",["jquery"],a):"object"==typeof exports?module.exports=a(require("jquery")):this.Picker=a(jQuery)}(function(a){function b(f,g,i,l){function m(){return b._.node("div",b._.node("div",b._.node("div",b._.node("div",y.component.nodes(t.open),v.box),v.wrap),v.frame),v.holder)}function n(){w.data(g,y).addClass(v.input).attr("tabindex",-1).val(w.data("value")?y.get("select",u.format):f.value),u.editable||w.on("focus."+t.id+" click."+t.id,function(a){a.preventDefault(),y.$root.eq(0).focus()}).on("keydown."+t.id,q),e(f,{haspopup:!0,expanded:!1,readonly:!1,owns:f.id+"_root"})}function o(){y.$root.on({keydown:q,focusin:function(a){y.$root.removeClass(v.focused),a.stopPropagation()},"mousedown click":function(b){var c=b.target;c!=y.$root.children()[0]&&(b.stopPropagation(),"mousedown"!=b.type||a(c).is("input, select, textarea, button, option")||(b.preventDefault(),y.$root.eq(0).focus()))}}).on({focus:function(){w.addClass(v.target)},blur:function(){w.removeClass(v.target)}}).on("focus.toOpen",r).on("click","[data-pick], [data-nav], [data-clear], [data-close]",function(){var b=a(this),c=b.data(),d=b.hasClass(v.navDisabled)||b.hasClass(v.disabled),e=h();e=e&&(e.type||e.href),(d||e&&!a.contains(y.$root[0],e))&&y.$root.eq(0).focus(),!d&&c.nav?y.set("highlight",y.component.item.highlight,{nav:c.nav}):!d&&"pick"in c?y.set("select",c.pick):c.clear?y.clear().close(!0):c.close&&y.close(!0)}),e(y.$root[0],"hidden",!0)}function p(){var b;u.hiddenName===!0?(b=f.name,f.name=""):(b=["string"==typeof u.hiddenPrefix?u.hiddenPrefix:"","string"==typeof u.hiddenSuffix?u.hiddenSuffix:"_submit"],b=b[0]+f.name+b[1]),y._hidden=a('<input type=hidden name="'+b+'"'+(w.data("value")||f.value?' value="'+y.get("select",u.formatSubmit)+'"':"")+">")[0],w.on("change."+t.id,function(){y._hidden.value=f.value?y.get("select",u.formatSubmit):""}),u.container?a(u.container).append(y._hidden):w.after(y._hidden)}function q(a){var b=a.keyCode,c=/^(8|46)$/.test(b);return 27==b?(y.close(),!1):void((32==b||c||!t.open&&y.component.key[b])&&(a.preventDefault(),a.stopPropagation(),c?y.clear().close():y.open()))}function r(a){a.stopPropagation(),"focus"==a.type&&y.$root.addClass(v.focused),y.open()}if(!f)return b;var s=!1,t={id:f.id||"P"+Math.abs(~~(Math.random()*new Date))},u=i?a.extend(!0,{},i.defaults,l):l||{},v=a.extend({},b.klasses(),u.klass),w=a(f),x=function(){return this.start()},y=x.prototype={constructor:x,$node:w,start:function(){return t&&t.start?y:(t.methods={},t.start=!0,t.open=!1,t.type=f.type,f.autofocus=f==h(),f.readOnly=!u.editable,f.id=f.id||t.id,"text"!=f.type&&(f.type="text"),y.component=new i(y,u),y.$root=a(b._.node("div",m(),v.picker,'id="'+f.id+'_root" tabindex="0"')),o(),u.formatSubmit&&p(),n(),u.container?a(u.container).append(y.$root):w.after(y.$root),y.on({start:y.component.onStart,render:y.component.onRender,stop:y.component.onStop,open:y.component.onOpen,close:y.component.onClose,set:y.component.onSet}).on({start:u.onStart,render:u.onRender,stop:u.onStop,open:u.onOpen,close:u.onClose,set:u.onSet}),s=c(y.$root.children()[0]),f.autofocus&&y.open(),y.trigger("start").trigger("render"))},render:function(a){return a?y.$root.html(m()):y.$root.find("."+v.box).html(y.component.nodes(t.open)),y.trigger("render")},stop:function(){return t.start?(y.close(),y._hidden&&y._hidden.parentNode.removeChild(y._hidden),y.$root.remove(),w.removeClass(v.input).removeData(g),setTimeout(function(){w.off("."+t.id)},0),f.type=t.type,f.readOnly=!1,y.trigger("stop"),t.methods={},t.start=!1,y):y},open:function(c){return t.open?y:(w.addClass(v.active),e(f,"expanded",!0),setTimeout(function(){y.$root.addClass(v.opened),e(y.$root[0],"hidden",!1)},0),c!==!1&&(t.open=!0,s&&k.css("overflow","hidden").css("padding-right","+="+d()),y.$root.eq(0).focus(),j.on("click."+t.id+" focusin."+t.id,function(a){var b=a.target;b!=f&&b!=document&&3!=a.which&&y.close(b===y.$root.children()[0])}).on("keydown."+t.id,function(c){var d=c.keyCode,e=y.component.key[d],f=c.target;27==d?y.close(!0):f!=y.$root[0]||!e&&13!=d?a.contains(y.$root[0],f)&&13==d&&(c.preventDefault(),f.click()):(c.preventDefault(),e?b._.trigger(y.component.key.go,y,[b._.trigger(e)]):y.$root.find("."+v.highlighted).hasClass(v.disabled)||y.set("select",y.component.item.highlight).close())})),y.trigger("open"))},close:function(a){return a&&(y.$root.off("focus.toOpen").eq(0).focus(),setTimeout(function(){y.$root.on("focus.toOpen",r)},0)),w.removeClass(v.active),e(f,"expanded",!1),setTimeout(function(){y.$root.removeClass(v.opened+" "+v.focused),e(y.$root[0],"hidden",!0)},0),t.open?(t.open=!1,s&&k.css("overflow","").css("padding-right","-="+d()),j.off("."+t.id),y.trigger("close")):y},clear:function(a){return y.set("clear",null,a)},set:function(b,c,d){var e,f,g=a.isPlainObject(b),h=g?b:{};if(d=g&&a.isPlainObject(c)?c:d||{},b){g||(h[b]=c);for(e in h)f=h[e],e in y.component.item&&(void 0===f&&(f=null),y.component.set(e,f,d)),("select"==e||"clear"==e)&&w.val("clear"==e?"":y.get(e,u.format)).trigger("change");y.render()}return d.muted?y:y.trigger("set",h)},get:function(a,c){if(a=a||"value",null!=t[a])return t[a];if("valueSubmit"==a){if(y._hidden)return y._hidden.value;a="value"}if("value"==a)return f.value;if(a in y.component.item){if("string"==typeof c){var d=y.component.get(a);return d?b._.trigger(y.component.formats.toString,y.component,[c,d]):""}return y.component.get(a)}},on:function(b,c,d){var e,f,g=a.isPlainObject(b),h=g?b:{};if(b){g||(h[b]=c);for(e in h)f=h[e],d&&(e="_"+e),t.methods[e]=t.methods[e]||[],t.methods[e].push(f)}return y},off:function(){var a,b,c=arguments;for(a=0,namesCount=c.length;a<namesCount;a+=1)b=c[a],b in t.methods&&delete t.methods[b];return y},trigger:function(a,c){var d=function(a){var d=t.methods[a];d&&d.map(function(a){b._.trigger(a,y,[c])})};return d("_"+a),d(a),y}};return new x}function c(a){var b,c="position";return a.currentStyle?b=a.currentStyle[c]:window.getComputedStyle&&(b=getComputedStyle(a)[c]),"fixed"==b}function d(){if(k.height()<=i.height())return 0;var b=a('<div style="visibility:hidden;width:100px" />').appendTo("body"),c=b[0].offsetWidth;b.css("overflow","scroll");var d=a('<div style="width:100%" />').appendTo(b),e=d[0].offsetWidth;return b.remove(),c-e}function e(b,c,d){if(a.isPlainObject(c))for(var e in c)f(b,e,c[e]);else f(b,c,d)}function f(a,b,c){a.setAttribute(("role"==b?"":"aria-")+b,c)}function g(b,c){a.isPlainObject(b)||(b={attribute:c}),c="";for(var d in b){var e=("role"==d?"":"aria-")+d,f=b[d];c+=null==f?"":e+'="'+b[d]+'"'}return c}function h(){try{return document.activeElement}catch(a){}}var i=a(window),j=a(document),k=a(document.documentElement);return b.klasses=function(a){return a=a||"picker",{picker:a,opened:a+"--opened",focused:a+"--focused",input:a+"__input",active:a+"__input--active",target:a+"__input--target",holder:a+"__holder",frame:a+"__frame",wrap:a+"__wrap",box:a+"__box"}},b._={group:function(a){for(var c,d="",e=b._.trigger(a.min,a);e<=b._.trigger(a.max,a,[e]);e+=a.i)c=b._.trigger(a.item,a,[e]),d+=b._.node(a.node,c[0],c[1],c[2]);return d},node:function(b,c,d,e){return c?(c=a.isArray(c)?c.join(""):c,d=d?' class="'+d+'"':"",e=e?" "+e:"","<"+b+d+e+">"+c+"</"+b+">"):""},lead:function(a){return(10>a?"0":"")+a},trigger:function(a,b,c){return"function"==typeof a?a.apply(b,c||[]):a},digits:function(a){return/\d/.test(a[1])?2:1},isDate:function(a){return{}.toString.call(a).indexOf("Date")>-1&&this.isInteger(a.getDate())},isInteger:function(a){return{}.toString.call(a).indexOf("Number")>-1&&a%1===0},ariaAttr:g},b.extend=function(c,d){a.fn[c]=function(e,f){var g=this.data(c);return"picker"==e?g:g&&"string"==typeof e?b._.trigger(g[e],g,[f]):this.each(function(){var f=a(this);f.data(c)||new b(this,c,d,e)})},a.fn[c].defaults=d.defaults},b}),function(a){"function"==typeof define&&define.amd?define(["picker","jquery"],a):"object"==typeof exports?module.exports=a(require("./picker.js"),require("jquery")):a(Picker,jQuery)}(function(a,b){function c(a,b){var c=this,d=a.$node[0],e=d.value,f=a.$node.data("value"),g=f||e,h=f?b.formatSubmit:b.format,i=function(){return d.currentStyle?"rtl"==d.currentStyle.direction:"rtl"==getComputedStyle(a.$root[0]).direction};c.settings=b,c.$node=a.$node,c.queue={min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"parse navigate create validate",view:"parse create validate viewset",disable:"deactivate",enable:"activate"},c.item={},c.item.clear=null,c.item.disable=(b.disable||[]).slice(0),c.item.enable=-function(a){return a[0]===!0?a.shift():-1}(c.item.disable),c.set("min",b.min).set("max",b.max).set("now"),g?c.set("select",g,{format:h}):c.set("select",null).set("highlight",c.item.now),c.key={40:7,38:-7,39:function(){return i()?-1:1},37:function(){return i()?1:-1},go:function(a){var b=c.item.highlight,d=new Date(b.year,b.month,b.date+a);c.set("highlight",d,{interval:a}),this.render()}},a.on("render",function(){a.$root.find("."+b.klass.selectMonth).on("change",function(){var c=this.value;c&&(a.set("highlight",[a.get("view").year,c,a.get("highlight").date]),a.$root.find("."+b.klass.selectMonth).trigger("focus"))}),a.$root.find("."+b.klass.selectYear).on("change",function(){var c=this.value;c&&(a.set("highlight",[c,a.get("view").month,a.get("highlight").date]),a.$root.find("."+b.klass.selectYear).trigger("focus"))})},1).on("open",function(){var d="";c.disabled(c.get("now"))&&(d=":not(."+b.klass.buttonToday+")"),a.$root.find("button"+d+", select").attr("disabled",!1)},1).on("close",function(){a.$root.find("button, select").attr("disabled",!0)},1)}var d=7,e=6,f=a._;c.prototype.set=function(a,b,c){var d=this,e=d.item;return null===b?("clear"==a&&(a="select"),e[a]=b,d):(e["enable"==a?"disable":"flip"==a?"enable":a]=d.queue[a].split(" ").map(function(e){return b=d[e](a,b,c)}).pop(),"select"==a?d.set("highlight",e.select,c):"highlight"==a?d.set("view",e.highlight,c):a.match(/^(flip|min|max|disable|enable)$/)&&(e.select&&d.disabled(e.select)&&d.set("select",e.select,c),e.highlight&&d.disabled(e.highlight)&&d.set("highlight",e.highlight,c)),d)},c.prototype.get=function(a){return this.item[a]},c.prototype.create=function(a,c,d){var e,g=this;return c=void 0===c?a:c,c==-(1/0)||c==1/0?e=c:b.isPlainObject(c)&&f.isInteger(c.pick)?c=c.obj:b.isArray(c)?(c=new Date(c[0],c[1],c[2]),c=f.isDate(c)?c:g.create().obj):c=f.isInteger(c)||f.isDate(c)?g.normalize(new Date(c),d):g.now(a,c,d),{year:e||c.getFullYear(),month:e||c.getMonth(),date:e||c.getDate(),day:e||c.getDay(),obj:e||c,pick:e||c.getTime()}},c.prototype.createRange=function(a,c){var d=this,e=function(a){return a===!0||b.isArray(a)||f.isDate(a)?d.create(a):a};return f.isInteger(a)||(a=e(a)),f.isInteger(c)||(c=e(c)),f.isInteger(a)&&b.isPlainObject(c)?a=[c.year,c.month,c.date+a]:f.isInteger(c)&&b.isPlainObject(a)&&(c=[a.year,a.month,a.date+c]),{from:e(a),to:e(c)}},c.prototype.withinRange=function(a,b){return a=this.createRange(a.from,a.to),b.pick>=a.from.pick&&b.pick<=a.to.pick},c.prototype.overlapRanges=function(a,b){var c=this;return a=c.createRange(a.from,a.to),b=c.createRange(b.from,b.to),c.withinRange(a,b.from)||c.withinRange(a,b.to)||c.withinRange(b,a.from)||c.withinRange(b,a.to)},c.prototype.now=function(a,b,c){return b=new Date,c&&c.rel&&b.setDate(b.getDate()+c.rel),this.normalize(b,c)},c.prototype.navigate=function(a,c,d){var e,f,g,h,i=b.isArray(c),j=b.isPlainObject(c),k=this.item.view;if(i||j){for(j?(f=c.year,g=c.month,h=c.date):(f=+c[0],g=+c[1],h=+c[2]),d&&d.nav&&k&&k.month!==g&&(f=k.year,g=k.month),e=new Date(f,g+(d&&d.nav?d.nav:0),1),f=e.getFullYear(),g=e.getMonth();new Date(f,g,h).getMonth()!==g;)h-=1;c=[f,g,h]}return c},c.prototype.normalize=function(a){return a.setHours(0,0,0,0),a},c.prototype.measure=function(a,b){var c=this;return b?"string"==typeof b?b=c.parse(a,b):f.isInteger(b)&&(b=c.now(a,b,{rel:b})):b="min"==a?-(1/0):1/0,b},c.prototype.viewset=function(a,b){return this.create([b.year,b.month,1])},c.prototype.validate=function(a,c,d){var e,g,h,i,j=this,k=c,l=d&&d.interval?d.interval:1,m=-1===j.item.enable,n=j.item.min,o=j.item.max,p=m&&j.item.disable.filter(function(a){if(b.isArray(a)){var d=j.create(a).pick;d<c.pick?e=!0:d>c.pick&&(g=!0)}return f.isInteger(a)}).length;if((!d||!d.nav)&&(!m&&j.disabled(c)||m&&j.disabled(c)&&(p||e||g)||!m&&(c.pick<=n.pick||c.pick>=o.pick)))for(m&&!p&&(!g&&l>0||!e&&0>l)&&(l*=-1);j.disabled(c)&&(Math.abs(l)>1&&(c.month<k.month||c.month>k.month)&&(c=k,l=l>0?1:-1),c.pick<=n.pick?(h=!0,l=1,c=j.create([n.year,n.month,n.date+(c.pick===n.pick?0:-1)])):c.pick>=o.pick&&(i=!0,l=-1,c=j.create([o.year,o.month,o.date+(c.pick===o.pick?0:1)])),!h||!i);)c=j.create([c.year,c.month,c.date+l]);return c},c.prototype.disabled=function(a){var c=this,d=c.item.disable.filter(function(d){return f.isInteger(d)?a.day===(c.settings.firstDay?d:d-1)%7:b.isArray(d)||f.isDate(d)?a.pick===c.create(d).pick:b.isPlainObject(d)?c.withinRange(d,a):void 0;
});return d=d.length&&!d.filter(function(a){return b.isArray(a)&&"inverted"==a[3]||b.isPlainObject(a)&&a.inverted}).length,-1===c.item.enable?!d:d||a.pick<c.item.min.pick||a.pick>c.item.max.pick},c.prototype.parse=function(a,b,c){var d=this,e={};return b&&"string"==typeof b?(c&&c.format||(c=c||{},c.format=d.settings.format),d.formats.toArray(c.format).map(function(a){var c=d.formats[a],g=c?f.trigger(c,d,[b,e]):a.replace(/^!/,"").length;c&&(e[a]=b.substr(0,g)),b=b.substr(g)}),[e.yyyy||e.yy,+(e.mm||e.m)-1,e.dd||e.d]):b},c.prototype.formats=function(){function a(a,b,c){var d=a.match(/\w+/)[0];return c.mm||c.m||(c.m=b.indexOf(d)+1),d.length}function b(a){return a.match(/\w+/)[0].length}return{d:function(a,b){return a?f.digits(a):b.date},dd:function(a,b){return a?2:f.lead(b.date)},ddd:function(a,c){return a?b(a):this.settings.weekdaysShort[c.day]},dddd:function(a,c){return a?b(a):this.settings.weekdaysFull[c.day]},m:function(a,b){return a?f.digits(a):b.month+1},mm:function(a,b){return a?2:f.lead(b.month+1)},mmm:function(b,c){var d=this.settings.monthsShort;return b?a(b,d,c):d[c.month]},mmmm:function(b,c){var d=this.settings.monthsFull;return b?a(b,d,c):d[c.month]},yy:function(a,b){return a?2:(""+b.year).slice(2)},yyyy:function(a,b){return a?4:b.year},toArray:function(a){return a.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g)},toString:function(a,b){var c=this;return c.formats.toArray(a).map(function(a){return f.trigger(c.formats[a],c,[0,b])||a.replace(/^!/,"")}).join("")}}}(),c.prototype.isDateExact=function(a,c){var d=this;return f.isInteger(a)&&f.isInteger(c)||"boolean"==typeof a&&"boolean"==typeof c?a===c:(f.isDate(a)||b.isArray(a))&&(f.isDate(c)||b.isArray(c))?d.create(a).pick===d.create(c).pick:b.isPlainObject(a)&&b.isPlainObject(c)?d.isDateExact(a.from,c.from)&&d.isDateExact(a.to,c.to):!1},c.prototype.isDateOverlap=function(a,c){var d=this,e=d.settings.firstDay?1:0;return f.isInteger(a)&&(f.isDate(c)||b.isArray(c))?(a=a%7+e,a===d.create(c).day+1):f.isInteger(c)&&(f.isDate(a)||b.isArray(a))?(c=c%7+e,c===d.create(a).day+1):b.isPlainObject(a)&&b.isPlainObject(c)?d.overlapRanges(a,c):!1},c.prototype.flipEnable=function(a){var b=this.item;b.enable=a||(-1==b.enable?1:-1)},c.prototype.deactivate=function(a,c){var d=this,e=d.item.disable.slice(0);return"flip"==c?d.flipEnable():c===!1?(d.flipEnable(1),e=[]):c===!0?(d.flipEnable(-1),e=[]):c.map(function(a){for(var c,g=0;g<e.length;g+=1)if(d.isDateExact(a,e[g])){c=!0;break}c||(f.isInteger(a)||f.isDate(a)||b.isArray(a)||b.isPlainObject(a)&&a.from&&a.to)&&e.push(a)}),e},c.prototype.activate=function(a,c){var d=this,e=d.item.disable,g=e.length;return"flip"==c?d.flipEnable():c===!0?(d.flipEnable(1),e=[]):c===!1?(d.flipEnable(-1),e=[]):c.map(function(a){var c,h,i,j;for(i=0;g>i;i+=1){if(h=e[i],d.isDateExact(h,a)){c=e[i]=null,j=!0;break}if(d.isDateOverlap(h,a)){b.isPlainObject(a)?(a.inverted=!0,c=a):b.isArray(a)?(c=a,c[3]||c.push("inverted")):f.isDate(a)&&(c=[a.getFullYear(),a.getMonth(),a.getDate(),"inverted"]);break}}if(c)for(i=0;g>i;i+=1)if(d.isDateExact(e[i],a)){e[i]=null;break}if(j)for(i=0;g>i;i+=1)if(d.isDateOverlap(e[i],a)){e[i]=null;break}c&&e.push(c)}),e.filter(function(a){return null!=a})},c.prototype.nodes=function(a){var b=this,c=b.settings,g=b.item,h=g.now,i=g.select,j=g.highlight,k=g.view,l=g.disable,m=g.min,n=g.max,o=function(a,b){return c.firstDay&&(a.push(a.shift()),b.push(b.shift())),f.node("thead",f.node("tr",f.group({min:0,max:d-1,i:1,node:"th",item:function(d){return[a[d],c.klass.weekdays,'scope=col title="'+b[d]+'"']}})))}((c.showWeekdaysFull?c.weekdaysFull:c.weekdaysLetter).slice(0),c.weekdaysFull.slice(0)),p=function(a){return f.node("div"," ",c.klass["nav"+(a?"Next":"Prev")]+(a&&k.year>=n.year&&k.month>=n.month||!a&&k.year<=m.year&&k.month<=m.month?" "+c.klass.navDisabled:""),"data-nav="+(a||-1)+" "+f.ariaAttr({role:"button",controls:b.$node[0].id+"_table"})+' title="'+(a?c.labelMonthNext:c.labelMonthPrev)+'"')},q=function(d){var e=c.showMonthsShort?c.monthsShort:c.monthsFull;return"short_months"==d&&(e=c.monthsShort),c.selectMonths&&void 0==d?f.node("select",f.group({min:0,max:11,i:1,node:"option",item:function(a){return[e[a],0,"value="+a+(k.month==a?" selected":"")+(k.year==m.year&&a<m.month||k.year==n.year&&a>n.month?" disabled":"")]}}),c.klass.selectMonth+" browser-default",(a?"":"disabled")+" "+f.ariaAttr({controls:b.$node[0].id+"_table"})+' title="'+c.labelMonthSelect+'"'):"short_months"==d?null!=i?f.node("div",e[i.month]):f.node("div",e[k.month]):f.node("div",e[k.month],c.klass.month)},r=function(d){var e=k.year,g=c.selectYears===!0?5:~~(c.selectYears/2);if(g){var h=m.year,i=n.year,j=e-g,l=e+g;if(h>j&&(l+=h-j,j=h),l>i){var o=j-h,p=l-i;j-=o>p?p:o,l=i}if(c.selectYears&&void 0==d)return f.node("select",f.group({min:j,max:l,i:1,node:"option",item:function(a){return[a,0,"value="+a+(e==a?" selected":"")]}}),c.klass.selectYear+" browser-default",(a?"":"disabled")+" "+f.ariaAttr({controls:b.$node[0].id+"_table"})+' title="'+c.labelYearSelect+'"')}return"raw"==d?f.node("div",e):f.node("div",e,c.klass.year)};return createDayLabel=function(){return null!=i?f.node("div",i.date):f.node("div",h.date)},createWeekdayLabel=function(){var a;a=null!=i?i.day:h.day;var b=c.weekdaysFull[a];return b},f.node("div",f.node("div",createWeekdayLabel(),"picker__weekday-display")+f.node("div",q("short_months"),c.klass.month_display)+f.node("div",createDayLabel(),c.klass.day_display)+f.node("div",r("raw"),c.klass.year_display),c.klass.date_display)+f.node("div",f.node("div",(c.selectYears?q()+r():q()+r())+p()+p(1),c.klass.header)+f.node("table",o+f.node("tbody",f.group({min:0,max:e-1,i:1,node:"tr",item:function(a){var e=c.firstDay&&0===b.create([k.year,k.month,1]).day?-7:0;return[f.group({min:d*a-k.day+e+1,max:function(){return this.min+d-1},i:1,node:"td",item:function(a){a=b.create([k.year,k.month,a+(c.firstDay?1:0)]);var d=i&&i.pick==a.pick,e=j&&j.pick==a.pick,g=l&&b.disabled(a)||a.pick<m.pick||a.pick>n.pick,o=f.trigger(b.formats.toString,b,[c.format,a]);return[f.node("div",a.date,function(b){return b.push(k.month==a.month?c.klass.infocus:c.klass.outfocus),h.pick==a.pick&&b.push(c.klass.now),d&&b.push(c.klass.selected),e&&b.push(c.klass.highlighted),g&&b.push(c.klass.disabled),b.join(" ")}([c.klass.day]),"data-pick="+a.pick+" "+f.ariaAttr({role:"gridcell",label:o,selected:d&&b.$node.val()===o?!0:null,activedescendant:e?!0:null,disabled:g?!0:null})),"",f.ariaAttr({role:"presentation"})]}})]}})),c.klass.table,'id="'+b.$node[0].id+'_table" '+f.ariaAttr({role:"grid",controls:b.$node[0].id,readonly:!0})),c.klass.calendar_container)+f.node("div",f.node("button",c.today,"btn-flat picker__today","type=button data-pick="+h.pick+(a&&!b.disabled(h)?"":" disabled")+" "+f.ariaAttr({controls:b.$node[0].id}))+f.node("button",c.clear,"btn-flat picker__clear","type=button data-clear=1"+(a?"":" disabled")+" "+f.ariaAttr({controls:b.$node[0].id}))+f.node("button",c.close,"btn-flat picker__close","type=button data-close=true "+(a?"":" disabled")+" "+f.ariaAttr({controls:b.$node[0].id})),c.klass.footer)},c.defaults=function(a){return{labelMonthNext:"Next month",labelMonthPrev:"Previous month",labelMonthSelect:"Select a month",labelYearSelect:"Select a year",monthsFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdaysFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysLetter:["S","M","T","W","T","F","S"],today:"Today",clear:"Clear",close:"Close",format:"d mmmm, yyyy",klass:{table:a+"table",header:a+"header",date_display:a+"date-display",day_display:a+"day-display",month_display:a+"month-display",year_display:a+"year-display",calendar_container:a+"calendar-container",navPrev:a+"nav--prev",navNext:a+"nav--next",navDisabled:a+"nav--disabled",month:a+"month",year:a+"year",selectMonth:a+"select--month",selectYear:a+"select--year",weekdays:a+"weekday",day:a+"day",disabled:a+"day--disabled",selected:a+"day--selected",highlighted:a+"day--highlighted",now:a+"day--today",infocus:a+"day--infocus",outfocus:a+"day--outfocus",footer:a+"footer",buttonClear:a+"button--clear",buttonToday:a+"button--today",buttonClose:a+"button--close"}}}(a.klasses().picker+"__"),a.extend("pickadate",c)}),function(a){function b(){var b=+a(this).attr("length"),c=+a(this).val().length,d=b>=c;a(this).parent().find('span[class="character-counter"]').html(c+"/"+b),e(d,a(this))}function c(b){var c=b.parent().find('span[class="character-counter"]');c.length||(c=a("<span/>").addClass("character-counter").css("float","right").css("font-size","12px").css("height",1),b.parent().append(c))}function d(){a(this).parent().find('span[class="character-counter"]').html("")}function e(a,b){var c=b.hasClass("invalid");a&&c?b.removeClass("invalid"):a||c||(b.removeClass("valid"),b.addClass("invalid"))}a.fn.characterCounter=function(){return this.each(function(){var e=a(this),f=e.parent().find('span[class="character-counter"]');if(!f.length){var g=void 0!==e.attr("length");g&&(e.on("input",b),e.on("focus",b),e.on("blur",d),c(e))}})},a(document).ready(function(){a("input, textarea").characterCounter()})}(jQuery),function(a){var b={init:function(b){var c={time_constant:200,dist:-100,shift:0,padding:0,full_width:!1,indicators:!1,no_wrap:!1};return b=a.extend(c,b),this.each(function(){function c(){"undefined"!=typeof window.ontouchstart&&(H[0].addEventListener("touchstart",l),H[0].addEventListener("touchmove",m),H[0].addEventListener("touchend",n)),H[0].addEventListener("mousedown",l),H[0].addEventListener("mousemove",m),H[0].addEventListener("mouseup",n),H[0].addEventListener("mouseleave",n),H[0].addEventListener("click",j)}function d(a){return a.targetTouches&&a.targetTouches.length>=1?a.targetTouches[0].clientX:a.clientX}function e(a){return a.targetTouches&&a.targetTouches.length>=1?a.targetTouches[0].clientY:a.clientY}function f(a){return a>=t?a%t:0>a?f(t+a%t):a}function g(a){var c,d,e,g,h,i,j;if(p="number"==typeof a?a:p,q=Math.floor((p+s/2)/s),e=p-q*s,g=0>e?1:-1,h=-g*e*2/s,d=t>>1,b.full_width?j="translateX(0)":(j="translateX("+(H[0].clientWidth-item_width)/2+"px) ",j+="translateY("+(H[0].clientHeight-item_width)/2+"px)"),I){var k=q%t,l=G.find(".indicator-item.active");l.index()!==k&&(l.removeClass("active"),G.find(".indicator-item").eq(k).addClass("active"))}for((!b.no_wrap||q>=0&&t>q)&&(i=o[f(q)],i.style[A]=j+" translateX("+-e/2+"px) translateX("+g*b.shift*h*c+"px) translateZ("+b.dist*h+"px)",i.style.zIndex=0,b.full_width?tweenedOpacity=1:tweenedOpacity=1-.2*h,i.style.opacity=tweenedOpacity,i.style.display="block"),c=1;d>=c;++c)b.full_width?(zTranslation=b.dist,tweenedOpacity=c===d&&0>e?1-h:1):(zTranslation=b.dist*(2*c+h*g),tweenedOpacity=1-.2*(2*c+h*g)),(!b.no_wrap||t>q+c)&&(i=o[f(q+c)],i.style[A]=j+" translateX("+(b.shift+(s*c-e)/2)+"px) translateZ("+zTranslation+"px)",i.style.zIndex=-c,i.style.opacity=tweenedOpacity,i.style.display="block"),b.full_width?(zTranslation=b.dist,tweenedOpacity=c===d&&e>0?1-h:1):(zTranslation=b.dist*(2*c-h*g),tweenedOpacity=1-.2*(2*c-h*g)),(!b.no_wrap||q-c>=0)&&(i=o[f(q-c)],i.style[A]=j+" translateX("+(-b.shift+(-s*c-e)/2)+"px) translateZ("+zTranslation+"px)",i.style.zIndex=-c,i.style.opacity=tweenedOpacity,i.style.display="block");(!b.no_wrap||q>=0&&t>q)&&(i=o[f(q)],i.style[A]=j+" translateX("+-e/2+"px) translateX("+g*b.shift*h+"px) translateZ("+b.dist*h+"px)",i.style.zIndex=0,b.full_width?tweenedOpacity=1:tweenedOpacity=1-.2*h,i.style.opacity=tweenedOpacity,i.style.display="block")}function h(){var a,b,c,d;a=Date.now(),b=a-C,C=a,c=p-B,B=p,d=1e3*c/(1+b),z=.8*d+.2*z}function i(){var a,c;w&&(a=Date.now()-C,c=w*Math.exp(-a/b.time_constant),c>2||-2>c?(g(x-c),requestAnimationFrame(i)):g(x))}function j(c){if(E)return c.preventDefault(),c.stopPropagation(),!1;if(!b.full_width){var d=a(c.target).closest(".carousel-item").index(),e=q%t-d;0!==e&&(c.preventDefault(),c.stopPropagation()),k(d)}}function k(a){var c=q%t-a;b.no_wrap||(0>c?Math.abs(c+t)<Math.abs(c)&&(c+=t):c>0&&Math.abs(c-t)<c&&(c-=t)),0>c?H.trigger("carouselNext",[Math.abs(c)]):c>0&&H.trigger("carouselPrev",[c])}function l(a){r=!0,E=!1,F=!1,u=d(a),v=e(a),z=w=0,B=p,C=Date.now(),clearInterval(D),D=setInterval(h,100)}function m(a){var b,c,f;if(r)if(b=d(a),y=e(a),c=u-b,f=Math.abs(v-y),30>f&&!F)(c>2||-2>c)&&(E=!0,u=b,g(p+c));else{if(E)return a.preventDefault(),a.stopPropagation(),!1;F=!0}return E?(a.preventDefault(),a.stopPropagation(),!1):void 0}function n(a){return r?(r=!1,clearInterval(D),x=p,(z>10||-10>z)&&(w=.9*z,x=p+w),x=Math.round(x/s)*s,b.no_wrap&&(x>=s*(t-1)?x=s*(t-1):0>x&&(x=0)),w=x-p,C=Date.now(),requestAnimationFrame(i),E&&(a.preventDefault(),a.stopPropagation()),!1):void 0}var o,p,q,r,s,t,u,v,w,x,z,A,B,C,D,E,F,G=a('<ul class="indicators"></ul>'),H=a(this),I=H.attr("data-indicators")||b.indicators;if(H.hasClass("initialized"))return a(this).trigger("carouselNext",[1e-6]),!0;if(b.full_width){b.dist=0;var J=H.find(".carousel-item img").first();J.length?imageHeight=J.on("load",function(){H.css("height",a(this).height())}):(imageHeight=H.find(".carousel-item").first().height(),H.css("height",imageHeight)),I&&H.find(".carousel-fixed-item").addClass("with-indicators")}H.addClass("initialized"),r=!1,p=x=0,o=[],item_width=H.find(".carousel-item").first().innerWidth(),s=2*item_width+b.padding,H.find(".carousel-item").each(function(b){if(o.push(a(this)[0]),I){var c=a('<li class="indicator-item"></li>');0===b&&c.addClass("active"),c.click(function(){var b=a(this).index();k(b)}),G.append(c)}}),I&&H.append(G),t=o.length,A="transform",["webkit","Moz","O","ms"].every(function(a){var b=a+"Transform";return"undefined"!=typeof document.body.style[b]?(A=b,!1):!0}),window.onresize=g,c(),g(p),a(this).on("carouselNext",function(a,b){void 0===b&&(b=1),x=p+s*b,p!==x&&(w=x-p,C=Date.now(),requestAnimationFrame(i))}),a(this).on("carouselPrev",function(a,b){void 0===b&&(b=1),x=p-s*b,p!==x&&(w=x-p,C=Date.now(),requestAnimationFrame(i))}),a(this).on("carouselSet",function(a,b){void 0===b&&(b=0),k(b)})})},next:function(b){a(this).trigger("carouselNext",[b])},prev:function(b){a(this).trigger("carouselPrev",[b])},set:function(b){a(this).trigger("carouselSet",[b])}};a.fn.carousel=function(c){return b[c]?b[c].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof c&&c?void a.error("Method "+c+" does not exist on jQuery.carousel"):b.init.apply(this,arguments)}}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImN1c3RvbS5qcyIsImluaXQuanMiLCJtYXRlcmlhbGl6ZS5qcyIsIm1hdGVyaWFsaXplLm1pbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2xCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2ptUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoic3dlcnNsdGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBib2xhaiBvbiAwMi8wMi8yMDE3LlxyXG4gKi9cclxuXHJcbi8vYW5pbWF0ZWQgc2Nyb2xsaW5nXHJcbiQoZnVuY3Rpb24oKSB7XHJcbiAgICAkKCdhW2hyZWYqPVwiI1wiXTpub3QoW2hyZWY9XCIjXCJdKScpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmIChsb2NhdGlvbi5wYXRobmFtZS5yZXBsYWNlKC9eXFwvLywnJykgPT0gdGhpcy5wYXRobmFtZS5yZXBsYWNlKC9eXFwvLywnJykgJiYgbG9jYXRpb24uaG9zdG5hbWUgPT0gdGhpcy5ob3N0bmFtZSkge1xyXG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gJCh0aGlzLmhhc2gpO1xyXG4gICAgICAgICAgICB0YXJnZXQgPSB0YXJnZXQubGVuZ3RoID8gdGFyZ2V0IDogJCgnW25hbWU9JyArIHRoaXMuaGFzaC5zbGljZSgxKSArJ10nKTtcclxuICAgICAgICAgICAgaWYgKHRhcmdldC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxUb3A6IHRhcmdldC5vZmZzZXQoKS50b3BcclxuICAgICAgICAgICAgICAgIH0sIDEwMDApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn0pOyIsIihmdW5jdGlvbigkKXtcclxuICAkKGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgJCgnLmJ1dHRvbi1jb2xsYXBzZScpLnNpZGVOYXYoKTtcclxuICAgICQoJy5wYXJhbGxheCcpLnBhcmFsbGF4KCk7XHJcblxyXG4gIH0pOyAvLyBlbmQgb2YgZG9jdW1lbnQgcmVhZHlcclxufSkoalF1ZXJ5KTsgLy8gZW5kIG9mIGpRdWVyeSBuYW1lIHNwYWNlIiwiLyohXHJcbiAqIE1hdGVyaWFsaXplIHYwLjk3LjggKGh0dHA6Ly9tYXRlcmlhbGl6ZWNzcy5jb20pXHJcbiAqIENvcHlyaWdodCAyMDE0LTIwMTUgTWF0ZXJpYWxpemVcclxuICogTUlUIExpY2Vuc2UgKGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9Eb2dmYWxvL21hdGVyaWFsaXplL21hc3Rlci9MSUNFTlNFKVxyXG4gKi9cclxuLy8gQ2hlY2sgZm9yIGpRdWVyeS5cclxuaWYgKHR5cGVvZihqUXVlcnkpID09PSAndW5kZWZpbmVkJykge1xyXG4gIHZhciBqUXVlcnk7XHJcbiAgLy8gQ2hlY2sgaWYgcmVxdWlyZSBpcyBhIGRlZmluZWQgZnVuY3Rpb24uXHJcbiAgaWYgKHR5cGVvZihyZXF1aXJlKSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgalF1ZXJ5ID0gJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG4gIC8vIEVsc2UgdXNlIHRoZSBkb2xsYXIgc2lnbiBhbGlhcy5cclxuICB9IGVsc2Uge1xyXG4gICAgalF1ZXJ5ID0gJDtcclxuICB9XHJcbn1cclxuOy8qXHJcbiAqIGpRdWVyeSBFYXNpbmcgdjEuMyAtIGh0dHA6Ly9nc2dkLmNvLnVrL3NhbmRib3gvanF1ZXJ5L2Vhc2luZy9cclxuICpcclxuICogVXNlcyB0aGUgYnVpbHQgaW4gZWFzaW5nIGNhcGFiaWxpdGllcyBhZGRlZCBJbiBqUXVlcnkgMS4xXHJcbiAqIHRvIG9mZmVyIG11bHRpcGxlIGVhc2luZyBvcHRpb25zXHJcbiAqXHJcbiAqIFRFUk1TIE9GIFVTRSAtIGpRdWVyeSBFYXNpbmdcclxuICpcclxuICogT3BlbiBzb3VyY2UgdW5kZXIgdGhlIEJTRCBMaWNlbnNlLlxyXG4gKlxyXG4gKiBDb3B5cmlnaHQgwqkgMjAwOCBHZW9yZ2UgTWNHaW5sZXkgU21pdGhcclxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuICpcclxuICogUmVkaXN0cmlidXRpb24gYW5kIHVzZSBpbiBzb3VyY2UgYW5kIGJpbmFyeSBmb3Jtcywgd2l0aCBvciB3aXRob3V0IG1vZGlmaWNhdGlvbixcclxuICogYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmUgbWV0OlxyXG4gKlxyXG4gKiBSZWRpc3RyaWJ1dGlvbnMgb2Ygc291cmNlIGNvZGUgbXVzdCByZXRhaW4gdGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UsIHRoaXMgbGlzdCBvZlxyXG4gKiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuXHJcbiAqIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSwgdGhpcyBsaXN0XHJcbiAqIG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lciBpbiB0aGUgZG9jdW1lbnRhdGlvbiBhbmQvb3Igb3RoZXIgbWF0ZXJpYWxzXHJcbiAqIHByb3ZpZGVkIHdpdGggdGhlIGRpc3RyaWJ1dGlvbi5cclxuICpcclxuICogTmVpdGhlciB0aGUgbmFtZSBvZiB0aGUgYXV0aG9yIG5vciB0aGUgbmFtZXMgb2YgY29udHJpYnV0b3JzIG1heSBiZSB1c2VkIHRvIGVuZG9yc2VcclxuICogb3IgcHJvbW90ZSBwcm9kdWN0cyBkZXJpdmVkIGZyb20gdGhpcyBzb2Z0d2FyZSB3aXRob3V0IHNwZWNpZmljIHByaW9yIHdyaXR0ZW4gcGVybWlzc2lvbi5cclxuICpcclxuICogVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SUyBcIkFTIElTXCIgQU5EIEFOWVxyXG4gKiBFWFBSRVNTIE9SIElNUExJRUQgV0FSUkFOVElFUywgSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFRIRSBJTVBMSUVEIFdBUlJBTlRJRVMgT0ZcclxuICogTUVSQ0hBTlRBQklMSVRZIEFORCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBUkUgRElTQ0xBSU1FRC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXHJcbiAqICBDT1BZUklHSFQgT1dORVIgT1IgQ09OVFJJQlVUT1JTIEJFIExJQUJMRSBGT1IgQU5ZIERJUkVDVCwgSU5ESVJFQ1QsIElOQ0lERU5UQUwsIFNQRUNJQUwsXHJcbiAqICBFWEVNUExBUlksIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyAoSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFBST0NVUkVNRU5UIE9GIFNVQlNUSVRVVEVcclxuICogIEdPT0RTIE9SIFNFUlZJQ0VTOyBMT1NTIE9GIFVTRSwgREFUQSwgT1IgUFJPRklUUzsgT1IgQlVTSU5FU1MgSU5URVJSVVBUSU9OKSBIT1dFVkVSIENBVVNFRFxyXG4gKiBBTkQgT04gQU5ZIFRIRU9SWSBPRiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQ09OVFJBQ1QsIFNUUklDVCBMSUFCSUxJVFksIE9SIFRPUlQgKElOQ0xVRElOR1xyXG4gKiAgTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRSBPRiBUSElTIFNPRlRXQVJFLCBFVkVOIElGIEFEVklTRURcclxuICogT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLlxyXG4gKlxyXG4qL1xyXG5cclxuLy8gdDogY3VycmVudCB0aW1lLCBiOiBiZWdJbm5JbmcgdmFsdWUsIGM6IGNoYW5nZSBJbiB2YWx1ZSwgZDogZHVyYXRpb25cclxualF1ZXJ5LmVhc2luZ1snanN3aW5nJ10gPSBqUXVlcnkuZWFzaW5nWydzd2luZyddO1xyXG5cclxualF1ZXJ5LmV4dGVuZCggalF1ZXJ5LmVhc2luZyxcclxue1xyXG5cdGRlZjogJ2Vhc2VPdXRRdWFkJyxcclxuXHRzd2luZzogZnVuY3Rpb24gKHgsIHQsIGIsIGMsIGQpIHtcclxuXHRcdC8vYWxlcnQoalF1ZXJ5LmVhc2luZy5kZWZhdWx0KTtcclxuXHRcdHJldHVybiBqUXVlcnkuZWFzaW5nW2pRdWVyeS5lYXNpbmcuZGVmXSh4LCB0LCBiLCBjLCBkKTtcclxuXHR9LFxyXG5cdGVhc2VJblF1YWQ6IGZ1bmN0aW9uICh4LCB0LCBiLCBjLCBkKSB7XHJcblx0XHRyZXR1cm4gYyoodC89ZCkqdCArIGI7XHJcblx0fSxcclxuXHRlYXNlT3V0UXVhZDogZnVuY3Rpb24gKHgsIHQsIGIsIGMsIGQpIHtcclxuXHRcdHJldHVybiAtYyAqKHQvPWQpKih0LTIpICsgYjtcclxuXHR9LFxyXG5cdGVhc2VJbk91dFF1YWQ6IGZ1bmN0aW9uICh4LCB0LCBiLCBjLCBkKSB7XHJcblx0XHRpZiAoKHQvPWQvMikgPCAxKSByZXR1cm4gYy8yKnQqdCArIGI7XHJcblx0XHRyZXR1cm4gLWMvMiAqICgoLS10KSoodC0yKSAtIDEpICsgYjtcclxuXHR9LFxyXG5cdGVhc2VJbkN1YmljOiBmdW5jdGlvbiAoeCwgdCwgYiwgYywgZCkge1xyXG5cdFx0cmV0dXJuIGMqKHQvPWQpKnQqdCArIGI7XHJcblx0fSxcclxuXHRlYXNlT3V0Q3ViaWM6IGZ1bmN0aW9uICh4LCB0LCBiLCBjLCBkKSB7XHJcblx0XHRyZXR1cm4gYyooKHQ9dC9kLTEpKnQqdCArIDEpICsgYjtcclxuXHR9LFxyXG5cdGVhc2VJbk91dEN1YmljOiBmdW5jdGlvbiAoeCwgdCwgYiwgYywgZCkge1xyXG5cdFx0aWYgKCh0Lz1kLzIpIDwgMSkgcmV0dXJuIGMvMip0KnQqdCArIGI7XHJcblx0XHRyZXR1cm4gYy8yKigodC09MikqdCp0ICsgMikgKyBiO1xyXG5cdH0sXHJcblx0ZWFzZUluUXVhcnQ6IGZ1bmN0aW9uICh4LCB0LCBiLCBjLCBkKSB7XHJcblx0XHRyZXR1cm4gYyoodC89ZCkqdCp0KnQgKyBiO1xyXG5cdH0sXHJcblx0ZWFzZU91dFF1YXJ0OiBmdW5jdGlvbiAoeCwgdCwgYiwgYywgZCkge1xyXG5cdFx0cmV0dXJuIC1jICogKCh0PXQvZC0xKSp0KnQqdCAtIDEpICsgYjtcclxuXHR9LFxyXG5cdGVhc2VJbk91dFF1YXJ0OiBmdW5jdGlvbiAoeCwgdCwgYiwgYywgZCkge1xyXG5cdFx0aWYgKCh0Lz1kLzIpIDwgMSkgcmV0dXJuIGMvMip0KnQqdCp0ICsgYjtcclxuXHRcdHJldHVybiAtYy8yICogKCh0LT0yKSp0KnQqdCAtIDIpICsgYjtcclxuXHR9LFxyXG5cdGVhc2VJblF1aW50OiBmdW5jdGlvbiAoeCwgdCwgYiwgYywgZCkge1xyXG5cdFx0cmV0dXJuIGMqKHQvPWQpKnQqdCp0KnQgKyBiO1xyXG5cdH0sXHJcblx0ZWFzZU91dFF1aW50OiBmdW5jdGlvbiAoeCwgdCwgYiwgYywgZCkge1xyXG5cdFx0cmV0dXJuIGMqKCh0PXQvZC0xKSp0KnQqdCp0ICsgMSkgKyBiO1xyXG5cdH0sXHJcblx0ZWFzZUluT3V0UXVpbnQ6IGZ1bmN0aW9uICh4LCB0LCBiLCBjLCBkKSB7XHJcblx0XHRpZiAoKHQvPWQvMikgPCAxKSByZXR1cm4gYy8yKnQqdCp0KnQqdCArIGI7XHJcblx0XHRyZXR1cm4gYy8yKigodC09MikqdCp0KnQqdCArIDIpICsgYjtcclxuXHR9LFxyXG5cdGVhc2VJblNpbmU6IGZ1bmN0aW9uICh4LCB0LCBiLCBjLCBkKSB7XHJcblx0XHRyZXR1cm4gLWMgKiBNYXRoLmNvcyh0L2QgKiAoTWF0aC5QSS8yKSkgKyBjICsgYjtcclxuXHR9LFxyXG5cdGVhc2VPdXRTaW5lOiBmdW5jdGlvbiAoeCwgdCwgYiwgYywgZCkge1xyXG5cdFx0cmV0dXJuIGMgKiBNYXRoLnNpbih0L2QgKiAoTWF0aC5QSS8yKSkgKyBiO1xyXG5cdH0sXHJcblx0ZWFzZUluT3V0U2luZTogZnVuY3Rpb24gKHgsIHQsIGIsIGMsIGQpIHtcclxuXHRcdHJldHVybiAtYy8yICogKE1hdGguY29zKE1hdGguUEkqdC9kKSAtIDEpICsgYjtcclxuXHR9LFxyXG5cdGVhc2VJbkV4cG86IGZ1bmN0aW9uICh4LCB0LCBiLCBjLCBkKSB7XHJcblx0XHRyZXR1cm4gKHQ9PTApID8gYiA6IGMgKiBNYXRoLnBvdygyLCAxMCAqICh0L2QgLSAxKSkgKyBiO1xyXG5cdH0sXHJcblx0ZWFzZU91dEV4cG86IGZ1bmN0aW9uICh4LCB0LCBiLCBjLCBkKSB7XHJcblx0XHRyZXR1cm4gKHQ9PWQpID8gYitjIDogYyAqICgtTWF0aC5wb3coMiwgLTEwICogdC9kKSArIDEpICsgYjtcclxuXHR9LFxyXG5cdGVhc2VJbk91dEV4cG86IGZ1bmN0aW9uICh4LCB0LCBiLCBjLCBkKSB7XHJcblx0XHRpZiAodD09MCkgcmV0dXJuIGI7XHJcblx0XHRpZiAodD09ZCkgcmV0dXJuIGIrYztcclxuXHRcdGlmICgodC89ZC8yKSA8IDEpIHJldHVybiBjLzIgKiBNYXRoLnBvdygyLCAxMCAqICh0IC0gMSkpICsgYjtcclxuXHRcdHJldHVybiBjLzIgKiAoLU1hdGgucG93KDIsIC0xMCAqIC0tdCkgKyAyKSArIGI7XHJcblx0fSxcclxuXHRlYXNlSW5DaXJjOiBmdW5jdGlvbiAoeCwgdCwgYiwgYywgZCkge1xyXG5cdFx0cmV0dXJuIC1jICogKE1hdGguc3FydCgxIC0gKHQvPWQpKnQpIC0gMSkgKyBiO1xyXG5cdH0sXHJcblx0ZWFzZU91dENpcmM6IGZ1bmN0aW9uICh4LCB0LCBiLCBjLCBkKSB7XHJcblx0XHRyZXR1cm4gYyAqIE1hdGguc3FydCgxIC0gKHQ9dC9kLTEpKnQpICsgYjtcclxuXHR9LFxyXG5cdGVhc2VJbk91dENpcmM6IGZ1bmN0aW9uICh4LCB0LCBiLCBjLCBkKSB7XHJcblx0XHRpZiAoKHQvPWQvMikgPCAxKSByZXR1cm4gLWMvMiAqIChNYXRoLnNxcnQoMSAtIHQqdCkgLSAxKSArIGI7XHJcblx0XHRyZXR1cm4gYy8yICogKE1hdGguc3FydCgxIC0gKHQtPTIpKnQpICsgMSkgKyBiO1xyXG5cdH0sXHJcblx0ZWFzZUluRWxhc3RpYzogZnVuY3Rpb24gKHgsIHQsIGIsIGMsIGQpIHtcclxuXHRcdHZhciBzPTEuNzAxNTg7dmFyIHA9MDt2YXIgYT1jO1xyXG5cdFx0aWYgKHQ9PTApIHJldHVybiBiOyAgaWYgKCh0Lz1kKT09MSkgcmV0dXJuIGIrYzsgIGlmICghcCkgcD1kKi4zO1xyXG5cdFx0aWYgKGEgPCBNYXRoLmFicyhjKSkgeyBhPWM7IHZhciBzPXAvNDsgfVxyXG5cdFx0ZWxzZSB2YXIgcyA9IHAvKDIqTWF0aC5QSSkgKiBNYXRoLmFzaW4gKGMvYSk7XHJcblx0XHRyZXR1cm4gLShhKk1hdGgucG93KDIsMTAqKHQtPTEpKSAqIE1hdGguc2luKCAodCpkLXMpKigyKk1hdGguUEkpL3AgKSkgKyBiO1xyXG5cdH0sXHJcblx0ZWFzZU91dEVsYXN0aWM6IGZ1bmN0aW9uICh4LCB0LCBiLCBjLCBkKSB7XHJcblx0XHR2YXIgcz0xLjcwMTU4O3ZhciBwPTA7dmFyIGE9YztcclxuXHRcdGlmICh0PT0wKSByZXR1cm4gYjsgIGlmICgodC89ZCk9PTEpIHJldHVybiBiK2M7ICBpZiAoIXApIHA9ZCouMztcclxuXHRcdGlmIChhIDwgTWF0aC5hYnMoYykpIHsgYT1jOyB2YXIgcz1wLzQ7IH1cclxuXHRcdGVsc2UgdmFyIHMgPSBwLygyKk1hdGguUEkpICogTWF0aC5hc2luIChjL2EpO1xyXG5cdFx0cmV0dXJuIGEqTWF0aC5wb3coMiwtMTAqdCkgKiBNYXRoLnNpbiggKHQqZC1zKSooMipNYXRoLlBJKS9wICkgKyBjICsgYjtcclxuXHR9LFxyXG5cdGVhc2VJbk91dEVsYXN0aWM6IGZ1bmN0aW9uICh4LCB0LCBiLCBjLCBkKSB7XHJcblx0XHR2YXIgcz0xLjcwMTU4O3ZhciBwPTA7dmFyIGE9YztcclxuXHRcdGlmICh0PT0wKSByZXR1cm4gYjsgIGlmICgodC89ZC8yKT09MikgcmV0dXJuIGIrYzsgIGlmICghcCkgcD1kKiguMyoxLjUpO1xyXG5cdFx0aWYgKGEgPCBNYXRoLmFicyhjKSkgeyBhPWM7IHZhciBzPXAvNDsgfVxyXG5cdFx0ZWxzZSB2YXIgcyA9IHAvKDIqTWF0aC5QSSkgKiBNYXRoLmFzaW4gKGMvYSk7XHJcblx0XHRpZiAodCA8IDEpIHJldHVybiAtLjUqKGEqTWF0aC5wb3coMiwxMCoodC09MSkpICogTWF0aC5zaW4oICh0KmQtcykqKDIqTWF0aC5QSSkvcCApKSArIGI7XHJcblx0XHRyZXR1cm4gYSpNYXRoLnBvdygyLC0xMCoodC09MSkpICogTWF0aC5zaW4oICh0KmQtcykqKDIqTWF0aC5QSSkvcCApKi41ICsgYyArIGI7XHJcblx0fSxcclxuXHRlYXNlSW5CYWNrOiBmdW5jdGlvbiAoeCwgdCwgYiwgYywgZCwgcykge1xyXG5cdFx0aWYgKHMgPT0gdW5kZWZpbmVkKSBzID0gMS43MDE1ODtcclxuXHRcdHJldHVybiBjKih0Lz1kKSp0KigocysxKSp0IC0gcykgKyBiO1xyXG5cdH0sXHJcblx0ZWFzZU91dEJhY2s6IGZ1bmN0aW9uICh4LCB0LCBiLCBjLCBkLCBzKSB7XHJcblx0XHRpZiAocyA9PSB1bmRlZmluZWQpIHMgPSAxLjcwMTU4O1xyXG5cdFx0cmV0dXJuIGMqKCh0PXQvZC0xKSp0KigocysxKSp0ICsgcykgKyAxKSArIGI7XHJcblx0fSxcclxuXHRlYXNlSW5PdXRCYWNrOiBmdW5jdGlvbiAoeCwgdCwgYiwgYywgZCwgcykge1xyXG5cdFx0aWYgKHMgPT0gdW5kZWZpbmVkKSBzID0gMS43MDE1ODtcclxuXHRcdGlmICgodC89ZC8yKSA8IDEpIHJldHVybiBjLzIqKHQqdCooKChzKj0oMS41MjUpKSsxKSp0IC0gcykpICsgYjtcclxuXHRcdHJldHVybiBjLzIqKCh0LT0yKSp0KigoKHMqPSgxLjUyNSkpKzEpKnQgKyBzKSArIDIpICsgYjtcclxuXHR9LFxyXG5cdGVhc2VJbkJvdW5jZTogZnVuY3Rpb24gKHgsIHQsIGIsIGMsIGQpIHtcclxuXHRcdHJldHVybiBjIC0galF1ZXJ5LmVhc2luZy5lYXNlT3V0Qm91bmNlICh4LCBkLXQsIDAsIGMsIGQpICsgYjtcclxuXHR9LFxyXG5cdGVhc2VPdXRCb3VuY2U6IGZ1bmN0aW9uICh4LCB0LCBiLCBjLCBkKSB7XHJcblx0XHRpZiAoKHQvPWQpIDwgKDEvMi43NSkpIHtcclxuXHRcdFx0cmV0dXJuIGMqKDcuNTYyNSp0KnQpICsgYjtcclxuXHRcdH0gZWxzZSBpZiAodCA8ICgyLzIuNzUpKSB7XHJcblx0XHRcdHJldHVybiBjKig3LjU2MjUqKHQtPSgxLjUvMi43NSkpKnQgKyAuNzUpICsgYjtcclxuXHRcdH0gZWxzZSBpZiAodCA8ICgyLjUvMi43NSkpIHtcclxuXHRcdFx0cmV0dXJuIGMqKDcuNTYyNSoodC09KDIuMjUvMi43NSkpKnQgKyAuOTM3NSkgKyBiO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0cmV0dXJuIGMqKDcuNTYyNSoodC09KDIuNjI1LzIuNzUpKSp0ICsgLjk4NDM3NSkgKyBiO1xyXG5cdFx0fVxyXG5cdH0sXHJcblx0ZWFzZUluT3V0Qm91bmNlOiBmdW5jdGlvbiAoeCwgdCwgYiwgYywgZCkge1xyXG5cdFx0aWYgKHQgPCBkLzIpIHJldHVybiBqUXVlcnkuZWFzaW5nLmVhc2VJbkJvdW5jZSAoeCwgdCoyLCAwLCBjLCBkKSAqIC41ICsgYjtcclxuXHRcdHJldHVybiBqUXVlcnkuZWFzaW5nLmVhc2VPdXRCb3VuY2UgKHgsIHQqMi1kLCAwLCBjLCBkKSAqIC41ICsgYyouNSArIGI7XHJcblx0fVxyXG59KTtcclxuXHJcbi8qXHJcbiAqXHJcbiAqIFRFUk1TIE9GIFVTRSAtIEVBU0lORyBFUVVBVElPTlNcclxuICpcclxuICogT3BlbiBzb3VyY2UgdW5kZXIgdGhlIEJTRCBMaWNlbnNlLlxyXG4gKlxyXG4gKiBDb3B5cmlnaHQgwqkgMjAwMSBSb2JlcnQgUGVubmVyXHJcbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbiAqXHJcbiAqIFJlZGlzdHJpYnV0aW9uIGFuZCB1c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dCBtb2RpZmljYXRpb24sXHJcbiAqIGFyZSBwZXJtaXR0ZWQgcHJvdmlkZWQgdGhhdCB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnMgYXJlIG1ldDpcclxuICpcclxuICogUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLCB0aGlzIGxpc3Qgb2ZcclxuICogY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyLlxyXG4gKiBSZWRpc3RyaWJ1dGlvbnMgaW4gYmluYXJ5IGZvcm0gbXVzdCByZXByb2R1Y2UgdGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UsIHRoaXMgbGlzdFxyXG4gKiBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIgaW4gdGhlIGRvY3VtZW50YXRpb24gYW5kL29yIG90aGVyIG1hdGVyaWFsc1xyXG4gKiBwcm92aWRlZCB3aXRoIHRoZSBkaXN0cmlidXRpb24uXHJcbiAqXHJcbiAqIE5laXRoZXIgdGhlIG5hbWUgb2YgdGhlIGF1dGhvciBub3IgdGhlIG5hbWVzIG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgdXNlZCB0byBlbmRvcnNlXHJcbiAqIG9yIHByb21vdGUgcHJvZHVjdHMgZGVyaXZlZCBmcm9tIHRoaXMgc29mdHdhcmUgd2l0aG91dCBzcGVjaWZpYyBwcmlvciB3cml0dGVuIHBlcm1pc3Npb24uXHJcbiAqXHJcbiAqIFRISVMgU09GVFdBUkUgSVMgUFJPVklERUQgQlkgVEhFIENPUFlSSUdIVCBIT0xERVJTIEFORCBDT05UUklCVVRPUlMgXCJBUyBJU1wiIEFORCBBTllcclxuICogRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBUSEUgSU1QTElFRCBXQVJSQU5USUVTIE9GXHJcbiAqIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQVJFIERJU0NMQUlNRUQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxyXG4gKiAgQ09QWVJJR0hUIE9XTkVSIE9SIENPTlRSSUJVVE9SUyBCRSBMSUFCTEUgRk9SIEFOWSBESVJFQ1QsIElORElSRUNULCBJTkNJREVOVEFMLCBTUEVDSUFMLFxyXG4gKiAgRVhFTVBMQVJZLCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgKElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRiBTVUJTVElUVVRFXHJcbiAqICBHT09EUyBPUiBTRVJWSUNFUzsgTE9TUyBPRiBVU0UsIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRURcclxuICogQU5EIE9OIEFOWSBUSEVPUlkgT0YgTElBQklMSVRZLCBXSEVUSEVSIElOIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLCBPUiBUT1JUIChJTkNMVURJTkdcclxuICogIE5FR0xJR0VOQ0UgT1IgT1RIRVJXSVNFKSBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0UgT0YgVEhJUyBTT0ZUV0FSRSwgRVZFTiBJRiBBRFZJU0VEXHJcbiAqIE9GIFRIRSBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS5cclxuICpcclxuICovOyAgICAvLyBDdXN0b20gRWFzaW5nXHJcbiAgICBqUXVlcnkuZXh0ZW5kKCBqUXVlcnkuZWFzaW5nLFxyXG4gICAge1xyXG4gICAgICBlYXNlSW5PdXRNYXRlcmlhbDogZnVuY3Rpb24gKHgsIHQsIGIsIGMsIGQpIHtcclxuICAgICAgICBpZiAoKHQvPWQvMikgPCAxKSByZXR1cm4gYy8yKnQqdCArIGI7XHJcbiAgICAgICAgcmV0dXJuIGMvNCooKHQtPTIpKnQqdCArIDIpICsgYjtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG47LyohIFZlbG9jaXR5SlMub3JnICgxLjIuMykuIChDKSAyMDE0IEp1bGlhbiBTaGFwaXJvLiBNSVQgQGxpY2Vuc2U6IGVuLndpa2lwZWRpYS5vcmcvd2lraS9NSVRfTGljZW5zZSAqL1xyXG4vKiEgVmVsb2NpdHlKUy5vcmcgalF1ZXJ5IFNoaW0gKDEuMC4xKS4gKEMpIDIwMTQgVGhlIGpRdWVyeSBGb3VuZGF0aW9uLiBNSVQgQGxpY2Vuc2U6IGVuLndpa2lwZWRpYS5vcmcvd2lraS9NSVRfTGljZW5zZS4gKi9cclxuLyohIE5vdGUgdGhhdCB0aGlzIGhhcyBiZWVuIG1vZGlmaWVkIGJ5IE1hdGVyaWFsaXplIHRvIGNvbmZpcm0gdGhhdCBWZWxvY2l0eSBpcyBub3QgYWxyZWFkeSBiZWluZyBpbXBvcnRlZC4gKi9cclxualF1ZXJ5LlZlbG9jaXR5P2NvbnNvbGUubG9nKFwiVmVsb2NpdHkgaXMgYWxyZWFkeSBsb2FkZWQuIFlvdSBtYXkgYmUgbmVlZGxlc3NseSBpbXBvcnRpbmcgVmVsb2NpdHkgYWdhaW47IG5vdGUgdGhhdCBNYXRlcmlhbGl6ZSBpbmNsdWRlcyBWZWxvY2l0eS5cIik6KCFmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUpe3ZhciB0PWUubGVuZ3RoLGE9ci50eXBlKGUpO3JldHVyblwiZnVuY3Rpb25cIj09PWF8fHIuaXNXaW5kb3coZSk/ITE6MT09PWUubm9kZVR5cGUmJnQ/ITA6XCJhcnJheVwiPT09YXx8MD09PXR8fFwibnVtYmVyXCI9PXR5cGVvZiB0JiZ0PjAmJnQtMSBpbiBlfWlmKCFlLmpRdWVyeSl7dmFyIHI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbmV3IHIuZm4uaW5pdChlLHQpfTtyLmlzV2luZG93PWZ1bmN0aW9uKGUpe3JldHVybiBudWxsIT1lJiZlPT1lLndpbmRvd30sci50eXBlPWZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lP2UrXCJcIjpcIm9iamVjdFwiPT10eXBlb2YgZXx8XCJmdW5jdGlvblwiPT10eXBlb2YgZT9uW2kuY2FsbChlKV18fFwib2JqZWN0XCI6dHlwZW9mIGV9LHIuaXNBcnJheT1BcnJheS5pc0FycmF5fHxmdW5jdGlvbihlKXtyZXR1cm5cImFycmF5XCI9PT1yLnR5cGUoZSl9LHIuaXNQbGFpbk9iamVjdD1mdW5jdGlvbihlKXt2YXIgdDtpZighZXx8XCJvYmplY3RcIiE9PXIudHlwZShlKXx8ZS5ub2RlVHlwZXx8ci5pc1dpbmRvdyhlKSlyZXR1cm4hMTt0cnl7aWYoZS5jb25zdHJ1Y3RvciYmIW8uY2FsbChlLFwiY29uc3RydWN0b3JcIikmJiFvLmNhbGwoZS5jb25zdHJ1Y3Rvci5wcm90b3R5cGUsXCJpc1Byb3RvdHlwZU9mXCIpKXJldHVybiExfWNhdGNoKGEpe3JldHVybiExfWZvcih0IGluIGUpO3JldHVybiB2b2lkIDA9PT10fHxvLmNhbGwoZSx0KX0sci5lYWNoPWZ1bmN0aW9uKGUscixhKXt2YXIgbixvPTAsaT1lLmxlbmd0aCxzPXQoZSk7aWYoYSl7aWYocylmb3IoO2k+byYmKG49ci5hcHBseShlW29dLGEpLG4hPT0hMSk7bysrKTtlbHNlIGZvcihvIGluIGUpaWYobj1yLmFwcGx5KGVbb10sYSksbj09PSExKWJyZWFrfWVsc2UgaWYocylmb3IoO2k+byYmKG49ci5jYWxsKGVbb10sbyxlW29dKSxuIT09ITEpO28rKyk7ZWxzZSBmb3IobyBpbiBlKWlmKG49ci5jYWxsKGVbb10sbyxlW29dKSxuPT09ITEpYnJlYWs7cmV0dXJuIGV9LHIuZGF0YT1mdW5jdGlvbihlLHQsbil7aWYodm9pZCAwPT09bil7dmFyIG89ZVtyLmV4cGFuZG9dLGk9byYmYVtvXTtpZih2b2lkIDA9PT10KXJldHVybiBpO2lmKGkmJnQgaW4gaSlyZXR1cm4gaVt0XX1lbHNlIGlmKHZvaWQgMCE9PXQpe3ZhciBvPWVbci5leHBhbmRvXXx8KGVbci5leHBhbmRvXT0rK3IudXVpZCk7cmV0dXJuIGFbb109YVtvXXx8e30sYVtvXVt0XT1uLG59fSxyLnJlbW92ZURhdGE9ZnVuY3Rpb24oZSx0KXt2YXIgbj1lW3IuZXhwYW5kb10sbz1uJiZhW25dO28mJnIuZWFjaCh0LGZ1bmN0aW9uKGUsdCl7ZGVsZXRlIG9bdF19KX0sci5leHRlbmQ9ZnVuY3Rpb24oKXt2YXIgZSx0LGEsbixvLGkscz1hcmd1bWVudHNbMF18fHt9LGw9MSx1PWFyZ3VtZW50cy5sZW5ndGgsYz0hMTtmb3IoXCJib29sZWFuXCI9PXR5cGVvZiBzJiYoYz1zLHM9YXJndW1lbnRzW2xdfHx7fSxsKyspLFwib2JqZWN0XCIhPXR5cGVvZiBzJiZcImZ1bmN0aW9uXCIhPT1yLnR5cGUocykmJihzPXt9KSxsPT09dSYmKHM9dGhpcyxsLS0pO3U+bDtsKyspaWYobnVsbCE9KG89YXJndW1lbnRzW2xdKSlmb3IobiBpbiBvKWU9c1tuXSxhPW9bbl0scyE9PWEmJihjJiZhJiYoci5pc1BsYWluT2JqZWN0KGEpfHwodD1yLmlzQXJyYXkoYSkpKT8odD8odD0hMSxpPWUmJnIuaXNBcnJheShlKT9lOltdKTppPWUmJnIuaXNQbGFpbk9iamVjdChlKT9lOnt9LHNbbl09ci5leHRlbmQoYyxpLGEpKTp2b2lkIDAhPT1hJiYoc1tuXT1hKSk7cmV0dXJuIHN9LHIucXVldWU9ZnVuY3Rpb24oZSxhLG4pe2Z1bmN0aW9uIG8oZSxyKXt2YXIgYT1yfHxbXTtyZXR1cm4gbnVsbCE9ZSYmKHQoT2JqZWN0KGUpKT8hZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9K3QubGVuZ3RoLGE9MCxuPWUubGVuZ3RoO3I+YTspZVtuKytdPXRbYSsrXTtpZihyIT09cilmb3IoO3ZvaWQgMCE9PXRbYV07KWVbbisrXT10W2ErK107cmV0dXJuIGUubGVuZ3RoPW4sZX0oYSxcInN0cmluZ1wiPT10eXBlb2YgZT9bZV06ZSk6W10ucHVzaC5jYWxsKGEsZSkpLGF9aWYoZSl7YT0oYXx8XCJmeFwiKStcInF1ZXVlXCI7dmFyIGk9ci5kYXRhKGUsYSk7cmV0dXJuIG4/KCFpfHxyLmlzQXJyYXkobik/aT1yLmRhdGEoZSxhLG8obikpOmkucHVzaChuKSxpKTppfHxbXX19LHIuZGVxdWV1ZT1mdW5jdGlvbihlLHQpe3IuZWFjaChlLm5vZGVUeXBlP1tlXTplLGZ1bmN0aW9uKGUsYSl7dD10fHxcImZ4XCI7dmFyIG49ci5xdWV1ZShhLHQpLG89bi5zaGlmdCgpO1wiaW5wcm9ncmVzc1wiPT09byYmKG89bi5zaGlmdCgpKSxvJiYoXCJmeFwiPT09dCYmbi51bnNoaWZ0KFwiaW5wcm9ncmVzc1wiKSxvLmNhbGwoYSxmdW5jdGlvbigpe3IuZGVxdWV1ZShhLHQpfSkpfSl9LHIuZm49ci5wcm90b3R5cGU9e2luaXQ6ZnVuY3Rpb24oZSl7aWYoZS5ub2RlVHlwZSlyZXR1cm4gdGhpc1swXT1lLHRoaXM7dGhyb3cgbmV3IEVycm9yKFwiTm90IGEgRE9NIG5vZGUuXCIpfSxvZmZzZXQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzWzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdD90aGlzWzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOnt0b3A6MCxsZWZ0OjB9O3JldHVybnt0b3A6dC50b3ArKGUucGFnZVlPZmZzZXR8fGRvY3VtZW50LnNjcm9sbFRvcHx8MCktKGRvY3VtZW50LmNsaWVudFRvcHx8MCksbGVmdDp0LmxlZnQrKGUucGFnZVhPZmZzZXR8fGRvY3VtZW50LnNjcm9sbExlZnR8fDApLShkb2N1bWVudC5jbGllbnRMZWZ0fHwwKX19LHBvc2l0aW9uOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe2Zvcih2YXIgZT10aGlzLm9mZnNldFBhcmVudHx8ZG9jdW1lbnQ7ZSYmXCJodG1sXCI9PT0hZS5ub2RlVHlwZS50b0xvd2VyQ2FzZSYmXCJzdGF0aWNcIj09PWUuc3R5bGUucG9zaXRpb247KWU9ZS5vZmZzZXRQYXJlbnQ7cmV0dXJuIGV8fGRvY3VtZW50fXZhciB0PXRoaXNbMF0sZT1lLmFwcGx5KHQpLGE9dGhpcy5vZmZzZXQoKSxuPS9eKD86Ym9keXxodG1sKSQvaS50ZXN0KGUubm9kZU5hbWUpP3t0b3A6MCxsZWZ0OjB9OnIoZSkub2Zmc2V0KCk7cmV0dXJuIGEudG9wLT1wYXJzZUZsb2F0KHQuc3R5bGUubWFyZ2luVG9wKXx8MCxhLmxlZnQtPXBhcnNlRmxvYXQodC5zdHlsZS5tYXJnaW5MZWZ0KXx8MCxlLnN0eWxlJiYobi50b3ArPXBhcnNlRmxvYXQoZS5zdHlsZS5ib3JkZXJUb3BXaWR0aCl8fDAsbi5sZWZ0Kz1wYXJzZUZsb2F0KGUuc3R5bGUuYm9yZGVyTGVmdFdpZHRoKXx8MCkse3RvcDphLnRvcC1uLnRvcCxsZWZ0OmEubGVmdC1uLmxlZnR9fX07dmFyIGE9e307ci5leHBhbmRvPVwidmVsb2NpdHlcIisobmV3IERhdGUpLmdldFRpbWUoKSxyLnV1aWQ9MDtmb3IodmFyIG49e30sbz1uLmhhc093blByb3BlcnR5LGk9bi50b1N0cmluZyxzPVwiQm9vbGVhbiBOdW1iZXIgU3RyaW5nIEZ1bmN0aW9uIEFycmF5IERhdGUgUmVnRXhwIE9iamVjdCBFcnJvclwiLnNwbGl0KFwiIFwiKSxsPTA7bDxzLmxlbmd0aDtsKyspbltcIltvYmplY3QgXCIrc1tsXStcIl1cIl09c1tsXS50b0xvd2VyQ2FzZSgpO3IuZm4uaW5pdC5wcm90b3R5cGU9ci5mbixlLlZlbG9jaXR5PXtVdGlsaXRpZXM6cn19fSh3aW5kb3cpLGZ1bmN0aW9uKGUpe1wib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUmJlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1lKCk6XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShlKTplKCl9KGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGUsdCxyLGEpe2Z1bmN0aW9uIG4oZSl7Zm9yKHZhciB0PS0xLHI9ZT9lLmxlbmd0aDowLGE9W107Kyt0PHI7KXt2YXIgbj1lW3RdO24mJmEucHVzaChuKX1yZXR1cm4gYX1mdW5jdGlvbiBvKGUpe3JldHVybiBtLmlzV3JhcHBlZChlKT9lPVtdLnNsaWNlLmNhbGwoZSk6bS5pc05vZGUoZSkmJihlPVtlXSksZX1mdW5jdGlvbiBpKGUpe3ZhciB0PWYuZGF0YShlLFwidmVsb2NpdHlcIik7cmV0dXJuIG51bGw9PT10P2E6dH1mdW5jdGlvbiBzKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gTWF0aC5yb3VuZCh0KmUpKigxL2UpfX1mdW5jdGlvbiBsKGUscixhLG4pe2Z1bmN0aW9uIG8oZSx0KXtyZXR1cm4gMS0zKnQrMyplfWZ1bmN0aW9uIGkoZSx0KXtyZXR1cm4gMyp0LTYqZX1mdW5jdGlvbiBzKGUpe3JldHVybiAzKmV9ZnVuY3Rpb24gbChlLHQscil7cmV0dXJuKChvKHQscikqZStpKHQscikpKmUrcyh0KSkqZX1mdW5jdGlvbiB1KGUsdCxyKXtyZXR1cm4gMypvKHQscikqZSplKzIqaSh0LHIpKmUrcyh0KX1mdW5jdGlvbiBjKHQscil7Zm9yKHZhciBuPTA7bT5uOysrbil7dmFyIG89dShyLGUsYSk7aWYoMD09PW8pcmV0dXJuIHI7dmFyIGk9bChyLGUsYSktdDtyLT1pL299cmV0dXJuIHJ9ZnVuY3Rpb24gcCgpe2Zvcih2YXIgdD0wO2I+dDsrK3Qpd1t0XT1sKHQqeCxlLGEpfWZ1bmN0aW9uIGYodCxyLG4pe3ZhciBvLGkscz0wO2RvIGk9cisobi1yKS8yLG89bChpLGUsYSktdCxvPjA/bj1pOnI9aTt3aGlsZShNYXRoLmFicyhvKT5oJiYrK3M8dik7cmV0dXJuIGl9ZnVuY3Rpb24gZCh0KXtmb3IodmFyIHI9MCxuPTEsbz1iLTE7biE9byYmd1tuXTw9dDsrK24pcis9eDstLW47dmFyIGk9KHQtd1tuXSkvKHdbbisxXS13W25dKSxzPXIraSp4LGw9dShzLGUsYSk7cmV0dXJuIGw+PXk/Yyh0LHMpOjA9PWw/czpmKHQscixyK3gpfWZ1bmN0aW9uIGcoKXtWPSEwLChlIT1yfHxhIT1uKSYmcCgpfXZhciBtPTQseT0uMDAxLGg9MWUtNyx2PTEwLGI9MTEseD0xLyhiLTEpLFM9XCJGbG9hdDMyQXJyYXlcImluIHQ7aWYoNCE9PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBQPTA7ND5QOysrUClpZihcIm51bWJlclwiIT10eXBlb2YgYXJndW1lbnRzW1BdfHxpc05hTihhcmd1bWVudHNbUF0pfHwhaXNGaW5pdGUoYXJndW1lbnRzW1BdKSlyZXR1cm4hMTtlPU1hdGgubWluKGUsMSksYT1NYXRoLm1pbihhLDEpLGU9TWF0aC5tYXgoZSwwKSxhPU1hdGgubWF4KGEsMCk7dmFyIHc9Uz9uZXcgRmxvYXQzMkFycmF5KGIpOm5ldyBBcnJheShiKSxWPSExLEM9ZnVuY3Rpb24odCl7cmV0dXJuIFZ8fGcoKSxlPT09ciYmYT09PW4/dDowPT09dD8wOjE9PT10PzE6bChkKHQpLHIsbil9O0MuZ2V0Q29udHJvbFBvaW50cz1mdW5jdGlvbigpe3JldHVyblt7eDplLHk6cn0se3g6YSx5Om59XX07dmFyIFQ9XCJnZW5lcmF0ZUJlemllcihcIitbZSxyLGEsbl0rXCIpXCI7cmV0dXJuIEMudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gVH0sQ31mdW5jdGlvbiB1KGUsdCl7dmFyIHI9ZTtyZXR1cm4gbS5pc1N0cmluZyhlKT9iLkVhc2luZ3NbZV18fChyPSExKTpyPW0uaXNBcnJheShlKSYmMT09PWUubGVuZ3RoP3MuYXBwbHkobnVsbCxlKTptLmlzQXJyYXkoZSkmJjI9PT1lLmxlbmd0aD94LmFwcGx5KG51bGwsZS5jb25jYXQoW3RdKSk6bS5pc0FycmF5KGUpJiY0PT09ZS5sZW5ndGg/bC5hcHBseShudWxsLGUpOiExLHI9PT0hMSYmKHI9Yi5FYXNpbmdzW2IuZGVmYXVsdHMuZWFzaW5nXT9iLmRlZmF1bHRzLmVhc2luZzp2KSxyfWZ1bmN0aW9uIGMoZSl7aWYoZSl7dmFyIHQ9KG5ldyBEYXRlKS5nZXRUaW1lKCkscj1iLlN0YXRlLmNhbGxzLmxlbmd0aDtyPjFlNCYmKGIuU3RhdGUuY2FsbHM9bihiLlN0YXRlLmNhbGxzKSk7Zm9yKHZhciBvPTA7cj5vO28rKylpZihiLlN0YXRlLmNhbGxzW29dKXt2YXIgcz1iLlN0YXRlLmNhbGxzW29dLGw9c1swXSx1PXNbMl0sZD1zWzNdLGc9ISFkLHk9bnVsbDtkfHwoZD1iLlN0YXRlLmNhbGxzW29dWzNdPXQtMTYpO2Zvcih2YXIgaD1NYXRoLm1pbigodC1kKS91LmR1cmF0aW9uLDEpLHY9MCx4PWwubGVuZ3RoO3g+djt2Kyspe3ZhciBQPWxbdl0sVj1QLmVsZW1lbnQ7aWYoaShWKSl7dmFyIEM9ITE7aWYodS5kaXNwbGF5IT09YSYmbnVsbCE9PXUuZGlzcGxheSYmXCJub25lXCIhPT11LmRpc3BsYXkpe2lmKFwiZmxleFwiPT09dS5kaXNwbGF5KXt2YXIgVD1bXCItd2Via2l0LWJveFwiLFwiLW1vei1ib3hcIixcIi1tcy1mbGV4Ym94XCIsXCItd2Via2l0LWZsZXhcIl07Zi5lYWNoKFQsZnVuY3Rpb24oZSx0KXtTLnNldFByb3BlcnR5VmFsdWUoVixcImRpc3BsYXlcIix0KX0pfVMuc2V0UHJvcGVydHlWYWx1ZShWLFwiZGlzcGxheVwiLHUuZGlzcGxheSl9dS52aXNpYmlsaXR5IT09YSYmXCJoaWRkZW5cIiE9PXUudmlzaWJpbGl0eSYmUy5zZXRQcm9wZXJ0eVZhbHVlKFYsXCJ2aXNpYmlsaXR5XCIsdS52aXNpYmlsaXR5KTtmb3IodmFyIGsgaW4gUClpZihcImVsZW1lbnRcIiE9PWspe3ZhciBBLEY9UFtrXSxqPW0uaXNTdHJpbmcoRi5lYXNpbmcpP2IuRWFzaW5nc1tGLmVhc2luZ106Ri5lYXNpbmc7aWYoMT09PWgpQT1GLmVuZFZhbHVlO2Vsc2V7dmFyIEU9Ri5lbmRWYWx1ZS1GLnN0YXJ0VmFsdWU7aWYoQT1GLnN0YXJ0VmFsdWUrRSpqKGgsdSxFKSwhZyYmQT09PUYuY3VycmVudFZhbHVlKWNvbnRpbnVlfWlmKEYuY3VycmVudFZhbHVlPUEsXCJ0d2VlblwiPT09ayl5PUE7ZWxzZXtpZihTLkhvb2tzLnJlZ2lzdGVyZWRba10pe3ZhciBIPVMuSG9va3MuZ2V0Um9vdChrKSxOPWkoVikucm9vdFByb3BlcnR5VmFsdWVDYWNoZVtIXTtOJiYoRi5yb290UHJvcGVydHlWYWx1ZT1OKX12YXIgTD1TLnNldFByb3BlcnR5VmFsdWUoVixrLEYuY3VycmVudFZhbHVlKygwPT09cGFyc2VGbG9hdChBKT9cIlwiOkYudW5pdFR5cGUpLEYucm9vdFByb3BlcnR5VmFsdWUsRi5zY3JvbGxEYXRhKTtTLkhvb2tzLnJlZ2lzdGVyZWRba10mJihpKFYpLnJvb3RQcm9wZXJ0eVZhbHVlQ2FjaGVbSF09Uy5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW0hdP1MuTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZFtIXShcImV4dHJhY3RcIixudWxsLExbMV0pOkxbMV0pLFwidHJhbnNmb3JtXCI9PT1MWzBdJiYoQz0hMCl9fXUubW9iaWxlSEEmJmkoVikudHJhbnNmb3JtQ2FjaGUudHJhbnNsYXRlM2Q9PT1hJiYoaShWKS50cmFuc2Zvcm1DYWNoZS50cmFuc2xhdGUzZD1cIigwcHgsIDBweCwgMHB4KVwiLEM9ITApLEMmJlMuZmx1c2hUcmFuc2Zvcm1DYWNoZShWKX19dS5kaXNwbGF5IT09YSYmXCJub25lXCIhPT11LmRpc3BsYXkmJihiLlN0YXRlLmNhbGxzW29dWzJdLmRpc3BsYXk9ITEpLHUudmlzaWJpbGl0eSE9PWEmJlwiaGlkZGVuXCIhPT11LnZpc2liaWxpdHkmJihiLlN0YXRlLmNhbGxzW29dWzJdLnZpc2liaWxpdHk9ITEpLHUucHJvZ3Jlc3MmJnUucHJvZ3Jlc3MuY2FsbChzWzFdLHNbMV0saCxNYXRoLm1heCgwLGQrdS5kdXJhdGlvbi10KSxkLHkpLDE9PT1oJiZwKG8pfX1iLlN0YXRlLmlzVGlja2luZyYmdyhjKX1mdW5jdGlvbiBwKGUsdCl7aWYoIWIuU3RhdGUuY2FsbHNbZV0pcmV0dXJuITE7Zm9yKHZhciByPWIuU3RhdGUuY2FsbHNbZV1bMF0sbj1iLlN0YXRlLmNhbGxzW2VdWzFdLG89Yi5TdGF0ZS5jYWxsc1tlXVsyXSxzPWIuU3RhdGUuY2FsbHNbZV1bNF0sbD0hMSx1PTAsYz1yLmxlbmd0aDtjPnU7dSsrKXt2YXIgcD1yW3VdLmVsZW1lbnQ7aWYodHx8by5sb29wfHwoXCJub25lXCI9PT1vLmRpc3BsYXkmJlMuc2V0UHJvcGVydHlWYWx1ZShwLFwiZGlzcGxheVwiLG8uZGlzcGxheSksXCJoaWRkZW5cIj09PW8udmlzaWJpbGl0eSYmUy5zZXRQcm9wZXJ0eVZhbHVlKHAsXCJ2aXNpYmlsaXR5XCIsby52aXNpYmlsaXR5KSksby5sb29wIT09ITAmJihmLnF1ZXVlKHApWzFdPT09YXx8IS9cXC52ZWxvY2l0eVF1ZXVlRW50cnlGbGFnL2kudGVzdChmLnF1ZXVlKHApWzFdKSkmJmkocCkpe2kocCkuaXNBbmltYXRpbmc9ITEsaShwKS5yb290UHJvcGVydHlWYWx1ZUNhY2hlPXt9O3ZhciBkPSExO2YuZWFjaChTLkxpc3RzLnRyYW5zZm9ybXMzRCxmdW5jdGlvbihlLHQpe3ZhciByPS9ec2NhbGUvLnRlc3QodCk/MTowLG49aShwKS50cmFuc2Zvcm1DYWNoZVt0XTtpKHApLnRyYW5zZm9ybUNhY2hlW3RdIT09YSYmbmV3IFJlZ0V4cChcIl5cXFxcKFwiK3IrXCJbXi5dXCIpLnRlc3QobikmJihkPSEwLGRlbGV0ZSBpKHApLnRyYW5zZm9ybUNhY2hlW3RdKX0pLG8ubW9iaWxlSEEmJihkPSEwLGRlbGV0ZSBpKHApLnRyYW5zZm9ybUNhY2hlLnRyYW5zbGF0ZTNkKSxkJiZTLmZsdXNoVHJhbnNmb3JtQ2FjaGUocCksUy5WYWx1ZXMucmVtb3ZlQ2xhc3MocCxcInZlbG9jaXR5LWFuaW1hdGluZ1wiKX1pZighdCYmby5jb21wbGV0ZSYmIW8ubG9vcCYmdT09PWMtMSl0cnl7by5jb21wbGV0ZS5jYWxsKG4sbil9Y2F0Y2goZyl7c2V0VGltZW91dChmdW5jdGlvbigpe3Rocm93IGd9LDEpfXMmJm8ubG9vcCE9PSEwJiZzKG4pLGkocCkmJm8ubG9vcD09PSEwJiYhdCYmKGYuZWFjaChpKHApLnR3ZWVuc0NvbnRhaW5lcixmdW5jdGlvbihlLHQpey9ecm90YXRlLy50ZXN0KGUpJiYzNjA9PT1wYXJzZUZsb2F0KHQuZW5kVmFsdWUpJiYodC5lbmRWYWx1ZT0wLHQuc3RhcnRWYWx1ZT0zNjApLC9eYmFja2dyb3VuZFBvc2l0aW9uLy50ZXN0KGUpJiYxMDA9PT1wYXJzZUZsb2F0KHQuZW5kVmFsdWUpJiZcIiVcIj09PXQudW5pdFR5cGUmJih0LmVuZFZhbHVlPTAsdC5zdGFydFZhbHVlPTEwMCl9KSxiKHAsXCJyZXZlcnNlXCIse2xvb3A6ITAsZGVsYXk6by5kZWxheX0pKSxvLnF1ZXVlIT09ITEmJmYuZGVxdWV1ZShwLG8ucXVldWUpfWIuU3RhdGUuY2FsbHNbZV09ITE7Zm9yKHZhciBtPTAseT1iLlN0YXRlLmNhbGxzLmxlbmd0aDt5Pm07bSsrKWlmKGIuU3RhdGUuY2FsbHNbbV0hPT0hMSl7bD0hMDticmVha31sPT09ITEmJihiLlN0YXRlLmlzVGlja2luZz0hMSxkZWxldGUgYi5TdGF0ZS5jYWxscyxiLlN0YXRlLmNhbGxzPVtdKX12YXIgZixkPWZ1bmN0aW9uKCl7aWYoci5kb2N1bWVudE1vZGUpcmV0dXJuIHIuZG9jdW1lbnRNb2RlO2Zvcih2YXIgZT03O2U+NDtlLS0pe3ZhciB0PXIuY3JlYXRlRWxlbWVudChcImRpdlwiKTtpZih0LmlubmVySFRNTD1cIjwhLS1baWYgSUUgXCIrZStcIl0+PHNwYW4+PC9zcGFuPjwhW2VuZGlmXS0tPlwiLHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzcGFuXCIpLmxlbmd0aClyZXR1cm4gdD1udWxsLGV9cmV0dXJuIGF9KCksZz1mdW5jdGlvbigpe3ZhciBlPTA7cmV0dXJuIHQud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx0Lm1velJlcXVlc3RBbmltYXRpb25GcmFtZXx8ZnVuY3Rpb24odCl7dmFyIHIsYT0obmV3IERhdGUpLmdldFRpbWUoKTtyZXR1cm4gcj1NYXRoLm1heCgwLDE2LShhLWUpKSxlPWErcixzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dChhK3IpfSxyKX19KCksbT17aXNTdHJpbmc6ZnVuY3Rpb24oZSl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGV9LGlzQXJyYXk6QXJyYXkuaXNBcnJheXx8ZnVuY3Rpb24oZSl7cmV0dXJuXCJbb2JqZWN0IEFycmF5XVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpfSxpc0Z1bmN0aW9uOmZ1bmN0aW9uKGUpe3JldHVyblwiW29iamVjdCBGdW5jdGlvbl1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKX0saXNOb2RlOmZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLm5vZGVUeXBlfSxpc05vZGVMaXN0OmZ1bmN0aW9uKGUpe3JldHVyblwib2JqZWN0XCI9PXR5cGVvZiBlJiYvXlxcW29iamVjdCAoSFRNTENvbGxlY3Rpb258Tm9kZUxpc3R8T2JqZWN0KVxcXSQvLnRlc3QoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpKSYmZS5sZW5ndGghPT1hJiYoMD09PWUubGVuZ3RofHxcIm9iamVjdFwiPT10eXBlb2YgZVswXSYmZVswXS5ub2RlVHlwZT4wKX0saXNXcmFwcGVkOmZ1bmN0aW9uKGUpe3JldHVybiBlJiYoZS5qcXVlcnl8fHQuWmVwdG8mJnQuWmVwdG8uemVwdG8uaXNaKGUpKX0saXNTVkc6ZnVuY3Rpb24oZSl7cmV0dXJuIHQuU1ZHRWxlbWVudCYmZSBpbnN0YW5jZW9mIHQuU1ZHRWxlbWVudH0saXNFbXB0eU9iamVjdDpmdW5jdGlvbihlKXtmb3IodmFyIHQgaW4gZSlyZXR1cm4hMTtyZXR1cm4hMH19LHk9ITE7aWYoZS5mbiYmZS5mbi5qcXVlcnk/KGY9ZSx5PSEwKTpmPXQuVmVsb2NpdHkuVXRpbGl0aWVzLDg+PWQmJiF5KXRocm93IG5ldyBFcnJvcihcIlZlbG9jaXR5OiBJRTggYW5kIGJlbG93IHJlcXVpcmUgalF1ZXJ5IHRvIGJlIGxvYWRlZCBiZWZvcmUgVmVsb2NpdHkuXCIpO2lmKDc+PWQpcmV0dXJuIHZvaWQoalF1ZXJ5LmZuLnZlbG9jaXR5PWpRdWVyeS5mbi5hbmltYXRlKTt2YXIgaD00MDAsdj1cInN3aW5nXCIsYj17U3RhdGU6e2lzTW9iaWxlOi9BbmRyb2lkfHdlYk9TfGlQaG9uZXxpUGFkfGlQb2R8QmxhY2tCZXJyeXxJRU1vYmlsZXxPcGVyYSBNaW5pL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxpc0FuZHJvaWQ6L0FuZHJvaWQvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLGlzR2luZ2VyYnJlYWQ6L0FuZHJvaWQgMlxcLjNcXC5bMy03XS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksaXNDaHJvbWU6dC5jaHJvbWUsaXNGaXJlZm94Oi9GaXJlZm94L2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxwcmVmaXhFbGVtZW50OnIuY3JlYXRlRWxlbWVudChcImRpdlwiKSxwcmVmaXhNYXRjaGVzOnt9LHNjcm9sbEFuY2hvcjpudWxsLHNjcm9sbFByb3BlcnR5TGVmdDpudWxsLHNjcm9sbFByb3BlcnR5VG9wOm51bGwsaXNUaWNraW5nOiExLGNhbGxzOltdfSxDU1M6e30sVXRpbGl0aWVzOmYsUmVkaXJlY3RzOnt9LEVhc2luZ3M6e30sUHJvbWlzZTp0LlByb21pc2UsZGVmYXVsdHM6e3F1ZXVlOlwiXCIsZHVyYXRpb246aCxlYXNpbmc6dixiZWdpbjphLGNvbXBsZXRlOmEscHJvZ3Jlc3M6YSxkaXNwbGF5OmEsdmlzaWJpbGl0eTphLGxvb3A6ITEsZGVsYXk6ITEsbW9iaWxlSEE6ITAsX2NhY2hlVmFsdWVzOiEwfSxpbml0OmZ1bmN0aW9uKGUpe2YuZGF0YShlLFwidmVsb2NpdHlcIix7aXNTVkc6bS5pc1NWRyhlKSxpc0FuaW1hdGluZzohMSxjb21wdXRlZFN0eWxlOm51bGwsdHdlZW5zQ29udGFpbmVyOm51bGwscm9vdFByb3BlcnR5VmFsdWVDYWNoZTp7fSx0cmFuc2Zvcm1DYWNoZTp7fX0pfSxob29rOm51bGwsbW9jazohMSx2ZXJzaW9uOnttYWpvcjoxLG1pbm9yOjIscGF0Y2g6Mn0sZGVidWc6ITF9O3QucGFnZVlPZmZzZXQhPT1hPyhiLlN0YXRlLnNjcm9sbEFuY2hvcj10LGIuU3RhdGUuc2Nyb2xsUHJvcGVydHlMZWZ0PVwicGFnZVhPZmZzZXRcIixiLlN0YXRlLnNjcm9sbFByb3BlcnR5VG9wPVwicGFnZVlPZmZzZXRcIik6KGIuU3RhdGUuc2Nyb2xsQW5jaG9yPXIuZG9jdW1lbnRFbGVtZW50fHxyLmJvZHkucGFyZW50Tm9kZXx8ci5ib2R5LGIuU3RhdGUuc2Nyb2xsUHJvcGVydHlMZWZ0PVwic2Nyb2xsTGVmdFwiLGIuU3RhdGUuc2Nyb2xsUHJvcGVydHlUb3A9XCJzY3JvbGxUb3BcIik7dmFyIHg9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3JldHVybi1lLnRlbnNpb24qZS54LWUuZnJpY3Rpb24qZS52fWZ1bmN0aW9uIHQodCxyLGEpe3ZhciBuPXt4OnQueCthLmR4KnIsdjp0LnYrYS5kdipyLHRlbnNpb246dC50ZW5zaW9uLGZyaWN0aW9uOnQuZnJpY3Rpb259O3JldHVybntkeDpuLnYsZHY6ZShuKX19ZnVuY3Rpb24gcihyLGEpe3ZhciBuPXtkeDpyLnYsZHY6ZShyKX0sbz10KHIsLjUqYSxuKSxpPXQociwuNSphLG8pLHM9dChyLGEsaSksbD0xLzYqKG4uZHgrMiooby5keCtpLmR4KStzLmR4KSx1PTEvNioobi5kdisyKihvLmR2K2kuZHYpK3MuZHYpO3JldHVybiByLng9ci54K2wqYSxyLnY9ci52K3UqYSxyfXJldHVybiBmdW5jdGlvbiBhKGUsdCxuKXt2YXIgbyxpLHMsbD17eDotMSx2OjAsdGVuc2lvbjpudWxsLGZyaWN0aW9uOm51bGx9LHU9WzBdLGM9MCxwPTFlLTQsZj0uMDE2O2ZvcihlPXBhcnNlRmxvYXQoZSl8fDUwMCx0PXBhcnNlRmxvYXQodCl8fDIwLG49bnx8bnVsbCxsLnRlbnNpb249ZSxsLmZyaWN0aW9uPXQsbz1udWxsIT09bixvPyhjPWEoZSx0KSxpPWMvbipmKTppPWY7cz1yKHN8fGwsaSksdS5wdXNoKDErcy54KSxjKz0xNixNYXRoLmFicyhzLngpPnAmJk1hdGguYWJzKHMudik+cDspO3JldHVybiBvP2Z1bmN0aW9uKGUpe3JldHVybiB1W2UqKHUubGVuZ3RoLTEpfDBdfTpjfX0oKTtiLkVhc2luZ3M9e2xpbmVhcjpmdW5jdGlvbihlKXtyZXR1cm4gZX0sc3dpbmc6ZnVuY3Rpb24oZSl7cmV0dXJuLjUtTWF0aC5jb3MoZSpNYXRoLlBJKS8yfSxzcHJpbmc6ZnVuY3Rpb24oZSl7cmV0dXJuIDEtTWF0aC5jb3MoNC41KmUqTWF0aC5QSSkqTWF0aC5leHAoNiotZSl9fSxmLmVhY2goW1tcImVhc2VcIixbLjI1LC4xLC4yNSwxXV0sW1wiZWFzZS1pblwiLFsuNDIsMCwxLDFdXSxbXCJlYXNlLW91dFwiLFswLDAsLjU4LDFdXSxbXCJlYXNlLWluLW91dFwiLFsuNDIsMCwuNTgsMV1dLFtcImVhc2VJblNpbmVcIixbLjQ3LDAsLjc0NSwuNzE1XV0sW1wiZWFzZU91dFNpbmVcIixbLjM5LC41NzUsLjU2NSwxXV0sW1wiZWFzZUluT3V0U2luZVwiLFsuNDQ1LC4wNSwuNTUsLjk1XV0sW1wiZWFzZUluUXVhZFwiLFsuNTUsLjA4NSwuNjgsLjUzXV0sW1wiZWFzZU91dFF1YWRcIixbLjI1LC40NiwuNDUsLjk0XV0sW1wiZWFzZUluT3V0UXVhZFwiLFsuNDU1LC4wMywuNTE1LC45NTVdXSxbXCJlYXNlSW5DdWJpY1wiLFsuNTUsLjA1NSwuNjc1LC4xOV1dLFtcImVhc2VPdXRDdWJpY1wiLFsuMjE1LC42MSwuMzU1LDFdXSxbXCJlYXNlSW5PdXRDdWJpY1wiLFsuNjQ1LC4wNDUsLjM1NSwxXV0sW1wiZWFzZUluUXVhcnRcIixbLjg5NSwuMDMsLjY4NSwuMjJdXSxbXCJlYXNlT3V0UXVhcnRcIixbLjE2NSwuODQsLjQ0LDFdXSxbXCJlYXNlSW5PdXRRdWFydFwiLFsuNzcsMCwuMTc1LDFdXSxbXCJlYXNlSW5RdWludFwiLFsuNzU1LC4wNSwuODU1LC4wNl1dLFtcImVhc2VPdXRRdWludFwiLFsuMjMsMSwuMzIsMV1dLFtcImVhc2VJbk91dFF1aW50XCIsWy44NiwwLC4wNywxXV0sW1wiZWFzZUluRXhwb1wiLFsuOTUsLjA1LC43OTUsLjAzNV1dLFtcImVhc2VPdXRFeHBvXCIsWy4xOSwxLC4yMiwxXV0sW1wiZWFzZUluT3V0RXhwb1wiLFsxLDAsMCwxXV0sW1wiZWFzZUluQ2lyY1wiLFsuNiwuMDQsLjk4LC4zMzVdXSxbXCJlYXNlT3V0Q2lyY1wiLFsuMDc1LC44MiwuMTY1LDFdXSxbXCJlYXNlSW5PdXRDaXJjXCIsWy43ODUsLjEzNSwuMTUsLjg2XV1dLGZ1bmN0aW9uKGUsdCl7Yi5FYXNpbmdzW3RbMF1dPWwuYXBwbHkobnVsbCx0WzFdKX0pO3ZhciBTPWIuQ1NTPXtSZWdFeDp7aXNIZXg6L14jKFtBLWZcXGRdezN9KXsxLDJ9JC9pLHZhbHVlVW53cmFwOi9eW0Etel0rXFwoKC4qKVxcKSQvaSx3cmFwcGVkVmFsdWVBbHJlYWR5RXh0cmFjdGVkOi9bMC05Ll0rIFswLTkuXSsgWzAtOS5dKyggWzAtOS5dKyk/Lyx2YWx1ZVNwbGl0Oi8oW0Etel0rXFwoLitcXCkpfCgoW0EtejAtOSMtLl0rPykoPz1cXHN8JCkpL2dpfSxMaXN0czp7Y29sb3JzOltcImZpbGxcIixcInN0cm9rZVwiLFwic3RvcENvbG9yXCIsXCJjb2xvclwiLFwiYmFja2dyb3VuZENvbG9yXCIsXCJib3JkZXJDb2xvclwiLFwiYm9yZGVyVG9wQ29sb3JcIixcImJvcmRlclJpZ2h0Q29sb3JcIixcImJvcmRlckJvdHRvbUNvbG9yXCIsXCJib3JkZXJMZWZ0Q29sb3JcIixcIm91dGxpbmVDb2xvclwiXSx0cmFuc2Zvcm1zQmFzZTpbXCJ0cmFuc2xhdGVYXCIsXCJ0cmFuc2xhdGVZXCIsXCJzY2FsZVwiLFwic2NhbGVYXCIsXCJzY2FsZVlcIixcInNrZXdYXCIsXCJza2V3WVwiLFwicm90YXRlWlwiXSx0cmFuc2Zvcm1zM0Q6W1widHJhbnNmb3JtUGVyc3BlY3RpdmVcIixcInRyYW5zbGF0ZVpcIixcInNjYWxlWlwiLFwicm90YXRlWFwiLFwicm90YXRlWVwiXX0sSG9va3M6e3RlbXBsYXRlczp7dGV4dFNoYWRvdzpbXCJDb2xvciBYIFkgQmx1clwiLFwiYmxhY2sgMHB4IDBweCAwcHhcIl0sYm94U2hhZG93OltcIkNvbG9yIFggWSBCbHVyIFNwcmVhZFwiLFwiYmxhY2sgMHB4IDBweCAwcHggMHB4XCJdLGNsaXA6W1wiVG9wIFJpZ2h0IEJvdHRvbSBMZWZ0XCIsXCIwcHggMHB4IDBweCAwcHhcIl0sYmFja2dyb3VuZFBvc2l0aW9uOltcIlggWVwiLFwiMCUgMCVcIl0sdHJhbnNmb3JtT3JpZ2luOltcIlggWSBaXCIsXCI1MCUgNTAlIDBweFwiXSxwZXJzcGVjdGl2ZU9yaWdpbjpbXCJYIFlcIixcIjUwJSA1MCVcIl19LHJlZ2lzdGVyZWQ6e30scmVnaXN0ZXI6ZnVuY3Rpb24oKXtmb3IodmFyIGU9MDtlPFMuTGlzdHMuY29sb3JzLmxlbmd0aDtlKyspe3ZhciB0PVwiY29sb3JcIj09PVMuTGlzdHMuY29sb3JzW2VdP1wiMCAwIDAgMVwiOlwiMjU1IDI1NSAyNTUgMVwiO1MuSG9va3MudGVtcGxhdGVzW1MuTGlzdHMuY29sb3JzW2VdXT1bXCJSZWQgR3JlZW4gQmx1ZSBBbHBoYVwiLHRdfXZhciByLGEsbjtpZihkKWZvcihyIGluIFMuSG9va3MudGVtcGxhdGVzKXthPVMuSG9va3MudGVtcGxhdGVzW3JdLG49YVswXS5zcGxpdChcIiBcIik7dmFyIG89YVsxXS5tYXRjaChTLlJlZ0V4LnZhbHVlU3BsaXQpO1wiQ29sb3JcIj09PW5bMF0mJihuLnB1c2gobi5zaGlmdCgpKSxvLnB1c2goby5zaGlmdCgpKSxTLkhvb2tzLnRlbXBsYXRlc1tyXT1bbi5qb2luKFwiIFwiKSxvLmpvaW4oXCIgXCIpXSl9Zm9yKHIgaW4gUy5Ib29rcy50ZW1wbGF0ZXMpe2E9Uy5Ib29rcy50ZW1wbGF0ZXNbcl0sbj1hWzBdLnNwbGl0KFwiIFwiKTtmb3IodmFyIGUgaW4gbil7dmFyIGk9cituW2VdLHM9ZTtTLkhvb2tzLnJlZ2lzdGVyZWRbaV09W3Isc119fX0sZ2V0Um9vdDpmdW5jdGlvbihlKXt2YXIgdD1TLkhvb2tzLnJlZ2lzdGVyZWRbZV07cmV0dXJuIHQ/dFswXTplfSxjbGVhblJvb3RQcm9wZXJ0eVZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIFMuUmVnRXgudmFsdWVVbndyYXAudGVzdCh0KSYmKHQ9dC5tYXRjaChTLlJlZ0V4LnZhbHVlVW53cmFwKVsxXSksUy5WYWx1ZXMuaXNDU1NOdWxsVmFsdWUodCkmJih0PVMuSG9va3MudGVtcGxhdGVzW2VdWzFdKSx0fSxleHRyYWN0VmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj1TLkhvb2tzLnJlZ2lzdGVyZWRbZV07aWYocil7dmFyIGE9clswXSxuPXJbMV07cmV0dXJuIHQ9Uy5Ib29rcy5jbGVhblJvb3RQcm9wZXJ0eVZhbHVlKGEsdCksdC50b1N0cmluZygpLm1hdGNoKFMuUmVnRXgudmFsdWVTcGxpdClbbl19cmV0dXJuIHR9LGluamVjdFZhbHVlOmZ1bmN0aW9uKGUsdCxyKXt2YXIgYT1TLkhvb2tzLnJlZ2lzdGVyZWRbZV07aWYoYSl7dmFyIG4sbyxpPWFbMF0scz1hWzFdO3JldHVybiByPVMuSG9va3MuY2xlYW5Sb290UHJvcGVydHlWYWx1ZShpLHIpLG49ci50b1N0cmluZygpLm1hdGNoKFMuUmVnRXgudmFsdWVTcGxpdCksbltzXT10LG89bi5qb2luKFwiIFwiKX1yZXR1cm4gcn19LE5vcm1hbGl6YXRpb25zOntyZWdpc3RlcmVkOntjbGlwOmZ1bmN0aW9uKGUsdCxyKXtzd2l0Y2goZSl7Y2FzZVwibmFtZVwiOnJldHVyblwiY2xpcFwiO2Nhc2VcImV4dHJhY3RcIjp2YXIgYTtyZXR1cm4gUy5SZWdFeC53cmFwcGVkVmFsdWVBbHJlYWR5RXh0cmFjdGVkLnRlc3Qocik/YT1yOihhPXIudG9TdHJpbmcoKS5tYXRjaChTLlJlZ0V4LnZhbHVlVW53cmFwKSxhPWE/YVsxXS5yZXBsYWNlKC8sKFxccyspPy9nLFwiIFwiKTpyKSxhO2Nhc2VcImluamVjdFwiOnJldHVyblwicmVjdChcIityK1wiKVwifX0sYmx1cjpmdW5jdGlvbihlLHQscil7c3dpdGNoKGUpe2Nhc2VcIm5hbWVcIjpyZXR1cm4gYi5TdGF0ZS5pc0ZpcmVmb3g/XCJmaWx0ZXJcIjpcIi13ZWJraXQtZmlsdGVyXCI7Y2FzZVwiZXh0cmFjdFwiOnZhciBhPXBhcnNlRmxvYXQocik7aWYoIWEmJjAhPT1hKXt2YXIgbj1yLnRvU3RyaW5nKCkubWF0Y2goL2JsdXJcXCgoWzAtOV0rW0Etel0rKVxcKS9pKTthPW4/blsxXTowfXJldHVybiBhO2Nhc2VcImluamVjdFwiOnJldHVybiBwYXJzZUZsb2F0KHIpP1wiYmx1cihcIityK1wiKVwiOlwibm9uZVwifX0sb3BhY2l0eTpmdW5jdGlvbihlLHQscil7aWYoOD49ZClzd2l0Y2goZSl7Y2FzZVwibmFtZVwiOnJldHVyblwiZmlsdGVyXCI7Y2FzZVwiZXh0cmFjdFwiOnZhciBhPXIudG9TdHJpbmcoKS5tYXRjaCgvYWxwaGFcXChvcGFjaXR5PSguKilcXCkvaSk7cmV0dXJuIHI9YT9hWzFdLzEwMDoxO2Nhc2VcImluamVjdFwiOnJldHVybiB0LnN0eWxlLnpvb209MSxwYXJzZUZsb2F0KHIpPj0xP1wiXCI6XCJhbHBoYShvcGFjaXR5PVwiK3BhcnNlSW50KDEwMCpwYXJzZUZsb2F0KHIpLDEwKStcIilcIn1lbHNlIHN3aXRjaChlKXtjYXNlXCJuYW1lXCI6cmV0dXJuXCJvcGFjaXR5XCI7Y2FzZVwiZXh0cmFjdFwiOnJldHVybiByO2Nhc2VcImluamVjdFwiOnJldHVybiByfX19LHJlZ2lzdGVyOmZ1bmN0aW9uKCl7OT49ZHx8Yi5TdGF0ZS5pc0dpbmdlcmJyZWFkfHwoUy5MaXN0cy50cmFuc2Zvcm1zQmFzZT1TLkxpc3RzLnRyYW5zZm9ybXNCYXNlLmNvbmNhdChTLkxpc3RzLnRyYW5zZm9ybXMzRCkpO2Zvcih2YXIgZT0wO2U8Uy5MaXN0cy50cmFuc2Zvcm1zQmFzZS5sZW5ndGg7ZSsrKSFmdW5jdGlvbigpe3ZhciB0PVMuTGlzdHMudHJhbnNmb3Jtc0Jhc2VbZV07Uy5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW3RdPWZ1bmN0aW9uKGUscixuKXtzd2l0Y2goZSl7Y2FzZVwibmFtZVwiOnJldHVyblwidHJhbnNmb3JtXCI7Y2FzZVwiZXh0cmFjdFwiOnJldHVybiBpKHIpPT09YXx8aShyKS50cmFuc2Zvcm1DYWNoZVt0XT09PWE/L15zY2FsZS9pLnRlc3QodCk/MTowOmkocikudHJhbnNmb3JtQ2FjaGVbdF0ucmVwbGFjZSgvWygpXS9nLFwiXCIpO2Nhc2VcImluamVjdFwiOnZhciBvPSExO3N3aXRjaCh0LnN1YnN0cigwLHQubGVuZ3RoLTEpKXtjYXNlXCJ0cmFuc2xhdGVcIjpvPSEvKCV8cHh8ZW18cmVtfHZ3fHZofFxcZCkkL2kudGVzdChuKTticmVhaztjYXNlXCJzY2FsXCI6Y2FzZVwic2NhbGVcIjpiLlN0YXRlLmlzQW5kcm9pZCYmaShyKS50cmFuc2Zvcm1DYWNoZVt0XT09PWEmJjE+biYmKG49MSksbz0hLyhcXGQpJC9pLnRlc3Qobik7YnJlYWs7Y2FzZVwic2tld1wiOm89IS8oZGVnfFxcZCkkL2kudGVzdChuKTticmVhaztjYXNlXCJyb3RhdGVcIjpvPSEvKGRlZ3xcXGQpJC9pLnRlc3Qobil9cmV0dXJuIG98fChpKHIpLnRyYW5zZm9ybUNhY2hlW3RdPVwiKFwiK24rXCIpXCIpLGkocikudHJhbnNmb3JtQ2FjaGVbdF19fX0oKTtmb3IodmFyIGU9MDtlPFMuTGlzdHMuY29sb3JzLmxlbmd0aDtlKyspIWZ1bmN0aW9uKCl7dmFyIHQ9Uy5MaXN0cy5jb2xvcnNbZV07Uy5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW3RdPWZ1bmN0aW9uKGUscixuKXtzd2l0Y2goZSl7Y2FzZVwibmFtZVwiOnJldHVybiB0O2Nhc2VcImV4dHJhY3RcIjp2YXIgbztpZihTLlJlZ0V4LndyYXBwZWRWYWx1ZUFscmVhZHlFeHRyYWN0ZWQudGVzdChuKSlvPW47ZWxzZXt2YXIgaSxzPXtibGFjazpcInJnYigwLCAwLCAwKVwiLGJsdWU6XCJyZ2IoMCwgMCwgMjU1KVwiLGdyYXk6XCJyZ2IoMTI4LCAxMjgsIDEyOClcIixncmVlbjpcInJnYigwLCAxMjgsIDApXCIscmVkOlwicmdiKDI1NSwgMCwgMClcIix3aGl0ZTpcInJnYigyNTUsIDI1NSwgMjU1KVwifTsvXltBLXpdKyQvaS50ZXN0KG4pP2k9c1tuXSE9PWE/c1tuXTpzLmJsYWNrOlMuUmVnRXguaXNIZXgudGVzdChuKT9pPVwicmdiKFwiK1MuVmFsdWVzLmhleFRvUmdiKG4pLmpvaW4oXCIgXCIpK1wiKVwiOi9ecmdiYT9cXCgvaS50ZXN0KG4pfHwoaT1zLmJsYWNrKSxvPShpfHxuKS50b1N0cmluZygpLm1hdGNoKFMuUmVnRXgudmFsdWVVbndyYXApWzFdLnJlcGxhY2UoLywoXFxzKyk/L2csXCIgXCIpfXJldHVybiA4Pj1kfHwzIT09by5zcGxpdChcIiBcIikubGVuZ3RofHwobys9XCIgMVwiKSxvO2Nhc2VcImluamVjdFwiOnJldHVybiA4Pj1kPzQ9PT1uLnNwbGl0KFwiIFwiKS5sZW5ndGgmJihuPW4uc3BsaXQoL1xccysvKS5zbGljZSgwLDMpLmpvaW4oXCIgXCIpKTozPT09bi5zcGxpdChcIiBcIikubGVuZ3RoJiYobis9XCIgMVwiKSwoOD49ZD9cInJnYlwiOlwicmdiYVwiKStcIihcIituLnJlcGxhY2UoL1xccysvZyxcIixcIikucmVwbGFjZSgvXFwuKFxcZCkrKD89LCkvZyxcIlwiKStcIilcIn19fSgpfX0sTmFtZXM6e2NhbWVsQ2FzZTpmdW5jdGlvbihlKXtyZXR1cm4gZS5yZXBsYWNlKC8tKFxcdykvZyxmdW5jdGlvbihlLHQpe3JldHVybiB0LnRvVXBwZXJDYXNlKCl9KX0sU1ZHQXR0cmlidXRlOmZ1bmN0aW9uKGUpe3ZhciB0PVwid2lkdGh8aGVpZ2h0fHh8eXxjeHxjeXxyfHJ4fHJ5fHgxfHgyfHkxfHkyXCI7cmV0dXJuKGR8fGIuU3RhdGUuaXNBbmRyb2lkJiYhYi5TdGF0ZS5pc0Nocm9tZSkmJih0Kz1cInx0cmFuc2Zvcm1cIiksbmV3IFJlZ0V4cChcIl4oXCIrdCtcIikkXCIsXCJpXCIpLnRlc3QoZSl9LHByZWZpeENoZWNrOmZ1bmN0aW9uKGUpe2lmKGIuU3RhdGUucHJlZml4TWF0Y2hlc1tlXSlyZXR1cm5bYi5TdGF0ZS5wcmVmaXhNYXRjaGVzW2VdLCEwXTtmb3IodmFyIHQ9W1wiXCIsXCJXZWJraXRcIixcIk1velwiLFwibXNcIixcIk9cIl0scj0wLGE9dC5sZW5ndGg7YT5yO3IrKyl7dmFyIG47aWYobj0wPT09cj9lOnRbcl0rZS5yZXBsYWNlKC9eXFx3LyxmdW5jdGlvbihlKXtyZXR1cm4gZS50b1VwcGVyQ2FzZSgpfSksbS5pc1N0cmluZyhiLlN0YXRlLnByZWZpeEVsZW1lbnQuc3R5bGVbbl0pKXJldHVybiBiLlN0YXRlLnByZWZpeE1hdGNoZXNbZV09bixbbiwhMF19cmV0dXJuW2UsITFdfX0sVmFsdWVzOntoZXhUb1JnYjpmdW5jdGlvbihlKXt2YXIgdCxyPS9eIz8oW2EtZlxcZF0pKFthLWZcXGRdKShbYS1mXFxkXSkkL2ksYT0vXiM/KFthLWZcXGRdezJ9KShbYS1mXFxkXXsyfSkoW2EtZlxcZF17Mn0pJC9pO3JldHVybiBlPWUucmVwbGFjZShyLGZ1bmN0aW9uKGUsdCxyLGEpe3JldHVybiB0K3QrcityK2ErYX0pLHQ9YS5leGVjKGUpLHQ/W3BhcnNlSW50KHRbMV0sMTYpLHBhcnNlSW50KHRbMl0sMTYpLHBhcnNlSW50KHRbM10sMTYpXTpbMCwwLDBdfSxpc0NTU051bGxWYWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gMD09ZXx8L14obm9uZXxhdXRvfHRyYW5zcGFyZW50fChyZ2JhXFwoMCwgPzAsID8wLCA/MFxcKSkpJC9pLnRlc3QoZSl9LGdldFVuaXRUeXBlOmZ1bmN0aW9uKGUpe3JldHVybi9eKHJvdGF0ZXxza2V3KS9pLnRlc3QoZSk/XCJkZWdcIjovKF4oc2NhbGV8c2NhbGVYfHNjYWxlWXxzY2FsZVp8YWxwaGF8ZmxleEdyb3d8ZmxleEhlaWdodHx6SW5kZXh8Zm9udFdlaWdodCkkKXwoKG9wYWNpdHl8cmVkfGdyZWVufGJsdWV8YWxwaGEpJCkvaS50ZXN0KGUpP1wiXCI6XCJweFwifSxnZXREaXNwbGF5VHlwZTpmdW5jdGlvbihlKXt2YXIgdD1lJiZlLnRhZ05hbWUudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpO3JldHVybi9eKGJ8YmlnfGl8c21hbGx8dHR8YWJicnxhY3JvbnltfGNpdGV8Y29kZXxkZm58ZW18a2JkfHN0cm9uZ3xzYW1wfHZhcnxhfGJkb3xicnxpbWd8bWFwfG9iamVjdHxxfHNjcmlwdHxzcGFufHN1YnxzdXB8YnV0dG9ufGlucHV0fGxhYmVsfHNlbGVjdHx0ZXh0YXJlYSkkL2kudGVzdCh0KT9cImlubGluZVwiOi9eKGxpKSQvaS50ZXN0KHQpP1wibGlzdC1pdGVtXCI6L14odHIpJC9pLnRlc3QodCk/XCJ0YWJsZS1yb3dcIjovXih0YWJsZSkkL2kudGVzdCh0KT9cInRhYmxlXCI6L14odGJvZHkpJC9pLnRlc3QodCk/XCJ0YWJsZS1yb3ctZ3JvdXBcIjpcImJsb2NrXCJ9LGFkZENsYXNzOmZ1bmN0aW9uKGUsdCl7ZS5jbGFzc0xpc3Q/ZS5jbGFzc0xpc3QuYWRkKHQpOmUuY2xhc3NOYW1lKz0oZS5jbGFzc05hbWUubGVuZ3RoP1wiIFwiOlwiXCIpK3R9LHJlbW92ZUNsYXNzOmZ1bmN0aW9uKGUsdCl7ZS5jbGFzc0xpc3Q/ZS5jbGFzc0xpc3QucmVtb3ZlKHQpOmUuY2xhc3NOYW1lPWUuY2xhc3NOYW1lLnRvU3RyaW5nKCkucmVwbGFjZShuZXcgUmVnRXhwKFwiKF58XFxcXHMpXCIrdC5zcGxpdChcIiBcIikuam9pbihcInxcIikrXCIoXFxcXHN8JClcIixcImdpXCIpLFwiIFwiKX19LGdldFByb3BlcnR5VmFsdWU6ZnVuY3Rpb24oZSxyLG4sbyl7ZnVuY3Rpb24gcyhlLHIpe2Z1bmN0aW9uIG4oKXt1JiZTLnNldFByb3BlcnR5VmFsdWUoZSxcImRpc3BsYXlcIixcIm5vbmVcIil9dmFyIGw9MDtpZig4Pj1kKWw9Zi5jc3MoZSxyKTtlbHNle3ZhciB1PSExO2lmKC9eKHdpZHRofGhlaWdodCkkLy50ZXN0KHIpJiYwPT09Uy5nZXRQcm9wZXJ0eVZhbHVlKGUsXCJkaXNwbGF5XCIpJiYodT0hMCxTLnNldFByb3BlcnR5VmFsdWUoZSxcImRpc3BsYXlcIixTLlZhbHVlcy5nZXREaXNwbGF5VHlwZShlKSkpLCFvKXtpZihcImhlaWdodFwiPT09ciYmXCJib3JkZXItYm94XCIhPT1TLmdldFByb3BlcnR5VmFsdWUoZSxcImJveFNpemluZ1wiKS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkpe3ZhciBjPWUub2Zmc2V0SGVpZ2h0LShwYXJzZUZsb2F0KFMuZ2V0UHJvcGVydHlWYWx1ZShlLFwiYm9yZGVyVG9wV2lkdGhcIikpfHwwKS0ocGFyc2VGbG9hdChTLmdldFByb3BlcnR5VmFsdWUoZSxcImJvcmRlckJvdHRvbVdpZHRoXCIpKXx8MCktKHBhcnNlRmxvYXQoUy5nZXRQcm9wZXJ0eVZhbHVlKGUsXCJwYWRkaW5nVG9wXCIpKXx8MCktKHBhcnNlRmxvYXQoUy5nZXRQcm9wZXJ0eVZhbHVlKGUsXCJwYWRkaW5nQm90dG9tXCIpKXx8MCk7cmV0dXJuIG4oKSxjfWlmKFwid2lkdGhcIj09PXImJlwiYm9yZGVyLWJveFwiIT09Uy5nZXRQcm9wZXJ0eVZhbHVlKGUsXCJib3hTaXppbmdcIikudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpKXt2YXIgcD1lLm9mZnNldFdpZHRoLShwYXJzZUZsb2F0KFMuZ2V0UHJvcGVydHlWYWx1ZShlLFwiYm9yZGVyTGVmdFdpZHRoXCIpKXx8MCktKHBhcnNlRmxvYXQoUy5nZXRQcm9wZXJ0eVZhbHVlKGUsXCJib3JkZXJSaWdodFdpZHRoXCIpKXx8MCktKHBhcnNlRmxvYXQoUy5nZXRQcm9wZXJ0eVZhbHVlKGUsXCJwYWRkaW5nTGVmdFwiKSl8fDApLShwYXJzZUZsb2F0KFMuZ2V0UHJvcGVydHlWYWx1ZShlLFwicGFkZGluZ1JpZ2h0XCIpKXx8MCk7cmV0dXJuIG4oKSxwfX12YXIgZztnPWkoZSk9PT1hP3QuZ2V0Q29tcHV0ZWRTdHlsZShlLG51bGwpOmkoZSkuY29tcHV0ZWRTdHlsZT9pKGUpLmNvbXB1dGVkU3R5bGU6aShlKS5jb21wdXRlZFN0eWxlPXQuZ2V0Q29tcHV0ZWRTdHlsZShlLG51bGwpLFwiYm9yZGVyQ29sb3JcIj09PXImJihyPVwiYm9yZGVyVG9wQ29sb3JcIiksbD05PT09ZCYmXCJmaWx0ZXJcIj09PXI/Zy5nZXRQcm9wZXJ0eVZhbHVlKHIpOmdbcl0sKFwiXCI9PT1sfHxudWxsPT09bCkmJihsPWUuc3R5bGVbcl0pLG4oKX1pZihcImF1dG9cIj09PWwmJi9eKHRvcHxyaWdodHxib3R0b218bGVmdCkkL2kudGVzdChyKSl7dmFyIG09cyhlLFwicG9zaXRpb25cIik7KFwiZml4ZWRcIj09PW18fFwiYWJzb2x1dGVcIj09PW0mJi90b3B8bGVmdC9pLnRlc3QocikpJiYobD1mKGUpLnBvc2l0aW9uKClbcl0rXCJweFwiKX1yZXR1cm4gbH12YXIgbDtpZihTLkhvb2tzLnJlZ2lzdGVyZWRbcl0pe3ZhciB1PXIsYz1TLkhvb2tzLmdldFJvb3QodSk7bj09PWEmJihuPVMuZ2V0UHJvcGVydHlWYWx1ZShlLFMuTmFtZXMucHJlZml4Q2hlY2soYylbMF0pKSxTLk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbY10mJihuPVMuTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZFtjXShcImV4dHJhY3RcIixlLG4pKSxsPVMuSG9va3MuZXh0cmFjdFZhbHVlKHUsbil9ZWxzZSBpZihTLk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbcl0pe3ZhciBwLGc7cD1TLk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbcl0oXCJuYW1lXCIsZSksXCJ0cmFuc2Zvcm1cIiE9PXAmJihnPXMoZSxTLk5hbWVzLnByZWZpeENoZWNrKHApWzBdKSxTLlZhbHVlcy5pc0NTU051bGxWYWx1ZShnKSYmUy5Ib29rcy50ZW1wbGF0ZXNbcl0mJihnPVMuSG9va3MudGVtcGxhdGVzW3JdWzFdKSksbD1TLk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbcl0oXCJleHRyYWN0XCIsZSxnKX1pZighL15bXFxkLV0vLnRlc3QobCkpaWYoaShlKSYmaShlKS5pc1NWRyYmUy5OYW1lcy5TVkdBdHRyaWJ1dGUocikpaWYoL14oaGVpZ2h0fHdpZHRoKSQvaS50ZXN0KHIpKXRyeXtsPWUuZ2V0QkJveCgpW3JdfWNhdGNoKG0pe2w9MH1lbHNlIGw9ZS5nZXRBdHRyaWJ1dGUocik7ZWxzZSBsPXMoZSxTLk5hbWVzLnByZWZpeENoZWNrKHIpWzBdKTtyZXR1cm4gUy5WYWx1ZXMuaXNDU1NOdWxsVmFsdWUobCkmJihsPTApLGIuZGVidWc+PTImJmNvbnNvbGUubG9nKFwiR2V0IFwiK3IrXCI6IFwiK2wpLGx9LHNldFByb3BlcnR5VmFsdWU6ZnVuY3Rpb24oZSxyLGEsbixvKXt2YXIgcz1yO2lmKFwic2Nyb2xsXCI9PT1yKW8uY29udGFpbmVyP28uY29udGFpbmVyW1wic2Nyb2xsXCIrby5kaXJlY3Rpb25dPWE6XCJMZWZ0XCI9PT1vLmRpcmVjdGlvbj90LnNjcm9sbFRvKGEsby5hbHRlcm5hdGVWYWx1ZSk6dC5zY3JvbGxUbyhvLmFsdGVybmF0ZVZhbHVlLGEpO2Vsc2UgaWYoUy5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW3JdJiZcInRyYW5zZm9ybVwiPT09Uy5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW3JdKFwibmFtZVwiLGUpKVMuTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZFtyXShcImluamVjdFwiLGUsYSkscz1cInRyYW5zZm9ybVwiLGE9aShlKS50cmFuc2Zvcm1DYWNoZVtyXTtlbHNle2lmKFMuSG9va3MucmVnaXN0ZXJlZFtyXSl7dmFyIGw9cix1PVMuSG9va3MuZ2V0Um9vdChyKTtuPW58fFMuZ2V0UHJvcGVydHlWYWx1ZShlLHUpLGE9Uy5Ib29rcy5pbmplY3RWYWx1ZShsLGEsbikscj11fWlmKFMuTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZFtyXSYmKGE9Uy5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW3JdKFwiaW5qZWN0XCIsZSxhKSxyPVMuTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZFtyXShcIm5hbWVcIixlKSkscz1TLk5hbWVzLnByZWZpeENoZWNrKHIpWzBdLDg+PWQpdHJ5e2Uuc3R5bGVbc109YX1jYXRjaChjKXtiLmRlYnVnJiZjb25zb2xlLmxvZyhcIkJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCBbXCIrYStcIl0gZm9yIFtcIitzK1wiXVwiKX1lbHNlIGkoZSkmJmkoZSkuaXNTVkcmJlMuTmFtZXMuU1ZHQXR0cmlidXRlKHIpP2Uuc2V0QXR0cmlidXRlKHIsYSk6ZS5zdHlsZVtzXT1hO2IuZGVidWc+PTImJmNvbnNvbGUubG9nKFwiU2V0IFwiK3IrXCIgKFwiK3MrXCIpOiBcIithKX1yZXR1cm5bcyxhXX0sZmx1c2hUcmFuc2Zvcm1DYWNoZTpmdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQpe3JldHVybiBwYXJzZUZsb2F0KFMuZ2V0UHJvcGVydHlWYWx1ZShlLHQpKX12YXIgcj1cIlwiO2lmKChkfHxiLlN0YXRlLmlzQW5kcm9pZCYmIWIuU3RhdGUuaXNDaHJvbWUpJiZpKGUpLmlzU1ZHKXt2YXIgYT17dHJhbnNsYXRlOlt0KFwidHJhbnNsYXRlWFwiKSx0KFwidHJhbnNsYXRlWVwiKV0sc2tld1g6W3QoXCJza2V3WFwiKV0sc2tld1k6W3QoXCJza2V3WVwiKV0sc2NhbGU6MSE9PXQoXCJzY2FsZVwiKT9bdChcInNjYWxlXCIpLHQoXCJzY2FsZVwiKV06W3QoXCJzY2FsZVhcIiksdChcInNjYWxlWVwiKV0scm90YXRlOlt0KFwicm90YXRlWlwiKSwwLDBdfTtmLmVhY2goaShlKS50cmFuc2Zvcm1DYWNoZSxmdW5jdGlvbihlKXsvXnRyYW5zbGF0ZS9pLnRlc3QoZSk/ZT1cInRyYW5zbGF0ZVwiOi9ec2NhbGUvaS50ZXN0KGUpP2U9XCJzY2FsZVwiOi9ecm90YXRlL2kudGVzdChlKSYmKGU9XCJyb3RhdGVcIiksYVtlXSYmKHIrPWUrXCIoXCIrYVtlXS5qb2luKFwiIFwiKStcIikgXCIsZGVsZXRlIGFbZV0pfSl9ZWxzZXt2YXIgbixvO2YuZWFjaChpKGUpLnRyYW5zZm9ybUNhY2hlLGZ1bmN0aW9uKHQpe3JldHVybiBuPWkoZSkudHJhbnNmb3JtQ2FjaGVbdF0sXCJ0cmFuc2Zvcm1QZXJzcGVjdGl2ZVwiPT09dD8obz1uLCEwKTooOT09PWQmJlwicm90YXRlWlwiPT09dCYmKHQ9XCJyb3RhdGVcIiksdm9pZChyKz10K24rXCIgXCIpKX0pLG8mJihyPVwicGVyc3BlY3RpdmVcIitvK1wiIFwiK3IpfVMuc2V0UHJvcGVydHlWYWx1ZShlLFwidHJhbnNmb3JtXCIscil9fTtTLkhvb2tzLnJlZ2lzdGVyKCksUy5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcigpLGIuaG9vaz1mdW5jdGlvbihlLHQscil7dmFyIG49YTtyZXR1cm4gZT1vKGUpLGYuZWFjaChlLGZ1bmN0aW9uKGUsbyl7aWYoaShvKT09PWEmJmIuaW5pdChvKSxyPT09YSluPT09YSYmKG49Yi5DU1MuZ2V0UHJvcGVydHlWYWx1ZShvLHQpKTtlbHNle3ZhciBzPWIuQ1NTLnNldFByb3BlcnR5VmFsdWUobyx0LHIpO1widHJhbnNmb3JtXCI9PT1zWzBdJiZiLkNTUy5mbHVzaFRyYW5zZm9ybUNhY2hlKG8pLG49c319KSxufTt2YXIgUD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gcz9rLnByb21pc2V8fG51bGw6bH1mdW5jdGlvbiBuKCl7ZnVuY3Rpb24gZShlKXtmdW5jdGlvbiBwKGUsdCl7dmFyIHI9YSxuPWEsaT1hO3JldHVybiBtLmlzQXJyYXkoZSk/KHI9ZVswXSwhbS5pc0FycmF5KGVbMV0pJiYvXltcXGQtXS8udGVzdChlWzFdKXx8bS5pc0Z1bmN0aW9uKGVbMV0pfHxTLlJlZ0V4LmlzSGV4LnRlc3QoZVsxXSk/aT1lWzFdOihtLmlzU3RyaW5nKGVbMV0pJiYhUy5SZWdFeC5pc0hleC50ZXN0KGVbMV0pfHxtLmlzQXJyYXkoZVsxXSkpJiYobj10P2VbMV06dShlWzFdLHMuZHVyYXRpb24pLGVbMl0hPT1hJiYoaT1lWzJdKSkpOnI9ZSx0fHwobj1ufHxzLmVhc2luZyksbS5pc0Z1bmN0aW9uKHIpJiYocj1yLmNhbGwobyxWLHcpKSxtLmlzRnVuY3Rpb24oaSkmJihpPWkuY2FsbChvLFYsdykpLFtyfHwwLG4saV19ZnVuY3Rpb24gZChlLHQpe3ZhciByLGE7cmV0dXJuIGE9KHR8fFwiMFwiKS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvWyVBLXpdKyQvLGZ1bmN0aW9uKGUpe3JldHVybiByPWUsXCJcIn0pLHJ8fChyPVMuVmFsdWVzLmdldFVuaXRUeXBlKGUpKSxbYSxyXX1mdW5jdGlvbiBoKCl7dmFyIGU9e215UGFyZW50Om8ucGFyZW50Tm9kZXx8ci5ib2R5LHBvc2l0aW9uOlMuZ2V0UHJvcGVydHlWYWx1ZShvLFwicG9zaXRpb25cIiksZm9udFNpemU6Uy5nZXRQcm9wZXJ0eVZhbHVlKG8sXCJmb250U2l6ZVwiKX0sYT1lLnBvc2l0aW9uPT09TC5sYXN0UG9zaXRpb24mJmUubXlQYXJlbnQ9PT1MLmxhc3RQYXJlbnQsbj1lLmZvbnRTaXplPT09TC5sYXN0Rm9udFNpemU7TC5sYXN0UGFyZW50PWUubXlQYXJlbnQsTC5sYXN0UG9zaXRpb249ZS5wb3NpdGlvbixMLmxhc3RGb250U2l6ZT1lLmZvbnRTaXplO3ZhciBzPTEwMCxsPXt9O2lmKG4mJmEpbC5lbVRvUHg9TC5sYXN0RW1Ub1B4LGwucGVyY2VudFRvUHhXaWR0aD1MLmxhc3RQZXJjZW50VG9QeFdpZHRoLGwucGVyY2VudFRvUHhIZWlnaHQ9TC5sYXN0UGVyY2VudFRvUHhIZWlnaHQ7ZWxzZXt2YXIgdT1pKG8pLmlzU1ZHP3IuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIixcInJlY3RcIik6ci5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2IuaW5pdCh1KSxlLm15UGFyZW50LmFwcGVuZENoaWxkKHUpLGYuZWFjaChbXCJvdmVyZmxvd1wiLFwib3ZlcmZsb3dYXCIsXCJvdmVyZmxvd1lcIl0sZnVuY3Rpb24oZSx0KXtiLkNTUy5zZXRQcm9wZXJ0eVZhbHVlKHUsdCxcImhpZGRlblwiKX0pLGIuQ1NTLnNldFByb3BlcnR5VmFsdWUodSxcInBvc2l0aW9uXCIsZS5wb3NpdGlvbiksYi5DU1Muc2V0UHJvcGVydHlWYWx1ZSh1LFwiZm9udFNpemVcIixlLmZvbnRTaXplKSxiLkNTUy5zZXRQcm9wZXJ0eVZhbHVlKHUsXCJib3hTaXppbmdcIixcImNvbnRlbnQtYm94XCIpLGYuZWFjaChbXCJtaW5XaWR0aFwiLFwibWF4V2lkdGhcIixcIndpZHRoXCIsXCJtaW5IZWlnaHRcIixcIm1heEhlaWdodFwiLFwiaGVpZ2h0XCJdLGZ1bmN0aW9uKGUsdCl7Yi5DU1Muc2V0UHJvcGVydHlWYWx1ZSh1LHQscytcIiVcIil9KSxiLkNTUy5zZXRQcm9wZXJ0eVZhbHVlKHUsXCJwYWRkaW5nTGVmdFwiLHMrXCJlbVwiKSxsLnBlcmNlbnRUb1B4V2lkdGg9TC5sYXN0UGVyY2VudFRvUHhXaWR0aD0ocGFyc2VGbG9hdChTLmdldFByb3BlcnR5VmFsdWUodSxcIndpZHRoXCIsbnVsbCwhMCkpfHwxKS9zLGwucGVyY2VudFRvUHhIZWlnaHQ9TC5sYXN0UGVyY2VudFRvUHhIZWlnaHQ9KHBhcnNlRmxvYXQoUy5nZXRQcm9wZXJ0eVZhbHVlKHUsXCJoZWlnaHRcIixudWxsLCEwKSl8fDEpL3MsbC5lbVRvUHg9TC5sYXN0RW1Ub1B4PShwYXJzZUZsb2F0KFMuZ2V0UHJvcGVydHlWYWx1ZSh1LFwicGFkZGluZ0xlZnRcIikpfHwxKS9zLGUubXlQYXJlbnQucmVtb3ZlQ2hpbGQodSl9cmV0dXJuIG51bGw9PT1MLnJlbVRvUHgmJihMLnJlbVRvUHg9cGFyc2VGbG9hdChTLmdldFByb3BlcnR5VmFsdWUoci5ib2R5LFwiZm9udFNpemVcIikpfHwxNiksbnVsbD09PUwudndUb1B4JiYoTC52d1RvUHg9cGFyc2VGbG9hdCh0LmlubmVyV2lkdGgpLzEwMCxMLnZoVG9QeD1wYXJzZUZsb2F0KHQuaW5uZXJIZWlnaHQpLzEwMCksbC5yZW1Ub1B4PUwucmVtVG9QeCxsLnZ3VG9QeD1MLnZ3VG9QeCxsLnZoVG9QeD1MLnZoVG9QeCxiLmRlYnVnPj0xJiZjb25zb2xlLmxvZyhcIlVuaXQgcmF0aW9zOiBcIitKU09OLnN0cmluZ2lmeShsKSxvKSxsfWlmKHMuYmVnaW4mJjA9PT1WKXRyeXtzLmJlZ2luLmNhbGwoZyxnKX1jYXRjaCh4KXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dGhyb3cgeH0sMSl9aWYoXCJzY3JvbGxcIj09PUEpe3ZhciBQLEMsVCxGPS9eeCQvaS50ZXN0KHMuYXhpcyk/XCJMZWZ0XCI6XCJUb3BcIixqPXBhcnNlRmxvYXQocy5vZmZzZXQpfHwwO3MuY29udGFpbmVyP20uaXNXcmFwcGVkKHMuY29udGFpbmVyKXx8bS5pc05vZGUocy5jb250YWluZXIpPyhzLmNvbnRhaW5lcj1zLmNvbnRhaW5lclswXXx8cy5jb250YWluZXIsUD1zLmNvbnRhaW5lcltcInNjcm9sbFwiK0ZdLFQ9UCtmKG8pLnBvc2l0aW9uKClbRi50b0xvd2VyQ2FzZSgpXStqKTpzLmNvbnRhaW5lcj1udWxsOihQPWIuU3RhdGUuc2Nyb2xsQW5jaG9yW2IuU3RhdGVbXCJzY3JvbGxQcm9wZXJ0eVwiK0ZdXSxDPWIuU3RhdGUuc2Nyb2xsQW5jaG9yW2IuU3RhdGVbXCJzY3JvbGxQcm9wZXJ0eVwiKyhcIkxlZnRcIj09PUY/XCJUb3BcIjpcIkxlZnRcIildXSxUPWYobykub2Zmc2V0KClbRi50b0xvd2VyQ2FzZSgpXStqKSxsPXtzY3JvbGw6e3Jvb3RQcm9wZXJ0eVZhbHVlOiExLHN0YXJ0VmFsdWU6UCxjdXJyZW50VmFsdWU6UCxlbmRWYWx1ZTpULHVuaXRUeXBlOlwiXCIsZWFzaW5nOnMuZWFzaW5nLHNjcm9sbERhdGE6e2NvbnRhaW5lcjpzLmNvbnRhaW5lcixkaXJlY3Rpb246RixhbHRlcm5hdGVWYWx1ZTpDfX0sZWxlbWVudDpvfSxiLmRlYnVnJiZjb25zb2xlLmxvZyhcInR3ZWVuc0NvbnRhaW5lciAoc2Nyb2xsKTogXCIsbC5zY3JvbGwsbyl9ZWxzZSBpZihcInJldmVyc2VcIj09PUEpe2lmKCFpKG8pLnR3ZWVuc0NvbnRhaW5lcilyZXR1cm4gdm9pZCBmLmRlcXVldWUobyxzLnF1ZXVlKTtcIm5vbmVcIj09PWkobykub3B0cy5kaXNwbGF5JiYoaShvKS5vcHRzLmRpc3BsYXk9XCJhdXRvXCIpLFwiaGlkZGVuXCI9PT1pKG8pLm9wdHMudmlzaWJpbGl0eSYmKGkobykub3B0cy52aXNpYmlsaXR5PVwidmlzaWJsZVwiKSxpKG8pLm9wdHMubG9vcD0hMSxpKG8pLm9wdHMuYmVnaW49bnVsbCxpKG8pLm9wdHMuY29tcGxldGU9bnVsbCx2LmVhc2luZ3x8ZGVsZXRlIHMuZWFzaW5nLHYuZHVyYXRpb258fGRlbGV0ZSBzLmR1cmF0aW9uLHM9Zi5leHRlbmQoe30saShvKS5vcHRzLHMpO3ZhciBFPWYuZXh0ZW5kKCEwLHt9LGkobykudHdlZW5zQ29udGFpbmVyKTtmb3IodmFyIEggaW4gRSlpZihcImVsZW1lbnRcIiE9PUgpe3ZhciBOPUVbSF0uc3RhcnRWYWx1ZTtFW0hdLnN0YXJ0VmFsdWU9RVtIXS5jdXJyZW50VmFsdWU9RVtIXS5lbmRWYWx1ZSxFW0hdLmVuZFZhbHVlPU4sbS5pc0VtcHR5T2JqZWN0KHYpfHwoRVtIXS5lYXNpbmc9cy5lYXNpbmcpLGIuZGVidWcmJmNvbnNvbGUubG9nKFwicmV2ZXJzZSB0d2VlbnNDb250YWluZXIgKFwiK0grXCIpOiBcIitKU09OLnN0cmluZ2lmeShFW0hdKSxvKX1sPUV9ZWxzZSBpZihcInN0YXJ0XCI9PT1BKXt2YXIgRTtpKG8pLnR3ZWVuc0NvbnRhaW5lciYmaShvKS5pc0FuaW1hdGluZz09PSEwJiYoRT1pKG8pLnR3ZWVuc0NvbnRhaW5lciksZi5lYWNoKHksZnVuY3Rpb24oZSx0KXtpZihSZWdFeHAoXCJeXCIrUy5MaXN0cy5jb2xvcnMuam9pbihcIiR8XlwiKStcIiRcIikudGVzdChlKSl7dmFyIHI9cCh0LCEwKSxuPXJbMF0sbz1yWzFdLGk9clsyXTtpZihTLlJlZ0V4LmlzSGV4LnRlc3Qobikpe2Zvcih2YXIgcz1bXCJSZWRcIixcIkdyZWVuXCIsXCJCbHVlXCJdLGw9Uy5WYWx1ZXMuaGV4VG9SZ2IobiksdT1pP1MuVmFsdWVzLmhleFRvUmdiKGkpOmEsYz0wO2M8cy5sZW5ndGg7YysrKXt2YXIgZj1bbFtjXV07byYmZi5wdXNoKG8pLHUhPT1hJiZmLnB1c2godVtjXSkseVtlK3NbY11dPWZ9ZGVsZXRlIHlbZV19fX0pO2Zvcih2YXIgeiBpbiB5KXt2YXIgTz1wKHlbel0pLHE9T1swXSwkPU9bMV0sTT1PWzJdO3o9Uy5OYW1lcy5jYW1lbENhc2Uoeik7dmFyIEk9Uy5Ib29rcy5nZXRSb290KHopLEI9ITE7aWYoaShvKS5pc1NWR3x8XCJ0d2VlblwiPT09SXx8Uy5OYW1lcy5wcmVmaXhDaGVjayhJKVsxXSE9PSExfHxTLk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbSV0hPT1hKXsocy5kaXNwbGF5IT09YSYmbnVsbCE9PXMuZGlzcGxheSYmXCJub25lXCIhPT1zLmRpc3BsYXl8fHMudmlzaWJpbGl0eSE9PWEmJlwiaGlkZGVuXCIhPT1zLnZpc2liaWxpdHkpJiYvb3BhY2l0eXxmaWx0ZXIvLnRlc3QoeikmJiFNJiYwIT09cSYmKE09MCkscy5fY2FjaGVWYWx1ZXMmJkUmJkVbel0/KE09PT1hJiYoTT1FW3pdLmVuZFZhbHVlK0Vbel0udW5pdFR5cGUpLEI9aShvKS5yb290UHJvcGVydHlWYWx1ZUNhY2hlW0ldKTpTLkhvb2tzLnJlZ2lzdGVyZWRbel0/TT09PWE/KEI9Uy5nZXRQcm9wZXJ0eVZhbHVlKG8sSSksTT1TLmdldFByb3BlcnR5VmFsdWUobyx6LEIpKTpCPVMuSG9va3MudGVtcGxhdGVzW0ldWzFdOk09PT1hJiYoTT1TLmdldFByb3BlcnR5VmFsdWUobyx6KSk7dmFyIFcsRyxZLEQ9ITE7aWYoVz1kKHosTSksTT1XWzBdLFk9V1sxXSxXPWQoeixxKSxxPVdbMF0ucmVwbGFjZSgvXihbKy1cXC8qXSk9LyxmdW5jdGlvbihlLHQpe3JldHVybiBEPXQsXCJcIn0pLEc9V1sxXSxNPXBhcnNlRmxvYXQoTSl8fDAscT1wYXJzZUZsb2F0KHEpfHwwLFwiJVwiPT09RyYmKC9eKGZvbnRTaXplfGxpbmVIZWlnaHQpJC8udGVzdCh6KT8ocS89MTAwLEc9XCJlbVwiKTovXnNjYWxlLy50ZXN0KHopPyhxLz0xMDAsRz1cIlwiKTovKFJlZHxHcmVlbnxCbHVlKSQvaS50ZXN0KHopJiYocT1xLzEwMCoyNTUsRz1cIlwiKSksL1tcXC8qXS8udGVzdChEKSlHPVk7ZWxzZSBpZihZIT09RyYmMCE9PU0paWYoMD09PXEpRz1ZO2Vsc2V7bj1ufHxoKCk7dmFyIFE9L21hcmdpbnxwYWRkaW5nfGxlZnR8cmlnaHR8d2lkdGh8dGV4dHx3b3JkfGxldHRlci9pLnRlc3Qoeil8fC9YJC8udGVzdCh6KXx8XCJ4XCI9PT16P1wieFwiOlwieVwiO3N3aXRjaChZKXtjYXNlXCIlXCI6TSo9XCJ4XCI9PT1RP24ucGVyY2VudFRvUHhXaWR0aDpuLnBlcmNlbnRUb1B4SGVpZ2h0O2JyZWFrO2Nhc2VcInB4XCI6YnJlYWs7ZGVmYXVsdDpNKj1uW1krXCJUb1B4XCJdfXN3aXRjaChHKXtjYXNlXCIlXCI6TSo9MS8oXCJ4XCI9PT1RP24ucGVyY2VudFRvUHhXaWR0aDpuLnBlcmNlbnRUb1B4SGVpZ2h0KTticmVhaztjYXNlXCJweFwiOmJyZWFrO2RlZmF1bHQ6TSo9MS9uW0crXCJUb1B4XCJdfX1zd2l0Y2goRCl7Y2FzZVwiK1wiOnE9TStxO2JyZWFrO2Nhc2VcIi1cIjpxPU0tcTticmVhaztjYXNlXCIqXCI6cT1NKnE7YnJlYWs7Y2FzZVwiL1wiOnE9TS9xfWxbel09e3Jvb3RQcm9wZXJ0eVZhbHVlOkIsc3RhcnRWYWx1ZTpNLGN1cnJlbnRWYWx1ZTpNLGVuZFZhbHVlOnEsdW5pdFR5cGU6RyxlYXNpbmc6JH0sYi5kZWJ1ZyYmY29uc29sZS5sb2coXCJ0d2VlbnNDb250YWluZXIgKFwiK3orXCIpOiBcIitKU09OLnN0cmluZ2lmeShsW3pdKSxvKX1lbHNlIGIuZGVidWcmJmNvbnNvbGUubG9nKFwiU2tpcHBpbmcgW1wiK0krXCJdIGR1ZSB0byBhIGxhY2sgb2YgYnJvd3NlciBzdXBwb3J0LlwiKX1sLmVsZW1lbnQ9b31sLmVsZW1lbnQmJihTLlZhbHVlcy5hZGRDbGFzcyhvLFwidmVsb2NpdHktYW5pbWF0aW5nXCIpLFIucHVzaChsKSxcIlwiPT09cy5xdWV1ZSYmKGkobykudHdlZW5zQ29udGFpbmVyPWwsaShvKS5vcHRzPXMpLGkobykuaXNBbmltYXRpbmc9ITAsVj09PXctMT8oYi5TdGF0ZS5jYWxscy5wdXNoKFtSLGcscyxudWxsLGsucmVzb2x2ZXJdKSxiLlN0YXRlLmlzVGlja2luZz09PSExJiYoYi5TdGF0ZS5pc1RpY2tpbmc9ITAsYygpKSk6VisrKX12YXIgbixvPXRoaXMscz1mLmV4dGVuZCh7fSxiLmRlZmF1bHRzLHYpLGw9e307c3dpdGNoKGkobyk9PT1hJiZiLmluaXQobykscGFyc2VGbG9hdChzLmRlbGF5KSYmcy5xdWV1ZSE9PSExJiZmLnF1ZXVlKG8scy5xdWV1ZSxmdW5jdGlvbihlKXtiLnZlbG9jaXR5UXVldWVFbnRyeUZsYWc9ITAsaShvKS5kZWxheVRpbWVyPXtzZXRUaW1lb3V0OnNldFRpbWVvdXQoZSxwYXJzZUZsb2F0KHMuZGVsYXkpKSxuZXh0OmV9fSkscy5kdXJhdGlvbi50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkpe2Nhc2VcImZhc3RcIjpzLmR1cmF0aW9uPTIwMDticmVhaztjYXNlXCJub3JtYWxcIjpzLmR1cmF0aW9uPWg7YnJlYWs7Y2FzZVwic2xvd1wiOnMuZHVyYXRpb249NjAwO2JyZWFrO2RlZmF1bHQ6cy5kdXJhdGlvbj1wYXJzZUZsb2F0KHMuZHVyYXRpb24pfHwxfWIubW9jayE9PSExJiYoYi5tb2NrPT09ITA/cy5kdXJhdGlvbj1zLmRlbGF5PTE6KHMuZHVyYXRpb24qPXBhcnNlRmxvYXQoYi5tb2NrKXx8MSxzLmRlbGF5Kj1wYXJzZUZsb2F0KGIubW9jayl8fDEpKSxzLmVhc2luZz11KHMuZWFzaW5nLHMuZHVyYXRpb24pLHMuYmVnaW4mJiFtLmlzRnVuY3Rpb24ocy5iZWdpbikmJihzLmJlZ2luPW51bGwpLHMucHJvZ3Jlc3MmJiFtLmlzRnVuY3Rpb24ocy5wcm9ncmVzcykmJihzLnByb2dyZXNzPW51bGwpLHMuY29tcGxldGUmJiFtLmlzRnVuY3Rpb24ocy5jb21wbGV0ZSkmJihzLmNvbXBsZXRlPW51bGwpLHMuZGlzcGxheSE9PWEmJm51bGwhPT1zLmRpc3BsYXkmJihzLmRpc3BsYXk9cy5kaXNwbGF5LnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKSxcImF1dG9cIj09PXMuZGlzcGxheSYmKHMuZGlzcGxheT1iLkNTUy5WYWx1ZXMuZ2V0RGlzcGxheVR5cGUobykpKSxzLnZpc2liaWxpdHkhPT1hJiZudWxsIT09cy52aXNpYmlsaXR5JiYocy52aXNpYmlsaXR5PXMudmlzaWJpbGl0eS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkpLHMubW9iaWxlSEE9cy5tb2JpbGVIQSYmYi5TdGF0ZS5pc01vYmlsZSYmIWIuU3RhdGUuaXNHaW5nZXJicmVhZCxzLnF1ZXVlPT09ITE/cy5kZWxheT9zZXRUaW1lb3V0KGUscy5kZWxheSk6ZSgpOmYucXVldWUobyxzLnF1ZXVlLGZ1bmN0aW9uKHQscil7cmV0dXJuIHI9PT0hMD8oay5wcm9taXNlJiZrLnJlc29sdmVyKGcpLCEwKTooYi52ZWxvY2l0eVF1ZXVlRW50cnlGbGFnPSEwLHZvaWQgZSh0KSl9KSxcIlwiIT09cy5xdWV1ZSYmXCJmeFwiIT09cy5xdWV1ZXx8XCJpbnByb2dyZXNzXCI9PT1mLnF1ZXVlKG8pWzBdfHxmLmRlcXVldWUobyl9dmFyIHMsbCxkLGcseSx2LHg9YXJndW1lbnRzWzBdJiYoYXJndW1lbnRzWzBdLnB8fGYuaXNQbGFpbk9iamVjdChhcmd1bWVudHNbMF0ucHJvcGVydGllcykmJiFhcmd1bWVudHNbMF0ucHJvcGVydGllcy5uYW1lc3x8bS5pc1N0cmluZyhhcmd1bWVudHNbMF0ucHJvcGVydGllcykpO2lmKG0uaXNXcmFwcGVkKHRoaXMpPyhzPSExLGQ9MCxnPXRoaXMsbD10aGlzKToocz0hMCxkPTEsZz14P2FyZ3VtZW50c1swXS5lbGVtZW50c3x8YXJndW1lbnRzWzBdLmU6YXJndW1lbnRzWzBdKSxnPW8oZykpe3g/KHk9YXJndW1lbnRzWzBdLnByb3BlcnRpZXN8fGFyZ3VtZW50c1swXS5wLHY9YXJndW1lbnRzWzBdLm9wdGlvbnN8fGFyZ3VtZW50c1swXS5vKTooeT1hcmd1bWVudHNbZF0sdj1hcmd1bWVudHNbZCsxXSk7dmFyIHc9Zy5sZW5ndGgsVj0wO2lmKCEvXihzdG9wfGZpbmlzaCkkL2kudGVzdCh5KSYmIWYuaXNQbGFpbk9iamVjdCh2KSl7dmFyIEM9ZCsxO3Y9e307Zm9yKHZhciBUPUM7VDxhcmd1bWVudHMubGVuZ3RoO1QrKyltLmlzQXJyYXkoYXJndW1lbnRzW1RdKXx8IS9eKGZhc3R8bm9ybWFsfHNsb3cpJC9pLnRlc3QoYXJndW1lbnRzW1RdKSYmIS9eXFxkLy50ZXN0KGFyZ3VtZW50c1tUXSk/bS5pc1N0cmluZyhhcmd1bWVudHNbVF0pfHxtLmlzQXJyYXkoYXJndW1lbnRzW1RdKT92LmVhc2luZz1hcmd1bWVudHNbVF06bS5pc0Z1bmN0aW9uKGFyZ3VtZW50c1tUXSkmJih2LmNvbXBsZXRlPWFyZ3VtZW50c1tUXSk6di5kdXJhdGlvbj1hcmd1bWVudHNbVF19dmFyIGs9e3Byb21pc2U6bnVsbCxyZXNvbHZlcjpudWxsLHJlamVjdGVyOm51bGx9O3MmJmIuUHJvbWlzZSYmKGsucHJvbWlzZT1uZXcgYi5Qcm9taXNlKGZ1bmN0aW9uKGUsdCl7ay5yZXNvbHZlcj1lLGsucmVqZWN0ZXI9dH0pKTt2YXIgQTtzd2l0Y2goeSl7Y2FzZVwic2Nyb2xsXCI6QT1cInNjcm9sbFwiO2JyZWFrO2Nhc2VcInJldmVyc2VcIjpBPVwicmV2ZXJzZVwiO2JyZWFrO2Nhc2VcImZpbmlzaFwiOmNhc2VcInN0b3BcIjpmLmVhY2goZyxmdW5jdGlvbihlLHQpe2kodCkmJmkodCkuZGVsYXlUaW1lciYmKGNsZWFyVGltZW91dChpKHQpLmRlbGF5VGltZXIuc2V0VGltZW91dCksaSh0KS5kZWxheVRpbWVyLm5leHQmJmkodCkuZGVsYXlUaW1lci5uZXh0KCksZGVsZXRlIGkodCkuZGVsYXlUaW1lcil9KTt2YXIgRj1bXTtyZXR1cm4gZi5lYWNoKGIuU3RhdGUuY2FsbHMsZnVuY3Rpb24oZSx0KXt0JiZmLmVhY2godFsxXSxmdW5jdGlvbihyLG4pe3ZhciBvPXY9PT1hP1wiXCI6djtyZXR1cm4gbz09PSEwfHx0WzJdLnF1ZXVlPT09b3x8dj09PWEmJnRbMl0ucXVldWU9PT0hMT92b2lkIGYuZWFjaChnLGZ1bmN0aW9uKHIsYSl7YT09PW4mJigodj09PSEwfHxtLmlzU3RyaW5nKHYpKSYmKGYuZWFjaChmLnF1ZXVlKGEsbS5pc1N0cmluZyh2KT92OlwiXCIpLGZ1bmN0aW9uKGUsdCl7XHJcbm0uaXNGdW5jdGlvbih0KSYmdChudWxsLCEwKX0pLGYucXVldWUoYSxtLmlzU3RyaW5nKHYpP3Y6XCJcIixbXSkpLFwic3RvcFwiPT09eT8oaShhKSYmaShhKS50d2VlbnNDb250YWluZXImJm8hPT0hMSYmZi5lYWNoKGkoYSkudHdlZW5zQ29udGFpbmVyLGZ1bmN0aW9uKGUsdCl7dC5lbmRWYWx1ZT10LmN1cnJlbnRWYWx1ZX0pLEYucHVzaChlKSk6XCJmaW5pc2hcIj09PXkmJih0WzJdLmR1cmF0aW9uPTEpKX0pOiEwfSl9KSxcInN0b3BcIj09PXkmJihmLmVhY2goRixmdW5jdGlvbihlLHQpe3AodCwhMCl9KSxrLnByb21pc2UmJmsucmVzb2x2ZXIoZykpLGUoKTtkZWZhdWx0OmlmKCFmLmlzUGxhaW5PYmplY3QoeSl8fG0uaXNFbXB0eU9iamVjdCh5KSl7aWYobS5pc1N0cmluZyh5KSYmYi5SZWRpcmVjdHNbeV0pe3ZhciBqPWYuZXh0ZW5kKHt9LHYpLEU9ai5kdXJhdGlvbixIPWouZGVsYXl8fDA7cmV0dXJuIGouYmFja3dhcmRzPT09ITAmJihnPWYuZXh0ZW5kKCEwLFtdLGcpLnJldmVyc2UoKSksZi5lYWNoKGcsZnVuY3Rpb24oZSx0KXtwYXJzZUZsb2F0KGouc3RhZ2dlcik/ai5kZWxheT1IK3BhcnNlRmxvYXQoai5zdGFnZ2VyKSplOm0uaXNGdW5jdGlvbihqLnN0YWdnZXIpJiYoai5kZWxheT1IK2ouc3RhZ2dlci5jYWxsKHQsZSx3KSksai5kcmFnJiYoai5kdXJhdGlvbj1wYXJzZUZsb2F0KEUpfHwoL14oY2FsbG91dHx0cmFuc2l0aW9uKS8udGVzdCh5KT8xZTM6aCksai5kdXJhdGlvbj1NYXRoLm1heChqLmR1cmF0aW9uKihqLmJhY2t3YXJkcz8xLWUvdzooZSsxKS93KSwuNzUqai5kdXJhdGlvbiwyMDApKSxiLlJlZGlyZWN0c1t5XS5jYWxsKHQsdCxqfHx7fSxlLHcsZyxrLnByb21pc2U/azphKX0pLGUoKX12YXIgTj1cIlZlbG9jaXR5OiBGaXJzdCBhcmd1bWVudCAoXCIreStcIikgd2FzIG5vdCBhIHByb3BlcnR5IG1hcCwgYSBrbm93biBhY3Rpb24sIG9yIGEgcmVnaXN0ZXJlZCByZWRpcmVjdC4gQWJvcnRpbmcuXCI7cmV0dXJuIGsucHJvbWlzZT9rLnJlamVjdGVyKG5ldyBFcnJvcihOKSk6Y29uc29sZS5sb2coTiksZSgpfUE9XCJzdGFydFwifXZhciBMPXtsYXN0UGFyZW50Om51bGwsbGFzdFBvc2l0aW9uOm51bGwsbGFzdEZvbnRTaXplOm51bGwsbGFzdFBlcmNlbnRUb1B4V2lkdGg6bnVsbCxsYXN0UGVyY2VudFRvUHhIZWlnaHQ6bnVsbCxsYXN0RW1Ub1B4Om51bGwscmVtVG9QeDpudWxsLHZ3VG9QeDpudWxsLHZoVG9QeDpudWxsfSxSPVtdO2YuZWFjaChnLGZ1bmN0aW9uKGUsdCl7bS5pc05vZGUodCkmJm4uY2FsbCh0KX0pO3ZhciB6LGo9Zi5leHRlbmQoe30sYi5kZWZhdWx0cyx2KTtpZihqLmxvb3A9cGFyc2VJbnQoai5sb29wKSx6PTIqai5sb29wLTEsai5sb29wKWZvcih2YXIgTz0wO3o+TztPKyspe3ZhciBxPXtkZWxheTpqLmRlbGF5LHByb2dyZXNzOmoucHJvZ3Jlc3N9O089PT16LTEmJihxLmRpc3BsYXk9ai5kaXNwbGF5LHEudmlzaWJpbGl0eT1qLnZpc2liaWxpdHkscS5jb21wbGV0ZT1qLmNvbXBsZXRlKSxQKGcsXCJyZXZlcnNlXCIscSl9cmV0dXJuIGUoKX19O2I9Zi5leHRlbmQoUCxiKSxiLmFuaW1hdGU9UDt2YXIgdz10LnJlcXVlc3RBbmltYXRpb25GcmFtZXx8ZztyZXR1cm4gYi5TdGF0ZS5pc01vYmlsZXx8ci5oaWRkZW49PT1hfHxyLmFkZEV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsZnVuY3Rpb24oKXtyLmhpZGRlbj8odz1mdW5jdGlvbihlKXtyZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpe2UoITApfSwxNil9LGMoKSk6dz10LnJlcXVlc3RBbmltYXRpb25GcmFtZXx8Z30pLGUuVmVsb2NpdHk9YixlIT09dCYmKGUuZm4udmVsb2NpdHk9UCxlLmZuLnZlbG9jaXR5LmRlZmF1bHRzPWIuZGVmYXVsdHMpLGYuZWFjaChbXCJEb3duXCIsXCJVcFwiXSxmdW5jdGlvbihlLHQpe2IuUmVkaXJlY3RzW1wic2xpZGVcIit0XT1mdW5jdGlvbihlLHIsbixvLGkscyl7dmFyIGw9Zi5leHRlbmQoe30sciksdT1sLmJlZ2luLGM9bC5jb21wbGV0ZSxwPXtoZWlnaHQ6XCJcIixtYXJnaW5Ub3A6XCJcIixtYXJnaW5Cb3R0b206XCJcIixwYWRkaW5nVG9wOlwiXCIscGFkZGluZ0JvdHRvbTpcIlwifSxkPXt9O2wuZGlzcGxheT09PWEmJihsLmRpc3BsYXk9XCJEb3duXCI9PT10P1wiaW5saW5lXCI9PT1iLkNTUy5WYWx1ZXMuZ2V0RGlzcGxheVR5cGUoZSk/XCJpbmxpbmUtYmxvY2tcIjpcImJsb2NrXCI6XCJub25lXCIpLGwuYmVnaW49ZnVuY3Rpb24oKXt1JiZ1LmNhbGwoaSxpKTtmb3IodmFyIHIgaW4gcCl7ZFtyXT1lLnN0eWxlW3JdO3ZhciBhPWIuQ1NTLmdldFByb3BlcnR5VmFsdWUoZSxyKTtwW3JdPVwiRG93blwiPT09dD9bYSwwXTpbMCxhXX1kLm92ZXJmbG93PWUuc3R5bGUub3ZlcmZsb3csZS5zdHlsZS5vdmVyZmxvdz1cImhpZGRlblwifSxsLmNvbXBsZXRlPWZ1bmN0aW9uKCl7Zm9yKHZhciB0IGluIGQpZS5zdHlsZVt0XT1kW3RdO2MmJmMuY2FsbChpLGkpLHMmJnMucmVzb2x2ZXIoaSl9LGIoZSxwLGwpfX0pLGYuZWFjaChbXCJJblwiLFwiT3V0XCJdLGZ1bmN0aW9uKGUsdCl7Yi5SZWRpcmVjdHNbXCJmYWRlXCIrdF09ZnVuY3Rpb24oZSxyLG4sbyxpLHMpe3ZhciBsPWYuZXh0ZW5kKHt9LHIpLHU9e29wYWNpdHk6XCJJblwiPT09dD8xOjB9LGM9bC5jb21wbGV0ZTtsLmNvbXBsZXRlPW4hPT1vLTE/bC5iZWdpbj1udWxsOmZ1bmN0aW9uKCl7YyYmYy5jYWxsKGksaSkscyYmcy5yZXNvbHZlcihpKX0sbC5kaXNwbGF5PT09YSYmKGwuZGlzcGxheT1cIkluXCI9PT10P1wiYXV0b1wiOlwibm9uZVwiKSxiKHRoaXMsdSxsKX19KSxifSh3aW5kb3cualF1ZXJ5fHx3aW5kb3cuWmVwdG98fHdpbmRvdyx3aW5kb3csZG9jdW1lbnQpfSkpO1xyXG47IWZ1bmN0aW9uKGEsYixjLGQpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGsoYSxiLGMpe3JldHVybiBzZXRUaW1lb3V0KHEoYSxjKSxiKX1mdW5jdGlvbiBsKGEsYixjKXtyZXR1cm4gQXJyYXkuaXNBcnJheShhKT8obShhLGNbYl0sYyksITApOiExfWZ1bmN0aW9uIG0oYSxiLGMpe3ZhciBlO2lmKGEpaWYoYS5mb3JFYWNoKWEuZm9yRWFjaChiLGMpO2Vsc2UgaWYoYS5sZW5ndGghPT1kKWZvcihlPTA7ZTxhLmxlbmd0aDspYi5jYWxsKGMsYVtlXSxlLGEpLGUrKztlbHNlIGZvcihlIGluIGEpYS5oYXNPd25Qcm9wZXJ0eShlKSYmYi5jYWxsKGMsYVtlXSxlLGEpfWZ1bmN0aW9uIG4oYSxiLGMpe2Zvcih2YXIgZT1PYmplY3Qua2V5cyhiKSxmPTA7ZjxlLmxlbmd0aDspKCFjfHxjJiZhW2VbZl1dPT09ZCkmJihhW2VbZl1dPWJbZVtmXV0pLGYrKztyZXR1cm4gYX1mdW5jdGlvbiBvKGEsYil7cmV0dXJuIG4oYSxiLCEwKX1mdW5jdGlvbiBwKGEsYixjKXt2YXIgZSxkPWIucHJvdG90eXBlO2U9YS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShkKSxlLmNvbnN0cnVjdG9yPWEsZS5fc3VwZXI9ZCxjJiZuKGUsYyl9ZnVuY3Rpb24gcShhLGIpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBhLmFwcGx5KGIsYXJndW1lbnRzKX19ZnVuY3Rpb24gcihhLGIpe3JldHVybiB0eXBlb2YgYT09Zz9hLmFwcGx5KGI/YlswXXx8ZDpkLGIpOmF9ZnVuY3Rpb24gcyhhLGIpe3JldHVybiBhPT09ZD9iOmF9ZnVuY3Rpb24gdChhLGIsYyl7bSh4KGIpLGZ1bmN0aW9uKGIpe2EuYWRkRXZlbnRMaXN0ZW5lcihiLGMsITEpfSl9ZnVuY3Rpb24gdShhLGIsYyl7bSh4KGIpLGZ1bmN0aW9uKGIpe2EucmVtb3ZlRXZlbnRMaXN0ZW5lcihiLGMsITEpfSl9ZnVuY3Rpb24gdihhLGIpe2Zvcig7YTspe2lmKGE9PWIpcmV0dXJuITA7YT1hLnBhcmVudE5vZGV9cmV0dXJuITF9ZnVuY3Rpb24gdyhhLGIpe3JldHVybiBhLmluZGV4T2YoYik+LTF9ZnVuY3Rpb24geChhKXtyZXR1cm4gYS50cmltKCkuc3BsaXQoL1xccysvZyl9ZnVuY3Rpb24geShhLGIsYyl7aWYoYS5pbmRleE9mJiYhYylyZXR1cm4gYS5pbmRleE9mKGIpO2Zvcih2YXIgZD0wO2Q8YS5sZW5ndGg7KXtpZihjJiZhW2RdW2NdPT1ifHwhYyYmYVtkXT09PWIpcmV0dXJuIGQ7ZCsrfXJldHVybi0xfWZ1bmN0aW9uIHooYSl7cmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGEsMCl9ZnVuY3Rpb24gQShhLGIsYyl7Zm9yKHZhciBkPVtdLGU9W10sZj0wO2Y8YS5sZW5ndGg7KXt2YXIgZz1iP2FbZl1bYl06YVtmXTt5KGUsZyk8MCYmZC5wdXNoKGFbZl0pLGVbZl09ZyxmKyt9cmV0dXJuIGMmJihkPWI/ZC5zb3J0KGZ1bmN0aW9uKGEsYyl7cmV0dXJuIGFbYl0+Y1tiXX0pOmQuc29ydCgpKSxkfWZ1bmN0aW9uIEIoYSxiKXtmb3IodmFyIGMsZixnPWJbMF0udG9VcHBlckNhc2UoKStiLnNsaWNlKDEpLGg9MDtoPGUubGVuZ3RoOyl7aWYoYz1lW2hdLGY9Yz9jK2c6YixmIGluIGEpcmV0dXJuIGY7aCsrfXJldHVybiBkfWZ1bmN0aW9uIEQoKXtyZXR1cm4gQysrfWZ1bmN0aW9uIEUoYSl7dmFyIGI9YS5vd25lckRvY3VtZW50O3JldHVybiBiLmRlZmF1bHRWaWV3fHxiLnBhcmVudFdpbmRvd31mdW5jdGlvbiBhYihhLGIpe3ZhciBjPXRoaXM7dGhpcy5tYW5hZ2VyPWEsdGhpcy5jYWxsYmFjaz1iLHRoaXMuZWxlbWVudD1hLmVsZW1lbnQsdGhpcy50YXJnZXQ9YS5vcHRpb25zLmlucHV0VGFyZ2V0LHRoaXMuZG9tSGFuZGxlcj1mdW5jdGlvbihiKXtyKGEub3B0aW9ucy5lbmFibGUsW2FdKSYmYy5oYW5kbGVyKGIpfSx0aGlzLmluaXQoKX1mdW5jdGlvbiBiYihhKXt2YXIgYixjPWEub3B0aW9ucy5pbnB1dENsYXNzO3JldHVybiBiPWM/YzpIP3diOkk/RWI6Rz9HYjpyYixuZXcgYihhLGNiKX1mdW5jdGlvbiBjYihhLGIsYyl7dmFyIGQ9Yy5wb2ludGVycy5sZW5ndGgsZT1jLmNoYW5nZWRQb2ludGVycy5sZW5ndGgsZj1iJk8mJjA9PT1kLWUsZz1iJihRfFIpJiYwPT09ZC1lO2MuaXNGaXJzdD0hIWYsYy5pc0ZpbmFsPSEhZyxmJiYoYS5zZXNzaW9uPXt9KSxjLmV2ZW50VHlwZT1iLGRiKGEsYyksYS5lbWl0KFwiaGFtbWVyLmlucHV0XCIsYyksYS5yZWNvZ25pemUoYyksYS5zZXNzaW9uLnByZXZJbnB1dD1jfWZ1bmN0aW9uIGRiKGEsYil7dmFyIGM9YS5zZXNzaW9uLGQ9Yi5wb2ludGVycyxlPWQubGVuZ3RoO2MuZmlyc3RJbnB1dHx8KGMuZmlyc3RJbnB1dD1nYihiKSksZT4xJiYhYy5maXJzdE11bHRpcGxlP2MuZmlyc3RNdWx0aXBsZT1nYihiKToxPT09ZSYmKGMuZmlyc3RNdWx0aXBsZT0hMSk7dmFyIGY9Yy5maXJzdElucHV0LGc9Yy5maXJzdE11bHRpcGxlLGg9Zz9nLmNlbnRlcjpmLmNlbnRlcixpPWIuY2VudGVyPWhiKGQpO2IudGltZVN0YW1wPWooKSxiLmRlbHRhVGltZT1iLnRpbWVTdGFtcC1mLnRpbWVTdGFtcCxiLmFuZ2xlPWxiKGgsaSksYi5kaXN0YW5jZT1rYihoLGkpLGViKGMsYiksYi5vZmZzZXREaXJlY3Rpb249amIoYi5kZWx0YVgsYi5kZWx0YVkpLGIuc2NhbGU9Zz9uYihnLnBvaW50ZXJzLGQpOjEsYi5yb3RhdGlvbj1nP21iKGcucG9pbnRlcnMsZCk6MCxmYihjLGIpO3ZhciBrPWEuZWxlbWVudDt2KGIuc3JjRXZlbnQudGFyZ2V0LGspJiYoaz1iLnNyY0V2ZW50LnRhcmdldCksYi50YXJnZXQ9a31mdW5jdGlvbiBlYihhLGIpe3ZhciBjPWIuY2VudGVyLGQ9YS5vZmZzZXREZWx0YXx8e30sZT1hLnByZXZEZWx0YXx8e30sZj1hLnByZXZJbnB1dHx8e307KGIuZXZlbnRUeXBlPT09T3x8Zi5ldmVudFR5cGU9PT1RKSYmKGU9YS5wcmV2RGVsdGE9e3g6Zi5kZWx0YVh8fDAseTpmLmRlbHRhWXx8MH0sZD1hLm9mZnNldERlbHRhPXt4OmMueCx5OmMueX0pLGIuZGVsdGFYPWUueCsoYy54LWQueCksYi5kZWx0YVk9ZS55KyhjLnktZC55KX1mdW5jdGlvbiBmYihhLGIpe3ZhciBmLGcsaCxqLGM9YS5sYXN0SW50ZXJ2YWx8fGIsZT1iLnRpbWVTdGFtcC1jLnRpbWVTdGFtcDtpZihiLmV2ZW50VHlwZSE9UiYmKGU+Tnx8Yy52ZWxvY2l0eT09PWQpKXt2YXIgaz1jLmRlbHRhWC1iLmRlbHRhWCxsPWMuZGVsdGFZLWIuZGVsdGFZLG09aWIoZSxrLGwpO2c9bS54LGg9bS55LGY9aShtLngpPmkobS55KT9tLng6bS55LGo9amIoayxsKSxhLmxhc3RJbnRlcnZhbD1ifWVsc2UgZj1jLnZlbG9jaXR5LGc9Yy52ZWxvY2l0eVgsaD1jLnZlbG9jaXR5WSxqPWMuZGlyZWN0aW9uO2IudmVsb2NpdHk9ZixiLnZlbG9jaXR5WD1nLGIudmVsb2NpdHlZPWgsYi5kaXJlY3Rpb249an1mdW5jdGlvbiBnYihhKXtmb3IodmFyIGI9W10sYz0wO2M8YS5wb2ludGVycy5sZW5ndGg7KWJbY109e2NsaWVudFg6aChhLnBvaW50ZXJzW2NdLmNsaWVudFgpLGNsaWVudFk6aChhLnBvaW50ZXJzW2NdLmNsaWVudFkpfSxjKys7cmV0dXJue3RpbWVTdGFtcDpqKCkscG9pbnRlcnM6YixjZW50ZXI6aGIoYiksZGVsdGFYOmEuZGVsdGFYLGRlbHRhWTphLmRlbHRhWX19ZnVuY3Rpb24gaGIoYSl7dmFyIGI9YS5sZW5ndGg7aWYoMT09PWIpcmV0dXJue3g6aChhWzBdLmNsaWVudFgpLHk6aChhWzBdLmNsaWVudFkpfTtmb3IodmFyIGM9MCxkPTAsZT0wO2I+ZTspYys9YVtlXS5jbGllbnRYLGQrPWFbZV0uY2xpZW50WSxlKys7cmV0dXJue3g6aChjL2IpLHk6aChkL2IpfX1mdW5jdGlvbiBpYihhLGIsYyl7cmV0dXJue3g6Yi9hfHwwLHk6Yy9hfHwwfX1mdW5jdGlvbiBqYihhLGIpe3JldHVybiBhPT09Yj9TOmkoYSk+PWkoYik/YT4wP1Q6VTpiPjA/VjpXfWZ1bmN0aW9uIGtiKGEsYixjKXtjfHwoYz0kKTt2YXIgZD1iW2NbMF1dLWFbY1swXV0sZT1iW2NbMV1dLWFbY1sxXV07cmV0dXJuIE1hdGguc3FydChkKmQrZSplKX1mdW5jdGlvbiBsYihhLGIsYyl7Y3x8KGM9JCk7dmFyIGQ9YltjWzBdXS1hW2NbMF1dLGU9YltjWzFdXS1hW2NbMV1dO3JldHVybiAxODAqTWF0aC5hdGFuMihlLGQpL01hdGguUEl9ZnVuY3Rpb24gbWIoYSxiKXtyZXR1cm4gbGIoYlsxXSxiWzBdLF8pLWxiKGFbMV0sYVswXSxfKX1mdW5jdGlvbiBuYihhLGIpe3JldHVybiBrYihiWzBdLGJbMV0sXykva2IoYVswXSxhWzFdLF8pfWZ1bmN0aW9uIHJiKCl7dGhpcy5ldkVsPXBiLHRoaXMuZXZXaW49cWIsdGhpcy5hbGxvdz0hMCx0aGlzLnByZXNzZWQ9ITEsYWIuYXBwbHkodGhpcyxhcmd1bWVudHMpfWZ1bmN0aW9uIHdiKCl7dGhpcy5ldkVsPXViLHRoaXMuZXZXaW49dmIsYWIuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuc3RvcmU9dGhpcy5tYW5hZ2VyLnNlc3Npb24ucG9pbnRlckV2ZW50cz1bXX1mdW5jdGlvbiBBYigpe3RoaXMuZXZUYXJnZXQ9eWIsdGhpcy5ldldpbj16Yix0aGlzLnN0YXJ0ZWQ9ITEsYWIuYXBwbHkodGhpcyxhcmd1bWVudHMpfWZ1bmN0aW9uIEJiKGEsYil7dmFyIGM9eihhLnRvdWNoZXMpLGQ9eihhLmNoYW5nZWRUb3VjaGVzKTtyZXR1cm4gYiYoUXxSKSYmKGM9QShjLmNvbmNhdChkKSxcImlkZW50aWZpZXJcIiwhMCkpLFtjLGRdfWZ1bmN0aW9uIEViKCl7dGhpcy5ldlRhcmdldD1EYix0aGlzLnRhcmdldElkcz17fSxhYi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9ZnVuY3Rpb24gRmIoYSxiKXt2YXIgYz16KGEudG91Y2hlcyksZD10aGlzLnRhcmdldElkcztpZihiJihPfFApJiYxPT09Yy5sZW5ndGgpcmV0dXJuIGRbY1swXS5pZGVudGlmaWVyXT0hMCxbYyxjXTt2YXIgZSxmLGc9eihhLmNoYW5nZWRUb3VjaGVzKSxoPVtdLGk9dGhpcy50YXJnZXQ7aWYoZj1jLmZpbHRlcihmdW5jdGlvbihhKXtyZXR1cm4gdihhLnRhcmdldCxpKX0pLGI9PT1PKWZvcihlPTA7ZTxmLmxlbmd0aDspZFtmW2VdLmlkZW50aWZpZXJdPSEwLGUrKztmb3IoZT0wO2U8Zy5sZW5ndGg7KWRbZ1tlXS5pZGVudGlmaWVyXSYmaC5wdXNoKGdbZV0pLGImKFF8UikmJmRlbGV0ZSBkW2dbZV0uaWRlbnRpZmllcl0sZSsrO3JldHVybiBoLmxlbmd0aD9bQShmLmNvbmNhdChoKSxcImlkZW50aWZpZXJcIiwhMCksaF06dm9pZCAwfWZ1bmN0aW9uIEdiKCl7YWIuYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciBhPXEodGhpcy5oYW5kbGVyLHRoaXMpO3RoaXMudG91Y2g9bmV3IEViKHRoaXMubWFuYWdlcixhKSx0aGlzLm1vdXNlPW5ldyByYih0aGlzLm1hbmFnZXIsYSl9ZnVuY3Rpb24gUGIoYSxiKXt0aGlzLm1hbmFnZXI9YSx0aGlzLnNldChiKX1mdW5jdGlvbiBRYihhKXtpZih3KGEsTWIpKXJldHVybiBNYjt2YXIgYj13KGEsTmIpLGM9dyhhLE9iKTtyZXR1cm4gYiYmYz9OYitcIiBcIitPYjpifHxjP2I/TmI6T2I6dyhhLExiKT9MYjpLYn1mdW5jdGlvbiBZYihhKXt0aGlzLmlkPUQoKSx0aGlzLm1hbmFnZXI9bnVsbCx0aGlzLm9wdGlvbnM9byhhfHx7fSx0aGlzLmRlZmF1bHRzKSx0aGlzLm9wdGlvbnMuZW5hYmxlPXModGhpcy5vcHRpb25zLmVuYWJsZSwhMCksdGhpcy5zdGF0ZT1SYix0aGlzLnNpbXVsdGFuZW91cz17fSx0aGlzLnJlcXVpcmVGYWlsPVtdfWZ1bmN0aW9uIFpiKGEpe3JldHVybiBhJldiP1wiY2FuY2VsXCI6YSZVYj9cImVuZFwiOmEmVGI/XCJtb3ZlXCI6YSZTYj9cInN0YXJ0XCI6XCJcIn1mdW5jdGlvbiAkYihhKXtyZXR1cm4gYT09Vz9cImRvd25cIjphPT1WP1widXBcIjphPT1UP1wibGVmdFwiOmE9PVU/XCJyaWdodFwiOlwiXCJ9ZnVuY3Rpb24gX2IoYSxiKXt2YXIgYz1iLm1hbmFnZXI7cmV0dXJuIGM/Yy5nZXQoYSk6YX1mdW5jdGlvbiBhYygpe1liLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1mdW5jdGlvbiBiYygpe2FjLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLnBYPW51bGwsdGhpcy5wWT1udWxsfWZ1bmN0aW9uIGNjKCl7YWMuYXBwbHkodGhpcyxhcmd1bWVudHMpfWZ1bmN0aW9uIGRjKCl7WWIuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuX3RpbWVyPW51bGwsdGhpcy5faW5wdXQ9bnVsbH1mdW5jdGlvbiBlYygpe2FjLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1mdW5jdGlvbiBmYygpe2FjLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1mdW5jdGlvbiBnYygpe1liLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLnBUaW1lPSExLHRoaXMucENlbnRlcj0hMSx0aGlzLl90aW1lcj1udWxsLHRoaXMuX2lucHV0PW51bGwsdGhpcy5jb3VudD0wfWZ1bmN0aW9uIGhjKGEsYil7cmV0dXJuIGI9Ynx8e30sYi5yZWNvZ25pemVycz1zKGIucmVjb2duaXplcnMsaGMuZGVmYXVsdHMucHJlc2V0KSxuZXcga2MoYSxiKX1mdW5jdGlvbiBrYyhhLGIpe2I9Ynx8e30sdGhpcy5vcHRpb25zPW8oYixoYy5kZWZhdWx0cyksdGhpcy5vcHRpb25zLmlucHV0VGFyZ2V0PXRoaXMub3B0aW9ucy5pbnB1dFRhcmdldHx8YSx0aGlzLmhhbmRsZXJzPXt9LHRoaXMuc2Vzc2lvbj17fSx0aGlzLnJlY29nbml6ZXJzPVtdLHRoaXMuZWxlbWVudD1hLHRoaXMuaW5wdXQ9YmIodGhpcyksdGhpcy50b3VjaEFjdGlvbj1uZXcgUGIodGhpcyx0aGlzLm9wdGlvbnMudG91Y2hBY3Rpb24pLGxjKHRoaXMsITApLG0oYi5yZWNvZ25pemVycyxmdW5jdGlvbihhKXt2YXIgYj10aGlzLmFkZChuZXcgYVswXShhWzFdKSk7YVsyXSYmYi5yZWNvZ25pemVXaXRoKGFbMl0pLGFbM10mJmIucmVxdWlyZUZhaWx1cmUoYVszXSl9LHRoaXMpfWZ1bmN0aW9uIGxjKGEsYil7dmFyIGM9YS5lbGVtZW50O20oYS5vcHRpb25zLmNzc1Byb3BzLGZ1bmN0aW9uKGEsZCl7Yy5zdHlsZVtCKGMuc3R5bGUsZCldPWI/YTpcIlwifSl9ZnVuY3Rpb24gbWMoYSxjKXt2YXIgZD1iLmNyZWF0ZUV2ZW50KFwiRXZlbnRcIik7ZC5pbml0RXZlbnQoYSwhMCwhMCksZC5nZXN0dXJlPWMsYy50YXJnZXQuZGlzcGF0Y2hFdmVudChkKX12YXIgZT1bXCJcIixcIndlYmtpdFwiLFwibW96XCIsXCJNU1wiLFwibXNcIixcIm9cIl0sZj1iLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksZz1cImZ1bmN0aW9uXCIsaD1NYXRoLnJvdW5kLGk9TWF0aC5hYnMsaj1EYXRlLm5vdyxDPTEsRj0vbW9iaWxlfHRhYmxldHxpcChhZHxob25lfG9kKXxhbmRyb2lkL2ksRz1cIm9udG91Y2hzdGFydFwiaW4gYSxIPUIoYSxcIlBvaW50ZXJFdmVudFwiKSE9PWQsST1HJiZGLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksSj1cInRvdWNoXCIsSz1cInBlblwiLEw9XCJtb3VzZVwiLE09XCJraW5lY3RcIixOPTI1LE89MSxQPTIsUT00LFI9OCxTPTEsVD0yLFU9NCxWPTgsVz0xNixYPVR8VSxZPVZ8VyxaPVh8WSwkPVtcInhcIixcInlcIl0sXz1bXCJjbGllbnRYXCIsXCJjbGllbnRZXCJdO2FiLnByb3RvdHlwZT17aGFuZGxlcjpmdW5jdGlvbigpe30saW5pdDpmdW5jdGlvbigpe3RoaXMuZXZFbCYmdCh0aGlzLmVsZW1lbnQsdGhpcy5ldkVsLHRoaXMuZG9tSGFuZGxlciksdGhpcy5ldlRhcmdldCYmdCh0aGlzLnRhcmdldCx0aGlzLmV2VGFyZ2V0LHRoaXMuZG9tSGFuZGxlciksdGhpcy5ldldpbiYmdChFKHRoaXMuZWxlbWVudCksdGhpcy5ldldpbix0aGlzLmRvbUhhbmRsZXIpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5ldkVsJiZ1KHRoaXMuZWxlbWVudCx0aGlzLmV2RWwsdGhpcy5kb21IYW5kbGVyKSx0aGlzLmV2VGFyZ2V0JiZ1KHRoaXMudGFyZ2V0LHRoaXMuZXZUYXJnZXQsdGhpcy5kb21IYW5kbGVyKSx0aGlzLmV2V2luJiZ1KEUodGhpcy5lbGVtZW50KSx0aGlzLmV2V2luLHRoaXMuZG9tSGFuZGxlcil9fTt2YXIgb2I9e21vdXNlZG93bjpPLG1vdXNlbW92ZTpQLG1vdXNldXA6UX0scGI9XCJtb3VzZWRvd25cIixxYj1cIm1vdXNlbW92ZSBtb3VzZXVwXCI7cChyYixhYix7aGFuZGxlcjpmdW5jdGlvbihhKXt2YXIgYj1vYlthLnR5cGVdO2ImTyYmMD09PWEuYnV0dG9uJiYodGhpcy5wcmVzc2VkPSEwKSxiJlAmJjEhPT1hLndoaWNoJiYoYj1RKSx0aGlzLnByZXNzZWQmJnRoaXMuYWxsb3cmJihiJlEmJih0aGlzLnByZXNzZWQ9ITEpLHRoaXMuY2FsbGJhY2sodGhpcy5tYW5hZ2VyLGIse3BvaW50ZXJzOlthXSxjaGFuZ2VkUG9pbnRlcnM6W2FdLHBvaW50ZXJUeXBlOkwsc3JjRXZlbnQ6YX0pKX19KTt2YXIgc2I9e3BvaW50ZXJkb3duOk8scG9pbnRlcm1vdmU6UCxwb2ludGVydXA6USxwb2ludGVyY2FuY2VsOlIscG9pbnRlcm91dDpSfSx0Yj17MjpKLDM6Syw0OkwsNTpNfSx1Yj1cInBvaW50ZXJkb3duXCIsdmI9XCJwb2ludGVybW92ZSBwb2ludGVydXAgcG9pbnRlcmNhbmNlbFwiO2EuTVNQb2ludGVyRXZlbnQmJih1Yj1cIk1TUG9pbnRlckRvd25cIix2Yj1cIk1TUG9pbnRlck1vdmUgTVNQb2ludGVyVXAgTVNQb2ludGVyQ2FuY2VsXCIpLHAod2IsYWIse2hhbmRsZXI6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5zdG9yZSxjPSExLGQ9YS50eXBlLnRvTG93ZXJDYXNlKCkucmVwbGFjZShcIm1zXCIsXCJcIiksZT1zYltkXSxmPXRiW2EucG9pbnRlclR5cGVdfHxhLnBvaW50ZXJUeXBlLGc9Zj09SixoPXkoYixhLnBvaW50ZXJJZCxcInBvaW50ZXJJZFwiKTtlJk8mJigwPT09YS5idXR0b258fGcpPzA+aCYmKGIucHVzaChhKSxoPWIubGVuZ3RoLTEpOmUmKFF8UikmJihjPSEwKSwwPmh8fChiW2hdPWEsdGhpcy5jYWxsYmFjayh0aGlzLm1hbmFnZXIsZSx7cG9pbnRlcnM6YixjaGFuZ2VkUG9pbnRlcnM6W2FdLHBvaW50ZXJUeXBlOmYsc3JjRXZlbnQ6YX0pLGMmJmIuc3BsaWNlKGgsMSkpfX0pO3ZhciB4Yj17dG91Y2hzdGFydDpPLHRvdWNobW92ZTpQLHRvdWNoZW5kOlEsdG91Y2hjYW5jZWw6Un0seWI9XCJ0b3VjaHN0YXJ0XCIsemI9XCJ0b3VjaHN0YXJ0IHRvdWNobW92ZSB0b3VjaGVuZCB0b3VjaGNhbmNlbFwiO3AoQWIsYWIse2hhbmRsZXI6ZnVuY3Rpb24oYSl7dmFyIGI9eGJbYS50eXBlXTtpZihiPT09TyYmKHRoaXMuc3RhcnRlZD0hMCksdGhpcy5zdGFydGVkKXt2YXIgYz1CYi5jYWxsKHRoaXMsYSxiKTtiJihRfFIpJiYwPT09Y1swXS5sZW5ndGgtY1sxXS5sZW5ndGgmJih0aGlzLnN0YXJ0ZWQ9ITEpLHRoaXMuY2FsbGJhY2sodGhpcy5tYW5hZ2VyLGIse3BvaW50ZXJzOmNbMF0sY2hhbmdlZFBvaW50ZXJzOmNbMV0scG9pbnRlclR5cGU6SixzcmNFdmVudDphfSl9fX0pO3ZhciBDYj17dG91Y2hzdGFydDpPLHRvdWNobW92ZTpQLHRvdWNoZW5kOlEsdG91Y2hjYW5jZWw6Un0sRGI9XCJ0b3VjaHN0YXJ0IHRvdWNobW92ZSB0b3VjaGVuZCB0b3VjaGNhbmNlbFwiO3AoRWIsYWIse2hhbmRsZXI6ZnVuY3Rpb24oYSl7dmFyIGI9Q2JbYS50eXBlXSxjPUZiLmNhbGwodGhpcyxhLGIpO2MmJnRoaXMuY2FsbGJhY2sodGhpcy5tYW5hZ2VyLGIse3BvaW50ZXJzOmNbMF0sY2hhbmdlZFBvaW50ZXJzOmNbMV0scG9pbnRlclR5cGU6SixzcmNFdmVudDphfSl9fSkscChHYixhYix7aGFuZGxlcjpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9Yy5wb2ludGVyVHlwZT09SixlPWMucG9pbnRlclR5cGU9PUw7aWYoZCl0aGlzLm1vdXNlLmFsbG93PSExO2Vsc2UgaWYoZSYmIXRoaXMubW91c2UuYWxsb3cpcmV0dXJuO2ImKFF8UikmJih0aGlzLm1vdXNlLmFsbG93PSEwKSx0aGlzLmNhbGxiYWNrKGEsYixjKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMudG91Y2guZGVzdHJveSgpLHRoaXMubW91c2UuZGVzdHJveSgpfX0pO3ZhciBIYj1CKGYuc3R5bGUsXCJ0b3VjaEFjdGlvblwiKSxJYj1IYiE9PWQsSmI9XCJjb21wdXRlXCIsS2I9XCJhdXRvXCIsTGI9XCJtYW5pcHVsYXRpb25cIixNYj1cIm5vbmVcIixOYj1cInBhbi14XCIsT2I9XCJwYW4teVwiO1BiLnByb3RvdHlwZT17c2V0OmZ1bmN0aW9uKGEpe2E9PUpiJiYoYT10aGlzLmNvbXB1dGUoKSksSWImJih0aGlzLm1hbmFnZXIuZWxlbWVudC5zdHlsZVtIYl09YSksdGhpcy5hY3Rpb25zPWEudG9Mb3dlckNhc2UoKS50cmltKCl9LHVwZGF0ZTpmdW5jdGlvbigpe3RoaXMuc2V0KHRoaXMubWFuYWdlci5vcHRpb25zLnRvdWNoQWN0aW9uKX0sY29tcHV0ZTpmdW5jdGlvbigpe3ZhciBhPVtdO3JldHVybiBtKHRoaXMubWFuYWdlci5yZWNvZ25pemVycyxmdW5jdGlvbihiKXtyKGIub3B0aW9ucy5lbmFibGUsW2JdKSYmKGE9YS5jb25jYXQoYi5nZXRUb3VjaEFjdGlvbigpKSl9KSxRYihhLmpvaW4oXCIgXCIpKX0scHJldmVudERlZmF1bHRzOmZ1bmN0aW9uKGEpe2lmKCFJYil7dmFyIGI9YS5zcmNFdmVudCxjPWEub2Zmc2V0RGlyZWN0aW9uO2lmKHRoaXMubWFuYWdlci5zZXNzaW9uLnByZXZlbnRlZClyZXR1cm4gYi5wcmV2ZW50RGVmYXVsdCgpLHZvaWQgMDt2YXIgZD10aGlzLmFjdGlvbnMsZT13KGQsTWIpLGY9dyhkLE9iKSxnPXcoZCxOYik7cmV0dXJuIGV8fGYmJmMmWHx8ZyYmYyZZP3RoaXMucHJldmVudFNyYyhiKTp2b2lkIDB9fSxwcmV2ZW50U3JjOmZ1bmN0aW9uKGEpe3RoaXMubWFuYWdlci5zZXNzaW9uLnByZXZlbnRlZD0hMCxhLnByZXZlbnREZWZhdWx0KCl9fTt2YXIgUmI9MSxTYj0yLFRiPTQsVWI9OCxWYj1VYixXYj0xNixYYj0zMjtZYi5wcm90b3R5cGU9e2RlZmF1bHRzOnt9LHNldDpmdW5jdGlvbihhKXtyZXR1cm4gbih0aGlzLm9wdGlvbnMsYSksdGhpcy5tYW5hZ2VyJiZ0aGlzLm1hbmFnZXIudG91Y2hBY3Rpb24udXBkYXRlKCksdGhpc30scmVjb2duaXplV2l0aDpmdW5jdGlvbihhKXtpZihsKGEsXCJyZWNvZ25pemVXaXRoXCIsdGhpcykpcmV0dXJuIHRoaXM7dmFyIGI9dGhpcy5zaW11bHRhbmVvdXM7cmV0dXJuIGE9X2IoYSx0aGlzKSxiW2EuaWRdfHwoYlthLmlkXT1hLGEucmVjb2duaXplV2l0aCh0aGlzKSksdGhpc30sZHJvcFJlY29nbml6ZVdpdGg6ZnVuY3Rpb24oYSl7cmV0dXJuIGwoYSxcImRyb3BSZWNvZ25pemVXaXRoXCIsdGhpcyk/dGhpczooYT1fYihhLHRoaXMpLGRlbGV0ZSB0aGlzLnNpbXVsdGFuZW91c1thLmlkXSx0aGlzKX0scmVxdWlyZUZhaWx1cmU6ZnVuY3Rpb24oYSl7aWYobChhLFwicmVxdWlyZUZhaWx1cmVcIix0aGlzKSlyZXR1cm4gdGhpczt2YXIgYj10aGlzLnJlcXVpcmVGYWlsO3JldHVybiBhPV9iKGEsdGhpcyksLTE9PT15KGIsYSkmJihiLnB1c2goYSksYS5yZXF1aXJlRmFpbHVyZSh0aGlzKSksdGhpc30sZHJvcFJlcXVpcmVGYWlsdXJlOmZ1bmN0aW9uKGEpe2lmKGwoYSxcImRyb3BSZXF1aXJlRmFpbHVyZVwiLHRoaXMpKXJldHVybiB0aGlzO2E9X2IoYSx0aGlzKTt2YXIgYj15KHRoaXMucmVxdWlyZUZhaWwsYSk7cmV0dXJuIGI+LTEmJnRoaXMucmVxdWlyZUZhaWwuc3BsaWNlKGIsMSksdGhpc30saGFzUmVxdWlyZUZhaWx1cmVzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVxdWlyZUZhaWwubGVuZ3RoPjB9LGNhblJlY29nbml6ZVdpdGg6ZnVuY3Rpb24oYSl7cmV0dXJuISF0aGlzLnNpbXVsdGFuZW91c1thLmlkXX0sZW1pdDpmdW5jdGlvbihhKXtmdW5jdGlvbiBkKGQpe2IubWFuYWdlci5lbWl0KGIub3B0aW9ucy5ldmVudCsoZD9aYihjKTpcIlwiKSxhKX12YXIgYj10aGlzLGM9dGhpcy5zdGF0ZTtVYj5jJiZkKCEwKSxkKCksYz49VWImJmQoITApfSx0cnlFbWl0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNhbkVtaXQoKT90aGlzLmVtaXQoYSk6KHRoaXMuc3RhdGU9WGIsdm9pZCAwKX0sY2FuRW1pdDpmdW5jdGlvbigpe2Zvcih2YXIgYT0wO2E8dGhpcy5yZXF1aXJlRmFpbC5sZW5ndGg7KXtpZighKHRoaXMucmVxdWlyZUZhaWxbYV0uc3RhdGUmKFhifFJiKSkpcmV0dXJuITE7YSsrfXJldHVybiEwfSxyZWNvZ25pemU6ZnVuY3Rpb24oYSl7dmFyIGI9bih7fSxhKTtyZXR1cm4gcih0aGlzLm9wdGlvbnMuZW5hYmxlLFt0aGlzLGJdKT8odGhpcy5zdGF0ZSYoVmJ8V2J8WGIpJiYodGhpcy5zdGF0ZT1SYiksdGhpcy5zdGF0ZT10aGlzLnByb2Nlc3MoYiksdGhpcy5zdGF0ZSYoU2J8VGJ8VWJ8V2IpJiZ0aGlzLnRyeUVtaXQoYiksdm9pZCAwKToodGhpcy5yZXNldCgpLHRoaXMuc3RhdGU9WGIsdm9pZCAwKX0scHJvY2VzczpmdW5jdGlvbigpe30sZ2V0VG91Y2hBY3Rpb246ZnVuY3Rpb24oKXt9LHJlc2V0OmZ1bmN0aW9uKCl7fX0scChhYyxZYix7ZGVmYXVsdHM6e3BvaW50ZXJzOjF9LGF0dHJUZXN0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMub3B0aW9ucy5wb2ludGVycztyZXR1cm4gMD09PWJ8fGEucG9pbnRlcnMubGVuZ3RoPT09Yn0scHJvY2VzczpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnN0YXRlLGM9YS5ldmVudFR5cGUsZD1iJihTYnxUYiksZT10aGlzLmF0dHJUZXN0KGEpO3JldHVybiBkJiYoYyZSfHwhZSk/YnxXYjpkfHxlP2MmUT9ifFViOmImU2I/YnxUYjpTYjpYYn19KSxwKGJjLGFjLHtkZWZhdWx0czp7ZXZlbnQ6XCJwYW5cIix0aHJlc2hvbGQ6MTAscG9pbnRlcnM6MSxkaXJlY3Rpb246Wn0sZ2V0VG91Y2hBY3Rpb246ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9wdGlvbnMuZGlyZWN0aW9uLGI9W107cmV0dXJuIGEmWCYmYi5wdXNoKE9iKSxhJlkmJmIucHVzaChOYiksYn0sZGlyZWN0aW9uVGVzdDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLm9wdGlvbnMsYz0hMCxkPWEuZGlzdGFuY2UsZT1hLmRpcmVjdGlvbixmPWEuZGVsdGFYLGc9YS5kZWx0YVk7cmV0dXJuIGUmYi5kaXJlY3Rpb258fChiLmRpcmVjdGlvbiZYPyhlPTA9PT1mP1M6MD5mP1Q6VSxjPWYhPXRoaXMucFgsZD1NYXRoLmFicyhhLmRlbHRhWCkpOihlPTA9PT1nP1M6MD5nP1Y6VyxjPWchPXRoaXMucFksZD1NYXRoLmFicyhhLmRlbHRhWSkpKSxhLmRpcmVjdGlvbj1lLGMmJmQ+Yi50aHJlc2hvbGQmJmUmYi5kaXJlY3Rpb259LGF0dHJUZXN0OmZ1bmN0aW9uKGEpe3JldHVybiBhYy5wcm90b3R5cGUuYXR0clRlc3QuY2FsbCh0aGlzLGEpJiYodGhpcy5zdGF0ZSZTYnx8ISh0aGlzLnN0YXRlJlNiKSYmdGhpcy5kaXJlY3Rpb25UZXN0KGEpKX0sZW1pdDpmdW5jdGlvbihhKXt0aGlzLnBYPWEuZGVsdGFYLHRoaXMucFk9YS5kZWx0YVk7dmFyIGI9JGIoYS5kaXJlY3Rpb24pO2ImJnRoaXMubWFuYWdlci5lbWl0KHRoaXMub3B0aW9ucy5ldmVudCtiLGEpLHRoaXMuX3N1cGVyLmVtaXQuY2FsbCh0aGlzLGEpfX0pLHAoY2MsYWMse2RlZmF1bHRzOntldmVudDpcInBpbmNoXCIsdGhyZXNob2xkOjAscG9pbnRlcnM6Mn0sZ2V0VG91Y2hBY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm5bTWJdfSxhdHRyVGVzdDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5fc3VwZXIuYXR0clRlc3QuY2FsbCh0aGlzLGEpJiYoTWF0aC5hYnMoYS5zY2FsZS0xKT50aGlzLm9wdGlvbnMudGhyZXNob2xkfHx0aGlzLnN0YXRlJlNiKX0sZW1pdDpmdW5jdGlvbihhKXtpZih0aGlzLl9zdXBlci5lbWl0LmNhbGwodGhpcyxhKSwxIT09YS5zY2FsZSl7dmFyIGI9YS5zY2FsZTwxP1wiaW5cIjpcIm91dFwiO3RoaXMubWFuYWdlci5lbWl0KHRoaXMub3B0aW9ucy5ldmVudCtiLGEpfX19KSxwKGRjLFliLHtkZWZhdWx0czp7ZXZlbnQ6XCJwcmVzc1wiLHBvaW50ZXJzOjEsdGltZTo1MDAsdGhyZXNob2xkOjV9LGdldFRvdWNoQWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuW0tiXX0scHJvY2VzczpmdW5jdGlvbihhKXt2YXIgYj10aGlzLm9wdGlvbnMsYz1hLnBvaW50ZXJzLmxlbmd0aD09PWIucG9pbnRlcnMsZD1hLmRpc3RhbmNlPGIudGhyZXNob2xkLGU9YS5kZWx0YVRpbWU+Yi50aW1lO2lmKHRoaXMuX2lucHV0PWEsIWR8fCFjfHxhLmV2ZW50VHlwZSYoUXxSKSYmIWUpdGhpcy5yZXNldCgpO2Vsc2UgaWYoYS5ldmVudFR5cGUmTyl0aGlzLnJlc2V0KCksdGhpcy5fdGltZXI9ayhmdW5jdGlvbigpe3RoaXMuc3RhdGU9VmIsdGhpcy50cnlFbWl0KCl9LGIudGltZSx0aGlzKTtlbHNlIGlmKGEuZXZlbnRUeXBlJlEpcmV0dXJuIFZiO3JldHVybiBYYn0scmVzZXQ6ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQodGhpcy5fdGltZXIpfSxlbWl0OmZ1bmN0aW9uKGEpe3RoaXMuc3RhdGU9PT1WYiYmKGEmJmEuZXZlbnRUeXBlJlE/dGhpcy5tYW5hZ2VyLmVtaXQodGhpcy5vcHRpb25zLmV2ZW50K1widXBcIixhKToodGhpcy5faW5wdXQudGltZVN0YW1wPWooKSx0aGlzLm1hbmFnZXIuZW1pdCh0aGlzLm9wdGlvbnMuZXZlbnQsdGhpcy5faW5wdXQpKSl9fSkscChlYyxhYyx7ZGVmYXVsdHM6e2V2ZW50Olwicm90YXRlXCIsdGhyZXNob2xkOjAscG9pbnRlcnM6Mn0sZ2V0VG91Y2hBY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm5bTWJdfSxhdHRyVGVzdDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5fc3VwZXIuYXR0clRlc3QuY2FsbCh0aGlzLGEpJiYoTWF0aC5hYnMoYS5yb3RhdGlvbik+dGhpcy5vcHRpb25zLnRocmVzaG9sZHx8dGhpcy5zdGF0ZSZTYil9fSkscChmYyxhYyx7ZGVmYXVsdHM6e2V2ZW50Olwic3dpcGVcIix0aHJlc2hvbGQ6MTAsdmVsb2NpdHk6LjY1LGRpcmVjdGlvbjpYfFkscG9pbnRlcnM6MX0sZ2V0VG91Y2hBY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gYmMucHJvdG90eXBlLmdldFRvdWNoQWN0aW9uLmNhbGwodGhpcyl9LGF0dHJUZXN0OmZ1bmN0aW9uKGEpe3ZhciBjLGI9dGhpcy5vcHRpb25zLmRpcmVjdGlvbjtyZXR1cm4gYiYoWHxZKT9jPWEudmVsb2NpdHk6YiZYP2M9YS52ZWxvY2l0eVg6YiZZJiYoYz1hLnZlbG9jaXR5WSksdGhpcy5fc3VwZXIuYXR0clRlc3QuY2FsbCh0aGlzLGEpJiZiJmEuZGlyZWN0aW9uJiZhLmRpc3RhbmNlPnRoaXMub3B0aW9ucy50aHJlc2hvbGQmJmkoYyk+dGhpcy5vcHRpb25zLnZlbG9jaXR5JiZhLmV2ZW50VHlwZSZRfSxlbWl0OmZ1bmN0aW9uKGEpe3ZhciBiPSRiKGEuZGlyZWN0aW9uKTtiJiZ0aGlzLm1hbmFnZXIuZW1pdCh0aGlzLm9wdGlvbnMuZXZlbnQrYixhKSx0aGlzLm1hbmFnZXIuZW1pdCh0aGlzLm9wdGlvbnMuZXZlbnQsYSl9fSkscChnYyxZYix7ZGVmYXVsdHM6e2V2ZW50OlwidGFwXCIscG9pbnRlcnM6MSx0YXBzOjEsaW50ZXJ2YWw6MzAwLHRpbWU6MjUwLHRocmVzaG9sZDoyLHBvc1RocmVzaG9sZDoxMH0sZ2V0VG91Y2hBY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm5bTGJdfSxwcm9jZXNzOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMub3B0aW9ucyxjPWEucG9pbnRlcnMubGVuZ3RoPT09Yi5wb2ludGVycyxkPWEuZGlzdGFuY2U8Yi50aHJlc2hvbGQsZT1hLmRlbHRhVGltZTxiLnRpbWU7aWYodGhpcy5yZXNldCgpLGEuZXZlbnRUeXBlJk8mJjA9PT10aGlzLmNvdW50KXJldHVybiB0aGlzLmZhaWxUaW1lb3V0KCk7aWYoZCYmZSYmYyl7aWYoYS5ldmVudFR5cGUhPVEpcmV0dXJuIHRoaXMuZmFpbFRpbWVvdXQoKTt2YXIgZj10aGlzLnBUaW1lP2EudGltZVN0YW1wLXRoaXMucFRpbWU8Yi5pbnRlcnZhbDohMCxnPSF0aGlzLnBDZW50ZXJ8fGtiKHRoaXMucENlbnRlcixhLmNlbnRlcik8Yi5wb3NUaHJlc2hvbGQ7dGhpcy5wVGltZT1hLnRpbWVTdGFtcCx0aGlzLnBDZW50ZXI9YS5jZW50ZXIsZyYmZj90aGlzLmNvdW50Kz0xOnRoaXMuY291bnQ9MSx0aGlzLl9pbnB1dD1hO3ZhciBoPXRoaXMuY291bnQlYi50YXBzO2lmKDA9PT1oKXJldHVybiB0aGlzLmhhc1JlcXVpcmVGYWlsdXJlcygpPyh0aGlzLl90aW1lcj1rKGZ1bmN0aW9uKCl7dGhpcy5zdGF0ZT1WYix0aGlzLnRyeUVtaXQoKX0sYi5pbnRlcnZhbCx0aGlzKSxTYik6VmJ9cmV0dXJuIFhifSxmYWlsVGltZW91dDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90aW1lcj1rKGZ1bmN0aW9uKCl7dGhpcy5zdGF0ZT1YYn0sdGhpcy5vcHRpb25zLmludGVydmFsLHRoaXMpLFhifSxyZXNldDpmdW5jdGlvbigpe2NsZWFyVGltZW91dCh0aGlzLl90aW1lcil9LGVtaXQ6ZnVuY3Rpb24oKXt0aGlzLnN0YXRlPT1WYiYmKHRoaXMuX2lucHV0LnRhcENvdW50PXRoaXMuY291bnQsdGhpcy5tYW5hZ2VyLmVtaXQodGhpcy5vcHRpb25zLmV2ZW50LHRoaXMuX2lucHV0KSl9fSksaGMuVkVSU0lPTj1cIjIuMC40XCIsaGMuZGVmYXVsdHM9e2RvbUV2ZW50czohMSx0b3VjaEFjdGlvbjpKYixlbmFibGU6ITAsaW5wdXRUYXJnZXQ6bnVsbCxpbnB1dENsYXNzOm51bGwscHJlc2V0OltbZWMse2VuYWJsZTohMX1dLFtjYyx7ZW5hYmxlOiExfSxbXCJyb3RhdGVcIl1dLFtmYyx7ZGlyZWN0aW9uOlh9XSxbYmMse2RpcmVjdGlvbjpYfSxbXCJzd2lwZVwiXV0sW2djXSxbZ2Mse2V2ZW50OlwiZG91YmxldGFwXCIsdGFwczoyfSxbXCJ0YXBcIl1dLFtkY11dLGNzc1Byb3BzOnt1c2VyU2VsZWN0OlwiZGVmYXVsdFwiLHRvdWNoU2VsZWN0Olwibm9uZVwiLHRvdWNoQ2FsbG91dDpcIm5vbmVcIixjb250ZW50Wm9vbWluZzpcIm5vbmVcIix1c2VyRHJhZzpcIm5vbmVcIix0YXBIaWdobGlnaHRDb2xvcjpcInJnYmEoMCwwLDAsMClcIn19O3ZhciBpYz0xLGpjPTI7a2MucHJvdG90eXBlPXtzZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIG4odGhpcy5vcHRpb25zLGEpLGEudG91Y2hBY3Rpb24mJnRoaXMudG91Y2hBY3Rpb24udXBkYXRlKCksYS5pbnB1dFRhcmdldCYmKHRoaXMuaW5wdXQuZGVzdHJveSgpLHRoaXMuaW5wdXQudGFyZ2V0PWEuaW5wdXRUYXJnZXQsdGhpcy5pbnB1dC5pbml0KCkpLHRoaXN9LHN0b3A6ZnVuY3Rpb24oYSl7dGhpcy5zZXNzaW9uLnN0b3BwZWQ9YT9qYzppY30scmVjb2duaXplOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuc2Vzc2lvbjtpZighYi5zdG9wcGVkKXt0aGlzLnRvdWNoQWN0aW9uLnByZXZlbnREZWZhdWx0cyhhKTt2YXIgYyxkPXRoaXMucmVjb2duaXplcnMsZT1iLmN1clJlY29nbml6ZXI7KCFlfHxlJiZlLnN0YXRlJlZiKSYmKGU9Yi5jdXJSZWNvZ25pemVyPW51bGwpO2Zvcih2YXIgZj0wO2Y8ZC5sZW5ndGg7KWM9ZFtmXSxiLnN0b3BwZWQ9PT1qY3x8ZSYmYyE9ZSYmIWMuY2FuUmVjb2duaXplV2l0aChlKT9jLnJlc2V0KCk6Yy5yZWNvZ25pemUoYSksIWUmJmMuc3RhdGUmKFNifFRifFViKSYmKGU9Yi5jdXJSZWNvZ25pemVyPWMpLGYrK319LGdldDpmdW5jdGlvbihhKXtpZihhIGluc3RhbmNlb2YgWWIpcmV0dXJuIGE7Zm9yKHZhciBiPXRoaXMucmVjb2duaXplcnMsYz0wO2M8Yi5sZW5ndGg7YysrKWlmKGJbY10ub3B0aW9ucy5ldmVudD09YSlyZXR1cm4gYltjXTtyZXR1cm4gbnVsbH0sYWRkOmZ1bmN0aW9uKGEpe2lmKGwoYSxcImFkZFwiLHRoaXMpKXJldHVybiB0aGlzO3ZhciBiPXRoaXMuZ2V0KGEub3B0aW9ucy5ldmVudCk7cmV0dXJuIGImJnRoaXMucmVtb3ZlKGIpLHRoaXMucmVjb2duaXplcnMucHVzaChhKSxhLm1hbmFnZXI9dGhpcyx0aGlzLnRvdWNoQWN0aW9uLnVwZGF0ZSgpLGF9LHJlbW92ZTpmdW5jdGlvbihhKXtpZihsKGEsXCJyZW1vdmVcIix0aGlzKSlyZXR1cm4gdGhpczt2YXIgYj10aGlzLnJlY29nbml6ZXJzO3JldHVybiBhPXRoaXMuZ2V0KGEpLGIuc3BsaWNlKHkoYixhKSwxKSx0aGlzLnRvdWNoQWN0aW9uLnVwZGF0ZSgpLHRoaXN9LG9uOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5oYW5kbGVycztyZXR1cm4gbSh4KGEpLGZ1bmN0aW9uKGEpe2NbYV09Y1thXXx8W10sY1thXS5wdXNoKGIpfSksdGhpc30sb2ZmOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5oYW5kbGVycztyZXR1cm4gbSh4KGEpLGZ1bmN0aW9uKGEpe2I/Y1thXS5zcGxpY2UoeShjW2FdLGIpLDEpOmRlbGV0ZSBjW2FdfSksdGhpc30sZW1pdDpmdW5jdGlvbihhLGIpe3RoaXMub3B0aW9ucy5kb21FdmVudHMmJm1jKGEsYik7dmFyIGM9dGhpcy5oYW5kbGVyc1thXSYmdGhpcy5oYW5kbGVyc1thXS5zbGljZSgpO2lmKGMmJmMubGVuZ3RoKXtiLnR5cGU9YSxiLnByZXZlbnREZWZhdWx0PWZ1bmN0aW9uKCl7Yi5zcmNFdmVudC5wcmV2ZW50RGVmYXVsdCgpfTtmb3IodmFyIGQ9MDtkPGMubGVuZ3RoOyljW2RdKGIpLGQrK319LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQmJmxjKHRoaXMsITEpLHRoaXMuaGFuZGxlcnM9e30sdGhpcy5zZXNzaW9uPXt9LHRoaXMuaW5wdXQuZGVzdHJveSgpLHRoaXMuZWxlbWVudD1udWxsfX0sbihoYyx7SU5QVVRfU1RBUlQ6TyxJTlBVVF9NT1ZFOlAsSU5QVVRfRU5EOlEsSU5QVVRfQ0FOQ0VMOlIsU1RBVEVfUE9TU0lCTEU6UmIsU1RBVEVfQkVHQU46U2IsU1RBVEVfQ0hBTkdFRDpUYixTVEFURV9FTkRFRDpVYixTVEFURV9SRUNPR05JWkVEOlZiLFNUQVRFX0NBTkNFTExFRDpXYixTVEFURV9GQUlMRUQ6WGIsRElSRUNUSU9OX05PTkU6UyxESVJFQ1RJT05fTEVGVDpULERJUkVDVElPTl9SSUdIVDpVLERJUkVDVElPTl9VUDpWLERJUkVDVElPTl9ET1dOOlcsRElSRUNUSU9OX0hPUklaT05UQUw6WCxESVJFQ1RJT05fVkVSVElDQUw6WSxESVJFQ1RJT05fQUxMOlosTWFuYWdlcjprYyxJbnB1dDphYixUb3VjaEFjdGlvbjpQYixUb3VjaElucHV0OkViLE1vdXNlSW5wdXQ6cmIsUG9pbnRlckV2ZW50SW5wdXQ6d2IsVG91Y2hNb3VzZUlucHV0OkdiLFNpbmdsZVRvdWNoSW5wdXQ6QWIsUmVjb2duaXplcjpZYixBdHRyUmVjb2duaXplcjphYyxUYXA6Z2MsUGFuOmJjLFN3aXBlOmZjLFBpbmNoOmNjLFJvdGF0ZTplYyxQcmVzczpkYyxvbjp0LG9mZjp1LGVhY2g6bSxtZXJnZTpvLGV4dGVuZDpuLGluaGVyaXQ6cCxiaW5kRm46cSxwcmVmaXhlZDpCfSksdHlwZW9mIGRlZmluZT09ZyYmZGVmaW5lLmFtZD9kZWZpbmUoZnVuY3Rpb24oKXtyZXR1cm4gaGN9KTpcInVuZGVmaW5lZFwiIT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1oYzphW2NdPWhjfSh3aW5kb3csZG9jdW1lbnQsXCJIYW1tZXJcIik7OyhmdW5jdGlvbihmYWN0b3J5KSB7XHJcbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XHJcbiAgICAgICAgZGVmaW5lKFsnanF1ZXJ5JywgJ2hhbW1lcmpzJ10sIGZhY3RvcnkpO1xyXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICBmYWN0b3J5KHJlcXVpcmUoJ2pxdWVyeScpLCByZXF1aXJlKCdoYW1tZXJqcycpKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZmFjdG9yeShqUXVlcnksIEhhbW1lcik7XHJcbiAgICB9XHJcbn0oZnVuY3Rpb24oJCwgSGFtbWVyKSB7XHJcbiAgICBmdW5jdGlvbiBoYW1tZXJpZnkoZWwsIG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgJGVsID0gJChlbCk7XHJcbiAgICAgICAgaWYoISRlbC5kYXRhKFwiaGFtbWVyXCIpKSB7XHJcbiAgICAgICAgICAgICRlbC5kYXRhKFwiaGFtbWVyXCIsIG5ldyBIYW1tZXIoJGVsWzBdLCBvcHRpb25zKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgICQuZm4uaGFtbWVyID0gZnVuY3Rpb24ob3B0aW9ucykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGhhbW1lcmlmeSh0aGlzLCBvcHRpb25zKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gZXh0ZW5kIHRoZSBlbWl0IG1ldGhvZCB0byBhbHNvIHRyaWdnZXIgalF1ZXJ5IGV2ZW50c1xyXG4gICAgSGFtbWVyLk1hbmFnZXIucHJvdG90eXBlLmVtaXQgPSAoZnVuY3Rpb24ob3JpZ2luYWxFbWl0KSB7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHR5cGUsIGRhdGEpIHtcclxuICAgICAgICAgICAgb3JpZ2luYWxFbWl0LmNhbGwodGhpcywgdHlwZSwgZGF0YSk7XHJcbiAgICAgICAgICAgICQodGhpcy5lbGVtZW50KS50cmlnZ2VyKHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IHR5cGUsXHJcbiAgICAgICAgICAgICAgICBnZXN0dXJlOiBkYXRhXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICB9KShIYW1tZXIuTWFuYWdlci5wcm90b3R5cGUuZW1pdCk7XHJcbn0pKTtcclxuOy8vIFJlcXVpcmVkIGZvciBNZXRlb3IgcGFja2FnZSwgdGhlIHVzZSBvZiB3aW5kb3cgcHJldmVudHMgZXhwb3J0IGJ5IE1ldGVvclxyXG4oZnVuY3Rpb24od2luZG93KXtcclxuICBpZih3aW5kb3cuUGFja2FnZSl7XHJcbiAgICBNYXRlcmlhbGl6ZSA9IHt9O1xyXG4gIH0gZWxzZSB7XHJcbiAgICB3aW5kb3cuTWF0ZXJpYWxpemUgPSB7fTtcclxuICB9XHJcbn0pKHdpbmRvdyk7XHJcblxyXG5cclxuLypcclxuICogcmFmLmpzXHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9uZ3J5bWFuL3JhZi5qc1xyXG4gKlxyXG4gKiBvcmlnaW5hbCByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgcG9seWZpbGwgYnkgRXJpayBNw7ZsbGVyXHJcbiAqIGluc3BpcmVkIGZyb20gcGF1bF9pcmlzaCBnaXN0IGFuZCBwb3N0XHJcbiAqXHJcbiAqIENvcHlyaWdodCAoYykgMjAxMyBuZ3J5bWFuXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cclxuICovXHJcbihmdW5jdGlvbih3aW5kb3cpIHtcclxuICB2YXIgbGFzdFRpbWUgPSAwLFxyXG4gICAgdmVuZG9ycyA9IFsnd2Via2l0JywgJ21veiddLFxyXG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSxcclxuICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lID0gd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lLFxyXG4gICAgaSA9IHZlbmRvcnMubGVuZ3RoO1xyXG5cclxuICAvLyB0cnkgdG8gdW4tcHJlZml4IGV4aXN0aW5nIHJhZlxyXG4gIHdoaWxlICgtLWkgPj0gMCAmJiAhcmVxdWVzdEFuaW1hdGlvbkZyYW1lKSB7XHJcbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSB3aW5kb3dbdmVuZG9yc1tpXSArICdSZXF1ZXN0QW5pbWF0aW9uRnJhbWUnXTtcclxuICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lID0gd2luZG93W3ZlbmRvcnNbaV0gKyAnQ2FuY2VsUmVxdWVzdEFuaW1hdGlvbkZyYW1lJ107XHJcbiAgfVxyXG5cclxuICAvLyBwb2x5ZmlsbCB3aXRoIHNldFRpbWVvdXQgZmFsbGJhY2tcclxuICAvLyBoZWF2aWx5IGluc3BpcmVkIGZyb20gQGRhcml1cyBnaXN0IG1vZDogaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vcGF1bGlyaXNoLzE1Nzk2NzEjY29tbWVudC04Mzc5NDVcclxuICBpZiAoIXJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCAhY2FuY2VsQW5pbWF0aW9uRnJhbWUpIHtcclxuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XHJcbiAgICAgIHZhciBub3cgPSArRGF0ZS5ub3coKSxcclxuICAgICAgICBuZXh0VGltZSA9IE1hdGgubWF4KGxhc3RUaW1lICsgMTYsIG5vdyk7XHJcbiAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGNhbGxiYWNrKGxhc3RUaW1lID0gbmV4dFRpbWUpO1xyXG4gICAgICB9LCBuZXh0VGltZSAtIG5vdyk7XHJcbiAgICB9O1xyXG5cclxuICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lID0gY2xlYXJUaW1lb3V0O1xyXG4gIH1cclxuXHJcbiAgLy8gZXhwb3J0IHRvIHdpbmRvd1xyXG4gIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWU7XHJcbiAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lID0gY2FuY2VsQW5pbWF0aW9uRnJhbWU7XHJcbn0od2luZG93KSk7XHJcblxyXG5cclxuLy8gVW5pcXVlIElEXHJcbk1hdGVyaWFsaXplLmd1aWQgPSAoZnVuY3Rpb24oKSB7XHJcbiAgZnVuY3Rpb24gczQoKSB7XHJcbiAgICByZXR1cm4gTWF0aC5mbG9vcigoMSArIE1hdGgucmFuZG9tKCkpICogMHgxMDAwMClcclxuICAgICAgLnRvU3RyaW5nKDE2KVxyXG4gICAgICAuc3Vic3RyaW5nKDEpO1xyXG4gIH1cclxuICByZXR1cm4gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gczQoKSArIHM0KCkgKyAnLScgKyBzNCgpICsgJy0nICsgczQoKSArICctJyArXHJcbiAgICAgICAgICAgczQoKSArICctJyArIHM0KCkgKyBzNCgpICsgczQoKTtcclxuICB9O1xyXG59KSgpO1xyXG5cclxuLyoqXHJcbiAqIEVzY2FwZXMgaGFzaCBmcm9tIHNwZWNpYWwgY2hhcmFjdGVyc1xyXG4gKiBAcGFyYW0ge3N0cmluZ30gaGFzaCAgU3RyaW5nIHJldHVybmVkIGZyb20gdGhpcy5oYXNoXHJcbiAqIEByZXR1cm5zIHtzdHJpbmd9XHJcbiAqL1xyXG5NYXRlcmlhbGl6ZS5lc2NhcGVIYXNoID0gZnVuY3Rpb24oaGFzaCkge1xyXG4gIHJldHVybiBoYXNoLnJlcGxhY2UoIC8oOnxcXC58XFxbfFxcXXwsfD0pL2csIFwiXFxcXCQxXCIgKTtcclxufTtcclxuXHJcbk1hdGVyaWFsaXplLmVsZW1lbnRPclBhcmVudElzRml4ZWQgPSBmdW5jdGlvbihlbGVtZW50KSB7XHJcbiAgICB2YXIgJGVsZW1lbnQgPSAkKGVsZW1lbnQpO1xyXG4gICAgdmFyICRjaGVja0VsZW1lbnRzID0gJGVsZW1lbnQuYWRkKCRlbGVtZW50LnBhcmVudHMoKSk7XHJcbiAgICB2YXIgaXNGaXhlZCA9IGZhbHNlO1xyXG4gICAgJGNoZWNrRWxlbWVudHMuZWFjaChmdW5jdGlvbigpe1xyXG4gICAgICAgIGlmICgkKHRoaXMpLmNzcyhcInBvc2l0aW9uXCIpID09PSBcImZpeGVkXCIpIHtcclxuICAgICAgICAgICAgaXNGaXhlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBpc0ZpeGVkO1xyXG59O1xyXG5cclxuLy8gVmVsb2NpdHkgaGFzIGNvbmZsaWN0cyB3aGVuIGxvYWRlZCB3aXRoIGpRdWVyeSwgdGhpcyB3aWxsIGNoZWNrIGZvciBpdFxyXG4vLyBGaXJzdCwgY2hlY2sgaWYgaW4gbm9Db25mbGljdCBtb2RlXHJcbnZhciBWZWw7XHJcbmlmIChqUXVlcnkpIHtcclxuICBWZWwgPSBqUXVlcnkuVmVsb2NpdHk7XHJcbn0gZWxzZSBpZiAoJCkge1xyXG4gIFZlbCA9ICQuVmVsb2NpdHk7XHJcbn0gZWxzZSB7XHJcbiAgVmVsID0gVmVsb2NpdHk7XHJcbn1cclxuOyhmdW5jdGlvbiAoJCkge1xyXG4gICQuZm4uY29sbGFwc2libGUgPSBmdW5jdGlvbihvcHRpb25zKSB7XHJcbiAgICB2YXIgZGVmYXVsdHMgPSB7XHJcbiAgICAgIGFjY29yZGlvbjogdW5kZWZpbmVkLFxyXG4gICAgICBvbk9wZW46IHVuZGVmaW5lZCxcclxuICAgICAgb25DbG9zZTogdW5kZWZpbmVkXHJcbiAgICB9O1xyXG5cclxuICAgIG9wdGlvbnMgPSAkLmV4dGVuZChkZWZhdWx0cywgb3B0aW9ucyk7XHJcblxyXG5cclxuICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xyXG5cclxuICAgICAgdmFyICRwYW5lbF9oZWFkZXJzID0gJCh0aGlzKS5maW5kKCc+IGxpID4gLmNvbGxhcHNpYmxlLWhlYWRlcicpO1xyXG5cclxuICAgICAgdmFyIGNvbGxhcHNpYmxlX3R5cGUgPSAkdGhpcy5kYXRhKFwiY29sbGFwc2libGVcIik7XHJcblxyXG4gICAgICAvLyBUdXJuIG9mZiBhbnkgZXhpc3RpbmcgZXZlbnQgaGFuZGxlcnNcclxuICAgICAgJHRoaXMub2ZmKCdjbGljay5jb2xsYXBzZScsICc+IGxpID4gLmNvbGxhcHNpYmxlLWhlYWRlcicpO1xyXG4gICAgICAkcGFuZWxfaGVhZGVycy5vZmYoJ2NsaWNrLmNvbGxhcHNlJyk7XHJcblxyXG5cclxuICAgICAgLyoqKioqKioqKioqKioqKipcclxuICAgICAgSGVscGVyIEZ1bmN0aW9uc1xyXG4gICAgICAqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgLy8gQWNjb3JkaW9uIE9wZW5cclxuICAgICAgZnVuY3Rpb24gYWNjb3JkaW9uT3BlbihvYmplY3QpIHtcclxuICAgICAgICAkcGFuZWxfaGVhZGVycyA9ICR0aGlzLmZpbmQoJz4gbGkgPiAuY29sbGFwc2libGUtaGVhZGVyJyk7XHJcbiAgICAgICAgaWYgKG9iamVjdC5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAgIG9iamVjdC5wYXJlbnQoKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgb2JqZWN0LnBhcmVudCgpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9iamVjdC5wYXJlbnQoKS5oYXNDbGFzcygnYWN0aXZlJykpe1xyXG4gICAgICAgICAgb2JqZWN0LnNpYmxpbmdzKCcuY29sbGFwc2libGUtYm9keScpLnN0b3AodHJ1ZSxmYWxzZSkuc2xpZGVEb3duKHsgZHVyYXRpb246IDM1MCwgZWFzaW5nOiBcImVhc2VPdXRRdWFydFwiLCBxdWV1ZTogZmFsc2UsIGNvbXBsZXRlOiBmdW5jdGlvbigpIHskKHRoaXMpLmNzcygnaGVpZ2h0JywgJycpO319KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgIG9iamVjdC5zaWJsaW5ncygnLmNvbGxhcHNpYmxlLWJvZHknKS5zdG9wKHRydWUsZmFsc2UpLnNsaWRlVXAoeyBkdXJhdGlvbjogMzUwLCBlYXNpbmc6IFwiZWFzZU91dFF1YXJ0XCIsIHF1ZXVlOiBmYWxzZSwgY29tcGxldGU6IGZ1bmN0aW9uKCkgeyQodGhpcykuY3NzKCdoZWlnaHQnLCAnJyk7fX0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJHBhbmVsX2hlYWRlcnMubm90KG9iamVjdCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpLnBhcmVudCgpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuXHJcbiAgICAgICAgLy8gQ2xvc2UgcHJldmlvdXNseSBvcGVuIGFjY29yZGlvbiBlbGVtZW50cy5cclxuICAgICAgICAkcGFuZWxfaGVhZGVycy5ub3Qob2JqZWN0KS5wYXJlbnQoKS5jaGlsZHJlbignLmNvbGxhcHNpYmxlLWJvZHknKS5zdG9wKHRydWUsZmFsc2UpLmVhY2goZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBpZiAoJCh0aGlzKS5pcygnOnZpc2libGUnKSkge1xyXG4gICAgICAgICAgICAkKHRoaXMpLnNsaWRlVXAoe1xyXG4gICAgICAgICAgICAgIGR1cmF0aW9uOiAzNTAsXHJcbiAgICAgICAgICAgICAgZWFzaW5nOiBcImVhc2VPdXRRdWFydFwiLFxyXG4gICAgICAgICAgICAgIHF1ZXVlOiBmYWxzZSxcclxuICAgICAgICAgICAgICBjb21wbGV0ZTpcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAkKHRoaXMpLmNzcygnaGVpZ2h0JywgJycpO1xyXG4gICAgICAgICAgICAgICAgICBleGVjQ2FsbGJhY2tzKCQodGhpcykuc2libGluZ3MoJy5jb2xsYXBzaWJsZS1oZWFkZXInKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBFeHBhbmRhYmxlIE9wZW5cclxuICAgICAgZnVuY3Rpb24gZXhwYW5kYWJsZU9wZW4ob2JqZWN0KSB7XHJcbiAgICAgICAgaWYgKG9iamVjdC5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAgIG9iamVjdC5wYXJlbnQoKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgb2JqZWN0LnBhcmVudCgpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9iamVjdC5wYXJlbnQoKS5oYXNDbGFzcygnYWN0aXZlJykpe1xyXG4gICAgICAgICAgb2JqZWN0LnNpYmxpbmdzKCcuY29sbGFwc2libGUtYm9keScpLnN0b3AodHJ1ZSxmYWxzZSkuc2xpZGVEb3duKHsgZHVyYXRpb246IDM1MCwgZWFzaW5nOiBcImVhc2VPdXRRdWFydFwiLCBxdWV1ZTogZmFsc2UsIGNvbXBsZXRlOiBmdW5jdGlvbigpIHskKHRoaXMpLmNzcygnaGVpZ2h0JywgJycpO319KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICBvYmplY3Quc2libGluZ3MoJy5jb2xsYXBzaWJsZS1ib2R5Jykuc3RvcCh0cnVlLGZhbHNlKS5zbGlkZVVwKHsgZHVyYXRpb246IDM1MCwgZWFzaW5nOiBcImVhc2VPdXRRdWFydFwiLCBxdWV1ZTogZmFsc2UsIGNvbXBsZXRlOiBmdW5jdGlvbigpIHskKHRoaXMpLmNzcygnaGVpZ2h0JywgJycpO319KTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIE9wZW4gY29sbGFwc2libGUuIG9iamVjdDogLmNvbGxhcHNpYmxlLWhlYWRlclxyXG4gICAgICBmdW5jdGlvbiBjb2xsYXBzaWJsZU9wZW4ob2JqZWN0KSB7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMuYWNjb3JkaW9uIHx8IGNvbGxhcHNpYmxlX3R5cGUgPT09IFwiYWNjb3JkaW9uXCIgfHwgY29sbGFwc2libGVfdHlwZSA9PT0gdW5kZWZpbmVkKSB7IC8vIEhhbmRsZSBBY2NvcmRpb25cclxuICAgICAgICAgIGFjY29yZGlvbk9wZW4ob2JqZWN0KTtcclxuICAgICAgICB9IGVsc2UgeyAvLyBIYW5kbGUgRXhwYW5kYWJsZXNcclxuICAgICAgICAgIGV4cGFuZGFibGVPcGVuKG9iamVjdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBleGVjQ2FsbGJhY2tzKG9iamVjdCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIEhhbmRsZSBjYWxsYmFja3NcclxuICAgICAgZnVuY3Rpb24gZXhlY0NhbGxiYWNrcyhvYmplY3QpIHtcclxuICAgICAgICBpZiAob2JqZWN0Lmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgaWYgKHR5cGVvZihvcHRpb25zLm9uT3BlbikgPT09IFwiZnVuY3Rpb25cIikge1xyXG4gICAgICAgICAgICBvcHRpb25zLm9uT3Blbi5jYWxsKHRoaXMsIG9iamVjdC5wYXJlbnQoKSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGlmICh0eXBlb2Yob3B0aW9ucy5vbkNsb3NlKSA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICAgICAgICAgIG9wdGlvbnMub25DbG9zZS5jYWxsKHRoaXMsIG9iamVjdC5wYXJlbnQoKSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogQ2hlY2sgaWYgb2JqZWN0IGlzIGNoaWxkcmVuIG9mIHBhbmVsIGhlYWRlclxyXG4gICAgICAgKiBAcGFyYW0gIHtPYmplY3R9ICBvYmplY3QgSnF1ZXJ5IG9iamVjdFxyXG4gICAgICAgKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlIGlmIGl0IGlzIGNoaWxkcmVuXHJcbiAgICAgICAqL1xyXG4gICAgICBmdW5jdGlvbiBpc0NoaWxkcmVuT2ZQYW5lbEhlYWRlcihvYmplY3QpIHtcclxuXHJcbiAgICAgICAgdmFyIHBhbmVsSGVhZGVyID0gZ2V0UGFuZWxIZWFkZXIob2JqZWN0KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHBhbmVsSGVhZGVyLmxlbmd0aCA+IDA7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBHZXQgcGFuZWwgaGVhZGVyIGZyb20gYSBjaGlsZHJlbiBlbGVtZW50XHJcbiAgICAgICAqIEBwYXJhbSAge09iamVjdH0gb2JqZWN0IEpxdWVyeSBvYmplY3RcclxuICAgICAgICogQHJldHVybiB7T2JqZWN0fSBwYW5lbCBoZWFkZXIgb2JqZWN0XHJcbiAgICAgICAqL1xyXG4gICAgICBmdW5jdGlvbiBnZXRQYW5lbEhlYWRlcihvYmplY3QpIHtcclxuXHJcbiAgICAgICAgcmV0dXJuIG9iamVjdC5jbG9zZXN0KCdsaSA+IC5jb2xsYXBzaWJsZS1oZWFkZXInKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLyoqKioqICBFbmQgSGVscGVyIEZ1bmN0aW9ucyAgKioqKiovXHJcblxyXG5cclxuXHJcbiAgICAgIC8vIEFkZCBjbGljayBoYW5kbGVyIHRvIG9ubHkgZGlyZWN0IGNvbGxhcHNpYmxlIGhlYWRlciBjaGlsZHJlblxyXG4gICAgICAkdGhpcy5vbignY2xpY2suY29sbGFwc2UnLCAnPiBsaSA+IC5jb2xsYXBzaWJsZS1oZWFkZXInLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgdmFyIGVsZW1lbnQgPSAkKGUudGFyZ2V0KTtcclxuXHJcbiAgICAgICAgaWYgKGlzQ2hpbGRyZW5PZlBhbmVsSGVhZGVyKGVsZW1lbnQpKSB7XHJcbiAgICAgICAgICBlbGVtZW50ID0gZ2V0UGFuZWxIZWFkZXIoZWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBlbGVtZW50LnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcclxuXHJcbiAgICAgICAgY29sbGFwc2libGVPcGVuKGVsZW1lbnQpO1xyXG4gICAgICB9KTtcclxuXHJcblxyXG4gICAgICAvLyBPcGVuIGZpcnN0IGFjdGl2ZVxyXG4gICAgICBpZiAob3B0aW9ucy5hY2NvcmRpb24gfHwgY29sbGFwc2libGVfdHlwZSA9PT0gXCJhY2NvcmRpb25cIiB8fCBjb2xsYXBzaWJsZV90eXBlID09PSB1bmRlZmluZWQpIHsgLy8gSGFuZGxlIEFjY29yZGlvblxyXG4gICAgICAgIGNvbGxhcHNpYmxlT3BlbigkcGFuZWxfaGVhZGVycy5maWx0ZXIoJy5hY3RpdmUnKS5maXJzdCgpKTtcclxuXHJcbiAgICAgIH0gZWxzZSB7IC8vIEhhbmRsZSBFeHBhbmRhYmxlc1xyXG4gICAgICAgICRwYW5lbF9oZWFkZXJzLmZpbHRlcignLmFjdGl2ZScpLmVhY2goZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBjb2xsYXBzaWJsZU9wZW4oJCh0aGlzKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe1xyXG4gICAgJCgnLmNvbGxhcHNpYmxlJykuY29sbGFwc2libGUoKTtcclxuICB9KTtcclxufSggalF1ZXJ5ICkpOzsoZnVuY3Rpb24gKCQpIHtcclxuXHJcbiAgLy8gQWRkIHBvc2liaWxpdHkgdG8gc2Nyb2xsIHRvIHNlbGVjdGVkIG9wdGlvblxyXG4gIC8vIHVzZWZ1bGwgZm9yIHNlbGVjdCBmb3IgZXhhbXBsZVxyXG4gICQuZm4uc2Nyb2xsVG8gPSBmdW5jdGlvbihlbGVtKSB7XHJcbiAgICAkKHRoaXMpLnNjcm9sbFRvcCgkKHRoaXMpLnNjcm9sbFRvcCgpIC0gJCh0aGlzKS5vZmZzZXQoKS50b3AgKyAkKGVsZW0pLm9mZnNldCgpLnRvcCk7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9O1xyXG5cclxuICAkLmZuLmRyb3Bkb3duID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgIHZhciBkZWZhdWx0cyA9IHtcclxuICAgICAgaW5EdXJhdGlvbjogMzAwLFxyXG4gICAgICBvdXREdXJhdGlvbjogMjI1LFxyXG4gICAgICBjb25zdHJhaW5fd2lkdGg6IHRydWUsIC8vIENvbnN0cmFpbnMgd2lkdGggb2YgZHJvcGRvd24gdG8gdGhlIGFjdGl2YXRvclxyXG4gICAgICBob3ZlcjogZmFsc2UsXHJcbiAgICAgIGd1dHRlcjogMCwgLy8gU3BhY2luZyBmcm9tIGVkZ2VcclxuICAgICAgYmVsb3dPcmlnaW46IGZhbHNlLFxyXG4gICAgICBhbGlnbm1lbnQ6ICdsZWZ0JyxcclxuICAgICAgc3RvcFByb3BhZ2F0aW9uOiBmYWxzZVxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBPcGVuIGRyb3Bkb3duLlxyXG4gICAgaWYgKG9wdGlvbnMgPT09IFwib3BlblwiKSB7XHJcbiAgICAgIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgICAkKHRoaXMpLnRyaWdnZXIoJ29wZW4nKTtcclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDbG9zZSBkcm9wZG93bi5cclxuICAgIGlmIChvcHRpb25zID09PSBcImNsb3NlXCIpIHtcclxuICAgICAgdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICQodGhpcykudHJpZ2dlcignY2xvc2UnKTtcclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmVhY2goZnVuY3Rpb24oKXtcclxuICAgICAgdmFyIG9yaWdpbiA9ICQodGhpcyk7XHJcbiAgICAgIHZhciBjdXJyX29wdGlvbnMgPSAkLmV4dGVuZCh7fSwgZGVmYXVsdHMsIG9wdGlvbnMpO1xyXG4gICAgICB2YXIgaXNGb2N1c2VkID0gZmFsc2U7XHJcblxyXG4gICAgICAvLyBEcm9wZG93biBtZW51XHJcbiAgICAgIHZhciBhY3RpdmF0ZXMgPSAkKFwiI1wiKyBvcmlnaW4uYXR0cignZGF0YS1hY3RpdmF0ZXMnKSk7XHJcblxyXG4gICAgICBmdW5jdGlvbiB1cGRhdGVPcHRpb25zKCkge1xyXG4gICAgICAgIGlmIChvcmlnaW4uZGF0YSgnaW5kdXJhdGlvbicpICE9PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICBjdXJyX29wdGlvbnMuaW5EdXJhdGlvbiA9IG9yaWdpbi5kYXRhKCdpbmR1cmF0aW9uJyk7XHJcbiAgICAgICAgaWYgKG9yaWdpbi5kYXRhKCdvdXRkdXJhdGlvbicpICE9PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICBjdXJyX29wdGlvbnMub3V0RHVyYXRpb24gPSBvcmlnaW4uZGF0YSgnb3V0ZHVyYXRpb24nKTtcclxuICAgICAgICBpZiAob3JpZ2luLmRhdGEoJ2NvbnN0cmFpbndpZHRoJykgIT09IHVuZGVmaW5lZClcclxuICAgICAgICAgIGN1cnJfb3B0aW9ucy5jb25zdHJhaW5fd2lkdGggPSBvcmlnaW4uZGF0YSgnY29uc3RyYWlud2lkdGgnKTtcclxuICAgICAgICBpZiAob3JpZ2luLmRhdGEoJ2hvdmVyJykgIT09IHVuZGVmaW5lZClcclxuICAgICAgICAgIGN1cnJfb3B0aW9ucy5ob3ZlciA9IG9yaWdpbi5kYXRhKCdob3ZlcicpO1xyXG4gICAgICAgIGlmIChvcmlnaW4uZGF0YSgnZ3V0dGVyJykgIT09IHVuZGVmaW5lZClcclxuICAgICAgICAgIGN1cnJfb3B0aW9ucy5ndXR0ZXIgPSBvcmlnaW4uZGF0YSgnZ3V0dGVyJyk7XHJcbiAgICAgICAgaWYgKG9yaWdpbi5kYXRhKCdiZWxvd29yaWdpbicpICE9PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICBjdXJyX29wdGlvbnMuYmVsb3dPcmlnaW4gPSBvcmlnaW4uZGF0YSgnYmVsb3dvcmlnaW4nKTtcclxuICAgICAgICBpZiAob3JpZ2luLmRhdGEoJ2FsaWdubWVudCcpICE9PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICBjdXJyX29wdGlvbnMuYWxpZ25tZW50ID0gb3JpZ2luLmRhdGEoJ2FsaWdubWVudCcpO1xyXG4gICAgICAgIGlmIChvcmlnaW4uZGF0YSgnc3RvcHByb3BhZ2F0aW9uJykgIT09IHVuZGVmaW5lZClcclxuICAgICAgICAgIGN1cnJfb3B0aW9ucy5zdG9wUHJvcGFnYXRpb24gPSBvcmlnaW4uZGF0YSgnc3RvcHByb3BhZ2F0aW9uJyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHVwZGF0ZU9wdGlvbnMoKTtcclxuXHJcbiAgICAgIC8vIEF0dGFjaCBkcm9wZG93biB0byBpdHMgYWN0aXZhdG9yXHJcbiAgICAgIG9yaWdpbi5hZnRlcihhY3RpdmF0ZXMpO1xyXG5cclxuICAgICAgLypcclxuICAgICAgICBIZWxwZXIgZnVuY3Rpb24gdG8gcG9zaXRpb24gYW5kIHJlc2l6ZSBkcm9wZG93bi5cclxuICAgICAgICBVc2VkIGluIGhvdmVyIGFuZCBjbGljayBoYW5kbGVyLlxyXG4gICAgICAqL1xyXG4gICAgICBmdW5jdGlvbiBwbGFjZURyb3Bkb3duKGV2ZW50VHlwZSkge1xyXG4gICAgICAgIC8vIENoZWNrIGZvciBzaW11bHRhbmVvdXMgZm9jdXMgYW5kIGNsaWNrIGV2ZW50cy5cclxuICAgICAgICBpZiAoZXZlbnRUeXBlID09PSAnZm9jdXMnKSB7XHJcbiAgICAgICAgICBpc0ZvY3VzZWQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ2hlY2sgaHRtbCBkYXRhIGF0dHJpYnV0ZXNcclxuICAgICAgICB1cGRhdGVPcHRpb25zKCk7XHJcblxyXG4gICAgICAgIC8vIFNldCBEcm9wZG93biBzdGF0ZVxyXG4gICAgICAgIGFjdGl2YXRlcy5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgb3JpZ2luLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuXHJcbiAgICAgICAgLy8gQ29uc3RyYWluIHdpZHRoXHJcbiAgICAgICAgaWYgKGN1cnJfb3B0aW9ucy5jb25zdHJhaW5fd2lkdGggPT09IHRydWUpIHtcclxuICAgICAgICAgIGFjdGl2YXRlcy5jc3MoJ3dpZHRoJywgb3JpZ2luLm91dGVyV2lkdGgoKSk7XHJcblxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBhY3RpdmF0ZXMuY3NzKCd3aGl0ZS1zcGFjZScsICdub3dyYXAnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIE9mZnNjcmVlbiBkZXRlY3Rpb25cclxuICAgICAgICB2YXIgd2luZG93SGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xyXG4gICAgICAgIHZhciBvcmlnaW5IZWlnaHQgPSBvcmlnaW4uaW5uZXJIZWlnaHQoKTtcclxuICAgICAgICB2YXIgb2Zmc2V0TGVmdCA9IG9yaWdpbi5vZmZzZXQoKS5sZWZ0O1xyXG4gICAgICAgIHZhciBvZmZzZXRUb3AgPSBvcmlnaW4ub2Zmc2V0KCkudG9wIC0gJCh3aW5kb3cpLnNjcm9sbFRvcCgpO1xyXG4gICAgICAgIHZhciBjdXJyQWxpZ25tZW50ID0gY3Vycl9vcHRpb25zLmFsaWdubWVudDtcclxuICAgICAgICB2YXIgZ3V0dGVyU3BhY2luZyA9IDA7XHJcbiAgICAgICAgdmFyIGxlZnRQb3NpdGlvbiA9IDA7XHJcblxyXG4gICAgICAgIC8vIEJlbG93IE9yaWdpblxyXG4gICAgICAgIHZhciB2ZXJ0aWNhbE9mZnNldCA9IDA7XHJcbiAgICAgICAgaWYgKGN1cnJfb3B0aW9ucy5iZWxvd09yaWdpbiA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgdmVydGljYWxPZmZzZXQgPSBvcmlnaW5IZWlnaHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBDaGVjayBmb3Igc2Nyb2xsaW5nIHBvc2l0aW9uZWQgY29udGFpbmVyLlxyXG4gICAgICAgIHZhciBzY3JvbGxZT2Zmc2V0ID0gMDtcclxuICAgICAgICB2YXIgc2Nyb2xsWE9mZnNldCA9IDA7XHJcbiAgICAgICAgdmFyIHdyYXBwZXIgPSBvcmlnaW4ucGFyZW50KCk7XHJcbiAgICAgICAgaWYgKCF3cmFwcGVyLmlzKCdib2R5JykpIHtcclxuICAgICAgICAgIGlmICh3cmFwcGVyWzBdLnNjcm9sbEhlaWdodCA+IHdyYXBwZXJbMF0uY2xpZW50SGVpZ2h0KSB7XHJcbiAgICAgICAgICAgIHNjcm9sbFlPZmZzZXQgPSB3cmFwcGVyWzBdLnNjcm9sbFRvcDtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmICh3cmFwcGVyWzBdLnNjcm9sbFdpZHRoID4gd3JhcHBlclswXS5jbGllbnRXaWR0aCkge1xyXG4gICAgICAgICAgICBzY3JvbGxYT2Zmc2V0ID0gd3JhcHBlclswXS5zY3JvbGxMZWZ0O1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIGlmIChvZmZzZXRMZWZ0ICsgYWN0aXZhdGVzLmlubmVyV2lkdGgoKSA+ICQod2luZG93KS53aWR0aCgpKSB7XHJcbiAgICAgICAgICAvLyBEcm9wZG93biBnb2VzIHBhc3Qgc2NyZWVuIG9uIHJpZ2h0LCBmb3JjZSByaWdodCBhbGlnbm1lbnRcclxuICAgICAgICAgIGN1cnJBbGlnbm1lbnQgPSAncmlnaHQnO1xyXG5cclxuICAgICAgICB9IGVsc2UgaWYgKG9mZnNldExlZnQgLSBhY3RpdmF0ZXMuaW5uZXJXaWR0aCgpICsgb3JpZ2luLmlubmVyV2lkdGgoKSA8IDApIHtcclxuICAgICAgICAgIC8vIERyb3Bkb3duIGdvZXMgcGFzdCBzY3JlZW4gb24gbGVmdCwgZm9yY2UgbGVmdCBhbGlnbm1lbnRcclxuICAgICAgICAgIGN1cnJBbGlnbm1lbnQgPSAnbGVmdCc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFZlcnRpY2FsIGJvdHRvbSBvZmZzY3JlZW4gZGV0ZWN0aW9uXHJcbiAgICAgICAgaWYgKG9mZnNldFRvcCArIGFjdGl2YXRlcy5pbm5lckhlaWdodCgpID4gd2luZG93SGVpZ2h0KSB7XHJcbiAgICAgICAgICAvLyBJZiBnb2luZyB1cHdhcmRzIHN0aWxsIGdvZXMgb2Zmc2NyZWVuLCBqdXN0IGNyb3AgaGVpZ2h0IG9mIGRyb3Bkb3duLlxyXG4gICAgICAgICAgaWYgKG9mZnNldFRvcCArIG9yaWdpbkhlaWdodCAtIGFjdGl2YXRlcy5pbm5lckhlaWdodCgpIDwgMCkge1xyXG4gICAgICAgICAgICB2YXIgYWRqdXN0ZWRIZWlnaHQgPSB3aW5kb3dIZWlnaHQgLSBvZmZzZXRUb3AgLSB2ZXJ0aWNhbE9mZnNldDtcclxuICAgICAgICAgICAgYWN0aXZhdGVzLmNzcygnbWF4LWhlaWdodCcsIGFkanVzdGVkSGVpZ2h0KTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIEZsb3cgdXB3YXJkcy5cclxuICAgICAgICAgICAgaWYgKCF2ZXJ0aWNhbE9mZnNldCkge1xyXG4gICAgICAgICAgICAgIHZlcnRpY2FsT2Zmc2V0ICs9IG9yaWdpbkhlaWdodDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2ZXJ0aWNhbE9mZnNldCAtPSBhY3RpdmF0ZXMuaW5uZXJIZWlnaHQoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEhhbmRsZSBlZGdlIGFsaWdubWVudFxyXG4gICAgICAgIGlmIChjdXJyQWxpZ25tZW50ID09PSAnbGVmdCcpIHtcclxuICAgICAgICAgIGd1dHRlclNwYWNpbmcgPSBjdXJyX29wdGlvbnMuZ3V0dGVyO1xyXG4gICAgICAgICAgbGVmdFBvc2l0aW9uID0gb3JpZ2luLnBvc2l0aW9uKCkubGVmdCArIGd1dHRlclNwYWNpbmc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGN1cnJBbGlnbm1lbnQgPT09ICdyaWdodCcpIHtcclxuICAgICAgICAgIHZhciBvZmZzZXRSaWdodCA9IG9yaWdpbi5wb3NpdGlvbigpLmxlZnQgKyBvcmlnaW4ub3V0ZXJXaWR0aCgpIC0gYWN0aXZhdGVzLm91dGVyV2lkdGgoKTtcclxuICAgICAgICAgIGd1dHRlclNwYWNpbmcgPSAtY3Vycl9vcHRpb25zLmd1dHRlcjtcclxuICAgICAgICAgIGxlZnRQb3NpdGlvbiA9ICBvZmZzZXRSaWdodCArIGd1dHRlclNwYWNpbmc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBQb3NpdGlvbiBkcm9wZG93blxyXG4gICAgICAgIGFjdGl2YXRlcy5jc3Moe1xyXG4gICAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXHJcbiAgICAgICAgICB0b3A6IG9yaWdpbi5wb3NpdGlvbigpLnRvcCArIHZlcnRpY2FsT2Zmc2V0ICsgc2Nyb2xsWU9mZnNldCxcclxuICAgICAgICAgIGxlZnQ6IGxlZnRQb3NpdGlvbiArIHNjcm9sbFhPZmZzZXRcclxuICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgIC8vIFNob3cgZHJvcGRvd25cclxuICAgICAgICBhY3RpdmF0ZXMuc3RvcCh0cnVlLCB0cnVlKS5jc3MoJ29wYWNpdHknLCAwKVxyXG4gICAgICAgICAgLnNsaWRlRG93bih7XHJcbiAgICAgICAgICAgIHF1ZXVlOiBmYWxzZSxcclxuICAgICAgICAgICAgZHVyYXRpb246IGN1cnJfb3B0aW9ucy5pbkR1cmF0aW9uLFxyXG4gICAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0Q3ViaWMnLFxyXG4gICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoJ2hlaWdodCcsICcnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5hbmltYXRlKCB7b3BhY2l0eTogMX0sIHtxdWV1ZTogZmFsc2UsIGR1cmF0aW9uOiBjdXJyX29wdGlvbnMuaW5EdXJhdGlvbiwgZWFzaW5nOiAnZWFzZU91dFNpbmUnfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZ1bmN0aW9uIGhpZGVEcm9wZG93bigpIHtcclxuICAgICAgICAvLyBDaGVjayBmb3Igc2ltdWx0YW5lb3VzIGZvY3VzIGFuZCBjbGljayBldmVudHMuXHJcbiAgICAgICAgaXNGb2N1c2VkID0gZmFsc2U7XHJcbiAgICAgICAgYWN0aXZhdGVzLmZhZGVPdXQoY3Vycl9vcHRpb25zLm91dER1cmF0aW9uKTtcclxuICAgICAgICBhY3RpdmF0ZXMucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgIG9yaWdpbi5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsgYWN0aXZhdGVzLmNzcygnbWF4LWhlaWdodCcsICcnKTsgfSwgY3Vycl9vcHRpb25zLm91dER1cmF0aW9uKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gSG92ZXJcclxuICAgICAgaWYgKGN1cnJfb3B0aW9ucy5ob3Zlcikge1xyXG4gICAgICAgIHZhciBvcGVuID0gZmFsc2U7XHJcbiAgICAgICAgb3JpZ2luLnVuYmluZCgnY2xpY2suJyArIG9yaWdpbi5hdHRyKCdpZCcpKTtcclxuICAgICAgICAvLyBIb3ZlciBoYW5kbGVyIHRvIHNob3cgZHJvcGRvd25cclxuICAgICAgICBvcmlnaW4ub24oJ21vdXNlZW50ZXInLCBmdW5jdGlvbihlKXsgLy8gTW91c2Ugb3ZlclxyXG4gICAgICAgICAgaWYgKG9wZW4gPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIHBsYWNlRHJvcGRvd24oKTtcclxuICAgICAgICAgICAgb3BlbiA9IHRydWU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgb3JpZ2luLm9uKCdtb3VzZWxlYXZlJywgZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgICAvLyBJZiBob3ZlciBvbiBvcmlnaW4gdGhlbiB0byBzb21ldGhpbmcgb3RoZXIgdGhhbiBkcm9wZG93biBjb250ZW50LCB0aGVuIGNsb3NlXHJcbiAgICAgICAgICB2YXIgdG9FbCA9IGUudG9FbGVtZW50IHx8IGUucmVsYXRlZFRhcmdldDsgLy8gYWRkZWQgYnJvd3NlciBjb21wYXRpYmlsaXR5IGZvciB0YXJnZXQgZWxlbWVudFxyXG4gICAgICAgICAgaWYoISQodG9FbCkuY2xvc2VzdCgnLmRyb3Bkb3duLWNvbnRlbnQnKS5pcyhhY3RpdmF0ZXMpKSB7XHJcbiAgICAgICAgICAgIGFjdGl2YXRlcy5zdG9wKHRydWUsIHRydWUpO1xyXG4gICAgICAgICAgICBoaWRlRHJvcGRvd24oKTtcclxuICAgICAgICAgICAgb3BlbiA9IGZhbHNlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBhY3RpdmF0ZXMub24oJ21vdXNlbGVhdmUnLCBmdW5jdGlvbihlKXsgLy8gTW91c2Ugb3V0XHJcbiAgICAgICAgICB2YXIgdG9FbCA9IGUudG9FbGVtZW50IHx8IGUucmVsYXRlZFRhcmdldDtcclxuICAgICAgICAgIGlmKCEkKHRvRWwpLmNsb3Nlc3QoJy5kcm9wZG93bi1idXR0b24nKS5pcyhvcmlnaW4pKSB7XHJcbiAgICAgICAgICAgIGFjdGl2YXRlcy5zdG9wKHRydWUsIHRydWUpO1xyXG4gICAgICAgICAgICBoaWRlRHJvcGRvd24oKTtcclxuICAgICAgICAgICAgb3BlbiA9IGZhbHNlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBDbGlja1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIENsaWNrIGhhbmRsZXIgdG8gc2hvdyBkcm9wZG93blxyXG4gICAgICAgIG9yaWdpbi51bmJpbmQoJ2NsaWNrLicgKyBvcmlnaW4uYXR0cignaWQnKSk7XHJcbiAgICAgICAgb3JpZ2luLmJpbmQoJ2NsaWNrLicrb3JpZ2luLmF0dHIoJ2lkJyksIGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgICAgaWYgKCFpc0ZvY3VzZWQpIHtcclxuICAgICAgICAgICAgaWYgKCBvcmlnaW5bMF0gPT0gZS5jdXJyZW50VGFyZ2V0ICYmXHJcbiAgICAgICAgICAgICAgICAgIW9yaWdpbi5oYXNDbGFzcygnYWN0aXZlJykgJiZcclxuICAgICAgICAgICAgICAgICAoJChlLnRhcmdldCkuY2xvc2VzdCgnLmRyb3Bkb3duLWNvbnRlbnQnKS5sZW5ndGggPT09IDApKSB7XHJcbiAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOyAvLyBQcmV2ZW50cyBidXR0b24gY2xpY2sgZnJvbSBtb3Zpbmcgd2luZG93XHJcbiAgICAgICAgICAgICAgaWYgKGN1cnJfb3B0aW9ucy5zdG9wUHJvcGFnYXRpb24pIHtcclxuICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIHBsYWNlRHJvcGRvd24oJ2NsaWNrJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gSWYgb3JpZ2luIGlzIGNsaWNrZWQgYW5kIG1lbnUgaXMgb3BlbiwgY2xvc2UgbWVudVxyXG4gICAgICAgICAgICBlbHNlIGlmIChvcmlnaW4uaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICAgaGlkZURyb3Bkb3duKCk7XHJcbiAgICAgICAgICAgICAgJChkb2N1bWVudCkudW5iaW5kKCdjbGljay4nKyBhY3RpdmF0ZXMuYXR0cignaWQnKSArICcgdG91Y2hzdGFydC4nICsgYWN0aXZhdGVzLmF0dHIoJ2lkJykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIElmIG1lbnUgb3BlbiwgYWRkIGNsaWNrIGNsb3NlIGhhbmRsZXIgdG8gZG9jdW1lbnRcclxuICAgICAgICAgICAgaWYgKGFjdGl2YXRlcy5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAkKGRvY3VtZW50KS5iaW5kKCdjbGljay4nKyBhY3RpdmF0ZXMuYXR0cignaWQnKSArICcgdG91Y2hzdGFydC4nICsgYWN0aXZhdGVzLmF0dHIoJ2lkJyksIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWFjdGl2YXRlcy5pcyhlLnRhcmdldCkgJiYgIW9yaWdpbi5pcyhlLnRhcmdldCkgJiYgKCFvcmlnaW4uZmluZChlLnRhcmdldCkubGVuZ3RoKSApIHtcclxuICAgICAgICAgICAgICAgICAgaGlkZURyb3Bkb3duKCk7XHJcbiAgICAgICAgICAgICAgICAgICQoZG9jdW1lbnQpLnVuYmluZCgnY2xpY2suJysgYWN0aXZhdGVzLmF0dHIoJ2lkJykgKyAnIHRvdWNoc3RhcnQuJyArIGFjdGl2YXRlcy5hdHRyKCdpZCcpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgfSAvLyBFbmQgZWxzZVxyXG5cclxuICAgICAgLy8gTGlzdGVuIHRvIG9wZW4gYW5kIGNsb3NlIGV2ZW50IC0gdXNlZnVsIGZvciBzZWxlY3QgY29tcG9uZW50XHJcbiAgICAgIG9yaWdpbi5vbignb3BlbicsIGZ1bmN0aW9uKGUsIGV2ZW50VHlwZSkge1xyXG4gICAgICAgIHBsYWNlRHJvcGRvd24oZXZlbnRUeXBlKTtcclxuICAgICAgfSk7XHJcbiAgICAgIG9yaWdpbi5vbignY2xvc2UnLCBoaWRlRHJvcGRvd24pO1xyXG5cclxuXHJcbiAgICB9KTtcclxuICB9OyAvLyBFbmQgZHJvcGRvd24gcGx1Z2luXHJcblxyXG4gICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCl7XHJcbiAgICAkKCcuZHJvcGRvd24tYnV0dG9uJykuZHJvcGRvd24oKTtcclxuICB9KTtcclxufSggalF1ZXJ5ICkpO1xyXG47KGZ1bmN0aW9uKCQpIHtcclxuICB2YXIgX3N0YWNrID0gMCxcclxuICBfbGFzdElEID0gMCxcclxuICBfZ2VuZXJhdGVJRCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgX2xhc3RJRCsrO1xyXG4gICAgcmV0dXJuICdtYXRlcmlhbGl6ZS1tb2RhbC1vdmVybGF5LScgKyBfbGFzdElEO1xyXG4gIH07XHJcblxyXG4gIHZhciBtZXRob2RzID0ge1xyXG4gICAgaW5pdCA6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcclxuICAgICAgdmFyIGRlZmF1bHRzID0ge1xyXG4gICAgICAgIG9wYWNpdHk6IDAuNSxcclxuICAgICAgICBpbl9kdXJhdGlvbjogMzUwLFxyXG4gICAgICAgIG91dF9kdXJhdGlvbjogMjUwLFxyXG4gICAgICAgIHJlYWR5OiB1bmRlZmluZWQsXHJcbiAgICAgICAgY29tcGxldGU6IHVuZGVmaW5lZCxcclxuICAgICAgICBkaXNtaXNzaWJsZTogdHJ1ZSxcclxuICAgICAgICBzdGFydGluZ190b3A6ICc0JScsXHJcbiAgICAgICAgZW5kaW5nX3RvcDogJzEwJSdcclxuICAgICAgfTtcclxuXHJcbiAgICAgIC8vIE92ZXJyaWRlIGRlZmF1bHRzXHJcbiAgICAgIG9wdGlvbnMgPSAkLmV4dGVuZChkZWZhdWx0cywgb3B0aW9ucyk7XHJcblxyXG4gICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciAkbW9kYWwgPSAkKHRoaXMpO1xyXG4gICAgICAgIHZhciBtb2RhbF9pZCA9ICQodGhpcykuYXR0cihcImlkXCIpIHx8ICcjJyArICQodGhpcykuZGF0YSgndGFyZ2V0Jyk7XHJcblxyXG4gICAgICAgIHZhciBjbG9zZU1vZGFsID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICB2YXIgb3ZlcmxheUlEID0gJG1vZGFsLmRhdGEoJ292ZXJsYXktaWQnKTtcclxuICAgICAgICAgIHZhciAkb3ZlcmxheSA9ICQoJyMnICsgb3ZlcmxheUlEKTtcclxuICAgICAgICAgICRtb2RhbC5yZW1vdmVDbGFzcygnb3BlbicpO1xyXG5cclxuICAgICAgICAgIC8vIEVuYWJsZSBzY3JvbGxpbmdcclxuICAgICAgICAgICQoJ2JvZHknKS5jc3Moe1xyXG4gICAgICAgICAgICBvdmVyZmxvdzogJycsXHJcbiAgICAgICAgICAgIHdpZHRoOiAnJ1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgJG1vZGFsLmZpbmQoJy5tb2RhbC1jbG9zZScpLm9mZignY2xpY2suY2xvc2UnKTtcclxuICAgICAgICAgICQoZG9jdW1lbnQpLm9mZigna2V5dXAubW9kYWwnICsgb3ZlcmxheUlEKTtcclxuXHJcbiAgICAgICAgICAkb3ZlcmxheS52ZWxvY2l0eSggeyBvcGFjaXR5OiAwfSwge2R1cmF0aW9uOiBvcHRpb25zLm91dF9kdXJhdGlvbiwgcXVldWU6IGZhbHNlLCBlYXNlOiBcImVhc2VPdXRRdWFydFwifSk7XHJcblxyXG5cclxuICAgICAgICAgIC8vIERlZmluZSBCb3R0b20gU2hlZXQgYW5pbWF0aW9uXHJcbiAgICAgICAgICB2YXIgZXhpdFZlbG9jaXR5T3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgZHVyYXRpb246IG9wdGlvbnMub3V0X2R1cmF0aW9uLFxyXG4gICAgICAgICAgICBxdWV1ZTogZmFsc2UsXHJcbiAgICAgICAgICAgIGVhc2U6IFwiZWFzZU91dEN1YmljXCIsXHJcbiAgICAgICAgICAgIC8vIEhhbmRsZSBtb2RhbCByZWFkeSBjYWxsYmFja1xyXG4gICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgJCh0aGlzKS5jc3Moe2Rpc3BsYXk6XCJub25lXCJ9KTtcclxuXHJcbiAgICAgICAgICAgICAgLy8gQ2FsbCBjb21wbGV0ZSBjYWxsYmFja1xyXG4gICAgICAgICAgICAgIGlmICh0eXBlb2Yob3B0aW9ucy5jb21wbGV0ZSkgPT09IFwiZnVuY3Rpb25cIikge1xyXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5jb21wbGV0ZS5jYWxsKHRoaXMsICRtb2RhbCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICRvdmVybGF5LnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgIF9zdGFjay0tO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgICAgaWYgKCRtb2RhbC5oYXNDbGFzcygnYm90dG9tLXNoZWV0JykpIHtcclxuICAgICAgICAgICAgJG1vZGFsLnZlbG9jaXR5KHtib3R0b206IFwiLTEwMCVcIiwgb3BhY2l0eTogMH0sIGV4aXRWZWxvY2l0eU9wdGlvbnMpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICRtb2RhbC52ZWxvY2l0eShcclxuICAgICAgICAgICAgICB7IHRvcDogb3B0aW9ucy5zdGFydGluZ190b3AsIG9wYWNpdHk6IDAsIHNjYWxlWDogMC43fSxcclxuICAgICAgICAgICAgICBleGl0VmVsb2NpdHlPcHRpb25zXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIG9wZW5Nb2RhbCA9IGZ1bmN0aW9uKCR0cmlnZ2VyKSB7XHJcbiAgICAgICAgICB2YXIgJGJvZHkgPSAkKCdib2R5Jyk7XHJcbiAgICAgICAgICB2YXIgb2xkV2lkdGggPSAkYm9keS5pbm5lcldpZHRoKCk7XHJcbiAgICAgICAgICAkYm9keS5jc3MoJ292ZXJmbG93JywgJ2hpZGRlbicpO1xyXG4gICAgICAgICAgJGJvZHkud2lkdGgob2xkV2lkdGgpO1xyXG5cclxuICAgICAgICAgIGlmICgkbW9kYWwuaGFzQ2xhc3MoJ29wZW4nKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgdmFyIG92ZXJsYXlJRCA9IF9nZW5lcmF0ZUlEKCk7XHJcbiAgICAgICAgICB2YXIgJG92ZXJsYXkgPSAkKCc8ZGl2IGNsYXNzPVwibW9kYWwtb3ZlcmxheVwiPjwvZGl2PicpO1xyXG4gICAgICAgICAgbFN0YWNrID0gKCsrX3N0YWNrKTtcclxuXHJcbiAgICAgICAgICAvLyBTdG9yZSBhIHJlZmVyZW5jZSBvZiB0aGUgb3ZlcmxheVxyXG4gICAgICAgICAgJG92ZXJsYXkuYXR0cignaWQnLCBvdmVybGF5SUQpLmNzcygnei1pbmRleCcsIDEwMDAgKyBsU3RhY2sgKiAyKTtcclxuICAgICAgICAgICRtb2RhbC5kYXRhKCdvdmVybGF5LWlkJywgb3ZlcmxheUlEKS5jc3MoJ3otaW5kZXgnLCAxMDAwICsgbFN0YWNrICogMiArIDEpO1xyXG4gICAgICAgICAgJG1vZGFsLmFkZENsYXNzKCdvcGVuJyk7XHJcblxyXG4gICAgICAgICAgJChcImJvZHlcIikuYXBwZW5kKCRvdmVybGF5KTtcclxuXHJcbiAgICAgICAgICBpZiAob3B0aW9ucy5kaXNtaXNzaWJsZSkge1xyXG4gICAgICAgICAgICAkb3ZlcmxheS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICBjbG9zZU1vZGFsKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvLyBSZXR1cm4gb24gRVNDXHJcbiAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKCdrZXl1cC5tb2RhbCcgKyBvdmVybGF5SUQsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgICBpZiAoZS5rZXlDb2RlID09PSAyNykgeyAgIC8vIEVTQyBrZXlcclxuICAgICAgICAgICAgICAgIGNsb3NlTW9kYWwoKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICRtb2RhbC5maW5kKFwiLm1vZGFsLWNsb3NlXCIpLm9uKCdjbGljay5jbG9zZScsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgY2xvc2VNb2RhbCgpO1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgJG92ZXJsYXkuY3NzKHsgZGlzcGxheSA6IFwiYmxvY2tcIiwgb3BhY2l0eSA6IDAgfSk7XHJcblxyXG4gICAgICAgICAgJG1vZGFsLmNzcyh7XHJcbiAgICAgICAgICAgIGRpc3BsYXkgOiBcImJsb2NrXCIsXHJcbiAgICAgICAgICAgIG9wYWNpdHk6IDBcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICRvdmVybGF5LnZlbG9jaXR5KHtvcGFjaXR5OiBvcHRpb25zLm9wYWNpdHl9LCB7ZHVyYXRpb246IG9wdGlvbnMuaW5fZHVyYXRpb24sIHF1ZXVlOiBmYWxzZSwgZWFzZTogXCJlYXNlT3V0Q3ViaWNcIn0pO1xyXG4gICAgICAgICAgJG1vZGFsLmRhdGEoJ2Fzc29jaWF0ZWQtb3ZlcmxheScsICRvdmVybGF5WzBdKTtcclxuXHJcbiAgICAgICAgICAvLyBEZWZpbmUgQm90dG9tIFNoZWV0IGFuaW1hdGlvblxyXG4gICAgICAgICAgdmFyIGVudGVyVmVsb2NpdHlPcHRpb25zID0ge1xyXG4gICAgICAgICAgICBkdXJhdGlvbjogb3B0aW9ucy5pbl9kdXJhdGlvbixcclxuICAgICAgICAgICAgcXVldWU6IGZhbHNlLFxyXG4gICAgICAgICAgICBlYXNlOiBcImVhc2VPdXRDdWJpY1wiLFxyXG4gICAgICAgICAgICAvLyBIYW5kbGUgbW9kYWwgcmVhZHkgY2FsbGJhY2tcclxuICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgIGlmICh0eXBlb2Yob3B0aW9ucy5yZWFkeSkgPT09IFwiZnVuY3Rpb25cIikge1xyXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5yZWFkeS5jYWxsKHRoaXMsICRtb2RhbCwgJHRyaWdnZXIpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfTtcclxuICAgICAgICAgIGlmICgkbW9kYWwuaGFzQ2xhc3MoJ2JvdHRvbS1zaGVldCcpKSB7XHJcbiAgICAgICAgICAgICRtb2RhbC52ZWxvY2l0eSh7Ym90dG9tOiBcIjBcIiwgb3BhY2l0eTogMX0sIGVudGVyVmVsb2NpdHlPcHRpb25zKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAkLlZlbG9jaXR5Lmhvb2soJG1vZGFsLCBcInNjYWxlWFwiLCAwLjcpO1xyXG4gICAgICAgICAgICAkbW9kYWwuY3NzKHsgdG9wOiBvcHRpb25zLnN0YXJ0aW5nX3RvcCB9KTtcclxuICAgICAgICAgICAgJG1vZGFsLnZlbG9jaXR5KHt0b3A6IG9wdGlvbnMuZW5kaW5nX3RvcCwgb3BhY2l0eTogMSwgc2NhbGVYOiAnMSd9LCBlbnRlclZlbG9jaXR5T3B0aW9ucyk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIFJlc2V0IGhhbmRsZXJzXHJcbiAgICAgICAgJChkb2N1bWVudCkub2ZmKCdjbGljay5tb2RhbFRyaWdnZXInLCAnYVtocmVmPVwiIycgKyBtb2RhbF9pZCArICdcIl0sIFtkYXRhLXRhcmdldD1cIicgKyBtb2RhbF9pZCArICdcIl0nKTtcclxuICAgICAgICAkKHRoaXMpLm9mZignb3Blbk1vZGFsJyk7XHJcbiAgICAgICAgJCh0aGlzKS5vZmYoJ2Nsb3NlTW9kYWwnKTtcclxuXHJcbiAgICAgICAgLy8gQ2xvc2UgSGFuZGxlcnNcclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2subW9kYWxUcmlnZ2VyJywgJ2FbaHJlZj1cIiMnICsgbW9kYWxfaWQgKyAnXCJdLCBbZGF0YS10YXJnZXQ9XCInICsgbW9kYWxfaWQgKyAnXCJdJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgb3B0aW9ucy5zdGFydGluZ190b3AgPSAoJCh0aGlzKS5vZmZzZXQoKS50b3AgLSAkKHdpbmRvdykuc2Nyb2xsVG9wKCkpIC8xLjE1O1xyXG4gICAgICAgICAgb3Blbk1vZGFsKCQodGhpcykpO1xyXG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIH0pOyAvLyBkb25lIHNldCBvbiBjbGlja1xyXG5cclxuICAgICAgICAkKHRoaXMpLm9uKCdvcGVuTW9kYWwnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHZhciBtb2RhbF9pZCA9ICQodGhpcykuYXR0cihcImhyZWZcIikgfHwgJyMnICsgJCh0aGlzKS5kYXRhKCd0YXJnZXQnKTtcclxuICAgICAgICAgIG9wZW5Nb2RhbCgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkKHRoaXMpLm9uKCdjbG9zZU1vZGFsJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBjbG9zZU1vZGFsKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pOyAvLyBkb25lIHJldHVyblxyXG4gICAgfSxcclxuICAgIG9wZW4gOiBmdW5jdGlvbigpIHtcclxuICAgICAgJCh0aGlzKS50cmlnZ2VyKCdvcGVuTW9kYWwnKTtcclxuICAgIH0sXHJcbiAgICBjbG9zZSA6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAkKHRoaXMpLnRyaWdnZXIoJ2Nsb3NlTW9kYWwnKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAkLmZuLm1vZGFsID0gZnVuY3Rpb24obWV0aG9kT3JPcHRpb25zKSB7XHJcbiAgICBpZiAoIG1ldGhvZHNbbWV0aG9kT3JPcHRpb25zXSApIHtcclxuICAgICAgcmV0dXJuIG1ldGhvZHNbIG1ldGhvZE9yT3B0aW9ucyBdLmFwcGx5KCB0aGlzLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCggYXJndW1lbnRzLCAxICkpO1xyXG4gICAgfSBlbHNlIGlmICggdHlwZW9mIG1ldGhvZE9yT3B0aW9ucyA9PT0gJ29iamVjdCcgfHwgISBtZXRob2RPck9wdGlvbnMgKSB7XHJcbiAgICAgIC8vIERlZmF1bHQgdG8gXCJpbml0XCJcclxuICAgICAgcmV0dXJuIG1ldGhvZHMuaW5pdC5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAkLmVycm9yKCAnTWV0aG9kICcgKyAgbWV0aG9kT3JPcHRpb25zICsgJyBkb2VzIG5vdCBleGlzdCBvbiBqUXVlcnkubW9kYWwnICk7XHJcbiAgICB9XHJcbiAgfTtcclxufSkoalF1ZXJ5KTtcclxuOyhmdW5jdGlvbiAoJCkge1xyXG5cclxuICAkLmZuLm1hdGVyaWFsYm94ID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcygnaW5pdGlhbGl6ZWQnKSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgJCh0aGlzKS5hZGRDbGFzcygnaW5pdGlhbGl6ZWQnKTtcclxuXHJcbiAgICAgIHZhciBvdmVybGF5QWN0aXZlID0gZmFsc2U7XHJcbiAgICAgIHZhciBkb25lQW5pbWF0aW5nID0gdHJ1ZTtcclxuICAgICAgdmFyIGluRHVyYXRpb24gPSAyNzU7XHJcbiAgICAgIHZhciBvdXREdXJhdGlvbiA9IDIwMDtcclxuICAgICAgdmFyIG9yaWdpbiA9ICQodGhpcyk7XHJcbiAgICAgIHZhciBwbGFjZWhvbGRlciA9ICQoJzxkaXY+PC9kaXY+JykuYWRkQ2xhc3MoJ21hdGVyaWFsLXBsYWNlaG9sZGVyJyk7XHJcbiAgICAgIHZhciBvcmlnaW5hbFdpZHRoID0gMDtcclxuICAgICAgdmFyIG9yaWdpbmFsSGVpZ2h0ID0gMDtcclxuICAgICAgdmFyIGFuY2VzdG9yc0NoYW5nZWQ7XHJcbiAgICAgIHZhciBhbmNlc3RvcjtcclxuICAgICAgb3JpZ2luLndyYXAocGxhY2Vob2xkZXIpO1xyXG5cclxuXHJcbiAgICAgIG9yaWdpbi5vbignY2xpY2snLCBmdW5jdGlvbigpe1xyXG4gICAgICAgIHZhciBwbGFjZWhvbGRlciA9IG9yaWdpbi5wYXJlbnQoJy5tYXRlcmlhbC1wbGFjZWhvbGRlcicpO1xyXG4gICAgICAgIHZhciB3aW5kb3dXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xyXG4gICAgICAgIHZhciB3aW5kb3dIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcbiAgICAgICAgdmFyIG9yaWdpbmFsV2lkdGggPSBvcmlnaW4ud2lkdGgoKTtcclxuICAgICAgICB2YXIgb3JpZ2luYWxIZWlnaHQgPSBvcmlnaW4uaGVpZ2h0KCk7XHJcblxyXG5cclxuICAgICAgICAvLyBJZiBhbHJlYWR5IG1vZGFsLCByZXR1cm4gdG8gb3JpZ2luYWxcclxuICAgICAgICBpZiAoZG9uZUFuaW1hdGluZyA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgIHJldHVyblRvT3JpZ2luYWwoKTtcclxuICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAob3ZlcmxheUFjdGl2ZSAmJiBkb25lQW5pbWF0aW5nPT09dHJ1ZSkge1xyXG4gICAgICAgICAgcmV0dXJuVG9PcmlnaW5hbCgpO1xyXG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIC8vIFNldCBzdGF0ZXNcclxuICAgICAgICBkb25lQW5pbWF0aW5nID0gZmFsc2U7XHJcbiAgICAgICAgb3JpZ2luLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICBvdmVybGF5QWN0aXZlID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgLy8gU2V0IHBvc2l0aW9uaW5nIGZvciBwbGFjZWhvbGRlclxyXG4gICAgICAgIHBsYWNlaG9sZGVyLmNzcyh7XHJcbiAgICAgICAgICB3aWR0aDogcGxhY2Vob2xkZXJbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGgsXHJcbiAgICAgICAgICBoZWlnaHQ6IHBsYWNlaG9sZGVyWzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodCxcclxuICAgICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxyXG4gICAgICAgICAgdG9wOiAwLFxyXG4gICAgICAgICAgbGVmdDogMFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBGaW5kIGFuY2VzdG9yIHdpdGggb3ZlcmZsb3c6IGhpZGRlbjsgYW5kIHJlbW92ZSBpdFxyXG4gICAgICAgIGFuY2VzdG9yc0NoYW5nZWQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgYW5jZXN0b3IgPSBwbGFjZWhvbGRlclswXS5wYXJlbnROb2RlO1xyXG4gICAgICAgIHZhciBjb3VudCA9IDA7XHJcbiAgICAgICAgd2hpbGUgKGFuY2VzdG9yICE9PSBudWxsICYmICEkKGFuY2VzdG9yKS5pcyhkb2N1bWVudCkpIHtcclxuICAgICAgICAgIHZhciBjdXJyID0gJChhbmNlc3Rvcik7XHJcbiAgICAgICAgICBpZiAoY3Vyci5jc3MoJ292ZXJmbG93JykgIT09ICd2aXNpYmxlJykge1xyXG4gICAgICAgICAgICBjdXJyLmNzcygnb3ZlcmZsb3cnLCAndmlzaWJsZScpO1xyXG4gICAgICAgICAgICBpZiAoYW5jZXN0b3JzQ2hhbmdlZCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgYW5jZXN0b3JzQ2hhbmdlZCA9IGN1cnI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgYW5jZXN0b3JzQ2hhbmdlZCA9IGFuY2VzdG9yc0NoYW5nZWQuYWRkKGN1cnIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBhbmNlc3RvciA9IGFuY2VzdG9yLnBhcmVudE5vZGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBTZXQgY3NzIG9uIG9yaWdpblxyXG4gICAgICAgIG9yaWdpbi5jc3Moe3Bvc2l0aW9uOiAnYWJzb2x1dGUnLCAnei1pbmRleCc6IDEwMDB9KVxyXG4gICAgICAgIC5kYXRhKCd3aWR0aCcsIG9yaWdpbmFsV2lkdGgpXHJcbiAgICAgICAgLmRhdGEoJ2hlaWdodCcsIG9yaWdpbmFsSGVpZ2h0KTtcclxuXHJcbiAgICAgICAgLy8gQWRkIG92ZXJsYXlcclxuICAgICAgICB2YXIgb3ZlcmxheSA9ICQoJzxkaXYgaWQ9XCJtYXRlcmlhbGJveC1vdmVybGF5XCI+PC9kaXY+JylcclxuICAgICAgICAgIC5jc3Moe1xyXG4gICAgICAgICAgICBvcGFjaXR5OiAwXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmNsaWNrKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIGlmIChkb25lQW5pbWF0aW5nID09PSB0cnVlKVxyXG4gICAgICAgICAgICByZXR1cm5Ub09yaWdpbmFsKCk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIC8vIEFuaW1hdGUgT3ZlcmxheVxyXG4gICAgICAgICAgLy8gUHV0IGJlZm9yZSBpbiBvcmlnaW4gaW1hZ2UgdG8gcHJlc2VydmUgei1pbmRleCBsYXllcmluZy5cclxuICAgICAgICAgIG9yaWdpbi5iZWZvcmUob3ZlcmxheSk7XHJcbiAgICAgICAgICBvdmVybGF5LnZlbG9jaXR5KHtvcGFjaXR5OiAxfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAge2R1cmF0aW9uOiBpbkR1cmF0aW9uLCBxdWV1ZTogZmFsc2UsIGVhc2luZzogJ2Vhc2VPdXRRdWFkJ30gKTtcclxuXHJcbiAgICAgICAgLy8gQWRkIGFuZCBhbmltYXRlIGNhcHRpb24gaWYgaXQgZXhpc3RzXHJcbiAgICAgICAgaWYgKG9yaWdpbi5kYXRhKCdjYXB0aW9uJykgIT09IFwiXCIpIHtcclxuICAgICAgICAgIHZhciAkcGhvdG9fY2FwdGlvbiA9ICQoJzxkaXYgY2xhc3M9XCJtYXRlcmlhbGJveC1jYXB0aW9uXCI+PC9kaXY+Jyk7XHJcbiAgICAgICAgICAkcGhvdG9fY2FwdGlvbi50ZXh0KG9yaWdpbi5kYXRhKCdjYXB0aW9uJykpO1xyXG4gICAgICAgICAgJCgnYm9keScpLmFwcGVuZCgkcGhvdG9fY2FwdGlvbik7XHJcbiAgICAgICAgICAkcGhvdG9fY2FwdGlvbi5jc3MoeyBcImRpc3BsYXlcIjogXCJpbmxpbmVcIiB9KTtcclxuICAgICAgICAgICRwaG90b19jYXB0aW9uLnZlbG9jaXR5KHtvcGFjaXR5OiAxfSwge2R1cmF0aW9uOiBpbkR1cmF0aW9uLCBxdWV1ZTogZmFsc2UsIGVhc2luZzogJ2Vhc2VPdXRRdWFkJ30pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUmVzaXplIEltYWdlXHJcbiAgICAgICAgdmFyIHJhdGlvID0gMDtcclxuICAgICAgICB2YXIgd2lkdGhQZXJjZW50ID0gb3JpZ2luYWxXaWR0aCAvIHdpbmRvd1dpZHRoO1xyXG4gICAgICAgIHZhciBoZWlnaHRQZXJjZW50ID0gb3JpZ2luYWxIZWlnaHQgLyB3aW5kb3dIZWlnaHQ7XHJcbiAgICAgICAgdmFyIG5ld1dpZHRoID0gMDtcclxuICAgICAgICB2YXIgbmV3SGVpZ2h0ID0gMDtcclxuXHJcbiAgICAgICAgaWYgKHdpZHRoUGVyY2VudCA+IGhlaWdodFBlcmNlbnQpIHtcclxuICAgICAgICAgIHJhdGlvID0gb3JpZ2luYWxIZWlnaHQgLyBvcmlnaW5hbFdpZHRoO1xyXG4gICAgICAgICAgbmV3V2lkdGggPSB3aW5kb3dXaWR0aCAqIDAuOTtcclxuICAgICAgICAgIG5ld0hlaWdodCA9IHdpbmRvd1dpZHRoICogMC45ICogcmF0aW87XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgcmF0aW8gPSBvcmlnaW5hbFdpZHRoIC8gb3JpZ2luYWxIZWlnaHQ7XHJcbiAgICAgICAgICBuZXdXaWR0aCA9ICh3aW5kb3dIZWlnaHQgKiAwLjkpICogcmF0aW87XHJcbiAgICAgICAgICBuZXdIZWlnaHQgPSB3aW5kb3dIZWlnaHQgKiAwLjk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBBbmltYXRlIGltYWdlICsgc2V0IHotaW5kZXhcclxuICAgICAgICBpZihvcmlnaW4uaGFzQ2xhc3MoJ3Jlc3BvbnNpdmUtaW1nJykpIHtcclxuICAgICAgICAgIG9yaWdpbi52ZWxvY2l0eSh7J21heC13aWR0aCc6IG5ld1dpZHRoLCAnd2lkdGgnOiBvcmlnaW5hbFdpZHRofSwge2R1cmF0aW9uOiAwLCBxdWV1ZTogZmFsc2UsXHJcbiAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgIG9yaWdpbi5jc3Moe2xlZnQ6IDAsIHRvcDogMH0pXHJcbiAgICAgICAgICAgICAgLnZlbG9jaXR5KFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICBoZWlnaHQ6IG5ld0hlaWdodCxcclxuICAgICAgICAgICAgICAgICAgd2lkdGg6IG5ld1dpZHRoLFxyXG4gICAgICAgICAgICAgICAgICBsZWZ0OiAkKGRvY3VtZW50KS5zY3JvbGxMZWZ0KCkgKyB3aW5kb3dXaWR0aC8yIC0gb3JpZ2luLnBhcmVudCgnLm1hdGVyaWFsLXBsYWNlaG9sZGVyJykub2Zmc2V0KCkubGVmdCAtIG5ld1dpZHRoLzIsXHJcbiAgICAgICAgICAgICAgICAgIHRvcDogJChkb2N1bWVudCkuc2Nyb2xsVG9wKCkgKyB3aW5kb3dIZWlnaHQvMiAtIG9yaWdpbi5wYXJlbnQoJy5tYXRlcmlhbC1wbGFjZWhvbGRlcicpLm9mZnNldCgpLnRvcCAtIG5ld0hlaWdodC8gMlxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgZHVyYXRpb246IGluRHVyYXRpb24sXHJcbiAgICAgICAgICAgICAgICAgIHF1ZXVlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgZWFzaW5nOiAnZWFzZU91dFF1YWQnLFxyXG4gICAgICAgICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24oKXtkb25lQW5pbWF0aW5nID0gdHJ1ZTt9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSAvLyBFbmQgQ29tcGxldGVcclxuICAgICAgICAgIH0pOyAvLyBFbmQgVmVsb2NpdHlcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICBvcmlnaW4uY3NzKCdsZWZ0JywgMClcclxuICAgICAgICAgIC5jc3MoJ3RvcCcsIDApXHJcbiAgICAgICAgICAudmVsb2NpdHkoXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBoZWlnaHQ6IG5ld0hlaWdodCxcclxuICAgICAgICAgICAgICB3aWR0aDogbmV3V2lkdGgsXHJcbiAgICAgICAgICAgICAgbGVmdDogJChkb2N1bWVudCkuc2Nyb2xsTGVmdCgpICsgd2luZG93V2lkdGgvMiAtIG9yaWdpbi5wYXJlbnQoJy5tYXRlcmlhbC1wbGFjZWhvbGRlcicpLm9mZnNldCgpLmxlZnQgLSBuZXdXaWR0aC8yLFxyXG4gICAgICAgICAgICAgIHRvcDogJChkb2N1bWVudCkuc2Nyb2xsVG9wKCkgKyB3aW5kb3dIZWlnaHQvMiAtIG9yaWdpbi5wYXJlbnQoJy5tYXRlcmlhbC1wbGFjZWhvbGRlcicpLm9mZnNldCgpLnRvcCAtIG5ld0hlaWdodC8gMlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgZHVyYXRpb246IGluRHVyYXRpb24sXHJcbiAgICAgICAgICAgICAgcXVldWU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRRdWFkJyxcclxuICAgICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24oKXtkb25lQW5pbWF0aW5nID0gdHJ1ZTt9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKTsgLy8gRW5kIFZlbG9jaXR5XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0pOyAvLyBFbmQgb3JpZ2luIG9uIGNsaWNrXHJcblxyXG5cclxuICAgICAgLy8gUmV0dXJuIG9uIHNjcm9sbFxyXG4gICAgICAkKHdpbmRvdykuc2Nyb2xsKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmIChvdmVybGF5QWN0aXZlKSB7XHJcbiAgICAgICAgICByZXR1cm5Ub09yaWdpbmFsKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIFJldHVybiBvbiBFU0NcclxuICAgICAgJChkb2N1bWVudCkua2V5dXAoZnVuY3Rpb24oZSkge1xyXG5cclxuICAgICAgICBpZiAoZS5rZXlDb2RlID09PSAyNyAmJiBkb25lQW5pbWF0aW5nID09PSB0cnVlKSB7ICAgLy8gRVNDIGtleVxyXG4gICAgICAgICAgaWYgKG92ZXJsYXlBY3RpdmUpIHtcclxuICAgICAgICAgICAgcmV0dXJuVG9PcmlnaW5hbCgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgLy8gVGhpcyBmdW5jdGlvbiByZXR1cm5zIHRoZSBtb2RhbGVkIGltYWdlIHRvIHRoZSBvcmlnaW5hbCBzcG90XHJcbiAgICAgIGZ1bmN0aW9uIHJldHVyblRvT3JpZ2luYWwoKSB7XHJcblxyXG4gICAgICAgICAgZG9uZUFuaW1hdGluZyA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgIHZhciBwbGFjZWhvbGRlciA9IG9yaWdpbi5wYXJlbnQoJy5tYXRlcmlhbC1wbGFjZWhvbGRlcicpO1xyXG4gICAgICAgICAgdmFyIHdpbmRvd1dpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XHJcbiAgICAgICAgICB2YXIgd2luZG93SGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xyXG4gICAgICAgICAgdmFyIG9yaWdpbmFsV2lkdGggPSBvcmlnaW4uZGF0YSgnd2lkdGgnKTtcclxuICAgICAgICAgIHZhciBvcmlnaW5hbEhlaWdodCA9IG9yaWdpbi5kYXRhKCdoZWlnaHQnKTtcclxuXHJcbiAgICAgICAgICBvcmlnaW4udmVsb2NpdHkoXCJzdG9wXCIsIHRydWUpO1xyXG4gICAgICAgICAgJCgnI21hdGVyaWFsYm94LW92ZXJsYXknKS52ZWxvY2l0eShcInN0b3BcIiwgdHJ1ZSk7XHJcbiAgICAgICAgICAkKCcubWF0ZXJpYWxib3gtY2FwdGlvbicpLnZlbG9jaXR5KFwic3RvcFwiLCB0cnVlKTtcclxuXHJcblxyXG4gICAgICAgICAgJCgnI21hdGVyaWFsYm94LW92ZXJsYXknKS52ZWxvY2l0eSh7b3BhY2l0eTogMH0sIHtcclxuICAgICAgICAgICAgZHVyYXRpb246IG91dER1cmF0aW9uLCAvLyBEZWxheSBwcmV2ZW50cyBhbmltYXRpb24gb3ZlcmxhcHBpbmdcclxuICAgICAgICAgICAgcXVldWU6IGZhbHNlLCBlYXNpbmc6ICdlYXNlT3V0UXVhZCcsXHJcbiAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgIC8vIFJlbW92ZSBPdmVybGF5XHJcbiAgICAgICAgICAgICAgb3ZlcmxheUFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICQodGhpcykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgIC8vIFJlc2l6ZSBJbWFnZVxyXG4gICAgICAgICAgb3JpZ2luLnZlbG9jaXR5KFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgd2lkdGg6IG9yaWdpbmFsV2lkdGgsXHJcbiAgICAgICAgICAgICAgaGVpZ2h0OiBvcmlnaW5hbEhlaWdodCxcclxuICAgICAgICAgICAgICBsZWZ0OiAwLFxyXG4gICAgICAgICAgICAgIHRvcDogMFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgZHVyYXRpb246IG91dER1cmF0aW9uLFxyXG4gICAgICAgICAgICAgIHF1ZXVlOiBmYWxzZSwgZWFzaW5nOiAnZWFzZU91dFF1YWQnXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgLy8gUmVtb3ZlIENhcHRpb24gKyByZXNldCBjc3Mgc2V0dGluZ3Mgb24gaW1hZ2VcclxuICAgICAgICAgICQoJy5tYXRlcmlhbGJveC1jYXB0aW9uJykudmVsb2NpdHkoe29wYWNpdHk6IDB9LCB7XHJcbiAgICAgICAgICAgIGR1cmF0aW9uOiBvdXREdXJhdGlvbiwgLy8gRGVsYXkgcHJldmVudHMgYW5pbWF0aW9uIG92ZXJsYXBwaW5nXHJcbiAgICAgICAgICAgIHF1ZXVlOiBmYWxzZSwgZWFzaW5nOiAnZWFzZU91dFF1YWQnLFxyXG4gICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICBwbGFjZWhvbGRlci5jc3Moe1xyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAnJyxcclxuICAgICAgICAgICAgICAgIHdpZHRoOiAnJyxcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAnJyxcclxuICAgICAgICAgICAgICAgIHRvcDogJycsXHJcbiAgICAgICAgICAgICAgICBsZWZ0OiAnJ1xyXG4gICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICBvcmlnaW4uY3NzKHtcclxuICAgICAgICAgICAgICAgIGhlaWdodDogJycsXHJcbiAgICAgICAgICAgICAgICB0b3A6ICcnLFxyXG4gICAgICAgICAgICAgICAgbGVmdDogJycsXHJcbiAgICAgICAgICAgICAgICB3aWR0aDogJycsXHJcbiAgICAgICAgICAgICAgICAnbWF4LXdpZHRoJzogJycsXHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogJycsXHJcbiAgICAgICAgICAgICAgICAnei1pbmRleCc6ICcnXHJcbiAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgIC8vIFJlbW92ZSBjbGFzc1xyXG4gICAgICAgICAgICAgIG9yaWdpbi5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgZG9uZUFuaW1hdGluZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmUoKTtcclxuXHJcbiAgICAgICAgICAgICAgLy8gUmVtb3ZlIG92ZXJmbG93IG92ZXJyaWRlcyBvbiBhbmNlc3RvcnNcclxuICAgICAgICAgICAgICBpZiAoYW5jZXN0b3JzQ2hhbmdlZCkge1xyXG4gICAgICAgICAgICAgICAgYW5jZXN0b3JzQ2hhbmdlZC5jc3MoJ292ZXJmbG93JywgJycpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH1cclxuICAgICAgICB9KTtcclxufTtcclxuXHJcbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCl7XHJcbiAgJCgnLm1hdGVyaWFsYm94ZWQnKS5tYXRlcmlhbGJveCgpO1xyXG59KTtcclxuXHJcbn0oIGpRdWVyeSApKTtcclxuOyhmdW5jdGlvbiAoJCkge1xyXG5cclxuICAgICQuZm4ucGFyYWxsYXggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHZhciB3aW5kb3dfd2lkdGggPSAkKHdpbmRvdykud2lkdGgoKTtcclxuICAgICAgLy8gUGFyYWxsYXggU2NyaXB0c1xyXG4gICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGkpIHtcclxuICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xyXG4gICAgICAgICR0aGlzLmFkZENsYXNzKCdwYXJhbGxheCcpO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVQYXJhbGxheChpbml0aWFsKSB7XHJcbiAgICAgICAgICB2YXIgY29udGFpbmVyX2hlaWdodDtcclxuICAgICAgICAgIGlmICh3aW5kb3dfd2lkdGggPCA2MDEpIHtcclxuICAgICAgICAgICAgY29udGFpbmVyX2hlaWdodCA9ICgkdGhpcy5oZWlnaHQoKSA+IDApID8gJHRoaXMuaGVpZ2h0KCkgOiAkdGhpcy5jaGlsZHJlbihcImltZ1wiKS5oZWlnaHQoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb250YWluZXJfaGVpZ2h0ID0gKCR0aGlzLmhlaWdodCgpID4gMCkgPyAkdGhpcy5oZWlnaHQoKSA6IDUwMDtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHZhciAkaW1nID0gJHRoaXMuY2hpbGRyZW4oXCJpbWdcIikuZmlyc3QoKTtcclxuICAgICAgICAgIHZhciBpbWdfaGVpZ2h0ID0gJGltZy5oZWlnaHQoKTtcclxuICAgICAgICAgIHZhciBwYXJhbGxheF9kaXN0ID0gaW1nX2hlaWdodCAtIGNvbnRhaW5lcl9oZWlnaHQ7XHJcbiAgICAgICAgICB2YXIgYm90dG9tID0gJHRoaXMub2Zmc2V0KCkudG9wICsgY29udGFpbmVyX2hlaWdodDtcclxuICAgICAgICAgIHZhciB0b3AgPSAkdGhpcy5vZmZzZXQoKS50b3A7XHJcbiAgICAgICAgICB2YXIgc2Nyb2xsVG9wID0gJCh3aW5kb3cpLnNjcm9sbFRvcCgpO1xyXG4gICAgICAgICAgdmFyIHdpbmRvd0hlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcclxuICAgICAgICAgIHZhciB3aW5kb3dCb3R0b20gPSBzY3JvbGxUb3AgKyB3aW5kb3dIZWlnaHQ7XHJcbiAgICAgICAgICB2YXIgcGVyY2VudFNjcm9sbGVkID0gKHdpbmRvd0JvdHRvbSAtIHRvcCkgLyAoY29udGFpbmVyX2hlaWdodCArIHdpbmRvd0hlaWdodCk7XHJcbiAgICAgICAgICB2YXIgcGFyYWxsYXggPSBNYXRoLnJvdW5kKChwYXJhbGxheF9kaXN0ICogcGVyY2VudFNjcm9sbGVkKSk7XHJcblxyXG4gICAgICAgICAgaWYgKGluaXRpYWwpIHtcclxuICAgICAgICAgICAgJGltZy5jc3MoJ2Rpc3BsYXknLCAnYmxvY2snKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGlmICgoYm90dG9tID4gc2Nyb2xsVG9wKSAmJiAodG9wIDwgKHNjcm9sbFRvcCArIHdpbmRvd0hlaWdodCkpKSB7XHJcbiAgICAgICAgICAgICRpbWcuY3NzKCd0cmFuc2Zvcm0nLCBcInRyYW5zbGF0ZTNEKC01MCUsXCIgKyBwYXJhbGxheCArIFwicHgsIDApXCIpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFdhaXQgZm9yIGltYWdlIGxvYWRcclxuICAgICAgICAkdGhpcy5jaGlsZHJlbihcImltZ1wiKS5vbmUoXCJsb2FkXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgdXBkYXRlUGFyYWxsYXgodHJ1ZSk7XHJcbiAgICAgICAgfSkuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGlmICh0aGlzLmNvbXBsZXRlKSAkKHRoaXMpLnRyaWdnZXIoXCJsb2FkXCIpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkKHdpbmRvdykuc2Nyb2xsKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgd2luZG93X3dpZHRoID0gJCh3aW5kb3cpLndpZHRoKCk7XHJcbiAgICAgICAgICB1cGRhdGVQYXJhbGxheChmYWxzZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICQod2luZG93KS5yZXNpemUoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICB3aW5kb3dfd2lkdGggPSAkKHdpbmRvdykud2lkdGgoKTtcclxuICAgICAgICAgIHVwZGF0ZVBhcmFsbGF4KGZhbHNlKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgIH0pO1xyXG5cclxuICAgIH07XHJcbn0oIGpRdWVyeSApKTtcclxuOyhmdW5jdGlvbiAoJCkge1xyXG5cclxuICB2YXIgbWV0aG9kcyA9IHtcclxuICAgIGluaXQgOiBmdW5jdGlvbihvcHRpb25zKSB7XHJcbiAgICAgIHZhciBkZWZhdWx0cyA9IHtcclxuICAgICAgICBvblNob3c6IG51bGxcclxuICAgICAgfTtcclxuICAgICAgb3B0aW9ucyA9ICQuZXh0ZW5kKGRlZmF1bHRzLCBvcHRpb25zKTtcclxuXHJcbiAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAvLyBGb3IgZWFjaCBzZXQgb2YgdGFicywgd2Ugd2FudCB0byBrZWVwIHRyYWNrIG9mXHJcbiAgICAgIC8vIHdoaWNoIHRhYiBpcyBhY3RpdmUgYW5kIGl0cyBhc3NvY2lhdGVkIGNvbnRlbnRcclxuICAgICAgdmFyICR0aGlzID0gJCh0aGlzKSxcclxuICAgICAgICAgIHdpbmRvd193aWR0aCA9ICQod2luZG93KS53aWR0aCgpO1xyXG5cclxuICAgICAgdmFyICRhY3RpdmUsICRjb250ZW50LCAkbGlua3MgPSAkdGhpcy5maW5kKCdsaS50YWIgYScpLFxyXG4gICAgICAgICAgJHRhYnNfd2lkdGggPSAkdGhpcy53aWR0aCgpLFxyXG4gICAgICAgICAgJHRhYl93aWR0aCA9IE1hdGgubWF4KCR0YWJzX3dpZHRoLCAkdGhpc1swXS5zY3JvbGxXaWR0aCkgLyAkbGlua3MubGVuZ3RoLFxyXG4gICAgICAgICAgJGluZGV4ID0gMDtcclxuXHJcbiAgICAgIC8vIEZpbmRzIHJpZ2h0IGF0dHJpYnV0ZSBmb3IgaW5kaWNhdG9yIGJhc2VkIG9uIGFjdGl2ZSB0YWIuXHJcbiAgICAgIC8vIGVsOiBqUXVlcnkgT2JqZWN0XHJcbiAgICAgIHZhciBjYWxjUmlnaHRQb3MgPSBmdW5jdGlvbihlbCkge1xyXG4gICAgICAgIHJldHVybiAkdGFic193aWR0aCAtIGVsLnBvc2l0aW9uKCkubGVmdCAtIGVsLm91dGVyV2lkdGgoKSAtICR0aGlzLnNjcm9sbExlZnQoKTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIC8vIEZpbmRzIGxlZnQgYXR0cmlidXRlIGZvciBpbmRpY2F0b3IgYmFzZWQgb24gYWN0aXZlIHRhYi5cclxuICAgICAgLy8gZWw6IGpRdWVyeSBPYmplY3RcclxuICAgICAgdmFyIGNhbGNMZWZ0UG9zID0gZnVuY3Rpb24oZWwpIHtcclxuICAgICAgICByZXR1cm4gZWwucG9zaXRpb24oKS5sZWZ0ICsgJHRoaXMuc2Nyb2xsTGVmdCgpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgLy8gSWYgdGhlIGxvY2F0aW9uLmhhc2ggbWF0Y2hlcyBvbmUgb2YgdGhlIGxpbmtzLCB1c2UgdGhhdCBhcyB0aGUgYWN0aXZlIHRhYi5cclxuICAgICAgJGFjdGl2ZSA9ICQoJGxpbmtzLmZpbHRlcignW2hyZWY9XCInK2xvY2F0aW9uLmhhc2grJ1wiXScpKTtcclxuXHJcbiAgICAgIC8vIElmIG5vIG1hdGNoIGlzIGZvdW5kLCB1c2UgdGhlIGZpcnN0IGxpbmsgb3IgYW55IHdpdGggY2xhc3MgJ2FjdGl2ZScgYXMgdGhlIGluaXRpYWwgYWN0aXZlIHRhYi5cclxuICAgICAgaWYgKCRhY3RpdmUubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgJGFjdGl2ZSA9ICQodGhpcykuZmluZCgnbGkudGFiIGEuYWN0aXZlJykuZmlyc3QoKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoJGFjdGl2ZS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAkYWN0aXZlID0gJCh0aGlzKS5maW5kKCdsaS50YWIgYScpLmZpcnN0KCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgICRhY3RpdmUuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAkaW5kZXggPSAkbGlua3MuaW5kZXgoJGFjdGl2ZSk7XHJcbiAgICAgIGlmICgkaW5kZXggPCAwKSB7XHJcbiAgICAgICAgJGluZGV4ID0gMDtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKCRhY3RpdmVbMF0gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICRjb250ZW50ID0gJCgkYWN0aXZlWzBdLmhhc2gpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBhcHBlbmQgaW5kaWNhdG9yIHRoZW4gc2V0IGluZGljYXRvciB3aWR0aCB0byB0YWIgd2lkdGhcclxuICAgICAgJHRoaXMuYXBwZW5kKCc8ZGl2IGNsYXNzPVwiaW5kaWNhdG9yXCI+PC9kaXY+Jyk7XHJcbiAgICAgIHZhciAkaW5kaWNhdG9yID0gJHRoaXMuZmluZCgnLmluZGljYXRvcicpO1xyXG4gICAgICBpZiAoJHRoaXMuaXMoXCI6dmlzaWJsZVwiKSkge1xyXG4gICAgICAgIC8vICRpbmRpY2F0b3IuY3NzKHtcInJpZ2h0XCI6ICR0YWJzX3dpZHRoIC0gKCgkaW5kZXggKyAxKSAqICR0YWJfd2lkdGgpfSk7XHJcbiAgICAgICAgLy8gJGluZGljYXRvci5jc3Moe1wibGVmdFwiOiAkaW5kZXggKiAkdGFiX3dpZHRofSk7XHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICRpbmRpY2F0b3IuY3NzKHtcInJpZ2h0XCI6IGNhbGNSaWdodFBvcygkYWN0aXZlKSB9KTtcclxuICAgICAgICAgICRpbmRpY2F0b3IuY3NzKHtcImxlZnRcIjogY2FsY0xlZnRQb3MoJGFjdGl2ZSkgfSk7XHJcbiAgICAgICAgfSwgMCk7XHJcbiAgICAgIH1cclxuICAgICAgJCh3aW5kb3cpLnJlc2l6ZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJHRhYnNfd2lkdGggPSAkdGhpcy53aWR0aCgpO1xyXG4gICAgICAgICR0YWJfd2lkdGggPSBNYXRoLm1heCgkdGFic193aWR0aCwgJHRoaXNbMF0uc2Nyb2xsV2lkdGgpIC8gJGxpbmtzLmxlbmd0aDtcclxuICAgICAgICBpZiAoJGluZGV4IDwgMCkge1xyXG4gICAgICAgICAgJGluZGV4ID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCR0YWJfd2lkdGggIT09IDAgJiYgJHRhYnNfd2lkdGggIT09IDApIHtcclxuICAgICAgICAgICRpbmRpY2F0b3IuY3NzKHtcInJpZ2h0XCI6IGNhbGNSaWdodFBvcygkYWN0aXZlKSB9KTtcclxuICAgICAgICAgICRpbmRpY2F0b3IuY3NzKHtcImxlZnRcIjogY2FsY0xlZnRQb3MoJGFjdGl2ZSkgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIEhpZGUgdGhlIHJlbWFpbmluZyBjb250ZW50XHJcbiAgICAgICRsaW5rcy5ub3QoJGFjdGl2ZSkuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJChNYXRlcmlhbGl6ZS5lc2NhcGVIYXNoKHRoaXMuaGFzaCkpLmhpZGUoKTtcclxuICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgLy8gQmluZCB0aGUgY2xpY2sgZXZlbnQgaGFuZGxlclxyXG4gICAgICAkdGhpcy5vbignY2xpY2snLCAnYScsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICBpZiAoJCh0aGlzKS5wYXJlbnQoKS5oYXNDbGFzcygnZGlzYWJsZWQnKSkge1xyXG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQWN0IGFzIHJlZ3VsYXIgbGluayBpZiB0YXJnZXQgYXR0cmlidXRlIGlzIHNwZWNpZmllZC5cclxuICAgICAgICBpZiAoISEkKHRoaXMpLmF0dHIoXCJ0YXJnZXRcIikpIHtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICR0YWJzX3dpZHRoID0gJHRoaXMud2lkdGgoKTtcclxuICAgICAgICAkdGFiX3dpZHRoID0gTWF0aC5tYXgoJHRhYnNfd2lkdGgsICR0aGlzWzBdLnNjcm9sbFdpZHRoKSAvICRsaW5rcy5sZW5ndGg7XHJcblxyXG4gICAgICAgIC8vIE1ha2UgdGhlIG9sZCB0YWIgaW5hY3RpdmUuXHJcbiAgICAgICAgJGFjdGl2ZS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgaWYgKCRjb250ZW50ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICRjb250ZW50LmhpZGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgdmFyaWFibGVzIHdpdGggdGhlIG5ldyBsaW5rIGFuZCBjb250ZW50XHJcbiAgICAgICAgJGFjdGl2ZSA9ICQodGhpcyk7XHJcbiAgICAgICAgJGNvbnRlbnQgPSAkKE1hdGVyaWFsaXplLmVzY2FwZUhhc2godGhpcy5oYXNoKSk7XHJcbiAgICAgICAgJGxpbmtzID0gJHRoaXMuZmluZCgnbGkudGFiIGEnKTtcclxuICAgICAgICB2YXIgYWN0aXZlUmVjdCA9ICRhY3RpdmUucG9zaXRpb24oKTtcclxuXHJcbiAgICAgICAgLy8gTWFrZSB0aGUgdGFiIGFjdGl2ZS5cclxuICAgICAgICAkYWN0aXZlLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICB2YXIgJHByZXZfaW5kZXggPSAkaW5kZXg7XHJcbiAgICAgICAgJGluZGV4ID0gJGxpbmtzLmluZGV4KCQodGhpcykpO1xyXG4gICAgICAgIGlmICgkaW5kZXggPCAwKSB7XHJcbiAgICAgICAgICAkaW5kZXggPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBDaGFuZ2UgdXJsIHRvIGN1cnJlbnQgdGFiXHJcbiAgICAgICAgLy8gd2luZG93LmxvY2F0aW9uLmhhc2ggPSAkYWN0aXZlLmF0dHIoJ2hyZWYnKTtcclxuXHJcbiAgICAgICAgaWYgKCRjb250ZW50ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICRjb250ZW50LnNob3coKTtcclxuICAgICAgICAgIGlmICh0eXBlb2Yob3B0aW9ucy5vblNob3cpID09PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICAgICAgb3B0aW9ucy5vblNob3cuY2FsbCh0aGlzLCAkY29udGVudCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBVcGRhdGUgaW5kaWNhdG9yXHJcblxyXG4gICAgICAgIGlmICgoJGluZGV4IC0gJHByZXZfaW5kZXgpID49IDApIHtcclxuICAgICAgICAgICRpbmRpY2F0b3IudmVsb2NpdHkoe1wicmlnaHRcIjogY2FsY1JpZ2h0UG9zKCRhY3RpdmUpIH0sIHsgZHVyYXRpb246IDMwMCwgcXVldWU6IGZhbHNlLCBlYXNpbmc6ICdlYXNlT3V0UXVhZCd9KTtcclxuICAgICAgICAgICRpbmRpY2F0b3IudmVsb2NpdHkoe1wibGVmdFwiOiBjYWxjTGVmdFBvcygkYWN0aXZlKSB9LCB7ZHVyYXRpb246IDMwMCwgcXVldWU6IGZhbHNlLCBlYXNpbmc6ICdlYXNlT3V0UXVhZCcsIGRlbGF5OiA5MH0pO1xyXG5cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgJGluZGljYXRvci52ZWxvY2l0eSh7XCJsZWZ0XCI6IGNhbGNMZWZ0UG9zKCRhY3RpdmUpIH0sIHsgZHVyYXRpb246IDMwMCwgcXVldWU6IGZhbHNlLCBlYXNpbmc6ICdlYXNlT3V0UXVhZCd9KTtcclxuICAgICAgICAgICRpbmRpY2F0b3IudmVsb2NpdHkoe1wicmlnaHRcIjogY2FsY1JpZ2h0UG9zKCRhY3RpdmUpIH0sIHtkdXJhdGlvbjogMzAwLCBxdWV1ZTogZmFsc2UsIGVhc2luZzogJ2Vhc2VPdXRRdWFkJywgZGVsYXk6IDkwfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBQcmV2ZW50IHRoZSBhbmNob3IncyBkZWZhdWx0IGNsaWNrIGFjdGlvblxyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB9LFxyXG4gICAgc2VsZWN0X3RhYiA6IGZ1bmN0aW9uKCBpZCApIHtcclxuICAgICAgdGhpcy5maW5kKCdhW2hyZWY9XCIjJyArIGlkICsgJ1wiXScpLnRyaWdnZXIoJ2NsaWNrJyk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgJC5mbi50YWJzID0gZnVuY3Rpb24obWV0aG9kT3JPcHRpb25zKSB7XHJcbiAgICBpZiAoIG1ldGhvZHNbbWV0aG9kT3JPcHRpb25zXSApIHtcclxuICAgICAgcmV0dXJuIG1ldGhvZHNbIG1ldGhvZE9yT3B0aW9ucyBdLmFwcGx5KCB0aGlzLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCggYXJndW1lbnRzLCAxICkpO1xyXG4gICAgfSBlbHNlIGlmICggdHlwZW9mIG1ldGhvZE9yT3B0aW9ucyA9PT0gJ29iamVjdCcgfHwgISBtZXRob2RPck9wdGlvbnMgKSB7XHJcbiAgICAgIC8vIERlZmF1bHQgdG8gXCJpbml0XCJcclxuICAgICAgcmV0dXJuIG1ldGhvZHMuaW5pdC5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAkLmVycm9yKCAnTWV0aG9kICcgKyAgbWV0aG9kT3JPcHRpb25zICsgJyBkb2VzIG5vdCBleGlzdCBvbiBqUXVlcnkudGFicycgKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe1xyXG4gICAgJCgndWwudGFicycpLnRhYnMoKTtcclxuICB9KTtcclxufSggalF1ZXJ5ICkpO1xyXG47KGZ1bmN0aW9uICgkKSB7XHJcbiAgICAkLmZuLnRvb2x0aXAgPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICB2YXIgdGltZW91dCA9IG51bGwsXHJcbiAgICAgIG1hcmdpbiA9IDU7XHJcblxyXG4gICAgICAvLyBEZWZhdWx0c1xyXG4gICAgICB2YXIgZGVmYXVsdHMgPSB7XHJcbiAgICAgICAgZGVsYXk6IDM1MCxcclxuICAgICAgICB0b29sdGlwOiAnJyxcclxuICAgICAgICBwb3NpdGlvbjogJ2JvdHRvbScsXHJcbiAgICAgICAgaHRtbDogZmFsc2VcclxuICAgICAgfTtcclxuXHJcbiAgICAgIC8vIFJlbW92ZSB0b29sdGlwIGZyb20gdGhlIGFjdGl2YXRvclxyXG4gICAgICBpZiAob3B0aW9ucyA9PT0gXCJyZW1vdmVcIikge1xyXG4gICAgICAgIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICQoJyMnICsgJCh0aGlzKS5hdHRyKCdkYXRhLXRvb2x0aXAtaWQnKSkucmVtb3ZlKCk7XHJcbiAgICAgICAgICAkKHRoaXMpLm9mZignbW91c2VlbnRlci50b29sdGlwIG1vdXNlbGVhdmUudG9vbHRpcCcpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgb3B0aW9ucyA9ICQuZXh0ZW5kKGRlZmF1bHRzLCBvcHRpb25zKTtcclxuXHJcbiAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIHRvb2x0aXBJZCA9IE1hdGVyaWFsaXplLmd1aWQoKTtcclxuICAgICAgICB2YXIgb3JpZ2luID0gJCh0aGlzKTtcclxuXHJcbiAgICAgICAgLy8gRGVzdHJveSBvbGQgdG9vbHRpcFxyXG4gICAgICAgIGlmIChvcmlnaW4uYXR0cignZGF0YS10b29sdGlwLWlkJykpIHtcclxuICAgICAgICAgICQoJyMnICsgb3JpZ2luLmF0dHIoJ2RhdGEtdG9vbHRpcC1pZCcpKS5yZW1vdmUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG9yaWdpbi5hdHRyKCdkYXRhLXRvb2x0aXAtaWQnLCB0b29sdGlwSWQpO1xyXG5cclxuICAgICAgICAvLyBHZXQgYXR0cmlidXRlcy5cclxuICAgICAgICB2YXIgYWxsb3dIdG1sLFxyXG4gICAgICAgICAgICB0b29sdGlwRGVsYXksXHJcbiAgICAgICAgICAgIHRvb2x0aXBQb3NpdGlvbixcclxuICAgICAgICAgICAgdG9vbHRpcFRleHQsXHJcbiAgICAgICAgICAgIHRvb2x0aXBFbCxcclxuICAgICAgICAgICAgYmFja2Ryb3A7XHJcbiAgICAgICAgdmFyIHNldEF0dHJpYnV0ZXMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGFsbG93SHRtbCA9IG9yaWdpbi5hdHRyKCdkYXRhLWh0bWwnKSA/IG9yaWdpbi5hdHRyKCdkYXRhLWh0bWwnKSA9PT0gJ3RydWUnIDogb3B0aW9ucy5odG1sO1xyXG4gICAgICAgICAgdG9vbHRpcERlbGF5ID0gb3JpZ2luLmF0dHIoJ2RhdGEtZGVsYXknKTtcclxuICAgICAgICAgIHRvb2x0aXBEZWxheSA9ICh0b29sdGlwRGVsYXkgPT09IHVuZGVmaW5lZCB8fCB0b29sdGlwRGVsYXkgPT09ICcnKSA/XHJcbiAgICAgICAgICAgICAgb3B0aW9ucy5kZWxheSA6IHRvb2x0aXBEZWxheTtcclxuICAgICAgICAgIHRvb2x0aXBQb3NpdGlvbiA9IG9yaWdpbi5hdHRyKCdkYXRhLXBvc2l0aW9uJyk7XHJcbiAgICAgICAgICB0b29sdGlwUG9zaXRpb24gPSAodG9vbHRpcFBvc2l0aW9uID09PSB1bmRlZmluZWQgfHwgdG9vbHRpcFBvc2l0aW9uID09PSAnJykgP1xyXG4gICAgICAgICAgICAgIG9wdGlvbnMucG9zaXRpb24gOiB0b29sdGlwUG9zaXRpb247XHJcbiAgICAgICAgICB0b29sdGlwVGV4dCA9IG9yaWdpbi5hdHRyKCdkYXRhLXRvb2x0aXAnKTtcclxuICAgICAgICAgIHRvb2x0aXBUZXh0ID0gKHRvb2x0aXBUZXh0ID09PSB1bmRlZmluZWQgfHwgdG9vbHRpcFRleHQgPT09ICcnKSA/XHJcbiAgICAgICAgICAgICAgb3B0aW9ucy50b29sdGlwIDogdG9vbHRpcFRleHQ7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBzZXRBdHRyaWJ1dGVzKCk7XHJcblxyXG4gICAgICAgIHZhciByZW5kZXJUb29sdGlwRWwgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHZhciB0b29sdGlwID0gJCgnPGRpdiBjbGFzcz1cIm1hdGVyaWFsLXRvb2x0aXBcIj48L2Rpdj4nKTtcclxuXHJcbiAgICAgICAgICAvLyBDcmVhdGUgVGV4dCBzcGFuXHJcbiAgICAgICAgICBpZiAoYWxsb3dIdG1sKSB7XHJcbiAgICAgICAgICAgIHRvb2x0aXBUZXh0ID0gJCgnPHNwYW4+PC9zcGFuPicpLmh0bWwodG9vbHRpcFRleHQpO1xyXG4gICAgICAgICAgfSBlbHNle1xyXG4gICAgICAgICAgICB0b29sdGlwVGV4dCA9ICQoJzxzcGFuPjwvc3Bhbj4nKS50ZXh0KHRvb2x0aXBUZXh0KTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAvLyBDcmVhdGUgdG9vbHRpcFxyXG4gICAgICAgICAgdG9vbHRpcC5hcHBlbmQodG9vbHRpcFRleHQpXHJcbiAgICAgICAgICAgIC5hcHBlbmRUbygkKCdib2R5JykpXHJcbiAgICAgICAgICAgIC5hdHRyKCdpZCcsIHRvb2x0aXBJZCk7XHJcblxyXG4gICAgICAgICAgLy8gQ3JlYXRlIGJhY2tkcm9wXHJcbiAgICAgICAgICBiYWNrZHJvcCA9ICQoJzxkaXYgY2xhc3M9XCJiYWNrZHJvcFwiPjwvZGl2PicpO1xyXG4gICAgICAgICAgYmFja2Ryb3AuYXBwZW5kVG8odG9vbHRpcCk7XHJcbiAgICAgICAgICByZXR1cm4gdG9vbHRpcDtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRvb2x0aXBFbCA9IHJlbmRlclRvb2x0aXBFbCgpO1xyXG5cclxuICAgICAgICAvLyBEZXN0cm95IHByZXZpb3VzbHkgYmluZGVkIGV2ZW50c1xyXG4gICAgICAgIG9yaWdpbi5vZmYoJ21vdXNlZW50ZXIudG9vbHRpcCBtb3VzZWxlYXZlLnRvb2x0aXAnKTtcclxuICAgICAgICAvLyBNb3VzZSBJblxyXG4gICAgICAgIHZhciBzdGFydGVkID0gZmFsc2UsIHRpbWVvdXRSZWY7XHJcbiAgICAgICAgb3JpZ2luLm9uKHsnbW91c2VlbnRlci50b29sdGlwJzogZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgdmFyIHNob3dUb29sdGlwID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHNldEF0dHJpYnV0ZXMoKTtcclxuICAgICAgICAgICAgc3RhcnRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIHRvb2x0aXBFbC52ZWxvY2l0eSgnc3RvcCcpO1xyXG4gICAgICAgICAgICBiYWNrZHJvcC52ZWxvY2l0eSgnc3RvcCcpO1xyXG4gICAgICAgICAgICB0b29sdGlwRWwuY3NzKHsgZGlzcGxheTogJ2Jsb2NrJywgbGVmdDogJzBweCcsIHRvcDogJzBweCcgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBUb29sdGlwIHBvc2l0aW9uaW5nXHJcbiAgICAgICAgICAgIHZhciBvcmlnaW5XaWR0aCA9IG9yaWdpbi5vdXRlcldpZHRoKCk7XHJcbiAgICAgICAgICAgIHZhciBvcmlnaW5IZWlnaHQgPSBvcmlnaW4ub3V0ZXJIZWlnaHQoKTtcclxuXHJcbiAgICAgICAgICAgIHZhciB0b29sdGlwSGVpZ2h0ID0gdG9vbHRpcEVsLm91dGVySGVpZ2h0KCk7XHJcbiAgICAgICAgICAgIHZhciB0b29sdGlwV2lkdGggPSB0b29sdGlwRWwub3V0ZXJXaWR0aCgpO1xyXG4gICAgICAgICAgICB2YXIgdG9vbHRpcFZlcnRpY2FsTW92ZW1lbnQgPSAnMHB4JztcclxuICAgICAgICAgICAgdmFyIHRvb2x0aXBIb3Jpem9udGFsTW92ZW1lbnQgPSAnMHB4JztcclxuICAgICAgICAgICAgdmFyIHNjYWxlWEZhY3RvciA9IDg7XHJcbiAgICAgICAgICAgIHZhciBzY2FsZVlGYWN0b3IgPSA4O1xyXG4gICAgICAgICAgICB2YXIgdGFyZ2V0VG9wLCB0YXJnZXRMZWZ0LCBuZXdDb29yZGluYXRlcztcclxuXHJcbiAgICAgICAgICAgIGlmICh0b29sdGlwUG9zaXRpb24gPT09IFwidG9wXCIpIHtcclxuICAgICAgICAgICAgICAvLyBUb3AgUG9zaXRpb25cclxuICAgICAgICAgICAgICB0YXJnZXRUb3AgPSBvcmlnaW4ub2Zmc2V0KCkudG9wIC0gdG9vbHRpcEhlaWdodCAtIG1hcmdpbjtcclxuICAgICAgICAgICAgICB0YXJnZXRMZWZ0ID0gb3JpZ2luLm9mZnNldCgpLmxlZnQgKyBvcmlnaW5XaWR0aC8yIC0gdG9vbHRpcFdpZHRoLzI7XHJcbiAgICAgICAgICAgICAgbmV3Q29vcmRpbmF0ZXMgPSByZXBvc2l0aW9uV2l0aGluU2NyZWVuKHRhcmdldExlZnQsIHRhcmdldFRvcCwgdG9vbHRpcFdpZHRoLCB0b29sdGlwSGVpZ2h0KTtcclxuXHJcbiAgICAgICAgICAgICAgdG9vbHRpcFZlcnRpY2FsTW92ZW1lbnQgPSAnLTEwcHgnO1xyXG4gICAgICAgICAgICAgIGJhY2tkcm9wLmNzcyh7XHJcbiAgICAgICAgICAgICAgICBib3R0b206IDAsXHJcbiAgICAgICAgICAgICAgICBsZWZ0OiAwLFxyXG4gICAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiAnMTRweCAxNHB4IDAgMCcsXHJcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm1PcmlnaW46ICc1MCUgMTAwJScsXHJcbiAgICAgICAgICAgICAgICBtYXJnaW5Ub3A6IHRvb2x0aXBIZWlnaHQsXHJcbiAgICAgICAgICAgICAgICBtYXJnaW5MZWZ0OiAodG9vbHRpcFdpZHRoLzIpIC0gKGJhY2tkcm9wLndpZHRoKCkvMilcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBMZWZ0IFBvc2l0aW9uXHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHRvb2x0aXBQb3NpdGlvbiA9PT0gXCJsZWZ0XCIpIHtcclxuICAgICAgICAgICAgICB0YXJnZXRUb3AgPSBvcmlnaW4ub2Zmc2V0KCkudG9wICsgb3JpZ2luSGVpZ2h0LzIgLSB0b29sdGlwSGVpZ2h0LzI7XHJcbiAgICAgICAgICAgICAgdGFyZ2V0TGVmdCA9ICBvcmlnaW4ub2Zmc2V0KCkubGVmdCAtIHRvb2x0aXBXaWR0aCAtIG1hcmdpbjtcclxuICAgICAgICAgICAgICBuZXdDb29yZGluYXRlcyA9IHJlcG9zaXRpb25XaXRoaW5TY3JlZW4odGFyZ2V0TGVmdCwgdGFyZ2V0VG9wLCB0b29sdGlwV2lkdGgsIHRvb2x0aXBIZWlnaHQpO1xyXG5cclxuICAgICAgICAgICAgICB0b29sdGlwSG9yaXpvbnRhbE1vdmVtZW50ID0gJy0xMHB4JztcclxuICAgICAgICAgICAgICBiYWNrZHJvcC5jc3Moe1xyXG4gICAgICAgICAgICAgICAgdG9wOiAnLTdweCcsXHJcbiAgICAgICAgICAgICAgICByaWdodDogMCxcclxuICAgICAgICAgICAgICAgIHdpZHRoOiAnMTRweCcsXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6ICcxNHB4JyxcclxuICAgICAgICAgICAgICAgIGJvcmRlclJhZGl1czogJzE0cHggMCAwIDE0cHgnLFxyXG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtT3JpZ2luOiAnOTUlIDUwJScsXHJcbiAgICAgICAgICAgICAgICBtYXJnaW5Ub3A6IHRvb2x0aXBIZWlnaHQvMixcclxuICAgICAgICAgICAgICAgIG1hcmdpbkxlZnQ6IHRvb2x0aXBXaWR0aFxyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIFJpZ2h0IFBvc2l0aW9uXHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHRvb2x0aXBQb3NpdGlvbiA9PT0gXCJyaWdodFwiKSB7XHJcbiAgICAgICAgICAgICAgdGFyZ2V0VG9wID0gb3JpZ2luLm9mZnNldCgpLnRvcCArIG9yaWdpbkhlaWdodC8yIC0gdG9vbHRpcEhlaWdodC8yO1xyXG4gICAgICAgICAgICAgIHRhcmdldExlZnQgPSBvcmlnaW4ub2Zmc2V0KCkubGVmdCArIG9yaWdpbldpZHRoICsgbWFyZ2luO1xyXG4gICAgICAgICAgICAgIG5ld0Nvb3JkaW5hdGVzID0gcmVwb3NpdGlvbldpdGhpblNjcmVlbih0YXJnZXRMZWZ0LCB0YXJnZXRUb3AsIHRvb2x0aXBXaWR0aCwgdG9vbHRpcEhlaWdodCk7XHJcblxyXG4gICAgICAgICAgICAgIHRvb2x0aXBIb3Jpem9udGFsTW92ZW1lbnQgPSAnKzEwcHgnO1xyXG4gICAgICAgICAgICAgIGJhY2tkcm9wLmNzcyh7XHJcbiAgICAgICAgICAgICAgICB0b3A6ICctN3B4JyxcclxuICAgICAgICAgICAgICAgIGxlZnQ6IDAsXHJcbiAgICAgICAgICAgICAgICB3aWR0aDogJzE0cHgnLFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAnMTRweCcsXHJcbiAgICAgICAgICAgICAgICBib3JkZXJSYWRpdXM6ICcwIDE0cHggMTRweCAwJyxcclxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybU9yaWdpbjogJzUlIDUwJScsXHJcbiAgICAgICAgICAgICAgICBtYXJnaW5Ub3A6IHRvb2x0aXBIZWlnaHQvMixcclxuICAgICAgICAgICAgICAgIG1hcmdpbkxlZnQ6ICcwcHgnXHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgLy8gQm90dG9tIFBvc2l0aW9uXHJcbiAgICAgICAgICAgICAgdGFyZ2V0VG9wID0gb3JpZ2luLm9mZnNldCgpLnRvcCArIG9yaWdpbi5vdXRlckhlaWdodCgpICsgbWFyZ2luO1xyXG4gICAgICAgICAgICAgIHRhcmdldExlZnQgPSBvcmlnaW4ub2Zmc2V0KCkubGVmdCArIG9yaWdpbldpZHRoLzIgLSB0b29sdGlwV2lkdGgvMjtcclxuICAgICAgICAgICAgICBuZXdDb29yZGluYXRlcyA9IHJlcG9zaXRpb25XaXRoaW5TY3JlZW4odGFyZ2V0TGVmdCwgdGFyZ2V0VG9wLCB0b29sdGlwV2lkdGgsIHRvb2x0aXBIZWlnaHQpO1xyXG4gICAgICAgICAgICAgIHRvb2x0aXBWZXJ0aWNhbE1vdmVtZW50ID0gJysxMHB4JztcclxuICAgICAgICAgICAgICBiYWNrZHJvcC5jc3Moe1xyXG4gICAgICAgICAgICAgICAgdG9wOiAwLFxyXG4gICAgICAgICAgICAgICAgbGVmdDogMCxcclxuICAgICAgICAgICAgICAgIG1hcmdpbkxlZnQ6ICh0b29sdGlwV2lkdGgvMikgLSAoYmFja2Ryb3Aud2lkdGgoKS8yKVxyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBTZXQgdG9vcHRpcCBjc3MgcGxhY2VtZW50XHJcbiAgICAgICAgICAgIHRvb2x0aXBFbC5jc3Moe1xyXG4gICAgICAgICAgICAgIHRvcDogbmV3Q29vcmRpbmF0ZXMueSxcclxuICAgICAgICAgICAgICBsZWZ0OiBuZXdDb29yZGluYXRlcy54XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIFNjYWxlIHRvIGZpbGxcclxuICAgICAgICAgICAgc2NhbGVYRmFjdG9yID0gTWF0aC5TUVJUMiAqIHRvb2x0aXBXaWR0aCAvIHBhcnNlSW50KGJhY2tkcm9wLmNzcygnd2lkdGgnKSk7XHJcbiAgICAgICAgICAgIHNjYWxlWUZhY3RvciA9IE1hdGguU1FSVDIgKiB0b29sdGlwSGVpZ2h0IC8gcGFyc2VJbnQoYmFja2Ryb3AuY3NzKCdoZWlnaHQnKSk7XHJcblxyXG4gICAgICAgICAgICB0b29sdGlwRWwudmVsb2NpdHkoeyBtYXJnaW5Ub3A6IHRvb2x0aXBWZXJ0aWNhbE1vdmVtZW50LCBtYXJnaW5MZWZ0OiB0b29sdGlwSG9yaXpvbnRhbE1vdmVtZW50fSwgeyBkdXJhdGlvbjogMzUwLCBxdWV1ZTogZmFsc2UgfSlcclxuICAgICAgICAgICAgICAudmVsb2NpdHkoe29wYWNpdHk6IDF9LCB7ZHVyYXRpb246IDMwMCwgZGVsYXk6IDUwLCBxdWV1ZTogZmFsc2V9KTtcclxuICAgICAgICAgICAgYmFja2Ryb3AuY3NzKHsgZGlzcGxheTogJ2Jsb2NrJyB9KVxyXG4gICAgICAgICAgICAgIC52ZWxvY2l0eSh7b3BhY2l0eToxfSx7ZHVyYXRpb246IDU1LCBkZWxheTogMCwgcXVldWU6IGZhbHNlfSlcclxuICAgICAgICAgICAgICAudmVsb2NpdHkoe3NjYWxlWDogc2NhbGVYRmFjdG9yLCBzY2FsZVk6IHNjYWxlWUZhY3Rvcn0sIHtkdXJhdGlvbjogMzAwLCBkZWxheTogMCwgcXVldWU6IGZhbHNlLCBlYXNpbmc6ICdlYXNlSW5PdXRRdWFkJ30pO1xyXG4gICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICB0aW1lb3V0UmVmID0gc2V0VGltZW91dChzaG93VG9vbHRpcCwgdG9vbHRpcERlbGF5KTsgLy8gRW5kIEludGVydmFsXHJcblxyXG4gICAgICAgIC8vIE1vdXNlIE91dFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgJ21vdXNlbGVhdmUudG9vbHRpcCc6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAvLyBSZXNldCBTdGF0ZVxyXG4gICAgICAgICAgc3RhcnRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRSZWYpO1xyXG5cclxuICAgICAgICAgIC8vIEFuaW1hdGUgYmFja1xyXG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaWYgKHN0YXJ0ZWQgIT09IHRydWUpIHtcclxuICAgICAgICAgICAgICB0b29sdGlwRWwudmVsb2NpdHkoe1xyXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMCwgbWFyZ2luVG9wOiAwLCBtYXJnaW5MZWZ0OiAwfSwgeyBkdXJhdGlvbjogMjI1LCBxdWV1ZTogZmFsc2V9KTtcclxuICAgICAgICAgICAgICBiYWNrZHJvcC52ZWxvY2l0eSh7b3BhY2l0eTogMCwgc2NhbGVYOiAxLCBzY2FsZVk6IDF9LCB7XHJcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjoyMjUsXHJcbiAgICAgICAgICAgICAgICBxdWV1ZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgYmFja2Ryb3AuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTtcclxuICAgICAgICAgICAgICAgICAgdG9vbHRpcEVsLmNzcygnZGlzcGxheScsICdub25lJyk7XHJcbiAgICAgICAgICAgICAgICAgIHN0YXJ0ZWQgPSBmYWxzZTt9XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0sMjI1KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICB2YXIgcmVwb3NpdGlvbldpdGhpblNjcmVlbiA9IGZ1bmN0aW9uKHgsIHksIHdpZHRoLCBoZWlnaHQpIHtcclxuICAgIHZhciBuZXdYID0geDtcclxuICAgIHZhciBuZXdZID0geTtcclxuXHJcbiAgICBpZiAobmV3WCA8IDApIHtcclxuICAgICAgbmV3WCA9IDQ7XHJcbiAgICB9IGVsc2UgaWYgKG5ld1ggKyB3aWR0aCA+IHdpbmRvdy5pbm5lcldpZHRoKSB7XHJcbiAgICAgIG5ld1ggLT0gbmV3WCArIHdpZHRoIC0gd2luZG93LmlubmVyV2lkdGg7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKG5ld1kgPCAwKSB7XHJcbiAgICAgIG5ld1kgPSA0O1xyXG4gICAgfSBlbHNlIGlmIChuZXdZICsgaGVpZ2h0ID4gd2luZG93LmlubmVySGVpZ2h0ICsgJCh3aW5kb3cpLnNjcm9sbFRvcCkge1xyXG4gICAgICBuZXdZIC09IG5ld1kgKyBoZWlnaHQgLSB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHt4OiBuZXdYLCB5OiBuZXdZfTtcclxuICB9O1xyXG5cclxuICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe1xyXG4gICAgICQoJy50b29sdGlwcGVkJykudG9vbHRpcCgpO1xyXG4gICB9KTtcclxufSggalF1ZXJ5ICkpO1xyXG47LyohXHJcbiAqIFdhdmVzIHYwLjYuNFxyXG4gKiBodHRwOi8vZmlhbi5teS5pZC9XYXZlc1xyXG4gKlxyXG4gKiBDb3B5cmlnaHQgMjAxNCBBbGZpYW5hIEUuIFNpYnVlYSBhbmQgb3RoZXIgY29udHJpYnV0b3JzXHJcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZmlhbnMvV2F2ZXMvYmxvYi9tYXN0ZXIvTElDRU5TRVxyXG4gKi9cclxuXHJcbjsoZnVuY3Rpb24od2luZG93KSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgdmFyIFdhdmVzID0gV2F2ZXMgfHwge307XHJcbiAgICB2YXIgJCQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsLmJpbmQoZG9jdW1lbnQpO1xyXG5cclxuICAgIC8vIEZpbmQgZXhhY3QgcG9zaXRpb24gb2YgZWxlbWVudFxyXG4gICAgZnVuY3Rpb24gaXNXaW5kb3cob2JqKSB7XHJcbiAgICAgICAgcmV0dXJuIG9iaiAhPT0gbnVsbCAmJiBvYmogPT09IG9iai53aW5kb3c7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0V2luZG93KGVsZW0pIHtcclxuICAgICAgICByZXR1cm4gaXNXaW5kb3coZWxlbSkgPyBlbGVtIDogZWxlbS5ub2RlVHlwZSA9PT0gOSAmJiBlbGVtLmRlZmF1bHRWaWV3O1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG9mZnNldChlbGVtKSB7XHJcbiAgICAgICAgdmFyIGRvY0VsZW0sIHdpbixcclxuICAgICAgICAgICAgYm94ID0ge3RvcDogMCwgbGVmdDogMH0sXHJcbiAgICAgICAgICAgIGRvYyA9IGVsZW0gJiYgZWxlbS5vd25lckRvY3VtZW50O1xyXG5cclxuICAgICAgICBkb2NFbGVtID0gZG9jLmRvY3VtZW50RWxlbWVudDtcclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCAhPT0gdHlwZW9mIHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBib3ggPSBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB3aW4gPSBnZXRXaW5kb3coZG9jKTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB0b3A6IGJveC50b3AgKyB3aW4ucGFnZVlPZmZzZXQgLSBkb2NFbGVtLmNsaWVudFRvcCxcclxuICAgICAgICAgICAgbGVmdDogYm94LmxlZnQgKyB3aW4ucGFnZVhPZmZzZXQgLSBkb2NFbGVtLmNsaWVudExlZnRcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGNvbnZlcnRTdHlsZShvYmopIHtcclxuICAgICAgICB2YXIgc3R5bGUgPSAnJztcclxuXHJcbiAgICAgICAgZm9yICh2YXIgYSBpbiBvYmopIHtcclxuICAgICAgICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShhKSkge1xyXG4gICAgICAgICAgICAgICAgc3R5bGUgKz0gKGEgKyAnOicgKyBvYmpbYV0gKyAnOycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gc3R5bGU7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIEVmZmVjdCA9IHtcclxuXHJcbiAgICAgICAgLy8gRWZmZWN0IGRlbGF5XHJcbiAgICAgICAgZHVyYXRpb246IDc1MCxcclxuXHJcbiAgICAgICAgc2hvdzogZnVuY3Rpb24oZSwgZWxlbWVudCkge1xyXG5cclxuICAgICAgICAgICAgLy8gRGlzYWJsZSByaWdodCBjbGlja1xyXG4gICAgICAgICAgICBpZiAoZS5idXR0b24gPT09IDIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGVsID0gZWxlbWVudCB8fCB0aGlzO1xyXG5cclxuICAgICAgICAgICAgLy8gQ3JlYXRlIHJpcHBsZVxyXG4gICAgICAgICAgICB2YXIgcmlwcGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIHJpcHBsZS5jbGFzc05hbWUgPSAnd2F2ZXMtcmlwcGxlJztcclxuICAgICAgICAgICAgZWwuYXBwZW5kQ2hpbGQocmlwcGxlKTtcclxuXHJcbiAgICAgICAgICAgIC8vIEdldCBjbGljayBjb29yZGluYXRlIGFuZCBlbGVtZW50IHdpdGRoXHJcbiAgICAgICAgICAgIHZhciBwb3MgICAgICAgICA9IG9mZnNldChlbCk7XHJcbiAgICAgICAgICAgIHZhciByZWxhdGl2ZVkgICA9IChlLnBhZ2VZIC0gcG9zLnRvcCk7XHJcbiAgICAgICAgICAgIHZhciByZWxhdGl2ZVggICA9IChlLnBhZ2VYIC0gcG9zLmxlZnQpO1xyXG4gICAgICAgICAgICB2YXIgc2NhbGUgICAgICAgPSAnc2NhbGUoJysoKGVsLmNsaWVudFdpZHRoIC8gMTAwKSAqIDEwKSsnKSc7XHJcblxyXG4gICAgICAgICAgICAvLyBTdXBwb3J0IGZvciB0b3VjaCBkZXZpY2VzXHJcbiAgICAgICAgICAgIGlmICgndG91Y2hlcycgaW4gZSkge1xyXG4gICAgICAgICAgICAgIHJlbGF0aXZlWSAgID0gKGUudG91Y2hlc1swXS5wYWdlWSAtIHBvcy50b3ApO1xyXG4gICAgICAgICAgICAgIHJlbGF0aXZlWCAgID0gKGUudG91Y2hlc1swXS5wYWdlWCAtIHBvcy5sZWZ0KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gQXR0YWNoIGRhdGEgdG8gZWxlbWVudFxyXG4gICAgICAgICAgICByaXBwbGUuc2V0QXR0cmlidXRlKCdkYXRhLWhvbGQnLCBEYXRlLm5vdygpKTtcclxuICAgICAgICAgICAgcmlwcGxlLnNldEF0dHJpYnV0ZSgnZGF0YS1zY2FsZScsIHNjYWxlKTtcclxuICAgICAgICAgICAgcmlwcGxlLnNldEF0dHJpYnV0ZSgnZGF0YS14JywgcmVsYXRpdmVYKTtcclxuICAgICAgICAgICAgcmlwcGxlLnNldEF0dHJpYnV0ZSgnZGF0YS15JywgcmVsYXRpdmVZKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFNldCByaXBwbGUgcG9zaXRpb25cclxuICAgICAgICAgICAgdmFyIHJpcHBsZVN0eWxlID0ge1xyXG4gICAgICAgICAgICAgICAgJ3RvcCc6IHJlbGF0aXZlWSsncHgnLFxyXG4gICAgICAgICAgICAgICAgJ2xlZnQnOiByZWxhdGl2ZVgrJ3B4J1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgcmlwcGxlLmNsYXNzTmFtZSA9IHJpcHBsZS5jbGFzc05hbWUgKyAnIHdhdmVzLW5vdHJhbnNpdGlvbic7XHJcbiAgICAgICAgICAgIHJpcHBsZS5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgY29udmVydFN0eWxlKHJpcHBsZVN0eWxlKSk7XHJcbiAgICAgICAgICAgIHJpcHBsZS5jbGFzc05hbWUgPSByaXBwbGUuY2xhc3NOYW1lLnJlcGxhY2UoJ3dhdmVzLW5vdHJhbnNpdGlvbicsICcnKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFNjYWxlIHRoZSByaXBwbGVcclxuICAgICAgICAgICAgcmlwcGxlU3R5bGVbJy13ZWJraXQtdHJhbnNmb3JtJ10gPSBzY2FsZTtcclxuICAgICAgICAgICAgcmlwcGxlU3R5bGVbJy1tb3otdHJhbnNmb3JtJ10gPSBzY2FsZTtcclxuICAgICAgICAgICAgcmlwcGxlU3R5bGVbJy1tcy10cmFuc2Zvcm0nXSA9IHNjYWxlO1xyXG4gICAgICAgICAgICByaXBwbGVTdHlsZVsnLW8tdHJhbnNmb3JtJ10gPSBzY2FsZTtcclxuICAgICAgICAgICAgcmlwcGxlU3R5bGUudHJhbnNmb3JtID0gc2NhbGU7XHJcbiAgICAgICAgICAgIHJpcHBsZVN0eWxlLm9wYWNpdHkgICA9ICcxJztcclxuXHJcbiAgICAgICAgICAgIHJpcHBsZVN0eWxlWyctd2Via2l0LXRyYW5zaXRpb24tZHVyYXRpb24nXSA9IEVmZmVjdC5kdXJhdGlvbiArICdtcyc7XHJcbiAgICAgICAgICAgIHJpcHBsZVN0eWxlWyctbW96LXRyYW5zaXRpb24tZHVyYXRpb24nXSAgICA9IEVmZmVjdC5kdXJhdGlvbiArICdtcyc7XHJcbiAgICAgICAgICAgIHJpcHBsZVN0eWxlWyctby10cmFuc2l0aW9uLWR1cmF0aW9uJ10gICAgICA9IEVmZmVjdC5kdXJhdGlvbiArICdtcyc7XHJcbiAgICAgICAgICAgIHJpcHBsZVN0eWxlWyd0cmFuc2l0aW9uLWR1cmF0aW9uJ10gICAgICAgICA9IEVmZmVjdC5kdXJhdGlvbiArICdtcyc7XHJcblxyXG4gICAgICAgICAgICByaXBwbGVTdHlsZVsnLXdlYmtpdC10cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbiddID0gJ2N1YmljLWJlemllcigwLjI1MCwgMC40NjAsIDAuNDUwLCAwLjk0MCknO1xyXG4gICAgICAgICAgICByaXBwbGVTdHlsZVsnLW1vei10cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbiddICAgID0gJ2N1YmljLWJlemllcigwLjI1MCwgMC40NjAsIDAuNDUwLCAwLjk0MCknO1xyXG4gICAgICAgICAgICByaXBwbGVTdHlsZVsnLW8tdHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb24nXSAgICAgID0gJ2N1YmljLWJlemllcigwLjI1MCwgMC40NjAsIDAuNDUwLCAwLjk0MCknO1xyXG4gICAgICAgICAgICByaXBwbGVTdHlsZVsndHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb24nXSAgICAgICAgID0gJ2N1YmljLWJlemllcigwLjI1MCwgMC40NjAsIDAuNDUwLCAwLjk0MCknO1xyXG5cclxuICAgICAgICAgICAgcmlwcGxlLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBjb252ZXJ0U3R5bGUocmlwcGxlU3R5bGUpKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBoaWRlOiBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIFRvdWNoSGFuZGxlci50b3VjaHVwKGUpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGVsID0gdGhpcztcclxuICAgICAgICAgICAgdmFyIHdpZHRoID0gZWwuY2xpZW50V2lkdGggKiAxLjQ7XHJcblxyXG4gICAgICAgICAgICAvLyBHZXQgZmlyc3QgcmlwcGxlXHJcbiAgICAgICAgICAgIHZhciByaXBwbGUgPSBudWxsO1xyXG4gICAgICAgICAgICB2YXIgcmlwcGxlcyA9IGVsLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3dhdmVzLXJpcHBsZScpO1xyXG4gICAgICAgICAgICBpZiAocmlwcGxlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICByaXBwbGUgPSByaXBwbGVzW3JpcHBsZXMubGVuZ3RoIC0gMV07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciByZWxhdGl2ZVggICA9IHJpcHBsZS5nZXRBdHRyaWJ1dGUoJ2RhdGEteCcpO1xyXG4gICAgICAgICAgICB2YXIgcmVsYXRpdmVZICAgPSByaXBwbGUuZ2V0QXR0cmlidXRlKCdkYXRhLXknKTtcclxuICAgICAgICAgICAgdmFyIHNjYWxlICAgICAgID0gcmlwcGxlLmdldEF0dHJpYnV0ZSgnZGF0YS1zY2FsZScpO1xyXG5cclxuICAgICAgICAgICAgLy8gR2V0IGRlbGF5IGJlZXR3ZWVuIG1vdXNlZG93biBhbmQgbW91c2UgbGVhdmVcclxuICAgICAgICAgICAgdmFyIGRpZmYgPSBEYXRlLm5vdygpIC0gTnVtYmVyKHJpcHBsZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtaG9sZCcpKTtcclxuICAgICAgICAgICAgdmFyIGRlbGF5ID0gMzUwIC0gZGlmZjtcclxuXHJcbiAgICAgICAgICAgIGlmIChkZWxheSA8IDApIHtcclxuICAgICAgICAgICAgICAgIGRlbGF5ID0gMDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gRmFkZSBvdXQgcmlwcGxlIGFmdGVyIGRlbGF5XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3R5bGUgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ3RvcCc6IHJlbGF0aXZlWSsncHgnLFxyXG4gICAgICAgICAgICAgICAgICAgICdsZWZ0JzogcmVsYXRpdmVYKydweCcsXHJcbiAgICAgICAgICAgICAgICAgICAgJ29wYWNpdHknOiAnMCcsXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIER1cmF0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgJy13ZWJraXQtdHJhbnNpdGlvbi1kdXJhdGlvbic6IEVmZmVjdC5kdXJhdGlvbiArICdtcycsXHJcbiAgICAgICAgICAgICAgICAgICAgJy1tb3otdHJhbnNpdGlvbi1kdXJhdGlvbic6IEVmZmVjdC5kdXJhdGlvbiArICdtcycsXHJcbiAgICAgICAgICAgICAgICAgICAgJy1vLXRyYW5zaXRpb24tZHVyYXRpb24nOiBFZmZlY3QuZHVyYXRpb24gKyAnbXMnLFxyXG4gICAgICAgICAgICAgICAgICAgICd0cmFuc2l0aW9uLWR1cmF0aW9uJzogRWZmZWN0LmR1cmF0aW9uICsgJ21zJyxcclxuICAgICAgICAgICAgICAgICAgICAnLXdlYmtpdC10cmFuc2Zvcm0nOiBzY2FsZSxcclxuICAgICAgICAgICAgICAgICAgICAnLW1vei10cmFuc2Zvcm0nOiBzY2FsZSxcclxuICAgICAgICAgICAgICAgICAgICAnLW1zLXRyYW5zZm9ybSc6IHNjYWxlLFxyXG4gICAgICAgICAgICAgICAgICAgICctby10cmFuc2Zvcm0nOiBzY2FsZSxcclxuICAgICAgICAgICAgICAgICAgICAndHJhbnNmb3JtJzogc2NhbGUsXHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIHJpcHBsZS5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgY29udmVydFN0eWxlKHN0eWxlKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbC5yZW1vdmVDaGlsZChyaXBwbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2goZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSwgRWZmZWN0LmR1cmF0aW9uKTtcclxuICAgICAgICAgICAgfSwgZGVsYXkpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIC8vIExpdHRsZSBoYWNrIHRvIG1ha2UgPGlucHV0PiBjYW4gcGVyZm9ybSB3YXZlcyBlZmZlY3RcclxuICAgICAgICB3cmFwSW5wdXQ6IGZ1bmN0aW9uKGVsZW1lbnRzKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGEgPSAwOyBhIDwgZWxlbWVudHMubGVuZ3RoOyBhKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBlbCA9IGVsZW1lbnRzW2FdO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdpbnB1dCcpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcGFyZW50ID0gZWwucGFyZW50Tm9kZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgaW5wdXQgYWxyZWFkeSBoYXZlIHBhcmVudCBqdXN0IHBhc3MgdGhyb3VnaFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJlbnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnaScgJiYgcGFyZW50LmNsYXNzTmFtZS5pbmRleE9mKCd3YXZlcy1lZmZlY3QnKSAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBQdXQgZWxlbWVudCBjbGFzcyBhbmQgc3R5bGUgdG8gdGhlIHNwZWNpZmllZCBwYXJlbnRcclxuICAgICAgICAgICAgICAgICAgICB2YXIgd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2knKTtcclxuICAgICAgICAgICAgICAgICAgICB3cmFwcGVyLmNsYXNzTmFtZSA9IGVsLmNsYXNzTmFtZSArICcgd2F2ZXMtaW5wdXQtd3JhcHBlcic7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50U3R5bGUgPSBlbC5nZXRBdHRyaWJ1dGUoJ3N0eWxlJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghZWxlbWVudFN0eWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRTdHlsZSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgd3JhcHBlci5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgZWxlbWVudFN0eWxlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZWwuY2xhc3NOYW1lID0gJ3dhdmVzLWJ1dHRvbi1pbnB1dCc7XHJcbiAgICAgICAgICAgICAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBQdXQgZWxlbWVudCBhcyBjaGlsZFxyXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudC5yZXBsYWNlQ2hpbGQod3JhcHBlciwgZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoZWwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEaXNhYmxlIG1vdXNlZG93biBldmVudCBmb3IgNTAwbXMgZHVyaW5nIGFuZCBhZnRlciB0b3VjaFxyXG4gICAgICovXHJcbiAgICB2YXIgVG91Y2hIYW5kbGVyID0ge1xyXG4gICAgICAgIC8qIHVzZXMgYW4gaW50ZWdlciByYXRoZXIgdGhhbiBib29sIHNvIHRoZXJlJ3Mgbm8gaXNzdWVzIHdpdGhcclxuICAgICAgICAgKiBuZWVkaW5nIHRvIGNsZWFyIHRpbWVvdXRzIGlmIGFub3RoZXIgdG91Y2ggZXZlbnQgb2NjdXJyZWRcclxuICAgICAgICAgKiB3aXRoaW4gdGhlIDUwMG1zLiBDYW5ub3QgbW91c2V1cCBiZXR3ZWVuIHRvdWNoc3RhcnQgYW5kXHJcbiAgICAgICAgICogdG91Y2hlbmQsIG5vciBpbiB0aGUgNTAwbXMgYWZ0ZXIgdG91Y2hlbmQuICovXHJcbiAgICAgICAgdG91Y2hlczogMCxcclxuICAgICAgICBhbGxvd0V2ZW50OiBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIHZhciBhbGxvdyA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICBpZiAoZS50eXBlID09PSAndG91Y2hzdGFydCcpIHtcclxuICAgICAgICAgICAgICAgIFRvdWNoSGFuZGxlci50b3VjaGVzICs9IDE7IC8vcHVzaFxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUudHlwZSA9PT0gJ3RvdWNoZW5kJyB8fCBlLnR5cGUgPT09ICd0b3VjaGNhbmNlbCcpIHtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKFRvdWNoSGFuZGxlci50b3VjaGVzID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBUb3VjaEhhbmRsZXIudG91Y2hlcyAtPSAxOyAvL3BvcCBhZnRlciA1MDBtc1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sIDUwMCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZS50eXBlID09PSAnbW91c2Vkb3duJyAmJiBUb3VjaEhhbmRsZXIudG91Y2hlcyA+IDApIHtcclxuICAgICAgICAgICAgICAgIGFsbG93ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBhbGxvdztcclxuICAgICAgICB9LFxyXG4gICAgICAgIHRvdWNodXA6IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgVG91Y2hIYW5kbGVyLmFsbG93RXZlbnQoZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEZWxlZ2F0ZWQgY2xpY2sgaGFuZGxlciBmb3IgLndhdmVzLWVmZmVjdCBlbGVtZW50LlxyXG4gICAgICogcmV0dXJucyBudWxsIHdoZW4gLndhdmVzLWVmZmVjdCBlbGVtZW50IG5vdCBpbiBcImNsaWNrIHRyZWVcIlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBnZXRXYXZlc0VmZmVjdEVsZW1lbnQoZSkge1xyXG4gICAgICAgIGlmIChUb3VjaEhhbmRsZXIuYWxsb3dFdmVudChlKSA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgZWxlbWVudCA9IG51bGw7XHJcbiAgICAgICAgdmFyIHRhcmdldCA9IGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudDtcclxuXHJcbiAgICAgICAgd2hpbGUgKHRhcmdldC5wYXJlbnRFbGVtZW50ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGlmICghKHRhcmdldCBpbnN0YW5jZW9mIFNWR0VsZW1lbnQpICYmIHRhcmdldC5jbGFzc05hbWUuaW5kZXhPZignd2F2ZXMtZWZmZWN0JykgIT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50ID0gdGFyZ2V0O1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnd2F2ZXMtZWZmZWN0JykpIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQgPSB0YXJnZXQ7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0YXJnZXQgPSB0YXJnZXQucGFyZW50RWxlbWVudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBlbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQnViYmxlIHRoZSBjbGljayBhbmQgc2hvdyBlZmZlY3QgaWYgLndhdmVzLWVmZmVjdCBlbGVtIHdhcyBmb3VuZFxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBzaG93RWZmZWN0KGUpIHtcclxuICAgICAgICB2YXIgZWxlbWVudCA9IGdldFdhdmVzRWZmZWN0RWxlbWVudChlKTtcclxuXHJcbiAgICAgICAgaWYgKGVsZW1lbnQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgRWZmZWN0LnNob3coZSwgZWxlbWVudCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoJ29udG91Y2hzdGFydCcgaW4gd2luZG93KSB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgRWZmZWN0LmhpZGUsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hjYW5jZWwnLCBFZmZlY3QuaGlkZSwgZmFsc2UpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBFZmZlY3QuaGlkZSwgZmFsc2UpO1xyXG4gICAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCBFZmZlY3QuaGlkZSwgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBXYXZlcy5kaXNwbGF5RWZmZWN0ID0gZnVuY3Rpb24ob3B0aW9ucykge1xyXG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xyXG5cclxuICAgICAgICBpZiAoJ2R1cmF0aW9uJyBpbiBvcHRpb25zKSB7XHJcbiAgICAgICAgICAgIEVmZmVjdC5kdXJhdGlvbiA9IG9wdGlvbnMuZHVyYXRpb247XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL1dyYXAgaW5wdXQgaW5zaWRlIDxpPiB0YWdcclxuICAgICAgICBFZmZlY3Qud3JhcElucHV0KCQkKCcud2F2ZXMtZWZmZWN0JykpO1xyXG5cclxuICAgICAgICBpZiAoJ29udG91Y2hzdGFydCcgaW4gd2luZG93KSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHNob3dFZmZlY3QsIGZhbHNlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgc2hvd0VmZmVjdCwgZmFsc2UpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEF0dGFjaCBXYXZlcyB0byBhbiBpbnB1dCBlbGVtZW50IChvciBhbnkgZWxlbWVudCB3aGljaCBkb2Vzbid0XHJcbiAgICAgKiBidWJibGUgbW91c2V1cC9tb3VzZWRvd24gZXZlbnRzKS5cclxuICAgICAqICAgSW50ZW5kZWQgdG8gYmUgdXNlZCB3aXRoIGR5bmFtaWNhbGx5IGxvYWRlZCBmb3Jtcy9pbnB1dHMsIG9yXHJcbiAgICAgKiB3aGVyZSB0aGUgdXNlciBkb2Vzbid0IHdhbnQgYSBkZWxlZ2F0ZWQgY2xpY2sgaGFuZGxlci5cclxuICAgICAqL1xyXG4gICAgV2F2ZXMuYXR0YWNoID0gZnVuY3Rpb24oZWxlbWVudCkge1xyXG4gICAgICAgIC8vRlVUVVJFOiBhdXRvbWF0aWNhbGx5IGFkZCB3YXZlcyBjbGFzc2VzIGFuZCBhbGxvdyB1c2Vyc1xyXG4gICAgICAgIC8vIHRvIHNwZWNpZnkgdGhlbSB3aXRoIGFuIG9wdGlvbnMgcGFyYW0/IEVnLiBsaWdodC9jbGFzc2ljL2J1dHRvblxyXG4gICAgICAgIGlmIChlbGVtZW50LnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2lucHV0Jykge1xyXG4gICAgICAgICAgICBFZmZlY3Qud3JhcElucHV0KFtlbGVtZW50XSk7XHJcbiAgICAgICAgICAgIGVsZW1lbnQgPSBlbGVtZW50LnBhcmVudEVsZW1lbnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoJ29udG91Y2hzdGFydCcgaW4gd2luZG93KSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHNob3dFZmZlY3QsIGZhbHNlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgc2hvd0VmZmVjdCwgZmFsc2UpO1xyXG4gICAgfTtcclxuXHJcbiAgICB3aW5kb3cuV2F2ZXMgPSBXYXZlcztcclxuXHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgV2F2ZXMuZGlzcGxheUVmZmVjdCgpO1xyXG4gICAgfSwgZmFsc2UpO1xyXG5cclxufSkod2luZG93KTtcclxuO01hdGVyaWFsaXplLnRvYXN0ID0gZnVuY3Rpb24gKG1lc3NhZ2UsIGRpc3BsYXlMZW5ndGgsIGNsYXNzTmFtZSwgY29tcGxldGVDYWxsYmFjaykge1xyXG4gICAgY2xhc3NOYW1lID0gY2xhc3NOYW1lIHx8IFwiXCI7XHJcblxyXG4gICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b2FzdC1jb250YWluZXInKTtcclxuXHJcbiAgICAvLyBDcmVhdGUgdG9hc3QgY29udGFpbmVyIGlmIGl0IGRvZXMgbm90IGV4aXN0XHJcbiAgICBpZiAoY29udGFpbmVyID09PSBudWxsKSB7XHJcbiAgICAgICAgLy8gY3JlYXRlIG5vdGlmaWNhdGlvbiBjb250YWluZXJcclxuICAgICAgICBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBjb250YWluZXIuaWQgPSAndG9hc3QtY29udGFpbmVyJztcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU2VsZWN0IGFuZCBhcHBlbmQgdG9hc3RcclxuICAgIHZhciBuZXdUb2FzdCA9IGNyZWF0ZVRvYXN0KG1lc3NhZ2UpO1xyXG5cclxuICAgIC8vIG9ubHkgYXBwZW5kIHRvYXN0IGlmIG1lc3NhZ2UgaXMgbm90IHVuZGVmaW5lZFxyXG4gICAgaWYobWVzc2FnZSl7XHJcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKG5ld1RvYXN0KTtcclxuICAgIH1cclxuXHJcbiAgICBuZXdUb2FzdC5zdHlsZS50b3AgPSAnMzVweCc7XHJcbiAgICBuZXdUb2FzdC5zdHlsZS5vcGFjaXR5ID0gMDtcclxuXHJcbiAgICAvLyBBbmltYXRlIHRvYXN0IGluXHJcbiAgICBWZWwobmV3VG9hc3QsIHsgXCJ0b3BcIiA6IFwiMHB4XCIsIG9wYWNpdHk6IDEgfSwge2R1cmF0aW9uOiAzMDAsXHJcbiAgICAgIGVhc2luZzogJ2Vhc2VPdXRDdWJpYycsXHJcbiAgICAgIHF1ZXVlOiBmYWxzZX0pO1xyXG5cclxuICAgIC8vIEFsbG93cyB0aW1lciB0byBiZSBwYXVzZSB3aGlsZSBiZWluZyBwYW5uZWRcclxuICAgIHZhciB0aW1lTGVmdCA9IGRpc3BsYXlMZW5ndGg7XHJcbiAgICB2YXIgY291bnRlckludGVydmFsO1xyXG4gICAgaWYgKHRpbWVMZWZ0ICE9IG51bGwpICB7XHJcbiAgICAgIGNvdW50ZXJJbnRlcnZhbCA9IHNldEludGVydmFsIChmdW5jdGlvbigpe1xyXG4gICAgICAgIGlmIChuZXdUb2FzdC5wYXJlbnROb2RlID09PSBudWxsKVxyXG4gICAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwoY291bnRlckludGVydmFsKTtcclxuXHJcbiAgICAgICAgLy8gSWYgdG9hc3QgaXMgbm90IGJlaW5nIGRyYWdnZWQsIGRlY3JlYXNlIGl0cyB0aW1lIHJlbWFpbmluZ1xyXG4gICAgICAgIGlmICghbmV3VG9hc3QuY2xhc3NMaXN0LmNvbnRhaW5zKCdwYW5uaW5nJykpIHtcclxuICAgICAgICAgIHRpbWVMZWZ0IC09IDIwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRpbWVMZWZ0IDw9IDApIHtcclxuICAgICAgICAgIC8vIEFuaW1hdGUgdG9hc3Qgb3V0XHJcbiAgICAgICAgICBWZWwobmV3VG9hc3QsIHtcIm9wYWNpdHlcIjogMCwgbWFyZ2luVG9wOiAnLTQwcHgnfSwgeyBkdXJhdGlvbjogMzc1LFxyXG4gICAgICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRFeHBvJyxcclxuICAgICAgICAgICAgICBxdWV1ZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAvLyBDYWxsIHRoZSBvcHRpb25hbCBjYWxsYmFja1xyXG4gICAgICAgICAgICAgICAgaWYodHlwZW9mKGNvbXBsZXRlQ2FsbGJhY2spID09PSBcImZ1bmN0aW9uXCIpXHJcbiAgICAgICAgICAgICAgICAgIGNvbXBsZXRlQ2FsbGJhY2soKTtcclxuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSB0b2FzdCBhZnRlciBpdCB0aW1lcyBvdXRcclxuICAgICAgICAgICAgICAgIHRoaXNbMF0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzWzBdKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwoY291bnRlckludGVydmFsKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sIDIwKTtcclxuICAgIH1cclxuXHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIGNyZWF0ZVRvYXN0KGh0bWwpIHtcclxuXHJcbiAgICAgICAgLy8gQ3JlYXRlIHRvYXN0XHJcbiAgICAgICAgdmFyIHRvYXN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgdG9hc3QuY2xhc3NMaXN0LmFkZCgndG9hc3QnKTtcclxuICAgICAgICBpZiAoY2xhc3NOYW1lKSB7XHJcbiAgICAgICAgICAgIHZhciBjbGFzc2VzID0gY2xhc3NOYW1lLnNwbGl0KCcgJyk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgY291bnQgPSBjbGFzc2VzLmxlbmd0aDsgaSA8IGNvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHRvYXN0LmNsYXNzTGlzdC5hZGQoY2xhc3Nlc1tpXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSWYgdHlwZSBvZiBwYXJhbWV0ZXIgaXMgSFRNTCBFbGVtZW50XHJcbiAgICAgICAgaWYgKCB0eXBlb2YgSFRNTEVsZW1lbnQgPT09IFwib2JqZWN0XCIgPyBodG1sIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQgOiBodG1sICYmIHR5cGVvZiBodG1sID09PSBcIm9iamVjdFwiICYmIGh0bWwgIT09IG51bGwgJiYgaHRtbC5ub2RlVHlwZSA9PT0gMSAmJiB0eXBlb2YgaHRtbC5ub2RlTmFtZT09PVwic3RyaW5nXCJcclxuKSB7XHJcbiAgICAgICAgICB0b2FzdC5hcHBlbmRDaGlsZChodG1sKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoaHRtbCBpbnN0YW5jZW9mIGpRdWVyeSkge1xyXG4gICAgICAgICAgLy8gQ2hlY2sgaWYgaXQgaXMgalF1ZXJ5IG9iamVjdFxyXG4gICAgICAgICAgdG9hc3QuYXBwZW5kQ2hpbGQoaHRtbFswXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgLy8gSW5zZXJ0IGFzIHRleHQ7XHJcbiAgICAgICAgICB0b2FzdC5pbm5lckhUTUwgPSBodG1sO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBCaW5kIGhhbW1lclxyXG4gICAgICAgIHZhciBoYW1tZXJIYW5kbGVyID0gbmV3IEhhbW1lcih0b2FzdCwge3ByZXZlbnRfZGVmYXVsdDogZmFsc2V9KTtcclxuICAgICAgICBoYW1tZXJIYW5kbGVyLm9uKCdwYW4nLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICB2YXIgZGVsdGFYID0gZS5kZWx0YVg7XHJcbiAgICAgICAgICB2YXIgYWN0aXZhdGlvbkRpc3RhbmNlID0gODA7XHJcblxyXG4gICAgICAgICAgLy8gQ2hhbmdlIHRvYXN0IHN0YXRlXHJcbiAgICAgICAgICBpZiAoIXRvYXN0LmNsYXNzTGlzdC5jb250YWlucygncGFubmluZycpKXtcclxuICAgICAgICAgICAgdG9hc3QuY2xhc3NMaXN0LmFkZCgncGFubmluZycpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHZhciBvcGFjaXR5UGVyY2VudCA9IDEtTWF0aC5hYnMoZGVsdGFYIC8gYWN0aXZhdGlvbkRpc3RhbmNlKTtcclxuICAgICAgICAgIGlmIChvcGFjaXR5UGVyY2VudCA8IDApXHJcbiAgICAgICAgICAgIG9wYWNpdHlQZXJjZW50ID0gMDtcclxuXHJcbiAgICAgICAgICBWZWwodG9hc3QsIHtsZWZ0OiBkZWx0YVgsIG9wYWNpdHk6IG9wYWNpdHlQZXJjZW50IH0sIHtkdXJhdGlvbjogNTAsIHF1ZXVlOiBmYWxzZSwgZWFzaW5nOiAnZWFzZU91dFF1YWQnfSk7XHJcblxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBoYW1tZXJIYW5kbGVyLm9uKCdwYW5lbmQnLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICB2YXIgZGVsdGFYID0gZS5kZWx0YVg7XHJcbiAgICAgICAgICB2YXIgYWN0aXZhdGlvbkRpc3RhbmNlID0gODA7XHJcblxyXG4gICAgICAgICAgLy8gSWYgdG9hc3QgZHJhZ2dlZCBwYXN0IGFjdGl2YXRpb24gcG9pbnRcclxuICAgICAgICAgIGlmIChNYXRoLmFicyhkZWx0YVgpID4gYWN0aXZhdGlvbkRpc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIFZlbCh0b2FzdCwge21hcmdpblRvcDogJy00MHB4J30sIHsgZHVyYXRpb246IDM3NSxcclxuICAgICAgICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRFeHBvJyxcclxuICAgICAgICAgICAgICAgIHF1ZXVlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICBpZih0eXBlb2YoY29tcGxldGVDYWxsYmFjaykgPT09IFwiZnVuY3Rpb25cIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlQ2FsbGJhY2soKTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB0b2FzdC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRvYXN0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdG9hc3QuY2xhc3NMaXN0LnJlbW92ZSgncGFubmluZycpO1xyXG4gICAgICAgICAgICAvLyBQdXQgdG9hc3QgYmFjayBpbnRvIG9yaWdpbmFsIHBvc2l0aW9uXHJcbiAgICAgICAgICAgIFZlbCh0b2FzdCwgeyBsZWZ0OiAwLCBvcGFjaXR5OiAxIH0sIHsgZHVyYXRpb246IDMwMCxcclxuICAgICAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0RXhwbycsXHJcbiAgICAgICAgICAgICAgcXVldWU6IGZhbHNlXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRvYXN0O1xyXG4gICAgfVxyXG59O1xyXG47KGZ1bmN0aW9uICgkKSB7XHJcblxyXG4gIHZhciBtZXRob2RzID0ge1xyXG4gICAgaW5pdCA6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcclxuICAgICAgdmFyIGRlZmF1bHRzID0ge1xyXG4gICAgICAgIG1lbnVXaWR0aDogMzAwLFxyXG4gICAgICAgIGVkZ2U6ICdsZWZ0JyxcclxuICAgICAgICBjbG9zZU9uQ2xpY2s6IGZhbHNlLFxyXG4gICAgICAgIGRyYWdnYWJsZTogdHJ1ZVxyXG4gICAgICB9O1xyXG4gICAgICBvcHRpb25zID0gJC5leHRlbmQoZGVmYXVsdHMsIG9wdGlvbnMpO1xyXG5cclxuICAgICAgJCh0aGlzKS5lYWNoKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcclxuICAgICAgICB2YXIgbWVudV9pZCA9ICQoXCIjXCIrICR0aGlzLmF0dHIoJ2RhdGEtYWN0aXZhdGVzJykpO1xyXG5cclxuICAgICAgICAvLyBTZXQgdG8gd2lkdGhcclxuICAgICAgICBpZiAob3B0aW9ucy5tZW51V2lkdGggIT0gMzAwKSB7XHJcbiAgICAgICAgICBtZW51X2lkLmNzcygnd2lkdGgnLCBvcHRpb25zLm1lbnVXaWR0aCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBBZGQgVG91Y2ggQXJlYVxyXG4gICAgICAgIHZhciAkZHJhZ1RhcmdldDtcclxuICAgICAgICBpZiAob3B0aW9ucy5kcmFnZ2FibGUpIHtcclxuICAgICAgICAgICRkcmFnVGFyZ2V0ID0gJCgnPGRpdiBjbGFzcz1cImRyYWctdGFyZ2V0XCI+PC9kaXY+JykuYXR0cignZGF0YS1zaWRlbmF2JywgJHRoaXMuYXR0cignZGF0YS1hY3RpdmF0ZXMnKSk7XHJcbiAgICAgICAgICAkKCdib2R5JykuYXBwZW5kKCRkcmFnVGFyZ2V0KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgJGRyYWdUYXJnZXQgPSAkKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAob3B0aW9ucy5lZGdlID09ICdsZWZ0Jykge1xyXG4gICAgICAgICAgbWVudV9pZC5jc3MoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGVYKC0xMDAlKScpO1xyXG4gICAgICAgICAgJGRyYWdUYXJnZXQuY3NzKHsnbGVmdCc6IDB9KTsgLy8gQWRkIFRvdWNoIEFyZWFcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICBtZW51X2lkLmFkZENsYXNzKCdyaWdodC1hbGlnbmVkJykgLy8gQ2hhbmdlIHRleHQtYWxpZ25tZW50IHRvIHJpZ2h0XHJcbiAgICAgICAgICAgIC5jc3MoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGVYKDEwMCUpJyk7XHJcbiAgICAgICAgICAkZHJhZ1RhcmdldC5jc3MoeydyaWdodCc6IDB9KTsgLy8gQWRkIFRvdWNoIEFyZWFcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIElmIGZpeGVkIHNpZGVuYXYsIGJyaW5nIG1lbnUgb3V0XHJcbiAgICAgICAgaWYgKG1lbnVfaWQuaGFzQ2xhc3MoJ2ZpeGVkJykpIHtcclxuICAgICAgICAgICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoID4gOTkyKSB7XHJcbiAgICAgICAgICAgICAgbWVudV9pZC5jc3MoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGVYKDApJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gV2luZG93IHJlc2l6ZSB0byByZXNldCBvbiBsYXJnZSBzY3JlZW5zIGZpeGVkXHJcbiAgICAgICAgaWYgKG1lbnVfaWQuaGFzQ2xhc3MoJ2ZpeGVkJykpIHtcclxuICAgICAgICAgICQod2luZG93KS5yZXNpemUoIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBpZiAod2luZG93LmlubmVyV2lkdGggPiA5OTIpIHtcclxuICAgICAgICAgICAgICAvLyBDbG9zZSBtZW51IGlmIHdpbmRvdyBpcyByZXNpemVkIGJpZ2dlciB0aGFuIDk5MiBhbmQgdXNlciBoYXMgZml4ZWQgc2lkZW5hdlxyXG4gICAgICAgICAgICAgIGlmICgkKCcjc2lkZW5hdi1vdmVybGF5JykubGVuZ3RoICE9PSAwICYmIG1lbnVPdXQpIHtcclxuICAgICAgICAgICAgICAgIHJlbW92ZU1lbnUodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gbWVudV9pZC5yZW1vdmVBdHRyKCdzdHlsZScpO1xyXG4gICAgICAgICAgICAgICAgbWVudV9pZC5jc3MoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGVYKDAlKScpO1xyXG4gICAgICAgICAgICAgICAgLy8gbWVudV9pZC5jc3MoJ3dpZHRoJywgb3B0aW9ucy5tZW51V2lkdGgpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChtZW51T3V0ID09PSBmYWxzZSl7XHJcbiAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZWRnZSA9PT0gJ2xlZnQnKSB7XHJcbiAgICAgICAgICAgICAgICBtZW51X2lkLmNzcygndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZVgoLTEwMCUpJyk7XHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG1lbnVfaWQuY3NzKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlWCgxMDAlKScpO1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGlmIGNsb3NlT25DbGljaywgdGhlbiBhZGQgY2xvc2UgZXZlbnQgZm9yIGFsbCBhIHRhZ3MgaW4gc2lkZSBzaWRlTmF2XHJcbiAgICAgICAgaWYgKG9wdGlvbnMuY2xvc2VPbkNsaWNrID09PSB0cnVlKSB7XHJcbiAgICAgICAgICBtZW51X2lkLm9uKFwiY2xpY2suaXRlbWNsaWNrXCIsIFwiYTpub3QoLmNvbGxhcHNpYmxlLWhlYWRlcilcIiwgZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgcmVtb3ZlTWVudSgpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgcmVtb3ZlTWVudSA9IGZ1bmN0aW9uKHJlc3RvcmVOYXYpIHtcclxuICAgICAgICAgIHBhbm5pbmcgPSBmYWxzZTtcclxuICAgICAgICAgIG1lbnVPdXQgPSBmYWxzZTtcclxuICAgICAgICAgIC8vIFJlZW5hYmxlIHNjcm9sbGluZ1xyXG4gICAgICAgICAgJCgnYm9keScpLmNzcyh7XHJcbiAgICAgICAgICAgIG92ZXJmbG93OiAnJyxcclxuICAgICAgICAgICAgd2lkdGg6ICcnXHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAkKCcjc2lkZW5hdi1vdmVybGF5JykudmVsb2NpdHkoe29wYWNpdHk6IDB9LCB7ZHVyYXRpb246IDIwMCxcclxuICAgICAgICAgICAgICBxdWV1ZTogZmFsc2UsIGVhc2luZzogJ2Vhc2VPdXRRdWFkJyxcclxuICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICQodGhpcykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIH0gfSk7XHJcbiAgICAgICAgICBpZiAob3B0aW9ucy5lZGdlID09PSAnbGVmdCcpIHtcclxuICAgICAgICAgICAgLy8gUmVzZXQgcGhhbnRvbSBkaXZcclxuICAgICAgICAgICAgJGRyYWdUYXJnZXQuY3NzKHt3aWR0aDogJycsIHJpZ2h0OiAnJywgbGVmdDogJzAnfSk7XHJcbiAgICAgICAgICAgIG1lbnVfaWQudmVsb2NpdHkoXHJcbiAgICAgICAgICAgICAgeyd0cmFuc2xhdGVYJzogJy0xMDAlJ30sXHJcbiAgICAgICAgICAgICAgeyBkdXJhdGlvbjogMjAwLFxyXG4gICAgICAgICAgICAgICAgcXVldWU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgZWFzaW5nOiAnZWFzZU91dEN1YmljJyxcclxuICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgaWYgKHJlc3RvcmVOYXYgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBSZXN0b3JlIEZpeGVkIHNpZGVuYXZcclxuICAgICAgICAgICAgICAgICAgICBtZW51X2lkLnJlbW92ZUF0dHIoJ3N0eWxlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVudV9pZC5jc3MoJ3dpZHRoJywgb3B0aW9ucy5tZW51V2lkdGgpO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBSZXNldCBwaGFudG9tIGRpdlxyXG4gICAgICAgICAgICAkZHJhZ1RhcmdldC5jc3Moe3dpZHRoOiAnJywgcmlnaHQ6ICcwJywgbGVmdDogJyd9KTtcclxuICAgICAgICAgICAgbWVudV9pZC52ZWxvY2l0eShcclxuICAgICAgICAgICAgICB7J3RyYW5zbGF0ZVgnOiAnMTAwJSd9LFxyXG4gICAgICAgICAgICAgIHsgZHVyYXRpb246IDIwMCxcclxuICAgICAgICAgICAgICAgIHF1ZXVlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRDdWJpYycsXHJcbiAgICAgICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgIGlmIChyZXN0b3JlTmF2ID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVzdG9yZSBGaXhlZCBzaWRlbmF2XHJcbiAgICAgICAgICAgICAgICAgICAgbWVudV9pZC5yZW1vdmVBdHRyKCdzdHlsZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1lbnVfaWQuY3NzKCd3aWR0aCcsIG9wdGlvbnMubWVudVdpZHRoKTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG5cclxuXHJcbiAgICAgICAgLy8gVG91Y2ggRXZlbnRcclxuICAgICAgICB2YXIgcGFubmluZyA9IGZhbHNlO1xyXG4gICAgICAgIHZhciBtZW51T3V0ID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGlmIChvcHRpb25zLmRyYWdnYWJsZSkge1xyXG4gICAgICAgICAgJGRyYWdUYXJnZXQub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgaWYgKG1lbnVPdXQpIHtcclxuICAgICAgICAgICAgICByZW1vdmVNZW51KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICRkcmFnVGFyZ2V0LmhhbW1lcih7XHJcbiAgICAgICAgICAgIHByZXZlbnRfZGVmYXVsdDogZmFsc2VcclxuICAgICAgICAgIH0pLmJpbmQoJ3BhbicsIGZ1bmN0aW9uKGUpIHtcclxuXHJcbiAgICAgICAgICAgIGlmIChlLmdlc3R1cmUucG9pbnRlclR5cGUgPT0gXCJ0b3VjaFwiKSB7XHJcblxyXG4gICAgICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSBlLmdlc3R1cmUuZGlyZWN0aW9uO1xyXG4gICAgICAgICAgICAgIHZhciB4ID0gZS5nZXN0dXJlLmNlbnRlci54O1xyXG4gICAgICAgICAgICAgIHZhciB5ID0gZS5nZXN0dXJlLmNlbnRlci55O1xyXG4gICAgICAgICAgICAgIHZhciB2ZWxvY2l0eVggPSBlLmdlc3R1cmUudmVsb2NpdHlYO1xyXG5cclxuICAgICAgICAgICAgICAvLyBEaXNhYmxlIFNjcm9sbGluZ1xyXG4gICAgICAgICAgICAgIHZhciAkYm9keSA9ICQoJ2JvZHknKTtcclxuICAgICAgICAgICAgICB2YXIgJG92ZXJsYXkgPSAkKCcjc2lkZW5hdi1vdmVybGF5Jyk7XHJcbiAgICAgICAgICAgICAgdmFyIG9sZFdpZHRoID0gJGJvZHkuaW5uZXJXaWR0aCgpO1xyXG4gICAgICAgICAgICAgICRib2R5LmNzcygnb3ZlcmZsb3cnLCAnaGlkZGVuJyk7XHJcbiAgICAgICAgICAgICAgJGJvZHkud2lkdGgob2xkV2lkdGgpO1xyXG5cclxuICAgICAgICAgICAgICAvLyBJZiBvdmVybGF5IGRvZXMgbm90IGV4aXN0LCBjcmVhdGUgb25lIGFuZCBpZiBpdCBpcyBjbGlja2VkLCBjbG9zZSBtZW51XHJcbiAgICAgICAgICAgICAgaWYgKCRvdmVybGF5Lmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgJG92ZXJsYXkgPSAkKCc8ZGl2IGlkPVwic2lkZW5hdi1vdmVybGF5XCI+PC9kaXY+Jyk7XHJcbiAgICAgICAgICAgICAgICAkb3ZlcmxheS5jc3MoJ29wYWNpdHknLCAwKS5jbGljayggZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgcmVtb3ZlTWVudSgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAkKCdib2R5JykuYXBwZW5kKCRvdmVybGF5KTtcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIC8vIEtlZXAgd2l0aGluIGJvdW5kYXJpZXNcclxuICAgICAgICAgICAgICBpZiAob3B0aW9ucy5lZGdlID09PSAnbGVmdCcpIHtcclxuICAgICAgICAgICAgICAgIGlmICh4ID4gb3B0aW9ucy5tZW51V2lkdGgpIHsgeCA9IG9wdGlvbnMubWVudVdpZHRoOyB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmICh4IDwgMCkgeyB4ID0gMDsgfVxyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZWRnZSA9PT0gJ2xlZnQnKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBMZWZ0IERpcmVjdGlvblxyXG4gICAgICAgICAgICAgICAgaWYgKHggPCAob3B0aW9ucy5tZW51V2lkdGggLyAyKSkgeyBtZW51T3V0ID0gZmFsc2U7IH1cclxuICAgICAgICAgICAgICAgIC8vIFJpZ2h0IERpcmVjdGlvblxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoeCA+PSAob3B0aW9ucy5tZW51V2lkdGggLyAyKSkgeyBtZW51T3V0ID0gdHJ1ZTsgfVxyXG4gICAgICAgICAgICAgICAgbWVudV9pZC5jc3MoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGVYKCcgKyAoeCAtIG9wdGlvbnMubWVudVdpZHRoKSArICdweCknKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBMZWZ0IERpcmVjdGlvblxyXG4gICAgICAgICAgICAgICAgaWYgKHggPCAod2luZG93LmlubmVyV2lkdGggLSBvcHRpb25zLm1lbnVXaWR0aCAvIDIpKSB7XHJcbiAgICAgICAgICAgICAgICAgIG1lbnVPdXQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gUmlnaHQgRGlyZWN0aW9uXHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmICh4ID49ICh3aW5kb3cuaW5uZXJXaWR0aCAtIG9wdGlvbnMubWVudVdpZHRoIC8gMikpIHtcclxuICAgICAgICAgICAgICAgICBtZW51T3V0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciByaWdodFBvcyA9ICh4IC0gb3B0aW9ucy5tZW51V2lkdGggLyAyKTtcclxuICAgICAgICAgICAgICAgIGlmIChyaWdodFBvcyA8IDApIHtcclxuICAgICAgICAgICAgICAgICAgcmlnaHRQb3MgPSAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIG1lbnVfaWQuY3NzKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlWCgnICsgcmlnaHRQb3MgKyAncHgpJyk7XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgICAgLy8gUGVyY2VudGFnZSBvdmVybGF5XHJcbiAgICAgICAgICAgICAgdmFyIG92ZXJsYXlQZXJjO1xyXG4gICAgICAgICAgICAgIGlmIChvcHRpb25zLmVkZ2UgPT09ICdsZWZ0Jykge1xyXG4gICAgICAgICAgICAgICAgb3ZlcmxheVBlcmMgPSB4IC8gb3B0aW9ucy5tZW51V2lkdGg7XHJcbiAgICAgICAgICAgICAgICAkb3ZlcmxheS52ZWxvY2l0eSh7b3BhY2l0eTogb3ZlcmxheVBlcmMgfSwge2R1cmF0aW9uOiAxMCwgcXVldWU6IGZhbHNlLCBlYXNpbmc6ICdlYXNlT3V0UXVhZCd9KTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBvdmVybGF5UGVyYyA9IE1hdGguYWJzKCh4IC0gd2luZG93LmlubmVyV2lkdGgpIC8gb3B0aW9ucy5tZW51V2lkdGgpO1xyXG4gICAgICAgICAgICAgICAgJG92ZXJsYXkudmVsb2NpdHkoe29wYWNpdHk6IG92ZXJsYXlQZXJjIH0sIHtkdXJhdGlvbjogMTAsIHF1ZXVlOiBmYWxzZSwgZWFzaW5nOiAnZWFzZU91dFF1YWQnfSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgfSkuYmluZCgncGFuZW5kJywgZnVuY3Rpb24oZSkge1xyXG5cclxuICAgICAgICAgICAgaWYgKGUuZ2VzdHVyZS5wb2ludGVyVHlwZSA9PSBcInRvdWNoXCIpIHtcclxuICAgICAgICAgICAgICB2YXIgJG92ZXJsYXkgPSAkKCc8ZGl2IGlkPVwic2lkZW5hdi1vdmVybGF5XCI+PC9kaXY+Jyk7XHJcbiAgICAgICAgICAgICAgdmFyIHZlbG9jaXR5WCA9IGUuZ2VzdHVyZS52ZWxvY2l0eVg7XHJcbiAgICAgICAgICAgICAgdmFyIHggPSBlLmdlc3R1cmUuY2VudGVyLng7XHJcbiAgICAgICAgICAgICAgdmFyIGxlZnRQb3MgPSB4IC0gb3B0aW9ucy5tZW51V2lkdGg7XHJcbiAgICAgICAgICAgICAgdmFyIHJpZ2h0UG9zID0geCAtIG9wdGlvbnMubWVudVdpZHRoIC8gMjtcclxuICAgICAgICAgICAgICBpZiAobGVmdFBvcyA+IDAgKSB7XHJcbiAgICAgICAgICAgICAgICBsZWZ0UG9zID0gMDtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgaWYgKHJpZ2h0UG9zIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgcmlnaHRQb3MgPSAwO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBwYW5uaW5nID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgIGlmIChvcHRpb25zLmVkZ2UgPT09ICdsZWZ0Jykge1xyXG4gICAgICAgICAgICAgICAgLy8gSWYgdmVsb2NpdHlYIDw9IDAuMyB0aGVuIHRoZSB1c2VyIGlzIGZsaW5naW5nIHRoZSBtZW51IGNsb3NlZCBzbyBpZ25vcmUgbWVudU91dFxyXG4gICAgICAgICAgICAgICAgaWYgKChtZW51T3V0ICYmIHZlbG9jaXR5WCA8PSAwLjMpIHx8IHZlbG9jaXR5WCA8IC0wLjUpIHtcclxuICAgICAgICAgICAgICAgICAgLy8gUmV0dXJuIG1lbnUgdG8gb3BlblxyXG4gICAgICAgICAgICAgICAgICBpZiAobGVmdFBvcyAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lbnVfaWQudmVsb2NpdHkoeyd0cmFuc2xhdGVYJzogWzAsIGxlZnRQb3NdfSwge2R1cmF0aW9uOiAzMDAsIHF1ZXVlOiBmYWxzZSwgZWFzaW5nOiAnZWFzZU91dFF1YWQnfSk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICRvdmVybGF5LnZlbG9jaXR5KHtvcGFjaXR5OiAxIH0sIHtkdXJhdGlvbjogNTAsIHF1ZXVlOiBmYWxzZSwgZWFzaW5nOiAnZWFzZU91dFF1YWQnfSk7XHJcbiAgICAgICAgICAgICAgICAgICRkcmFnVGFyZ2V0LmNzcyh7d2lkdGg6ICc1MCUnLCByaWdodDogMCwgbGVmdDogJyd9KTtcclxuICAgICAgICAgICAgICAgICAgbWVudU91dCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmICghbWVudU91dCB8fCB2ZWxvY2l0eVggPiAwLjMpIHtcclxuICAgICAgICAgICAgICAgICAgLy8gRW5hYmxlIFNjcm9sbGluZ1xyXG4gICAgICAgICAgICAgICAgICAkKCdib2R5JykuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICBvdmVyZmxvdzogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICcnXHJcbiAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAvLyBTbGlkZSBtZW51IGNsb3NlZFxyXG4gICAgICAgICAgICAgICAgICBtZW51X2lkLnZlbG9jaXR5KHsndHJhbnNsYXRlWCc6IFstMSAqIG9wdGlvbnMubWVudVdpZHRoIC0gMTAsIGxlZnRQb3NdfSwge2R1cmF0aW9uOiAyMDAsIHF1ZXVlOiBmYWxzZSwgZWFzaW5nOiAnZWFzZU91dFF1YWQnfSk7XHJcbiAgICAgICAgICAgICAgICAgICRvdmVybGF5LnZlbG9jaXR5KHtvcGFjaXR5OiAwIH0sIHtkdXJhdGlvbjogMjAwLCBxdWV1ZTogZmFsc2UsIGVhc2luZzogJ2Vhc2VPdXRRdWFkJyxcclxuICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9fSk7XHJcbiAgICAgICAgICAgICAgICAgICRkcmFnVGFyZ2V0LmNzcyh7d2lkdGg6ICcxMHB4JywgcmlnaHQ6ICcnLCBsZWZ0OiAwfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKChtZW51T3V0ICYmIHZlbG9jaXR5WCA+PSAtMC4zKSB8fCB2ZWxvY2l0eVggPiAwLjUpIHtcclxuICAgICAgICAgICAgICAgICAgLy8gUmV0dXJuIG1lbnUgdG8gb3BlblxyXG4gICAgICAgICAgICAgICAgICBpZiAocmlnaHRQb3MgIT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBtZW51X2lkLnZlbG9jaXR5KHsndHJhbnNsYXRlWCc6IFswLCByaWdodFBvc119LCB7ZHVyYXRpb246IDMwMCwgcXVldWU6IGZhbHNlLCBlYXNpbmc6ICdlYXNlT3V0UXVhZCd9KTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgJG92ZXJsYXkudmVsb2NpdHkoe29wYWNpdHk6IDEgfSwge2R1cmF0aW9uOiA1MCwgcXVldWU6IGZhbHNlLCBlYXNpbmc6ICdlYXNlT3V0UXVhZCd9KTtcclxuICAgICAgICAgICAgICAgICAgJGRyYWdUYXJnZXQuY3NzKHt3aWR0aDogJzUwJScsIHJpZ2h0OiAnJywgbGVmdDogMH0pO1xyXG4gICAgICAgICAgICAgICAgICBtZW51T3V0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFtZW51T3V0IHx8IHZlbG9jaXR5WCA8IC0wLjMpIHtcclxuICAgICAgICAgICAgICAgICAgLy8gRW5hYmxlIFNjcm9sbGluZ1xyXG4gICAgICAgICAgICAgICAgICAkKCdib2R5JykuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICBvdmVyZmxvdzogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICcnXHJcbiAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgLy8gU2xpZGUgbWVudSBjbG9zZWRcclxuICAgICAgICAgICAgICAgICAgbWVudV9pZC52ZWxvY2l0eSh7J3RyYW5zbGF0ZVgnOiBbb3B0aW9ucy5tZW51V2lkdGggKyAxMCwgcmlnaHRQb3NdfSwge2R1cmF0aW9uOiAyMDAsIHF1ZXVlOiBmYWxzZSwgZWFzaW5nOiAnZWFzZU91dFF1YWQnfSk7XHJcbiAgICAgICAgICAgICAgICAgICRvdmVybGF5LnZlbG9jaXR5KHtvcGFjaXR5OiAwIH0sIHtkdXJhdGlvbjogMjAwLCBxdWV1ZTogZmFsc2UsIGVhc2luZzogJ2Vhc2VPdXRRdWFkJyxcclxuICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9fSk7XHJcbiAgICAgICAgICAgICAgICAgICRkcmFnVGFyZ2V0LmNzcyh7d2lkdGg6ICcxMHB4JywgcmlnaHQ6IDAsIGxlZnQ6ICcnfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkdGhpcy5jbGljayhmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGlmIChtZW51T3V0ID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIG1lbnVPdXQgPSBmYWxzZTtcclxuICAgICAgICAgICAgcGFubmluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICByZW1vdmVNZW51KCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgIC8vIERpc2FibGUgU2Nyb2xsaW5nXHJcbiAgICAgICAgICAgIHZhciAkYm9keSA9ICQoJ2JvZHknKTtcclxuICAgICAgICAgICAgdmFyICRvdmVybGF5ID0gJCgnPGRpdiBpZD1cInNpZGVuYXYtb3ZlcmxheVwiPjwvZGl2PicpO1xyXG4gICAgICAgICAgICB2YXIgb2xkV2lkdGggPSAkYm9keS5pbm5lcldpZHRoKCk7XHJcbiAgICAgICAgICAgICRib2R5LmNzcygnb3ZlcmZsb3cnLCAnaGlkZGVuJyk7XHJcbiAgICAgICAgICAgICRib2R5LndpZHRoKG9sZFdpZHRoKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFB1c2ggY3VycmVudCBkcmFnIHRhcmdldCBvbiB0b3Agb2YgRE9NIHRyZWVcclxuICAgICAgICAgICAgJCgnYm9keScpLmFwcGVuZCgkZHJhZ1RhcmdldCk7XHJcblxyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5lZGdlID09PSAnbGVmdCcpIHtcclxuICAgICAgICAgICAgICAkZHJhZ1RhcmdldC5jc3Moe3dpZHRoOiAnNTAlJywgcmlnaHQ6IDAsIGxlZnQ6ICcnfSk7XHJcbiAgICAgICAgICAgICAgbWVudV9pZC52ZWxvY2l0eSh7J3RyYW5zbGF0ZVgnOiBbMCwgLTEgKiBvcHRpb25zLm1lbnVXaWR0aF19LCB7ZHVyYXRpb246IDMwMCwgcXVldWU6IGZhbHNlLCBlYXNpbmc6ICdlYXNlT3V0UXVhZCd9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAkZHJhZ1RhcmdldC5jc3Moe3dpZHRoOiAnNTAlJywgcmlnaHQ6ICcnLCBsZWZ0OiAwfSk7XHJcbiAgICAgICAgICAgICAgbWVudV9pZC52ZWxvY2l0eSh7J3RyYW5zbGF0ZVgnOiBbMCwgb3B0aW9ucy5tZW51V2lkdGhdfSwge2R1cmF0aW9uOiAzMDAsIHF1ZXVlOiBmYWxzZSwgZWFzaW5nOiAnZWFzZU91dFF1YWQnfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICRvdmVybGF5LmNzcygnb3BhY2l0eScsIDApXHJcbiAgICAgICAgICAgIC5jbGljayhmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgIG1lbnVPdXQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICBwYW5uaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgcmVtb3ZlTWVudSgpO1xyXG4gICAgICAgICAgICAgICRvdmVybGF5LnZlbG9jaXR5KHtvcGFjaXR5OiAwfSwge2R1cmF0aW9uOiAzMDAsIHF1ZXVlOiBmYWxzZSwgZWFzaW5nOiAnZWFzZU91dFF1YWQnLFxyXG4gICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSB9KTtcclxuXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAkKCdib2R5JykuYXBwZW5kKCRvdmVybGF5KTtcclxuICAgICAgICAgICAgJG92ZXJsYXkudmVsb2NpdHkoe29wYWNpdHk6IDF9LCB7ZHVyYXRpb246IDMwMCwgcXVldWU6IGZhbHNlLCBlYXNpbmc6ICdlYXNlT3V0UXVhZCcsXHJcbiAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIG1lbnVPdXQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgcGFubmluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuXHJcblxyXG4gICAgfSxcclxuICAgIGRlc3Ryb3k6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgdmFyICRvdmVybGF5ID0gJCgnI3NpZGVuYXYtb3ZlcmxheScpO1xyXG4gICAgICB2YXIgJGRyYWdUYXJnZXQgPSAkKCcuZHJhZy10YXJnZXRbZGF0YS1zaWRlbmF2PVwiJyArICQodGhpcykuYXR0cignZGF0YS1hY3RpdmF0ZXMnKSArICdcIl0nKTtcclxuICAgICAgJG92ZXJsYXkudHJpZ2dlcignY2xpY2snKTtcclxuICAgICAgJGRyYWdUYXJnZXQucmVtb3ZlKCk7XHJcbiAgICAgICQodGhpcykub2ZmKCdjbGljaycpO1xyXG4gICAgICAkb3ZlcmxheS5yZW1vdmUoKTtcclxuICAgIH0sXHJcbiAgICBzaG93IDogZnVuY3Rpb24oKSB7XHJcbiAgICAgIHRoaXMudHJpZ2dlcignY2xpY2snKTtcclxuICAgIH0sXHJcbiAgICBoaWRlIDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICQoJyNzaWRlbmF2LW92ZXJsYXknKS50cmlnZ2VyKCdjbGljaycpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG5cclxuICAgICQuZm4uc2lkZU5hdiA9IGZ1bmN0aW9uKG1ldGhvZE9yT3B0aW9ucykge1xyXG4gICAgICBpZiAoIG1ldGhvZHNbbWV0aG9kT3JPcHRpb25zXSApIHtcclxuICAgICAgICByZXR1cm4gbWV0aG9kc1sgbWV0aG9kT3JPcHRpb25zIF0uYXBwbHkoIHRoaXMsIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKCBhcmd1bWVudHMsIDEgKSk7XHJcbiAgICAgIH0gZWxzZSBpZiAoIHR5cGVvZiBtZXRob2RPck9wdGlvbnMgPT09ICdvYmplY3QnIHx8ICEgbWV0aG9kT3JPcHRpb25zICkge1xyXG4gICAgICAgIC8vIERlZmF1bHQgdG8gXCJpbml0XCJcclxuICAgICAgICByZXR1cm4gbWV0aG9kcy5pbml0LmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAkLmVycm9yKCAnTWV0aG9kICcgKyAgbWV0aG9kT3JPcHRpb25zICsgJyBkb2VzIG5vdCBleGlzdCBvbiBqUXVlcnkuc2lkZU5hdicgKTtcclxuICAgICAgfVxyXG4gICAgfTsgLy8gUGx1Z2luIGVuZFxyXG59KCBqUXVlcnkgKSk7XHJcbjsvKipcclxuICogRXh0ZW5kIGpxdWVyeSB3aXRoIGEgc2Nyb2xsc3B5IHBsdWdpbi5cclxuICogVGhpcyB3YXRjaGVzIHRoZSB3aW5kb3cgc2Nyb2xsIGFuZCBmaXJlcyBldmVudHMgd2hlbiBlbGVtZW50cyBhcmUgc2Nyb2xsZWQgaW50byB2aWV3cG9ydC5cclxuICpcclxuICogdGhyb3R0bGUoKSBhbmQgZ2V0VGltZSgpIHRha2VuIGZyb20gVW5kZXJzY29yZS5qc1xyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vamFzaGtlbmFzL3VuZGVyc2NvcmVcclxuICpcclxuICogQGF1dGhvciBDb3B5cmlnaHQgMjAxMyBKb2huIFNtYXJ0XHJcbiAqIEBsaWNlbnNlIGh0dHBzOi8vcmF3LmdpdGh1Yi5jb20vdGhlc21hcnQvanF1ZXJ5LXNjcm9sbHNweS9tYXN0ZXIvTElDRU5TRVxyXG4gKiBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS90aGVzbWFydFxyXG4gKiBAdmVyc2lvbiAwLjEuMlxyXG4gKi9cclxuKGZ1bmN0aW9uKCQpIHtcclxuXHJcblx0dmFyIGpXaW5kb3cgPSAkKHdpbmRvdyk7XHJcblx0dmFyIGVsZW1lbnRzID0gW107XHJcblx0dmFyIGVsZW1lbnRzSW5WaWV3ID0gW107XHJcblx0dmFyIGlzU3B5aW5nID0gZmFsc2U7XHJcblx0dmFyIHRpY2tzID0gMDtcclxuXHR2YXIgdW5pcXVlX2lkID0gMTtcclxuXHR2YXIgb2Zmc2V0ID0ge1xyXG5cdFx0dG9wIDogMCxcclxuXHRcdHJpZ2h0IDogMCxcclxuXHRcdGJvdHRvbSA6IDAsXHJcblx0XHRsZWZ0IDogMCxcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEZpbmQgZWxlbWVudHMgdGhhdCBhcmUgd2l0aGluIHRoZSBib3VuZGFyeVxyXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSB0b3BcclxuXHQgKiBAcGFyYW0ge251bWJlcn0gcmlnaHRcclxuXHQgKiBAcGFyYW0ge251bWJlcn0gYm90dG9tXHJcblx0ICogQHBhcmFtIHtudW1iZXJ9IGxlZnRcclxuXHQgKiBAcmV0dXJuIHtqUXVlcnl9XHRcdEEgY29sbGVjdGlvbiBvZiBlbGVtZW50c1xyXG5cdCAqL1xyXG5cdGZ1bmN0aW9uIGZpbmRFbGVtZW50cyh0b3AsIHJpZ2h0LCBib3R0b20sIGxlZnQpIHtcclxuXHRcdHZhciBoaXRzID0gJCgpO1xyXG5cdFx0JC5lYWNoKGVsZW1lbnRzLCBmdW5jdGlvbihpLCBlbGVtZW50KSB7XHJcblx0XHRcdGlmIChlbGVtZW50LmhlaWdodCgpID4gMCkge1xyXG5cdFx0XHRcdHZhciBlbFRvcCA9IGVsZW1lbnQub2Zmc2V0KCkudG9wLFxyXG5cdFx0XHRcdFx0ZWxMZWZ0ID0gZWxlbWVudC5vZmZzZXQoKS5sZWZ0LFxyXG5cdFx0XHRcdFx0ZWxSaWdodCA9IGVsTGVmdCArIGVsZW1lbnQud2lkdGgoKSxcclxuXHRcdFx0XHRcdGVsQm90dG9tID0gZWxUb3AgKyBlbGVtZW50LmhlaWdodCgpO1xyXG5cclxuXHRcdFx0XHR2YXIgaXNJbnRlcnNlY3QgPSAhKGVsTGVmdCA+IHJpZ2h0IHx8XHJcblx0XHRcdFx0XHRlbFJpZ2h0IDwgbGVmdCB8fFxyXG5cdFx0XHRcdFx0ZWxUb3AgPiBib3R0b20gfHxcclxuXHRcdFx0XHRcdGVsQm90dG9tIDwgdG9wKTtcclxuXHJcblx0XHRcdFx0aWYgKGlzSW50ZXJzZWN0KSB7XHJcblx0XHRcdFx0XHRoaXRzLnB1c2goZWxlbWVudCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHRyZXR1cm4gaGl0cztcclxuXHR9XHJcblxyXG5cclxuXHQvKipcclxuXHQgKiBDYWxsZWQgd2hlbiB0aGUgdXNlciBzY3JvbGxzIHRoZSB3aW5kb3dcclxuXHQgKi9cclxuXHRmdW5jdGlvbiBvblNjcm9sbChzY3JvbGxPZmZzZXQpIHtcclxuXHRcdC8vIHVuaXF1ZSB0aWNrIGlkXHJcblx0XHQrK3RpY2tzO1xyXG5cclxuXHRcdC8vIHZpZXdwb3J0IHJlY3RhbmdsZVxyXG5cdFx0dmFyIHRvcCA9IGpXaW5kb3cuc2Nyb2xsVG9wKCksXHJcblx0XHRcdGxlZnQgPSBqV2luZG93LnNjcm9sbExlZnQoKSxcclxuXHRcdFx0cmlnaHQgPSBsZWZ0ICsgaldpbmRvdy53aWR0aCgpLFxyXG5cdFx0XHRib3R0b20gPSB0b3AgKyBqV2luZG93LmhlaWdodCgpO1xyXG5cclxuXHRcdC8vIGRldGVybWluZSB3aGljaCBlbGVtZW50cyBhcmUgaW4gdmlld1xyXG5cdFx0dmFyIGludGVyc2VjdGlvbnMgPSBmaW5kRWxlbWVudHModG9wK29mZnNldC50b3AgKyBzY3JvbGxPZmZzZXQgfHwgMjAwLCByaWdodCtvZmZzZXQucmlnaHQsIGJvdHRvbStvZmZzZXQuYm90dG9tLCBsZWZ0K29mZnNldC5sZWZ0KTtcclxuXHRcdCQuZWFjaChpbnRlcnNlY3Rpb25zLCBmdW5jdGlvbihpLCBlbGVtZW50KSB7XHJcblxyXG5cdFx0XHR2YXIgbGFzdFRpY2sgPSBlbGVtZW50LmRhdGEoJ3Njcm9sbFNweTp0aWNrcycpO1xyXG5cdFx0XHRpZiAodHlwZW9mIGxhc3RUaWNrICE9ICdudW1iZXInKSB7XHJcblx0XHRcdFx0Ly8gZW50ZXJlZCBpbnRvIHZpZXdcclxuXHRcdFx0XHRlbGVtZW50LnRyaWdnZXJIYW5kbGVyKCdzY3JvbGxTcHk6ZW50ZXInKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gdXBkYXRlIHRpY2sgaWRcclxuXHRcdFx0ZWxlbWVudC5kYXRhKCdzY3JvbGxTcHk6dGlja3MnLCB0aWNrcyk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBkZXRlcm1pbmUgd2hpY2ggZWxlbWVudHMgYXJlIG5vIGxvbmdlciBpbiB2aWV3XHJcblx0XHQkLmVhY2goZWxlbWVudHNJblZpZXcsIGZ1bmN0aW9uKGksIGVsZW1lbnQpIHtcclxuXHRcdFx0dmFyIGxhc3RUaWNrID0gZWxlbWVudC5kYXRhKCdzY3JvbGxTcHk6dGlja3MnKTtcclxuXHRcdFx0aWYgKHR5cGVvZiBsYXN0VGljayA9PSAnbnVtYmVyJyAmJiBsYXN0VGljayAhPT0gdGlja3MpIHtcclxuXHRcdFx0XHQvLyBleGl0ZWQgZnJvbSB2aWV3XHJcblx0XHRcdFx0ZWxlbWVudC50cmlnZ2VySGFuZGxlcignc2Nyb2xsU3B5OmV4aXQnKTtcclxuXHRcdFx0XHRlbGVtZW50LmRhdGEoJ3Njcm9sbFNweTp0aWNrcycsIG51bGwpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyByZW1lbWJlciBlbGVtZW50cyBpbiB2aWV3IGZvciBuZXh0IHRpY2tcclxuXHRcdGVsZW1lbnRzSW5WaWV3ID0gaW50ZXJzZWN0aW9ucztcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENhbGxlZCB3aGVuIHdpbmRvdyBpcyByZXNpemVkXHJcblx0Ki9cclxuXHRmdW5jdGlvbiBvbldpblNpemUoKSB7XHJcblx0XHRqV2luZG93LnRyaWdnZXIoJ3Njcm9sbFNweTp3aW5TaXplJyk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBHZXQgdGltZSBpbiBtc1xyXG4gICAqIEBsaWNlbnNlIGh0dHBzOi8vcmF3LmdpdGh1Yi5jb20vamFzaGtlbmFzL3VuZGVyc2NvcmUvbWFzdGVyL0xJQ0VOU0VcclxuXHQgKiBAdHlwZSB7ZnVuY3Rpb259XHJcblx0ICogQHJldHVybiB7bnVtYmVyfVxyXG5cdCAqL1xyXG5cdHZhciBnZXRUaW1lID0gKERhdGUubm93IHx8IGZ1bmN0aW9uICgpIHtcclxuXHRcdHJldHVybiBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuXHR9KTtcclxuXHJcblx0LyoqXHJcblx0ICogUmV0dXJucyBhIGZ1bmN0aW9uLCB0aGF0LCB3aGVuIGludm9rZWQsIHdpbGwgb25seSBiZSB0cmlnZ2VyZWQgYXQgbW9zdCBvbmNlXHJcblx0ICogZHVyaW5nIGEgZ2l2ZW4gd2luZG93IG9mIHRpbWUuIE5vcm1hbGx5LCB0aGUgdGhyb3R0bGVkIGZ1bmN0aW9uIHdpbGwgcnVuXHJcblx0ICogYXMgbXVjaCBhcyBpdCBjYW4sIHdpdGhvdXQgZXZlciBnb2luZyBtb3JlIHRoYW4gb25jZSBwZXIgYHdhaXRgIGR1cmF0aW9uO1xyXG5cdCAqIGJ1dCBpZiB5b3UnZCBsaWtlIHRvIGRpc2FibGUgdGhlIGV4ZWN1dGlvbiBvbiB0aGUgbGVhZGluZyBlZGdlLCBwYXNzXHJcblx0ICogYHtsZWFkaW5nOiBmYWxzZX1gLiBUbyBkaXNhYmxlIGV4ZWN1dGlvbiBvbiB0aGUgdHJhaWxpbmcgZWRnZSwgZGl0dG8uXHJcblx0ICogQGxpY2Vuc2UgaHR0cHM6Ly9yYXcuZ2l0aHViLmNvbS9qYXNoa2VuYXMvdW5kZXJzY29yZS9tYXN0ZXIvTElDRU5TRVxyXG5cdCAqIEBwYXJhbSB7ZnVuY3Rpb259IGZ1bmNcclxuXHQgKiBAcGFyYW0ge251bWJlcn0gd2FpdFxyXG5cdCAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0aW9uc1xyXG5cdCAqIEByZXR1cm5zIHtGdW5jdGlvbn1cclxuXHQgKi9cclxuXHRmdW5jdGlvbiB0aHJvdHRsZShmdW5jLCB3YWl0LCBvcHRpb25zKSB7XHJcblx0XHR2YXIgY29udGV4dCwgYXJncywgcmVzdWx0O1xyXG5cdFx0dmFyIHRpbWVvdXQgPSBudWxsO1xyXG5cdFx0dmFyIHByZXZpb3VzID0gMDtcclxuXHRcdG9wdGlvbnMgfHwgKG9wdGlvbnMgPSB7fSk7XHJcblx0XHR2YXIgbGF0ZXIgPSBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdHByZXZpb3VzID0gb3B0aW9ucy5sZWFkaW5nID09PSBmYWxzZSA/IDAgOiBnZXRUaW1lKCk7XHJcblx0XHRcdHRpbWVvdXQgPSBudWxsO1xyXG5cdFx0XHRyZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xyXG5cdFx0XHRjb250ZXh0ID0gYXJncyA9IG51bGw7XHJcblx0XHR9O1xyXG5cdFx0cmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0dmFyIG5vdyA9IGdldFRpbWUoKTtcclxuXHRcdFx0aWYgKCFwcmV2aW91cyAmJiBvcHRpb25zLmxlYWRpbmcgPT09IGZhbHNlKSBwcmV2aW91cyA9IG5vdztcclxuXHRcdFx0dmFyIHJlbWFpbmluZyA9IHdhaXQgLSAobm93IC0gcHJldmlvdXMpO1xyXG5cdFx0XHRjb250ZXh0ID0gdGhpcztcclxuXHRcdFx0YXJncyA9IGFyZ3VtZW50cztcclxuXHRcdFx0aWYgKHJlbWFpbmluZyA8PSAwKSB7XHJcblx0XHRcdFx0Y2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xyXG5cdFx0XHRcdHRpbWVvdXQgPSBudWxsO1xyXG5cdFx0XHRcdHByZXZpb3VzID0gbm93O1xyXG5cdFx0XHRcdHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XHJcblx0XHRcdFx0Y29udGV4dCA9IGFyZ3MgPSBudWxsO1xyXG5cdFx0XHR9IGVsc2UgaWYgKCF0aW1lb3V0ICYmIG9wdGlvbnMudHJhaWxpbmcgIT09IGZhbHNlKSB7XHJcblx0XHRcdFx0dGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHJlbWFpbmluZyk7XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIHJlc3VsdDtcclxuXHRcdH07XHJcblx0fTtcclxuXHJcblx0LyoqXHJcblx0ICogRW5hYmxlcyBTY3JvbGxTcHkgdXNpbmcgYSBzZWxlY3RvclxyXG5cdCAqIEBwYXJhbSB7alF1ZXJ5fHN0cmluZ30gc2VsZWN0b3IgIFRoZSBlbGVtZW50cyBjb2xsZWN0aW9uLCBvciBhIHNlbGVjdG9yXHJcblx0ICogQHBhcmFtIHtPYmplY3Q9fSBvcHRpb25zXHRPcHRpb25hbC5cclxuICAgICAgICB0aHJvdHRsZSA6IG51bWJlciAtPiBzY3JvbGxzcHkgdGhyb3R0bGluZy4gRGVmYXVsdDogMTAwIG1zXHJcbiAgICAgICAgb2Zmc2V0VG9wIDogbnVtYmVyIC0+IG9mZnNldCBmcm9tIHRvcC4gRGVmYXVsdDogMFxyXG4gICAgICAgIG9mZnNldFJpZ2h0IDogbnVtYmVyIC0+IG9mZnNldCBmcm9tIHJpZ2h0LiBEZWZhdWx0OiAwXHJcbiAgICAgICAgb2Zmc2V0Qm90dG9tIDogbnVtYmVyIC0+IG9mZnNldCBmcm9tIGJvdHRvbS4gRGVmYXVsdDogMFxyXG4gICAgICAgIG9mZnNldExlZnQgOiBudW1iZXIgLT4gb2Zmc2V0IGZyb20gbGVmdC4gRGVmYXVsdDogMFxyXG5cdCAqIEByZXR1cm5zIHtqUXVlcnl9XHJcblx0ICovXHJcblx0JC5zY3JvbGxTcHkgPSBmdW5jdGlvbihzZWxlY3Rvciwgb3B0aW9ucykge1xyXG5cdCAgdmFyIGRlZmF1bHRzID0ge1xyXG5cdFx0XHR0aHJvdHRsZTogMTAwLFxyXG5cdFx0XHRzY3JvbGxPZmZzZXQ6IDIwMCAvLyBvZmZzZXQgLSAyMDAgYWxsb3dzIGVsZW1lbnRzIG5lYXIgYm90dG9tIG9mIHBhZ2UgdG8gc2Nyb2xsXHJcbiAgICB9O1xyXG4gICAgb3B0aW9ucyA9ICQuZXh0ZW5kKGRlZmF1bHRzLCBvcHRpb25zKTtcclxuXHJcblx0XHR2YXIgdmlzaWJsZSA9IFtdO1xyXG5cdFx0c2VsZWN0b3IgPSAkKHNlbGVjdG9yKTtcclxuXHRcdHNlbGVjdG9yLmVhY2goZnVuY3Rpb24oaSwgZWxlbWVudCkge1xyXG5cdFx0XHRlbGVtZW50cy5wdXNoKCQoZWxlbWVudCkpO1xyXG5cdFx0XHQkKGVsZW1lbnQpLmRhdGEoXCJzY3JvbGxTcHk6aWRcIiwgaSk7XHJcblx0XHRcdC8vIFNtb290aCBzY3JvbGwgdG8gc2VjdGlvblxyXG5cdFx0ICAkKCdhW2hyZWY9XCIjJyArICQoZWxlbWVudCkuYXR0cignaWQnKSArICdcIl0nKS5jbGljayhmdW5jdGlvbihlKSB7XHJcblx0XHQgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0ICAgIHZhciBvZmZzZXQgPSAkKE1hdGVyaWFsaXplLmVzY2FwZUhhc2godGhpcy5oYXNoKSkub2Zmc2V0KCkudG9wICsgMTtcclxuXHQgICAgXHQkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7IHNjcm9sbFRvcDogb2Zmc2V0IC0gb3B0aW9ucy5zY3JvbGxPZmZzZXQgfSwge2R1cmF0aW9uOiA0MDAsIHF1ZXVlOiBmYWxzZSwgZWFzaW5nOiAnZWFzZU91dEN1YmljJ30pO1xyXG5cdFx0ICB9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdG9mZnNldC50b3AgPSBvcHRpb25zLm9mZnNldFRvcCB8fCAwO1xyXG5cdFx0b2Zmc2V0LnJpZ2h0ID0gb3B0aW9ucy5vZmZzZXRSaWdodCB8fCAwO1xyXG5cdFx0b2Zmc2V0LmJvdHRvbSA9IG9wdGlvbnMub2Zmc2V0Qm90dG9tIHx8IDA7XHJcblx0XHRvZmZzZXQubGVmdCA9IG9wdGlvbnMub2Zmc2V0TGVmdCB8fCAwO1xyXG5cclxuXHRcdHZhciB0aHJvdHRsZWRTY3JvbGwgPSB0aHJvdHRsZShmdW5jdGlvbigpIHtcclxuXHRcdFx0b25TY3JvbGwob3B0aW9ucy5zY3JvbGxPZmZzZXQpO1xyXG5cdFx0fSwgb3B0aW9ucy50aHJvdHRsZSB8fCAxMDApO1xyXG5cdFx0dmFyIHJlYWR5U2Nyb2xsID0gZnVuY3Rpb24oKXtcclxuXHRcdFx0JChkb2N1bWVudCkucmVhZHkodGhyb3R0bGVkU2Nyb2xsKTtcclxuXHRcdH07XHJcblxyXG5cdFx0aWYgKCFpc1NweWluZykge1xyXG5cdFx0XHRqV2luZG93Lm9uKCdzY3JvbGwnLCByZWFkeVNjcm9sbCk7XHJcblx0XHRcdGpXaW5kb3cub24oJ3Jlc2l6ZScsIHJlYWR5U2Nyb2xsKTtcclxuXHRcdFx0aXNTcHlpbmcgPSB0cnVlO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIHBlcmZvcm0gYSBzY2FuIG9uY2UsIGFmdGVyIGN1cnJlbnQgZXhlY3V0aW9uIGNvbnRleHQsIGFuZCBhZnRlciBkb20gaXMgcmVhZHlcclxuXHRcdHNldFRpbWVvdXQocmVhZHlTY3JvbGwsIDApO1xyXG5cclxuXHJcblx0XHRzZWxlY3Rvci5vbignc2Nyb2xsU3B5OmVudGVyJywgZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZpc2libGUgPSAkLmdyZXAodmlzaWJsZSwgZnVuY3Rpb24odmFsdWUpIHtcclxuXHQgICAgICByZXR1cm4gdmFsdWUuaGVpZ2h0KCkgIT0gMDtcclxuXHQgICAgfSk7XHJcblxyXG5cdFx0XHR2YXIgJHRoaXMgPSAkKHRoaXMpO1xyXG5cclxuXHRcdFx0aWYgKHZpc2libGVbMF0pIHtcclxuXHRcdFx0XHQkKCdhW2hyZWY9XCIjJyArIHZpc2libGVbMF0uYXR0cignaWQnKSArICdcIl0nKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcblx0XHRcdFx0aWYgKCR0aGlzLmRhdGEoJ3Njcm9sbFNweTppZCcpIDwgdmlzaWJsZVswXS5kYXRhKCdzY3JvbGxTcHk6aWQnKSkge1xyXG5cdFx0XHRcdFx0dmlzaWJsZS51bnNoaWZ0KCQodGhpcykpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdHZpc2libGUucHVzaCgkKHRoaXMpKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0dmlzaWJsZS5wdXNoKCQodGhpcykpO1xyXG5cdFx0XHR9XHJcblxyXG5cclxuXHRcdFx0JCgnYVtocmVmPVwiIycgKyB2aXNpYmxlWzBdLmF0dHIoJ2lkJykgKyAnXCJdJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG5cdFx0fSk7XHJcblx0XHRzZWxlY3Rvci5vbignc2Nyb2xsU3B5OmV4aXQnLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmlzaWJsZSA9ICQuZ3JlcCh2aXNpYmxlLCBmdW5jdGlvbih2YWx1ZSkge1xyXG5cdCAgICAgIHJldHVybiB2YWx1ZS5oZWlnaHQoKSAhPSAwO1xyXG5cdCAgICB9KTtcclxuXHJcblx0XHRcdGlmICh2aXNpYmxlWzBdKSB7XHJcblx0XHRcdFx0JCgnYVtocmVmPVwiIycgKyB2aXNpYmxlWzBdLmF0dHIoJ2lkJykgKyAnXCJdJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG5cdFx0XHRcdHZhciAkdGhpcyA9ICQodGhpcyk7XHJcblx0XHRcdFx0dmlzaWJsZSA9ICQuZ3JlcCh2aXNpYmxlLCBmdW5jdGlvbih2YWx1ZSkge1xyXG5cdCAgICAgICAgcmV0dXJuIHZhbHVlLmF0dHIoJ2lkJykgIT0gJHRoaXMuYXR0cignaWQnKTtcclxuXHQgICAgICB9KTtcclxuXHQgICAgICBpZiAodmlzaWJsZVswXSkgeyAvLyBDaGVjayBpZiBlbXB0eVxyXG5cdFx0XHRcdFx0JCgnYVtocmVmPVwiIycgKyB2aXNpYmxlWzBdLmF0dHIoJ2lkJykgKyAnXCJdJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG5cdCAgICAgIH1cclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0cmV0dXJuIHNlbGVjdG9yO1xyXG5cdH07XHJcblxyXG5cdC8qKlxyXG5cdCAqIExpc3RlbiBmb3Igd2luZG93IHJlc2l6ZSBldmVudHNcclxuXHQgKiBAcGFyYW0ge09iamVjdD19IG9wdGlvbnNcdFx0XHRcdFx0XHRPcHRpb25hbC4gU2V0IHsgdGhyb3R0bGU6IG51bWJlciB9IHRvIGNoYW5nZSB0aHJvdHRsaW5nLiBEZWZhdWx0OiAxMDAgbXNcclxuXHQgKiBAcmV0dXJucyB7alF1ZXJ5fVx0XHQkKHdpbmRvdylcclxuXHQgKi9cclxuXHQkLndpblNpemVTcHkgPSBmdW5jdGlvbihvcHRpb25zKSB7XHJcblx0XHQkLndpblNpemVTcHkgPSBmdW5jdGlvbigpIHsgcmV0dXJuIGpXaW5kb3c7IH07IC8vIGxvY2sgZnJvbSBtdWx0aXBsZSBjYWxsc1xyXG5cdFx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge1xyXG5cdFx0XHR0aHJvdHRsZTogMTAwXHJcblx0XHR9O1xyXG5cdFx0cmV0dXJuIGpXaW5kb3cub24oJ3Jlc2l6ZScsIHRocm90dGxlKG9uV2luU2l6ZSwgb3B0aW9ucy50aHJvdHRsZSB8fCAxMDApKTtcclxuXHR9O1xyXG5cclxuXHQvKipcclxuXHQgKiBFbmFibGVzIFNjcm9sbFNweSBvbiBhIGNvbGxlY3Rpb24gb2YgZWxlbWVudHNcclxuXHQgKiBlLmcuICQoJy5zY3JvbGxTcHknKS5zY3JvbGxTcHkoKVxyXG5cdCAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0aW9uc1x0T3B0aW9uYWwuXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aHJvdHRsZSA6IG51bWJlciAtPiBzY3JvbGxzcHkgdGhyb3R0bGluZy4gRGVmYXVsdDogMTAwIG1zXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRvZmZzZXRUb3AgOiBudW1iZXIgLT4gb2Zmc2V0IGZyb20gdG9wLiBEZWZhdWx0OiAwXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRvZmZzZXRSaWdodCA6IG51bWJlciAtPiBvZmZzZXQgZnJvbSByaWdodC4gRGVmYXVsdDogMFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0b2Zmc2V0Qm90dG9tIDogbnVtYmVyIC0+IG9mZnNldCBmcm9tIGJvdHRvbS4gRGVmYXVsdDogMFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0b2Zmc2V0TGVmdCA6IG51bWJlciAtPiBvZmZzZXQgZnJvbSBsZWZ0LiBEZWZhdWx0OiAwXHJcblx0ICogQHJldHVybnMge2pRdWVyeX1cclxuXHQgKi9cclxuXHQkLmZuLnNjcm9sbFNweSA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcclxuXHRcdHJldHVybiAkLnNjcm9sbFNweSgkKHRoaXMpLCBvcHRpb25zKTtcclxuXHR9O1xyXG5cclxufSkoalF1ZXJ5KTtcclxuOyhmdW5jdGlvbiAoJCkge1xyXG4gICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xyXG5cclxuICAgIC8vIEZ1bmN0aW9uIHRvIHVwZGF0ZSBsYWJlbHMgb2YgdGV4dCBmaWVsZHNcclxuICAgIE1hdGVyaWFsaXplLnVwZGF0ZVRleHRGaWVsZHMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgdmFyIGlucHV0X3NlbGVjdG9yID0gJ2lucHV0W3R5cGU9dGV4dF0sIGlucHV0W3R5cGU9cGFzc3dvcmRdLCBpbnB1dFt0eXBlPWVtYWlsXSwgaW5wdXRbdHlwZT11cmxdLCBpbnB1dFt0eXBlPXRlbF0sIGlucHV0W3R5cGU9bnVtYmVyXSwgaW5wdXRbdHlwZT1zZWFyY2hdLCB0ZXh0YXJlYSc7XHJcbiAgICAgICQoaW5wdXRfc2VsZWN0b3IpLmVhY2goZnVuY3Rpb24oaW5kZXgsIGVsZW1lbnQpIHtcclxuICAgICAgICBpZiAoJChlbGVtZW50KS52YWwoKS5sZW5ndGggPiAwIHx8IGVsZW1lbnQuYXV0b2ZvY3VzIHx8JCh0aGlzKS5hdHRyKCdwbGFjZWhvbGRlcicpICE9PSB1bmRlZmluZWQgfHwgJChlbGVtZW50KVswXS52YWxpZGl0eS5iYWRJbnB1dCA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgJCh0aGlzKS5zaWJsaW5ncygnbGFiZWwnKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgJCh0aGlzKS5zaWJsaW5ncygnbGFiZWwnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gVGV4dCBiYXNlZCBpbnB1dHNcclxuICAgIHZhciBpbnB1dF9zZWxlY3RvciA9ICdpbnB1dFt0eXBlPXRleHRdLCBpbnB1dFt0eXBlPXBhc3N3b3JkXSwgaW5wdXRbdHlwZT1lbWFpbF0sIGlucHV0W3R5cGU9dXJsXSwgaW5wdXRbdHlwZT10ZWxdLCBpbnB1dFt0eXBlPW51bWJlcl0sIGlucHV0W3R5cGU9c2VhcmNoXSwgdGV4dGFyZWEnO1xyXG5cclxuICAgIC8vIEFkZCBhY3RpdmUgaWYgZm9ybSBhdXRvIGNvbXBsZXRlXHJcbiAgICAkKGRvY3VtZW50KS5vbignY2hhbmdlJywgaW5wdXRfc2VsZWN0b3IsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgaWYoJCh0aGlzKS52YWwoKS5sZW5ndGggIT09IDAgfHwgJCh0aGlzKS5hdHRyKCdwbGFjZWhvbGRlcicpICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCdsYWJlbCcpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgfVxyXG4gICAgICB2YWxpZGF0ZV9maWVsZCgkKHRoaXMpKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIEFkZCBhY3RpdmUgaWYgaW5wdXQgZWxlbWVudCBoYXMgYmVlbiBwcmUtcG9wdWxhdGVkIG9uIGRvY3VtZW50IHJlYWR5XHJcbiAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcclxuICAgICAgTWF0ZXJpYWxpemUudXBkYXRlVGV4dEZpZWxkcygpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gSFRNTCBET00gRk9STSBSRVNFVCBoYW5kbGluZ1xyXG4gICAgJChkb2N1bWVudCkub24oJ3Jlc2V0JywgZnVuY3Rpb24oZSkge1xyXG4gICAgICB2YXIgZm9ybVJlc2V0ID0gJChlLnRhcmdldCk7XHJcbiAgICAgIGlmIChmb3JtUmVzZXQuaXMoJ2Zvcm0nKSkge1xyXG4gICAgICAgIGZvcm1SZXNldC5maW5kKGlucHV0X3NlbGVjdG9yKS5yZW1vdmVDbGFzcygndmFsaWQnKS5yZW1vdmVDbGFzcygnaW52YWxpZCcpO1xyXG4gICAgICAgIGZvcm1SZXNldC5maW5kKGlucHV0X3NlbGVjdG9yKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgIGlmICgkKHRoaXMpLmF0dHIoJ3ZhbHVlJykgPT09ICcnKSB7XHJcbiAgICAgICAgICAgICQodGhpcykuc2libGluZ3MoJ2xhYmVsJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBSZXNldCBzZWxlY3RcclxuICAgICAgICBmb3JtUmVzZXQuZmluZCgnc2VsZWN0LmluaXRpYWxpemVkJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICB2YXIgcmVzZXRfdGV4dCA9IGZvcm1SZXNldC5maW5kKCdvcHRpb25bc2VsZWN0ZWRdJykudGV4dCgpO1xyXG4gICAgICAgICAgZm9ybVJlc2V0LnNpYmxpbmdzKCdpbnB1dC5zZWxlY3QtZHJvcGRvd24nKS52YWwocmVzZXRfdGV4dCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIEFkZCBhY3RpdmUgd2hlbiBlbGVtZW50IGhhcyBmb2N1c1xyXG4gICAgJChkb2N1bWVudCkub24oJ2ZvY3VzJywgaW5wdXRfc2VsZWN0b3IsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgJCh0aGlzKS5zaWJsaW5ncygnbGFiZWwsIC5wcmVmaXgnKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKGRvY3VtZW50KS5vbignYmx1cicsIGlucHV0X3NlbGVjdG9yLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHZhciAkaW5wdXRFbGVtZW50ID0gJCh0aGlzKTtcclxuICAgICAgdmFyIHNlbGVjdG9yID0gXCIucHJlZml4XCI7XHJcblxyXG4gICAgICBpZiAoJGlucHV0RWxlbWVudC52YWwoKS5sZW5ndGggPT09IDAgJiYgJGlucHV0RWxlbWVudFswXS52YWxpZGl0eS5iYWRJbnB1dCAhPT0gdHJ1ZSAmJiAkaW5wdXRFbGVtZW50LmF0dHIoJ3BsYWNlaG9sZGVyJykgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHNlbGVjdG9yICs9IFwiLCBsYWJlbFwiO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAkaW5wdXRFbGVtZW50LnNpYmxpbmdzKHNlbGVjdG9yKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcblxyXG4gICAgICB2YWxpZGF0ZV9maWVsZCgkaW5wdXRFbGVtZW50KTtcclxuICAgIH0pO1xyXG5cclxuICAgIHdpbmRvdy52YWxpZGF0ZV9maWVsZCA9IGZ1bmN0aW9uKG9iamVjdCkge1xyXG4gICAgICB2YXIgaGFzTGVuZ3RoID0gb2JqZWN0LmF0dHIoJ2xlbmd0aCcpICE9PSB1bmRlZmluZWQ7XHJcbiAgICAgIHZhciBsZW5BdHRyID0gcGFyc2VJbnQob2JqZWN0LmF0dHIoJ2xlbmd0aCcpKTtcclxuICAgICAgdmFyIGxlbiA9IG9iamVjdC52YWwoKS5sZW5ndGg7XHJcblxyXG4gICAgICBpZiAob2JqZWN0LnZhbCgpLmxlbmd0aCA9PT0gMCAmJiBvYmplY3RbMF0udmFsaWRpdHkuYmFkSW5wdXQgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgaWYgKG9iamVjdC5oYXNDbGFzcygndmFsaWRhdGUnKSkge1xyXG4gICAgICAgICAgb2JqZWN0LnJlbW92ZUNsYXNzKCd2YWxpZCcpO1xyXG4gICAgICAgICAgb2JqZWN0LnJlbW92ZUNsYXNzKCdpbnZhbGlkJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIGlmIChvYmplY3QuaGFzQ2xhc3MoJ3ZhbGlkYXRlJykpIHtcclxuICAgICAgICAgIC8vIENoZWNrIGZvciBjaGFyYWN0ZXIgY291bnRlciBhdHRyaWJ1dGVzXHJcbiAgICAgICAgICBpZiAoKG9iamVjdC5pcygnOnZhbGlkJykgJiYgaGFzTGVuZ3RoICYmIChsZW4gPD0gbGVuQXR0cikpIHx8IChvYmplY3QuaXMoJzp2YWxpZCcpICYmICFoYXNMZW5ndGgpKSB7XHJcbiAgICAgICAgICAgIG9iamVjdC5yZW1vdmVDbGFzcygnaW52YWxpZCcpO1xyXG4gICAgICAgICAgICBvYmplY3QuYWRkQ2xhc3MoJ3ZhbGlkJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgb2JqZWN0LnJlbW92ZUNsYXNzKCd2YWxpZCcpO1xyXG4gICAgICAgICAgICBvYmplY3QuYWRkQ2xhc3MoJ2ludmFsaWQnKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gUmFkaW8gYW5kIENoZWNrYm94IGZvY3VzIGNsYXNzXHJcbiAgICB2YXIgcmFkaW9fY2hlY2tib3ggPSAnaW5wdXRbdHlwZT1yYWRpb10sIGlucHV0W3R5cGU9Y2hlY2tib3hdJztcclxuICAgICQoZG9jdW1lbnQpLm9uKCdrZXl1cC5yYWRpbycsIHJhZGlvX2NoZWNrYm94LCBmdW5jdGlvbihlKSB7XHJcbiAgICAgIC8vIFRBQiwgY2hlY2sgaWYgdGFiYmluZyB0byByYWRpbyBvciBjaGVja2JveC5cclxuICAgICAgaWYgKGUud2hpY2ggPT09IDkpIHtcclxuICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCd0YWJiZWQnKTtcclxuICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xyXG4gICAgICAgICR0aGlzLm9uZSgnYmx1cicsIGZ1bmN0aW9uKGUpIHtcclxuXHJcbiAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCd0YWJiZWQnKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIFRleHRhcmVhIEF1dG8gUmVzaXplXHJcbiAgICB2YXIgaGlkZGVuRGl2ID0gJCgnLmhpZGRlbmRpdicpLmZpcnN0KCk7XHJcbiAgICBpZiAoIWhpZGRlbkRpdi5sZW5ndGgpIHtcclxuICAgICAgaGlkZGVuRGl2ID0gJCgnPGRpdiBjbGFzcz1cImhpZGRlbmRpdiBjb21tb25cIj48L2Rpdj4nKTtcclxuICAgICAgJCgnYm9keScpLmFwcGVuZChoaWRkZW5EaXYpO1xyXG4gICAgfVxyXG4gICAgdmFyIHRleHRfYXJlYV9zZWxlY3RvciA9ICcubWF0ZXJpYWxpemUtdGV4dGFyZWEnO1xyXG5cclxuICAgIGZ1bmN0aW9uIHRleHRhcmVhQXV0b1Jlc2l6ZSgkdGV4dGFyZWEpIHtcclxuICAgICAgLy8gU2V0IGZvbnQgcHJvcGVydGllcyBvZiBoaWRkZW5EaXZcclxuXHJcbiAgICAgIHZhciBmb250RmFtaWx5ID0gJHRleHRhcmVhLmNzcygnZm9udC1mYW1pbHknKTtcclxuICAgICAgdmFyIGZvbnRTaXplID0gJHRleHRhcmVhLmNzcygnZm9udC1zaXplJyk7XHJcbiAgICAgIHZhciBsaW5lSGVpZ2h0ID0gJHRleHRhcmVhLmNzcygnbGluZS1oZWlnaHQnKTtcclxuXHJcbiAgICAgIGlmIChmb250U2l6ZSkgeyBoaWRkZW5EaXYuY3NzKCdmb250LXNpemUnLCBmb250U2l6ZSk7IH1cclxuICAgICAgaWYgKGZvbnRGYW1pbHkpIHsgaGlkZGVuRGl2LmNzcygnZm9udC1mYW1pbHknLCBmb250RmFtaWx5KTsgfVxyXG4gICAgICBpZiAobGluZUhlaWdodCkgeyBoaWRkZW5EaXYuY3NzKCdsaW5lLWhlaWdodCcsIGxpbmVIZWlnaHQpOyB9XHJcblxyXG4gICAgICBpZiAoJHRleHRhcmVhLmF0dHIoJ3dyYXAnKSA9PT0gXCJvZmZcIikge1xyXG4gICAgICAgIGhpZGRlbkRpdi5jc3MoJ292ZXJmbG93LXdyYXAnLCBcIm5vcm1hbFwiKVxyXG4gICAgICAgICAgICAgICAgIC5jc3MoJ3doaXRlLXNwYWNlJywgXCJwcmVcIik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGhpZGRlbkRpdi50ZXh0KCR0ZXh0YXJlYS52YWwoKSArICdcXG4nKTtcclxuICAgICAgdmFyIGNvbnRlbnQgPSBoaWRkZW5EaXYuaHRtbCgpLnJlcGxhY2UoL1xcbi9nLCAnPGJyPicpO1xyXG4gICAgICBoaWRkZW5EaXYuaHRtbChjb250ZW50KTtcclxuXHJcblxyXG4gICAgICAvLyBXaGVuIHRleHRhcmVhIGlzIGhpZGRlbiwgd2lkdGggZ29lcyBjcmF6eS5cclxuICAgICAgLy8gQXBwcm94aW1hdGUgd2l0aCBoYWxmIG9mIHdpbmRvdyBzaXplXHJcblxyXG4gICAgICBpZiAoJHRleHRhcmVhLmlzKCc6dmlzaWJsZScpKSB7XHJcbiAgICAgICAgaGlkZGVuRGl2LmNzcygnd2lkdGgnLCAkdGV4dGFyZWEud2lkdGgoKSk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgaGlkZGVuRGl2LmNzcygnd2lkdGgnLCAkKHdpbmRvdykud2lkdGgoKS8yKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgJHRleHRhcmVhLmNzcygnaGVpZ2h0JywgaGlkZGVuRGl2LmhlaWdodCgpKTtcclxuICAgIH1cclxuXHJcbiAgICAkKHRleHRfYXJlYV9zZWxlY3RvcikuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHZhciAkdGV4dGFyZWEgPSAkKHRoaXMpO1xyXG4gICAgICBpZiAoJHRleHRhcmVhLnZhbCgpLmxlbmd0aCkge1xyXG4gICAgICAgIHRleHRhcmVhQXV0b1Jlc2l6ZSgkdGV4dGFyZWEpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKCdib2R5Jykub24oJ2tleXVwIGtleWRvd24gYXV0b3Jlc2l6ZScsIHRleHRfYXJlYV9zZWxlY3RvciwgZnVuY3Rpb24gKCkge1xyXG4gICAgICB0ZXh0YXJlYUF1dG9SZXNpemUoJCh0aGlzKSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBGaWxlIElucHV0IFBhdGhcclxuICAgICQoZG9jdW1lbnQpLm9uKCdjaGFuZ2UnLCAnLmZpbGUtZmllbGQgaW5wdXRbdHlwZT1cImZpbGVcIl0nLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHZhciBmaWxlX2ZpZWxkID0gJCh0aGlzKS5jbG9zZXN0KCcuZmlsZS1maWVsZCcpO1xyXG4gICAgICB2YXIgcGF0aF9pbnB1dCA9IGZpbGVfZmllbGQuZmluZCgnaW5wdXQuZmlsZS1wYXRoJyk7XHJcbiAgICAgIHZhciBmaWxlcyAgICAgID0gJCh0aGlzKVswXS5maWxlcztcclxuICAgICAgdmFyIGZpbGVfbmFtZXMgPSBbXTtcclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmaWxlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGZpbGVfbmFtZXMucHVzaChmaWxlc1tpXS5uYW1lKTtcclxuICAgICAgfVxyXG4gICAgICBwYXRoX2lucHV0LnZhbChmaWxlX25hbWVzLmpvaW4oXCIsIFwiKSk7XHJcbiAgICAgIHBhdGhfaW5wdXQudHJpZ2dlcignY2hhbmdlJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvKioqKioqKioqKioqKioqKlxyXG4gICAgKiAgUmFuZ2UgSW5wdXQgICpcclxuICAgICoqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgdmFyIHJhbmdlX3R5cGUgPSAnaW5wdXRbdHlwZT1yYW5nZV0nO1xyXG4gICAgdmFyIHJhbmdlX21vdXNlZG93biA9IGZhbHNlO1xyXG4gICAgdmFyIGxlZnQ7XHJcblxyXG4gICAgJChyYW5nZV90eXBlKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgdmFyIHRodW1iID0gJCgnPHNwYW4gY2xhc3M9XCJ0aHVtYlwiPjxzcGFuIGNsYXNzPVwidmFsdWVcIj48L3NwYW4+PC9zcGFuPicpO1xyXG4gICAgICAkKHRoaXMpLmFmdGVyKHRodW1iKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHZhciByYW5nZV93cmFwcGVyID0gJy5yYW5nZS1maWVsZCc7XHJcbiAgICAkKGRvY3VtZW50KS5vbignY2hhbmdlJywgcmFuZ2VfdHlwZSwgZnVuY3Rpb24oZSkge1xyXG4gICAgICB2YXIgdGh1bWIgPSAkKHRoaXMpLnNpYmxpbmdzKCcudGh1bWInKTtcclxuICAgICAgdGh1bWIuZmluZCgnLnZhbHVlJykuaHRtbCgkKHRoaXMpLnZhbCgpKTtcclxuICAgIH0pO1xyXG5cclxuICAgICQoZG9jdW1lbnQpLm9uKCdpbnB1dCBtb3VzZWRvd24gdG91Y2hzdGFydCcsIHJhbmdlX3R5cGUsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgdmFyIHRodW1iID0gJCh0aGlzKS5zaWJsaW5ncygnLnRodW1iJyk7XHJcbiAgICAgIHZhciB3aWR0aCA9ICQodGhpcykub3V0ZXJXaWR0aCgpO1xyXG5cclxuICAgICAgLy8gSWYgdGh1bWIgaW5kaWNhdG9yIGRvZXMgbm90IGV4aXN0IHlldCwgY3JlYXRlIGl0XHJcbiAgICAgIGlmICh0aHVtYi5sZW5ndGggPD0gMCkge1xyXG4gICAgICAgIHRodW1iID0gJCgnPHNwYW4gY2xhc3M9XCJ0aHVtYlwiPjxzcGFuIGNsYXNzPVwidmFsdWVcIj48L3NwYW4+PC9zcGFuPicpO1xyXG4gICAgICAgICQodGhpcykuYWZ0ZXIodGh1bWIpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBTZXQgaW5kaWNhdG9yIHZhbHVlXHJcbiAgICAgIHRodW1iLmZpbmQoJy52YWx1ZScpLmh0bWwoJCh0aGlzKS52YWwoKSk7XHJcblxyXG4gICAgICByYW5nZV9tb3VzZWRvd24gPSB0cnVlO1xyXG4gICAgICAkKHRoaXMpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuXHJcbiAgICAgIGlmICghdGh1bWIuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgdGh1bWIudmVsb2NpdHkoeyBoZWlnaHQ6IFwiMzBweFwiLCB3aWR0aDogXCIzMHB4XCIsIHRvcDogXCItMjBweFwiLCBtYXJnaW5MZWZ0OiBcIi0xNXB4XCJ9LCB7IGR1cmF0aW9uOiAzMDAsIGVhc2luZzogJ2Vhc2VPdXRFeHBvJyB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGUudHlwZSAhPT0gJ2lucHV0Jykge1xyXG4gICAgICAgIGlmKGUucGFnZVggPT09IHVuZGVmaW5lZCB8fCBlLnBhZ2VYID09PSBudWxsKXsvL21vYmlsZVxyXG4gICAgICAgICAgIGxlZnQgPSBlLm9yaWdpbmFsRXZlbnQudG91Y2hlc1swXS5wYWdlWCAtICQodGhpcykub2Zmc2V0KCkubGVmdDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXsgLy8gZGVza3RvcFxyXG4gICAgICAgICAgIGxlZnQgPSBlLnBhZ2VYIC0gJCh0aGlzKS5vZmZzZXQoKS5sZWZ0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobGVmdCA8IDApIHtcclxuICAgICAgICAgIGxlZnQgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChsZWZ0ID4gd2lkdGgpIHtcclxuICAgICAgICAgIGxlZnQgPSB3aWR0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGh1bWIuYWRkQ2xhc3MoJ2FjdGl2ZScpLmNzcygnbGVmdCcsIGxlZnQpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aHVtYi5maW5kKCcudmFsdWUnKS5odG1sKCQodGhpcykudmFsKCkpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJChkb2N1bWVudCkub24oJ21vdXNldXAgdG91Y2hlbmQnLCByYW5nZV93cmFwcGVyLCBmdW5jdGlvbigpIHtcclxuICAgICAgcmFuZ2VfbW91c2Vkb3duID0gZmFsc2U7XHJcbiAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJChkb2N1bWVudCkub24oJ21vdXNlbW92ZSB0b3VjaG1vdmUnLCByYW5nZV93cmFwcGVyLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgIHZhciB0aHVtYiA9ICQodGhpcykuY2hpbGRyZW4oJy50aHVtYicpO1xyXG4gICAgICB2YXIgbGVmdDtcclxuICAgICAgaWYgKHJhbmdlX21vdXNlZG93bikge1xyXG4gICAgICAgIGlmICghdGh1bWIuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgICB0aHVtYi52ZWxvY2l0eSh7IGhlaWdodDogJzMwcHgnLCB3aWR0aDogJzMwcHgnLCB0b3A6ICctMjBweCcsIG1hcmdpbkxlZnQ6ICctMTVweCd9LCB7IGR1cmF0aW9uOiAzMDAsIGVhc2luZzogJ2Vhc2VPdXRFeHBvJyB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGUucGFnZVggPT09IHVuZGVmaW5lZCB8fCBlLnBhZ2VYID09PSBudWxsKSB7IC8vbW9iaWxlXHJcbiAgICAgICAgICBsZWZ0ID0gZS5vcmlnaW5hbEV2ZW50LnRvdWNoZXNbMF0ucGFnZVggLSAkKHRoaXMpLm9mZnNldCgpLmxlZnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7IC8vIGRlc2t0b3BcclxuICAgICAgICAgIGxlZnQgPSBlLnBhZ2VYIC0gJCh0aGlzKS5vZmZzZXQoKS5sZWZ0O1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgd2lkdGggPSAkKHRoaXMpLm91dGVyV2lkdGgoKTtcclxuXHJcbiAgICAgICAgaWYgKGxlZnQgPCAwKSB7XHJcbiAgICAgICAgICBsZWZ0ID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAobGVmdCA+IHdpZHRoKSB7XHJcbiAgICAgICAgICBsZWZ0ID0gd2lkdGg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRodW1iLmFkZENsYXNzKCdhY3RpdmUnKS5jc3MoJ2xlZnQnLCBsZWZ0KTtcclxuICAgICAgICB0aHVtYi5maW5kKCcudmFsdWUnKS5odG1sKHRodW1iLnNpYmxpbmdzKHJhbmdlX3R5cGUpLnZhbCgpKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgJChkb2N1bWVudCkub24oJ21vdXNlb3V0IHRvdWNobGVhdmUnLCByYW5nZV93cmFwcGVyLCBmdW5jdGlvbigpIHtcclxuICAgICAgaWYgKCFyYW5nZV9tb3VzZWRvd24pIHtcclxuXHJcbiAgICAgICAgdmFyIHRodW1iID0gJCh0aGlzKS5jaGlsZHJlbignLnRodW1iJyk7XHJcblxyXG4gICAgICAgIGlmICh0aHVtYi5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAgIHRodW1iLnZlbG9jaXR5KHsgaGVpZ2h0OiAnMCcsIHdpZHRoOiAnMCcsIHRvcDogJzEwcHgnLCBtYXJnaW5MZWZ0OiAnLTZweCd9LCB7IGR1cmF0aW9uOiAxMDAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRodW1iLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAgICAgKiBBdXRvIGNvbXBsZXRlIHBsdWdpbiAgKlxyXG4gICAgICoqKioqKioqKioqKioqKioqKioqKioqKiovXHJcbiAgICAkLmZuLmF1dG9jb21wbGV0ZSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICAgIC8vIERlZmF1bHRzXHJcbiAgICAgIHZhciBkZWZhdWx0cyA9IHtcclxuICAgICAgICBkYXRhOiB7fVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgb3B0aW9ucyA9ICQuZXh0ZW5kKGRlZmF1bHRzLCBvcHRpb25zKTtcclxuXHJcbiAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyICRpbnB1dCA9ICQodGhpcyk7XHJcbiAgICAgICAgdmFyIGRhdGEgPSBvcHRpb25zLmRhdGEsXHJcbiAgICAgICAgICAgICRpbnB1dERpdiA9ICRpbnB1dC5jbG9zZXN0KCcuaW5wdXQtZmllbGQnKTsgLy8gRGl2IHRvIGFwcGVuZCBvblxyXG5cclxuICAgICAgICAvLyBDaGVjayBpZiBkYXRhIGlzbid0IGVtcHR5XHJcbiAgICAgICAgaWYgKCEkLmlzRW1wdHlPYmplY3QoZGF0YSkpIHtcclxuICAgICAgICAgIC8vIENyZWF0ZSBhdXRvY29tcGxldGUgZWxlbWVudFxyXG4gICAgICAgICAgdmFyICRhdXRvY29tcGxldGUgPSAkKCc8dWwgY2xhc3M9XCJhdXRvY29tcGxldGUtY29udGVudCBkcm9wZG93bi1jb250ZW50XCI+PC91bD4nKTtcclxuXHJcbiAgICAgICAgICAvLyBBcHBlbmQgYXV0b2NvbXBsZXRlIGVsZW1lbnRcclxuICAgICAgICAgIGlmICgkaW5wdXREaXYubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICRpbnB1dERpdi5hcHBlbmQoJGF1dG9jb21wbGV0ZSk7IC8vIFNldCB1bCBpbiBib2R5XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkaW5wdXQuYWZ0ZXIoJGF1dG9jb21wbGV0ZSk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgdmFyIGhpZ2hsaWdodCA9IGZ1bmN0aW9uKHN0cmluZywgJGVsKSB7XHJcbiAgICAgICAgICAgIHZhciBpbWcgPSAkZWwuZmluZCgnaW1nJyk7XHJcbiAgICAgICAgICAgIHZhciBtYXRjaFN0YXJ0ID0gJGVsLnRleHQoKS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXCJcIiArIHN0cmluZy50b0xvd2VyQ2FzZSgpICsgXCJcIiksXHJcbiAgICAgICAgICAgICAgICBtYXRjaEVuZCA9IG1hdGNoU3RhcnQgKyBzdHJpbmcubGVuZ3RoIC0gMSxcclxuICAgICAgICAgICAgICAgIGJlZm9yZU1hdGNoID0gJGVsLnRleHQoKS5zbGljZSgwLCBtYXRjaFN0YXJ0KSxcclxuICAgICAgICAgICAgICAgIG1hdGNoVGV4dCA9ICRlbC50ZXh0KCkuc2xpY2UobWF0Y2hTdGFydCwgbWF0Y2hFbmQgKyAxKSxcclxuICAgICAgICAgICAgICAgIGFmdGVyTWF0Y2ggPSAkZWwudGV4dCgpLnNsaWNlKG1hdGNoRW5kICsgMSk7XHJcbiAgICAgICAgICAgICRlbC5odG1sKFwiPHNwYW4+XCIgKyBiZWZvcmVNYXRjaCArIFwiPHNwYW4gY2xhc3M9J2hpZ2hsaWdodCc+XCIgKyBtYXRjaFRleHQgKyBcIjwvc3Bhbj5cIiArIGFmdGVyTWF0Y2ggKyBcIjwvc3Bhbj5cIik7XHJcbiAgICAgICAgICAgIGlmIChpbWcubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgJGVsLnByZXBlbmQoaW1nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAvLyBQZXJmb3JtIHNlYXJjaFxyXG4gICAgICAgICAgJGlucHV0Lm9uKCdrZXl1cCcsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIC8vIENhcHR1cmUgRW50ZXJcclxuICAgICAgICAgICAgaWYgKGUud2hpY2ggPT09IDEzKSB7XHJcbiAgICAgICAgICAgICAgJGF1dG9jb21wbGV0ZS5maW5kKCdsaScpLmZpcnN0KCkuY2xpY2soKTtcclxuICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciB2YWwgPSAkaW5wdXQudmFsKCkudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgJGF1dG9jb21wbGV0ZS5lbXB0eSgpO1xyXG5cclxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGlucHV0IGlzbid0IGVtcHR5XHJcbiAgICAgICAgICAgIGlmICh2YWwgIT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgZm9yKHZhciBrZXkgaW4gZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuaGFzT3duUHJvcGVydHkoa2V5KSAmJlxyXG4gICAgICAgICAgICAgICAgICAgIGtleS50b0xvd2VyQ2FzZSgpLmluZGV4T2YodmFsKSAhPT0gLTEgJiZcclxuICAgICAgICAgICAgICAgICAgICBrZXkudG9Mb3dlckNhc2UoKSAhPT0gdmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgIHZhciBhdXRvY29tcGxldGVPcHRpb24gPSAkKCc8bGk+PC9saT4nKTtcclxuICAgICAgICAgICAgICAgICAgaWYoISFkYXRhW2tleV0pIHtcclxuICAgICAgICAgICAgICAgICAgICBhdXRvY29tcGxldGVPcHRpb24uYXBwZW5kKCc8aW1nIHNyYz1cIicrIGRhdGFba2V5XSArJ1wiIGNsYXNzPVwicmlnaHQgY2lyY2xlXCI+PHNwYW4+Jysga2V5ICsnPC9zcGFuPicpO1xyXG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGF1dG9jb21wbGV0ZU9wdGlvbi5hcHBlbmQoJzxzcGFuPicrIGtleSArJzwvc3Bhbj4nKTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAkYXV0b2NvbXBsZXRlLmFwcGVuZChhdXRvY29tcGxldGVPcHRpb24pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgaGlnaGxpZ2h0KHZhbCwgYXV0b2NvbXBsZXRlT3B0aW9uKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgIC8vIFNldCBpbnB1dCB2YWx1ZVxyXG4gICAgICAgICAgJGF1dG9jb21wbGV0ZS5vbignY2xpY2snLCAnbGknLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRpbnB1dC52YWwoJCh0aGlzKS50ZXh0KCkudHJpbSgpKTtcclxuICAgICAgICAgICAgJGlucHV0LnRyaWdnZXIoJ2NoYW5nZScpO1xyXG4gICAgICAgICAgICAkYXV0b2NvbXBsZXRlLmVtcHR5KCk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgfSk7IC8vIEVuZCBvZiAkKGRvY3VtZW50KS5yZWFkeVxyXG5cclxuICAvKioqKioqKioqKioqKioqKioqKlxyXG4gICAqICBTZWxlY3QgUGx1Z2luICAqXHJcbiAgICoqKioqKioqKioqKioqKioqKi9cclxuICAkLmZuLm1hdGVyaWFsX3NlbGVjdCA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xyXG4gICAgJCh0aGlzKS5lYWNoKGZ1bmN0aW9uKCl7XHJcbiAgICAgIHZhciAkc2VsZWN0ID0gJCh0aGlzKTtcclxuXHJcbiAgICAgIGlmICgkc2VsZWN0Lmhhc0NsYXNzKCdicm93c2VyLWRlZmF1bHQnKSkge1xyXG4gICAgICAgIHJldHVybjsgLy8gQ29udGludWUgdG8gbmV4dCAocmV0dXJuIGZhbHNlIGJyZWFrcyBvdXQgb2YgZW50aXJlIGxvb3ApXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHZhciBtdWx0aXBsZSA9ICRzZWxlY3QuYXR0cignbXVsdGlwbGUnKSA/IHRydWUgOiBmYWxzZSxcclxuICAgICAgICAgIGxhc3RJRCA9ICRzZWxlY3QuZGF0YSgnc2VsZWN0LWlkJyk7IC8vIFRlYXIgZG93biBzdHJ1Y3R1cmUgaWYgU2VsZWN0IG5lZWRzIHRvIGJlIHJlYnVpbHRcclxuXHJcbiAgICAgIGlmIChsYXN0SUQpIHtcclxuICAgICAgICAkc2VsZWN0LnBhcmVudCgpLmZpbmQoJ3NwYW4uY2FyZXQnKS5yZW1vdmUoKTtcclxuICAgICAgICAkc2VsZWN0LnBhcmVudCgpLmZpbmQoJ2lucHV0JykucmVtb3ZlKCk7XHJcblxyXG4gICAgICAgICRzZWxlY3QudW53cmFwKCk7XHJcbiAgICAgICAgJCgndWwjc2VsZWN0LW9wdGlvbnMtJytsYXN0SUQpLnJlbW92ZSgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBJZiBkZXN0cm95aW5nIHRoZSBzZWxlY3QsIHJlbW92ZSB0aGUgc2VsZWxjdC1pZCBhbmQgcmVzZXQgaXQgdG8gaXQncyB1bmluaXRpYWxpemVkIHN0YXRlLlxyXG4gICAgICBpZihjYWxsYmFjayA9PT0gJ2Rlc3Ryb3knKSB7XHJcbiAgICAgICAgJHNlbGVjdC5kYXRhKCdzZWxlY3QtaWQnLCBudWxsKS5yZW1vdmVDbGFzcygnaW5pdGlhbGl6ZWQnKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHZhciB1bmlxdWVJRCA9IE1hdGVyaWFsaXplLmd1aWQoKTtcclxuICAgICAgJHNlbGVjdC5kYXRhKCdzZWxlY3QtaWQnLCB1bmlxdWVJRCk7XHJcbiAgICAgIHZhciB3cmFwcGVyID0gJCgnPGRpdiBjbGFzcz1cInNlbGVjdC13cmFwcGVyXCI+PC9kaXY+Jyk7XHJcbiAgICAgIHdyYXBwZXIuYWRkQ2xhc3MoJHNlbGVjdC5hdHRyKCdjbGFzcycpKTtcclxuICAgICAgdmFyIG9wdGlvbnMgPSAkKCc8dWwgaWQ9XCJzZWxlY3Qtb3B0aW9ucy0nICsgdW5pcXVlSUQgKydcIiBjbGFzcz1cImRyb3Bkb3duLWNvbnRlbnQgc2VsZWN0LWRyb3Bkb3duICcgKyAobXVsdGlwbGUgPyAnbXVsdGlwbGUtc2VsZWN0LWRyb3Bkb3duJyA6ICcnKSArICdcIj48L3VsPicpLFxyXG4gICAgICAgICAgc2VsZWN0Q2hpbGRyZW4gPSAkc2VsZWN0LmNoaWxkcmVuKCdvcHRpb24sIG9wdGdyb3VwJyksXHJcbiAgICAgICAgICB2YWx1ZXNTZWxlY3RlZCA9IFtdLFxyXG4gICAgICAgICAgb3B0aW9uc0hvdmVyID0gZmFsc2U7XHJcblxyXG4gICAgICB2YXIgbGFiZWwgPSAkc2VsZWN0LmZpbmQoJ29wdGlvbjpzZWxlY3RlZCcpLmh0bWwoKSB8fCAkc2VsZWN0LmZpbmQoJ29wdGlvbjpmaXJzdCcpLmh0bWwoKSB8fCBcIlwiO1xyXG5cclxuICAgICAgLy8gRnVuY3Rpb24gdGhhdCByZW5kZXJzIGFuZCBhcHBlbmRzIHRoZSBvcHRpb24gdGFraW5nIGludG9cclxuICAgICAgLy8gYWNjb3VudCB0eXBlIGFuZCBwb3NzaWJsZSBpbWFnZSBpY29uLlxyXG4gICAgICB2YXIgYXBwZW5kT3B0aW9uV2l0aEljb24gPSBmdW5jdGlvbihzZWxlY3QsIG9wdGlvbiwgdHlwZSkge1xyXG4gICAgICAgIC8vIEFkZCBkaXNhYmxlZCBhdHRyIGlmIGRpc2FibGVkXHJcbiAgICAgICAgdmFyIGRpc2FibGVkQ2xhc3MgPSAob3B0aW9uLmlzKCc6ZGlzYWJsZWQnKSkgPyAnZGlzYWJsZWQgJyA6ICcnO1xyXG4gICAgICAgIHZhciBvcHRncm91cENsYXNzID0gKHR5cGUgPT09ICdvcHRncm91cC1vcHRpb24nKSA/ICdvcHRncm91cC1vcHRpb24gJyA6ICcnO1xyXG5cclxuICAgICAgICAvLyBhZGQgaWNvbnNcclxuICAgICAgICB2YXIgaWNvbl91cmwgPSBvcHRpb24uZGF0YSgnaWNvbicpO1xyXG4gICAgICAgIHZhciBjbGFzc2VzID0gb3B0aW9uLmF0dHIoJ2NsYXNzJyk7XHJcbiAgICAgICAgaWYgKCEhaWNvbl91cmwpIHtcclxuICAgICAgICAgIHZhciBjbGFzc1N0cmluZyA9ICcnO1xyXG4gICAgICAgICAgaWYgKCEhY2xhc3NlcykgY2xhc3NTdHJpbmcgPSAnIGNsYXNzPVwiJyArIGNsYXNzZXMgKyAnXCInO1xyXG5cclxuICAgICAgICAgIC8vIENoZWNrIGZvciBtdWx0aXBsZSB0eXBlLlxyXG4gICAgICAgICAgaWYgKHR5cGUgPT09ICdtdWx0aXBsZScpIHtcclxuICAgICAgICAgICAgb3B0aW9ucy5hcHBlbmQoJCgnPGxpIGNsYXNzPVwiJyArIGRpc2FibGVkQ2xhc3MgKyAnXCI+PGltZyBhbHQ9XCJcIiBzcmM9XCInICsgaWNvbl91cmwgKyAnXCInICsgY2xhc3NTdHJpbmcgKyAnPjxzcGFuPjxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIicgKyBkaXNhYmxlZENsYXNzICsgJy8+PGxhYmVsPjwvbGFiZWw+JyArIG9wdGlvbi5odG1sKCkgKyAnPC9zcGFuPjwvbGk+JykpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgb3B0aW9ucy5hcHBlbmQoJCgnPGxpIGNsYXNzPVwiJyArIGRpc2FibGVkQ2xhc3MgKyBvcHRncm91cENsYXNzICsgJ1wiPjxpbWcgYWx0PVwiXCIgc3JjPVwiJyArIGljb25fdXJsICsgJ1wiJyArIGNsYXNzU3RyaW5nICsgJz48c3Bhbj4nICsgb3B0aW9uLmh0bWwoKSArICc8L3NwYW4+PC9saT4nKSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENoZWNrIGZvciBtdWx0aXBsZSB0eXBlLlxyXG4gICAgICAgIGlmICh0eXBlID09PSAnbXVsdGlwbGUnKSB7XHJcbiAgICAgICAgICBvcHRpb25zLmFwcGVuZCgkKCc8bGkgY2xhc3M9XCInICsgZGlzYWJsZWRDbGFzcyArICdcIj48c3Bhbj48aW5wdXQgdHlwZT1cImNoZWNrYm94XCInICsgZGlzYWJsZWRDbGFzcyArICcvPjxsYWJlbD48L2xhYmVsPicgKyBvcHRpb24uaHRtbCgpICsgJzwvc3Bhbj48L2xpPicpKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgb3B0aW9ucy5hcHBlbmQoJCgnPGxpIGNsYXNzPVwiJyArIGRpc2FibGVkQ2xhc3MgKyBvcHRncm91cENsYXNzICsgJ1wiPjxzcGFuPicgKyBvcHRpb24uaHRtbCgpICsgJzwvc3Bhbj48L2xpPicpKTtcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcblxyXG4gICAgICAvKiBDcmVhdGUgZHJvcGRvd24gc3RydWN0dXJlLiAqL1xyXG4gICAgICBpZiAoc2VsZWN0Q2hpbGRyZW4ubGVuZ3RoKSB7XHJcbiAgICAgICAgc2VsZWN0Q2hpbGRyZW4uZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGlmICgkKHRoaXMpLmlzKCdvcHRpb24nKSkge1xyXG4gICAgICAgICAgICAvLyBEaXJlY3QgZGVzY2VuZGFudCBvcHRpb24uXHJcbiAgICAgICAgICAgIGlmIChtdWx0aXBsZSkge1xyXG4gICAgICAgICAgICAgIGFwcGVuZE9wdGlvbldpdGhJY29uKCRzZWxlY3QsICQodGhpcyksICdtdWx0aXBsZScpO1xyXG5cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBhcHBlbmRPcHRpb25XaXRoSWNvbigkc2VsZWN0LCAkKHRoaXMpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSBlbHNlIGlmICgkKHRoaXMpLmlzKCdvcHRncm91cCcpKSB7XHJcbiAgICAgICAgICAgIC8vIE9wdGdyb3VwLlxyXG4gICAgICAgICAgICB2YXIgc2VsZWN0T3B0aW9ucyA9ICQodGhpcykuY2hpbGRyZW4oJ29wdGlvbicpO1xyXG4gICAgICAgICAgICBvcHRpb25zLmFwcGVuZCgkKCc8bGkgY2xhc3M9XCJvcHRncm91cFwiPjxzcGFuPicgKyAkKHRoaXMpLmF0dHIoJ2xhYmVsJykgKyAnPC9zcGFuPjwvbGk+JykpO1xyXG5cclxuICAgICAgICAgICAgc2VsZWN0T3B0aW9ucy5lYWNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgIGFwcGVuZE9wdGlvbldpdGhJY29uKCRzZWxlY3QsICQodGhpcyksICdvcHRncm91cC1vcHRpb24nKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIG9wdGlvbnMuZmluZCgnbGk6bm90KC5vcHRncm91cCknKS5lYWNoKGZ1bmN0aW9uIChpKSB7XHJcbiAgICAgICAgJCh0aGlzKS5jbGljayhmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgLy8gQ2hlY2sgaWYgb3B0aW9uIGVsZW1lbnQgaXMgZGlzYWJsZWRcclxuICAgICAgICAgIGlmICghJCh0aGlzKS5oYXNDbGFzcygnZGlzYWJsZWQnKSAmJiAhJCh0aGlzKS5oYXNDbGFzcygnb3B0Z3JvdXAnKSkge1xyXG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgaWYgKG11bHRpcGxlKSB7XHJcbiAgICAgICAgICAgICAgJCgnaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJywgdGhpcykucHJvcCgnY2hlY2tlZCcsIGZ1bmN0aW9uKGksIHYpIHsgcmV0dXJuICF2OyB9KTtcclxuICAgICAgICAgICAgICBzZWxlY3RlZCA9IHRvZ2dsZUVudHJ5RnJvbUFycmF5KHZhbHVlc1NlbGVjdGVkLCAkKHRoaXMpLmluZGV4KCksICRzZWxlY3QpO1xyXG4gICAgICAgICAgICAgICRuZXdTZWxlY3QudHJpZ2dlcignZm9jdXMnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBvcHRpb25zLmZpbmQoJ2xpJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICQodGhpcykudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICRuZXdTZWxlY3QudmFsKCQodGhpcykudGV4dCgpKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgYWN0aXZhdGVPcHRpb24ob3B0aW9ucywgJCh0aGlzKSk7XHJcbiAgICAgICAgICAgICRzZWxlY3QuZmluZCgnb3B0aW9uJykuZXEoaSkucHJvcCgnc2VsZWN0ZWQnLCBzZWxlY3RlZCk7XHJcbiAgICAgICAgICAgIC8vIFRyaWdnZXIgb25jaGFuZ2UoKSBldmVudFxyXG4gICAgICAgICAgICAkc2VsZWN0LnRyaWdnZXIoJ2NoYW5nZScpO1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSAndW5kZWZpbmVkJykgY2FsbGJhY2soKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIFdyYXAgRWxlbWVudHNcclxuICAgICAgJHNlbGVjdC53cmFwKHdyYXBwZXIpO1xyXG4gICAgICAvLyBBZGQgU2VsZWN0IERpc3BsYXkgRWxlbWVudFxyXG4gICAgICB2YXIgZHJvcGRvd25JY29uID0gJCgnPHNwYW4gY2xhc3M9XCJjYXJldFwiPiYjOTY2MDs8L3NwYW4+Jyk7XHJcbiAgICAgIGlmICgkc2VsZWN0LmlzKCc6ZGlzYWJsZWQnKSlcclxuICAgICAgICBkcm9wZG93bkljb24uYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcblxyXG4gICAgICAvLyBlc2NhcGUgZG91YmxlIHF1b3Rlc1xyXG4gICAgICB2YXIgc2FuaXRpemVkTGFiZWxIdG1sID0gbGFiZWwucmVwbGFjZSgvXCIvZywgJyZxdW90OycpO1xyXG5cclxuICAgICAgdmFyICRuZXdTZWxlY3QgPSAkKCc8aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cInNlbGVjdC1kcm9wZG93blwiIHJlYWRvbmx5PVwidHJ1ZVwiICcgKyAoKCRzZWxlY3QuaXMoJzpkaXNhYmxlZCcpKSA/ICdkaXNhYmxlZCcgOiAnJykgKyAnIGRhdGEtYWN0aXZhdGVzPVwic2VsZWN0LW9wdGlvbnMtJyArIHVuaXF1ZUlEICsnXCIgdmFsdWU9XCInKyBzYW5pdGl6ZWRMYWJlbEh0bWwgKydcIi8+Jyk7XHJcbiAgICAgICRzZWxlY3QuYmVmb3JlKCRuZXdTZWxlY3QpO1xyXG4gICAgICAkbmV3U2VsZWN0LmJlZm9yZShkcm9wZG93bkljb24pO1xyXG5cclxuICAgICAgJG5ld1NlbGVjdC5hZnRlcihvcHRpb25zKTtcclxuICAgICAgLy8gQ2hlY2sgaWYgc2VjdGlvbiBlbGVtZW50IGlzIGRpc2FibGVkXHJcbiAgICAgIGlmICghJHNlbGVjdC5pcygnOmRpc2FibGVkJykpIHtcclxuICAgICAgICAkbmV3U2VsZWN0LmRyb3Bkb3duKHsnaG92ZXInOiBmYWxzZSwgJ2Nsb3NlT25DbGljayc6IGZhbHNlfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIENvcHkgdGFiaW5kZXhcclxuICAgICAgaWYgKCRzZWxlY3QuYXR0cigndGFiaW5kZXgnKSkge1xyXG4gICAgICAgICQoJG5ld1NlbGVjdFswXSkuYXR0cigndGFiaW5kZXgnLCAkc2VsZWN0LmF0dHIoJ3RhYmluZGV4JykpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAkc2VsZWN0LmFkZENsYXNzKCdpbml0aWFsaXplZCcpO1xyXG5cclxuICAgICAgJG5ld1NlbGVjdC5vbih7XHJcbiAgICAgICAgJ2ZvY3VzJzogZnVuY3Rpb24gKCl7XHJcbiAgICAgICAgICBpZiAoJCgndWwuc2VsZWN0LWRyb3Bkb3duJykubm90KG9wdGlvbnNbMF0pLmlzKCc6dmlzaWJsZScpKSB7XHJcbiAgICAgICAgICAgICQoJ2lucHV0LnNlbGVjdC1kcm9wZG93bicpLnRyaWdnZXIoJ2Nsb3NlJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAoIW9wdGlvbnMuaXMoJzp2aXNpYmxlJykpIHtcclxuICAgICAgICAgICAgJCh0aGlzKS50cmlnZ2VyKCdvcGVuJywgWydmb2N1cyddKTtcclxuICAgICAgICAgICAgdmFyIGxhYmVsID0gJCh0aGlzKS52YWwoKTtcclxuICAgICAgICAgICAgdmFyIHNlbGVjdGVkT3B0aW9uID0gb3B0aW9ucy5maW5kKCdsaScpLmZpbHRlcihmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICByZXR1cm4gJCh0aGlzKS50ZXh0KCkudG9Mb3dlckNhc2UoKSA9PT0gbGFiZWwudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgfSlbMF07XHJcbiAgICAgICAgICAgIGFjdGl2YXRlT3B0aW9uKG9wdGlvbnMsIHNlbGVjdGVkT3B0aW9uKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgICdjbGljayc6IGZ1bmN0aW9uIChlKXtcclxuICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgICRuZXdTZWxlY3Qub24oJ2JsdXInLCBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAoIW11bHRpcGxlKSB7XHJcbiAgICAgICAgICAkKHRoaXMpLnRyaWdnZXIoJ2Nsb3NlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG9wdGlvbnMuZmluZCgnbGkuc2VsZWN0ZWQnKS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBvcHRpb25zLmhvdmVyKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIG9wdGlvbnNIb3ZlciA9IHRydWU7XHJcbiAgICAgIH0sIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBvcHRpb25zSG92ZXIgPSBmYWxzZTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAkKHdpbmRvdykub24oe1xyXG4gICAgICAgICdjbGljayc6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgIG11bHRpcGxlICYmIChvcHRpb25zSG92ZXIgfHwgJG5ld1NlbGVjdC50cmlnZ2VyKCdjbG9zZScpKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gQWRkIGluaXRpYWwgbXVsdGlwbGUgc2VsZWN0aW9ucy5cclxuICAgICAgaWYgKG11bHRpcGxlKSB7XHJcbiAgICAgICAgJHNlbGVjdC5maW5kKFwib3B0aW9uOnNlbGVjdGVkOm5vdCg6ZGlzYWJsZWQpXCIpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgdmFyIGluZGV4ID0gJCh0aGlzKS5pbmRleCgpO1xyXG5cclxuICAgICAgICAgIHRvZ2dsZUVudHJ5RnJvbUFycmF5KHZhbHVlc1NlbGVjdGVkLCBpbmRleCwgJHNlbGVjdCk7XHJcbiAgICAgICAgICBvcHRpb25zLmZpbmQoXCJsaVwiKS5lcShpbmRleCkuZmluZChcIjpjaGVja2JveFwiKS5wcm9wKFwiY2hlY2tlZFwiLCB0cnVlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gTWFrZSBvcHRpb24gYXMgc2VsZWN0ZWQgYW5kIHNjcm9sbCB0byBzZWxlY3RlZCBwb3NpdGlvblxyXG4gICAgICB2YXIgYWN0aXZhdGVPcHRpb24gPSBmdW5jdGlvbihjb2xsZWN0aW9uLCBuZXdPcHRpb24pIHtcclxuICAgICAgICBpZiAobmV3T3B0aW9uKSB7XHJcbiAgICAgICAgICBjb2xsZWN0aW9uLmZpbmQoJ2xpLnNlbGVjdGVkJykucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICB2YXIgb3B0aW9uID0gJChuZXdPcHRpb24pO1xyXG4gICAgICAgICAgb3B0aW9uLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xyXG4gICAgICAgICAgb3B0aW9ucy5zY3JvbGxUbyhvcHRpb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuXHJcbiAgICAgIC8vIEFsbG93IHVzZXIgdG8gc2VhcmNoIGJ5IHR5cGluZ1xyXG4gICAgICAvLyB0aGlzIGFycmF5IGlzIGNsZWFyZWQgYWZ0ZXIgMSBzZWNvbmRcclxuICAgICAgdmFyIGZpbHRlclF1ZXJ5ID0gW10sXHJcbiAgICAgICAgICBvbktleURvd24gPSBmdW5jdGlvbihlKXtcclxuICAgICAgICAgICAgLy8gVEFCIC0gc3dpdGNoIHRvIGFub3RoZXIgaW5wdXRcclxuICAgICAgICAgICAgaWYoZS53aGljaCA9PSA5KXtcclxuICAgICAgICAgICAgICAkbmV3U2VsZWN0LnRyaWdnZXIoJ2Nsb3NlJyk7XHJcbiAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBBUlJPVyBET1dOIFdIRU4gU0VMRUNUIElTIENMT1NFRCAtIG9wZW4gc2VsZWN0IG9wdGlvbnNcclxuICAgICAgICAgICAgaWYoZS53aGljaCA9PSA0MCAmJiAhb3B0aW9ucy5pcygnOnZpc2libGUnKSl7XHJcbiAgICAgICAgICAgICAgJG5ld1NlbGVjdC50cmlnZ2VyKCdvcGVuJyk7XHJcbiAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBFTlRFUiBXSEVOIFNFTEVDVCBJUyBDTE9TRUQgLSBzdWJtaXQgZm9ybVxyXG4gICAgICAgICAgICBpZihlLndoaWNoID09IDEzICYmICFvcHRpb25zLmlzKCc6dmlzaWJsZScpKXtcclxuICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgICAgIC8vIENBU0UgV0hFTiBVU0VSIFRZUEUgTEVUVEVSU1xyXG4gICAgICAgICAgICB2YXIgbGV0dGVyID0gU3RyaW5nLmZyb21DaGFyQ29kZShlLndoaWNoKS50b0xvd2VyQ2FzZSgpLFxyXG4gICAgICAgICAgICAgICAgbm9uTGV0dGVycyA9IFs5LDEzLDI3LDM4LDQwXTtcclxuICAgICAgICAgICAgaWYgKGxldHRlciAmJiAobm9uTGV0dGVycy5pbmRleE9mKGUud2hpY2gpID09PSAtMSkpIHtcclxuICAgICAgICAgICAgICBmaWx0ZXJRdWVyeS5wdXNoKGxldHRlcik7XHJcblxyXG4gICAgICAgICAgICAgIHZhciBzdHJpbmcgPSBmaWx0ZXJRdWVyeS5qb2luKCcnKSxcclxuICAgICAgICAgICAgICAgICAgbmV3T3B0aW9uID0gb3B0aW9ucy5maW5kKCdsaScpLmZpbHRlcihmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJCh0aGlzKS50ZXh0KCkudG9Mb3dlckNhc2UoKS5pbmRleE9mKHN0cmluZykgPT09IDA7XHJcbiAgICAgICAgICAgICAgICAgIH0pWzBdO1xyXG5cclxuICAgICAgICAgICAgICBpZiAobmV3T3B0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBhY3RpdmF0ZU9wdGlvbihvcHRpb25zLCBuZXdPcHRpb24pO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gRU5URVIgLSBzZWxlY3Qgb3B0aW9uIGFuZCBjbG9zZSB3aGVuIHNlbGVjdCBvcHRpb25zIGFyZSBvcGVuZWRcclxuICAgICAgICAgICAgaWYgKGUud2hpY2ggPT0gMTMpIHtcclxuICAgICAgICAgICAgICB2YXIgYWN0aXZlT3B0aW9uID0gb3B0aW9ucy5maW5kKCdsaS5zZWxlY3RlZDpub3QoLmRpc2FibGVkKScpWzBdO1xyXG4gICAgICAgICAgICAgIGlmKGFjdGl2ZU9wdGlvbil7XHJcbiAgICAgICAgICAgICAgICAkKGFjdGl2ZU9wdGlvbikudHJpZ2dlcignY2xpY2snKTtcclxuICAgICAgICAgICAgICAgIGlmICghbXVsdGlwbGUpIHtcclxuICAgICAgICAgICAgICAgICAgJG5ld1NlbGVjdC50cmlnZ2VyKCdjbG9zZScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gQVJST1cgRE9XTiAtIG1vdmUgdG8gbmV4dCBub3QgZGlzYWJsZWQgb3B0aW9uXHJcbiAgICAgICAgICAgIGlmIChlLndoaWNoID09IDQwKSB7XHJcbiAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZmluZCgnbGkuc2VsZWN0ZWQnKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIG5ld09wdGlvbiA9IG9wdGlvbnMuZmluZCgnbGkuc2VsZWN0ZWQnKS5uZXh0KCdsaTpub3QoLmRpc2FibGVkKScpWzBdO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBuZXdPcHRpb24gPSBvcHRpb25zLmZpbmQoJ2xpOm5vdCguZGlzYWJsZWQpJylbMF07XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGFjdGl2YXRlT3B0aW9uKG9wdGlvbnMsIG5ld09wdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIEVTQyAtIGNsb3NlIG9wdGlvbnNcclxuICAgICAgICAgICAgaWYgKGUud2hpY2ggPT0gMjcpIHtcclxuICAgICAgICAgICAgICAkbmV3U2VsZWN0LnRyaWdnZXIoJ2Nsb3NlJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIEFSUk9XIFVQIC0gbW92ZSB0byBwcmV2aW91cyBub3QgZGlzYWJsZWQgb3B0aW9uXHJcbiAgICAgICAgICAgIGlmIChlLndoaWNoID09IDM4KSB7XHJcbiAgICAgICAgICAgICAgbmV3T3B0aW9uID0gb3B0aW9ucy5maW5kKCdsaS5zZWxlY3RlZCcpLnByZXYoJ2xpOm5vdCguZGlzYWJsZWQpJylbMF07XHJcbiAgICAgICAgICAgICAgaWYobmV3T3B0aW9uKVxyXG4gICAgICAgICAgICAgICAgYWN0aXZhdGVPcHRpb24ob3B0aW9ucywgbmV3T3B0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gQXV0b21hdGljYWx5IGNsZWFuIGZpbHRlciBxdWVyeSBzbyB1c2VyIGNhbiBzZWFyY2ggYWdhaW4gYnkgc3RhcnRpbmcgbGV0dGVyc1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7IGZpbHRlclF1ZXJ5ID0gW107IH0sIDEwMDApO1xyXG4gICAgICAgICAgfTtcclxuXHJcbiAgICAgICRuZXdTZWxlY3Qub24oJ2tleWRvd24nLCBvbktleURvd24pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZnVuY3Rpb24gdG9nZ2xlRW50cnlGcm9tQXJyYXkoZW50cmllc0FycmF5LCBlbnRyeUluZGV4LCBzZWxlY3QpIHtcclxuICAgICAgdmFyIGluZGV4ID0gZW50cmllc0FycmF5LmluZGV4T2YoZW50cnlJbmRleCksXHJcbiAgICAgICAgICBub3RBZGRlZCA9IGluZGV4ID09PSAtMTtcclxuXHJcbiAgICAgIGlmIChub3RBZGRlZCkge1xyXG4gICAgICAgIGVudHJpZXNBcnJheS5wdXNoKGVudHJ5SW5kZXgpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGVudHJpZXNBcnJheS5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBzZWxlY3Quc2libGluZ3MoJ3VsLmRyb3Bkb3duLWNvbnRlbnQnKS5maW5kKCdsaScpLmVxKGVudHJ5SW5kZXgpLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcclxuXHJcbiAgICAgIC8vIHVzZSBub3RBZGRlZCBpbnN0ZWFkIG9mIHRydWUgKHRvIGRldGVjdCBpZiB0aGUgb3B0aW9uIGlzIHNlbGVjdGVkIG9yIG5vdClcclxuICAgICAgc2VsZWN0LmZpbmQoJ29wdGlvbicpLmVxKGVudHJ5SW5kZXgpLnByb3AoJ3NlbGVjdGVkJywgbm90QWRkZWQpO1xyXG4gICAgICBzZXRWYWx1ZVRvSW5wdXQoZW50cmllc0FycmF5LCBzZWxlY3QpO1xyXG5cclxuICAgICAgcmV0dXJuIG5vdEFkZGVkO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHNldFZhbHVlVG9JbnB1dChlbnRyaWVzQXJyYXksIHNlbGVjdCkge1xyXG4gICAgICB2YXIgdmFsdWUgPSAnJztcclxuXHJcbiAgICAgIGZvciAodmFyIGkgPSAwLCBjb3VudCA9IGVudHJpZXNBcnJheS5sZW5ndGg7IGkgPCBjb3VudDsgaSsrKSB7XHJcbiAgICAgICAgdmFyIHRleHQgPSBzZWxlY3QuZmluZCgnb3B0aW9uJykuZXEoZW50cmllc0FycmF5W2ldKS50ZXh0KCk7XHJcblxyXG4gICAgICAgIGkgPT09IDAgPyB2YWx1ZSArPSB0ZXh0IDogdmFsdWUgKz0gJywgJyArIHRleHQ7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh2YWx1ZSA9PT0gJycpIHtcclxuICAgICAgICB2YWx1ZSA9IHNlbGVjdC5maW5kKCdvcHRpb246ZGlzYWJsZWQnKS5lcSgwKS50ZXh0KCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHNlbGVjdC5zaWJsaW5ncygnaW5wdXQuc2VsZWN0LWRyb3Bkb3duJykudmFsKHZhbHVlKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxufSggalF1ZXJ5ICkpO1xyXG47KGZ1bmN0aW9uICgkKSB7XHJcblxyXG4gIHZhciBtZXRob2RzID0ge1xyXG5cclxuICAgIGluaXQgOiBmdW5jdGlvbihvcHRpb25zKSB7XHJcbiAgICAgIHZhciBkZWZhdWx0cyA9IHtcclxuICAgICAgICBpbmRpY2F0b3JzOiB0cnVlLFxyXG4gICAgICAgIGhlaWdodDogNDAwLFxyXG4gICAgICAgIHRyYW5zaXRpb246IDUwMCxcclxuICAgICAgICBpbnRlcnZhbDogNjAwMFxyXG4gICAgICB9O1xyXG4gICAgICBvcHRpb25zID0gJC5leHRlbmQoZGVmYXVsdHMsIG9wdGlvbnMpO1xyXG5cclxuICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgLy8gRm9yIGVhY2ggc2xpZGVyLCB3ZSB3YW50IHRvIGtlZXAgdHJhY2sgb2ZcclxuICAgICAgICAvLyB3aGljaCBzbGlkZSBpcyBhY3RpdmUgYW5kIGl0cyBhc3NvY2lhdGVkIGNvbnRlbnRcclxuICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xyXG4gICAgICAgIHZhciAkc2xpZGVyID0gJHRoaXMuZmluZCgndWwuc2xpZGVzJykuZmlyc3QoKTtcclxuICAgICAgICB2YXIgJHNsaWRlcyA9ICRzbGlkZXIuZmluZCgnPiBsaScpO1xyXG4gICAgICAgIHZhciAkYWN0aXZlX2luZGV4ID0gJHNsaWRlci5maW5kKCcuYWN0aXZlJykuaW5kZXgoKTtcclxuICAgICAgICB2YXIgJGFjdGl2ZSwgJGluZGljYXRvcnMsICRpbnRlcnZhbDtcclxuICAgICAgICBpZiAoJGFjdGl2ZV9pbmRleCAhPSAtMSkgeyAkYWN0aXZlID0gJHNsaWRlcy5lcSgkYWN0aXZlX2luZGV4KTsgfVxyXG5cclxuICAgICAgICAvLyBUcmFuc2l0aW9ucyB0aGUgY2FwdGlvbiBkZXBlbmRpbmcgb24gYWxpZ25tZW50XHJcbiAgICAgICAgZnVuY3Rpb24gY2FwdGlvblRyYW5zaXRpb24oY2FwdGlvbiwgZHVyYXRpb24pIHtcclxuICAgICAgICAgIGlmIChjYXB0aW9uLmhhc0NsYXNzKFwiY2VudGVyLWFsaWduXCIpKSB7XHJcbiAgICAgICAgICAgIGNhcHRpb24udmVsb2NpdHkoe29wYWNpdHk6IDAsIHRyYW5zbGF0ZVk6IC0xMDB9LCB7ZHVyYXRpb246IGR1cmF0aW9uLCBxdWV1ZTogZmFsc2V9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGVsc2UgaWYgKGNhcHRpb24uaGFzQ2xhc3MoXCJyaWdodC1hbGlnblwiKSkge1xyXG4gICAgICAgICAgICBjYXB0aW9uLnZlbG9jaXR5KHtvcGFjaXR5OiAwLCB0cmFuc2xhdGVYOiAxMDB9LCB7ZHVyYXRpb246IGR1cmF0aW9uLCBxdWV1ZTogZmFsc2V9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGVsc2UgaWYgKGNhcHRpb24uaGFzQ2xhc3MoXCJsZWZ0LWFsaWduXCIpKSB7XHJcbiAgICAgICAgICAgIGNhcHRpb24udmVsb2NpdHkoe29wYWNpdHk6IDAsIHRyYW5zbGF0ZVg6IC0xMDB9LCB7ZHVyYXRpb246IGR1cmF0aW9uLCBxdWV1ZTogZmFsc2V9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFRoaXMgZnVuY3Rpb24gd2lsbCB0cmFuc2l0aW9uIHRoZSBzbGlkZSB0byBhbnkgaW5kZXggb2YgdGhlIG5leHQgc2xpZGVcclxuICAgICAgICBmdW5jdGlvbiBtb3ZlVG9TbGlkZShpbmRleCkge1xyXG4gICAgICAgICAgLy8gV3JhcCBhcm91bmQgaW5kaWNlcy5cclxuICAgICAgICAgIGlmIChpbmRleCA+PSAkc2xpZGVzLmxlbmd0aCkgaW5kZXggPSAwO1xyXG4gICAgICAgICAgZWxzZSBpZiAoaW5kZXggPCAwKSBpbmRleCA9ICRzbGlkZXMubGVuZ3RoIC0xO1xyXG5cclxuICAgICAgICAgICRhY3RpdmVfaW5kZXggPSAkc2xpZGVyLmZpbmQoJy5hY3RpdmUnKS5pbmRleCgpO1xyXG5cclxuICAgICAgICAgIC8vIE9ubHkgZG8gaWYgaW5kZXggY2hhbmdlc1xyXG4gICAgICAgICAgaWYgKCRhY3RpdmVfaW5kZXggIT0gaW5kZXgpIHtcclxuICAgICAgICAgICAgJGFjdGl2ZSA9ICRzbGlkZXMuZXEoJGFjdGl2ZV9pbmRleCk7XHJcbiAgICAgICAgICAgICRjYXB0aW9uID0gJGFjdGl2ZS5maW5kKCcuY2FwdGlvbicpO1xyXG5cclxuICAgICAgICAgICAgJGFjdGl2ZS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICRhY3RpdmUudmVsb2NpdHkoe29wYWNpdHk6IDB9LCB7ZHVyYXRpb246IG9wdGlvbnMudHJhbnNpdGlvbiwgcXVldWU6IGZhbHNlLCBlYXNpbmc6ICdlYXNlT3V0UXVhZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2xpZGVzLm5vdCgnLmFjdGl2ZScpLnZlbG9jaXR5KHtvcGFjaXR5OiAwLCB0cmFuc2xhdGVYOiAwLCB0cmFuc2xhdGVZOiAwfSwge2R1cmF0aW9uOiAwLCBxdWV1ZTogZmFsc2V9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSB9KTtcclxuICAgICAgICAgICAgY2FwdGlvblRyYW5zaXRpb24oJGNhcHRpb24sIG9wdGlvbnMudHJhbnNpdGlvbik7XHJcblxyXG5cclxuICAgICAgICAgICAgLy8gVXBkYXRlIGluZGljYXRvcnNcclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuaW5kaWNhdG9ycykge1xyXG4gICAgICAgICAgICAgICRpbmRpY2F0b3JzLmVxKCRhY3RpdmVfaW5kZXgpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgJHNsaWRlcy5lcShpbmRleCkudmVsb2NpdHkoe29wYWNpdHk6IDF9LCB7ZHVyYXRpb246IG9wdGlvbnMudHJhbnNpdGlvbiwgcXVldWU6IGZhbHNlLCBlYXNpbmc6ICdlYXNlT3V0UXVhZCd9KTtcclxuICAgICAgICAgICAgJHNsaWRlcy5lcShpbmRleCkuZmluZCgnLmNhcHRpb24nKS52ZWxvY2l0eSh7b3BhY2l0eTogMSwgdHJhbnNsYXRlWDogMCwgdHJhbnNsYXRlWTogMH0sIHtkdXJhdGlvbjogb3B0aW9ucy50cmFuc2l0aW9uLCBkZWxheTogb3B0aW9ucy50cmFuc2l0aW9uLCBxdWV1ZTogZmFsc2UsIGVhc2luZzogJ2Vhc2VPdXRRdWFkJ30pO1xyXG4gICAgICAgICAgICAkc2xpZGVzLmVxKGluZGV4KS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcblxyXG5cclxuICAgICAgICAgICAgLy8gVXBkYXRlIGluZGljYXRvcnNcclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuaW5kaWNhdG9ycykge1xyXG4gICAgICAgICAgICAgICRpbmRpY2F0b3JzLmVxKGluZGV4KS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFNldCBoZWlnaHQgb2Ygc2xpZGVyXHJcbiAgICAgICAgLy8gSWYgZnVsbHNjcmVlbiwgZG8gbm90aGluZ1xyXG4gICAgICAgIGlmICghJHRoaXMuaGFzQ2xhc3MoJ2Z1bGxzY3JlZW4nKSkge1xyXG4gICAgICAgICAgaWYgKG9wdGlvbnMuaW5kaWNhdG9ycykge1xyXG4gICAgICAgICAgICAvLyBBZGQgaGVpZ2h0IGlmIGluZGljYXRvcnMgYXJlIHByZXNlbnRcclxuICAgICAgICAgICAgJHRoaXMuaGVpZ2h0KG9wdGlvbnMuaGVpZ2h0ICsgNDApO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICR0aGlzLmhlaWdodChvcHRpb25zLmhlaWdodCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAkc2xpZGVyLmhlaWdodChvcHRpb25zLmhlaWdodCk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgLy8gU2V0IGluaXRpYWwgcG9zaXRpb25zIG9mIGNhcHRpb25zXHJcbiAgICAgICAgJHNsaWRlcy5maW5kKCcuY2FwdGlvbicpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgY2FwdGlvblRyYW5zaXRpb24oJCh0aGlzKSwgMCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIE1vdmUgaW1nIHNyYyBpbnRvIGJhY2tncm91bmQtaW1hZ2VcclxuICAgICAgICAkc2xpZGVzLmZpbmQoJ2ltZycpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgdmFyIHBsYWNlaG9sZGVyQmFzZTY0ID0gJ2RhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEFRQUJBSUFCQVAvLy93QUFBQ0g1QkFFS0FBRUFMQUFBQUFBQkFBRUFBQUlDVEFFQU93PT0nO1xyXG4gICAgICAgICAgaWYgKCQodGhpcykuYXR0cignc3JjJykgIT09IHBsYWNlaG9sZGVyQmFzZTY0KSB7XHJcbiAgICAgICAgICAgICQodGhpcykuY3NzKCdiYWNrZ3JvdW5kLWltYWdlJywgJ3VybCgnICsgJCh0aGlzKS5hdHRyKCdzcmMnKSArICcpJyApO1xyXG4gICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ3NyYycsIHBsYWNlaG9sZGVyQmFzZTY0KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gZHluYW1pY2FsbHkgYWRkIGluZGljYXRvcnNcclxuICAgICAgICBpZiAob3B0aW9ucy5pbmRpY2F0b3JzKSB7XHJcbiAgICAgICAgICAkaW5kaWNhdG9ycyA9ICQoJzx1bCBjbGFzcz1cImluZGljYXRvcnNcIj48L3VsPicpO1xyXG4gICAgICAgICAgJHNsaWRlcy5lYWNoKGZ1bmN0aW9uKCBpbmRleCApIHtcclxuICAgICAgICAgICAgdmFyICRpbmRpY2F0b3IgPSAkKCc8bGkgY2xhc3M9XCJpbmRpY2F0b3ItaXRlbVwiPjwvbGk+Jyk7XHJcblxyXG4gICAgICAgICAgICAvLyBIYW5kbGUgY2xpY2tzIG9uIGluZGljYXRvcnNcclxuICAgICAgICAgICAgJGluZGljYXRvci5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgdmFyICRwYXJlbnQgPSAkc2xpZGVyLnBhcmVudCgpO1xyXG4gICAgICAgICAgICAgIHZhciBjdXJyX2luZGV4ID0gJHBhcmVudC5maW5kKCQodGhpcykpLmluZGV4KCk7XHJcbiAgICAgICAgICAgICAgbW92ZVRvU2xpZGUoY3Vycl9pbmRleCk7XHJcblxyXG4gICAgICAgICAgICAgIC8vIHJlc2V0IGludGVydmFsXHJcbiAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCgkaW50ZXJ2YWwpO1xyXG4gICAgICAgICAgICAgICRpbnRlcnZhbCA9IHNldEludGVydmFsKFxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgJGFjdGl2ZV9pbmRleCA9ICRzbGlkZXIuZmluZCgnLmFjdGl2ZScpLmluZGV4KCk7XHJcbiAgICAgICAgICAgICAgICAgIGlmICgkc2xpZGVzLmxlbmd0aCA9PSAkYWN0aXZlX2luZGV4ICsgMSkgJGFjdGl2ZV9pbmRleCA9IDA7IC8vIGxvb3AgdG8gc3RhcnRcclxuICAgICAgICAgICAgICAgICAgZWxzZSAkYWN0aXZlX2luZGV4ICs9IDE7XHJcblxyXG4gICAgICAgICAgICAgICAgICBtb3ZlVG9TbGlkZSgkYWN0aXZlX2luZGV4KTtcclxuXHJcbiAgICAgICAgICAgICAgICB9LCBvcHRpb25zLnRyYW5zaXRpb24gKyBvcHRpb25zLmludGVydmFsXHJcbiAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICRpbmRpY2F0b3JzLmFwcGVuZCgkaW5kaWNhdG9yKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgJHRoaXMuYXBwZW5kKCRpbmRpY2F0b3JzKTtcclxuICAgICAgICAgICRpbmRpY2F0b3JzID0gJHRoaXMuZmluZCgndWwuaW5kaWNhdG9ycycpLmZpbmQoJ2xpLmluZGljYXRvci1pdGVtJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoJGFjdGl2ZSkge1xyXG4gICAgICAgICAgJGFjdGl2ZS5zaG93KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgJHNsaWRlcy5maXJzdCgpLmFkZENsYXNzKCdhY3RpdmUnKS52ZWxvY2l0eSh7b3BhY2l0eTogMX0sIHtkdXJhdGlvbjogb3B0aW9ucy50cmFuc2l0aW9uLCBxdWV1ZTogZmFsc2UsIGVhc2luZzogJ2Vhc2VPdXRRdWFkJ30pO1xyXG5cclxuICAgICAgICAgICRhY3RpdmVfaW5kZXggPSAwO1xyXG4gICAgICAgICAgJGFjdGl2ZSA9ICRzbGlkZXMuZXEoJGFjdGl2ZV9pbmRleCk7XHJcblxyXG4gICAgICAgICAgLy8gVXBkYXRlIGluZGljYXRvcnNcclxuICAgICAgICAgIGlmIChvcHRpb25zLmluZGljYXRvcnMpIHtcclxuICAgICAgICAgICAgJGluZGljYXRvcnMuZXEoJGFjdGl2ZV9pbmRleCkuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQWRqdXN0IGhlaWdodCB0byBjdXJyZW50IHNsaWRlXHJcbiAgICAgICAgJGFjdGl2ZS5maW5kKCdpbWcnKS5lYWNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgJGFjdGl2ZS5maW5kKCcuY2FwdGlvbicpLnZlbG9jaXR5KHtvcGFjaXR5OiAxLCB0cmFuc2xhdGVYOiAwLCB0cmFuc2xhdGVZOiAwfSwge2R1cmF0aW9uOiBvcHRpb25zLnRyYW5zaXRpb24sIHF1ZXVlOiBmYWxzZSwgZWFzaW5nOiAnZWFzZU91dFF1YWQnfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIGF1dG8gc2Nyb2xsXHJcbiAgICAgICAgJGludGVydmFsID0gc2V0SW50ZXJ2YWwoXHJcbiAgICAgICAgICBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAkYWN0aXZlX2luZGV4ID0gJHNsaWRlci5maW5kKCcuYWN0aXZlJykuaW5kZXgoKTtcclxuICAgICAgICAgICAgbW92ZVRvU2xpZGUoJGFjdGl2ZV9pbmRleCArIDEpO1xyXG5cclxuICAgICAgICAgIH0sIG9wdGlvbnMudHJhbnNpdGlvbiArIG9wdGlvbnMuaW50ZXJ2YWxcclxuICAgICAgICApO1xyXG5cclxuXHJcbiAgICAgICAgLy8gSGFtbWVySlMsIFN3aXBlIG5hdmlnYXRpb25cclxuXHJcbiAgICAgICAgLy8gVG91Y2ggRXZlbnRcclxuICAgICAgICB2YXIgcGFubmluZyA9IGZhbHNlO1xyXG4gICAgICAgIHZhciBzd2lwZUxlZnQgPSBmYWxzZTtcclxuICAgICAgICB2YXIgc3dpcGVSaWdodCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAkdGhpcy5oYW1tZXIoe1xyXG4gICAgICAgICAgICBwcmV2ZW50X2RlZmF1bHQ6IGZhbHNlXHJcbiAgICAgICAgfSkuYmluZCgncGFuJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgaWYgKGUuZ2VzdHVyZS5wb2ludGVyVHlwZSA9PT0gXCJ0b3VjaFwiKSB7XHJcblxyXG4gICAgICAgICAgICAvLyByZXNldCBpbnRlcnZhbFxyXG4gICAgICAgICAgICBjbGVhckludGVydmFsKCRpbnRlcnZhbCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgZGlyZWN0aW9uID0gZS5nZXN0dXJlLmRpcmVjdGlvbjtcclxuICAgICAgICAgICAgdmFyIHggPSBlLmdlc3R1cmUuZGVsdGFYO1xyXG4gICAgICAgICAgICB2YXIgdmVsb2NpdHlYID0gZS5nZXN0dXJlLnZlbG9jaXR5WDtcclxuXHJcbiAgICAgICAgICAgICRjdXJyX3NsaWRlID0gJHNsaWRlci5maW5kKCcuYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICRjdXJyX3NsaWRlLnZlbG9jaXR5KHsgdHJhbnNsYXRlWDogeFxyXG4gICAgICAgICAgICAgICAgfSwge2R1cmF0aW9uOiA1MCwgcXVldWU6IGZhbHNlLCBlYXNpbmc6ICdlYXNlT3V0UXVhZCd9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIFN3aXBlIExlZnRcclxuICAgICAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gNCAmJiAoeCA+ICgkdGhpcy5pbm5lcldpZHRoKCkgLyAyKSB8fCB2ZWxvY2l0eVggPCAtMC42NSkpIHtcclxuICAgICAgICAgICAgICBzd2lwZVJpZ2h0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBTd2lwZSBSaWdodFxyXG4gICAgICAgICAgICBlbHNlIGlmIChkaXJlY3Rpb24gPT09IDIgJiYgKHggPCAoLTEgKiAkdGhpcy5pbm5lcldpZHRoKCkgLyAyKSB8fCB2ZWxvY2l0eVggPiAwLjY1KSkge1xyXG4gICAgICAgICAgICAgIHN3aXBlTGVmdCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIE1ha2UgU2xpZGUgQmVoaW5kIGFjdGl2ZSBzbGlkZSB2aXNpYmxlXHJcbiAgICAgICAgICAgIHZhciBuZXh0X3NsaWRlO1xyXG4gICAgICAgICAgICBpZiAoc3dpcGVMZWZ0KSB7XHJcbiAgICAgICAgICAgICAgbmV4dF9zbGlkZSA9ICRjdXJyX3NsaWRlLm5leHQoKTtcclxuICAgICAgICAgICAgICBpZiAobmV4dF9zbGlkZS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIG5leHRfc2xpZGUgPSAkc2xpZGVzLmZpcnN0KCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIG5leHRfc2xpZGUudmVsb2NpdHkoeyBvcGFjaXR5OiAxXHJcbiAgICAgICAgICAgICAgICAgIH0sIHtkdXJhdGlvbjogMzAwLCBxdWV1ZTogZmFsc2UsIGVhc2luZzogJ2Vhc2VPdXRRdWFkJ30pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChzd2lwZVJpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgbmV4dF9zbGlkZSA9ICRjdXJyX3NsaWRlLnByZXYoKTtcclxuICAgICAgICAgICAgICBpZiAobmV4dF9zbGlkZS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIG5leHRfc2xpZGUgPSAkc2xpZGVzLmxhc3QoKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgbmV4dF9zbGlkZS52ZWxvY2l0eSh7IG9wYWNpdHk6IDFcclxuICAgICAgICAgICAgICAgICAgfSwge2R1cmF0aW9uOiAzMDAsIHF1ZXVlOiBmYWxzZSwgZWFzaW5nOiAnZWFzZU91dFF1YWQnfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICB9KS5iaW5kKCdwYW5lbmQnLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICBpZiAoZS5nZXN0dXJlLnBvaW50ZXJUeXBlID09PSBcInRvdWNoXCIpIHtcclxuXHJcbiAgICAgICAgICAgICRjdXJyX3NsaWRlID0gJHNsaWRlci5maW5kKCcuYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIHBhbm5pbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgY3Vycl9pbmRleCA9ICRzbGlkZXIuZmluZCgnLmFjdGl2ZScpLmluZGV4KCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXN3aXBlUmlnaHQgJiYgIXN3aXBlTGVmdCB8fCAkc2xpZGVzLmxlbmd0aCA8PTEpIHtcclxuICAgICAgICAgICAgICAvLyBSZXR1cm4gdG8gb3JpZ2luYWwgc3BvdFxyXG4gICAgICAgICAgICAgICRjdXJyX3NsaWRlLnZlbG9jaXR5KHsgdHJhbnNsYXRlWDogMFxyXG4gICAgICAgICAgICAgICAgICB9LCB7ZHVyYXRpb246IDMwMCwgcXVldWU6IGZhbHNlLCBlYXNpbmc6ICdlYXNlT3V0UXVhZCd9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChzd2lwZUxlZnQpIHtcclxuICAgICAgICAgICAgICBtb3ZlVG9TbGlkZShjdXJyX2luZGV4ICsgMSk7XHJcbiAgICAgICAgICAgICAgJGN1cnJfc2xpZGUudmVsb2NpdHkoe3RyYW5zbGF0ZVg6IC0xICogJHRoaXMuaW5uZXJXaWR0aCgpIH0sIHtkdXJhdGlvbjogMzAwLCBxdWV1ZTogZmFsc2UsIGVhc2luZzogJ2Vhc2VPdXRRdWFkJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRjdXJyX3NsaWRlLnZlbG9jaXR5KHtvcGFjaXR5OiAwLCB0cmFuc2xhdGVYOiAwfSwge2R1cmF0aW9uOiAwLCBxdWV1ZTogZmFsc2V9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChzd2lwZVJpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgbW92ZVRvU2xpZGUoY3Vycl9pbmRleCAtIDEpO1xyXG4gICAgICAgICAgICAgICRjdXJyX3NsaWRlLnZlbG9jaXR5KHt0cmFuc2xhdGVYOiAkdGhpcy5pbm5lcldpZHRoKCkgfSwge2R1cmF0aW9uOiAzMDAsIHF1ZXVlOiBmYWxzZSwgZWFzaW5nOiAnZWFzZU91dFF1YWQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGN1cnJfc2xpZGUudmVsb2NpdHkoe29wYWNpdHk6IDAsIHRyYW5zbGF0ZVg6IDB9LCB7ZHVyYXRpb246IDAsIHF1ZXVlOiBmYWxzZX0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHN3aXBlTGVmdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBzd2lwZVJpZ2h0ID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAvLyBSZXN0YXJ0IGludGVydmFsXHJcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoJGludGVydmFsKTtcclxuICAgICAgICAgICAgJGludGVydmFsID0gc2V0SW50ZXJ2YWwoXHJcbiAgICAgICAgICAgICAgZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICRhY3RpdmVfaW5kZXggPSAkc2xpZGVyLmZpbmQoJy5hY3RpdmUnKS5pbmRleCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCRzbGlkZXMubGVuZ3RoID09ICRhY3RpdmVfaW5kZXggKyAxKSAkYWN0aXZlX2luZGV4ID0gMDsgLy8gbG9vcCB0byBzdGFydFxyXG4gICAgICAgICAgICAgICAgZWxzZSAkYWN0aXZlX2luZGV4ICs9IDE7XHJcblxyXG4gICAgICAgICAgICAgICAgbW92ZVRvU2xpZGUoJGFjdGl2ZV9pbmRleCk7XHJcblxyXG4gICAgICAgICAgICAgIH0sIG9wdGlvbnMudHJhbnNpdGlvbiArIG9wdGlvbnMuaW50ZXJ2YWxcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJHRoaXMub24oJ3NsaWRlclBhdXNlJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBjbGVhckludGVydmFsKCRpbnRlcnZhbCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICR0aGlzLm9uKCdzbGlkZXJTdGFydCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgY2xlYXJJbnRlcnZhbCgkaW50ZXJ2YWwpO1xyXG4gICAgICAgICAgJGludGVydmFsID0gc2V0SW50ZXJ2YWwoXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgJGFjdGl2ZV9pbmRleCA9ICRzbGlkZXIuZmluZCgnLmFjdGl2ZScpLmluZGV4KCk7XHJcbiAgICAgICAgICAgICAgaWYgKCRzbGlkZXMubGVuZ3RoID09ICRhY3RpdmVfaW5kZXggKyAxKSAkYWN0aXZlX2luZGV4ID0gMDsgLy8gbG9vcCB0byBzdGFydFxyXG4gICAgICAgICAgICAgIGVsc2UgJGFjdGl2ZV9pbmRleCArPSAxO1xyXG5cclxuICAgICAgICAgICAgICBtb3ZlVG9TbGlkZSgkYWN0aXZlX2luZGV4KTtcclxuXHJcbiAgICAgICAgICAgIH0sIG9wdGlvbnMudHJhbnNpdGlvbiArIG9wdGlvbnMuaW50ZXJ2YWxcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICR0aGlzLm9uKCdzbGlkZXJOZXh0JywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAkYWN0aXZlX2luZGV4ID0gJHNsaWRlci5maW5kKCcuYWN0aXZlJykuaW5kZXgoKTtcclxuICAgICAgICAgIG1vdmVUb1NsaWRlKCRhY3RpdmVfaW5kZXggKyAxKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJHRoaXMub24oJ3NsaWRlclByZXYnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICRhY3RpdmVfaW5kZXggPSAkc2xpZGVyLmZpbmQoJy5hY3RpdmUnKS5pbmRleCgpO1xyXG4gICAgICAgICAgbW92ZVRvU2xpZGUoJGFjdGl2ZV9pbmRleCAtIDEpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgfSk7XHJcblxyXG5cclxuXHJcbiAgICB9LFxyXG4gICAgcGF1c2UgOiBmdW5jdGlvbigpIHtcclxuICAgICAgJCh0aGlzKS50cmlnZ2VyKCdzbGlkZXJQYXVzZScpO1xyXG4gICAgfSxcclxuICAgIHN0YXJ0IDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICQodGhpcykudHJpZ2dlcignc2xpZGVyU3RhcnQnKTtcclxuICAgIH0sXHJcbiAgICBuZXh0IDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICQodGhpcykudHJpZ2dlcignc2xpZGVyTmV4dCcpO1xyXG4gICAgfSxcclxuICAgIHByZXYgOiBmdW5jdGlvbigpIHtcclxuICAgICAgJCh0aGlzKS50cmlnZ2VyKCdzbGlkZXJQcmV2Jyk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcblxyXG4gICAgJC5mbi5zbGlkZXIgPSBmdW5jdGlvbihtZXRob2RPck9wdGlvbnMpIHtcclxuICAgICAgaWYgKCBtZXRob2RzW21ldGhvZE9yT3B0aW9uc10gKSB7XHJcbiAgICAgICAgcmV0dXJuIG1ldGhvZHNbIG1ldGhvZE9yT3B0aW9ucyBdLmFwcGx5KCB0aGlzLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCggYXJndW1lbnRzLCAxICkpO1xyXG4gICAgICB9IGVsc2UgaWYgKCB0eXBlb2YgbWV0aG9kT3JPcHRpb25zID09PSAnb2JqZWN0JyB8fCAhIG1ldGhvZE9yT3B0aW9ucyApIHtcclxuICAgICAgICAvLyBEZWZhdWx0IHRvIFwiaW5pdFwiXHJcbiAgICAgICAgcmV0dXJuIG1ldGhvZHMuaW5pdC5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJC5lcnJvciggJ01ldGhvZCAnICsgIG1ldGhvZE9yT3B0aW9ucyArICcgZG9lcyBub3QgZXhpc3Qgb24galF1ZXJ5LnRvb2x0aXAnICk7XHJcbiAgICAgIH1cclxuICAgIH07IC8vIFBsdWdpbiBlbmRcclxufSggalF1ZXJ5ICkpO1xyXG47KGZ1bmN0aW9uICgkKSB7XHJcbiAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrLmNhcmQnLCAnLmNhcmQnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICBpZiAoJCh0aGlzKS5maW5kKCc+IC5jYXJkLXJldmVhbCcpLmxlbmd0aCkge1xyXG4gICAgICAgIGlmICgkKGUudGFyZ2V0KS5pcygkKCcuY2FyZC1yZXZlYWwgLmNhcmQtdGl0bGUnKSkgfHwgJChlLnRhcmdldCkuaXMoJCgnLmNhcmQtcmV2ZWFsIC5jYXJkLXRpdGxlIGknKSkpIHtcclxuICAgICAgICAgIC8vIE1ha2UgUmV2ZWFsIGFuaW1hdGUgZG93biBhbmQgZGlzcGxheSBub25lXHJcbiAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5jYXJkLXJldmVhbCcpLnZlbG9jaXR5KFxyXG4gICAgICAgICAgICB7dHJhbnNsYXRlWTogMH0sIHtcclxuICAgICAgICAgICAgICBkdXJhdGlvbjogMjI1LFxyXG4gICAgICAgICAgICAgIHF1ZXVlOiBmYWxzZSxcclxuICAgICAgICAgICAgICBlYXNpbmc6ICdlYXNlSW5PdXRRdWFkJyxcclxuICAgICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24oKSB7ICQodGhpcykuY3NzKHsgZGlzcGxheTogJ25vbmUnfSk7IH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoJChlLnRhcmdldCkuaXMoJCgnLmNhcmQgLmFjdGl2YXRvcicpKSB8fFxyXG4gICAgICAgICAgICAgICAgICQoZS50YXJnZXQpLmlzKCQoJy5jYXJkIC5hY3RpdmF0b3IgaScpKSApIHtcclxuICAgICAgICAgICQoZS50YXJnZXQpLmNsb3Nlc3QoJy5jYXJkJykuY3NzKCdvdmVyZmxvdycsICdoaWRkZW4nKTtcclxuICAgICAgICAgICQodGhpcykuZmluZCgnLmNhcmQtcmV2ZWFsJykuY3NzKHsgZGlzcGxheTogJ2Jsb2NrJ30pLnZlbG9jaXR5KFwic3RvcFwiLCBmYWxzZSkudmVsb2NpdHkoe3RyYW5zbGF0ZVk6ICctMTAwJSd9LCB7ZHVyYXRpb246IDMwMCwgcXVldWU6IGZhbHNlLCBlYXNpbmc6ICdlYXNlSW5PdXRRdWFkJ30pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gIH0pO1xyXG59KCBqUXVlcnkgKSk7OyhmdW5jdGlvbiAoJCkge1xyXG4gIHZhciBjaGlwc0hhbmRsZUV2ZW50cyA9IGZhbHNlO1xyXG4gIHZhciBtYXRlcmlhbENoaXBzRGVmYXVsdHMgPSB7XHJcbiAgICBkYXRhOiBbXSxcclxuICAgIHBsYWNlaG9sZGVyOiAnJyxcclxuICAgIHNlY29uZGFyeVBsYWNlaG9sZGVyOiAnJyxcclxuICB9O1xyXG5cclxuICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcclxuICAgIC8vIEhhbmRsZSByZW1vdmFsIG9mIHN0YXRpYyBjaGlwcy5cclxuICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuY2hpcCAuY2xvc2UnLCBmdW5jdGlvbihlKXtcclxuICAgICAgdmFyICRjaGlwcyA9ICQodGhpcykuY2xvc2VzdCgnLmNoaXBzJyk7XHJcbiAgICAgIGlmICgkY2hpcHMuYXR0cignZGF0YS1pbml0aWFsaXplZCcpKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgICQodGhpcykuY2xvc2VzdCgnLmNoaXAnKS5yZW1vdmUoKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICAkLmZuLm1hdGVyaWFsX2NoaXAgPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgdGhpcy4kZWwgPSAkKHRoaXMpO1xyXG4gICAgdGhpcy4kZG9jdW1lbnQgPSAkKGRvY3VtZW50KTtcclxuICAgIHRoaXMuU0VMUyA9IHtcclxuICAgICAgQ0hJUFM6ICcuY2hpcHMnLFxyXG4gICAgICBDSElQOiAnLmNoaXAnLFxyXG4gICAgICBJTlBVVDogJ2lucHV0JyxcclxuICAgICAgREVMRVRFOiAnLm1hdGVyaWFsLWljb25zJyxcclxuICAgICAgU0VMRUNURURfQ0hJUDogJy5zZWxlY3RlZCcsXHJcbiAgICB9O1xyXG5cclxuICAgIGlmICgnZGF0YScgPT09IG9wdGlvbnMpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuJGVsLmRhdGEoJ2NoaXBzJyk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGN1cnJfb3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBtYXRlcmlhbENoaXBzRGVmYXVsdHMsIG9wdGlvbnMpO1xyXG5cclxuXHJcbiAgICAvLyBJbml0aWFsaXplXHJcbiAgICB0aGlzLmluaXQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgdmFyIGkgPSAwO1xyXG4gICAgICB2YXIgY2hpcHM7XHJcbiAgICAgIHNlbGYuJGVsLmVhY2goZnVuY3Rpb24oKXtcclxuICAgICAgICB2YXIgJGNoaXBzID0gJCh0aGlzKTtcclxuICAgICAgICB2YXIgY2hpcElkID0gTWF0ZXJpYWxpemUuZ3VpZCgpO1xyXG5cclxuICAgICAgICBpZiAoIWN1cnJfb3B0aW9ucy5kYXRhIHx8ICEoY3Vycl9vcHRpb25zLmRhdGEgaW5zdGFuY2VvZiBBcnJheSkpIHtcclxuICAgICAgICAgIGN1cnJfb3B0aW9ucy5kYXRhID0gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgICRjaGlwcy5kYXRhKCdjaGlwcycsIGN1cnJfb3B0aW9ucy5kYXRhKTtcclxuICAgICAgICAkY2hpcHMuYXR0cignZGF0YS1pbmRleCcsIGkpO1xyXG4gICAgICAgICRjaGlwcy5hdHRyKCdkYXRhLWluaXRpYWxpemVkJywgdHJ1ZSk7XHJcblxyXG4gICAgICAgIGlmICghJGNoaXBzLmhhc0NsYXNzKHNlbGYuU0VMUy5DSElQUykpIHtcclxuICAgICAgICAgICRjaGlwcy5hZGRDbGFzcygnY2hpcHMnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNlbGYuY2hpcHMoJGNoaXBzLCBjaGlwSWQpO1xyXG4gICAgICAgIGkrKztcclxuICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuaGFuZGxlRXZlbnRzID0gZnVuY3Rpb24oKXtcclxuICAgICAgdmFyIFNFTFMgPSBzZWxmLlNFTFM7XHJcblxyXG4gICAgICBzZWxmLiRkb2N1bWVudC5vZmYoJ2NsaWNrLmNoaXBzLWZvY3VzJywgU0VMUy5DSElQUykub24oJ2NsaWNrLmNoaXBzLWZvY3VzJywgU0VMUy5DSElQUywgZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgJChlLnRhcmdldCkuZmluZChTRUxTLklOUFVUKS5mb2N1cygpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHNlbGYuJGRvY3VtZW50Lm9mZignY2xpY2suY2hpcHMtc2VsZWN0JywgU0VMUy5DSElQKS5vbignY2xpY2suY2hpcHMtc2VsZWN0JywgU0VMUy5DSElQLCBmdW5jdGlvbihlKXtcclxuICAgICAgICAkKFNFTFMuQ0hJUCkucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcygnc2VsZWN0ZWQnKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBzZWxmLiRkb2N1bWVudC5vZmYoJ2tleWRvd24uY2hpcHMnKS5vbigna2V5ZG93bi5jaGlwcycsIGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgIGlmICgkKGUudGFyZ2V0KS5pcygnaW5wdXQsIHRleHRhcmVhJykpIHtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGRlbGV0ZVxyXG4gICAgICAgIHZhciAkY2hpcCA9IHNlbGYuJGRvY3VtZW50LmZpbmQoU0VMUy5DSElQICsgU0VMUy5TRUxFQ1RFRF9DSElQKTtcclxuICAgICAgICB2YXIgJGNoaXBzID0gJGNoaXAuY2xvc2VzdChTRUxTLkNISVBTKTtcclxuICAgICAgICB2YXIgbGVuZ3RoID0gJGNoaXAuc2libGluZ3MoU0VMUy5DSElQKS5sZW5ndGg7XHJcbiAgICAgICAgdmFyIGluZGV4O1xyXG5cclxuICAgICAgICBpZiAoISRjaGlwLmxlbmd0aCkge1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGUud2hpY2ggPT09IDggfHwgZS53aGljaCA9PT0gNDYpIHtcclxuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgICBpbmRleCA9ICRjaGlwLmluZGV4KCk7XHJcbiAgICAgICAgICBzZWxmLmRlbGV0ZUNoaXAoaW5kZXgsICRjaGlwcyk7XHJcblxyXG4gICAgICAgICAgdmFyIHNlbGVjdEluZGV4ID0gbnVsbDtcclxuICAgICAgICAgIGlmICgoaW5kZXggKyAxKSA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICBzZWxlY3RJbmRleCA9IGluZGV4O1xyXG4gICAgICAgICAgfSBlbHNlIGlmIChpbmRleCA9PT0gbGVuZ3RoIHx8IChpbmRleCArIDEpID09PSBsZW5ndGgpIHtcclxuICAgICAgICAgICAgc2VsZWN0SW5kZXggPSBsZW5ndGggLSAxO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGlmIChzZWxlY3RJbmRleCA8IDApIHNlbGVjdEluZGV4ID0gbnVsbDtcclxuXHJcbiAgICAgICAgICBpZiAobnVsbCAhPT0gc2VsZWN0SW5kZXgpIHtcclxuICAgICAgICAgICAgc2VsZi5zZWxlY3RDaGlwKHNlbGVjdEluZGV4LCAkY2hpcHMpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKCFsZW5ndGgpICRjaGlwcy5maW5kKCdpbnB1dCcpLmZvY3VzKCk7XHJcblxyXG4gICAgICAgIC8vIGxlZnRcclxuICAgICAgICB9IGVsc2UgaWYgKGUud2hpY2ggPT09IDM3KSB7XHJcbiAgICAgICAgICBpbmRleCA9ICRjaGlwLmluZGV4KCkgLSAxO1xyXG4gICAgICAgICAgaWYgKGluZGV4IDwgMCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAkKFNFTFMuQ0hJUCkucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7XHJcbiAgICAgICAgICBzZWxmLnNlbGVjdENoaXAoaW5kZXgsICRjaGlwcyk7XHJcblxyXG4gICAgICAgIC8vIHJpZ2h0XHJcbiAgICAgICAgfSBlbHNlIGlmIChlLndoaWNoID09PSAzOSkge1xyXG4gICAgICAgICAgaW5kZXggPSAkY2hpcC5pbmRleCgpICsgMTtcclxuICAgICAgICAgICQoU0VMUy5DSElQKS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTtcclxuICAgICAgICAgIGlmIChpbmRleCA+IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAkY2hpcHMuZmluZCgnaW5wdXQnKS5mb2N1cygpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBzZWxmLnNlbGVjdENoaXAoaW5kZXgsICRjaGlwcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHNlbGYuJGRvY3VtZW50Lm9mZignZm9jdXNpbi5jaGlwcycsIFNFTFMuQ0hJUFMgKyAnICcgKyBTRUxTLklOUFVUKS5vbignZm9jdXNpbi5jaGlwcycsIFNFTFMuQ0hJUFMgKyAnICcgKyBTRUxTLklOUFVULCBmdW5jdGlvbihlKXtcclxuICAgICAgICB2YXIgJGN1cnJDaGlwcyA9ICQoZS50YXJnZXQpLmNsb3Nlc3QoU0VMUy5DSElQUyk7XHJcbiAgICAgICAgJGN1cnJDaGlwcy5hZGRDbGFzcygnZm9jdXMnKTtcclxuICAgICAgICAkY3VyckNoaXBzLnNpYmxpbmdzKCdsYWJlbCwgLnByZWZpeCcpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAkKFNFTFMuQ0hJUCkucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgc2VsZi4kZG9jdW1lbnQub2ZmKCdmb2N1c291dC5jaGlwcycsIFNFTFMuQ0hJUFMgKyAnICcgKyBTRUxTLklOUFVUKS5vbignZm9jdXNvdXQuY2hpcHMnLCBTRUxTLkNISVBTICsgJyAnICsgU0VMUy5JTlBVVCwgZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgdmFyICRjdXJyQ2hpcHMgPSAkKGUudGFyZ2V0KS5jbG9zZXN0KFNFTFMuQ0hJUFMpO1xyXG4gICAgICAgICRjdXJyQ2hpcHMucmVtb3ZlQ2xhc3MoJ2ZvY3VzJyk7XHJcblxyXG4gICAgICAgIC8vIFJlbW92ZSBhY3RpdmUgaWYgZW1wdHlcclxuICAgICAgICBpZiAoISRjdXJyQ2hpcHMuZGF0YSgnY2hpcHMnKS5sZW5ndGgpIHtcclxuICAgICAgICAgICRjdXJyQ2hpcHMuc2libGluZ3MoJ2xhYmVsJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAkY3VyckNoaXBzLnNpYmxpbmdzKCcucHJlZml4JykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHNlbGYuJGRvY3VtZW50Lm9mZigna2V5ZG93bi5jaGlwcy1hZGQnLCBTRUxTLkNISVBTICsgJyAnICsgU0VMUy5JTlBVVCkub24oJ2tleWRvd24uY2hpcHMtYWRkJywgU0VMUy5DSElQUyArICcgJyArIFNFTFMuSU5QVVQsIGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgIHZhciAkdGFyZ2V0ID0gJChlLnRhcmdldCk7XHJcbiAgICAgICAgdmFyICRjaGlwcyA9ICR0YXJnZXQuY2xvc2VzdChTRUxTLkNISVBTKTtcclxuICAgICAgICB2YXIgY2hpcHNMZW5ndGggPSAkY2hpcHMuY2hpbGRyZW4oU0VMUy5DSElQKS5sZW5ndGg7XHJcblxyXG4gICAgICAgIC8vIGVudGVyXHJcbiAgICAgICAgaWYgKDEzID09PSBlLndoaWNoKSB7XHJcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICBzZWxmLmFkZENoaXAoe3RhZzogJHRhcmdldC52YWwoKX0sICRjaGlwcyk7XHJcbiAgICAgICAgICAkdGFyZ2V0LnZhbCgnJyk7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBkZWxldGUgb3IgbGVmdFxyXG4gICAgICAgICBpZiAoKDggPT09IGUua2V5Q29kZSB8fCAzNyA9PT0gZS5rZXlDb2RlKSAmJiAnJyA9PT0gJHRhcmdldC52YWwoKSAmJiBjaGlwc0xlbmd0aCkge1xyXG4gICAgICAgICAgc2VsZi5zZWxlY3RDaGlwKGNoaXBzTGVuZ3RoIC0gMSwgJGNoaXBzKTtcclxuICAgICAgICAgICR0YXJnZXQuYmx1cigpO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBDbGljayBvbiBkZWxldGUgaWNvbiBpbiBjaGlwLlxyXG4gICAgICBzZWxmLiRkb2N1bWVudC5vZmYoJ2NsaWNrLmNoaXBzLWRlbGV0ZScsIFNFTFMuQ0hJUFMgKyAnICcgKyBTRUxTLkRFTEVURSkub24oJ2NsaWNrLmNoaXBzLWRlbGV0ZScsIFNFTFMuQ0hJUFMgKyAnICcgKyBTRUxTLkRFTEVURSwgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIHZhciAkdGFyZ2V0ID0gJChlLnRhcmdldCk7XHJcbiAgICAgICAgdmFyICRjaGlwcyA9ICR0YXJnZXQuY2xvc2VzdChTRUxTLkNISVBTKTtcclxuICAgICAgICB2YXIgJGNoaXAgPSAkdGFyZ2V0LmNsb3Nlc3QoU0VMUy5DSElQKTtcclxuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIHNlbGYuZGVsZXRlQ2hpcCgkY2hpcC5pbmRleCgpLCAkY2hpcHMpO1xyXG4gICAgICAgICRjaGlwcy5maW5kKCdpbnB1dCcpLmZvY3VzKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmNoaXBzID0gZnVuY3Rpb24oJGNoaXBzLCBjaGlwSWQpIHtcclxuICAgICAgdmFyIGh0bWwgPSAnJztcclxuICAgICAgJGNoaXBzLmRhdGEoJ2NoaXBzJykuZm9yRWFjaChmdW5jdGlvbihlbGVtKXtcclxuICAgICAgICBodG1sICs9IHNlbGYucmVuZGVyQ2hpcChlbGVtKTtcclxuICAgICAgfSk7XHJcbiAgICAgIGh0bWwgKz0gJzxpbnB1dCBpZD1cIicgKyBjaGlwSWQgKydcIiBjbGFzcz1cImlucHV0XCIgcGxhY2Vob2xkZXI9XCJcIj4nO1xyXG4gICAgICAkY2hpcHMuaHRtbChodG1sKTtcclxuICAgICAgc2VsZi5zZXRQbGFjZWhvbGRlcigkY2hpcHMpO1xyXG5cclxuICAgICAgLy8gU2V0IGZvciBhdHRyaWJ1dGUgZm9yIGxhYmVsXHJcbiAgICAgIHZhciBsYWJlbCA9ICRjaGlwcy5uZXh0KCdsYWJlbCcpO1xyXG4gICAgICBpZiAobGFiZWwubGVuZ3RoKSB7XHJcbiAgICAgICAgbGFiZWwuYXR0cignZm9yJywgY2hpcElkKTtcclxuXHJcbiAgICAgICAgaWYgKCRjaGlwcy5kYXRhKCdjaGlwcycpLmxlbmd0aCkge1xyXG4gICAgICAgICAgbGFiZWwuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnJlbmRlckNoaXAgPSBmdW5jdGlvbihlbGVtKSB7XHJcbiAgICAgIGlmICghZWxlbS50YWcpIHJldHVybjtcclxuXHJcbiAgICAgIHZhciBodG1sID0gJzxkaXYgY2xhc3M9XCJjaGlwXCI+JyArIGVsZW0udGFnO1xyXG4gICAgICBpZiAoZWxlbS5pbWFnZSkge1xyXG4gICAgICAgIGh0bWwgKz0gJyA8aW1nIHNyYz1cIicgKyBlbGVtLmltYWdlICsgJ1wiPiAnO1xyXG4gICAgICB9XHJcbiAgICAgIGh0bWwgKz0gJzxpIGNsYXNzPVwibWF0ZXJpYWwtaWNvbnMgY2xvc2VcIj5jbG9zZTwvaT4nO1xyXG4gICAgICBodG1sICs9ICc8L2Rpdj4nO1xyXG4gICAgICByZXR1cm4gaHRtbDtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5zZXRQbGFjZWhvbGRlciA9IGZ1bmN0aW9uKCRjaGlwcykge1xyXG4gICAgICBpZiAoJGNoaXBzLmRhdGEoJ2NoaXBzJykubGVuZ3RoICYmIGN1cnJfb3B0aW9ucy5wbGFjZWhvbGRlcikge1xyXG4gICAgICAgICRjaGlwcy5maW5kKCdpbnB1dCcpLnByb3AoJ3BsYWNlaG9sZGVyJywgY3Vycl9vcHRpb25zLnBsYWNlaG9sZGVyKTtcclxuXHJcbiAgICAgIH0gZWxzZSBpZiAoISRjaGlwcy5kYXRhKCdjaGlwcycpLmxlbmd0aCAmJiBjdXJyX29wdGlvbnMuc2Vjb25kYXJ5UGxhY2Vob2xkZXIpIHtcclxuICAgICAgICAkY2hpcHMuZmluZCgnaW5wdXQnKS5wcm9wKCdwbGFjZWhvbGRlcicsIGN1cnJfb3B0aW9ucy5zZWNvbmRhcnlQbGFjZWhvbGRlcik7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5pc1ZhbGlkID0gZnVuY3Rpb24oJGNoaXBzLCBlbGVtKSB7XHJcbiAgICAgIHZhciBjaGlwcyA9ICRjaGlwcy5kYXRhKCdjaGlwcycpO1xyXG4gICAgICB2YXIgZXhpc3RzID0gZmFsc2U7XHJcbiAgICAgIGZvciAodmFyIGk9MDsgaSA8IGNoaXBzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKGNoaXBzW2ldLnRhZyA9PT0gZWxlbS50YWcpIHtcclxuICAgICAgICAgICAgZXhpc3RzID0gdHJ1ZTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gJycgIT09IGVsZW0udGFnICYmICFleGlzdHM7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuYWRkQ2hpcCA9IGZ1bmN0aW9uKGVsZW0sICRjaGlwcykge1xyXG4gICAgICBpZiAoIXNlbGYuaXNWYWxpZCgkY2hpcHMsIGVsZW0pKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIHZhciBjaGlwSHRtbCA9IHNlbGYucmVuZGVyQ2hpcChlbGVtKTtcclxuICAgICAgdmFyIG5ld0RhdGEgPSBbXTtcclxuICAgICAgdmFyIG9sZERhdGEgPSAkY2hpcHMuZGF0YSgnY2hpcHMnKTtcclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvbGREYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgbmV3RGF0YS5wdXNoKG9sZERhdGFbaV0pO1xyXG4gICAgICB9XHJcbiAgICAgIG5ld0RhdGEucHVzaChlbGVtKTtcclxuXHJcbiAgICAgICRjaGlwcy5kYXRhKCdjaGlwcycsIG5ld0RhdGEpO1xyXG4gICAgICAkKGNoaXBIdG1sKS5pbnNlcnRCZWZvcmUoJGNoaXBzLmZpbmQoJ2lucHV0JykpO1xyXG4gICAgICAkY2hpcHMudHJpZ2dlcignY2hpcC5hZGQnLCBlbGVtKTtcclxuICAgICAgc2VsZi5zZXRQbGFjZWhvbGRlcigkY2hpcHMpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmRlbGV0ZUNoaXAgPSBmdW5jdGlvbihjaGlwSW5kZXgsICRjaGlwcykge1xyXG4gICAgICB2YXIgY2hpcCA9ICRjaGlwcy5kYXRhKCdjaGlwcycpW2NoaXBJbmRleF07XHJcbiAgICAgICRjaGlwcy5maW5kKCcuY2hpcCcpLmVxKGNoaXBJbmRleCkucmVtb3ZlKCk7XHJcblxyXG4gICAgICB2YXIgbmV3RGF0YSA9IFtdO1xyXG4gICAgICB2YXIgb2xkRGF0YSA9ICRjaGlwcy5kYXRhKCdjaGlwcycpO1xyXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9sZERhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBpZiAoaSAhPT0gY2hpcEluZGV4KSB7XHJcbiAgICAgICAgICBuZXdEYXRhLnB1c2gob2xkRGF0YVtpXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAkY2hpcHMuZGF0YSgnY2hpcHMnLCBuZXdEYXRhKTtcclxuICAgICAgJGNoaXBzLnRyaWdnZXIoJ2NoaXAuZGVsZXRlJywgY2hpcCk7XHJcbiAgICAgIHNlbGYuc2V0UGxhY2Vob2xkZXIoJGNoaXBzKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5zZWxlY3RDaGlwID0gZnVuY3Rpb24oY2hpcEluZGV4LCAkY2hpcHMpIHtcclxuICAgICAgdmFyICRjaGlwID0gJGNoaXBzLmZpbmQoJy5jaGlwJykuZXEoY2hpcEluZGV4KTtcclxuICAgICAgaWYgKCRjaGlwICYmIGZhbHNlID09PSAkY2hpcC5oYXNDbGFzcygnc2VsZWN0ZWQnKSkge1xyXG4gICAgICAgICRjaGlwLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xyXG4gICAgICAgICRjaGlwcy50cmlnZ2VyKCdjaGlwLnNlbGVjdCcsICRjaGlwcy5kYXRhKCdjaGlwcycpW2NoaXBJbmRleF0pO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuZ2V0Q2hpcHNFbGVtZW50ID0gZnVuY3Rpb24oaW5kZXgsICRjaGlwcykge1xyXG4gICAgICByZXR1cm4gJGNoaXBzLmVxKGluZGV4KTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gaW5pdFxyXG4gICAgdGhpcy5pbml0KCk7XHJcblxyXG4gICAgaWYgKCFjaGlwc0hhbmRsZUV2ZW50cykge1xyXG4gICAgICB0aGlzLmhhbmRsZUV2ZW50cygpO1xyXG4gICAgICBjaGlwc0hhbmRsZUV2ZW50cyA9IHRydWU7XHJcbiAgICB9XHJcbiAgfTtcclxufSggalF1ZXJ5ICkpOzsoZnVuY3Rpb24gKCQpIHtcclxuICAkLmZuLnB1c2hwaW4gPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgLy8gRGVmYXVsdHNcclxuICAgIHZhciBkZWZhdWx0cyA9IHtcclxuICAgICAgdG9wOiAwLFxyXG4gICAgICBib3R0b206IEluZmluaXR5LFxyXG4gICAgICBvZmZzZXQ6IDBcclxuICAgIH07XHJcblxyXG4gICAgLy8gUmVtb3ZlIHB1c2hwaW4gZXZlbnQgYW5kIGNsYXNzZXNcclxuICAgIGlmIChvcHRpb25zID09PSBcInJlbW92ZVwiKSB7XHJcbiAgICAgIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKGlkID0gJCh0aGlzKS5kYXRhKCdwdXNocGluLWlkJykpIHtcclxuICAgICAgICAgICQod2luZG93KS5vZmYoJ3Njcm9sbC4nICsgaWQpO1xyXG4gICAgICAgICAgJCh0aGlzKS5yZW1vdmVEYXRhKCdwdXNocGluLWlkJykucmVtb3ZlQ2xhc3MoJ3Bpbi10b3AgcGlubmVkIHBpbi1ib3R0b20nKS5yZW1vdmVBdHRyKCdzdHlsZScpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBvcHRpb25zID0gJC5leHRlbmQoZGVmYXVsdHMsIG9wdGlvbnMpO1xyXG5cclxuXHJcbiAgICAkaW5kZXggPSAwO1xyXG4gICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgdmFyICR1bmlxdWVJZCA9IE1hdGVyaWFsaXplLmd1aWQoKSxcclxuICAgICAgICAgICR0aGlzID0gJCh0aGlzKSxcclxuICAgICAgICAgICRvcmlnaW5hbF9vZmZzZXQgPSAkKHRoaXMpLm9mZnNldCgpLnRvcDtcclxuXHJcbiAgICAgIGZ1bmN0aW9uIHJlbW92ZVBpbkNsYXNzZXMob2JqZWN0KSB7XHJcbiAgICAgICAgb2JqZWN0LnJlbW92ZUNsYXNzKCdwaW4tdG9wJyk7XHJcbiAgICAgICAgb2JqZWN0LnJlbW92ZUNsYXNzKCdwaW5uZWQnKTtcclxuICAgICAgICBvYmplY3QucmVtb3ZlQ2xhc3MoJ3Bpbi1ib3R0b20nKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gdXBkYXRlRWxlbWVudHMob2JqZWN0cywgc2Nyb2xsZWQpIHtcclxuICAgICAgICBvYmplY3RzLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgLy8gQWRkIHBvc2l0aW9uIGZpeGVkIChiZWNhdXNlIGl0cyBiZXR3ZWVuIHRvcCBhbmQgYm90dG9tKVxyXG4gICAgICAgICAgaWYgKG9wdGlvbnMudG9wIDw9IHNjcm9sbGVkICYmIG9wdGlvbnMuYm90dG9tID49IHNjcm9sbGVkICYmICEkKHRoaXMpLmhhc0NsYXNzKCdwaW5uZWQnKSkge1xyXG4gICAgICAgICAgICByZW1vdmVQaW5DbGFzc2VzKCQodGhpcykpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLmNzcygndG9wJywgb3B0aW9ucy5vZmZzZXQpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdwaW5uZWQnKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAvLyBBZGQgcGluLXRvcCAod2hlbiBzY3JvbGxlZCBwb3NpdGlvbiBpcyBhYm92ZSB0b3ApXHJcbiAgICAgICAgICBpZiAoc2Nyb2xsZWQgPCBvcHRpb25zLnRvcCAmJiAhJCh0aGlzKS5oYXNDbGFzcygncGluLXRvcCcpKSB7XHJcbiAgICAgICAgICAgIHJlbW92ZVBpbkNsYXNzZXMoJCh0aGlzKSk7XHJcbiAgICAgICAgICAgICQodGhpcykuY3NzKCd0b3AnLCAwKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygncGluLXRvcCcpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIC8vIEFkZCBwaW4tYm90dG9tICh3aGVuIHNjcm9sbGVkIHBvc2l0aW9uIGlzIGJlbG93IGJvdHRvbSlcclxuICAgICAgICAgIGlmIChzY3JvbGxlZCA+IG9wdGlvbnMuYm90dG9tICYmICEkKHRoaXMpLmhhc0NsYXNzKCdwaW4tYm90dG9tJykpIHtcclxuICAgICAgICAgICAgcmVtb3ZlUGluQ2xhc3NlcygkKHRoaXMpKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygncGluLWJvdHRvbScpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLmNzcygndG9wJywgb3B0aW9ucy5ib3R0b20gLSAkb3JpZ2luYWxfb2Zmc2V0KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgJCh0aGlzKS5kYXRhKCdwdXNocGluLWlkJywgJHVuaXF1ZUlkKTtcclxuICAgICAgdXBkYXRlRWxlbWVudHMoJHRoaXMsICQod2luZG93KS5zY3JvbGxUb3AoKSk7XHJcbiAgICAgICQod2luZG93KS5vbignc2Nyb2xsLicgKyAkdW5pcXVlSWQsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgJHNjcm9sbGVkID0gJCh3aW5kb3cpLnNjcm9sbFRvcCgpICsgb3B0aW9ucy5vZmZzZXQ7XHJcbiAgICAgICAgdXBkYXRlRWxlbWVudHMoJHRoaXMsICRzY3JvbGxlZCk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgIH0pO1xyXG5cclxuICB9O1xyXG59KCBqUXVlcnkgKSk7OyhmdW5jdGlvbiAoJCkge1xyXG4gICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xyXG5cclxuICAgIC8vIGpRdWVyeSByZXZlcnNlXHJcbiAgICAkLmZuLnJldmVyc2UgPSBbXS5yZXZlcnNlO1xyXG5cclxuICAgIC8vIEhvdmVyIGJlaGF2aW91cjogbWFrZSBzdXJlIHRoaXMgZG9lc24ndCB3b3JrIG9uIC5jbGljay10by10b2dnbGUgRkFCcyFcclxuICAgICQoZG9jdW1lbnQpLm9uKCdtb3VzZWVudGVyLmZpeGVkQWN0aW9uQnRuJywgJy5maXhlZC1hY3Rpb24tYnRuOm5vdCguY2xpY2stdG8tdG9nZ2xlKTpub3QoLnRvb2xiYXIpJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xyXG4gICAgICBvcGVuRkFCTWVudSgkdGhpcyk7XHJcbiAgICB9KTtcclxuICAgICQoZG9jdW1lbnQpLm9uKCdtb3VzZWxlYXZlLmZpeGVkQWN0aW9uQnRuJywgJy5maXhlZC1hY3Rpb24tYnRuOm5vdCguY2xpY2stdG8tdG9nZ2xlKTpub3QoLnRvb2xiYXIpJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xyXG4gICAgICBjbG9zZUZBQk1lbnUoJHRoaXMpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gVG9nZ2xlLW9uLWNsaWNrIGJlaGF2aW91ci5cclxuICAgICQoZG9jdW1lbnQpLm9uKCdjbGljay5mYWJDbGlja1RvZ2dsZScsICcuZml4ZWQtYWN0aW9uLWJ0bi5jbGljay10by10b2dnbGUgPiBhJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xyXG4gICAgICB2YXIgJG1lbnUgPSAkdGhpcy5wYXJlbnQoKTtcclxuICAgICAgaWYgKCRtZW51Lmhhc0NsYXNzKCdhY3RpdmUnKSkge1xyXG4gICAgICAgIGNsb3NlRkFCTWVudSgkbWVudSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgb3BlbkZBQk1lbnUoJG1lbnUpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBUb29sYmFyIHRyYW5zaXRpb24gYmVoYXZpb3VyLlxyXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrLmZhYlRvb2xiYXInLCAnLmZpeGVkLWFjdGlvbi1idG4udG9vbGJhciA+IGEnLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XHJcbiAgICAgIHZhciAkbWVudSA9ICR0aGlzLnBhcmVudCgpO1xyXG4gICAgICBGQUJ0b1Rvb2xiYXIoJG1lbnUpO1xyXG4gICAgfSk7XHJcblxyXG4gIH0pO1xyXG5cclxuICAkLmZuLmV4dGVuZCh7XHJcbiAgICBvcGVuRkFCOiBmdW5jdGlvbigpIHtcclxuICAgICAgb3BlbkZBQk1lbnUoJCh0aGlzKSk7XHJcbiAgICB9LFxyXG4gICAgY2xvc2VGQUI6IGZ1bmN0aW9uKCkge1xyXG4gICAgICBjbG9zZUZBQk1lbnUoJCh0aGlzKSk7XHJcbiAgICB9LFxyXG4gICAgb3BlblRvb2xiYXI6IGZ1bmN0aW9uKCkge1xyXG4gICAgICBGQUJ0b1Rvb2xiYXIoJCh0aGlzKSk7XHJcbiAgICB9LFxyXG4gICAgY2xvc2VUb29sYmFyOiBmdW5jdGlvbigpIHtcclxuICAgICAgdG9vbGJhclRvRkFCKCQodGhpcykpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuXHJcbiAgdmFyIG9wZW5GQUJNZW51ID0gZnVuY3Rpb24gKGJ0bikge1xyXG4gICAgdmFyICR0aGlzID0gYnRuO1xyXG4gICAgaWYgKCR0aGlzLmhhc0NsYXNzKCdhY3RpdmUnKSA9PT0gZmFsc2UpIHtcclxuXHJcbiAgICAgIC8vIEdldCBkaXJlY3Rpb24gb3B0aW9uXHJcbiAgICAgIHZhciBob3Jpem9udGFsID0gJHRoaXMuaGFzQ2xhc3MoJ2hvcml6b250YWwnKTtcclxuICAgICAgdmFyIG9mZnNldFksIG9mZnNldFg7XHJcblxyXG4gICAgICBpZiAoaG9yaXpvbnRhbCA9PT0gdHJ1ZSkge1xyXG4gICAgICAgIG9mZnNldFggPSA0MDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBvZmZzZXRZID0gNDA7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgICR0aGlzLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgJHRoaXMuZmluZCgndWwgLmJ0bi1mbG9hdGluZycpLnZlbG9jaXR5KFxyXG4gICAgICAgIHsgc2NhbGVZOiBcIi40XCIsIHNjYWxlWDogXCIuNFwiLCB0cmFuc2xhdGVZOiBvZmZzZXRZICsgJ3B4JywgdHJhbnNsYXRlWDogb2Zmc2V0WCArICdweCd9LFxyXG4gICAgICAgIHsgZHVyYXRpb246IDAgfSk7XHJcblxyXG4gICAgICB2YXIgdGltZSA9IDA7XHJcbiAgICAgICR0aGlzLmZpbmQoJ3VsIC5idG4tZmxvYXRpbmcnKS5yZXZlcnNlKCkuZWFjaCggZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQodGhpcykudmVsb2NpdHkoXHJcbiAgICAgICAgICB7IG9wYWNpdHk6IFwiMVwiLCBzY2FsZVg6IFwiMVwiLCBzY2FsZVk6IFwiMVwiLCB0cmFuc2xhdGVZOiBcIjBcIiwgdHJhbnNsYXRlWDogJzAnfSxcclxuICAgICAgICAgIHsgZHVyYXRpb246IDgwLCBkZWxheTogdGltZSB9KTtcclxuICAgICAgICB0aW1lICs9IDQwO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICB2YXIgY2xvc2VGQUJNZW51ID0gZnVuY3Rpb24gKGJ0bikge1xyXG4gICAgdmFyICR0aGlzID0gYnRuO1xyXG4gICAgLy8gR2V0IGRpcmVjdGlvbiBvcHRpb25cclxuICAgIHZhciBob3Jpem9udGFsID0gJHRoaXMuaGFzQ2xhc3MoJ2hvcml6b250YWwnKTtcclxuICAgIHZhciBvZmZzZXRZLCBvZmZzZXRYO1xyXG5cclxuICAgIGlmIChob3Jpem9udGFsID09PSB0cnVlKSB7XHJcbiAgICAgIG9mZnNldFggPSA0MDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIG9mZnNldFkgPSA0MDtcclxuICAgIH1cclxuXHJcbiAgICAkdGhpcy5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICB2YXIgdGltZSA9IDA7XHJcbiAgICAkdGhpcy5maW5kKCd1bCAuYnRuLWZsb2F0aW5nJykudmVsb2NpdHkoXCJzdG9wXCIsIHRydWUpO1xyXG4gICAgJHRoaXMuZmluZCgndWwgLmJ0bi1mbG9hdGluZycpLnZlbG9jaXR5KFxyXG4gICAgICB7IG9wYWNpdHk6IFwiMFwiLCBzY2FsZVg6IFwiLjRcIiwgc2NhbGVZOiBcIi40XCIsIHRyYW5zbGF0ZVk6IG9mZnNldFkgKyAncHgnLCB0cmFuc2xhdGVYOiBvZmZzZXRYICsgJ3B4J30sXHJcbiAgICAgIHsgZHVyYXRpb246IDgwIH1cclxuICAgICk7XHJcbiAgfTtcclxuXHJcblxyXG4gIC8qKlxyXG4gICAqIFRyYW5zZm9ybSBGQUIgaW50byB0b29sYmFyXHJcbiAgICogQHBhcmFtICB7T2JqZWN0fSAgb2JqZWN0IGpRdWVyeSBvYmplY3RcclxuICAgKi9cclxuICB2YXIgRkFCdG9Ub29sYmFyID0gZnVuY3Rpb24oYnRuKSB7XHJcbiAgICBpZiAoYnRuLmF0dHIoJ2RhdGEtb3BlbicpID09PSBcInRydWVcIikge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIG9mZnNldFgsIG9mZnNldFksIHNjYWxlRmFjdG9yO1xyXG4gICAgdmFyIHdpbmRvd1dpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XHJcbiAgICB2YXIgd2luZG93SGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xyXG4gICAgdmFyIGJ0blJlY3QgPSBidG5bMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICB2YXIgYW5jaG9yID0gYnRuLmZpbmQoJz4gYScpLmZpcnN0KCk7XHJcbiAgICB2YXIgbWVudSA9IGJ0bi5maW5kKCc+IHVsJykuZmlyc3QoKTtcclxuICAgIHZhciBiYWNrZHJvcCA9ICQoJzxkaXYgY2xhc3M9XCJmYWItYmFja2Ryb3BcIj48L2Rpdj4nKTtcclxuICAgIHZhciBmYWJDb2xvciA9IGFuY2hvci5jc3MoJ2JhY2tncm91bmQtY29sb3InKTtcclxuICAgIGFuY2hvci5hcHBlbmQoYmFja2Ryb3ApO1xyXG5cclxuICAgIG9mZnNldFggPSBidG5SZWN0LmxlZnQgLSAod2luZG93V2lkdGggLyAyKSArIChidG5SZWN0LndpZHRoIC8gMik7XHJcbiAgICBvZmZzZXRZID0gd2luZG93SGVpZ2h0IC0gYnRuUmVjdC5ib3R0b207XHJcbiAgICBzY2FsZUZhY3RvciA9IHdpbmRvd1dpZHRoIC8gYmFja2Ryb3Aud2lkdGgoKTtcclxuICAgIGJ0bi5hdHRyKCdkYXRhLW9yaWdpbi1ib3R0b20nLCBidG5SZWN0LmJvdHRvbSk7XHJcbiAgICBidG4uYXR0cignZGF0YS1vcmlnaW4tbGVmdCcsIGJ0blJlY3QubGVmdCk7XHJcbiAgICBidG4uYXR0cignZGF0YS1vcmlnaW4td2lkdGgnLCBidG5SZWN0LndpZHRoKTtcclxuXHJcbiAgICAvLyBTZXQgaW5pdGlhbCBzdGF0ZVxyXG4gICAgYnRuLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgIGJ0bi5hdHRyKCdkYXRhLW9wZW4nLCB0cnVlKTtcclxuICAgIGJ0bi5jc3Moe1xyXG4gICAgICAndGV4dC1hbGlnbic6ICdjZW50ZXInLFxyXG4gICAgICB3aWR0aDogJzEwMCUnLFxyXG4gICAgICBib3R0b206IDAsXHJcbiAgICAgIGxlZnQ6IDAsXHJcbiAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVgoJyArIG9mZnNldFggKyAncHgpJyxcclxuICAgICAgdHJhbnNpdGlvbjogJ25vbmUnXHJcbiAgICB9KTtcclxuICAgIGFuY2hvci5jc3Moe1xyXG4gICAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGVZKCcgKyAtb2Zmc2V0WSArICdweCknLFxyXG4gICAgICB0cmFuc2l0aW9uOiAnbm9uZSdcclxuICAgIH0pO1xyXG4gICAgYmFja2Ryb3AuY3NzKHtcclxuICAgICAgJ2JhY2tncm91bmQtY29sb3InOiBmYWJDb2xvclxyXG4gICAgfSk7XHJcblxyXG5cclxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgIGJ0bi5jc3Moe1xyXG4gICAgICAgIHRyYW5zZm9ybTogJycsXHJcbiAgICAgICAgdHJhbnNpdGlvbjogJ3RyYW5zZm9ybSAuMnMgY3ViaWMtYmV6aWVyKDAuNTUwLCAwLjA4NSwgMC42ODAsIDAuNTMwKSwgYmFja2dyb3VuZC1jb2xvciAwcyBsaW5lYXIgLjJzJ1xyXG4gICAgICB9KTtcclxuICAgICAgYW5jaG9yLmNzcyh7XHJcbiAgICAgICAgb3ZlcmZsb3c6ICd2aXNpYmxlJyxcclxuICAgICAgICB0cmFuc2Zvcm06ICcnLFxyXG4gICAgICAgIHRyYW5zaXRpb246ICd0cmFuc2Zvcm0gLjJzJ1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgYnRuLmNzcyh7XHJcbiAgICAgICAgICBvdmVyZmxvdzogJ2hpZGRlbicsXHJcbiAgICAgICAgICAnYmFja2dyb3VuZC1jb2xvcic6IGZhYkNvbG9yXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYmFja2Ryb3AuY3NzKHtcclxuICAgICAgICAgIHRyYW5zZm9ybTogJ3NjYWxlKCcgKyBzY2FsZUZhY3RvciArICcpJyxcclxuICAgICAgICAgIHRyYW5zaXRpb246ICd0cmFuc2Zvcm0gLjJzIGN1YmljLWJlemllcigwLjU1MCwgMC4wNTUsIDAuNjc1LCAwLjE5MCknXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbWVudS5maW5kKCc+IGxpID4gYScpLmNzcyh7XHJcbiAgICAgICAgICBvcGFjaXR5OiAxXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFNjcm9sbCB0byBjbG9zZS5cclxuICAgICAgICAkKHdpbmRvdykub24oJ3Njcm9sbC5mYWJUb29sYmFyQ2xvc2UnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHRvb2xiYXJUb0ZBQihidG4pO1xyXG4gICAgICAgICAgJCh3aW5kb3cpLm9mZignc2Nyb2xsLmZhYlRvb2xiYXJDbG9zZScpO1xyXG4gICAgICAgICAgJChkb2N1bWVudCkub2ZmKCdjbGljay5mYWJUb29sYmFyQ2xvc2UnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrLmZhYlRvb2xiYXJDbG9zZScsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgIGlmICghJChlLnRhcmdldCkuY2xvc2VzdChtZW51KS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdG9vbGJhclRvRkFCKGJ0bik7XHJcbiAgICAgICAgICAgICQod2luZG93KS5vZmYoJ3Njcm9sbC5mYWJUb29sYmFyQ2xvc2UnKTtcclxuICAgICAgICAgICAgJChkb2N1bWVudCkub2ZmKCdjbGljay5mYWJUb29sYmFyQ2xvc2UnKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfSwgMTAwKTtcclxuICAgIH0sIDApO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIFRyYW5zZm9ybSB0b29sYmFyIGJhY2sgaW50byBGQUJcclxuICAgKiBAcGFyYW0gIHtPYmplY3R9ICBvYmplY3QgalF1ZXJ5IG9iamVjdFxyXG4gICAqL1xyXG4gIHZhciB0b29sYmFyVG9GQUIgPSBmdW5jdGlvbihidG4pIHtcclxuICAgIGlmIChidG4uYXR0cignZGF0YS1vcGVuJykgIT09IFwidHJ1ZVwiKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgb2Zmc2V0WCwgb2Zmc2V0WSwgc2NhbGVGYWN0b3I7XHJcbiAgICB2YXIgd2luZG93V2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcclxuICAgIHZhciB3aW5kb3dIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcbiAgICB2YXIgYnRuV2lkdGggPSBidG4uYXR0cignZGF0YS1vcmlnaW4td2lkdGgnKTtcclxuICAgIHZhciBidG5Cb3R0b20gPSBidG4uYXR0cignZGF0YS1vcmlnaW4tYm90dG9tJyk7XHJcbiAgICB2YXIgYnRuTGVmdCA9IGJ0bi5hdHRyKCdkYXRhLW9yaWdpbi1sZWZ0Jyk7XHJcbiAgICB2YXIgYW5jaG9yID0gYnRuLmZpbmQoJz4gLmJ0bi1mbG9hdGluZycpLmZpcnN0KCk7XHJcbiAgICB2YXIgbWVudSA9IGJ0bi5maW5kKCc+IHVsJykuZmlyc3QoKTtcclxuICAgIHZhciBiYWNrZHJvcCA9IGJ0bi5maW5kKCcuZmFiLWJhY2tkcm9wJyk7XHJcbiAgICB2YXIgZmFiQ29sb3IgPSBhbmNob3IuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJyk7XHJcblxyXG4gICAgb2Zmc2V0WCA9IGJ0bkxlZnQgLSAod2luZG93V2lkdGggLyAyKSArIChidG5XaWR0aCAvIDIpO1xyXG4gICAgb2Zmc2V0WSA9IHdpbmRvd0hlaWdodCAtIGJ0bkJvdHRvbTtcclxuICAgIHNjYWxlRmFjdG9yID0gd2luZG93V2lkdGggLyBiYWNrZHJvcC53aWR0aCgpO1xyXG5cclxuXHJcbiAgICAvLyBIaWRlIGJhY2tkcm9wXHJcbiAgICBidG4ucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgYnRuLmF0dHIoJ2RhdGEtb3BlbicsIGZhbHNlKTtcclxuICAgIGJ0bi5jc3Moe1xyXG4gICAgICAnYmFja2dyb3VuZC1jb2xvcic6ICd0cmFuc3BhcmVudCcsXHJcbiAgICAgIHRyYW5zaXRpb246ICdub25lJ1xyXG4gICAgfSk7XHJcbiAgICBhbmNob3IuY3NzKHtcclxuICAgICAgdHJhbnNpdGlvbjogJ25vbmUnXHJcbiAgICB9KTtcclxuICAgIGJhY2tkcm9wLmNzcyh7XHJcbiAgICAgIHRyYW5zZm9ybTogJ3NjYWxlKDApJyxcclxuICAgICAgJ2JhY2tncm91bmQtY29sb3InOiBmYWJDb2xvclxyXG4gICAgfSk7XHJcbiAgICBtZW51LmZpbmQoJz4gbGkgPiBhJykuY3NzKHtcclxuICAgICAgb3BhY2l0eTogJydcclxuICAgIH0pO1xyXG5cclxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgIGJhY2tkcm9wLnJlbW92ZSgpO1xyXG5cclxuICAgICAgLy8gU2V0IGluaXRpYWwgc3RhdGUuXHJcbiAgICAgIGJ0bi5jc3Moe1xyXG4gICAgICAgICd0ZXh0LWFsaWduJzogJycsXHJcbiAgICAgICAgd2lkdGg6ICcnLFxyXG4gICAgICAgIGJvdHRvbTogJycsXHJcbiAgICAgICAgbGVmdDogJycsXHJcbiAgICAgICAgb3ZlcmZsb3c6ICcnLFxyXG4gICAgICAgICdiYWNrZ3JvdW5kLWNvbG9yJzogJycsXHJcbiAgICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlM2QoJyArIC1vZmZzZXRYICsgJ3B4LDAsMCknXHJcbiAgICAgIH0pO1xyXG4gICAgICBhbmNob3IuY3NzKHtcclxuICAgICAgICBvdmVyZmxvdzogJycsXHJcbiAgICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlM2QoMCwnICsgb2Zmc2V0WSArICdweCwwKSdcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGJ0bi5jc3Moe1xyXG4gICAgICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlM2QoMCwwLDApJyxcclxuICAgICAgICAgIHRyYW5zaXRpb246ICd0cmFuc2Zvcm0gLjJzJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGFuY2hvci5jc3Moe1xyXG4gICAgICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlM2QoMCwwLDApJyxcclxuICAgICAgICAgIHRyYW5zaXRpb246ICd0cmFuc2Zvcm0gLjJzIGN1YmljLWJlemllcigwLjU1MCwgMC4wNTUsIDAuNjc1LCAwLjE5MCknXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0sIDIwKTtcclxuICAgIH0sIDIwMCk7XHJcbiAgfTtcclxuXHJcblxyXG59KCBqUXVlcnkgKSk7XHJcbjsoZnVuY3Rpb24gKCQpIHtcclxuICAvLyBJbWFnZSB0cmFuc2l0aW9uIGZ1bmN0aW9uXHJcbiAgTWF0ZXJpYWxpemUuZmFkZUluSW1hZ2UgPSAgZnVuY3Rpb24oc2VsZWN0b3JPckVsKSB7XHJcbiAgICB2YXIgZWxlbWVudDtcclxuICAgIGlmICh0eXBlb2Yoc2VsZWN0b3JPckVsKSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgZWxlbWVudCA9ICQoc2VsZWN0b3JPckVsKTtcclxuICAgIH0gZWxzZSBpZiAodHlwZW9mKHNlbGVjdG9yT3JFbCkgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgIGVsZW1lbnQgPSBzZWxlY3Rvck9yRWw7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBlbGVtZW50LmNzcyh7b3BhY2l0eTogMH0pO1xyXG4gICAgJChlbGVtZW50KS52ZWxvY2l0eSh7b3BhY2l0eTogMX0sIHtcclxuICAgICAgICBkdXJhdGlvbjogNjUwLFxyXG4gICAgICAgIHF1ZXVlOiBmYWxzZSxcclxuICAgICAgICBlYXNpbmc6ICdlYXNlT3V0U2luZSdcclxuICAgICAgfSk7XHJcbiAgICAkKGVsZW1lbnQpLnZlbG9jaXR5KHtvcGFjaXR5OiAxfSwge1xyXG4gICAgICAgICAgZHVyYXRpb246IDEzMDAsXHJcbiAgICAgICAgICBxdWV1ZTogZmFsc2UsXHJcbiAgICAgICAgICBlYXNpbmc6ICdzd2luZycsXHJcbiAgICAgICAgICBzdGVwOiBmdW5jdGlvbihub3csIGZ4KSB7XHJcbiAgICAgICAgICAgICAgZnguc3RhcnQgPSAxMDA7XHJcbiAgICAgICAgICAgICAgdmFyIGdyYXlzY2FsZV9zZXR0aW5nID0gbm93LzEwMDtcclxuICAgICAgICAgICAgICB2YXIgYnJpZ2h0bmVzc19zZXR0aW5nID0gMTUwIC0gKDEwMCAtIG5vdykvMS43NTtcclxuXHJcbiAgICAgICAgICAgICAgaWYgKGJyaWdodG5lc3Nfc2V0dGluZyA8IDEwMCkge1xyXG4gICAgICAgICAgICAgICAgYnJpZ2h0bmVzc19zZXR0aW5nID0gMTAwO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBpZiAobm93ID49IDApIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICBcIi13ZWJraXQtZmlsdGVyXCI6IFwiZ3JheXNjYWxlKFwiK2dyYXlzY2FsZV9zZXR0aW5nK1wiKVwiICsgXCJicmlnaHRuZXNzKFwiK2JyaWdodG5lc3Nfc2V0dGluZytcIiUpXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJmaWx0ZXJcIjogXCJncmF5c2NhbGUoXCIrZ3JheXNjYWxlX3NldHRpbmcrXCIpXCIgKyBcImJyaWdodG5lc3MoXCIrYnJpZ2h0bmVzc19zZXR0aW5nK1wiJSlcIlxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICB9O1xyXG5cclxuICAvLyBIb3Jpem9udGFsIHN0YWdnZXJlZCBsaXN0XHJcbiAgTWF0ZXJpYWxpemUuc2hvd1N0YWdnZXJlZExpc3QgPSBmdW5jdGlvbihzZWxlY3Rvck9yRWwpIHtcclxuICAgIHZhciBlbGVtZW50O1xyXG4gICAgaWYgKHR5cGVvZihzZWxlY3Rvck9yRWwpID09PSAnc3RyaW5nJykge1xyXG4gICAgICBlbGVtZW50ID0gJChzZWxlY3Rvck9yRWwpO1xyXG4gICAgfSBlbHNlIGlmICh0eXBlb2Yoc2VsZWN0b3JPckVsKSA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgZWxlbWVudCA9IHNlbGVjdG9yT3JFbDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHZhciB0aW1lID0gMDtcclxuICAgIGVsZW1lbnQuZmluZCgnbGknKS52ZWxvY2l0eShcclxuICAgICAgICB7IHRyYW5zbGF0ZVg6IFwiLTEwMHB4XCJ9LFxyXG4gICAgICAgIHsgZHVyYXRpb246IDAgfSk7XHJcblxyXG4gICAgZWxlbWVudC5maW5kKCdsaScpLmVhY2goZnVuY3Rpb24oKSB7XHJcbiAgICAgICQodGhpcykudmVsb2NpdHkoXHJcbiAgICAgICAgeyBvcGFjaXR5OiBcIjFcIiwgdHJhbnNsYXRlWDogXCIwXCJ9LFxyXG4gICAgICAgIHsgZHVyYXRpb246IDgwMCwgZGVsYXk6IHRpbWUsIGVhc2luZzogWzYwLCAxMF0gfSk7XHJcbiAgICAgIHRpbWUgKz0gMTIwO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcblxyXG4gICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xyXG4gICAgLy8gSGFyZGNvZGVkIC5zdGFnZ2VyZWQtbGlzdCBzY3JvbGxGaXJlXHJcbiAgICAvLyB2YXIgc3RhZ2dlcmVkTGlzdE9wdGlvbnMgPSBbXTtcclxuICAgIC8vICQoJ3VsLnN0YWdnZXJlZC1saXN0JykuZWFjaChmdW5jdGlvbiAoaSkge1xyXG5cclxuICAgIC8vICAgdmFyIGxhYmVsID0gJ3Njcm9sbEZpcmUtJyArIGk7XHJcbiAgICAvLyAgICQodGhpcykuYWRkQ2xhc3MobGFiZWwpO1xyXG4gICAgLy8gICBzdGFnZ2VyZWRMaXN0T3B0aW9ucy5wdXNoKFxyXG4gICAgLy8gICAgIHtzZWxlY3RvcjogJ3VsLnN0YWdnZXJlZC1saXN0LicgKyBsYWJlbCxcclxuICAgIC8vICAgICAgb2Zmc2V0OiAyMDAsXHJcbiAgICAvLyAgICAgIGNhbGxiYWNrOiAnc2hvd1N0YWdnZXJlZExpc3QoXCJ1bC5zdGFnZ2VyZWQtbGlzdC4nICsgbGFiZWwgKyAnXCIpJ30pO1xyXG4gICAgLy8gfSk7XHJcbiAgICAvLyBzY3JvbGxGaXJlKHN0YWdnZXJlZExpc3RPcHRpb25zKTtcclxuXHJcbiAgICAvLyBIYW1tZXJKUywgU3dpcGUgbmF2aWdhdGlvblxyXG5cclxuICAgIC8vIFRvdWNoIEV2ZW50XHJcbiAgICB2YXIgc3dpcGVMZWZ0ID0gZmFsc2U7XHJcbiAgICB2YXIgc3dpcGVSaWdodCA9IGZhbHNlO1xyXG5cclxuXHJcbiAgICAvLyBEaXNtaXNzaWJsZSBDb2xsZWN0aW9uc1xyXG4gICAgJCgnLmRpc21pc3NhYmxlJykuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgJCh0aGlzKS5oYW1tZXIoe1xyXG4gICAgICAgIHByZXZlbnRfZGVmYXVsdDogZmFsc2VcclxuICAgICAgfSkuYmluZCgncGFuJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIGlmIChlLmdlc3R1cmUucG9pbnRlclR5cGUgPT09IFwidG91Y2hcIikge1xyXG4gICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcclxuICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSBlLmdlc3R1cmUuZGlyZWN0aW9uO1xyXG4gICAgICAgICAgdmFyIHggPSBlLmdlc3R1cmUuZGVsdGFYO1xyXG4gICAgICAgICAgdmFyIHZlbG9jaXR5WCA9IGUuZ2VzdHVyZS52ZWxvY2l0eVg7XHJcblxyXG4gICAgICAgICAgJHRoaXMudmVsb2NpdHkoeyB0cmFuc2xhdGVYOiB4XHJcbiAgICAgICAgICAgICAgfSwge2R1cmF0aW9uOiA1MCwgcXVldWU6IGZhbHNlLCBlYXNpbmc6ICdlYXNlT3V0UXVhZCd9KTtcclxuXHJcbiAgICAgICAgICAvLyBTd2lwZSBMZWZ0XHJcbiAgICAgICAgICBpZiAoZGlyZWN0aW9uID09PSA0ICYmICh4ID4gKCR0aGlzLmlubmVyV2lkdGgoKSAvIDIpIHx8IHZlbG9jaXR5WCA8IC0wLjc1KSkge1xyXG4gICAgICAgICAgICBzd2lwZUxlZnQgPSB0cnVlO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIC8vIFN3aXBlIFJpZ2h0XHJcbiAgICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAyICYmICh4IDwgKC0xICogJHRoaXMuaW5uZXJXaWR0aCgpIC8gMikgfHwgdmVsb2NpdHlYID4gMC43NSkpIHtcclxuICAgICAgICAgICAgc3dpcGVSaWdodCA9IHRydWU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9KS5iaW5kKCdwYW5lbmQnLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgLy8gUmVzZXQgaWYgY29sbGVjdGlvbiBpcyBtb3ZlZCBiYWNrIGludG8gb3JpZ2luYWwgcG9zaXRpb25cclxuICAgICAgICBpZiAoTWF0aC5hYnMoZS5nZXN0dXJlLmRlbHRhWCkgPCAoJCh0aGlzKS5pbm5lcldpZHRoKCkgLyAyKSkge1xyXG4gICAgICAgICAgc3dpcGVSaWdodCA9IGZhbHNlO1xyXG4gICAgICAgICAgc3dpcGVMZWZ0ID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZS5nZXN0dXJlLnBvaW50ZXJUeXBlID09PSBcInRvdWNoXCIpIHtcclxuICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XHJcbiAgICAgICAgICBpZiAoc3dpcGVMZWZ0IHx8IHN3aXBlUmlnaHQpIHtcclxuICAgICAgICAgICAgdmFyIGZ1bGxXaWR0aDtcclxuICAgICAgICAgICAgaWYgKHN3aXBlTGVmdCkgeyBmdWxsV2lkdGggPSAkdGhpcy5pbm5lcldpZHRoKCk7IH1cclxuICAgICAgICAgICAgZWxzZSB7IGZ1bGxXaWR0aCA9IC0xICogJHRoaXMuaW5uZXJXaWR0aCgpOyB9XHJcblxyXG4gICAgICAgICAgICAkdGhpcy52ZWxvY2l0eSh7IHRyYW5zbGF0ZVg6IGZ1bGxXaWR0aCxcclxuICAgICAgICAgICAgICB9LCB7ZHVyYXRpb246IDEwMCwgcXVldWU6IGZhbHNlLCBlYXNpbmc6ICdlYXNlT3V0UXVhZCcsIGNvbXBsZXRlOlxyXG4gICAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgJHRoaXMuY3NzKCdib3JkZXInLCAnbm9uZScpO1xyXG4gICAgICAgICAgICAgICAgJHRoaXMudmVsb2NpdHkoeyBoZWlnaHQ6IDAsIHBhZGRpbmc6IDAsXHJcbiAgICAgICAgICAgICAgICAgIH0sIHtkdXJhdGlvbjogMjAwLCBxdWV1ZTogZmFsc2UsIGVhc2luZzogJ2Vhc2VPdXRRdWFkJywgY29tcGxldGU6XHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7ICR0aGlzLnJlbW92ZSgpOyB9XHJcbiAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgJHRoaXMudmVsb2NpdHkoeyB0cmFuc2xhdGVYOiAwLFxyXG4gICAgICAgICAgICAgIH0sIHtkdXJhdGlvbjogMTAwLCBxdWV1ZTogZmFsc2UsIGVhc2luZzogJ2Vhc2VPdXRRdWFkJ30pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgc3dpcGVMZWZ0ID0gZmFsc2U7XHJcbiAgICAgICAgICBzd2lwZVJpZ2h0ID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgLy8gdGltZSA9IDBcclxuICAgIC8vIC8vIFZlcnRpY2FsIFN0YWdnZXJlZCBsaXN0XHJcbiAgICAvLyAkKCd1bC5zdGFnZ2VyZWQtbGlzdC52ZXJ0aWNhbCBsaScpLnZlbG9jaXR5KFxyXG4gICAgLy8gICAgIHsgdHJhbnNsYXRlWTogXCIxMDBweFwifSxcclxuICAgIC8vICAgICB7IGR1cmF0aW9uOiAwIH0pO1xyXG5cclxuICAgIC8vICQoJ3VsLnN0YWdnZXJlZC1saXN0LnZlcnRpY2FsIGxpJykuZWFjaChmdW5jdGlvbigpIHtcclxuICAgIC8vICAgJCh0aGlzKS52ZWxvY2l0eShcclxuICAgIC8vICAgICB7IG9wYWNpdHk6IFwiMVwiLCB0cmFuc2xhdGVZOiBcIjBcIn0sXHJcbiAgICAvLyAgICAgeyBkdXJhdGlvbjogODAwLCBkZWxheTogdGltZSwgZWFzaW5nOiBbNjAsIDI1XSB9KTtcclxuICAgIC8vICAgdGltZSArPSAxMjA7XHJcbiAgICAvLyB9KTtcclxuXHJcbiAgICAvLyAvLyBGYWRlIGluIGFuZCBTY2FsZVxyXG4gICAgLy8gJCgnLmZhZGUtaW4uc2NhbGUnKS52ZWxvY2l0eShcclxuICAgIC8vICAgICB7IHNjYWxlWDogLjQsIHNjYWxlWTogLjQsIHRyYW5zbGF0ZVg6IC02MDB9LFxyXG4gICAgLy8gICAgIHsgZHVyYXRpb246IDB9KTtcclxuICAgIC8vICQoJy5mYWRlLWluJykuZWFjaChmdW5jdGlvbigpIHtcclxuICAgIC8vICAgJCh0aGlzKS52ZWxvY2l0eShcclxuICAgIC8vICAgICB7IG9wYWNpdHk6IFwiMVwiLCBzY2FsZVg6IDEsIHNjYWxlWTogMSwgdHJhbnNsYXRlWDogMH0sXHJcbiAgICAvLyAgICAgeyBkdXJhdGlvbjogODAwLCBlYXNpbmc6IFs2MCwgMTBdIH0pO1xyXG4gICAgLy8gfSk7XHJcbiAgfSk7XHJcbn0oIGpRdWVyeSApKTtcclxuOyhmdW5jdGlvbigkKSB7XHJcblxyXG4gIC8vIElucHV0OiBBcnJheSBvZiBKU09OIG9iamVjdHMge3NlbGVjdG9yLCBvZmZzZXQsIGNhbGxiYWNrfVxyXG5cclxuICBNYXRlcmlhbGl6ZS5zY3JvbGxGaXJlID0gZnVuY3Rpb24ob3B0aW9ucykge1xyXG5cclxuICAgIHZhciBkaWRTY3JvbGwgPSBmYWxzZTtcclxuXHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCBmdW5jdGlvbigpIHtcclxuICAgICAgZGlkU2Nyb2xsID0gdHJ1ZTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIFJhdGUgbGltaXQgdG8gMTAwbXNcclxuICAgIHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xyXG4gICAgICBpZihkaWRTY3JvbGwpIHtcclxuICAgICAgICAgIGRpZFNjcm9sbCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgIHZhciB3aW5kb3dTY3JvbGwgPSB3aW5kb3cucGFnZVlPZmZzZXQgKyB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcblxyXG4gICAgICAgICAgZm9yICh2YXIgaSA9IDAgOyBpIDwgb3B0aW9ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAvLyBHZXQgb3B0aW9ucyBmcm9tIGVhY2ggbGluZVxyXG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBvcHRpb25zW2ldO1xyXG4gICAgICAgICAgICB2YXIgc2VsZWN0b3IgPSB2YWx1ZS5zZWxlY3RvcixcclxuICAgICAgICAgICAgICAgIG9mZnNldCA9IHZhbHVlLm9mZnNldCxcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrID0gdmFsdWUuY2FsbGJhY2s7XHJcblxyXG4gICAgICAgICAgICB2YXIgY3VycmVudEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcclxuICAgICAgICAgICAgaWYgKCBjdXJyZW50RWxlbWVudCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgIHZhciBlbGVtZW50T2Zmc2V0ID0gY3VycmVudEVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wICsgd2luZG93LnBhZ2VZT2Zmc2V0O1xyXG5cclxuICAgICAgICAgICAgICBpZiAod2luZG93U2Nyb2xsID4gKGVsZW1lbnRPZmZzZXQgKyBvZmZzZXQpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUuZG9uZSAhPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICBpZiAodHlwZW9mKGNhbGxiYWNrKSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwodGhpcywgY3VycmVudEVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZihjYWxsYmFjaykgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNhbGxiYWNrRnVuYyA9IG5ldyBGdW5jdGlvbihjYWxsYmFjayk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tGdW5jKGN1cnJlbnRFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB2YWx1ZS5kb25lID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSwgMTAwKTtcclxuICB9O1xyXG5cclxufSkoalF1ZXJ5KTtcclxuOy8qIVxyXG4gKiBwaWNrYWRhdGUuanMgdjMuNS4wLCAyMDE0LzA0LzEzXHJcbiAqIEJ5IEFtc3VsLCBodHRwOi8vYW1zdWwuY2FcclxuICogSG9zdGVkIG9uIGh0dHA6Ly9hbXN1bC5naXRodWIuaW8vcGlja2FkYXRlLmpzXHJcbiAqIExpY2Vuc2VkIHVuZGVyIE1JVFxyXG4gKi9cclxuXHJcbihmdW5jdGlvbiAoIGZhY3RvcnkgKSB7XHJcblxyXG4gICAgLy8gQU1ELlxyXG4gICAgaWYgKCB0eXBlb2YgZGVmaW5lID09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCApXHJcbiAgICAgICAgZGVmaW5lKCAncGlja2VyJywgWydqcXVlcnknXSwgZmFjdG9yeSApXHJcblxyXG4gICAgLy8gTm9kZS5qcy9icm93c2VyaWZ5LlxyXG4gICAgZWxzZSBpZiAoIHR5cGVvZiBleHBvcnRzID09ICdvYmplY3QnIClcclxuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoIHJlcXVpcmUoJ2pxdWVyeScpIClcclxuXHJcbiAgICAvLyBCcm93c2VyIGdsb2JhbHMuXHJcbiAgICBlbHNlIHRoaXMuUGlja2VyID0gZmFjdG9yeSggalF1ZXJ5IClcclxuXHJcbn0oZnVuY3Rpb24oICQgKSB7XHJcblxyXG52YXIgJHdpbmRvdyA9ICQoIHdpbmRvdyApXHJcbnZhciAkZG9jdW1lbnQgPSAkKCBkb2N1bWVudCApXHJcbnZhciAkaHRtbCA9ICQoIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCApXHJcblxyXG5cclxuLyoqXHJcbiAqIFRoZSBwaWNrZXIgY29uc3RydWN0b3IgdGhhdCBjcmVhdGVzIGEgYmxhbmsgcGlja2VyLlxyXG4gKi9cclxuZnVuY3Rpb24gUGlja2VyQ29uc3RydWN0b3IoIEVMRU1FTlQsIE5BTUUsIENPTVBPTkVOVCwgT1BUSU9OUyApIHtcclxuXHJcbiAgICAvLyBJZiB0aGVyZeKAmXMgbm8gZWxlbWVudCwgcmV0dXJuIHRoZSBwaWNrZXIgY29uc3RydWN0b3IuXHJcbiAgICBpZiAoICFFTEVNRU5UICkgcmV0dXJuIFBpY2tlckNvbnN0cnVjdG9yXHJcblxyXG5cclxuICAgIHZhclxyXG4gICAgICAgIElTX0RFRkFVTFRfVEhFTUUgPSBmYWxzZSxcclxuXHJcblxyXG4gICAgICAgIC8vIFRoZSBzdGF0ZSBvZiB0aGUgcGlja2VyLlxyXG4gICAgICAgIFNUQVRFID0ge1xyXG4gICAgICAgICAgICBpZDogRUxFTUVOVC5pZCB8fCAnUCcgKyBNYXRoLmFicyggfn4oTWF0aC5yYW5kb20oKSAqIG5ldyBEYXRlKCkpIClcclxuICAgICAgICB9LFxyXG5cclxuXHJcbiAgICAgICAgLy8gTWVyZ2UgdGhlIGRlZmF1bHRzIGFuZCBvcHRpb25zIHBhc3NlZC5cclxuICAgICAgICBTRVRUSU5HUyA9IENPTVBPTkVOVCA/ICQuZXh0ZW5kKCB0cnVlLCB7fSwgQ09NUE9ORU5ULmRlZmF1bHRzLCBPUFRJT05TICkgOiBPUFRJT05TIHx8IHt9LFxyXG5cclxuXHJcbiAgICAgICAgLy8gTWVyZ2UgdGhlIGRlZmF1bHQgY2xhc3NlcyB3aXRoIHRoZSBzZXR0aW5ncyBjbGFzc2VzLlxyXG4gICAgICAgIENMQVNTRVMgPSAkLmV4dGVuZCgge30sIFBpY2tlckNvbnN0cnVjdG9yLmtsYXNzZXMoKSwgU0VUVElOR1Mua2xhc3MgKSxcclxuXHJcblxyXG4gICAgICAgIC8vIFRoZSBlbGVtZW50IG5vZGUgd3JhcHBlciBpbnRvIGEgalF1ZXJ5IG9iamVjdC5cclxuICAgICAgICAkRUxFTUVOVCA9ICQoIEVMRU1FTlQgKSxcclxuXHJcblxyXG4gICAgICAgIC8vIFBzZXVkbyBwaWNrZXIgY29uc3RydWN0b3IuXHJcbiAgICAgICAgUGlja2VySW5zdGFuY2UgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhcnQoKVxyXG4gICAgICAgIH0sXHJcblxyXG5cclxuICAgICAgICAvLyBUaGUgcGlja2VyIHByb3RvdHlwZS5cclxuICAgICAgICBQID0gUGlja2VySW5zdGFuY2UucHJvdG90eXBlID0ge1xyXG5cclxuICAgICAgICAgICAgY29uc3RydWN0b3I6IFBpY2tlckluc3RhbmNlLFxyXG5cclxuICAgICAgICAgICAgJG5vZGU6ICRFTEVNRU5ULFxyXG5cclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBJbml0aWFsaXplIGV2ZXJ5dGhpbmdcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHN0YXJ0OiBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBJZiBpdOKAmXMgYWxyZWFkeSBzdGFydGVkLCBkbyBub3RoaW5nLlxyXG4gICAgICAgICAgICAgICAgaWYgKCBTVEFURSAmJiBTVEFURS5zdGFydCApIHJldHVybiBQXHJcblxyXG5cclxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgcGlja2VyIHN0YXRlcy5cclxuICAgICAgICAgICAgICAgIFNUQVRFLm1ldGhvZHMgPSB7fVxyXG4gICAgICAgICAgICAgICAgU1RBVEUuc3RhcnQgPSB0cnVlXHJcbiAgICAgICAgICAgICAgICBTVEFURS5vcGVuID0gZmFsc2VcclxuICAgICAgICAgICAgICAgIFNUQVRFLnR5cGUgPSBFTEVNRU5ULnR5cGVcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgLy8gQ29uZmlybSBmb2N1cyBzdGF0ZSwgY29udmVydCBpbnRvIHRleHQgaW5wdXQgdG8gcmVtb3ZlIFVBIHN0eWxpbmdzLFxyXG4gICAgICAgICAgICAgICAgLy8gYW5kIHNldCBhcyByZWFkb25seSB0byBwcmV2ZW50IGtleWJvYXJkIHBvcHVwLlxyXG4gICAgICAgICAgICAgICAgRUxFTUVOVC5hdXRvZm9jdXMgPSBFTEVNRU5UID09IGdldEFjdGl2ZUVsZW1lbnQoKVxyXG4gICAgICAgICAgICAgICAgRUxFTUVOVC5yZWFkT25seSA9ICFTRVRUSU5HUy5lZGl0YWJsZVxyXG4gICAgICAgICAgICAgICAgRUxFTUVOVC5pZCA9IEVMRU1FTlQuaWQgfHwgU1RBVEUuaWRcclxuICAgICAgICAgICAgICAgIGlmICggRUxFTUVOVC50eXBlICE9ICd0ZXh0JyApIHtcclxuICAgICAgICAgICAgICAgICAgICBFTEVNRU5ULnR5cGUgPSAndGV4dCdcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGEgbmV3IHBpY2tlciBjb21wb25lbnQgd2l0aCB0aGUgc2V0dGluZ3MuXHJcbiAgICAgICAgICAgICAgICBQLmNvbXBvbmVudCA9IG5ldyBDT01QT05FTlQoUCwgU0VUVElOR1MpXHJcblxyXG5cclxuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgcGlja2VyIHJvb3Qgd2l0aCBhIGhvbGRlciBhbmQgdGhlbiBwcmVwYXJlIGl0LlxyXG4gICAgICAgICAgICAgICAgUC4kcm9vdCA9ICQoIFBpY2tlckNvbnN0cnVjdG9yLl8ubm9kZSgnZGl2JywgY3JlYXRlV3JhcHBlZENvbXBvbmVudCgpLCBDTEFTU0VTLnBpY2tlciwgJ2lkPVwiJyArIEVMRU1FTlQuaWQgKyAnX3Jvb3RcIiB0YWJpbmRleD1cIjBcIicpIClcclxuICAgICAgICAgICAgICAgIHByZXBhcmVFbGVtZW50Um9vdCgpXHJcblxyXG5cclxuICAgICAgICAgICAgICAgIC8vIElmIHRoZXJl4oCZcyBhIGZvcm1hdCBmb3IgdGhlIGhpZGRlbiBpbnB1dCBlbGVtZW50LCBjcmVhdGUgdGhlIGVsZW1lbnQuXHJcbiAgICAgICAgICAgICAgICBpZiAoIFNFVFRJTkdTLmZvcm1hdFN1Ym1pdCApIHtcclxuICAgICAgICAgICAgICAgICAgICBwcmVwYXJlRWxlbWVudEhpZGRlbigpXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgICAgIC8vIFByZXBhcmUgdGhlIGlucHV0IGVsZW1lbnQuXHJcbiAgICAgICAgICAgICAgICBwcmVwYXJlRWxlbWVudCgpXHJcblxyXG5cclxuICAgICAgICAgICAgICAgIC8vIEluc2VydCB0aGUgcm9vdCBhcyBzcGVjaWZpZWQgaW4gdGhlIHNldHRpbmdzLlxyXG4gICAgICAgICAgICAgICAgaWYgKCBTRVRUSU5HUy5jb250YWluZXIgKSAkKCBTRVRUSU5HUy5jb250YWluZXIgKS5hcHBlbmQoIFAuJHJvb3QgKVxyXG4gICAgICAgICAgICAgICAgZWxzZSAkRUxFTUVOVC5hZnRlciggUC4kcm9vdCApXHJcblxyXG5cclxuICAgICAgICAgICAgICAgIC8vIEJpbmQgdGhlIGRlZmF1bHQgY29tcG9uZW50IGFuZCBzZXR0aW5ncyBldmVudHMuXHJcbiAgICAgICAgICAgICAgICBQLm9uKHtcclxuICAgICAgICAgICAgICAgICAgICBzdGFydDogUC5jb21wb25lbnQub25TdGFydCxcclxuICAgICAgICAgICAgICAgICAgICByZW5kZXI6IFAuY29tcG9uZW50Lm9uUmVuZGVyLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0b3A6IFAuY29tcG9uZW50Lm9uU3RvcCxcclxuICAgICAgICAgICAgICAgICAgICBvcGVuOiBQLmNvbXBvbmVudC5vbk9wZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgY2xvc2U6IFAuY29tcG9uZW50Lm9uQ2xvc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgc2V0OiBQLmNvbXBvbmVudC5vblNldFxyXG4gICAgICAgICAgICAgICAgfSkub24oe1xyXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0OiBTRVRUSU5HUy5vblN0YXJ0LFxyXG4gICAgICAgICAgICAgICAgICAgIHJlbmRlcjogU0VUVElOR1Mub25SZW5kZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgc3RvcDogU0VUVElOR1Mub25TdG9wLFxyXG4gICAgICAgICAgICAgICAgICAgIG9wZW46IFNFVFRJTkdTLm9uT3BlbixcclxuICAgICAgICAgICAgICAgICAgICBjbG9zZTogU0VUVElOR1Mub25DbG9zZSxcclxuICAgICAgICAgICAgICAgICAgICBzZXQ6IFNFVFRJTkdTLm9uU2V0XHJcbiAgICAgICAgICAgICAgICB9KVxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBPbmNlIHdl4oCZcmUgYWxsIHNldCwgY2hlY2sgdGhlIHRoZW1lIGluIHVzZS5cclxuICAgICAgICAgICAgICAgIElTX0RFRkFVTFRfVEhFTUUgPSBpc1VzaW5nRGVmYXVsdFRoZW1lKCBQLiRyb290LmNoaWxkcmVuKClbIDAgXSApXHJcblxyXG5cclxuICAgICAgICAgICAgICAgIC8vIElmIHRoZSBlbGVtZW50IGhhcyBhdXRvZm9jdXMsIG9wZW4gdGhlIHBpY2tlci5cclxuICAgICAgICAgICAgICAgIGlmICggRUxFTUVOVC5hdXRvZm9jdXMgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgUC5vcGVuKClcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgLy8gVHJpZ2dlciBxdWV1ZWQgdGhlIOKAnHN0YXJ04oCdIGFuZCDigJxyZW5kZXLigJ0gZXZlbnRzLlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFAudHJpZ2dlciggJ3N0YXJ0JyApLnRyaWdnZXIoICdyZW5kZXInIClcclxuICAgICAgICAgICAgfSwgLy9zdGFydFxyXG5cclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBSZW5kZXIgYSBuZXcgcGlja2VyXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICByZW5kZXI6IGZ1bmN0aW9uKCBlbnRpcmVDb21wb25lbnQgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gSW5zZXJ0IGEgbmV3IGNvbXBvbmVudCBob2xkZXIgaW4gdGhlIHJvb3Qgb3IgYm94LlxyXG4gICAgICAgICAgICAgICAgaWYgKCBlbnRpcmVDb21wb25lbnQgKSBQLiRyb290Lmh0bWwoIGNyZWF0ZVdyYXBwZWRDb21wb25lbnQoKSApXHJcbiAgICAgICAgICAgICAgICBlbHNlIFAuJHJvb3QuZmluZCggJy4nICsgQ0xBU1NFUy5ib3ggKS5odG1sKCBQLmNvbXBvbmVudC5ub2RlcyggU1RBVEUub3BlbiApIClcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBUcmlnZ2VyIHRoZSBxdWV1ZWQg4oCccmVuZGVy4oCdIGV2ZW50cy5cclxuICAgICAgICAgICAgICAgIHJldHVybiBQLnRyaWdnZXIoICdyZW5kZXInIClcclxuICAgICAgICAgICAgfSwgLy9yZW5kZXJcclxuXHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogRGVzdHJveSBldmVyeXRoaW5nXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBzdG9wOiBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBJZiBpdOKAmXMgYWxyZWFkeSBzdG9wcGVkLCBkbyBub3RoaW5nLlxyXG4gICAgICAgICAgICAgICAgaWYgKCAhU1RBVEUuc3RhcnQgKSByZXR1cm4gUFxyXG5cclxuICAgICAgICAgICAgICAgIC8vIFRoZW4gY2xvc2UgdGhlIHBpY2tlci5cclxuICAgICAgICAgICAgICAgIFAuY2xvc2UoKVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgaGlkZGVuIGZpZWxkLlxyXG4gICAgICAgICAgICAgICAgaWYgKCBQLl9oaWRkZW4gKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgUC5faGlkZGVuLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoIFAuX2hpZGRlbiApXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gUmVtb3ZlIHRoZSByb290LlxyXG4gICAgICAgICAgICAgICAgUC4kcm9vdC5yZW1vdmUoKVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgaW5wdXQgY2xhc3MsIHJlbW92ZSB0aGUgc3RvcmVkIGRhdGEsIGFuZCB1bmJpbmRcclxuICAgICAgICAgICAgICAgIC8vIHRoZSBldmVudHMgKGFmdGVyIGEgdGljayBmb3IgSUUgLSBzZWUgYFAuY2xvc2VgKS5cclxuICAgICAgICAgICAgICAgICRFTEVNRU5ULnJlbW92ZUNsYXNzKCBDTEFTU0VTLmlucHV0ICkucmVtb3ZlRGF0YSggTkFNRSApXHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAkRUxFTUVOVC5vZmYoICcuJyArIFNUQVRFLmlkIClcclxuICAgICAgICAgICAgICAgIH0sIDApXHJcblxyXG4gICAgICAgICAgICAgICAgLy8gUmVzdG9yZSB0aGUgZWxlbWVudCBzdGF0ZVxyXG4gICAgICAgICAgICAgICAgRUxFTUVOVC50eXBlID0gU1RBVEUudHlwZVxyXG4gICAgICAgICAgICAgICAgRUxFTUVOVC5yZWFkT25seSA9IGZhbHNlXHJcblxyXG4gICAgICAgICAgICAgICAgLy8gVHJpZ2dlciB0aGUgcXVldWVkIOKAnHN0b3DigJ0gZXZlbnRzLlxyXG4gICAgICAgICAgICAgICAgUC50cmlnZ2VyKCAnc3RvcCcgKVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIFJlc2V0IHRoZSBwaWNrZXIgc3RhdGVzLlxyXG4gICAgICAgICAgICAgICAgU1RBVEUubWV0aG9kcyA9IHt9XHJcbiAgICAgICAgICAgICAgICBTVEFURS5zdGFydCA9IGZhbHNlXHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFBcclxuICAgICAgICAgICAgfSwgLy9zdG9wXHJcblxyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIE9wZW4gdXAgdGhlIHBpY2tlclxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgb3BlbjogZnVuY3Rpb24oIGRvbnRHaXZlRm9jdXMgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gSWYgaXTigJlzIGFscmVhZHkgb3BlbiwgZG8gbm90aGluZy5cclxuICAgICAgICAgICAgICAgIGlmICggU1RBVEUub3BlbiApIHJldHVybiBQXHJcblxyXG4gICAgICAgICAgICAgICAgLy8gQWRkIHRoZSDigJxhY3RpdmXigJ0gY2xhc3MuXHJcbiAgICAgICAgICAgICAgICAkRUxFTUVOVC5hZGRDbGFzcyggQ0xBU1NFUy5hY3RpdmUgKVxyXG4gICAgICAgICAgICAgICAgYXJpYSggRUxFTUVOVCwgJ2V4cGFuZGVkJywgdHJ1ZSApXHJcblxyXG4gICAgICAgICAgICAgICAgLy8gKiBBIEZpcmVmb3ggYnVnLCB3aGVuIGBodG1sYCBoYXMgYG92ZXJmbG93OmhpZGRlbmAsIHJlc3VsdHMgaW5cclxuICAgICAgICAgICAgICAgIC8vICAga2lsbGluZyB0cmFuc2l0aW9ucyA6KC4gU28gYWRkIHRoZSDigJxvcGVuZWTigJ0gc3RhdGUgb24gdGhlIG5leHQgdGljay5cclxuICAgICAgICAgICAgICAgIC8vICAgQnVnOiBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD02MjUyODlcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdGhlIOKAnG9wZW5lZOKAnSBjbGFzcyB0byB0aGUgcGlja2VyIHJvb3QuXHJcbiAgICAgICAgICAgICAgICAgICAgUC4kcm9vdC5hZGRDbGFzcyggQ0xBU1NFUy5vcGVuZWQgKVxyXG4gICAgICAgICAgICAgICAgICAgIGFyaWEoIFAuJHJvb3RbMF0sICdoaWRkZW4nLCBmYWxzZSApXHJcblxyXG4gICAgICAgICAgICAgICAgfSwgMCApXHJcblxyXG4gICAgICAgICAgICAgICAgLy8gSWYgd2UgaGF2ZSB0byBnaXZlIGZvY3VzLCBiaW5kIHRoZSBlbGVtZW50IGFuZCBkb2MgZXZlbnRzLlxyXG4gICAgICAgICAgICAgICAgaWYgKCBkb250R2l2ZUZvY3VzICE9PSBmYWxzZSApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gU2V0IGl0IGFzIG9wZW4uXHJcbiAgICAgICAgICAgICAgICAgICAgU1RBVEUub3BlbiA9IHRydWVcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gUHJldmVudCB0aGUgcGFnZSBmcm9tIHNjcm9sbGluZy5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIElTX0RFRkFVTFRfVEhFTUUgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRodG1sLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3NzKCAnb3ZlcmZsb3cnLCAnaGlkZGVuJyApLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3NzKCAncGFkZGluZy1yaWdodCcsICcrPScgKyBnZXRTY3JvbGxiYXJXaWR0aCgpIClcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFBhc3MgZm9jdXMgdG8gdGhlIHJvb3QgZWxlbWVudOKAmXMgalF1ZXJ5IG9iamVjdC5cclxuICAgICAgICAgICAgICAgICAgICAvLyAqIFdvcmthcm91bmQgZm9yIGlPUzggdG8gYnJpbmcgdGhlIHBpY2tlcuKAmXMgcm9vdCBpbnRvIHZpZXcuXHJcbiAgICAgICAgICAgICAgICAgICAgUC4kcm9vdC5lcSgwKS5mb2N1cygpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEJpbmQgdGhlIGRvY3VtZW50IGV2ZW50cy5cclxuICAgICAgICAgICAgICAgICAgICAkZG9jdW1lbnQub24oICdjbGljay4nICsgU1RBVEUuaWQgKyAnIGZvY3VzaW4uJyArIFNUQVRFLmlkLCBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgdGFyZ2V0IG9mIHRoZSBldmVudCBpcyBub3QgdGhlIGVsZW1lbnQsIGNsb3NlIHRoZSBwaWNrZXIgcGlja2VyLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAqIERvbuKAmXQgd29ycnkgYWJvdXQgY2xpY2tzIG9yIGZvY3VzaW5zIG9uIHRoZSByb290IGJlY2F1c2UgdGhvc2UgZG9u4oCZdCBidWJibGUgdXAuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgQWxzbywgZm9yIEZpcmVmb3gsIGEgY2xpY2sgb24gYW4gYG9wdGlvbmAgZWxlbWVudCBidWJibGVzIHVwIGRpcmVjdGx5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgdG8gdGhlIGRvYy4gU28gbWFrZSBzdXJlIHRoZSB0YXJnZXQgd2Fzbid0IHRoZSBkb2MuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICogSW4gRmlyZWZveCBzdG9wUHJvcGFnYXRpb24oKSBkb2VzbuKAmXQgcHJldmVudCByaWdodC1jbGljayBldmVudHMgZnJvbSBidWJibGluZyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICB3aGljaCBjYXVzZXMgdGhlIHBpY2tlciB0byB1bmV4cGVjdGVkbHkgY2xvc2Ugd2hlbiByaWdodC1jbGlja2luZyBpdC4gU28gbWFrZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgIHN1cmUgdGhlIGV2ZW50IHdhc27igJl0IGEgcmlnaHQtY2xpY2suXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggdGFyZ2V0ICE9IEVMRU1FTlQgJiYgdGFyZ2V0ICE9IGRvY3VtZW50ICYmIGV2ZW50LndoaWNoICE9IDMgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIHRhcmdldCB3YXMgdGhlIGhvbGRlciB0aGF0IGNvdmVycyB0aGUgc2NyZWVuLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8ga2VlcCB0aGUgZWxlbWVudCBmb2N1c2VkIHRvIG1haW50YWluIHRhYmluZGV4LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUC5jbG9zZSggdGFyZ2V0ID09PSBQLiRyb290LmNoaWxkcmVuKClbMF0gKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH0pLm9uKCAna2V5ZG93bi4nICsgU1RBVEUuaWQsIGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gR2V0IHRoZSBrZXljb2RlLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5Y29kZSA9IGV2ZW50LmtleUNvZGUsXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVHJhbnNsYXRlIHRoYXQgdG8gYSBzZWxlY3Rpb24gY2hhbmdlLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5Y29kZVRvTW92ZSA9IFAuY29tcG9uZW50LmtleVsga2V5Y29kZSBdLFxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdyYWIgdGhlIHRhcmdldC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldCA9IGV2ZW50LnRhcmdldFxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9uIGVzY2FwZSwgY2xvc2UgdGhlIHBpY2tlciBhbmQgZ2l2ZSBmb2N1cy5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBrZXljb2RlID09IDI3ICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUC5jbG9zZSggdHJ1ZSApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGVyZSBpcyBhIGtleSBtb3ZlbWVudCBvciDigJxlbnRlcuKAnSBrZXlwcmVzcyBvbiB0aGUgZWxlbWVudC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoIHRhcmdldCA9PSBQLiRyb290WzBdICYmICgga2V5Y29kZVRvTW92ZSB8fCBrZXljb2RlID09IDEzICkgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUHJldmVudCB0aGUgZGVmYXVsdCBhY3Rpb24gdG8gc3RvcCBwYWdlIG1vdmVtZW50LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRyaWdnZXIgdGhlIGtleSBtb3ZlbWVudCBhY3Rpb24uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGtleWNvZGVUb01vdmUgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGlja2VyQ29uc3RydWN0b3IuXy50cmlnZ2VyKCBQLmNvbXBvbmVudC5rZXkuZ28sIFAsIFsgUGlja2VyQ29uc3RydWN0b3IuXy50cmlnZ2VyKCBrZXljb2RlVG9Nb3ZlICkgXSApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gT24g4oCcZW50ZXLigJ0sIGlmIHRoZSBoaWdobGlnaHRlZCBpdGVtIGlzbuKAmXQgZGlzYWJsZWQsIHNldCB0aGUgdmFsdWUgYW5kIGNsb3NlLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoICFQLiRyb290LmZpbmQoICcuJyArIENMQVNTRVMuaGlnaGxpZ2h0ZWQgKS5oYXNDbGFzcyggQ0xBU1NFUy5kaXNhYmxlZCApICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFAuc2V0KCAnc2VsZWN0JywgUC5jb21wb25lbnQuaXRlbS5oaWdobGlnaHQgKS5jbG9zZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgdGFyZ2V0IGlzIHdpdGhpbiB0aGUgcm9vdCBhbmQg4oCcZW50ZXLigJ0gaXMgcHJlc3NlZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcHJldmVudCB0aGUgZGVmYXVsdCBhY3Rpb24gYW5kIHRyaWdnZXIgYSBjbGljayBvbiB0aGUgdGFyZ2V0IGluc3RlYWQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCAkLmNvbnRhaW5zKCBQLiRyb290WzBdLCB0YXJnZXQgKSAmJiBrZXljb2RlID09IDEzICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LmNsaWNrKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gVHJpZ2dlciB0aGUgcXVldWVkIOKAnG9wZW7igJ0gZXZlbnRzLlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFAudHJpZ2dlciggJ29wZW4nIClcclxuICAgICAgICAgICAgfSwgLy9vcGVuXHJcblxyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENsb3NlIHRoZSBwaWNrZXJcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGNsb3NlOiBmdW5jdGlvbiggZ2l2ZUZvY3VzICkge1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIElmIHdlIG5lZWQgdG8gZ2l2ZSBmb2N1cywgZG8gaXQgYmVmb3JlIGNoYW5naW5nIHN0YXRlcy5cclxuICAgICAgICAgICAgICAgIGlmICggZ2l2ZUZvY3VzICkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIC4uLi5haCB5ZXMhIEl0IHdvdWxk4oCZdmUgYmVlbiBpbmNvbXBsZXRlIHdpdGhvdXQgYSBjcmF6eSB3b3JrYXJvdW5kIGZvciBJRSA6fFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZSBmb2N1cyBpcyB0cmlnZ2VyZWQgKmFmdGVyKiB0aGUgY2xvc2UgaGFzIGNvbXBsZXRlZCAtIGNhdXNpbmcgaXRcclxuICAgICAgICAgICAgICAgICAgICAvLyB0byBvcGVuIGFnYWluLiBTbyB1bmJpbmQgYW5kIHJlYmluZCB0aGUgZXZlbnQgYXQgdGhlIG5leHQgdGljay5cclxuICAgICAgICAgICAgICAgICAgICBQLiRyb290Lm9mZiggJ2ZvY3VzLnRvT3BlbicgKS5lcSgwKS5mb2N1cygpXHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFAuJHJvb3Qub24oICdmb2N1cy50b09wZW4nLCBoYW5kbGVGb2N1c1RvT3BlbkV2ZW50IClcclxuICAgICAgICAgICAgICAgICAgICB9LCAwIClcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgdGhlIOKAnGFjdGl2ZeKAnSBjbGFzcy5cclxuICAgICAgICAgICAgICAgICRFTEVNRU5ULnJlbW92ZUNsYXNzKCBDTEFTU0VTLmFjdGl2ZSApXHJcbiAgICAgICAgICAgICAgICBhcmlhKCBFTEVNRU5ULCAnZXhwYW5kZWQnLCBmYWxzZSApXHJcblxyXG4gICAgICAgICAgICAgICAgLy8gKiBBIEZpcmVmb3ggYnVnLCB3aGVuIGBodG1sYCBoYXMgYG92ZXJmbG93OmhpZGRlbmAsIHJlc3VsdHMgaW5cclxuICAgICAgICAgICAgICAgIC8vICAga2lsbGluZyB0cmFuc2l0aW9ucyA6KC4gU28gcmVtb3ZlIHRoZSDigJxvcGVuZWTigJ0gc3RhdGUgb24gdGhlIG5leHQgdGljay5cclxuICAgICAgICAgICAgICAgIC8vICAgQnVnOiBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD02MjUyODlcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdmUgdGhlIOKAnG9wZW5lZOKAnSBhbmQg4oCcZm9jdXNlZOKAnSBjbGFzcyBmcm9tIHRoZSBwaWNrZXIgcm9vdC5cclxuICAgICAgICAgICAgICAgICAgICBQLiRyb290LnJlbW92ZUNsYXNzKCBDTEFTU0VTLm9wZW5lZCArICcgJyArIENMQVNTRVMuZm9jdXNlZCApXHJcbiAgICAgICAgICAgICAgICAgICAgYXJpYSggUC4kcm9vdFswXSwgJ2hpZGRlbicsIHRydWUgKVxyXG5cclxuICAgICAgICAgICAgICAgIH0sIDAgKVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIElmIGl04oCZcyBhbHJlYWR5IGNsb3NlZCwgZG8gbm90aGluZyBtb3JlLlxyXG4gICAgICAgICAgICAgICAgaWYgKCAhU1RBVEUub3BlbiApIHJldHVybiBQXHJcblxyXG4gICAgICAgICAgICAgICAgLy8gU2V0IGl0IGFzIGNsb3NlZC5cclxuICAgICAgICAgICAgICAgIFNUQVRFLm9wZW4gPSBmYWxzZVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIEFsbG93IHRoZSBwYWdlIHRvIHNjcm9sbC5cclxuICAgICAgICAgICAgICAgIGlmICggSVNfREVGQVVMVF9USEVNRSApIHtcclxuICAgICAgICAgICAgICAgICAgICAkaHRtbC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY3NzKCAnb3ZlcmZsb3cnLCAnJyApLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjc3MoICdwYWRkaW5nLXJpZ2h0JywgJy09JyArIGdldFNjcm9sbGJhcldpZHRoKCkgKVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIFVuYmluZCB0aGUgZG9jdW1lbnQgZXZlbnRzLlxyXG4gICAgICAgICAgICAgICAgJGRvY3VtZW50Lm9mZiggJy4nICsgU1RBVEUuaWQgKVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIFRyaWdnZXIgdGhlIHF1ZXVlZCDigJxjbG9zZeKAnSBldmVudHMuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUC50cmlnZ2VyKCAnY2xvc2UnIClcclxuICAgICAgICAgICAgfSwgLy9jbG9zZVxyXG5cclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDbGVhciB0aGUgdmFsdWVzXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBjbGVhcjogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUC5zZXQoICdjbGVhcicsIG51bGwsIG9wdGlvbnMgKVxyXG4gICAgICAgICAgICB9LCAvL2NsZWFyXHJcblxyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFNldCBzb21ldGhpbmdcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24oIHRoaW5nLCB2YWx1ZSwgb3B0aW9ucyApIHtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgdGhpbmdJdGVtLCB0aGluZ1ZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaW5nSXNPYmplY3QgPSAkLmlzUGxhaW5PYmplY3QoIHRoaW5nICksXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpbmdPYmplY3QgPSB0aGluZ0lzT2JqZWN0ID8gdGhpbmcgOiB7fVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB3ZSBoYXZlIHVzYWJsZSBvcHRpb25zLlxyXG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IHRoaW5nSXNPYmplY3QgJiYgJC5pc1BsYWluT2JqZWN0KCB2YWx1ZSApID8gdmFsdWUgOiBvcHRpb25zIHx8IHt9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCB0aGluZyApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIHRoaW5nIGlzbuKAmXQgYW4gb2JqZWN0LCBtYWtlIGl0IG9uZS5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoICF0aGluZ0lzT2JqZWN0ICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGluZ09iamVjdFsgdGhpbmcgXSA9IHZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBHbyB0aHJvdWdoIHRoZSB0aGluZ3Mgb2YgaXRlbXMgdG8gc2V0LlxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoIHRoaW5nSXRlbSBpbiB0aGluZ09iamVjdCApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdyYWIgdGhlIHZhbHVlIG9mIHRoZSB0aGluZy5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpbmdWYWx1ZSA9IHRoaW5nT2JqZWN0WyB0aGluZ0l0ZW0gXVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmlyc3QsIGlmIHRoZSBpdGVtIGV4aXN0cyBhbmQgdGhlcmXigJlzIGEgdmFsdWUsIHNldCBpdC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCB0aGluZ0l0ZW0gaW4gUC5jb21wb25lbnQuaXRlbSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggdGhpbmdWYWx1ZSA9PT0gdW5kZWZpbmVkICkgdGhpbmdWYWx1ZSA9IG51bGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFAuY29tcG9uZW50LnNldCggdGhpbmdJdGVtLCB0aGluZ1ZhbHVlLCBvcHRpb25zIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlbiwgY2hlY2sgdG8gdXBkYXRlIHRoZSBlbGVtZW50IHZhbHVlIGFuZCBicm9hZGNhc3QgYSBjaGFuZ2UuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggdGhpbmdJdGVtID09ICdzZWxlY3QnIHx8IHRoaW5nSXRlbSA9PSAnY2xlYXInICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJEVMRU1FTlQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsKCB0aGluZ0l0ZW0gPT0gJ2NsZWFyJyA/ICcnIDogUC5nZXQoIHRoaW5nSXRlbSwgU0VUVElOR1MuZm9ybWF0ICkgKS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyKCAnY2hhbmdlJyApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFJlbmRlciBhIG5ldyBwaWNrZXIuXHJcbiAgICAgICAgICAgICAgICAgICAgUC5yZW5kZXIoKVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIFdoZW4gdGhlIG1ldGhvZCBpc27igJl0IG11dGVkLCB0cmlnZ2VyIHF1ZXVlZCDigJxzZXTigJ0gZXZlbnRzIGFuZCBwYXNzIHRoZSBgdGhpbmdPYmplY3RgLlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnMubXV0ZWQgPyBQIDogUC50cmlnZ2VyKCAnc2V0JywgdGhpbmdPYmplY3QgKVxyXG4gICAgICAgICAgICB9LCAvL3NldFxyXG5cclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBHZXQgc29tZXRoaW5nXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCB0aGluZywgZm9ybWF0ICkge1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGVyZeKAmXMgc29tZXRoaW5nIHRvIGdldC5cclxuICAgICAgICAgICAgICAgIHRoaW5nID0gdGhpbmcgfHwgJ3ZhbHVlJ1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIElmIGEgcGlja2VyIHN0YXRlIGV4aXN0cywgcmV0dXJuIHRoYXQuXHJcbiAgICAgICAgICAgICAgICBpZiAoIFNUQVRFWyB0aGluZyBdICE9IG51bGwgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFNUQVRFWyB0aGluZyBdXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gUmV0dXJuIHRoZSBzdWJtaXNzaW9uIHZhbHVlLCBpZiB0aGF0LlxyXG4gICAgICAgICAgICAgICAgaWYgKCB0aGluZyA9PSAndmFsdWVTdWJtaXQnICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICggUC5faGlkZGVuICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUC5faGlkZGVuLnZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaW5nID0gJ3ZhbHVlJ1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIFJldHVybiB0aGUgdmFsdWUsIGlmIHRoYXQuXHJcbiAgICAgICAgICAgICAgICBpZiAoIHRoaW5nID09ICd2YWx1ZScgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEVMRU1FTlQudmFsdWVcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBhIGNvbXBvbmVudCBpdGVtIGV4aXN0cywgcmV0dXJuIHRoYXQuXHJcbiAgICAgICAgICAgICAgICBpZiAoIHRoaW5nIGluIFAuY29tcG9uZW50Lml0ZW0gKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCB0eXBlb2YgZm9ybWF0ID09ICdzdHJpbmcnICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGhpbmdWYWx1ZSA9IFAuY29tcG9uZW50LmdldCggdGhpbmcgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpbmdWYWx1ZSA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQaWNrZXJDb25zdHJ1Y3Rvci5fLnRyaWdnZXIoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUC5jb21wb25lbnQuZm9ybWF0cy50b1N0cmluZyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQLmNvbXBvbmVudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbIGZvcm1hdCwgdGhpbmdWYWx1ZSBdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogJydcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFAuY29tcG9uZW50LmdldCggdGhpbmcgKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCAvL2dldFxyXG5cclxuXHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQmluZCBldmVudHMgb24gdGhlIHRoaW5ncy5cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIG9uOiBmdW5jdGlvbiggdGhpbmcsIG1ldGhvZCwgaW50ZXJuYWwgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHRoaW5nTmFtZSwgdGhpbmdNZXRob2QsXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpbmdJc09iamVjdCA9ICQuaXNQbGFpbk9iamVjdCggdGhpbmcgKSxcclxuICAgICAgICAgICAgICAgICAgICB0aGluZ09iamVjdCA9IHRoaW5nSXNPYmplY3QgPyB0aGluZyA6IHt9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCB0aGluZyApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIHRoaW5nIGlzbuKAmXQgYW4gb2JqZWN0LCBtYWtlIGl0IG9uZS5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoICF0aGluZ0lzT2JqZWN0ICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGluZ09iamVjdFsgdGhpbmcgXSA9IG1ldGhvZFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gR28gdGhyb3VnaCB0aGUgdGhpbmdzIHRvIGJpbmQgdG8uXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICggdGhpbmdOYW1lIGluIHRoaW5nT2JqZWN0ICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gR3JhYiB0aGUgbWV0aG9kIG9mIHRoZSB0aGluZy5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpbmdNZXRob2QgPSB0aGluZ09iamVjdFsgdGhpbmdOYW1lIF1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIGl0IHdhcyBhbiBpbnRlcm5hbCBiaW5kaW5nLCBwcmVmaXggaXQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggaW50ZXJuYWwgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGluZ05hbWUgPSAnXycgKyB0aGluZ05hbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRoZSB0aGluZyBtZXRob2RzIGNvbGxlY3Rpb24gZXhpc3RzLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBTVEFURS5tZXRob2RzWyB0aGluZ05hbWUgXSA9IFNUQVRFLm1ldGhvZHNbIHRoaW5nTmFtZSBdIHx8IFtdXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdGhlIG1ldGhvZCB0byB0aGUgcmVsYXRpdmUgbWV0aG9kIGNvbGxlY3Rpb24uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFNUQVRFLm1ldGhvZHNbIHRoaW5nTmFtZSBdLnB1c2goIHRoaW5nTWV0aG9kIClcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFBcclxuICAgICAgICAgICAgfSwgLy9vblxyXG5cclxuXHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogVW5iaW5kIGV2ZW50cyBvbiB0aGUgdGhpbmdzLlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgb2ZmOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHZhciBpLCB0aGluZ05hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZXMgPSBhcmd1bWVudHM7XHJcbiAgICAgICAgICAgICAgICBmb3IgKCBpID0gMCwgbmFtZXNDb3VudCA9IG5hbWVzLmxlbmd0aDsgaSA8IG5hbWVzQ291bnQ7IGkgKz0gMSApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGluZ05hbWUgPSBuYW1lc1tpXVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICggdGhpbmdOYW1lIGluIFNUQVRFLm1ldGhvZHMgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBTVEFURS5tZXRob2RzW3RoaW5nTmFtZV1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUFxyXG4gICAgICAgICAgICB9LFxyXG5cclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBGaXJlIG9mZiBtZXRob2QgZXZlbnRzLlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgdHJpZ2dlcjogZnVuY3Rpb24oIG5hbWUsIGRhdGEgKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgX3RyaWdnZXIgPSBmdW5jdGlvbiggbmFtZSApIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbWV0aG9kTGlzdCA9IFNUQVRFLm1ldGhvZHNbIG5hbWUgXVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICggbWV0aG9kTGlzdCApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kTGlzdC5tYXAoIGZ1bmN0aW9uKCBtZXRob2QgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQaWNrZXJDb25zdHJ1Y3Rvci5fLnRyaWdnZXIoIG1ldGhvZCwgUCwgWyBkYXRhIF0gKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIF90cmlnZ2VyKCAnXycgKyBuYW1lIClcclxuICAgICAgICAgICAgICAgIF90cmlnZ2VyKCBuYW1lIClcclxuICAgICAgICAgICAgICAgIHJldHVybiBQXHJcbiAgICAgICAgICAgIH0gLy90cmlnZ2VyXHJcbiAgICAgICAgfSAvL1BpY2tlckluc3RhbmNlLnByb3RvdHlwZVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIFdyYXAgdGhlIHBpY2tlciBob2xkZXIgY29tcG9uZW50cyB0b2dldGhlci5cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gY3JlYXRlV3JhcHBlZENvbXBvbmVudCgpIHtcclxuXHJcbiAgICAgICAgLy8gQ3JlYXRlIGEgcGlja2VyIHdyYXBwZXIgaG9sZGVyXHJcbiAgICAgICAgcmV0dXJuIFBpY2tlckNvbnN0cnVjdG9yLl8ubm9kZSggJ2RpdicsXHJcblxyXG4gICAgICAgICAgICAvLyBDcmVhdGUgYSBwaWNrZXIgd3JhcHBlciBub2RlXHJcbiAgICAgICAgICAgIFBpY2tlckNvbnN0cnVjdG9yLl8ubm9kZSggJ2RpdicsXHJcblxyXG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGEgcGlja2VyIGZyYW1lXHJcbiAgICAgICAgICAgICAgICBQaWNrZXJDb25zdHJ1Y3Rvci5fLm5vZGUoICdkaXYnLFxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBDcmVhdGUgYSBwaWNrZXIgYm94IG5vZGVcclxuICAgICAgICAgICAgICAgICAgICBQaWNrZXJDb25zdHJ1Y3Rvci5fLm5vZGUoICdkaXYnLFxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBjb21wb25lbnRzIG5vZGVzLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBQLmNvbXBvbmVudC5ub2RlcyggU1RBVEUub3BlbiApLFxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIHBpY2tlciBib3ggY2xhc3NcclxuICAgICAgICAgICAgICAgICAgICAgICAgQ0xBU1NFUy5ib3hcclxuICAgICAgICAgICAgICAgICAgICApLFxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBQaWNrZXIgd3JhcCBjbGFzc1xyXG4gICAgICAgICAgICAgICAgICAgIENMQVNTRVMud3JhcFxyXG4gICAgICAgICAgICAgICAgKSxcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBQaWNrZXIgZnJhbWUgY2xhc3NcclxuICAgICAgICAgICAgICAgIENMQVNTRVMuZnJhbWVcclxuICAgICAgICAgICAgKSxcclxuXHJcbiAgICAgICAgICAgIC8vIFBpY2tlciBob2xkZXIgY2xhc3NcclxuICAgICAgICAgICAgQ0xBU1NFUy5ob2xkZXJcclxuICAgICAgICApIC8vZW5kcmV0dXJuXHJcbiAgICB9IC8vY3JlYXRlV3JhcHBlZENvbXBvbmVudFxyXG5cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQcmVwYXJlIHRoZSBpbnB1dCBlbGVtZW50IHdpdGggYWxsIGJpbmRpbmdzLlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBwcmVwYXJlRWxlbWVudCgpIHtcclxuXHJcbiAgICAgICAgJEVMRU1FTlQuXHJcblxyXG4gICAgICAgICAgICAvLyBTdG9yZSB0aGUgcGlja2VyIGRhdGEgYnkgY29tcG9uZW50IG5hbWUuXHJcbiAgICAgICAgICAgIGRhdGEoTkFNRSwgUCkuXHJcblxyXG4gICAgICAgICAgICAvLyBBZGQgdGhlIOKAnGlucHV04oCdIGNsYXNzIG5hbWUuXHJcbiAgICAgICAgICAgIGFkZENsYXNzKENMQVNTRVMuaW5wdXQpLlxyXG5cclxuICAgICAgICAgICAgLy8gUmVtb3ZlIHRoZSB0YWJpbmRleC5cclxuICAgICAgICAgICAgYXR0cigndGFiaW5kZXgnLCAtMSkuXHJcblxyXG4gICAgICAgICAgICAvLyBJZiB0aGVyZeKAmXMgYSBgZGF0YS12YWx1ZWAsIHVwZGF0ZSB0aGUgdmFsdWUgb2YgdGhlIGVsZW1lbnQuXHJcbiAgICAgICAgICAgIHZhbCggJEVMRU1FTlQuZGF0YSgndmFsdWUnKSA/XHJcbiAgICAgICAgICAgICAgICBQLmdldCgnc2VsZWN0JywgU0VUVElOR1MuZm9ybWF0KSA6XHJcbiAgICAgICAgICAgICAgICBFTEVNRU5ULnZhbHVlXHJcbiAgICAgICAgICAgIClcclxuXHJcblxyXG4gICAgICAgIC8vIE9ubHkgYmluZCBrZXlkb3duIGV2ZW50cyBpZiB0aGUgZWxlbWVudCBpc27igJl0IGVkaXRhYmxlLlxyXG4gICAgICAgIGlmICggIVNFVFRJTkdTLmVkaXRhYmxlICkge1xyXG5cclxuICAgICAgICAgICAgJEVMRU1FTlQuXHJcblxyXG4gICAgICAgICAgICAgICAgLy8gT24gZm9jdXMvY2xpY2ssIGZvY3VzIG9udG8gdGhlIHJvb3QgdG8gb3BlbiBpdCB1cC5cclxuICAgICAgICAgICAgICAgIG9uKCAnZm9jdXMuJyArIFNUQVRFLmlkICsgJyBjbGljay4nICsgU1RBVEUuaWQsIGZ1bmN0aW9uKCBldmVudCApIHtcclxuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICAgICAgICAgICAgICAgICAgUC4kcm9vdC5lcSgwKS5mb2N1cygpXHJcbiAgICAgICAgICAgICAgICB9KS5cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBIYW5kbGUga2V5Ym9hcmQgZXZlbnQgYmFzZWQgb24gdGhlIHBpY2tlciBiZWluZyBvcGVuZWQgb3Igbm90LlxyXG4gICAgICAgICAgICAgICAgb24oICdrZXlkb3duLicgKyBTVEFURS5pZCwgaGFuZGxlS2V5ZG93bkV2ZW50IClcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAvLyBVcGRhdGUgdGhlIGFyaWEgYXR0cmlidXRlcy5cclxuICAgICAgICBhcmlhKEVMRU1FTlQsIHtcclxuICAgICAgICAgICAgaGFzcG9wdXA6IHRydWUsXHJcbiAgICAgICAgICAgIGV4cGFuZGVkOiBmYWxzZSxcclxuICAgICAgICAgICAgcmVhZG9ubHk6IGZhbHNlLFxyXG4gICAgICAgICAgICBvd25zOiBFTEVNRU5ULmlkICsgJ19yb290J1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUHJlcGFyZSB0aGUgcm9vdCBwaWNrZXIgZWxlbWVudCB3aXRoIGFsbCBiaW5kaW5ncy5cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gcHJlcGFyZUVsZW1lbnRSb290KCkge1xyXG5cclxuICAgICAgICBQLiRyb290LlxyXG5cclxuICAgICAgICAgICAgb24oe1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIEZvciBpT1M4LlxyXG4gICAgICAgICAgICAgICAga2V5ZG93bjogaGFuZGxlS2V5ZG93bkV2ZW50LFxyXG5cclxuICAgICAgICAgICAgICAgIC8vIFdoZW4gc29tZXRoaW5nIHdpdGhpbiB0aGUgcm9vdCBpcyBmb2N1c2VkLCBzdG9wIGZyb20gYnViYmxpbmdcclxuICAgICAgICAgICAgICAgIC8vIHRvIHRoZSBkb2MgYW5kIHJlbW92ZSB0aGUg4oCcZm9jdXNlZOKAnSBzdGF0ZSBmcm9tIHRoZSByb290LlxyXG4gICAgICAgICAgICAgICAgZm9jdXNpbjogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG4gICAgICAgICAgICAgICAgICAgIFAuJHJvb3QucmVtb3ZlQ2xhc3MoIENMQVNTRVMuZm9jdXNlZCApXHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcclxuICAgICAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAgICAgLy8gV2hlbiBzb21ldGhpbmcgd2l0aGluIHRoZSByb290IGhvbGRlciBpcyBjbGlja2VkLCBzdG9wIGl0XHJcbiAgICAgICAgICAgICAgICAvLyBmcm9tIGJ1YmJsaW5nIHRvIHRoZSBkb2MuXHJcbiAgICAgICAgICAgICAgICAnbW91c2Vkb3duIGNsaWNrJzogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgdGFyZ2V0IGlzbuKAmXQgdGhlIHJvb3QgaG9sZGVyIHNvIGl0IGNhbiBidWJibGUgdXAuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCB0YXJnZXQgIT0gUC4kcm9vdC5jaGlsZHJlbigpWyAwIF0gKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gKiBGb3IgbW91c2Vkb3duIGV2ZW50cywgY2FuY2VsIHRoZSBkZWZhdWx0IGFjdGlvbiBpbiBvcmRlciB0b1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgIHByZXZlbnQgY2FzZXMgd2hlcmUgZm9jdXMgaXMgc2hpZnRlZCBvbnRvIGV4dGVybmFsIGVsZW1lbnRzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgd2hlbiB1c2luZyB0aGluZ3MgbGlrZSBqUXVlcnkgbW9iaWxlIG9yIE1hZ25pZmljUG9wdXAgKHJlZjogIzI0OSAmICMxMjApLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgIEFsc28sIGZvciBGaXJlZm94LCBkb27igJl0IHByZXZlbnQgYWN0aW9uIG9uIHRoZSBgb3B0aW9uYCBlbGVtZW50LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGV2ZW50LnR5cGUgPT0gJ21vdXNlZG93bicgJiYgISQoIHRhcmdldCApLmlzKCAnaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWEsIGJ1dHRvbiwgb3B0aW9uJyApKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlLWZvY3VzIG9udG8gdGhlIHJvb3Qgc28gdGhhdCB1c2VycyBjYW4gY2xpY2sgYXdheVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZnJvbSBlbGVtZW50cyBmb2N1c2VkIHdpdGhpbiB0aGUgcGlja2VyLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUC4kcm9vdC5lcSgwKS5mb2N1cygpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pLlxyXG5cclxuICAgICAgICAgICAgLy8gQWRkL3JlbW92ZSB0aGUg4oCcdGFyZ2V04oCdIGNsYXNzIG9uIGZvY3VzIGFuZCBibHVyLlxyXG4gICAgICAgICAgICBvbih7XHJcbiAgICAgICAgICAgICAgICBmb2N1czogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJEVMRU1FTlQuYWRkQ2xhc3MoIENMQVNTRVMudGFyZ2V0IClcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBibHVyOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAkRUxFTUVOVC5yZW1vdmVDbGFzcyggQ0xBU1NFUy50YXJnZXQgKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KS5cclxuXHJcbiAgICAgICAgICAgIC8vIE9wZW4gdGhlIHBpY2tlciBhbmQgYWRqdXN0IHRoZSByb290IOKAnGZvY3VzZWTigJ0gc3RhdGVcclxuICAgICAgICAgICAgb24oICdmb2N1cy50b09wZW4nLCBoYW5kbGVGb2N1c1RvT3BlbkV2ZW50ICkuXHJcblxyXG4gICAgICAgICAgICAvLyBJZiB0aGVyZeKAmXMgYSBjbGljayBvbiBhbiBhY3Rpb25hYmxlIGVsZW1lbnQsIGNhcnJ5IG91dCB0aGUgYWN0aW9ucy5cclxuICAgICAgICAgICAgb24oICdjbGljaycsICdbZGF0YS1waWNrXSwgW2RhdGEtbmF2XSwgW2RhdGEtY2xlYXJdLCBbZGF0YS1jbG9zZV0nLCBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgJHRhcmdldCA9ICQoIHRoaXMgKSxcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXREYXRhID0gJHRhcmdldC5kYXRhKCksXHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RGlzYWJsZWQgPSAkdGFyZ2V0Lmhhc0NsYXNzKCBDTEFTU0VTLm5hdkRpc2FibGVkICkgfHwgJHRhcmdldC5oYXNDbGFzcyggQ0xBU1NFUy5kaXNhYmxlZCApLFxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyAqIEZvciBJRSwgbm9uLWZvY3VzYWJsZSBlbGVtZW50cyBjYW4gYmUgYWN0aXZlIGVsZW1lbnRzIGFzIHdlbGxcclxuICAgICAgICAgICAgICAgICAgICAvLyAgIChodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yNjg0NTYxKS5cclxuICAgICAgICAgICAgICAgICAgICBhY3RpdmVFbGVtZW50ID0gZ2V0QWN0aXZlRWxlbWVudCgpXHJcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlRWxlbWVudCA9IGFjdGl2ZUVsZW1lbnQgJiYgKCBhY3RpdmVFbGVtZW50LnR5cGUgfHwgYWN0aXZlRWxlbWVudC5ocmVmIClcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBJZiBpdOKAmXMgZGlzYWJsZWQgb3Igbm90aGluZyBpbnNpZGUgaXMgYWN0aXZlbHkgZm9jdXNlZCwgcmUtZm9jdXMgdGhlIGVsZW1lbnQuXHJcbiAgICAgICAgICAgICAgICBpZiAoIHRhcmdldERpc2FibGVkIHx8IGFjdGl2ZUVsZW1lbnQgJiYgISQuY29udGFpbnMoIFAuJHJvb3RbMF0sIGFjdGl2ZUVsZW1lbnQgKSApIHtcclxuICAgICAgICAgICAgICAgICAgICBQLiRyb290LmVxKDApLmZvY3VzKClcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBJZiBzb21ldGhpbmcgaXMgc3VwZXJmaWNpYWxseSBjaGFuZ2VkLCB1cGRhdGUgdGhlIGBoaWdobGlnaHRgIGJhc2VkIG9uIHRoZSBgbmF2YC5cclxuICAgICAgICAgICAgICAgIGlmICggIXRhcmdldERpc2FibGVkICYmIHRhcmdldERhdGEubmF2ICkge1xyXG4gICAgICAgICAgICAgICAgICAgIFAuc2V0KCAnaGlnaGxpZ2h0JywgUC5jb21wb25lbnQuaXRlbS5oaWdobGlnaHQsIHsgbmF2OiB0YXJnZXREYXRhLm5hdiB9IClcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBJZiBzb21ldGhpbmcgaXMgcGlja2VkLCBzZXQgYHNlbGVjdGAgdGhlbiBjbG9zZSB3aXRoIGZvY3VzLlxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoICF0YXJnZXREaXNhYmxlZCAmJiAncGljaycgaW4gdGFyZ2V0RGF0YSApIHtcclxuICAgICAgICAgICAgICAgICAgICBQLnNldCggJ3NlbGVjdCcsIHRhcmdldERhdGEucGljayApXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gSWYgYSDigJxjbGVhcuKAnSBidXR0b24gaXMgcHJlc3NlZCwgZW1wdHkgdGhlIHZhbHVlcyBhbmQgY2xvc2Ugd2l0aCBmb2N1cy5cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCB0YXJnZXREYXRhLmNsZWFyICkge1xyXG4gICAgICAgICAgICAgICAgICAgIFAuY2xlYXIoKS5jbG9zZSggdHJ1ZSApXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoIHRhcmdldERhdGEuY2xvc2UgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgUC5jbG9zZSggdHJ1ZSApXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9KSAvL1AuJHJvb3RcclxuXHJcbiAgICAgICAgYXJpYSggUC4kcm9vdFswXSwgJ2hpZGRlbicsIHRydWUgKVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICAgLyoqXHJcbiAgICAgICogUHJlcGFyZSB0aGUgaGlkZGVuIGlucHV0IGVsZW1lbnQgYWxvbmcgd2l0aCBhbGwgYmluZGluZ3MuXHJcbiAgICAgICovXHJcbiAgICBmdW5jdGlvbiBwcmVwYXJlRWxlbWVudEhpZGRlbigpIHtcclxuXHJcbiAgICAgICAgdmFyIG5hbWVcclxuXHJcbiAgICAgICAgaWYgKCBTRVRUSU5HUy5oaWRkZW5OYW1lID09PSB0cnVlICkge1xyXG4gICAgICAgICAgICBuYW1lID0gRUxFTUVOVC5uYW1lXHJcbiAgICAgICAgICAgIEVMRU1FTlQubmFtZSA9ICcnXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBuYW1lID0gW1xyXG4gICAgICAgICAgICAgICAgdHlwZW9mIFNFVFRJTkdTLmhpZGRlblByZWZpeCA9PSAnc3RyaW5nJyA/IFNFVFRJTkdTLmhpZGRlblByZWZpeCA6ICcnLFxyXG4gICAgICAgICAgICAgICAgdHlwZW9mIFNFVFRJTkdTLmhpZGRlblN1ZmZpeCA9PSAnc3RyaW5nJyA/IFNFVFRJTkdTLmhpZGRlblN1ZmZpeCA6ICdfc3VibWl0J1xyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIG5hbWUgPSBuYW1lWzBdICsgRUxFTUVOVC5uYW1lICsgbmFtZVsxXVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgUC5faGlkZGVuID0gJChcclxuICAgICAgICAgICAgJzxpbnB1dCAnICtcclxuICAgICAgICAgICAgJ3R5cGU9aGlkZGVuICcgK1xyXG5cclxuICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBuYW1lIHVzaW5nIHRoZSBvcmlnaW5hbCBpbnB1dOKAmXMgd2l0aCBhIHByZWZpeCBhbmQgc3VmZml4LlxyXG4gICAgICAgICAgICAnbmFtZT1cIicgKyBuYW1lICsgJ1wiJyArXHJcblxyXG4gICAgICAgICAgICAvLyBJZiB0aGUgZWxlbWVudCBoYXMgYSB2YWx1ZSwgc2V0IHRoZSBoaWRkZW4gdmFsdWUgYXMgd2VsbC5cclxuICAgICAgICAgICAgKFxyXG4gICAgICAgICAgICAgICAgJEVMRU1FTlQuZGF0YSgndmFsdWUnKSB8fCBFTEVNRU5ULnZhbHVlID9cclxuICAgICAgICAgICAgICAgICAgICAnIHZhbHVlPVwiJyArIFAuZ2V0KCdzZWxlY3QnLCBTRVRUSU5HUy5mb3JtYXRTdWJtaXQpICsgJ1wiJyA6XHJcbiAgICAgICAgICAgICAgICAgICAgJydcclxuICAgICAgICAgICAgKSArXHJcbiAgICAgICAgICAgICc+J1xyXG4gICAgICAgIClbMF1cclxuXHJcbiAgICAgICAgJEVMRU1FTlQuXHJcblxyXG4gICAgICAgICAgICAvLyBJZiB0aGUgdmFsdWUgY2hhbmdlcywgdXBkYXRlIHRoZSBoaWRkZW4gaW5wdXQgd2l0aCB0aGUgY29ycmVjdCBmb3JtYXQuXHJcbiAgICAgICAgICAgIG9uKCdjaGFuZ2UuJyArIFNUQVRFLmlkLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIFAuX2hpZGRlbi52YWx1ZSA9IEVMRU1FTlQudmFsdWUgP1xyXG4gICAgICAgICAgICAgICAgICAgIFAuZ2V0KCdzZWxlY3QnLCBTRVRUSU5HUy5mb3JtYXRTdWJtaXQpIDpcclxuICAgICAgICAgICAgICAgICAgICAnJ1xyXG4gICAgICAgICAgICB9KVxyXG5cclxuXHJcbiAgICAgICAgLy8gSW5zZXJ0IHRoZSBoaWRkZW4gaW5wdXQgYXMgc3BlY2lmaWVkIGluIHRoZSBzZXR0aW5ncy5cclxuICAgICAgICBpZiAoIFNFVFRJTkdTLmNvbnRhaW5lciApICQoIFNFVFRJTkdTLmNvbnRhaW5lciApLmFwcGVuZCggUC5faGlkZGVuIClcclxuICAgICAgICBlbHNlICRFTEVNRU5ULmFmdGVyKCBQLl9oaWRkZW4gKVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvLyBGb3IgaU9TOC5cclxuICAgIGZ1bmN0aW9uIGhhbmRsZUtleWRvd25FdmVudCggZXZlbnQgKSB7XHJcblxyXG4gICAgICAgIHZhciBrZXljb2RlID0gZXZlbnQua2V5Q29kZSxcclxuXHJcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIG9uZSBvZiB0aGUgZGVsZXRlIGtleXMgd2FzIHByZXNzZWQuXHJcbiAgICAgICAgICAgIGlzS2V5Y29kZURlbGV0ZSA9IC9eKDh8NDYpJC8udGVzdChrZXljb2RlKVxyXG5cclxuICAgICAgICAvLyBGb3Igc29tZSByZWFzb24gSUUgY2xlYXJzIHRoZSBpbnB1dCB2YWx1ZSBvbiDigJxlc2NhcGXigJ0uXHJcbiAgICAgICAgaWYgKCBrZXljb2RlID09IDI3ICkge1xyXG4gICAgICAgICAgICBQLmNsb3NlKClcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBDaGVjayBpZiBgc3BhY2VgIG9yIGBkZWxldGVgIHdhcyBwcmVzc2VkIG9yIHRoZSBwaWNrZXIgaXMgY2xvc2VkIHdpdGggYSBrZXkgbW92ZW1lbnQuXHJcbiAgICAgICAgaWYgKCBrZXljb2RlID09IDMyIHx8IGlzS2V5Y29kZURlbGV0ZSB8fCAhU1RBVEUub3BlbiAmJiBQLmNvbXBvbmVudC5rZXlba2V5Y29kZV0gKSB7XHJcblxyXG4gICAgICAgICAgICAvLyBQcmV2ZW50IGl0IGZyb20gbW92aW5nIHRoZSBwYWdlIGFuZCBidWJibGluZyB0byBkb2MuXHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcclxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcclxuXHJcbiAgICAgICAgICAgIC8vIElmIGBkZWxldGVgIHdhcyBwcmVzc2VkLCBjbGVhciB0aGUgdmFsdWVzIGFuZCBjbG9zZSB0aGUgcGlja2VyLlxyXG4gICAgICAgICAgICAvLyBPdGhlcndpc2Ugb3BlbiB0aGUgcGlja2VyLlxyXG4gICAgICAgICAgICBpZiAoIGlzS2V5Y29kZURlbGV0ZSApIHsgUC5jbGVhcigpLmNsb3NlKCkgfVxyXG4gICAgICAgICAgICBlbHNlIHsgUC5vcGVuKCkgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgLy8gU2VwYXJhdGVkIGZvciBJRVxyXG4gICAgZnVuY3Rpb24gaGFuZGxlRm9jdXNUb09wZW5FdmVudCggZXZlbnQgKSB7XHJcblxyXG4gICAgICAgIC8vIFN0b3AgdGhlIGV2ZW50IGZyb20gcHJvcGFnYXRpbmcgdG8gdGhlIGRvYy5cclxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxyXG5cclxuICAgICAgICAvLyBJZiBpdOKAmXMgYSBmb2N1cyBldmVudCwgYWRkIHRoZSDigJxmb2N1c2Vk4oCdIGNsYXNzIHRvIHRoZSByb290LlxyXG4gICAgICAgIGlmICggZXZlbnQudHlwZSA9PSAnZm9jdXMnICkge1xyXG4gICAgICAgICAgICBQLiRyb290LmFkZENsYXNzKCBDTEFTU0VTLmZvY3VzZWQgKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQW5kIHRoZW4gZmluYWxseSBvcGVuIHRoZSBwaWNrZXIuXHJcbiAgICAgICAgUC5vcGVuKClcclxuICAgIH1cclxuXHJcblxyXG4gICAgLy8gUmV0dXJuIGEgbmV3IHBpY2tlciBpbnN0YW5jZS5cclxuICAgIHJldHVybiBuZXcgUGlja2VySW5zdGFuY2UoKVxyXG59IC8vUGlja2VyQ29uc3RydWN0b3JcclxuXHJcblxyXG5cclxuLyoqXHJcbiAqIFRoZSBkZWZhdWx0IGNsYXNzZXMgYW5kIHByZWZpeCB0byB1c2UgZm9yIHRoZSBIVE1MIGNsYXNzZXMuXHJcbiAqL1xyXG5QaWNrZXJDb25zdHJ1Y3Rvci5rbGFzc2VzID0gZnVuY3Rpb24oIHByZWZpeCApIHtcclxuICAgIHByZWZpeCA9IHByZWZpeCB8fCAncGlja2VyJ1xyXG4gICAgcmV0dXJuIHtcclxuXHJcbiAgICAgICAgcGlja2VyOiBwcmVmaXgsXHJcbiAgICAgICAgb3BlbmVkOiBwcmVmaXggKyAnLS1vcGVuZWQnLFxyXG4gICAgICAgIGZvY3VzZWQ6IHByZWZpeCArICctLWZvY3VzZWQnLFxyXG5cclxuICAgICAgICBpbnB1dDogcHJlZml4ICsgJ19faW5wdXQnLFxyXG4gICAgICAgIGFjdGl2ZTogcHJlZml4ICsgJ19faW5wdXQtLWFjdGl2ZScsXHJcbiAgICAgICAgdGFyZ2V0OiBwcmVmaXggKyAnX19pbnB1dC0tdGFyZ2V0JyxcclxuXHJcbiAgICAgICAgaG9sZGVyOiBwcmVmaXggKyAnX19ob2xkZXInLFxyXG5cclxuICAgICAgICBmcmFtZTogcHJlZml4ICsgJ19fZnJhbWUnLFxyXG4gICAgICAgIHdyYXA6IHByZWZpeCArICdfX3dyYXAnLFxyXG5cclxuICAgICAgICBib3g6IHByZWZpeCArICdfX2JveCdcclxuICAgIH1cclxufSAvL1BpY2tlckNvbnN0cnVjdG9yLmtsYXNzZXNcclxuXHJcblxyXG5cclxuLyoqXHJcbiAqIENoZWNrIGlmIHRoZSBkZWZhdWx0IHRoZW1lIGlzIGJlaW5nIHVzZWQuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc1VzaW5nRGVmYXVsdFRoZW1lKCBlbGVtZW50ICkge1xyXG5cclxuICAgIHZhciB0aGVtZSxcclxuICAgICAgICBwcm9wID0gJ3Bvc2l0aW9uJ1xyXG5cclxuICAgIC8vIEZvciBJRS5cclxuICAgIGlmICggZWxlbWVudC5jdXJyZW50U3R5bGUgKSB7XHJcbiAgICAgICAgdGhlbWUgPSBlbGVtZW50LmN1cnJlbnRTdHlsZVtwcm9wXVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEZvciBub3JtYWwgYnJvd3NlcnMuXHJcbiAgICBlbHNlIGlmICggd2luZG93LmdldENvbXB1dGVkU3R5bGUgKSB7XHJcbiAgICAgICAgdGhlbWUgPSBnZXRDb21wdXRlZFN0eWxlKCBlbGVtZW50IClbcHJvcF1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdGhlbWUgPT0gJ2ZpeGVkJ1xyXG59XHJcblxyXG5cclxuXHJcbi8qKlxyXG4gKiBHZXQgdGhlIHdpZHRoIG9mIHRoZSBicm93c2Vy4oCZcyBzY3JvbGxiYXIuXHJcbiAqIFRha2VuIGZyb206IGh0dHBzOi8vZ2l0aHViLmNvbS9Wb2RrYUJlYXJzL1JlbW9kYWwvYmxvYi9tYXN0ZXIvc3JjL2pxdWVyeS5yZW1vZGFsLmpzXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRTY3JvbGxiYXJXaWR0aCgpIHtcclxuXHJcbiAgICBpZiAoICRodG1sLmhlaWdodCgpIDw9ICR3aW5kb3cuaGVpZ2h0KCkgKSB7XHJcbiAgICAgICAgcmV0dXJuIDBcclxuICAgIH1cclxuXHJcbiAgICB2YXIgJG91dGVyID0gJCggJzxkaXYgc3R5bGU9XCJ2aXNpYmlsaXR5OmhpZGRlbjt3aWR0aDoxMDBweFwiIC8+JyApLlxyXG4gICAgICAgIGFwcGVuZFRvKCAnYm9keScgKVxyXG5cclxuICAgIC8vIEdldCB0aGUgd2lkdGggd2l0aG91dCBzY3JvbGxiYXJzLlxyXG4gICAgdmFyIHdpZHRoV2l0aG91dFNjcm9sbCA9ICRvdXRlclswXS5vZmZzZXRXaWR0aFxyXG5cclxuICAgIC8vIEZvcmNlIGFkZGluZyBzY3JvbGxiYXJzLlxyXG4gICAgJG91dGVyLmNzcyggJ292ZXJmbG93JywgJ3Njcm9sbCcgKVxyXG5cclxuICAgIC8vIEFkZCB0aGUgaW5uZXIgZGl2LlxyXG4gICAgdmFyICRpbm5lciA9ICQoICc8ZGl2IHN0eWxlPVwid2lkdGg6MTAwJVwiIC8+JyApLmFwcGVuZFRvKCAkb3V0ZXIgKVxyXG5cclxuICAgIC8vIEdldCB0aGUgd2lkdGggd2l0aCBzY3JvbGxiYXJzLlxyXG4gICAgdmFyIHdpZHRoV2l0aFNjcm9sbCA9ICRpbm5lclswXS5vZmZzZXRXaWR0aFxyXG5cclxuICAgIC8vIFJlbW92ZSB0aGUgZGl2cy5cclxuICAgICRvdXRlci5yZW1vdmUoKVxyXG5cclxuICAgIC8vIFJldHVybiB0aGUgZGlmZmVyZW5jZSBiZXR3ZWVuIHRoZSB3aWR0aHMuXHJcbiAgICByZXR1cm4gd2lkdGhXaXRob3V0U2Nyb2xsIC0gd2lkdGhXaXRoU2Nyb2xsXHJcbn1cclxuXHJcblxyXG5cclxuLyoqXHJcbiAqIFBpY2tlckNvbnN0cnVjdG9yIGhlbHBlciBtZXRob2RzLlxyXG4gKi9cclxuUGlja2VyQ29uc3RydWN0b3IuXyA9IHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZSBhIGdyb3VwIG9mIG5vZGVzLiBFeHBlY3RzOlxyXG4gICAgICogYFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbWluOiAgICB7SW50ZWdlcn0sXHJcbiAgICAgICAgICAgIG1heDogICAge0ludGVnZXJ9LFxyXG4gICAgICAgICAgICBpOiAgICAgIHtJbnRlZ2VyfSxcclxuICAgICAgICAgICAgbm9kZTogICB7U3RyaW5nfSxcclxuICAgICAgICAgICAgaXRlbTogICB7RnVuY3Rpb259XHJcbiAgICAgICAgfVxyXG4gICAgICogYFxyXG4gICAgICovXHJcbiAgICBncm91cDogZnVuY3Rpb24oIGdyb3VwT2JqZWN0ICkge1xyXG5cclxuICAgICAgICB2YXJcclxuICAgICAgICAgICAgLy8gU2NvcGUgZm9yIHRoZSBsb29wZWQgb2JqZWN0XHJcbiAgICAgICAgICAgIGxvb3BPYmplY3RTY29wZSxcclxuXHJcbiAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgbm9kZXMgbGlzdFxyXG4gICAgICAgICAgICBub2Rlc0xpc3QgPSAnJyxcclxuXHJcbiAgICAgICAgICAgIC8vIFRoZSBjb3VudGVyIHN0YXJ0cyBmcm9tIHRoZSBgbWluYFxyXG4gICAgICAgICAgICBjb3VudGVyID0gUGlja2VyQ29uc3RydWN0b3IuXy50cmlnZ2VyKCBncm91cE9iamVjdC5taW4sIGdyb3VwT2JqZWN0IClcclxuXHJcblxyXG4gICAgICAgIC8vIExvb3AgZnJvbSB0aGUgYG1pbmAgdG8gYG1heGAsIGluY3JlbWVudGluZyBieSBgaWBcclxuICAgICAgICBmb3IgKCA7IGNvdW50ZXIgPD0gUGlja2VyQ29uc3RydWN0b3IuXy50cmlnZ2VyKCBncm91cE9iamVjdC5tYXgsIGdyb3VwT2JqZWN0LCBbIGNvdW50ZXIgXSApOyBjb3VudGVyICs9IGdyb3VwT2JqZWN0LmkgKSB7XHJcblxyXG4gICAgICAgICAgICAvLyBUcmlnZ2VyIHRoZSBgaXRlbWAgZnVuY3Rpb24gd2l0aGluIHNjb3BlIG9mIHRoZSBvYmplY3RcclxuICAgICAgICAgICAgbG9vcE9iamVjdFNjb3BlID0gUGlja2VyQ29uc3RydWN0b3IuXy50cmlnZ2VyKCBncm91cE9iamVjdC5pdGVtLCBncm91cE9iamVjdCwgWyBjb3VudGVyIF0gKVxyXG5cclxuICAgICAgICAgICAgLy8gU3BsaWNlIHRoZSBzdWJncm91cCBhbmQgY3JlYXRlIG5vZGVzIG91dCBvZiB0aGUgc3ViIG5vZGVzXHJcbiAgICAgICAgICAgIG5vZGVzTGlzdCArPSBQaWNrZXJDb25zdHJ1Y3Rvci5fLm5vZGUoXHJcbiAgICAgICAgICAgICAgICBncm91cE9iamVjdC5ub2RlLFxyXG4gICAgICAgICAgICAgICAgbG9vcE9iamVjdFNjb3BlWyAwIF0sICAgLy8gdGhlIG5vZGVcclxuICAgICAgICAgICAgICAgIGxvb3BPYmplY3RTY29wZVsgMSBdLCAgIC8vIHRoZSBjbGFzc2VzXHJcbiAgICAgICAgICAgICAgICBsb29wT2JqZWN0U2NvcGVbIDIgXSAgICAvLyB0aGUgYXR0cmlidXRlc1xyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBSZXR1cm4gdGhlIGxpc3Qgb2Ygbm9kZXNcclxuICAgICAgICByZXR1cm4gbm9kZXNMaXN0XHJcbiAgICB9LCAvL2dyb3VwXHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIGEgZG9tIG5vZGUgc3RyaW5nXHJcbiAgICAgKi9cclxuICAgIG5vZGU6IGZ1bmN0aW9uKCB3cmFwcGVyLCBpdGVtLCBrbGFzcywgYXR0cmlidXRlICkge1xyXG5cclxuICAgICAgICAvLyBJZiB0aGUgaXRlbSBpcyBmYWxzZS15LCBqdXN0IHJldHVybiBhbiBlbXB0eSBzdHJpbmdcclxuICAgICAgICBpZiAoICFpdGVtICkgcmV0dXJuICcnXHJcblxyXG4gICAgICAgIC8vIElmIHRoZSBpdGVtIGlzIGFuIGFycmF5LCBkbyBhIGpvaW5cclxuICAgICAgICBpdGVtID0gJC5pc0FycmF5KCBpdGVtICkgPyBpdGVtLmpvaW4oICcnICkgOiBpdGVtXHJcblxyXG4gICAgICAgIC8vIENoZWNrIGZvciB0aGUgY2xhc3NcclxuICAgICAgICBrbGFzcyA9IGtsYXNzID8gJyBjbGFzcz1cIicgKyBrbGFzcyArICdcIicgOiAnJ1xyXG5cclxuICAgICAgICAvLyBDaGVjayBmb3IgYW55IGF0dHJpYnV0ZXNcclxuICAgICAgICBhdHRyaWJ1dGUgPSBhdHRyaWJ1dGUgPyAnICcgKyBhdHRyaWJ1dGUgOiAnJ1xyXG5cclxuICAgICAgICAvLyBSZXR1cm4gdGhlIHdyYXBwZWQgaXRlbVxyXG4gICAgICAgIHJldHVybiAnPCcgKyB3cmFwcGVyICsga2xhc3MgKyBhdHRyaWJ1dGUgKyAnPicgKyBpdGVtICsgJzwvJyArIHdyYXBwZXIgKyAnPidcclxuICAgIH0sIC8vbm9kZVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIExlYWQgbnVtYmVycyBiZWxvdyAxMCB3aXRoIGEgemVyby5cclxuICAgICAqL1xyXG4gICAgbGVhZDogZnVuY3Rpb24oIG51bWJlciApIHtcclxuICAgICAgICByZXR1cm4gKCBudW1iZXIgPCAxMCA/ICcwJzogJycgKSArIG51bWJlclxyXG4gICAgfSxcclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUcmlnZ2VyIGEgZnVuY3Rpb24gb3RoZXJ3aXNlIHJldHVybiB0aGUgdmFsdWUuXHJcbiAgICAgKi9cclxuICAgIHRyaWdnZXI6IGZ1bmN0aW9uKCBjYWxsYmFjaywgc2NvcGUsIGFyZ3MgKSB7XHJcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBjYWxsYmFjayA9PSAnZnVuY3Rpb24nID8gY2FsbGJhY2suYXBwbHkoIHNjb3BlLCBhcmdzIHx8IFtdICkgOiBjYWxsYmFja1xyXG4gICAgfSxcclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJZiB0aGUgc2Vjb25kIGNoYXJhY3RlciBpcyBhIGRpZ2l0LCBsZW5ndGggaXMgMiBvdGhlcndpc2UgMS5cclxuICAgICAqL1xyXG4gICAgZGlnaXRzOiBmdW5jdGlvbiggc3RyaW5nICkge1xyXG4gICAgICAgIHJldHVybiAoIC9cXGQvICkudGVzdCggc3RyaW5nWyAxIF0gKSA/IDIgOiAxXHJcbiAgICB9LFxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRlbGwgaWYgc29tZXRoaW5nIGlzIGEgZGF0ZSBvYmplY3QuXHJcbiAgICAgKi9cclxuICAgIGlzRGF0ZTogZnVuY3Rpb24oIHZhbHVlICkge1xyXG4gICAgICAgIHJldHVybiB7fS50b1N0cmluZy5jYWxsKCB2YWx1ZSApLmluZGV4T2YoICdEYXRlJyApID4gLTEgJiYgdGhpcy5pc0ludGVnZXIoIHZhbHVlLmdldERhdGUoKSApXHJcbiAgICB9LFxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRlbGwgaWYgc29tZXRoaW5nIGlzIGFuIGludGVnZXIuXHJcbiAgICAgKi9cclxuICAgIGlzSW50ZWdlcjogZnVuY3Rpb24oIHZhbHVlICkge1xyXG4gICAgICAgIHJldHVybiB7fS50b1N0cmluZy5jYWxsKCB2YWx1ZSApLmluZGV4T2YoICdOdW1iZXInICkgPiAtMSAmJiB2YWx1ZSAlIDEgPT09IDBcclxuICAgIH0sXHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIEFSSUEgYXR0cmlidXRlIHN0cmluZ3MuXHJcbiAgICAgKi9cclxuICAgIGFyaWFBdHRyOiBhcmlhQXR0clxyXG59IC8vUGlja2VyQ29uc3RydWN0b3IuX1xyXG5cclxuXHJcblxyXG4vKipcclxuICogRXh0ZW5kIHRoZSBwaWNrZXIgd2l0aCBhIGNvbXBvbmVudCBhbmQgZGVmYXVsdHMuXHJcbiAqL1xyXG5QaWNrZXJDb25zdHJ1Y3Rvci5leHRlbmQgPSBmdW5jdGlvbiggbmFtZSwgQ29tcG9uZW50ICkge1xyXG5cclxuICAgIC8vIEV4dGVuZCBqUXVlcnkuXHJcbiAgICAkLmZuWyBuYW1lIF0gPSBmdW5jdGlvbiggb3B0aW9ucywgYWN0aW9uICkge1xyXG5cclxuICAgICAgICAvLyBHcmFiIHRoZSBjb21wb25lbnQgZGF0YS5cclxuICAgICAgICB2YXIgY29tcG9uZW50RGF0YSA9IHRoaXMuZGF0YSggbmFtZSApXHJcblxyXG4gICAgICAgIC8vIElmIHRoZSBwaWNrZXIgaXMgcmVxdWVzdGVkLCByZXR1cm4gdGhlIGRhdGEgb2JqZWN0LlxyXG4gICAgICAgIGlmICggb3B0aW9ucyA9PSAncGlja2VyJyApIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbXBvbmVudERhdGFcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIElmIHRoZSBjb21wb25lbnQgZGF0YSBleGlzdHMgYW5kIGBvcHRpb25zYCBpcyBhIHN0cmluZywgY2Fycnkgb3V0IHRoZSBhY3Rpb24uXHJcbiAgICAgICAgaWYgKCBjb21wb25lbnREYXRhICYmIHR5cGVvZiBvcHRpb25zID09ICdzdHJpbmcnICkge1xyXG4gICAgICAgICAgICByZXR1cm4gUGlja2VyQ29uc3RydWN0b3IuXy50cmlnZ2VyKCBjb21wb25lbnREYXRhWyBvcHRpb25zIF0sIGNvbXBvbmVudERhdGEsIFsgYWN0aW9uIF0gKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gT3RoZXJ3aXNlIGdvIHRocm91Z2ggZWFjaCBtYXRjaGVkIGVsZW1lbnQgYW5kIGlmIHRoZSBjb21wb25lbnRcclxuICAgICAgICAvLyBkb2VzbuKAmXQgZXhpc3QsIGNyZWF0ZSBhIG5ldyBwaWNrZXIgdXNpbmcgYHRoaXNgIGVsZW1lbnRcclxuICAgICAgICAvLyBhbmQgbWVyZ2luZyB0aGUgZGVmYXVsdHMgYW5kIG9wdGlvbnMgd2l0aCBhIGRlZXAgY29weS5cclxuICAgICAgICByZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyICR0aGlzID0gJCggdGhpcyApXHJcbiAgICAgICAgICAgIGlmICggISR0aGlzLmRhdGEoIG5hbWUgKSApIHtcclxuICAgICAgICAgICAgICAgIG5ldyBQaWNrZXJDb25zdHJ1Y3RvciggdGhpcywgbmFtZSwgQ29tcG9uZW50LCBvcHRpb25zIClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgLy8gU2V0IHRoZSBkZWZhdWx0cy5cclxuICAgICQuZm5bIG5hbWUgXS5kZWZhdWx0cyA9IENvbXBvbmVudC5kZWZhdWx0c1xyXG59IC8vUGlja2VyQ29uc3RydWN0b3IuZXh0ZW5kXHJcblxyXG5cclxuXHJcbmZ1bmN0aW9uIGFyaWEoZWxlbWVudCwgYXR0cmlidXRlLCB2YWx1ZSkge1xyXG4gICAgaWYgKCAkLmlzUGxhaW5PYmplY3QoYXR0cmlidXRlKSApIHtcclxuICAgICAgICBmb3IgKCB2YXIga2V5IGluIGF0dHJpYnV0ZSApIHtcclxuICAgICAgICAgICAgYXJpYVNldChlbGVtZW50LCBrZXksIGF0dHJpYnV0ZVtrZXldKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGFyaWFTZXQoZWxlbWVudCwgYXR0cmlidXRlLCB2YWx1ZSlcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBhcmlhU2V0KGVsZW1lbnQsIGF0dHJpYnV0ZSwgdmFsdWUpIHtcclxuICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKFxyXG4gICAgICAgIChhdHRyaWJ1dGUgPT0gJ3JvbGUnID8gJycgOiAnYXJpYS0nKSArIGF0dHJpYnV0ZSxcclxuICAgICAgICB2YWx1ZVxyXG4gICAgKVxyXG59XHJcbmZ1bmN0aW9uIGFyaWFBdHRyKGF0dHJpYnV0ZSwgZGF0YSkge1xyXG4gICAgaWYgKCAhJC5pc1BsYWluT2JqZWN0KGF0dHJpYnV0ZSkgKSB7XHJcbiAgICAgICAgYXR0cmlidXRlID0geyBhdHRyaWJ1dGU6IGRhdGEgfVxyXG4gICAgfVxyXG4gICAgZGF0YSA9ICcnXHJcbiAgICBmb3IgKCB2YXIga2V5IGluIGF0dHJpYnV0ZSApIHtcclxuICAgICAgICB2YXIgYXR0ciA9IChrZXkgPT0gJ3JvbGUnID8gJycgOiAnYXJpYS0nKSArIGtleSxcclxuICAgICAgICAgICAgYXR0clZhbCA9IGF0dHJpYnV0ZVtrZXldXHJcbiAgICAgICAgZGF0YSArPSBhdHRyVmFsID09IG51bGwgPyAnJyA6IGF0dHIgKyAnPVwiJyArIGF0dHJpYnV0ZVtrZXldICsgJ1wiJ1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRhdGFcclxufVxyXG5cclxuLy8gSUU4IGJ1ZyB0aHJvd3MgYW4gZXJyb3IgZm9yIGFjdGl2ZUVsZW1lbnRzIHdpdGhpbiBpZnJhbWVzLlxyXG5mdW5jdGlvbiBnZXRBY3RpdmVFbGVtZW50KCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gZG9jdW1lbnQuYWN0aXZlRWxlbWVudFxyXG4gICAgfSBjYXRjaCAoIGVyciApIHsgfVxyXG59XHJcblxyXG5cclxuXHJcbi8vIEV4cG9zZSB0aGUgcGlja2VyIGNvbnN0cnVjdG9yLlxyXG5yZXR1cm4gUGlja2VyQ29uc3RydWN0b3JcclxuXHJcblxyXG59KSk7XHJcblxyXG5cclxuOy8qIVxyXG4gKiBEYXRlIHBpY2tlciBmb3IgcGlja2FkYXRlLmpzIHYzLjUuMFxyXG4gKiBodHRwOi8vYW1zdWwuZ2l0aHViLmlvL3BpY2thZGF0ZS5qcy9kYXRlLmh0bVxyXG4gKi9cclxuXHJcbihmdW5jdGlvbiAoIGZhY3RvcnkgKSB7XHJcblxyXG4gICAgLy8gQU1ELlxyXG4gICAgaWYgKCB0eXBlb2YgZGVmaW5lID09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCApXHJcbiAgICAgICAgZGVmaW5lKCBbJ3BpY2tlcicsICdqcXVlcnknXSwgZmFjdG9yeSApXHJcblxyXG4gICAgLy8gTm9kZS5qcy9icm93c2VyaWZ5LlxyXG4gICAgZWxzZSBpZiAoIHR5cGVvZiBleHBvcnRzID09ICdvYmplY3QnIClcclxuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoIHJlcXVpcmUoJy4vcGlja2VyLmpzJyksIHJlcXVpcmUoJ2pxdWVyeScpIClcclxuXHJcbiAgICAvLyBCcm93c2VyIGdsb2JhbHMuXHJcbiAgICBlbHNlIGZhY3RvcnkoIFBpY2tlciwgalF1ZXJ5IClcclxuXHJcbn0oZnVuY3Rpb24oIFBpY2tlciwgJCApIHtcclxuXHJcblxyXG4vKipcclxuICogR2xvYmFscyBhbmQgY29uc3RhbnRzXHJcbiAqL1xyXG52YXIgREFZU19JTl9XRUVLID0gNyxcclxuICAgIFdFRUtTX0lOX0NBTEVOREFSID0gNixcclxuICAgIF8gPSBQaWNrZXIuX1xyXG5cclxuXHJcblxyXG4vKipcclxuICogVGhlIGRhdGUgcGlja2VyIGNvbnN0cnVjdG9yXHJcbiAqL1xyXG5mdW5jdGlvbiBEYXRlUGlja2VyKCBwaWNrZXIsIHNldHRpbmdzICkge1xyXG5cclxuICAgIHZhciBjYWxlbmRhciA9IHRoaXMsXHJcbiAgICAgICAgZWxlbWVudCA9IHBpY2tlci4kbm9kZVsgMCBdLFxyXG4gICAgICAgIGVsZW1lbnRWYWx1ZSA9IGVsZW1lbnQudmFsdWUsXHJcbiAgICAgICAgZWxlbWVudERhdGFWYWx1ZSA9IHBpY2tlci4kbm9kZS5kYXRhKCAndmFsdWUnICksXHJcbiAgICAgICAgdmFsdWVTdHJpbmcgPSBlbGVtZW50RGF0YVZhbHVlIHx8IGVsZW1lbnRWYWx1ZSxcclxuICAgICAgICBmb3JtYXRTdHJpbmcgPSBlbGVtZW50RGF0YVZhbHVlID8gc2V0dGluZ3MuZm9ybWF0U3VibWl0IDogc2V0dGluZ3MuZm9ybWF0LFxyXG4gICAgICAgIGlzUlRMID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudC5jdXJyZW50U3R5bGUgP1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIEZvciBJRS5cclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuY3VycmVudFN0eWxlLmRpcmVjdGlvbiA9PSAncnRsJyA6XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gRm9yIG5vcm1hbCBicm93c2Vycy5cclxuICAgICAgICAgICAgICAgIGdldENvbXB1dGVkU3R5bGUoIHBpY2tlci4kcm9vdFswXSApLmRpcmVjdGlvbiA9PSAncnRsJ1xyXG4gICAgICAgIH1cclxuXHJcbiAgICBjYWxlbmRhci5zZXR0aW5ncyA9IHNldHRpbmdzXHJcbiAgICBjYWxlbmRhci4kbm9kZSA9IHBpY2tlci4kbm9kZVxyXG5cclxuICAgIC8vIFRoZSBxdWV1ZSBvZiBtZXRob2RzIHRoYXQgd2lsbCBiZSB1c2VkIHRvIGJ1aWxkIGl0ZW0gb2JqZWN0cy5cclxuICAgIGNhbGVuZGFyLnF1ZXVlID0ge1xyXG4gICAgICAgIG1pbjogJ21lYXN1cmUgY3JlYXRlJyxcclxuICAgICAgICBtYXg6ICdtZWFzdXJlIGNyZWF0ZScsXHJcbiAgICAgICAgbm93OiAnbm93IGNyZWF0ZScsXHJcbiAgICAgICAgc2VsZWN0OiAncGFyc2UgY3JlYXRlIHZhbGlkYXRlJyxcclxuICAgICAgICBoaWdobGlnaHQ6ICdwYXJzZSBuYXZpZ2F0ZSBjcmVhdGUgdmFsaWRhdGUnLFxyXG4gICAgICAgIHZpZXc6ICdwYXJzZSBjcmVhdGUgdmFsaWRhdGUgdmlld3NldCcsXHJcbiAgICAgICAgZGlzYWJsZTogJ2RlYWN0aXZhdGUnLFxyXG4gICAgICAgIGVuYWJsZTogJ2FjdGl2YXRlJ1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFRoZSBjb21wb25lbnQncyBpdGVtIG9iamVjdC5cclxuICAgIGNhbGVuZGFyLml0ZW0gPSB7fVxyXG5cclxuICAgIGNhbGVuZGFyLml0ZW0uY2xlYXIgPSBudWxsXHJcbiAgICBjYWxlbmRhci5pdGVtLmRpc2FibGUgPSAoIHNldHRpbmdzLmRpc2FibGUgfHwgW10gKS5zbGljZSggMCApXHJcbiAgICBjYWxlbmRhci5pdGVtLmVuYWJsZSA9IC0oZnVuY3Rpb24oIGNvbGxlY3Rpb25EaXNhYmxlZCApIHtcclxuICAgICAgICByZXR1cm4gY29sbGVjdGlvbkRpc2FibGVkWyAwIF0gPT09IHRydWUgPyBjb2xsZWN0aW9uRGlzYWJsZWQuc2hpZnQoKSA6IC0xXHJcbiAgICB9KSggY2FsZW5kYXIuaXRlbS5kaXNhYmxlIClcclxuXHJcbiAgICBjYWxlbmRhci5cclxuICAgICAgICBzZXQoICdtaW4nLCBzZXR0aW5ncy5taW4gKS5cclxuICAgICAgICBzZXQoICdtYXgnLCBzZXR0aW5ncy5tYXggKS5cclxuICAgICAgICBzZXQoICdub3cnIClcclxuXHJcbiAgICAvLyBXaGVuIHRoZXJl4oCZcyBhIHZhbHVlLCBzZXQgdGhlIGBzZWxlY3RgLCB3aGljaCBpbiB0dXJuXHJcbiAgICAvLyBhbHNvIHNldHMgdGhlIGBoaWdobGlnaHRgIGFuZCBgdmlld2AuXHJcbiAgICBpZiAoIHZhbHVlU3RyaW5nICkge1xyXG4gICAgICAgIGNhbGVuZGFyLnNldCggJ3NlbGVjdCcsIHZhbHVlU3RyaW5nLCB7IGZvcm1hdDogZm9ybWF0U3RyaW5nIH0pXHJcbiAgICB9XHJcblxyXG4gICAgLy8gSWYgdGhlcmXigJlzIG5vIHZhbHVlLCBkZWZhdWx0IHRvIGhpZ2hsaWdodGluZyDigJx0b2RheeKAnS5cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGNhbGVuZGFyLlxyXG4gICAgICAgICAgICBzZXQoICdzZWxlY3QnLCBudWxsICkuXHJcbiAgICAgICAgICAgIHNldCggJ2hpZ2hsaWdodCcsIGNhbGVuZGFyLml0ZW0ubm93IClcclxuICAgIH1cclxuXHJcblxyXG4gICAgLy8gVGhlIGtleWNvZGUgdG8gbW92ZW1lbnQgbWFwcGluZy5cclxuICAgIGNhbGVuZGFyLmtleSA9IHtcclxuICAgICAgICA0MDogNywgLy8gRG93blxyXG4gICAgICAgIDM4OiAtNywgLy8gVXBcclxuICAgICAgICAzOTogZnVuY3Rpb24oKSB7IHJldHVybiBpc1JUTCgpID8gLTEgOiAxIH0sIC8vIFJpZ2h0XHJcbiAgICAgICAgMzc6IGZ1bmN0aW9uKCkgeyByZXR1cm4gaXNSVEwoKSA/IDEgOiAtMSB9LCAvLyBMZWZ0XHJcbiAgICAgICAgZ286IGZ1bmN0aW9uKCB0aW1lQ2hhbmdlICkge1xyXG4gICAgICAgICAgICB2YXIgaGlnaGxpZ2h0ZWRPYmplY3QgPSBjYWxlbmRhci5pdGVtLmhpZ2hsaWdodCxcclxuICAgICAgICAgICAgICAgIHRhcmdldERhdGUgPSBuZXcgRGF0ZSggaGlnaGxpZ2h0ZWRPYmplY3QueWVhciwgaGlnaGxpZ2h0ZWRPYmplY3QubW9udGgsIGhpZ2hsaWdodGVkT2JqZWN0LmRhdGUgKyB0aW1lQ2hhbmdlIClcclxuICAgICAgICAgICAgY2FsZW5kYXIuc2V0KFxyXG4gICAgICAgICAgICAgICAgJ2hpZ2hsaWdodCcsXHJcbiAgICAgICAgICAgICAgICB0YXJnZXREYXRlLFxyXG4gICAgICAgICAgICAgICAgeyBpbnRlcnZhbDogdGltZUNoYW5nZSB9XHJcbiAgICAgICAgICAgIClcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXIoKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgLy8gQmluZCBzb21lIHBpY2tlciBldmVudHMuXHJcbiAgICBwaWNrZXIuXHJcbiAgICAgICAgb24oICdyZW5kZXInLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgcGlja2VyLiRyb290LmZpbmQoICcuJyArIHNldHRpbmdzLmtsYXNzLnNlbGVjdE1vbnRoICkub24oICdjaGFuZ2UnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IHRoaXMudmFsdWVcclxuICAgICAgICAgICAgICAgIGlmICggdmFsdWUgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGlja2VyLnNldCggJ2hpZ2hsaWdodCcsIFsgcGlja2VyLmdldCggJ3ZpZXcnICkueWVhciwgdmFsdWUsIHBpY2tlci5nZXQoICdoaWdobGlnaHQnICkuZGF0ZSBdIClcclxuICAgICAgICAgICAgICAgICAgICBwaWNrZXIuJHJvb3QuZmluZCggJy4nICsgc2V0dGluZ3Mua2xhc3Muc2VsZWN0TW9udGggKS50cmlnZ2VyKCAnZm9jdXMnIClcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgcGlja2VyLiRyb290LmZpbmQoICcuJyArIHNldHRpbmdzLmtsYXNzLnNlbGVjdFllYXIgKS5vbiggJ2NoYW5nZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy52YWx1ZVxyXG4gICAgICAgICAgICAgICAgaWYgKCB2YWx1ZSApIHtcclxuICAgICAgICAgICAgICAgICAgICBwaWNrZXIuc2V0KCAnaGlnaGxpZ2h0JywgWyB2YWx1ZSwgcGlja2VyLmdldCggJ3ZpZXcnICkubW9udGgsIHBpY2tlci5nZXQoICdoaWdobGlnaHQnICkuZGF0ZSBdIClcclxuICAgICAgICAgICAgICAgICAgICBwaWNrZXIuJHJvb3QuZmluZCggJy4nICsgc2V0dGluZ3Mua2xhc3Muc2VsZWN0WWVhciApLnRyaWdnZXIoICdmb2N1cycgKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0sIDEgKS5cclxuICAgICAgICBvbiggJ29wZW4nLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIGluY2x1ZGVUb2RheSA9ICcnXHJcbiAgICAgICAgICAgIGlmICggY2FsZW5kYXIuZGlzYWJsZWQoIGNhbGVuZGFyLmdldCgnbm93JykgKSApIHtcclxuICAgICAgICAgICAgICAgIGluY2x1ZGVUb2RheSA9ICc6bm90KC4nICsgc2V0dGluZ3Mua2xhc3MuYnV0dG9uVG9kYXkgKyAnKSdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBwaWNrZXIuJHJvb3QuZmluZCggJ2J1dHRvbicgKyBpbmNsdWRlVG9kYXkgKyAnLCBzZWxlY3QnICkuYXR0ciggJ2Rpc2FibGVkJywgZmFsc2UgKVxyXG4gICAgICAgIH0sIDEgKS5cclxuICAgICAgICBvbiggJ2Nsb3NlJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHBpY2tlci4kcm9vdC5maW5kKCAnYnV0dG9uLCBzZWxlY3QnICkuYXR0ciggJ2Rpc2FibGVkJywgdHJ1ZSApXHJcbiAgICAgICAgfSwgMSApXHJcblxyXG59IC8vRGF0ZVBpY2tlclxyXG5cclxuXHJcbi8qKlxyXG4gKiBTZXQgYSBkYXRlcGlja2VyIGl0ZW0gb2JqZWN0LlxyXG4gKi9cclxuRGF0ZVBpY2tlci5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24oIHR5cGUsIHZhbHVlLCBvcHRpb25zICkge1xyXG5cclxuICAgIHZhciBjYWxlbmRhciA9IHRoaXMsXHJcbiAgICAgICAgY2FsZW5kYXJJdGVtID0gY2FsZW5kYXIuaXRlbVxyXG5cclxuICAgIC8vIElmIHRoZSB2YWx1ZSBpcyBgbnVsbGAganVzdCBzZXQgaXQgaW1tZWRpYXRlbHkuXHJcbiAgICBpZiAoIHZhbHVlID09PSBudWxsICkge1xyXG4gICAgICAgIGlmICggdHlwZSA9PSAnY2xlYXInICkgdHlwZSA9ICdzZWxlY3QnXHJcbiAgICAgICAgY2FsZW5kYXJJdGVtWyB0eXBlIF0gPSB2YWx1ZVxyXG4gICAgICAgIHJldHVybiBjYWxlbmRhclxyXG4gICAgfVxyXG5cclxuICAgIC8vIE90aGVyd2lzZSBnbyB0aHJvdWdoIHRoZSBxdWV1ZSBvZiBtZXRob2RzLCBhbmQgaW52b2tlIHRoZSBmdW5jdGlvbnMuXHJcbiAgICAvLyBVcGRhdGUgdGhpcyBhcyB0aGUgdGltZSB1bml0LCBhbmQgc2V0IHRoZSBmaW5hbCB2YWx1ZSBhcyB0aGlzIGl0ZW0uXHJcbiAgICAvLyAqIEluIHRoZSBjYXNlIG9mIGBlbmFibGVgLCBrZWVwIHRoZSBxdWV1ZSBidXQgc2V0IGBkaXNhYmxlYCBpbnN0ZWFkLlxyXG4gICAgLy8gICBBbmQgaW4gdGhlIGNhc2Ugb2YgYGZsaXBgLCBrZWVwIHRoZSBxdWV1ZSBidXQgc2V0IGBlbmFibGVgIGluc3RlYWQuXHJcbiAgICBjYWxlbmRhckl0ZW1bICggdHlwZSA9PSAnZW5hYmxlJyA/ICdkaXNhYmxlJyA6IHR5cGUgPT0gJ2ZsaXAnID8gJ2VuYWJsZScgOiB0eXBlICkgXSA9IGNhbGVuZGFyLnF1ZXVlWyB0eXBlIF0uc3BsaXQoICcgJyApLm1hcCggZnVuY3Rpb24oIG1ldGhvZCApIHtcclxuICAgICAgICB2YWx1ZSA9IGNhbGVuZGFyWyBtZXRob2QgXSggdHlwZSwgdmFsdWUsIG9wdGlvbnMgKVxyXG4gICAgICAgIHJldHVybiB2YWx1ZVxyXG4gICAgfSkucG9wKClcclxuXHJcbiAgICAvLyBDaGVjayBpZiB3ZSBuZWVkIHRvIGNhc2NhZGUgdGhyb3VnaCBtb3JlIHVwZGF0ZXMuXHJcbiAgICBpZiAoIHR5cGUgPT0gJ3NlbGVjdCcgKSB7XHJcbiAgICAgICAgY2FsZW5kYXIuc2V0KCAnaGlnaGxpZ2h0JywgY2FsZW5kYXJJdGVtLnNlbGVjdCwgb3B0aW9ucyApXHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICggdHlwZSA9PSAnaGlnaGxpZ2h0JyApIHtcclxuICAgICAgICBjYWxlbmRhci5zZXQoICd2aWV3JywgY2FsZW5kYXJJdGVtLmhpZ2hsaWdodCwgb3B0aW9ucyApXHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICggdHlwZS5tYXRjaCggL14oZmxpcHxtaW58bWF4fGRpc2FibGV8ZW5hYmxlKSQvICkgKSB7XHJcbiAgICAgICAgaWYgKCBjYWxlbmRhckl0ZW0uc2VsZWN0ICYmIGNhbGVuZGFyLmRpc2FibGVkKCBjYWxlbmRhckl0ZW0uc2VsZWN0ICkgKSB7XHJcbiAgICAgICAgICAgIGNhbGVuZGFyLnNldCggJ3NlbGVjdCcsIGNhbGVuZGFySXRlbS5zZWxlY3QsIG9wdGlvbnMgKVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIGNhbGVuZGFySXRlbS5oaWdobGlnaHQgJiYgY2FsZW5kYXIuZGlzYWJsZWQoIGNhbGVuZGFySXRlbS5oaWdobGlnaHQgKSApIHtcclxuICAgICAgICAgICAgY2FsZW5kYXIuc2V0KCAnaGlnaGxpZ2h0JywgY2FsZW5kYXJJdGVtLmhpZ2hsaWdodCwgb3B0aW9ucyApXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBjYWxlbmRhclxyXG59IC8vRGF0ZVBpY2tlci5wcm90b3R5cGUuc2V0XHJcblxyXG5cclxuLyoqXHJcbiAqIEdldCBhIGRhdGVwaWNrZXIgaXRlbSBvYmplY3QuXHJcbiAqL1xyXG5EYXRlUGlja2VyLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiggdHlwZSApIHtcclxuICAgIHJldHVybiB0aGlzLml0ZW1bIHR5cGUgXVxyXG59IC8vRGF0ZVBpY2tlci5wcm90b3R5cGUuZ2V0XHJcblxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZSBhIHBpY2tlciBkYXRlIG9iamVjdC5cclxuICovXHJcbkRhdGVQaWNrZXIucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uKCB0eXBlLCB2YWx1ZSwgb3B0aW9ucyApIHtcclxuXHJcbiAgICB2YXIgaXNJbmZpbml0ZVZhbHVlLFxyXG4gICAgICAgIGNhbGVuZGFyID0gdGhpc1xyXG5cclxuICAgIC8vIElmIHRoZXJl4oCZcyBubyB2YWx1ZSwgdXNlIHRoZSB0eXBlIGFzIHRoZSB2YWx1ZS5cclxuICAgIHZhbHVlID0gdmFsdWUgPT09IHVuZGVmaW5lZCA/IHR5cGUgOiB2YWx1ZVxyXG5cclxuXHJcbiAgICAvLyBJZiBpdOKAmXMgaW5maW5pdHksIHVwZGF0ZSB0aGUgdmFsdWUuXHJcbiAgICBpZiAoIHZhbHVlID09IC1JbmZpbml0eSB8fCB2YWx1ZSA9PSBJbmZpbml0eSApIHtcclxuICAgICAgICBpc0luZmluaXRlVmFsdWUgPSB2YWx1ZVxyXG4gICAgfVxyXG5cclxuICAgIC8vIElmIGl04oCZcyBhbiBvYmplY3QsIHVzZSB0aGUgbmF0aXZlIGRhdGUgb2JqZWN0LlxyXG4gICAgZWxzZSBpZiAoICQuaXNQbGFpbk9iamVjdCggdmFsdWUgKSAmJiBfLmlzSW50ZWdlciggdmFsdWUucGljayApICkge1xyXG4gICAgICAgIHZhbHVlID0gdmFsdWUub2JqXHJcbiAgICB9XHJcblxyXG4gICAgLy8gSWYgaXTigJlzIGFuIGFycmF5LCBjb252ZXJ0IGl0IGludG8gYSBkYXRlIGFuZCBtYWtlIHN1cmVcclxuICAgIC8vIHRoYXQgaXTigJlzIGEgdmFsaWQgZGF0ZSDigJMgb3RoZXJ3aXNlIGRlZmF1bHQgdG8gdG9kYXkuXHJcbiAgICBlbHNlIGlmICggJC5pc0FycmF5KCB2YWx1ZSApICkge1xyXG4gICAgICAgIHZhbHVlID0gbmV3IERhdGUoIHZhbHVlWyAwIF0sIHZhbHVlWyAxIF0sIHZhbHVlWyAyIF0gKVxyXG4gICAgICAgIHZhbHVlID0gXy5pc0RhdGUoIHZhbHVlICkgPyB2YWx1ZSA6IGNhbGVuZGFyLmNyZWF0ZSgpLm9ialxyXG4gICAgfVxyXG5cclxuICAgIC8vIElmIGl04oCZcyBhIG51bWJlciBvciBkYXRlIG9iamVjdCwgbWFrZSBhIG5vcm1hbGl6ZWQgZGF0ZS5cclxuICAgIGVsc2UgaWYgKCBfLmlzSW50ZWdlciggdmFsdWUgKSB8fCBfLmlzRGF0ZSggdmFsdWUgKSApIHtcclxuICAgICAgICB2YWx1ZSA9IGNhbGVuZGFyLm5vcm1hbGl6ZSggbmV3IERhdGUoIHZhbHVlICksIG9wdGlvbnMgKVxyXG4gICAgfVxyXG5cclxuICAgIC8vIElmIGl04oCZcyBhIGxpdGVyYWwgdHJ1ZSBvciBhbnkgb3RoZXIgY2FzZSwgc2V0IGl0IHRvIG5vdy5cclxuICAgIGVsc2UgLyppZiAoIHZhbHVlID09PSB0cnVlICkqLyB7XHJcbiAgICAgICAgdmFsdWUgPSBjYWxlbmRhci5ub3coIHR5cGUsIHZhbHVlLCBvcHRpb25zIClcclxuICAgIH1cclxuXHJcbiAgICAvLyBSZXR1cm4gdGhlIGNvbXBpbGVkIG9iamVjdC5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgeWVhcjogaXNJbmZpbml0ZVZhbHVlIHx8IHZhbHVlLmdldEZ1bGxZZWFyKCksXHJcbiAgICAgICAgbW9udGg6IGlzSW5maW5pdGVWYWx1ZSB8fCB2YWx1ZS5nZXRNb250aCgpLFxyXG4gICAgICAgIGRhdGU6IGlzSW5maW5pdGVWYWx1ZSB8fCB2YWx1ZS5nZXREYXRlKCksXHJcbiAgICAgICAgZGF5OiBpc0luZmluaXRlVmFsdWUgfHwgdmFsdWUuZ2V0RGF5KCksXHJcbiAgICAgICAgb2JqOiBpc0luZmluaXRlVmFsdWUgfHwgdmFsdWUsXHJcbiAgICAgICAgcGljazogaXNJbmZpbml0ZVZhbHVlIHx8IHZhbHVlLmdldFRpbWUoKVxyXG4gICAgfVxyXG59IC8vRGF0ZVBpY2tlci5wcm90b3R5cGUuY3JlYXRlXHJcblxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZSBhIHJhbmdlIGxpbWl0IG9iamVjdCB1c2luZyBhbiBhcnJheSwgZGF0ZSBvYmplY3QsXHJcbiAqIGxpdGVyYWwg4oCcdHJ1ZeKAnSwgb3IgaW50ZWdlciByZWxhdGl2ZSB0byBhbm90aGVyIHRpbWUuXHJcbiAqL1xyXG5EYXRlUGlja2VyLnByb3RvdHlwZS5jcmVhdGVSYW5nZSA9IGZ1bmN0aW9uKCBmcm9tLCB0byApIHtcclxuXHJcbiAgICB2YXIgY2FsZW5kYXIgPSB0aGlzLFxyXG4gICAgICAgIGNyZWF0ZURhdGUgPSBmdW5jdGlvbiggZGF0ZSApIHtcclxuICAgICAgICAgICAgaWYgKCBkYXRlID09PSB0cnVlIHx8ICQuaXNBcnJheSggZGF0ZSApIHx8IF8uaXNEYXRlKCBkYXRlICkgKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsZW5kYXIuY3JlYXRlKCBkYXRlIClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZGF0ZVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAvLyBDcmVhdGUgb2JqZWN0cyBpZiBwb3NzaWJsZS5cclxuICAgIGlmICggIV8uaXNJbnRlZ2VyKCBmcm9tICkgKSB7XHJcbiAgICAgICAgZnJvbSA9IGNyZWF0ZURhdGUoIGZyb20gKVxyXG4gICAgfVxyXG4gICAgaWYgKCAhXy5pc0ludGVnZXIoIHRvICkgKSB7XHJcbiAgICAgICAgdG8gPSBjcmVhdGVEYXRlKCB0byApXHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ3JlYXRlIHJlbGF0aXZlIGRhdGVzLlxyXG4gICAgaWYgKCBfLmlzSW50ZWdlciggZnJvbSApICYmICQuaXNQbGFpbk9iamVjdCggdG8gKSApIHtcclxuICAgICAgICBmcm9tID0gWyB0by55ZWFyLCB0by5tb250aCwgdG8uZGF0ZSArIGZyb20gXTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKCBfLmlzSW50ZWdlciggdG8gKSAmJiAkLmlzUGxhaW5PYmplY3QoIGZyb20gKSApIHtcclxuICAgICAgICB0byA9IFsgZnJvbS55ZWFyLCBmcm9tLm1vbnRoLCBmcm9tLmRhdGUgKyB0byBdO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgZnJvbTogY3JlYXRlRGF0ZSggZnJvbSApLFxyXG4gICAgICAgIHRvOiBjcmVhdGVEYXRlKCB0byApXHJcbiAgICB9XHJcbn0gLy9EYXRlUGlja2VyLnByb3RvdHlwZS5jcmVhdGVSYW5nZVxyXG5cclxuXHJcbi8qKlxyXG4gKiBDaGVjayBpZiBhIGRhdGUgdW5pdCBmYWxscyB3aXRoaW4gYSBkYXRlIHJhbmdlIG9iamVjdC5cclxuICovXHJcbkRhdGVQaWNrZXIucHJvdG90eXBlLndpdGhpblJhbmdlID0gZnVuY3Rpb24oIHJhbmdlLCBkYXRlVW5pdCApIHtcclxuICAgIHJhbmdlID0gdGhpcy5jcmVhdGVSYW5nZShyYW5nZS5mcm9tLCByYW5nZS50bylcclxuICAgIHJldHVybiBkYXRlVW5pdC5waWNrID49IHJhbmdlLmZyb20ucGljayAmJiBkYXRlVW5pdC5waWNrIDw9IHJhbmdlLnRvLnBpY2tcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBDaGVjayBpZiB0d28gZGF0ZSByYW5nZSBvYmplY3RzIG92ZXJsYXAuXHJcbiAqL1xyXG5EYXRlUGlja2VyLnByb3RvdHlwZS5vdmVybGFwUmFuZ2VzID0gZnVuY3Rpb24oIG9uZSwgdHdvICkge1xyXG5cclxuICAgIHZhciBjYWxlbmRhciA9IHRoaXNcclxuXHJcbiAgICAvLyBDb252ZXJ0IHRoZSByYW5nZXMgaW50byBjb21wYXJhYmxlIGRhdGVzLlxyXG4gICAgb25lID0gY2FsZW5kYXIuY3JlYXRlUmFuZ2UoIG9uZS5mcm9tLCBvbmUudG8gKVxyXG4gICAgdHdvID0gY2FsZW5kYXIuY3JlYXRlUmFuZ2UoIHR3by5mcm9tLCB0d28udG8gKVxyXG5cclxuICAgIHJldHVybiBjYWxlbmRhci53aXRoaW5SYW5nZSggb25lLCB0d28uZnJvbSApIHx8IGNhbGVuZGFyLndpdGhpblJhbmdlKCBvbmUsIHR3by50byApIHx8XHJcbiAgICAgICAgY2FsZW5kYXIud2l0aGluUmFuZ2UoIHR3bywgb25lLmZyb20gKSB8fCBjYWxlbmRhci53aXRoaW5SYW5nZSggdHdvLCBvbmUudG8gKVxyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIEdldCB0aGUgZGF0ZSB0b2RheS5cclxuICovXHJcbkRhdGVQaWNrZXIucHJvdG90eXBlLm5vdyA9IGZ1bmN0aW9uKCB0eXBlLCB2YWx1ZSwgb3B0aW9ucyApIHtcclxuICAgIHZhbHVlID0gbmV3IERhdGUoKVxyXG4gICAgaWYgKCBvcHRpb25zICYmIG9wdGlvbnMucmVsICkge1xyXG4gICAgICAgIHZhbHVlLnNldERhdGUoIHZhbHVlLmdldERhdGUoKSArIG9wdGlvbnMucmVsIClcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLm5vcm1hbGl6ZSggdmFsdWUsIG9wdGlvbnMgKVxyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIE5hdmlnYXRlIHRvIG5leHQvcHJldiBtb250aC5cclxuICovXHJcbkRhdGVQaWNrZXIucHJvdG90eXBlLm5hdmlnYXRlID0gZnVuY3Rpb24oIHR5cGUsIHZhbHVlLCBvcHRpb25zICkge1xyXG5cclxuICAgIHZhciB0YXJnZXREYXRlT2JqZWN0LFxyXG4gICAgICAgIHRhcmdldFllYXIsXHJcbiAgICAgICAgdGFyZ2V0TW9udGgsXHJcbiAgICAgICAgdGFyZ2V0RGF0ZSxcclxuICAgICAgICBpc1RhcmdldEFycmF5ID0gJC5pc0FycmF5KCB2YWx1ZSApLFxyXG4gICAgICAgIGlzVGFyZ2V0T2JqZWN0ID0gJC5pc1BsYWluT2JqZWN0KCB2YWx1ZSApLFxyXG4gICAgICAgIHZpZXdzZXRPYmplY3QgPSB0aGlzLml0ZW0udmlldy8qLFxyXG4gICAgICAgIHNhZmV0eSA9IDEwMCovXHJcblxyXG5cclxuICAgIGlmICggaXNUYXJnZXRBcnJheSB8fCBpc1RhcmdldE9iamVjdCApIHtcclxuXHJcbiAgICAgICAgaWYgKCBpc1RhcmdldE9iamVjdCApIHtcclxuICAgICAgICAgICAgdGFyZ2V0WWVhciA9IHZhbHVlLnllYXJcclxuICAgICAgICAgICAgdGFyZ2V0TW9udGggPSB2YWx1ZS5tb250aFxyXG4gICAgICAgICAgICB0YXJnZXREYXRlID0gdmFsdWUuZGF0ZVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGFyZ2V0WWVhciA9ICt2YWx1ZVswXVxyXG4gICAgICAgICAgICB0YXJnZXRNb250aCA9ICt2YWx1ZVsxXVxyXG4gICAgICAgICAgICB0YXJnZXREYXRlID0gK3ZhbHVlWzJdXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBJZiB3ZeKAmXJlIG5hdmlnYXRpbmcgbW9udGhzIGJ1dCB0aGUgdmlldyBpcyBpbiBhIGRpZmZlcmVudFxyXG4gICAgICAgIC8vIG1vbnRoLCBuYXZpZ2F0ZSB0byB0aGUgdmlld+KAmXMgeWVhciBhbmQgbW9udGguXHJcbiAgICAgICAgaWYgKCBvcHRpb25zICYmIG9wdGlvbnMubmF2ICYmIHZpZXdzZXRPYmplY3QgJiYgdmlld3NldE9iamVjdC5tb250aCAhPT0gdGFyZ2V0TW9udGggKSB7XHJcbiAgICAgICAgICAgIHRhcmdldFllYXIgPSB2aWV3c2V0T2JqZWN0LnllYXJcclxuICAgICAgICAgICAgdGFyZ2V0TW9udGggPSB2aWV3c2V0T2JqZWN0Lm1vbnRoXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBGaWd1cmUgb3V0IHRoZSBleHBlY3RlZCB0YXJnZXQgeWVhciBhbmQgbW9udGguXHJcbiAgICAgICAgdGFyZ2V0RGF0ZU9iamVjdCA9IG5ldyBEYXRlKCB0YXJnZXRZZWFyLCB0YXJnZXRNb250aCArICggb3B0aW9ucyAmJiBvcHRpb25zLm5hdiA/IG9wdGlvbnMubmF2IDogMCApLCAxIClcclxuICAgICAgICB0YXJnZXRZZWFyID0gdGFyZ2V0RGF0ZU9iamVjdC5nZXRGdWxsWWVhcigpXHJcbiAgICAgICAgdGFyZ2V0TW9udGggPSB0YXJnZXREYXRlT2JqZWN0LmdldE1vbnRoKClcclxuXHJcbiAgICAgICAgLy8gSWYgdGhlIG1vbnRoIHdl4oCZcmUgZ29pbmcgdG8gZG9lc27igJl0IGhhdmUgZW5vdWdoIGRheXMsXHJcbiAgICAgICAgLy8ga2VlcCBkZWNyZWFzaW5nIHRoZSBkYXRlIHVudGlsIHdlIHJlYWNoIHRoZSBtb250aOKAmXMgbGFzdCBkYXRlLlxyXG4gICAgICAgIHdoaWxlICggLypzYWZldHkgJiYqLyBuZXcgRGF0ZSggdGFyZ2V0WWVhciwgdGFyZ2V0TW9udGgsIHRhcmdldERhdGUgKS5nZXRNb250aCgpICE9PSB0YXJnZXRNb250aCApIHtcclxuICAgICAgICAgICAgdGFyZ2V0RGF0ZSAtPSAxXHJcbiAgICAgICAgICAgIC8qc2FmZXR5IC09IDFcclxuICAgICAgICAgICAgaWYgKCAhc2FmZXR5ICkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgJ0ZlbGwgaW50byBhbiBpbmZpbml0ZSBsb29wIHdoaWxlIG5hdmlnYXRpbmcgdG8gJyArIG5ldyBEYXRlKCB0YXJnZXRZZWFyLCB0YXJnZXRNb250aCwgdGFyZ2V0RGF0ZSApICsgJy4nXHJcbiAgICAgICAgICAgIH0qL1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFsdWUgPSBbIHRhcmdldFllYXIsIHRhcmdldE1vbnRoLCB0YXJnZXREYXRlIF1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdmFsdWVcclxufSAvL0RhdGVQaWNrZXIucHJvdG90eXBlLm5hdmlnYXRlXHJcblxyXG5cclxuLyoqXHJcbiAqIE5vcm1hbGl6ZSBhIGRhdGUgYnkgc2V0dGluZyB0aGUgaG91cnMgdG8gbWlkbmlnaHQuXHJcbiAqL1xyXG5EYXRlUGlja2VyLnByb3RvdHlwZS5ub3JtYWxpemUgPSBmdW5jdGlvbiggdmFsdWUvKiwgb3B0aW9ucyovICkge1xyXG4gICAgdmFsdWUuc2V0SG91cnMoIDAsIDAsIDAsIDAgKVxyXG4gICAgcmV0dXJuIHZhbHVlXHJcbn1cclxuXHJcblxyXG4vKipcclxuICogTWVhc3VyZSB0aGUgcmFuZ2Ugb2YgZGF0ZXMuXHJcbiAqL1xyXG5EYXRlUGlja2VyLnByb3RvdHlwZS5tZWFzdXJlID0gZnVuY3Rpb24oIHR5cGUsIHZhbHVlLyosIG9wdGlvbnMqLyApIHtcclxuXHJcbiAgICB2YXIgY2FsZW5kYXIgPSB0aGlzXHJcblxyXG4gICAgLy8gSWYgaXTigJlzIGFueXRoaW5nIGZhbHNlLXksIHJlbW92ZSB0aGUgbGltaXRzLlxyXG4gICAgaWYgKCAhdmFsdWUgKSB7XHJcbiAgICAgICAgdmFsdWUgPSB0eXBlID09ICdtaW4nID8gLUluZmluaXR5IDogSW5maW5pdHlcclxuICAgIH1cclxuXHJcbiAgICAvLyBJZiBpdOKAmXMgYSBzdHJpbmcsIHBhcnNlIGl0LlxyXG4gICAgZWxzZSBpZiAoIHR5cGVvZiB2YWx1ZSA9PSAnc3RyaW5nJyApIHtcclxuICAgICAgICB2YWx1ZSA9IGNhbGVuZGFyLnBhcnNlKCB0eXBlLCB2YWx1ZSApXHJcbiAgICB9XHJcblxyXG4gICAgLy8gSWYgaXQncyBhbiBpbnRlZ2VyLCBnZXQgYSBkYXRlIHJlbGF0aXZlIHRvIHRvZGF5LlxyXG4gICAgZWxzZSBpZiAoIF8uaXNJbnRlZ2VyKCB2YWx1ZSApICkge1xyXG4gICAgICAgIHZhbHVlID0gY2FsZW5kYXIubm93KCB0eXBlLCB2YWx1ZSwgeyByZWw6IHZhbHVlIH0gKVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB2YWx1ZVxyXG59IC8vL0RhdGVQaWNrZXIucHJvdG90eXBlLm1lYXN1cmVcclxuXHJcblxyXG4vKipcclxuICogQ3JlYXRlIGEgdmlld3NldCBvYmplY3QgYmFzZWQgb24gbmF2aWdhdGlvbi5cclxuICovXHJcbkRhdGVQaWNrZXIucHJvdG90eXBlLnZpZXdzZXQgPSBmdW5jdGlvbiggdHlwZSwgZGF0ZU9iamVjdC8qLCBvcHRpb25zKi8gKSB7XHJcbiAgICByZXR1cm4gdGhpcy5jcmVhdGUoWyBkYXRlT2JqZWN0LnllYXIsIGRhdGVPYmplY3QubW9udGgsIDEgXSlcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBWYWxpZGF0ZSBhIGRhdGUgYXMgZW5hYmxlZCBhbmQgc2hpZnQgaWYgbmVlZGVkLlxyXG4gKi9cclxuRGF0ZVBpY2tlci5wcm90b3R5cGUudmFsaWRhdGUgPSBmdW5jdGlvbiggdHlwZSwgZGF0ZU9iamVjdCwgb3B0aW9ucyApIHtcclxuXHJcbiAgICB2YXIgY2FsZW5kYXIgPSB0aGlzLFxyXG5cclxuICAgICAgICAvLyBLZWVwIGEgcmVmZXJlbmNlIHRvIHRoZSBvcmlnaW5hbCBkYXRlLlxyXG4gICAgICAgIG9yaWdpbmFsRGF0ZU9iamVjdCA9IGRhdGVPYmplY3QsXHJcblxyXG4gICAgICAgIC8vIE1ha2Ugc3VyZSB3ZSBoYXZlIGFuIGludGVydmFsLlxyXG4gICAgICAgIGludGVydmFsID0gb3B0aW9ucyAmJiBvcHRpb25zLmludGVydmFsID8gb3B0aW9ucy5pbnRlcnZhbCA6IDEsXHJcblxyXG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSBjYWxlbmRhciBlbmFibGVkIGRhdGVzIGFyZSBpbnZlcnRlZC5cclxuICAgICAgICBpc0ZsaXBwZWRCYXNlID0gY2FsZW5kYXIuaXRlbS5lbmFibGUgPT09IC0xLFxyXG5cclxuICAgICAgICAvLyBDaGVjayBpZiB3ZSBoYXZlIGFueSBlbmFibGVkIGRhdGVzIGFmdGVyL2JlZm9yZSBub3cuXHJcbiAgICAgICAgaGFzRW5hYmxlZEJlZm9yZVRhcmdldCwgaGFzRW5hYmxlZEFmdGVyVGFyZ2V0LFxyXG5cclxuICAgICAgICAvLyBUaGUgbWluICYgbWF4IGxpbWl0cy5cclxuICAgICAgICBtaW5MaW1pdE9iamVjdCA9IGNhbGVuZGFyLml0ZW0ubWluLFxyXG4gICAgICAgIG1heExpbWl0T2JqZWN0ID0gY2FsZW5kYXIuaXRlbS5tYXgsXHJcblxyXG4gICAgICAgIC8vIENoZWNrIGlmIHdl4oCZdmUgcmVhY2hlZCB0aGUgbGltaXQgZHVyaW5nIHNoaWZ0aW5nLlxyXG4gICAgICAgIHJlYWNoZWRNaW4sIHJlYWNoZWRNYXgsXHJcblxyXG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSBjYWxlbmRhciBpcyBpbnZlcnRlZCBhbmQgYXQgbGVhc3Qgb25lIHdlZWtkYXkgaXMgZW5hYmxlZC5cclxuICAgICAgICBoYXNFbmFibGVkV2Vla2RheXMgPSBpc0ZsaXBwZWRCYXNlICYmIGNhbGVuZGFyLml0ZW0uZGlzYWJsZS5maWx0ZXIoIGZ1bmN0aW9uKCB2YWx1ZSApIHtcclxuXHJcbiAgICAgICAgICAgIC8vIElmIHRoZXJl4oCZcyBhIGRhdGUsIGNoZWNrIHdoZXJlIGl0IGlzIHJlbGF0aXZlIHRvIHRoZSB0YXJnZXQuXHJcbiAgICAgICAgICAgIGlmICggJC5pc0FycmF5KCB2YWx1ZSApICkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGVUaW1lID0gY2FsZW5kYXIuY3JlYXRlKCB2YWx1ZSApLnBpY2tcclxuICAgICAgICAgICAgICAgIGlmICggZGF0ZVRpbWUgPCBkYXRlT2JqZWN0LnBpY2sgKSBoYXNFbmFibGVkQmVmb3JlVGFyZ2V0ID0gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoIGRhdGVUaW1lID4gZGF0ZU9iamVjdC5waWNrICkgaGFzRW5hYmxlZEFmdGVyVGFyZ2V0ID0gdHJ1ZVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBSZXR1cm4gb25seSBpbnRlZ2VycyBmb3IgZW5hYmxlZCB3ZWVrZGF5cy5cclxuICAgICAgICAgICAgcmV0dXJuIF8uaXNJbnRlZ2VyKCB2YWx1ZSApXHJcbiAgICAgICAgfSkubGVuZ3RoLyosXHJcblxyXG4gICAgICAgIHNhZmV0eSA9IDEwMCovXHJcblxyXG5cclxuXHJcbiAgICAvLyBDYXNlcyB0byB2YWxpZGF0ZSBmb3I6XHJcbiAgICAvLyBbMV0gTm90IGludmVydGVkIGFuZCBkYXRlIGRpc2FibGVkLlxyXG4gICAgLy8gWzJdIEludmVydGVkIGFuZCBzb21lIGRhdGVzIGVuYWJsZWQuXHJcbiAgICAvLyBbM10gTm90IGludmVydGVkIGFuZCBvdXQgb2YgcmFuZ2UuXHJcbiAgICAvL1xyXG4gICAgLy8gQ2FzZXMgdG8gKipub3QqKiB2YWxpZGF0ZSBmb3I6XHJcbiAgICAvLyDigKIgTmF2aWdhdGluZyBtb250aHMuXHJcbiAgICAvLyDigKIgTm90IGludmVydGVkIGFuZCBkYXRlIGVuYWJsZWQuXHJcbiAgICAvLyDigKIgSW52ZXJ0ZWQgYW5kIGFsbCBkYXRlcyBkaXNhYmxlZC5cclxuICAgIC8vIOKAoiAuLmFuZCBhbnl0aGluZyBlbHNlLlxyXG4gICAgaWYgKCAhb3B0aW9ucyB8fCAhb3B0aW9ucy5uYXYgKSBpZiAoXHJcbiAgICAgICAgLyogMSAqLyAoICFpc0ZsaXBwZWRCYXNlICYmIGNhbGVuZGFyLmRpc2FibGVkKCBkYXRlT2JqZWN0ICkgKSB8fFxyXG4gICAgICAgIC8qIDIgKi8gKCBpc0ZsaXBwZWRCYXNlICYmIGNhbGVuZGFyLmRpc2FibGVkKCBkYXRlT2JqZWN0ICkgJiYgKCBoYXNFbmFibGVkV2Vla2RheXMgfHwgaGFzRW5hYmxlZEJlZm9yZVRhcmdldCB8fCBoYXNFbmFibGVkQWZ0ZXJUYXJnZXQgKSApIHx8XHJcbiAgICAgICAgLyogMyAqLyAoICFpc0ZsaXBwZWRCYXNlICYmIChkYXRlT2JqZWN0LnBpY2sgPD0gbWluTGltaXRPYmplY3QucGljayB8fCBkYXRlT2JqZWN0LnBpY2sgPj0gbWF4TGltaXRPYmplY3QucGljaykgKVxyXG4gICAgKSB7XHJcblxyXG5cclxuICAgICAgICAvLyBXaGVuIGludmVydGVkLCBmbGlwIHRoZSBkaXJlY3Rpb24gaWYgdGhlcmUgYXJlbuKAmXQgYW55IGVuYWJsZWQgd2Vla2RheXNcclxuICAgICAgICAvLyBhbmQgdGhlcmUgYXJlIG5vIGVuYWJsZWQgZGF0ZXMgaW4gdGhlIGRpcmVjdGlvbiBvZiB0aGUgaW50ZXJ2YWwuXHJcbiAgICAgICAgaWYgKCBpc0ZsaXBwZWRCYXNlICYmICFoYXNFbmFibGVkV2Vla2RheXMgJiYgKCAoICFoYXNFbmFibGVkQWZ0ZXJUYXJnZXQgJiYgaW50ZXJ2YWwgPiAwICkgfHwgKCAhaGFzRW5hYmxlZEJlZm9yZVRhcmdldCAmJiBpbnRlcnZhbCA8IDAgKSApICkge1xyXG4gICAgICAgICAgICBpbnRlcnZhbCAqPSAtMVxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIC8vIEtlZXAgbG9vcGluZyB1bnRpbCB3ZSByZWFjaCBhbiBlbmFibGVkIGRhdGUuXHJcbiAgICAgICAgd2hpbGUgKCAvKnNhZmV0eSAmJiovIGNhbGVuZGFyLmRpc2FibGVkKCBkYXRlT2JqZWN0ICkgKSB7XHJcblxyXG4gICAgICAgICAgICAvKnNhZmV0eSAtPSAxXHJcbiAgICAgICAgICAgIGlmICggIXNhZmV0eSApIHtcclxuICAgICAgICAgICAgICAgIHRocm93ICdGZWxsIGludG8gYW4gaW5maW5pdGUgbG9vcCB3aGlsZSB2YWxpZGF0aW5nICcgKyBkYXRlT2JqZWN0Lm9iaiArICcuJ1xyXG4gICAgICAgICAgICB9Ki9cclxuXHJcblxyXG4gICAgICAgICAgICAvLyBJZiB3ZeKAmXZlIGxvb3BlZCBpbnRvIHRoZSBuZXh0L3ByZXYgbW9udGggd2l0aCBhIGxhcmdlIGludGVydmFsLCByZXR1cm4gdG8gdGhlIG9yaWdpbmFsIGRhdGUgYW5kIGZsYXR0ZW4gdGhlIGludGVydmFsLlxyXG4gICAgICAgICAgICBpZiAoIE1hdGguYWJzKCBpbnRlcnZhbCApID4gMSAmJiAoIGRhdGVPYmplY3QubW9udGggPCBvcmlnaW5hbERhdGVPYmplY3QubW9udGggfHwgZGF0ZU9iamVjdC5tb250aCA+IG9yaWdpbmFsRGF0ZU9iamVjdC5tb250aCApICkge1xyXG4gICAgICAgICAgICAgICAgZGF0ZU9iamVjdCA9IG9yaWdpbmFsRGF0ZU9iamVjdFxyXG4gICAgICAgICAgICAgICAgaW50ZXJ2YWwgPSBpbnRlcnZhbCA+IDAgPyAxIDogLTFcclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgIC8vIElmIHdl4oCZdmUgcmVhY2hlZCB0aGUgbWluL21heCBsaW1pdCwgcmV2ZXJzZSB0aGUgZGlyZWN0aW9uLCBmbGF0dGVuIHRoZSBpbnRlcnZhbCBhbmQgc2V0IGl0IHRvIHRoZSBsaW1pdC5cclxuICAgICAgICAgICAgaWYgKCBkYXRlT2JqZWN0LnBpY2sgPD0gbWluTGltaXRPYmplY3QucGljayApIHtcclxuICAgICAgICAgICAgICAgIHJlYWNoZWRNaW4gPSB0cnVlXHJcbiAgICAgICAgICAgICAgICBpbnRlcnZhbCA9IDFcclxuICAgICAgICAgICAgICAgIGRhdGVPYmplY3QgPSBjYWxlbmRhci5jcmVhdGUoW1xyXG4gICAgICAgICAgICAgICAgICAgIG1pbkxpbWl0T2JqZWN0LnllYXIsXHJcbiAgICAgICAgICAgICAgICAgICAgbWluTGltaXRPYmplY3QubW9udGgsXHJcbiAgICAgICAgICAgICAgICAgICAgbWluTGltaXRPYmplY3QuZGF0ZSArIChkYXRlT2JqZWN0LnBpY2sgPT09IG1pbkxpbWl0T2JqZWN0LnBpY2sgPyAwIDogLTEpXHJcbiAgICAgICAgICAgICAgICBdKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKCBkYXRlT2JqZWN0LnBpY2sgPj0gbWF4TGltaXRPYmplY3QucGljayApIHtcclxuICAgICAgICAgICAgICAgIHJlYWNoZWRNYXggPSB0cnVlXHJcbiAgICAgICAgICAgICAgICBpbnRlcnZhbCA9IC0xXHJcbiAgICAgICAgICAgICAgICBkYXRlT2JqZWN0ID0gY2FsZW5kYXIuY3JlYXRlKFtcclxuICAgICAgICAgICAgICAgICAgICBtYXhMaW1pdE9iamVjdC55ZWFyLFxyXG4gICAgICAgICAgICAgICAgICAgIG1heExpbWl0T2JqZWN0Lm1vbnRoLFxyXG4gICAgICAgICAgICAgICAgICAgIG1heExpbWl0T2JqZWN0LmRhdGUgKyAoZGF0ZU9iamVjdC5waWNrID09PSBtYXhMaW1pdE9iamVjdC5waWNrID8gMCA6IDEpXHJcbiAgICAgICAgICAgICAgICBdKVxyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgLy8gSWYgd2XigJl2ZSByZWFjaGVkIGJvdGggbGltaXRzLCBqdXN0IGJyZWFrIG91dCBvZiB0aGUgbG9vcC5cclxuICAgICAgICAgICAgaWYgKCByZWFjaGVkTWluICYmIHJlYWNoZWRNYXggKSB7XHJcbiAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgLy8gRmluYWxseSwgY3JlYXRlIHRoZSBzaGlmdGVkIGRhdGUgdXNpbmcgdGhlIGludGVydmFsIGFuZCBrZWVwIGxvb3BpbmcuXHJcbiAgICAgICAgICAgIGRhdGVPYmplY3QgPSBjYWxlbmRhci5jcmVhdGUoWyBkYXRlT2JqZWN0LnllYXIsIGRhdGVPYmplY3QubW9udGgsIGRhdGVPYmplY3QuZGF0ZSArIGludGVydmFsIF0pXHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0gLy9lbmRpZlxyXG5cclxuXHJcbiAgICAvLyBSZXR1cm4gdGhlIGRhdGUgb2JqZWN0IHNldHRsZWQgb24uXHJcbiAgICByZXR1cm4gZGF0ZU9iamVjdFxyXG59IC8vRGF0ZVBpY2tlci5wcm90b3R5cGUudmFsaWRhdGVcclxuXHJcblxyXG4vKipcclxuICogQ2hlY2sgaWYgYSBkYXRlIGlzIGRpc2FibGVkLlxyXG4gKi9cclxuRGF0ZVBpY2tlci5wcm90b3R5cGUuZGlzYWJsZWQgPSBmdW5jdGlvbiggZGF0ZVRvVmVyaWZ5ICkge1xyXG5cclxuICAgIHZhclxyXG4gICAgICAgIGNhbGVuZGFyID0gdGhpcyxcclxuXHJcbiAgICAgICAgLy8gRmlsdGVyIHRocm91Z2ggdGhlIGRpc2FibGVkIGRhdGVzIHRvIGNoZWNrIGlmIHRoaXMgaXMgb25lLlxyXG4gICAgICAgIGlzRGlzYWJsZWRNYXRjaCA9IGNhbGVuZGFyLml0ZW0uZGlzYWJsZS5maWx0ZXIoIGZ1bmN0aW9uKCBkYXRlVG9EaXNhYmxlICkge1xyXG5cclxuICAgICAgICAgICAgLy8gSWYgdGhlIGRhdGUgaXMgYSBudW1iZXIsIG1hdGNoIHRoZSB3ZWVrZGF5IHdpdGggMGluZGV4IGFuZCBgZmlyc3REYXlgIGNoZWNrLlxyXG4gICAgICAgICAgICBpZiAoIF8uaXNJbnRlZ2VyKCBkYXRlVG9EaXNhYmxlICkgKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0ZVRvVmVyaWZ5LmRheSA9PT0gKCBjYWxlbmRhci5zZXR0aW5ncy5maXJzdERheSA/IGRhdGVUb0Rpc2FibGUgOiBkYXRlVG9EaXNhYmxlIC0gMSApICUgN1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBJZiBpdOKAmXMgYW4gYXJyYXkgb3IgYSBuYXRpdmUgSlMgZGF0ZSwgY3JlYXRlIGFuZCBtYXRjaCB0aGUgZXhhY3QgZGF0ZS5cclxuICAgICAgICAgICAgaWYgKCAkLmlzQXJyYXkoIGRhdGVUb0Rpc2FibGUgKSB8fCBfLmlzRGF0ZSggZGF0ZVRvRGlzYWJsZSApICkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGVUb1ZlcmlmeS5waWNrID09PSBjYWxlbmRhci5jcmVhdGUoIGRhdGVUb0Rpc2FibGUgKS5waWNrXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIElmIGl04oCZcyBhbiBvYmplY3QsIG1hdGNoIGEgZGF0ZSB3aXRoaW4gdGhlIOKAnGZyb23igJ0gYW5kIOKAnHRv4oCdIHJhbmdlLlxyXG4gICAgICAgICAgICBpZiAoICQuaXNQbGFpbk9iamVjdCggZGF0ZVRvRGlzYWJsZSApICkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGVuZGFyLndpdGhpblJhbmdlKCBkYXRlVG9EaXNhYmxlLCBkYXRlVG9WZXJpZnkgKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAvLyBJZiB0aGlzIGRhdGUgbWF0Y2hlcyBhIGRpc2FibGVkIGRhdGUsIGNvbmZpcm0gaXTigJlzIG5vdCBpbnZlcnRlZC5cclxuICAgIGlzRGlzYWJsZWRNYXRjaCA9IGlzRGlzYWJsZWRNYXRjaC5sZW5ndGggJiYgIWlzRGlzYWJsZWRNYXRjaC5maWx0ZXIoZnVuY3Rpb24oIGRhdGVUb0Rpc2FibGUgKSB7XHJcbiAgICAgICAgcmV0dXJuICQuaXNBcnJheSggZGF0ZVRvRGlzYWJsZSApICYmIGRhdGVUb0Rpc2FibGVbM10gPT0gJ2ludmVydGVkJyB8fFxyXG4gICAgICAgICAgICAkLmlzUGxhaW5PYmplY3QoIGRhdGVUb0Rpc2FibGUgKSAmJiBkYXRlVG9EaXNhYmxlLmludmVydGVkXHJcbiAgICB9KS5sZW5ndGhcclxuXHJcbiAgICAvLyBDaGVjayB0aGUgY2FsZW5kYXIg4oCcZW5hYmxlZOKAnSBmbGFnIGFuZCByZXNwZWN0aXZlbHkgZmxpcCB0aGVcclxuICAgIC8vIGRpc2FibGVkIHN0YXRlLiBUaGVuIGFsc28gY2hlY2sgaWYgaXTigJlzIGJleW9uZCB0aGUgbWluL21heCBsaW1pdHMuXHJcbiAgICByZXR1cm4gY2FsZW5kYXIuaXRlbS5lbmFibGUgPT09IC0xID8gIWlzRGlzYWJsZWRNYXRjaCA6IGlzRGlzYWJsZWRNYXRjaCB8fFxyXG4gICAgICAgIGRhdGVUb1ZlcmlmeS5waWNrIDwgY2FsZW5kYXIuaXRlbS5taW4ucGljayB8fFxyXG4gICAgICAgIGRhdGVUb1ZlcmlmeS5waWNrID4gY2FsZW5kYXIuaXRlbS5tYXgucGlja1xyXG5cclxufSAvL0RhdGVQaWNrZXIucHJvdG90eXBlLmRpc2FibGVkXHJcblxyXG5cclxuLyoqXHJcbiAqIFBhcnNlIGEgc3RyaW5nIGludG8gYSB1c2FibGUgdHlwZS5cclxuICovXHJcbkRhdGVQaWNrZXIucHJvdG90eXBlLnBhcnNlID0gZnVuY3Rpb24oIHR5cGUsIHZhbHVlLCBvcHRpb25zICkge1xyXG5cclxuICAgIHZhciBjYWxlbmRhciA9IHRoaXMsXHJcbiAgICAgICAgcGFyc2luZ09iamVjdCA9IHt9XHJcblxyXG4gICAgLy8gSWYgaXTigJlzIGFscmVhZHkgcGFyc2VkLCB3ZeKAmXJlIGdvb2QuXHJcbiAgICBpZiAoICF2YWx1ZSB8fCB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycgKSB7XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlXHJcbiAgICB9XHJcblxyXG4gICAgLy8gV2UgbmVlZCBhIGAuZm9ybWF0YCB0byBwYXJzZSB0aGUgdmFsdWUgd2l0aC5cclxuICAgIGlmICggISggb3B0aW9ucyAmJiBvcHRpb25zLmZvcm1hdCApICkge1xyXG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9XHJcbiAgICAgICAgb3B0aW9ucy5mb3JtYXQgPSBjYWxlbmRhci5zZXR0aW5ncy5mb3JtYXRcclxuICAgIH1cclxuXHJcbiAgICAvLyBDb252ZXJ0IHRoZSBmb3JtYXQgaW50byBhbiBhcnJheSBhbmQgdGhlbiBtYXAgdGhyb3VnaCBpdC5cclxuICAgIGNhbGVuZGFyLmZvcm1hdHMudG9BcnJheSggb3B0aW9ucy5mb3JtYXQgKS5tYXAoIGZ1bmN0aW9uKCBsYWJlbCApIHtcclxuXHJcbiAgICAgICAgdmFyXHJcbiAgICAgICAgICAgIC8vIEdyYWIgdGhlIGZvcm1hdHRpbmcgbGFiZWwuXHJcbiAgICAgICAgICAgIGZvcm1hdHRpbmdMYWJlbCA9IGNhbGVuZGFyLmZvcm1hdHNbIGxhYmVsIF0sXHJcblxyXG4gICAgICAgICAgICAvLyBUaGUgZm9ybWF0IGxlbmd0aCBpcyBmcm9tIHRoZSBmb3JtYXR0aW5nIGxhYmVsIGZ1bmN0aW9uIG9yIHRoZVxyXG4gICAgICAgICAgICAvLyBsYWJlbCBsZW5ndGggd2l0aG91dCB0aGUgZXNjYXBpbmcgZXhjbGFtYXRpb24gKCEpIG1hcmsuXHJcbiAgICAgICAgICAgIGZvcm1hdExlbmd0aCA9IGZvcm1hdHRpbmdMYWJlbCA/IF8udHJpZ2dlciggZm9ybWF0dGluZ0xhYmVsLCBjYWxlbmRhciwgWyB2YWx1ZSwgcGFyc2luZ09iamVjdCBdICkgOiBsYWJlbC5yZXBsYWNlKCAvXiEvLCAnJyApLmxlbmd0aFxyXG5cclxuICAgICAgICAvLyBJZiB0aGVyZSdzIGEgZm9ybWF0IGxhYmVsLCBzcGxpdCB0aGUgdmFsdWUgdXAgdG8gdGhlIGZvcm1hdCBsZW5ndGguXHJcbiAgICAgICAgLy8gVGhlbiBhZGQgaXQgdG8gdGhlIHBhcnNpbmcgb2JqZWN0IHdpdGggYXBwcm9wcmlhdGUgbGFiZWwuXHJcbiAgICAgICAgaWYgKCBmb3JtYXR0aW5nTGFiZWwgKSB7XHJcbiAgICAgICAgICAgIHBhcnNpbmdPYmplY3RbIGxhYmVsIF0gPSB2YWx1ZS5zdWJzdHIoIDAsIGZvcm1hdExlbmd0aCApXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBVcGRhdGUgdGhlIHZhbHVlIGFzIHRoZSBzdWJzdHJpbmcgZnJvbSBmb3JtYXQgbGVuZ3RoIHRvIGVuZC5cclxuICAgICAgICB2YWx1ZSA9IHZhbHVlLnN1YnN0ciggZm9ybWF0TGVuZ3RoIClcclxuICAgIH0pXHJcblxyXG4gICAgLy8gQ29tcGVuc2F0ZSBmb3IgbW9udGggMGluZGV4LlxyXG4gICAgcmV0dXJuIFtcclxuICAgICAgICBwYXJzaW5nT2JqZWN0Lnl5eXkgfHwgcGFyc2luZ09iamVjdC55eSxcclxuICAgICAgICArKCBwYXJzaW5nT2JqZWN0Lm1tIHx8IHBhcnNpbmdPYmplY3QubSApIC0gMSxcclxuICAgICAgICBwYXJzaW5nT2JqZWN0LmRkIHx8IHBhcnNpbmdPYmplY3QuZFxyXG4gICAgXVxyXG59IC8vRGF0ZVBpY2tlci5wcm90b3R5cGUucGFyc2VcclxuXHJcblxyXG4vKipcclxuICogVmFyaW91cyBmb3JtYXRzIHRvIGRpc3BsYXkgdGhlIG9iamVjdCBpbi5cclxuICovXHJcbkRhdGVQaWNrZXIucHJvdG90eXBlLmZvcm1hdHMgPSAoZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgLy8gUmV0dXJuIHRoZSBsZW5ndGggb2YgdGhlIGZpcnN0IHdvcmQgaW4gYSBjb2xsZWN0aW9uLlxyXG4gICAgZnVuY3Rpb24gZ2V0V29yZExlbmd0aEZyb21Db2xsZWN0aW9uKCBzdHJpbmcsIGNvbGxlY3Rpb24sIGRhdGVPYmplY3QgKSB7XHJcblxyXG4gICAgICAgIC8vIEdyYWIgdGhlIGZpcnN0IHdvcmQgZnJvbSB0aGUgc3RyaW5nLlxyXG4gICAgICAgIHZhciB3b3JkID0gc3RyaW5nLm1hdGNoKCAvXFx3Ky8gKVsgMCBdXHJcblxyXG4gICAgICAgIC8vIElmIHRoZXJlJ3Mgbm8gbW9udGggaW5kZXgsIGFkZCBpdCB0byB0aGUgZGF0ZSBvYmplY3RcclxuICAgICAgICBpZiAoICFkYXRlT2JqZWN0Lm1tICYmICFkYXRlT2JqZWN0Lm0gKSB7XHJcbiAgICAgICAgICAgIGRhdGVPYmplY3QubSA9IGNvbGxlY3Rpb24uaW5kZXhPZiggd29yZCApICsgMVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUmV0dXJuIHRoZSBsZW5ndGggb2YgdGhlIHdvcmQuXHJcbiAgICAgICAgcmV0dXJuIHdvcmQubGVuZ3RoXHJcbiAgICB9XHJcblxyXG4gICAgLy8gR2V0IHRoZSBsZW5ndGggb2YgdGhlIGZpcnN0IHdvcmQgaW4gYSBzdHJpbmcuXHJcbiAgICBmdW5jdGlvbiBnZXRGaXJzdFdvcmRMZW5ndGgoIHN0cmluZyApIHtcclxuICAgICAgICByZXR1cm4gc3RyaW5nLm1hdGNoKCAvXFx3Ky8gKVsgMCBdLmxlbmd0aFxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7XHJcblxyXG4gICAgICAgIGQ6IGZ1bmN0aW9uKCBzdHJpbmcsIGRhdGVPYmplY3QgKSB7XHJcblxyXG4gICAgICAgICAgICAvLyBJZiB0aGVyZSdzIHN0cmluZywgdGhlbiBnZXQgdGhlIGRpZ2l0cyBsZW5ndGguXHJcbiAgICAgICAgICAgIC8vIE90aGVyd2lzZSByZXR1cm4gdGhlIHNlbGVjdGVkIGRhdGUuXHJcbiAgICAgICAgICAgIHJldHVybiBzdHJpbmcgPyBfLmRpZ2l0cyggc3RyaW5nICkgOiBkYXRlT2JqZWN0LmRhdGVcclxuICAgICAgICB9LFxyXG4gICAgICAgIGRkOiBmdW5jdGlvbiggc3RyaW5nLCBkYXRlT2JqZWN0ICkge1xyXG5cclxuICAgICAgICAgICAgLy8gSWYgdGhlcmUncyBhIHN0cmluZywgdGhlbiB0aGUgbGVuZ3RoIGlzIGFsd2F5cyAyLlxyXG4gICAgICAgICAgICAvLyBPdGhlcndpc2UgcmV0dXJuIHRoZSBzZWxlY3RlZCBkYXRlIHdpdGggYSBsZWFkaW5nIHplcm8uXHJcbiAgICAgICAgICAgIHJldHVybiBzdHJpbmcgPyAyIDogXy5sZWFkKCBkYXRlT2JqZWN0LmRhdGUgKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZGRkOiBmdW5jdGlvbiggc3RyaW5nLCBkYXRlT2JqZWN0ICkge1xyXG5cclxuICAgICAgICAgICAgLy8gSWYgdGhlcmUncyBhIHN0cmluZywgdGhlbiBnZXQgdGhlIGxlbmd0aCBvZiB0aGUgZmlyc3Qgd29yZC5cclxuICAgICAgICAgICAgLy8gT3RoZXJ3aXNlIHJldHVybiB0aGUgc2hvcnQgc2VsZWN0ZWQgd2Vla2RheS5cclxuICAgICAgICAgICAgcmV0dXJuIHN0cmluZyA/IGdldEZpcnN0V29yZExlbmd0aCggc3RyaW5nICkgOiB0aGlzLnNldHRpbmdzLndlZWtkYXlzU2hvcnRbIGRhdGVPYmplY3QuZGF5IF1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGRkZGQ6IGZ1bmN0aW9uKCBzdHJpbmcsIGRhdGVPYmplY3QgKSB7XHJcblxyXG4gICAgICAgICAgICAvLyBJZiB0aGVyZSdzIGEgc3RyaW5nLCB0aGVuIGdldCB0aGUgbGVuZ3RoIG9mIHRoZSBmaXJzdCB3b3JkLlxyXG4gICAgICAgICAgICAvLyBPdGhlcndpc2UgcmV0dXJuIHRoZSBmdWxsIHNlbGVjdGVkIHdlZWtkYXkuXHJcbiAgICAgICAgICAgIHJldHVybiBzdHJpbmcgPyBnZXRGaXJzdFdvcmRMZW5ndGgoIHN0cmluZyApIDogdGhpcy5zZXR0aW5ncy53ZWVrZGF5c0Z1bGxbIGRhdGVPYmplY3QuZGF5IF1cclxuICAgICAgICB9LFxyXG4gICAgICAgIG06IGZ1bmN0aW9uKCBzdHJpbmcsIGRhdGVPYmplY3QgKSB7XHJcblxyXG4gICAgICAgICAgICAvLyBJZiB0aGVyZSdzIGEgc3RyaW5nLCB0aGVuIGdldCB0aGUgbGVuZ3RoIG9mIHRoZSBkaWdpdHNcclxuICAgICAgICAgICAgLy8gT3RoZXJ3aXNlIHJldHVybiB0aGUgc2VsZWN0ZWQgbW9udGggd2l0aCAwaW5kZXggY29tcGVuc2F0aW9uLlxyXG4gICAgICAgICAgICByZXR1cm4gc3RyaW5nID8gXy5kaWdpdHMoIHN0cmluZyApIDogZGF0ZU9iamVjdC5tb250aCArIDFcclxuICAgICAgICB9LFxyXG4gICAgICAgIG1tOiBmdW5jdGlvbiggc3RyaW5nLCBkYXRlT2JqZWN0ICkge1xyXG5cclxuICAgICAgICAgICAgLy8gSWYgdGhlcmUncyBhIHN0cmluZywgdGhlbiB0aGUgbGVuZ3RoIGlzIGFsd2F5cyAyLlxyXG4gICAgICAgICAgICAvLyBPdGhlcndpc2UgcmV0dXJuIHRoZSBzZWxlY3RlZCBtb250aCB3aXRoIDBpbmRleCBhbmQgbGVhZGluZyB6ZXJvLlxyXG4gICAgICAgICAgICByZXR1cm4gc3RyaW5nID8gMiA6IF8ubGVhZCggZGF0ZU9iamVjdC5tb250aCArIDEgKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbW1tOiBmdW5jdGlvbiggc3RyaW5nLCBkYXRlT2JqZWN0ICkge1xyXG5cclxuICAgICAgICAgICAgdmFyIGNvbGxlY3Rpb24gPSB0aGlzLnNldHRpbmdzLm1vbnRoc1Nob3J0XHJcblxyXG4gICAgICAgICAgICAvLyBJZiB0aGVyZSdzIGEgc3RyaW5nLCBnZXQgbGVuZ3RoIG9mIHRoZSByZWxldmFudCBtb250aCBmcm9tIHRoZSBzaG9ydFxyXG4gICAgICAgICAgICAvLyBtb250aHMgY29sbGVjdGlvbi4gT3RoZXJ3aXNlIHJldHVybiB0aGUgc2VsZWN0ZWQgbW9udGggZnJvbSB0aGF0IGNvbGxlY3Rpb24uXHJcbiAgICAgICAgICAgIHJldHVybiBzdHJpbmcgPyBnZXRXb3JkTGVuZ3RoRnJvbUNvbGxlY3Rpb24oIHN0cmluZywgY29sbGVjdGlvbiwgZGF0ZU9iamVjdCApIDogY29sbGVjdGlvblsgZGF0ZU9iamVjdC5tb250aCBdXHJcbiAgICAgICAgfSxcclxuICAgICAgICBtbW1tOiBmdW5jdGlvbiggc3RyaW5nLCBkYXRlT2JqZWN0ICkge1xyXG5cclxuICAgICAgICAgICAgdmFyIGNvbGxlY3Rpb24gPSB0aGlzLnNldHRpbmdzLm1vbnRoc0Z1bGxcclxuXHJcbiAgICAgICAgICAgIC8vIElmIHRoZXJlJ3MgYSBzdHJpbmcsIGdldCBsZW5ndGggb2YgdGhlIHJlbGV2YW50IG1vbnRoIGZyb20gdGhlIGZ1bGxcclxuICAgICAgICAgICAgLy8gbW9udGhzIGNvbGxlY3Rpb24uIE90aGVyd2lzZSByZXR1cm4gdGhlIHNlbGVjdGVkIG1vbnRoIGZyb20gdGhhdCBjb2xsZWN0aW9uLlxyXG4gICAgICAgICAgICByZXR1cm4gc3RyaW5nID8gZ2V0V29yZExlbmd0aEZyb21Db2xsZWN0aW9uKCBzdHJpbmcsIGNvbGxlY3Rpb24sIGRhdGVPYmplY3QgKSA6IGNvbGxlY3Rpb25bIGRhdGVPYmplY3QubW9udGggXVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgeXk6IGZ1bmN0aW9uKCBzdHJpbmcsIGRhdGVPYmplY3QgKSB7XHJcblxyXG4gICAgICAgICAgICAvLyBJZiB0aGVyZSdzIGEgc3RyaW5nLCB0aGVuIHRoZSBsZW5ndGggaXMgYWx3YXlzIDIuXHJcbiAgICAgICAgICAgIC8vIE90aGVyd2lzZSByZXR1cm4gdGhlIHNlbGVjdGVkIHllYXIgYnkgc2xpY2luZyBvdXQgdGhlIGZpcnN0IDIgZGlnaXRzLlxyXG4gICAgICAgICAgICByZXR1cm4gc3RyaW5nID8gMiA6ICggJycgKyBkYXRlT2JqZWN0LnllYXIgKS5zbGljZSggMiApXHJcbiAgICAgICAgfSxcclxuICAgICAgICB5eXl5OiBmdW5jdGlvbiggc3RyaW5nLCBkYXRlT2JqZWN0ICkge1xyXG5cclxuICAgICAgICAgICAgLy8gSWYgdGhlcmUncyBhIHN0cmluZywgdGhlbiB0aGUgbGVuZ3RoIGlzIGFsd2F5cyA0LlxyXG4gICAgICAgICAgICAvLyBPdGhlcndpc2UgcmV0dXJuIHRoZSBzZWxlY3RlZCB5ZWFyLlxyXG4gICAgICAgICAgICByZXR1cm4gc3RyaW5nID8gNCA6IGRhdGVPYmplY3QueWVhclxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIC8vIENyZWF0ZSBhbiBhcnJheSBieSBzcGxpdHRpbmcgdGhlIGZvcm1hdHRpbmcgc3RyaW5nIHBhc3NlZC5cclxuICAgICAgICB0b0FycmF5OiBmdW5jdGlvbiggZm9ybWF0U3RyaW5nICkgeyByZXR1cm4gZm9ybWF0U3RyaW5nLnNwbGl0KCAvKGR7MSw0fXxtezEsNH18eXs0fXx5eXwhLikvZyApIH0sXHJcblxyXG4gICAgICAgIC8vIEZvcm1hdCBhbiBvYmplY3QgaW50byBhIHN0cmluZyB1c2luZyB0aGUgZm9ybWF0dGluZyBvcHRpb25zLlxyXG4gICAgICAgIHRvU3RyaW5nOiBmdW5jdGlvbiAoIGZvcm1hdFN0cmluZywgaXRlbU9iamVjdCApIHtcclxuICAgICAgICAgICAgdmFyIGNhbGVuZGFyID0gdGhpc1xyXG4gICAgICAgICAgICByZXR1cm4gY2FsZW5kYXIuZm9ybWF0cy50b0FycmF5KCBmb3JtYXRTdHJpbmcgKS5tYXAoIGZ1bmN0aW9uKCBsYWJlbCApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfLnRyaWdnZXIoIGNhbGVuZGFyLmZvcm1hdHNbIGxhYmVsIF0sIGNhbGVuZGFyLCBbIDAsIGl0ZW1PYmplY3QgXSApIHx8IGxhYmVsLnJlcGxhY2UoIC9eIS8sICcnIClcclxuICAgICAgICAgICAgfSkuam9pbiggJycgKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSkoKSAvL0RhdGVQaWNrZXIucHJvdG90eXBlLmZvcm1hdHNcclxuXHJcblxyXG5cclxuXHJcbi8qKlxyXG4gKiBDaGVjayBpZiB0d28gZGF0ZSB1bml0cyBhcmUgdGhlIGV4YWN0LlxyXG4gKi9cclxuRGF0ZVBpY2tlci5wcm90b3R5cGUuaXNEYXRlRXhhY3QgPSBmdW5jdGlvbiggb25lLCB0d28gKSB7XHJcblxyXG4gICAgdmFyIGNhbGVuZGFyID0gdGhpc1xyXG5cclxuICAgIC8vIFdoZW4gd2XigJlyZSB3b3JraW5nIHdpdGggd2Vla2RheXMsIGRvIGEgZGlyZWN0IGNvbXBhcmlzb24uXHJcbiAgICBpZiAoXHJcbiAgICAgICAgKCBfLmlzSW50ZWdlciggb25lICkgJiYgXy5pc0ludGVnZXIoIHR3byApICkgfHxcclxuICAgICAgICAoIHR5cGVvZiBvbmUgPT0gJ2Jvb2xlYW4nICYmIHR5cGVvZiB0d28gPT0gJ2Jvb2xlYW4nIClcclxuICAgICApIHtcclxuICAgICAgICByZXR1cm4gb25lID09PSB0d29cclxuICAgIH1cclxuXHJcbiAgICAvLyBXaGVuIHdl4oCZcmUgd29ya2luZyB3aXRoIGRhdGUgcmVwcmVzZW50YXRpb25zLCBjb21wYXJlIHRoZSDigJxwaWNr4oCdIHZhbHVlLlxyXG4gICAgaWYgKFxyXG4gICAgICAgICggXy5pc0RhdGUoIG9uZSApIHx8ICQuaXNBcnJheSggb25lICkgKSAmJlxyXG4gICAgICAgICggXy5pc0RhdGUoIHR3byApIHx8ICQuaXNBcnJheSggdHdvICkgKVxyXG4gICAgKSB7XHJcbiAgICAgICAgcmV0dXJuIGNhbGVuZGFyLmNyZWF0ZSggb25lICkucGljayA9PT0gY2FsZW5kYXIuY3JlYXRlKCB0d28gKS5waWNrXHJcbiAgICB9XHJcblxyXG4gICAgLy8gV2hlbiB3ZeKAmXJlIHdvcmtpbmcgd2l0aCByYW5nZSBvYmplY3RzLCBjb21wYXJlIHRoZSDigJxmcm9t4oCdIGFuZCDigJx0b+KAnS5cclxuICAgIGlmICggJC5pc1BsYWluT2JqZWN0KCBvbmUgKSAmJiAkLmlzUGxhaW5PYmplY3QoIHR3byApICkge1xyXG4gICAgICAgIHJldHVybiBjYWxlbmRhci5pc0RhdGVFeGFjdCggb25lLmZyb20sIHR3by5mcm9tICkgJiYgY2FsZW5kYXIuaXNEYXRlRXhhY3QoIG9uZS50bywgdHdvLnRvIClcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZmFsc2VcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBDaGVjayBpZiB0d28gZGF0ZSB1bml0cyBvdmVybGFwLlxyXG4gKi9cclxuRGF0ZVBpY2tlci5wcm90b3R5cGUuaXNEYXRlT3ZlcmxhcCA9IGZ1bmN0aW9uKCBvbmUsIHR3byApIHtcclxuXHJcbiAgICB2YXIgY2FsZW5kYXIgPSB0aGlzLFxyXG4gICAgICAgIGZpcnN0RGF5ID0gY2FsZW5kYXIuc2V0dGluZ3MuZmlyc3REYXkgPyAxIDogMFxyXG5cclxuICAgIC8vIFdoZW4gd2XigJlyZSB3b3JraW5nIHdpdGggYSB3ZWVrZGF5IGluZGV4LCBjb21wYXJlIHRoZSBkYXlzLlxyXG4gICAgaWYgKCBfLmlzSW50ZWdlciggb25lICkgJiYgKCBfLmlzRGF0ZSggdHdvICkgfHwgJC5pc0FycmF5KCB0d28gKSApICkge1xyXG4gICAgICAgIG9uZSA9IG9uZSAlIDcgKyBmaXJzdERheVxyXG4gICAgICAgIHJldHVybiBvbmUgPT09IGNhbGVuZGFyLmNyZWF0ZSggdHdvICkuZGF5ICsgMVxyXG4gICAgfVxyXG4gICAgaWYgKCBfLmlzSW50ZWdlciggdHdvICkgJiYgKCBfLmlzRGF0ZSggb25lICkgfHwgJC5pc0FycmF5KCBvbmUgKSApICkge1xyXG4gICAgICAgIHR3byA9IHR3byAlIDcgKyBmaXJzdERheVxyXG4gICAgICAgIHJldHVybiB0d28gPT09IGNhbGVuZGFyLmNyZWF0ZSggb25lICkuZGF5ICsgMVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFdoZW4gd2XigJlyZSB3b3JraW5nIHdpdGggcmFuZ2Ugb2JqZWN0cywgY2hlY2sgaWYgdGhlIHJhbmdlcyBvdmVybGFwLlxyXG4gICAgaWYgKCAkLmlzUGxhaW5PYmplY3QoIG9uZSApICYmICQuaXNQbGFpbk9iamVjdCggdHdvICkgKSB7XHJcbiAgICAgICAgcmV0dXJuIGNhbGVuZGFyLm92ZXJsYXBSYW5nZXMoIG9uZSwgdHdvIClcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZmFsc2VcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBGbGlwIHRoZSDigJxlbmFibGVk4oCdIHN0YXRlLlxyXG4gKi9cclxuRGF0ZVBpY2tlci5wcm90b3R5cGUuZmxpcEVuYWJsZSA9IGZ1bmN0aW9uKHZhbCkge1xyXG4gICAgdmFyIGl0ZW1PYmplY3QgPSB0aGlzLml0ZW1cclxuICAgIGl0ZW1PYmplY3QuZW5hYmxlID0gdmFsIHx8IChpdGVtT2JqZWN0LmVuYWJsZSA9PSAtMSA/IDEgOiAtMSlcclxufVxyXG5cclxuXHJcbi8qKlxyXG4gKiBNYXJrIGEgY29sbGVjdGlvbiBvZiBkYXRlcyBhcyDigJxkaXNhYmxlZOKAnS5cclxuICovXHJcbkRhdGVQaWNrZXIucHJvdG90eXBlLmRlYWN0aXZhdGUgPSBmdW5jdGlvbiggdHlwZSwgZGF0ZXNUb0Rpc2FibGUgKSB7XHJcblxyXG4gICAgdmFyIGNhbGVuZGFyID0gdGhpcyxcclxuICAgICAgICBkaXNhYmxlZEl0ZW1zID0gY2FsZW5kYXIuaXRlbS5kaXNhYmxlLnNsaWNlKDApXHJcblxyXG5cclxuICAgIC8vIElmIHdl4oCZcmUgZmxpcHBpbmcsIHRoYXTigJlzIGFsbCB3ZSBuZWVkIHRvIGRvLlxyXG4gICAgaWYgKCBkYXRlc1RvRGlzYWJsZSA9PSAnZmxpcCcgKSB7XHJcbiAgICAgICAgY2FsZW5kYXIuZmxpcEVuYWJsZSgpXHJcbiAgICB9XHJcblxyXG4gICAgZWxzZSBpZiAoIGRhdGVzVG9EaXNhYmxlID09PSBmYWxzZSApIHtcclxuICAgICAgICBjYWxlbmRhci5mbGlwRW5hYmxlKDEpXHJcbiAgICAgICAgZGlzYWJsZWRJdGVtcyA9IFtdXHJcbiAgICB9XHJcblxyXG4gICAgZWxzZSBpZiAoIGRhdGVzVG9EaXNhYmxlID09PSB0cnVlICkge1xyXG4gICAgICAgIGNhbGVuZGFyLmZsaXBFbmFibGUoLTEpXHJcbiAgICAgICAgZGlzYWJsZWRJdGVtcyA9IFtdXHJcbiAgICB9XHJcblxyXG4gICAgLy8gT3RoZXJ3aXNlIGdvIHRocm91Z2ggdGhlIGRhdGVzIHRvIGRpc2FibGUuXHJcbiAgICBlbHNlIHtcclxuXHJcbiAgICAgICAgZGF0ZXNUb0Rpc2FibGUubWFwKGZ1bmN0aW9uKCB1bml0VG9EaXNhYmxlICkge1xyXG5cclxuICAgICAgICAgICAgdmFyIG1hdGNoRm91bmRcclxuXHJcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgaGF2ZSBkaXNhYmxlZCBpdGVtcywgY2hlY2sgZm9yIG1hdGNoZXMuXHJcbiAgICAgICAgICAgIC8vIElmIHNvbWV0aGluZyBpcyBtYXRjaGVkLCBpbW1lZGlhdGVseSBicmVhayBvdXQuXHJcbiAgICAgICAgICAgIGZvciAoIHZhciBpbmRleCA9IDA7IGluZGV4IDwgZGlzYWJsZWRJdGVtcy5sZW5ndGg7IGluZGV4ICs9IDEgKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIGNhbGVuZGFyLmlzRGF0ZUV4YWN0KCB1bml0VG9EaXNhYmxlLCBkaXNhYmxlZEl0ZW1zW2luZGV4XSApICkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1hdGNoRm91bmQgPSB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gSWYgbm90aGluZyB3YXMgZm91bmQsIGFkZCB0aGUgdmFsaWRhdGVkIHVuaXQgdG8gdGhlIGNvbGxlY3Rpb24uXHJcbiAgICAgICAgICAgIGlmICggIW1hdGNoRm91bmQgKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAgICAgXy5pc0ludGVnZXIoIHVuaXRUb0Rpc2FibGUgKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgIF8uaXNEYXRlKCB1bml0VG9EaXNhYmxlICkgfHxcclxuICAgICAgICAgICAgICAgICAgICAkLmlzQXJyYXkoIHVuaXRUb0Rpc2FibGUgKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICggJC5pc1BsYWluT2JqZWN0KCB1bml0VG9EaXNhYmxlICkgJiYgdW5pdFRvRGlzYWJsZS5mcm9tICYmIHVuaXRUb0Rpc2FibGUudG8gKVxyXG4gICAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWRJdGVtcy5wdXNoKCB1bml0VG9EaXNhYmxlIClcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmV0dXJuIHRoZSB1cGRhdGVkIGNvbGxlY3Rpb24uXHJcbiAgICByZXR1cm4gZGlzYWJsZWRJdGVtc1xyXG59IC8vRGF0ZVBpY2tlci5wcm90b3R5cGUuZGVhY3RpdmF0ZVxyXG5cclxuXHJcbi8qKlxyXG4gKiBNYXJrIGEgY29sbGVjdGlvbiBvZiBkYXRlcyBhcyDigJxlbmFibGVk4oCdLlxyXG4gKi9cclxuRGF0ZVBpY2tlci5wcm90b3R5cGUuYWN0aXZhdGUgPSBmdW5jdGlvbiggdHlwZSwgZGF0ZXNUb0VuYWJsZSApIHtcclxuXHJcbiAgICB2YXIgY2FsZW5kYXIgPSB0aGlzLFxyXG4gICAgICAgIGRpc2FibGVkSXRlbXMgPSBjYWxlbmRhci5pdGVtLmRpc2FibGUsXHJcbiAgICAgICAgZGlzYWJsZWRJdGVtc0NvdW50ID0gZGlzYWJsZWRJdGVtcy5sZW5ndGhcclxuXHJcbiAgICAvLyBJZiB3ZeKAmXJlIGZsaXBwaW5nLCB0aGF04oCZcyBhbGwgd2UgbmVlZCB0byBkby5cclxuICAgIGlmICggZGF0ZXNUb0VuYWJsZSA9PSAnZmxpcCcgKSB7XHJcbiAgICAgICAgY2FsZW5kYXIuZmxpcEVuYWJsZSgpXHJcbiAgICB9XHJcblxyXG4gICAgZWxzZSBpZiAoIGRhdGVzVG9FbmFibGUgPT09IHRydWUgKSB7XHJcbiAgICAgICAgY2FsZW5kYXIuZmxpcEVuYWJsZSgxKVxyXG4gICAgICAgIGRpc2FibGVkSXRlbXMgPSBbXVxyXG4gICAgfVxyXG5cclxuICAgIGVsc2UgaWYgKCBkYXRlc1RvRW5hYmxlID09PSBmYWxzZSApIHtcclxuICAgICAgICBjYWxlbmRhci5mbGlwRW5hYmxlKC0xKVxyXG4gICAgICAgIGRpc2FibGVkSXRlbXMgPSBbXVxyXG4gICAgfVxyXG5cclxuICAgIC8vIE90aGVyd2lzZSBnbyB0aHJvdWdoIHRoZSBkaXNhYmxlZCBkYXRlcy5cclxuICAgIGVsc2Uge1xyXG5cclxuICAgICAgICBkYXRlc1RvRW5hYmxlLm1hcChmdW5jdGlvbiggdW5pdFRvRW5hYmxlICkge1xyXG5cclxuICAgICAgICAgICAgdmFyIG1hdGNoRm91bmQsXHJcbiAgICAgICAgICAgICAgICBkaXNhYmxlZFVuaXQsXHJcbiAgICAgICAgICAgICAgICBpbmRleCxcclxuICAgICAgICAgICAgICAgIGlzRXhhY3RSYW5nZVxyXG5cclxuICAgICAgICAgICAgLy8gR28gdGhyb3VnaCB0aGUgZGlzYWJsZWQgaXRlbXMgYW5kIHRyeSB0byBmaW5kIGEgbWF0Y2guXHJcbiAgICAgICAgICAgIGZvciAoIGluZGV4ID0gMDsgaW5kZXggPCBkaXNhYmxlZEl0ZW1zQ291bnQ7IGluZGV4ICs9IDEgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgZGlzYWJsZWRVbml0ID0gZGlzYWJsZWRJdGVtc1tpbmRleF1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBXaGVuIGFuIGV4YWN0IG1hdGNoIGlzIGZvdW5kLCByZW1vdmUgaXQgZnJvbSB0aGUgY29sbGVjdGlvbi5cclxuICAgICAgICAgICAgICAgIGlmICggY2FsZW5kYXIuaXNEYXRlRXhhY3QoIGRpc2FibGVkVW5pdCwgdW5pdFRvRW5hYmxlICkgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hGb3VuZCA9IGRpc2FibGVkSXRlbXNbaW5kZXhdID0gbnVsbFxyXG4gICAgICAgICAgICAgICAgICAgIGlzRXhhY3RSYW5nZSA9IHRydWVcclxuICAgICAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIFdoZW4gYW4gb3ZlcmxhcHBlZCBtYXRjaCBpcyBmb3VuZCwgYWRkIHRoZSDigJxpbnZlcnRlZOKAnSBzdGF0ZSB0byBpdC5cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCBjYWxlbmRhci5pc0RhdGVPdmVybGFwKCBkaXNhYmxlZFVuaXQsIHVuaXRUb0VuYWJsZSApICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICggJC5pc1BsYWluT2JqZWN0KCB1bml0VG9FbmFibGUgKSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdW5pdFRvRW5hYmxlLmludmVydGVkID0gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRjaEZvdW5kID0gdW5pdFRvRW5hYmxlXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCAkLmlzQXJyYXkoIHVuaXRUb0VuYWJsZSApICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRjaEZvdW5kID0gdW5pdFRvRW5hYmxlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggIW1hdGNoRm91bmRbM10gKSBtYXRjaEZvdW5kLnB1c2goICdpbnZlcnRlZCcgKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICggXy5pc0RhdGUoIHVuaXRUb0VuYWJsZSApICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRjaEZvdW5kID0gWyB1bml0VG9FbmFibGUuZ2V0RnVsbFllYXIoKSwgdW5pdFRvRW5hYmxlLmdldE1vbnRoKCksIHVuaXRUb0VuYWJsZS5nZXREYXRlKCksICdpbnZlcnRlZCcgXVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBJZiBhIG1hdGNoIHdhcyBmb3VuZCwgcmVtb3ZlIGEgcHJldmlvdXMgZHVwbGljYXRlIGVudHJ5LlxyXG4gICAgICAgICAgICBpZiAoIG1hdGNoRm91bmQgKSBmb3IgKCBpbmRleCA9IDA7IGluZGV4IDwgZGlzYWJsZWRJdGVtc0NvdW50OyBpbmRleCArPSAxICkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCBjYWxlbmRhci5pc0RhdGVFeGFjdCggZGlzYWJsZWRJdGVtc1tpbmRleF0sIHVuaXRUb0VuYWJsZSApICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkSXRlbXNbaW5kZXhdID0gbnVsbFxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIEluIHRoZSBldmVudCB0aGF0IHdl4oCZcmUgZGVhbGluZyB3aXRoIGFuIGV4YWN0IHJhbmdlIG9mIGRhdGVzLFxyXG4gICAgICAgICAgICAvLyBtYWtlIHN1cmUgdGhlcmUgYXJlIG5vIOKAnGludmVydGVk4oCdIGRhdGVzIGJlY2F1c2Ugb2YgaXQuXHJcbiAgICAgICAgICAgIGlmICggaXNFeGFjdFJhbmdlICkgZm9yICggaW5kZXggPSAwOyBpbmRleCA8IGRpc2FibGVkSXRlbXNDb3VudDsgaW5kZXggKz0gMSApIHtcclxuICAgICAgICAgICAgICAgIGlmICggY2FsZW5kYXIuaXNEYXRlT3ZlcmxhcCggZGlzYWJsZWRJdGVtc1tpbmRleF0sIHVuaXRUb0VuYWJsZSApICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkSXRlbXNbaW5kZXhdID0gbnVsbFxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIElmIHNvbWV0aGluZyBpcyBzdGlsbCBtYXRjaGVkLCBhZGQgaXQgaW50byB0aGUgY29sbGVjdGlvbi5cclxuICAgICAgICAgICAgaWYgKCBtYXRjaEZvdW5kICkge1xyXG4gICAgICAgICAgICAgICAgZGlzYWJsZWRJdGVtcy5wdXNoKCBtYXRjaEZvdW5kIClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmV0dXJuIHRoZSB1cGRhdGVkIGNvbGxlY3Rpb24uXHJcbiAgICByZXR1cm4gZGlzYWJsZWRJdGVtcy5maWx0ZXIoZnVuY3Rpb24oIHZhbCApIHsgcmV0dXJuIHZhbCAhPSBudWxsIH0pXHJcbn0gLy9EYXRlUGlja2VyLnByb3RvdHlwZS5hY3RpdmF0ZVxyXG5cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGUgYSBzdHJpbmcgZm9yIHRoZSBub2RlcyBpbiB0aGUgcGlja2VyLlxyXG4gKi9cclxuRGF0ZVBpY2tlci5wcm90b3R5cGUubm9kZXMgPSBmdW5jdGlvbiggaXNPcGVuICkge1xyXG5cclxuICAgIHZhclxyXG4gICAgICAgIGNhbGVuZGFyID0gdGhpcyxcclxuICAgICAgICBzZXR0aW5ncyA9IGNhbGVuZGFyLnNldHRpbmdzLFxyXG4gICAgICAgIGNhbGVuZGFySXRlbSA9IGNhbGVuZGFyLml0ZW0sXHJcbiAgICAgICAgbm93T2JqZWN0ID0gY2FsZW5kYXJJdGVtLm5vdyxcclxuICAgICAgICBzZWxlY3RlZE9iamVjdCA9IGNhbGVuZGFySXRlbS5zZWxlY3QsXHJcbiAgICAgICAgaGlnaGxpZ2h0ZWRPYmplY3QgPSBjYWxlbmRhckl0ZW0uaGlnaGxpZ2h0LFxyXG4gICAgICAgIHZpZXdzZXRPYmplY3QgPSBjYWxlbmRhckl0ZW0udmlldyxcclxuICAgICAgICBkaXNhYmxlZENvbGxlY3Rpb24gPSBjYWxlbmRhckl0ZW0uZGlzYWJsZSxcclxuICAgICAgICBtaW5MaW1pdE9iamVjdCA9IGNhbGVuZGFySXRlbS5taW4sXHJcbiAgICAgICAgbWF4TGltaXRPYmplY3QgPSBjYWxlbmRhckl0ZW0ubWF4LFxyXG5cclxuXHJcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBjYWxlbmRhciB0YWJsZSBoZWFkIHVzaW5nIGEgY29weSBvZiB3ZWVrZGF5IGxhYmVscyBjb2xsZWN0aW9uLlxyXG4gICAgICAgIC8vICogV2UgZG8gYSBjb3B5IHNvIHdlIGRvbid0IG11dGF0ZSB0aGUgb3JpZ2luYWwgYXJyYXkuXHJcbiAgICAgICAgdGFibGVIZWFkID0gKGZ1bmN0aW9uKCBjb2xsZWN0aW9uLCBmdWxsQ29sbGVjdGlvbiApIHtcclxuXHJcbiAgICAgICAgICAgIC8vIElmIHRoZSBmaXJzdCBkYXkgc2hvdWxkIGJlIE1vbmRheSwgbW92ZSBTdW5kYXkgdG8gdGhlIGVuZC5cclxuICAgICAgICAgICAgaWYgKCBzZXR0aW5ncy5maXJzdERheSApIHtcclxuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb24ucHVzaCggY29sbGVjdGlvbi5zaGlmdCgpIClcclxuICAgICAgICAgICAgICAgIGZ1bGxDb2xsZWN0aW9uLnB1c2goIGZ1bGxDb2xsZWN0aW9uLnNoaWZ0KCkgKVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBDcmVhdGUgYW5kIHJldHVybiB0aGUgdGFibGUgaGVhZCBncm91cC5cclxuICAgICAgICAgICAgcmV0dXJuIF8ubm9kZShcclxuICAgICAgICAgICAgICAgICd0aGVhZCcsXHJcbiAgICAgICAgICAgICAgICBfLm5vZGUoXHJcbiAgICAgICAgICAgICAgICAgICAgJ3RyJyxcclxuICAgICAgICAgICAgICAgICAgICBfLmdyb3VwKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWluOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXg6IERBWVNfSU5fV0VFSyAtIDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGk6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGU6ICd0aCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW06IGZ1bmN0aW9uKCBjb3VudGVyICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uWyBjb3VudGVyIF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3Mua2xhc3Mud2Vla2RheXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3Njb3BlPWNvbCB0aXRsZT1cIicgKyBmdWxsQ29sbGVjdGlvblsgY291bnRlciBdICsgJ1wiJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgKSAvL2VuZHJldHVyblxyXG5cclxuICAgICAgICAvLyBNYXRlcmlhbGl6ZSBtb2RpZmllZFxyXG4gICAgICAgIH0pKCAoIHNldHRpbmdzLnNob3dXZWVrZGF5c0Z1bGwgPyBzZXR0aW5ncy53ZWVrZGF5c0Z1bGwgOiBzZXR0aW5ncy53ZWVrZGF5c0xldHRlciApLnNsaWNlKCAwICksIHNldHRpbmdzLndlZWtkYXlzRnVsbC5zbGljZSggMCApICksIC8vdGFibGVIZWFkXHJcblxyXG5cclxuICAgICAgICAvLyBDcmVhdGUgdGhlIG5hdiBmb3IgbmV4dC9wcmV2IG1vbnRoLlxyXG4gICAgICAgIGNyZWF0ZU1vbnRoTmF2ID0gZnVuY3Rpb24oIG5leHQgKSB7XHJcblxyXG4gICAgICAgICAgICAvLyBPdGhlcndpc2UsIHJldHVybiB0aGUgY3JlYXRlZCBtb250aCB0YWcuXHJcbiAgICAgICAgICAgIHJldHVybiBfLm5vZGUoXHJcbiAgICAgICAgICAgICAgICAnZGl2JyxcclxuICAgICAgICAgICAgICAgICcgJyxcclxuICAgICAgICAgICAgICAgIHNldHRpbmdzLmtsYXNzWyAnbmF2JyArICggbmV4dCA/ICdOZXh0JyA6ICdQcmV2JyApIF0gKyAoXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBmb2N1c2VkIG1vbnRoIGlzIG91dHNpZGUgdGhlIHJhbmdlLCBkaXNhYmxlZCB0aGUgYnV0dG9uLlxyXG4gICAgICAgICAgICAgICAgICAgICggbmV4dCAmJiB2aWV3c2V0T2JqZWN0LnllYXIgPj0gbWF4TGltaXRPYmplY3QueWVhciAmJiB2aWV3c2V0T2JqZWN0Lm1vbnRoID49IG1heExpbWl0T2JqZWN0Lm1vbnRoICkgfHxcclxuICAgICAgICAgICAgICAgICAgICAoICFuZXh0ICYmIHZpZXdzZXRPYmplY3QueWVhciA8PSBtaW5MaW1pdE9iamVjdC55ZWFyICYmIHZpZXdzZXRPYmplY3QubW9udGggPD0gbWluTGltaXRPYmplY3QubW9udGggKSA/XHJcbiAgICAgICAgICAgICAgICAgICAgJyAnICsgc2V0dGluZ3Mua2xhc3MubmF2RGlzYWJsZWQgOiAnJ1xyXG4gICAgICAgICAgICAgICAgKSxcclxuICAgICAgICAgICAgICAgICdkYXRhLW5hdj0nICsgKCBuZXh0IHx8IC0xICkgKyAnICcgK1xyXG4gICAgICAgICAgICAgICAgXy5hcmlhQXR0cih7XHJcbiAgICAgICAgICAgICAgICAgICAgcm9sZTogJ2J1dHRvbicsXHJcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbHM6IGNhbGVuZGFyLiRub2RlWzBdLmlkICsgJ190YWJsZSdcclxuICAgICAgICAgICAgICAgIH0pICsgJyAnICtcclxuICAgICAgICAgICAgICAgICd0aXRsZT1cIicgKyAobmV4dCA/IHNldHRpbmdzLmxhYmVsTW9udGhOZXh0IDogc2V0dGluZ3MubGFiZWxNb250aFByZXYgKSArICdcIidcclxuICAgICAgICAgICAgKSAvL2VuZHJldHVyblxyXG4gICAgICAgIH0sIC8vY3JlYXRlTW9udGhOYXZcclxuXHJcblxyXG4gICAgICAgIC8vIENyZWF0ZSB0aGUgbW9udGggbGFiZWwuXHJcbiAgICAgICAgLy9NYXRlcmlhbGl6ZSBtb2RpZmllZFxyXG4gICAgICAgIGNyZWF0ZU1vbnRoTGFiZWwgPSBmdW5jdGlvbihvdmVycmlkZSkge1xyXG5cclxuICAgICAgICAgICAgdmFyIG1vbnRoc0NvbGxlY3Rpb24gPSBzZXR0aW5ncy5zaG93TW9udGhzU2hvcnQgPyBzZXR0aW5ncy5tb250aHNTaG9ydCA6IHNldHRpbmdzLm1vbnRoc0Z1bGxcclxuXHJcbiAgICAgICAgICAgICAvLyBNYXRlcmlhbGl6ZSBtb2RpZmllZFxyXG4gICAgICAgICAgICBpZiAob3ZlcnJpZGUgPT0gXCJzaG9ydF9tb250aHNcIikge1xyXG4gICAgICAgICAgICAgIG1vbnRoc0NvbGxlY3Rpb24gPSBzZXR0aW5ncy5tb250aHNTaG9ydDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gSWYgdGhlcmUgYXJlIG1vbnRocyB0byBzZWxlY3QsIGFkZCBhIGRyb3Bkb3duIG1lbnUuXHJcbiAgICAgICAgICAgIGlmICggc2V0dGluZ3Muc2VsZWN0TW9udGhzICAmJiBvdmVycmlkZSA9PSB1bmRlZmluZWQpIHtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXy5ub2RlKCAnc2VsZWN0JyxcclxuICAgICAgICAgICAgICAgICAgICBfLmdyb3VwKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWluOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXg6IDExLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlOiAnb3B0aW9uJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbTogZnVuY3Rpb24oIGxvb3BlZE1vbnRoICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSBsb29wZWQgbW9udGggYW5kIG5vIGNsYXNzZXMuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9udGhzQ29sbGVjdGlvblsgbG9vcGVkTW9udGggXSwgMCxcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHRoZSB2YWx1ZSBhbmQgc2VsZWN0ZWQgaW5kZXguXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3ZhbHVlPScgKyBsb29wZWRNb250aCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCB2aWV3c2V0T2JqZWN0Lm1vbnRoID09IGxvb3BlZE1vbnRoID8gJyBzZWxlY3RlZCcgOiAnJyApICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICggdmlld3NldE9iamVjdC55ZWFyID09IG1pbkxpbWl0T2JqZWN0LnllYXIgJiYgbG9vcGVkTW9udGggPCBtaW5MaW1pdE9iamVjdC5tb250aCApIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoIHZpZXdzZXRPYmplY3QueWVhciA9PSBtYXhMaW1pdE9iamVjdC55ZWFyICYmIGxvb3BlZE1vbnRoID4gbWF4TGltaXRPYmplY3QubW9udGggKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyBkaXNhYmxlZCcgOiAnJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgICAgIHNldHRpbmdzLmtsYXNzLnNlbGVjdE1vbnRoICsgJyBicm93c2VyLWRlZmF1bHQnLFxyXG4gICAgICAgICAgICAgICAgICAgICggaXNPcGVuID8gJycgOiAnZGlzYWJsZWQnICkgKyAnICcgK1xyXG4gICAgICAgICAgICAgICAgICAgIF8uYXJpYUF0dHIoeyBjb250cm9sczogY2FsZW5kYXIuJG5vZGVbMF0uaWQgKyAnX3RhYmxlJyB9KSArICcgJyArXHJcbiAgICAgICAgICAgICAgICAgICAgJ3RpdGxlPVwiJyArIHNldHRpbmdzLmxhYmVsTW9udGhTZWxlY3QgKyAnXCInXHJcbiAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIE1hdGVyaWFsaXplIG1vZGlmaWVkXHJcbiAgICAgICAgICAgIGlmIChvdmVycmlkZSA9PSBcInNob3J0X21vbnRoc1wiKVxyXG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkT2JqZWN0ICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXy5ub2RlKCAnZGl2JywgbW9udGhzQ29sbGVjdGlvblsgc2VsZWN0ZWRPYmplY3QubW9udGggXSApO1xyXG4gICAgICAgICAgICAgICAgZWxzZSByZXR1cm4gXy5ub2RlKCAnZGl2JywgbW9udGhzQ29sbGVjdGlvblsgdmlld3NldE9iamVjdC5tb250aCBdICk7XHJcblxyXG4gICAgICAgICAgICAvLyBJZiB0aGVyZSdzIGEgbmVlZCBmb3IgYSBtb250aCBzZWxlY3RvclxyXG4gICAgICAgICAgICByZXR1cm4gXy5ub2RlKCAnZGl2JywgbW9udGhzQ29sbGVjdGlvblsgdmlld3NldE9iamVjdC5tb250aCBdLCBzZXR0aW5ncy5rbGFzcy5tb250aCApXHJcbiAgICAgICAgfSwgLy9jcmVhdGVNb250aExhYmVsXHJcblxyXG5cclxuICAgICAgICAvLyBDcmVhdGUgdGhlIHllYXIgbGFiZWwuXHJcbiAgICAgICAgLy8gTWF0ZXJpYWxpemUgbW9kaWZpZWRcclxuICAgICAgICBjcmVhdGVZZWFyTGFiZWwgPSBmdW5jdGlvbihvdmVycmlkZSkge1xyXG5cclxuICAgICAgICAgICAgdmFyIGZvY3VzZWRZZWFyID0gdmlld3NldE9iamVjdC55ZWFyLFxyXG5cclxuICAgICAgICAgICAgLy8gSWYgeWVhcnMgc2VsZWN0b3IgaXMgc2V0IHRvIGEgbGl0ZXJhbCBcInRydWVcIiwgc2V0IGl0IHRvIDUuIE90aGVyd2lzZVxyXG4gICAgICAgICAgICAvLyBkaXZpZGUgaW4gaGFsZiB0byBnZXQgaGFsZiBiZWZvcmUgYW5kIGhhbGYgYWZ0ZXIgZm9jdXNlZCB5ZWFyLlxyXG4gICAgICAgICAgICBudW1iZXJZZWFycyA9IHNldHRpbmdzLnNlbGVjdFllYXJzID09PSB0cnVlID8gNSA6IH5+KCBzZXR0aW5ncy5zZWxlY3RZZWFycyAvIDIgKVxyXG5cclxuICAgICAgICAgICAgLy8gSWYgdGhlcmUgYXJlIHllYXJzIHRvIHNlbGVjdCwgYWRkIGEgZHJvcGRvd24gbWVudS5cclxuICAgICAgICAgICAgaWYgKCBudW1iZXJZZWFycyApIHtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXJcclxuICAgICAgICAgICAgICAgICAgICBtaW5ZZWFyID0gbWluTGltaXRPYmplY3QueWVhcixcclxuICAgICAgICAgICAgICAgICAgICBtYXhZZWFyID0gbWF4TGltaXRPYmplY3QueWVhcixcclxuICAgICAgICAgICAgICAgICAgICBsb3dlc3RZZWFyID0gZm9jdXNlZFllYXIgLSBudW1iZXJZZWFycyxcclxuICAgICAgICAgICAgICAgICAgICBoaWdoZXN0WWVhciA9IGZvY3VzZWRZZWFyICsgbnVtYmVyWWVhcnNcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgbWluIHllYXIgaXMgZ3JlYXRlciB0aGFuIHRoZSBsb3dlc3QgeWVhciwgaW5jcmVhc2UgdGhlIGhpZ2hlc3QgeWVhclxyXG4gICAgICAgICAgICAgICAgLy8gYnkgdGhlIGRpZmZlcmVuY2UgYW5kIHNldCB0aGUgbG93ZXN0IHllYXIgdG8gdGhlIG1pbiB5ZWFyLlxyXG4gICAgICAgICAgICAgICAgaWYgKCBtaW5ZZWFyID4gbG93ZXN0WWVhciApIHtcclxuICAgICAgICAgICAgICAgICAgICBoaWdoZXN0WWVhciArPSBtaW5ZZWFyIC0gbG93ZXN0WWVhclxyXG4gICAgICAgICAgICAgICAgICAgIGxvd2VzdFllYXIgPSBtaW5ZZWFyXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIG1heCB5ZWFyIGlzIGxlc3MgdGhhbiB0aGUgaGlnaGVzdCB5ZWFyLCBkZWNyZWFzZSB0aGUgbG93ZXN0IHllYXJcclxuICAgICAgICAgICAgICAgIC8vIGJ5IHRoZSBsb3dlciBvZiB0aGUgdHdvOiBhdmFpbGFibGUgYW5kIG5lZWRlZCB5ZWFycy4gVGhlbiBzZXQgdGhlXHJcbiAgICAgICAgICAgICAgICAvLyBoaWdoZXN0IHllYXIgdG8gdGhlIG1heCB5ZWFyLlxyXG4gICAgICAgICAgICAgICAgaWYgKCBtYXhZZWFyIDwgaGlnaGVzdFllYXIgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhdmFpbGFibGVZZWFycyA9IGxvd2VzdFllYXIgLSBtaW5ZZWFyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZWVkZWRZZWFycyA9IGhpZ2hlc3RZZWFyIC0gbWF4WWVhclxyXG5cclxuICAgICAgICAgICAgICAgICAgICBsb3dlc3RZZWFyIC09IGF2YWlsYWJsZVllYXJzID4gbmVlZGVkWWVhcnMgPyBuZWVkZWRZZWFycyA6IGF2YWlsYWJsZVllYXJzXHJcbiAgICAgICAgICAgICAgICAgICAgaGlnaGVzdFllYXIgPSBtYXhZZWFyXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCBzZXR0aW5ncy5zZWxlY3RZZWFycyAgJiYgb3ZlcnJpZGUgPT0gdW5kZWZpbmVkICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfLm5vZGUoICdzZWxlY3QnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfLmdyb3VwKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbjogbG93ZXN0WWVhcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heDogaGlnaGVzdFllYXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZTogJ29wdGlvbicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtOiBmdW5jdGlvbiggbG9vcGVkWWVhciApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGxvb3BlZCB5ZWFyIGFuZCBubyBjbGFzc2VzLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb29wZWRZZWFyLCAwLFxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHRoZSB2YWx1ZSBhbmQgc2VsZWN0ZWQgaW5kZXguXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICd2YWx1ZT0nICsgbG9vcGVkWWVhciArICggZm9jdXNlZFllYXIgPT0gbG9vcGVkWWVhciA/ICcgc2VsZWN0ZWQnIDogJycgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdzLmtsYXNzLnNlbGVjdFllYXIgKyAnIGJyb3dzZXItZGVmYXVsdCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICggaXNPcGVuID8gJycgOiAnZGlzYWJsZWQnICkgKyAnICcgKyBfLmFyaWFBdHRyKHsgY29udHJvbHM6IGNhbGVuZGFyLiRub2RlWzBdLmlkICsgJ190YWJsZScgfSkgKyAnICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAndGl0bGU9XCInICsgc2V0dGluZ3MubGFiZWxZZWFyU2VsZWN0ICsgJ1wiJ1xyXG4gICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gTWF0ZXJpYWxpemUgbW9kaWZpZWRcclxuICAgICAgICAgICAgaWYgKG92ZXJyaWRlID09IFwicmF3XCIpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXy5ub2RlKCAnZGl2JywgZm9jdXNlZFllYXIgKVxyXG5cclxuICAgICAgICAgICAgLy8gT3RoZXJ3aXNlIGp1c3QgcmV0dXJuIHRoZSB5ZWFyIGZvY3VzZWRcclxuICAgICAgICAgICAgcmV0dXJuIF8ubm9kZSggJ2RpdicsIGZvY3VzZWRZZWFyLCBzZXR0aW5ncy5rbGFzcy55ZWFyIClcclxuICAgICAgICB9IC8vY3JlYXRlWWVhckxhYmVsXHJcblxyXG5cclxuICAgICAgICAvLyBNYXRlcmlhbGl6ZSBtb2RpZmllZFxyXG4gICAgICAgIGNyZWF0ZURheUxhYmVsID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWRPYmplY3QgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXy5ub2RlKCAnZGl2Jywgc2VsZWN0ZWRPYmplY3QuZGF0ZSlcclxuICAgICAgICAgICAgICAgIGVsc2UgcmV0dXJuIF8ubm9kZSggJ2RpdicsIG5vd09iamVjdC5kYXRlKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgY3JlYXRlV2Vla2RheUxhYmVsID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciBkaXNwbGF5X2RheTtcclxuXHJcbiAgICAgICAgICAgIGlmIChzZWxlY3RlZE9iamVjdCAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgZGlzcGxheV9kYXkgPSBzZWxlY3RlZE9iamVjdC5kYXk7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIGRpc3BsYXlfZGF5ID0gbm93T2JqZWN0LmRheTtcclxuICAgICAgICAgICAgdmFyIHdlZWtkYXkgPSBzZXR0aW5ncy53ZWVrZGF5c0Z1bGxbIGRpc3BsYXlfZGF5IF1cclxuICAgICAgICAgICAgcmV0dXJuIHdlZWtkYXlcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgIC8vIENyZWF0ZSBhbmQgcmV0dXJuIHRoZSBlbnRpcmUgY2FsZW5kYXIuXHJcbnJldHVybiBfLm5vZGUoXHJcbiAgICAgICAgLy8gRGF0ZSBwcmVzZW50YXRpb24gVmlld1xyXG4gICAgICAgICdkaXYnLFxyXG4gICAgICAgICAgICBfLm5vZGUoXHJcbiAgICAgICAgICAgICAgICAnZGl2JyxcclxuICAgICAgICAgICAgICAgIGNyZWF0ZVdlZWtkYXlMYWJlbCgpLFxyXG4gICAgICAgICAgICAgICAgXCJwaWNrZXJfX3dlZWtkYXktZGlzcGxheVwiXHJcbiAgICAgICAgICAgICkrXHJcbiAgICAgICAgICAgIF8ubm9kZShcclxuICAgICAgICAgICAgICAgIC8vIERpdiBmb3Igc2hvcnQgTW9udGhcclxuICAgICAgICAgICAgICAgICdkaXYnLFxyXG4gICAgICAgICAgICAgICAgY3JlYXRlTW9udGhMYWJlbChcInNob3J0X21vbnRoc1wiKSxcclxuICAgICAgICAgICAgICAgIHNldHRpbmdzLmtsYXNzLm1vbnRoX2Rpc3BsYXlcclxuICAgICAgICAgICAgKStcclxuICAgICAgICAgICAgXy5ub2RlKFxyXG4gICAgICAgICAgICAgICAgLy8gRGl2IGZvciBEYXlcclxuICAgICAgICAgICAgICAgICdkaXYnLFxyXG4gICAgICAgICAgICAgICAgY3JlYXRlRGF5TGFiZWwoKSAsXHJcbiAgICAgICAgICAgICAgICBzZXR0aW5ncy5rbGFzcy5kYXlfZGlzcGxheVxyXG4gICAgICAgICAgICApK1xyXG4gICAgICAgICAgICBfLm5vZGUoXHJcbiAgICAgICAgICAgICAgICAvLyBEaXYgZm9yIFllYXJcclxuICAgICAgICAgICAgICAgICdkaXYnLFxyXG4gICAgICAgICAgICAgICAgY3JlYXRlWWVhckxhYmVsKFwicmF3XCIpICxcclxuICAgICAgICAgICAgICAgIHNldHRpbmdzLmtsYXNzLnllYXJfZGlzcGxheVxyXG4gICAgICAgICAgICApLFxyXG4gICAgICAgIHNldHRpbmdzLmtsYXNzLmRhdGVfZGlzcGxheVxyXG4gICAgKStcclxuICAgIC8vIENhbGVuZGFyIGNvbnRhaW5lclxyXG4gICAgXy5ub2RlKCdkaXYnLFxyXG4gICAgICAgIF8ubm9kZSgnZGl2JyxcclxuICAgICAgICAoIHNldHRpbmdzLnNlbGVjdFllYXJzID8gIGNyZWF0ZU1vbnRoTGFiZWwoKSArIGNyZWF0ZVllYXJMYWJlbCgpIDogY3JlYXRlTW9udGhMYWJlbCgpICsgY3JlYXRlWWVhckxhYmVsKCkgKSArXHJcbiAgICAgICAgY3JlYXRlTW9udGhOYXYoKSArIGNyZWF0ZU1vbnRoTmF2KCAxICksXHJcbiAgICAgICAgc2V0dGluZ3Mua2xhc3MuaGVhZGVyXHJcbiAgICApICsgXy5ub2RlKFxyXG4gICAgICAgICd0YWJsZScsXHJcbiAgICAgICAgdGFibGVIZWFkICtcclxuICAgICAgICBfLm5vZGUoXHJcbiAgICAgICAgICAgICd0Ym9keScsXHJcbiAgICAgICAgICAgIF8uZ3JvdXAoe1xyXG4gICAgICAgICAgICAgICAgbWluOiAwLFxyXG4gICAgICAgICAgICAgICAgbWF4OiBXRUVLU19JTl9DQUxFTkRBUiAtIDEsXHJcbiAgICAgICAgICAgICAgICBpOiAxLFxyXG4gICAgICAgICAgICAgICAgbm9kZTogJ3RyJyxcclxuICAgICAgICAgICAgICAgIGl0ZW06IGZ1bmN0aW9uKCByb3dDb3VudGVyICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBJZiBNb25kYXkgaXMgdGhlIGZpcnN0IGRheSBhbmQgdGhlIG1vbnRoIHN0YXJ0cyBvbiBTdW5kYXksIHNoaWZ0IHRoZSBkYXRlIGJhY2sgYSB3ZWVrLlxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzaGlmdERhdGVCeSA9IHNldHRpbmdzLmZpcnN0RGF5ICYmIGNhbGVuZGFyLmNyZWF0ZShbIHZpZXdzZXRPYmplY3QueWVhciwgdmlld3NldE9iamVjdC5tb250aCwgMSBdKS5kYXkgPT09IDAgPyAtNyA6IDBcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXy5ncm91cCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW46IERBWVNfSU5fV0VFSyAqIHJvd0NvdW50ZXIgLSB2aWV3c2V0T2JqZWN0LmRheSArIHNoaWZ0RGF0ZUJ5ICsgMSwgLy8gQWRkIDEgZm9yIHdlZWtkYXkgMGluZGV4XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXg6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm1pbiArIERBWVNfSU5fV0VFSyAtIDFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZTogJ3RkJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW06IGZ1bmN0aW9uKCB0YXJnZXREYXRlICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb252ZXJ0IHRoZSB0aW1lIGRhdGUgZnJvbSBhIHJlbGF0aXZlIGRhdGUgdG8gYSB0YXJnZXQgZGF0ZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXREYXRlID0gY2FsZW5kYXIuY3JlYXRlKFsgdmlld3NldE9iamVjdC55ZWFyLCB2aWV3c2V0T2JqZWN0Lm1vbnRoLCB0YXJnZXREYXRlICsgKCBzZXR0aW5ncy5maXJzdERheSA/IDEgOiAwICkgXSlcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlzU2VsZWN0ZWQgPSBzZWxlY3RlZE9iamVjdCAmJiBzZWxlY3RlZE9iamVjdC5waWNrID09IHRhcmdldERhdGUucGljayxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNIaWdobGlnaHRlZCA9IGhpZ2hsaWdodGVkT2JqZWN0ICYmIGhpZ2hsaWdodGVkT2JqZWN0LnBpY2sgPT0gdGFyZ2V0RGF0ZS5waWNrLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0Rpc2FibGVkID0gZGlzYWJsZWRDb2xsZWN0aW9uICYmIGNhbGVuZGFyLmRpc2FibGVkKCB0YXJnZXREYXRlICkgfHwgdGFyZ2V0RGF0ZS5waWNrIDwgbWluTGltaXRPYmplY3QucGljayB8fCB0YXJnZXREYXRlLnBpY2sgPiBtYXhMaW1pdE9iamVjdC5waWNrLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWREYXRlID0gXy50cmlnZ2VyKCBjYWxlbmRhci5mb3JtYXRzLnRvU3RyaW5nLCBjYWxlbmRhciwgWyBzZXR0aW5ncy5mb3JtYXQsIHRhcmdldERhdGUgXSApXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF8ubm9kZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RGF0ZS5kYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGZ1bmN0aW9uKCBrbGFzc2VzICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdGhlIGBpbmZvY3VzYCBvciBgb3V0Zm9jdXNgIGNsYXNzZXMgYmFzZWQgb24gbW9udGggaW4gdmlldy5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrbGFzc2VzLnB1c2goIHZpZXdzZXRPYmplY3QubW9udGggPT0gdGFyZ2V0RGF0ZS5tb250aCA/IHNldHRpbmdzLmtsYXNzLmluZm9jdXMgOiBzZXR0aW5ncy5rbGFzcy5vdXRmb2N1cyApXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgYHRvZGF5YCBjbGFzcyBpZiBuZWVkZWQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBub3dPYmplY3QucGljayA9PSB0YXJnZXREYXRlLnBpY2sgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtsYXNzZXMucHVzaCggc2V0dGluZ3Mua2xhc3Mubm93IClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgYHNlbGVjdGVkYCBjbGFzcyBpZiBzb21ldGhpbmcncyBzZWxlY3RlZCBhbmQgdGhlIHRpbWUgbWF0Y2hlcy5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGlzU2VsZWN0ZWQgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtsYXNzZXMucHVzaCggc2V0dGluZ3Mua2xhc3Muc2VsZWN0ZWQgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHRoZSBgaGlnaGxpZ2h0ZWRgIGNsYXNzIGlmIHNvbWV0aGluZydzIGhpZ2hsaWdodGVkIGFuZCB0aGUgdGltZSBtYXRjaGVzLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggaXNIaWdobGlnaHRlZCApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2xhc3Nlcy5wdXNoKCBzZXR0aW5ncy5rbGFzcy5oaWdobGlnaHRlZCApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdGhlIGBkaXNhYmxlZGAgY2xhc3MgaWYgc29tZXRoaW5nJ3MgZGlzYWJsZWQgYW5kIHRoZSBvYmplY3QgbWF0Y2hlcy5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGlzRGlzYWJsZWQgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtsYXNzZXMucHVzaCggc2V0dGluZ3Mua2xhc3MuZGlzYWJsZWQgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGtsYXNzZXMuam9pbiggJyAnIClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKFsgc2V0dGluZ3Mua2xhc3MuZGF5IF0pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2RhdGEtcGljaz0nICsgdGFyZ2V0RGF0ZS5waWNrICsgJyAnICsgXy5hcmlhQXR0cih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9sZTogJ2dyaWRjZWxsJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogZm9ybWF0dGVkRGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZDogaXNTZWxlY3RlZCAmJiBjYWxlbmRhci4kbm9kZS52YWwoKSA9PT0gZm9ybWF0dGVkRGF0ZSA/IHRydWUgOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZWRlc2NlbmRhbnQ6IGlzSGlnaGxpZ2h0ZWQgPyB0cnVlIDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZDogaXNEaXNhYmxlZCA/IHRydWUgOiBudWxsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXy5hcmlhQXR0cih7IHJvbGU6ICdwcmVzZW50YXRpb24nIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSAvL2VuZHJldHVyblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIF0gLy9lbmRyZXR1cm5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICApLFxyXG4gICAgICAgIHNldHRpbmdzLmtsYXNzLnRhYmxlLFxyXG4gICAgICAgICdpZD1cIicgKyBjYWxlbmRhci4kbm9kZVswXS5pZCArICdfdGFibGUnICsgJ1wiICcgKyBfLmFyaWFBdHRyKHtcclxuICAgICAgICAgICAgcm9sZTogJ2dyaWQnLFxyXG4gICAgICAgICAgICBjb250cm9sczogY2FsZW5kYXIuJG5vZGVbMF0uaWQsXHJcbiAgICAgICAgICAgIHJlYWRvbmx5OiB0cnVlXHJcbiAgICAgICAgfSlcclxuICAgIClcclxuICAgICwgc2V0dGluZ3Mua2xhc3MuY2FsZW5kYXJfY29udGFpbmVyKSAvLyBlbmQgY2FsZW5kYXJcclxuXHJcbiAgICAgK1xyXG5cclxuICAgIC8vICogRm9yIEZpcmVmb3ggZm9ybXMgdG8gc3VibWl0LCBtYWtlIHN1cmUgdG8gc2V0IHRoZSBidXR0b25z4oCZIGB0eXBlYCBhdHRyaWJ1dGVzIGFzIOKAnGJ1dHRvbuKAnS5cclxuICAgIF8ubm9kZShcclxuICAgICAgICAnZGl2JyxcclxuICAgICAgICBfLm5vZGUoICdidXR0b24nLCBzZXR0aW5ncy50b2RheSwgXCJidG4tZmxhdCBwaWNrZXJfX3RvZGF5XCIsXHJcbiAgICAgICAgICAgICd0eXBlPWJ1dHRvbiBkYXRhLXBpY2s9JyArIG5vd09iamVjdC5waWNrICtcclxuICAgICAgICAgICAgKCBpc09wZW4gJiYgIWNhbGVuZGFyLmRpc2FibGVkKG5vd09iamVjdCkgPyAnJyA6ICcgZGlzYWJsZWQnICkgKyAnICcgK1xyXG4gICAgICAgICAgICBfLmFyaWFBdHRyKHsgY29udHJvbHM6IGNhbGVuZGFyLiRub2RlWzBdLmlkIH0pICkgK1xyXG4gICAgICAgIF8ubm9kZSggJ2J1dHRvbicsIHNldHRpbmdzLmNsZWFyLCBcImJ0bi1mbGF0IHBpY2tlcl9fY2xlYXJcIixcclxuICAgICAgICAgICAgJ3R5cGU9YnV0dG9uIGRhdGEtY2xlYXI9MScgK1xyXG4gICAgICAgICAgICAoIGlzT3BlbiA/ICcnIDogJyBkaXNhYmxlZCcgKSArICcgJyArXHJcbiAgICAgICAgICAgIF8uYXJpYUF0dHIoeyBjb250cm9sczogY2FsZW5kYXIuJG5vZGVbMF0uaWQgfSkgKSArXHJcbiAgICAgICAgXy5ub2RlKCdidXR0b24nLCBzZXR0aW5ncy5jbG9zZSwgXCJidG4tZmxhdCBwaWNrZXJfX2Nsb3NlXCIsXHJcbiAgICAgICAgICAgICd0eXBlPWJ1dHRvbiBkYXRhLWNsb3NlPXRydWUgJyArXHJcbiAgICAgICAgICAgICggaXNPcGVuID8gJycgOiAnIGRpc2FibGVkJyApICsgJyAnICtcclxuICAgICAgICAgICAgXy5hcmlhQXR0cih7IGNvbnRyb2xzOiBjYWxlbmRhci4kbm9kZVswXS5pZCB9KSApLFxyXG4gICAgICAgIHNldHRpbmdzLmtsYXNzLmZvb3RlclxyXG4gICAgKSAvL2VuZHJldHVyblxyXG59IC8vRGF0ZVBpY2tlci5wcm90b3R5cGUubm9kZXNcclxuXHJcblxyXG5cclxuXHJcbi8qKlxyXG4gKiBUaGUgZGF0ZSBwaWNrZXIgZGVmYXVsdHMuXHJcbiAqL1xyXG5EYXRlUGlja2VyLmRlZmF1bHRzID0gKGZ1bmN0aW9uKCBwcmVmaXggKSB7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuXHJcbiAgICAgICAgLy8gVGhlIHRpdGxlIGxhYmVsIHRvIHVzZSBmb3IgdGhlIG1vbnRoIG5hdiBidXR0b25zXHJcbiAgICAgICAgbGFiZWxNb250aE5leHQ6ICdOZXh0IG1vbnRoJyxcclxuICAgICAgICBsYWJlbE1vbnRoUHJldjogJ1ByZXZpb3VzIG1vbnRoJyxcclxuXHJcbiAgICAgICAgLy8gVGhlIHRpdGxlIGxhYmVsIHRvIHVzZSBmb3IgdGhlIGRyb3Bkb3duIHNlbGVjdG9yc1xyXG4gICAgICAgIGxhYmVsTW9udGhTZWxlY3Q6ICdTZWxlY3QgYSBtb250aCcsXHJcbiAgICAgICAgbGFiZWxZZWFyU2VsZWN0OiAnU2VsZWN0IGEgeWVhcicsXHJcblxyXG4gICAgICAgIC8vIE1vbnRocyBhbmQgd2Vla2RheXNcclxuICAgICAgICBtb250aHNGdWxsOiBbICdKYW51YXJ5JywgJ0ZlYnJ1YXJ5JywgJ01hcmNoJywgJ0FwcmlsJywgJ01heScsICdKdW5lJywgJ0p1bHknLCAnQXVndXN0JywgJ1NlcHRlbWJlcicsICdPY3RvYmVyJywgJ05vdmVtYmVyJywgJ0RlY2VtYmVyJyBdLFxyXG4gICAgICAgIG1vbnRoc1Nob3J0OiBbICdKYW4nLCAnRmViJywgJ01hcicsICdBcHInLCAnTWF5JywgJ0p1bicsICdKdWwnLCAnQXVnJywgJ1NlcCcsICdPY3QnLCAnTm92JywgJ0RlYycgXSxcclxuICAgICAgICB3ZWVrZGF5c0Z1bGw6IFsgJ1N1bmRheScsICdNb25kYXknLCAnVHVlc2RheScsICdXZWRuZXNkYXknLCAnVGh1cnNkYXknLCAnRnJpZGF5JywgJ1NhdHVyZGF5JyBdLFxyXG4gICAgICAgIHdlZWtkYXlzU2hvcnQ6IFsgJ1N1bicsICdNb24nLCAnVHVlJywgJ1dlZCcsICdUaHUnLCAnRnJpJywgJ1NhdCcgXSxcclxuXHJcbiAgICAgICAgLy8gTWF0ZXJpYWxpemUgbW9kaWZpZWRcclxuICAgICAgICB3ZWVrZGF5c0xldHRlcjogWyAnUycsICdNJywgJ1QnLCAnVycsICdUJywgJ0YnLCAnUycgXSxcclxuXHJcbiAgICAgICAgLy8gVG9kYXkgYW5kIGNsZWFyXHJcbiAgICAgICAgdG9kYXk6ICdUb2RheScsXHJcbiAgICAgICAgY2xlYXI6ICdDbGVhcicsXHJcbiAgICAgICAgY2xvc2U6ICdDbG9zZScsXHJcblxyXG4gICAgICAgIC8vIFRoZSBmb3JtYXQgdG8gc2hvdyBvbiB0aGUgYGlucHV0YCBlbGVtZW50XHJcbiAgICAgICAgZm9ybWF0OiAnZCBtbW1tLCB5eXl5JyxcclxuXHJcbiAgICAgICAgLy8gQ2xhc3Nlc1xyXG4gICAgICAgIGtsYXNzOiB7XHJcblxyXG4gICAgICAgICAgICB0YWJsZTogcHJlZml4ICsgJ3RhYmxlJyxcclxuXHJcbiAgICAgICAgICAgIGhlYWRlcjogcHJlZml4ICsgJ2hlYWRlcicsXHJcblxyXG5cclxuICAgICAgICAgICAgLy8gTWF0ZXJpYWxpemUgQWRkZWQga2xhc3Nlc1xyXG4gICAgICAgICAgICBkYXRlX2Rpc3BsYXk6IHByZWZpeCArICdkYXRlLWRpc3BsYXknLFxyXG4gICAgICAgICAgICBkYXlfZGlzcGxheTogcHJlZml4ICsgJ2RheS1kaXNwbGF5JyxcclxuICAgICAgICAgICAgbW9udGhfZGlzcGxheTogcHJlZml4ICsgJ21vbnRoLWRpc3BsYXknLFxyXG4gICAgICAgICAgICB5ZWFyX2Rpc3BsYXk6IHByZWZpeCArICd5ZWFyLWRpc3BsYXknLFxyXG4gICAgICAgICAgICBjYWxlbmRhcl9jb250YWluZXI6IHByZWZpeCArICdjYWxlbmRhci1jb250YWluZXInLFxyXG4gICAgICAgICAgICAvLyBlbmRcclxuXHJcblxyXG5cclxuICAgICAgICAgICAgbmF2UHJldjogcHJlZml4ICsgJ25hdi0tcHJldicsXHJcbiAgICAgICAgICAgIG5hdk5leHQ6IHByZWZpeCArICduYXYtLW5leHQnLFxyXG4gICAgICAgICAgICBuYXZEaXNhYmxlZDogcHJlZml4ICsgJ25hdi0tZGlzYWJsZWQnLFxyXG5cclxuICAgICAgICAgICAgbW9udGg6IHByZWZpeCArICdtb250aCcsXHJcbiAgICAgICAgICAgIHllYXI6IHByZWZpeCArICd5ZWFyJyxcclxuXHJcbiAgICAgICAgICAgIHNlbGVjdE1vbnRoOiBwcmVmaXggKyAnc2VsZWN0LS1tb250aCcsXHJcbiAgICAgICAgICAgIHNlbGVjdFllYXI6IHByZWZpeCArICdzZWxlY3QtLXllYXInLFxyXG5cclxuICAgICAgICAgICAgd2Vla2RheXM6IHByZWZpeCArICd3ZWVrZGF5JyxcclxuXHJcbiAgICAgICAgICAgIGRheTogcHJlZml4ICsgJ2RheScsXHJcbiAgICAgICAgICAgIGRpc2FibGVkOiBwcmVmaXggKyAnZGF5LS1kaXNhYmxlZCcsXHJcbiAgICAgICAgICAgIHNlbGVjdGVkOiBwcmVmaXggKyAnZGF5LS1zZWxlY3RlZCcsXHJcbiAgICAgICAgICAgIGhpZ2hsaWdodGVkOiBwcmVmaXggKyAnZGF5LS1oaWdobGlnaHRlZCcsXHJcbiAgICAgICAgICAgIG5vdzogcHJlZml4ICsgJ2RheS0tdG9kYXknLFxyXG4gICAgICAgICAgICBpbmZvY3VzOiBwcmVmaXggKyAnZGF5LS1pbmZvY3VzJyxcclxuICAgICAgICAgICAgb3V0Zm9jdXM6IHByZWZpeCArICdkYXktLW91dGZvY3VzJyxcclxuXHJcbiAgICAgICAgICAgIGZvb3RlcjogcHJlZml4ICsgJ2Zvb3RlcicsXHJcblxyXG4gICAgICAgICAgICBidXR0b25DbGVhcjogcHJlZml4ICsgJ2J1dHRvbi0tY2xlYXInLFxyXG4gICAgICAgICAgICBidXR0b25Ub2RheTogcHJlZml4ICsgJ2J1dHRvbi0tdG9kYXknLFxyXG4gICAgICAgICAgICBidXR0b25DbG9zZTogcHJlZml4ICsgJ2J1dHRvbi0tY2xvc2UnXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KSggUGlja2VyLmtsYXNzZXMoKS5waWNrZXIgKyAnX18nIClcclxuXHJcblxyXG5cclxuXHJcblxyXG4vKipcclxuICogRXh0ZW5kIHRoZSBwaWNrZXIgdG8gYWRkIHRoZSBkYXRlIHBpY2tlci5cclxuICovXHJcblBpY2tlci5leHRlbmQoICdwaWNrYWRhdGUnLCBEYXRlUGlja2VyIClcclxuXHJcblxyXG59KSk7XHJcblxyXG5cclxuOyhmdW5jdGlvbiAoJCkge1xyXG5cclxuICAkLmZuLmNoYXJhY3RlckNvdW50ZXIgPSBmdW5jdGlvbigpe1xyXG4gICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe1xyXG4gICAgICB2YXIgJGlucHV0ID0gJCh0aGlzKTtcclxuICAgICAgdmFyICRjb3VudGVyRWxlbWVudCA9ICRpbnB1dC5wYXJlbnQoKS5maW5kKCdzcGFuW2NsYXNzPVwiY2hhcmFjdGVyLWNvdW50ZXJcIl0nKTtcclxuXHJcbiAgICAgIC8vIGNoYXJhY3RlciBjb3VudGVyIGhhcyBhbHJlYWR5IGJlZW4gYWRkZWQgYXBwZW5kZWQgdG8gdGhlIHBhcmVudCBjb250YWluZXJcclxuICAgICAgaWYgKCRjb3VudGVyRWxlbWVudC5sZW5ndGgpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHZhciBpdEhhc0xlbmd0aEF0dHJpYnV0ZSA9ICRpbnB1dC5hdHRyKCdsZW5ndGgnKSAhPT0gdW5kZWZpbmVkO1xyXG5cclxuICAgICAgaWYoaXRIYXNMZW5ndGhBdHRyaWJ1dGUpe1xyXG4gICAgICAgICRpbnB1dC5vbignaW5wdXQnLCB1cGRhdGVDb3VudGVyKTtcclxuICAgICAgICAkaW5wdXQub24oJ2ZvY3VzJywgdXBkYXRlQ291bnRlcik7XHJcbiAgICAgICAgJGlucHV0Lm9uKCdibHVyJywgcmVtb3ZlQ291bnRlckVsZW1lbnQpO1xyXG5cclxuICAgICAgICBhZGRDb3VudGVyRWxlbWVudCgkaW5wdXQpO1xyXG4gICAgICB9XHJcblxyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgZnVuY3Rpb24gdXBkYXRlQ291bnRlcigpe1xyXG4gICAgdmFyIG1heExlbmd0aCAgICAgPSArJCh0aGlzKS5hdHRyKCdsZW5ndGgnKSxcclxuICAgIGFjdHVhbExlbmd0aCAgICAgID0gKyQodGhpcykudmFsKCkubGVuZ3RoLFxyXG4gICAgaXNWYWxpZExlbmd0aCAgICAgPSBhY3R1YWxMZW5ndGggPD0gbWF4TGVuZ3RoO1xyXG5cclxuICAgICQodGhpcykucGFyZW50KCkuZmluZCgnc3BhbltjbGFzcz1cImNoYXJhY3Rlci1jb3VudGVyXCJdJylcclxuICAgICAgICAgICAgICAgICAgICAuaHRtbCggYWN0dWFsTGVuZ3RoICsgJy8nICsgbWF4TGVuZ3RoKTtcclxuXHJcbiAgICBhZGRJbnB1dFN0eWxlKGlzVmFsaWRMZW5ndGgsICQodGhpcykpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gYWRkQ291bnRlckVsZW1lbnQoJGlucHV0KSB7XHJcbiAgICB2YXIgJGNvdW50ZXJFbGVtZW50ID0gJGlucHV0LnBhcmVudCgpLmZpbmQoJ3NwYW5bY2xhc3M9XCJjaGFyYWN0ZXItY291bnRlclwiXScpO1xyXG5cclxuICAgIGlmICgkY291bnRlckVsZW1lbnQubGVuZ3RoKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICAkY291bnRlckVsZW1lbnQgPSAkKCc8c3Bhbi8+JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKCdjaGFyYWN0ZXItY291bnRlcicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jc3MoJ2Zsb2F0JywncmlnaHQnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuY3NzKCdmb250LXNpemUnLCcxMnB4JylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmNzcygnaGVpZ2h0JywgMSk7XHJcblxyXG4gICAgJGlucHV0LnBhcmVudCgpLmFwcGVuZCgkY291bnRlckVsZW1lbnQpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gcmVtb3ZlQ291bnRlckVsZW1lbnQoKXtcclxuICAgICQodGhpcykucGFyZW50KCkuZmluZCgnc3BhbltjbGFzcz1cImNoYXJhY3Rlci1jb3VudGVyXCJdJykuaHRtbCgnJyk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBhZGRJbnB1dFN0eWxlKGlzVmFsaWRMZW5ndGgsICRpbnB1dCl7XHJcbiAgICB2YXIgaW5wdXRIYXNJbnZhbGlkQ2xhc3MgPSAkaW5wdXQuaGFzQ2xhc3MoJ2ludmFsaWQnKTtcclxuICAgIGlmIChpc1ZhbGlkTGVuZ3RoICYmIGlucHV0SGFzSW52YWxpZENsYXNzKSB7XHJcbiAgICAgICRpbnB1dC5yZW1vdmVDbGFzcygnaW52YWxpZCcpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZighaXNWYWxpZExlbmd0aCAmJiAhaW5wdXRIYXNJbnZhbGlkQ2xhc3Mpe1xyXG4gICAgICAkaW5wdXQucmVtb3ZlQ2xhc3MoJ3ZhbGlkJyk7XHJcbiAgICAgICRpbnB1dC5hZGRDbGFzcygnaW52YWxpZCcpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXtcclxuICAgICQoJ2lucHV0LCB0ZXh0YXJlYScpLmNoYXJhY3RlckNvdW50ZXIoKTtcclxuICB9KTtcclxuXHJcbn0oIGpRdWVyeSApKTtcclxuOyhmdW5jdGlvbiAoJCkge1xyXG5cclxuICB2YXIgbWV0aG9kcyA9IHtcclxuXHJcbiAgICBpbml0IDogZnVuY3Rpb24ob3B0aW9ucykge1xyXG4gICAgICB2YXIgZGVmYXVsdHMgPSB7XHJcbiAgICAgICAgdGltZV9jb25zdGFudDogMjAwLCAvLyBtc1xyXG4gICAgICAgIGRpc3Q6IC0xMDAsIC8vIHpvb20gc2NhbGUgVE9ETzogbWFrZSB0aGlzIG1vcmUgaW50dWl0aXZlIGFzIGFuIG9wdGlvblxyXG4gICAgICAgIHNoaWZ0OiAwLCAvLyBzcGFjaW5nIGZvciBjZW50ZXIgaW1hZ2VcclxuICAgICAgICBwYWRkaW5nOiAwLCAvLyBQYWRkaW5nIGJldHdlZW4gbm9uIGNlbnRlciBpdGVtc1xyXG4gICAgICAgIGZ1bGxfd2lkdGg6IGZhbHNlLCAvLyBDaGFuZ2UgdG8gZnVsbCB3aWR0aCBzdHlsZXNcclxuICAgICAgICBpbmRpY2F0b3JzOiBmYWxzZSwgLy8gVG9nZ2xlIGluZGljYXRvcnNcclxuICAgICAgICBub193cmFwOiBmYWxzZSAvLyBEb24ndCB3cmFwIGFyb3VuZCBhbmQgY3ljbGUgdGhyb3VnaCBpdGVtcy5cclxuICAgICAgfTtcclxuICAgICAgb3B0aW9ucyA9ICQuZXh0ZW5kKGRlZmF1bHRzLCBvcHRpb25zKTtcclxuXHJcbiAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgIHZhciBpbWFnZXMsIG9mZnNldCwgY2VudGVyLCBwcmVzc2VkLCBkaW0sIGNvdW50LFxyXG4gICAgICAgICAgICByZWZlcmVuY2UsIHJlZmVyZW5jZVksIGFtcGxpdHVkZSwgdGFyZ2V0LCB2ZWxvY2l0eSxcclxuICAgICAgICAgICAgeGZvcm0sIGZyYW1lLCB0aW1lc3RhbXAsIHRpY2tlciwgZHJhZ2dlZCwgdmVydGljYWxfZHJhZ2dlZDtcclxuICAgICAgICB2YXIgJGluZGljYXRvcnMgPSAkKCc8dWwgY2xhc3M9XCJpbmRpY2F0b3JzXCI+PC91bD4nKTtcclxuXHJcblxyXG4gICAgICAgIC8vIEluaXRpYWxpemVcclxuICAgICAgICB2YXIgdmlldyA9ICQodGhpcyk7XHJcbiAgICAgICAgdmFyIHNob3dJbmRpY2F0b3JzID0gdmlldy5hdHRyKCdkYXRhLWluZGljYXRvcnMnKSB8fCBvcHRpb25zLmluZGljYXRvcnM7XHJcblxyXG4gICAgICAgIC8vIERvbid0IGRvdWJsZSBpbml0aWFsaXplLlxyXG4gICAgICAgIGlmICh2aWV3Lmhhc0NsYXNzKCdpbml0aWFsaXplZCcpKSB7XHJcbiAgICAgICAgICAvLyBSZWRyYXcgY2Fyb3VzZWwuXHJcbiAgICAgICAgICAkKHRoaXMpLnRyaWdnZXIoJ2Nhcm91c2VsTmV4dCcsIFswLjAwMDAwMV0pO1xyXG4gICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgLy8gT3B0aW9uc1xyXG4gICAgICAgIGlmIChvcHRpb25zLmZ1bGxfd2lkdGgpIHtcclxuICAgICAgICAgIG9wdGlvbnMuZGlzdCA9IDA7XHJcbiAgICAgICAgICB2YXIgZmlyc3RJbWFnZSA9IHZpZXcuZmluZCgnLmNhcm91c2VsLWl0ZW0gaW1nJykuZmlyc3QoKTtcclxuICAgICAgICAgIGlmIChmaXJzdEltYWdlLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBpbWFnZUhlaWdodCA9IGZpcnN0SW1hZ2Uub24oJ2xvYWQnLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgIHZpZXcuY3NzKCdoZWlnaHQnLCAkKHRoaXMpLmhlaWdodCgpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpbWFnZUhlaWdodCA9IHZpZXcuZmluZCgnLmNhcm91c2VsLWl0ZW0nKS5maXJzdCgpLmhlaWdodCgpO1xyXG4gICAgICAgICAgICB2aWV3LmNzcygnaGVpZ2h0JywgaW1hZ2VIZWlnaHQpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIC8vIE9mZnNldCBmaXhlZCBpdGVtcyB3aGVuIGluZGljYXRvcnMuXHJcbiAgICAgICAgICBpZiAoc2hvd0luZGljYXRvcnMpIHtcclxuICAgICAgICAgICAgdmlldy5maW5kKCcuY2Fyb3VzZWwtZml4ZWQtaXRlbScpLmFkZENsYXNzKCd3aXRoLWluZGljYXRvcnMnKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICB2aWV3LmFkZENsYXNzKCdpbml0aWFsaXplZCcpO1xyXG4gICAgICAgIHByZXNzZWQgPSBmYWxzZTtcclxuICAgICAgICBvZmZzZXQgPSB0YXJnZXQgPSAwO1xyXG4gICAgICAgIGltYWdlcyA9IFtdO1xyXG4gICAgICAgIGl0ZW1fd2lkdGggPSB2aWV3LmZpbmQoJy5jYXJvdXNlbC1pdGVtJykuZmlyc3QoKS5pbm5lcldpZHRoKCk7XHJcbiAgICAgICAgZGltID0gaXRlbV93aWR0aCAqIDIgKyBvcHRpb25zLnBhZGRpbmc7XHJcblxyXG4gICAgICAgIHZpZXcuZmluZCgnLmNhcm91c2VsLWl0ZW0nKS5lYWNoKGZ1bmN0aW9uIChpKSB7XHJcbiAgICAgICAgICBpbWFnZXMucHVzaCgkKHRoaXMpWzBdKTtcclxuICAgICAgICAgIGlmIChzaG93SW5kaWNhdG9ycykge1xyXG4gICAgICAgICAgICB2YXIgJGluZGljYXRvciA9ICQoJzxsaSBjbGFzcz1cImluZGljYXRvci1pdGVtXCI+PC9saT4nKTtcclxuXHJcbiAgICAgICAgICAgIC8vIEFkZCBhY3RpdmUgdG8gZmlyc3QgYnkgZGVmYXVsdC5cclxuICAgICAgICAgICAgaWYgKGkgPT09IDApIHtcclxuICAgICAgICAgICAgICAkaW5kaWNhdG9yLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gSGFuZGxlIGNsaWNrcyBvbiBpbmRpY2F0b3JzLlxyXG4gICAgICAgICAgICAkaW5kaWNhdG9yLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICB2YXIgaW5kZXggPSAkKHRoaXMpLmluZGV4KCk7XHJcbiAgICAgICAgICAgICAgY3ljbGVUbyhpbmRleCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAkaW5kaWNhdG9ycy5hcHBlbmQoJGluZGljYXRvcik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmIChzaG93SW5kaWNhdG9ycykge1xyXG4gICAgICAgICAgdmlldy5hcHBlbmQoJGluZGljYXRvcnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb3VudCA9IGltYWdlcy5sZW5ndGg7XHJcblxyXG5cclxuICAgICAgICBmdW5jdGlvbiBzZXR1cEV2ZW50cygpIHtcclxuICAgICAgICAgIGlmICh0eXBlb2Ygd2luZG93Lm9udG91Y2hzdGFydCAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgdmlld1swXS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdGFwKTtcclxuICAgICAgICAgICAgdmlld1swXS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCBkcmFnKTtcclxuICAgICAgICAgICAgdmlld1swXS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHJlbGVhc2UpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgdmlld1swXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0YXApO1xyXG4gICAgICAgICAgdmlld1swXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBkcmFnKTtcclxuICAgICAgICAgIHZpZXdbMF0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHJlbGVhc2UpO1xyXG4gICAgICAgICAgdmlld1swXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgcmVsZWFzZSk7XHJcbiAgICAgICAgICB2aWV3WzBdLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xpY2spO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24geHBvcyhlKSB7XHJcbiAgICAgICAgICAvLyB0b3VjaCBldmVudFxyXG4gICAgICAgICAgaWYgKGUudGFyZ2V0VG91Y2hlcyAmJiAoZS50YXJnZXRUb3VjaGVzLmxlbmd0aCA+PSAxKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZS50YXJnZXRUb3VjaGVzWzBdLmNsaWVudFg7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy8gbW91c2UgZXZlbnRcclxuICAgICAgICAgIHJldHVybiBlLmNsaWVudFg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiB5cG9zKGUpIHtcclxuICAgICAgICAgIC8vIHRvdWNoIGV2ZW50XHJcbiAgICAgICAgICBpZiAoZS50YXJnZXRUb3VjaGVzICYmIChlLnRhcmdldFRvdWNoZXMubGVuZ3RoID49IDEpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBlLnRhcmdldFRvdWNoZXNbMF0uY2xpZW50WTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAvLyBtb3VzZSBldmVudFxyXG4gICAgICAgICAgcmV0dXJuIGUuY2xpZW50WTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHdyYXAoeCkge1xyXG4gICAgICAgICAgcmV0dXJuICh4ID49IGNvdW50KSA/ICh4ICUgY291bnQpIDogKHggPCAwKSA/IHdyYXAoY291bnQgKyAoeCAlIGNvdW50KSkgOiB4O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc2Nyb2xsKHgpIHtcclxuICAgICAgICAgIHZhciBpLCBoYWxmLCBkZWx0YSwgZGlyLCB0d2VlbiwgZWwsIGFsaWdubWVudCwgeFRyYW5zbGF0aW9uO1xyXG5cclxuICAgICAgICAgIG9mZnNldCA9ICh0eXBlb2YgeCA9PT0gJ251bWJlcicpID8geCA6IG9mZnNldDtcclxuICAgICAgICAgIGNlbnRlciA9IE1hdGguZmxvb3IoKG9mZnNldCArIGRpbSAvIDIpIC8gZGltKTtcclxuICAgICAgICAgIGRlbHRhID0gb2Zmc2V0IC0gY2VudGVyICogZGltO1xyXG4gICAgICAgICAgZGlyID0gKGRlbHRhIDwgMCkgPyAxIDogLTE7XHJcbiAgICAgICAgICB0d2VlbiA9IC1kaXIgKiBkZWx0YSAqIDIgLyBkaW07XHJcbiAgICAgICAgICBoYWxmID0gY291bnQgPj4gMTtcclxuXHJcbiAgICAgICAgICBpZiAoIW9wdGlvbnMuZnVsbF93aWR0aCkge1xyXG4gICAgICAgICAgICBhbGlnbm1lbnQgPSAndHJhbnNsYXRlWCgnICsgKHZpZXdbMF0uY2xpZW50V2lkdGggLSBpdGVtX3dpZHRoKSAvIDIgKyAncHgpICc7XHJcbiAgICAgICAgICAgIGFsaWdubWVudCArPSAndHJhbnNsYXRlWSgnICsgKHZpZXdbMF0uY2xpZW50SGVpZ2h0IC0gaXRlbV93aWR0aCkgLyAyICsgJ3B4KSc7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBhbGlnbm1lbnQgPSAndHJhbnNsYXRlWCgwKSc7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy8gU2V0IGluZGljYXRvciBhY3RpdmVcclxuICAgICAgICAgIGlmIChzaG93SW5kaWNhdG9ycykge1xyXG4gICAgICAgICAgICB2YXIgZGlmZiA9IChjZW50ZXIgJSBjb3VudCk7XHJcbiAgICAgICAgICAgIHZhciBhY3RpdmVJbmRpY2F0b3IgPSAkaW5kaWNhdG9ycy5maW5kKCcuaW5kaWNhdG9yLWl0ZW0uYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIGlmIChhY3RpdmVJbmRpY2F0b3IuaW5kZXgoKSAhPT0gZGlmZikge1xyXG4gICAgICAgICAgICAgIGFjdGl2ZUluZGljYXRvci5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgJGluZGljYXRvcnMuZmluZCgnLmluZGljYXRvci1pdGVtJykuZXEoZGlmZikuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy8gY2VudGVyXHJcbiAgICAgICAgICAvLyBEb24ndCBzaG93IHdyYXBwZWQgaXRlbXMuXHJcbiAgICAgICAgICBpZiAoIW9wdGlvbnMubm9fd3JhcCB8fCAoY2VudGVyID49IDAgJiYgY2VudGVyIDwgY291bnQpKSB7XHJcbiAgICAgICAgICAgIGVsID0gaW1hZ2VzW3dyYXAoY2VudGVyKV07XHJcbiAgICAgICAgICAgIGVsLnN0eWxlW3hmb3JtXSA9IGFsaWdubWVudCArXHJcbiAgICAgICAgICAgICAgJyB0cmFuc2xhdGVYKCcgKyAoLWRlbHRhIC8gMikgKyAncHgpJyArXHJcbiAgICAgICAgICAgICAgJyB0cmFuc2xhdGVYKCcgKyAoZGlyICogb3B0aW9ucy5zaGlmdCAqIHR3ZWVuICogaSkgKyAncHgpJyArXHJcbiAgICAgICAgICAgICAgJyB0cmFuc2xhdGVaKCcgKyAob3B0aW9ucy5kaXN0ICogdHdlZW4pICsgJ3B4KSc7XHJcbiAgICAgICAgICAgIGVsLnN0eWxlLnpJbmRleCA9IDA7XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmZ1bGxfd2lkdGgpIHsgdHdlZW5lZE9wYWNpdHkgPSAxOyB9XHJcbiAgICAgICAgICAgIGVsc2UgeyB0d2VlbmVkT3BhY2l0eSA9IDEgLSAwLjIgKiB0d2VlbjsgfVxyXG4gICAgICAgICAgICBlbC5zdHlsZS5vcGFjaXR5ID0gdHdlZW5lZE9wYWNpdHk7XHJcbiAgICAgICAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGZvciAoaSA9IDE7IGkgPD0gaGFsZjsgKytpKSB7XHJcbiAgICAgICAgICAgIC8vIHJpZ2h0IHNpZGVcclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuZnVsbF93aWR0aCkge1xyXG4gICAgICAgICAgICAgIHpUcmFuc2xhdGlvbiA9IG9wdGlvbnMuZGlzdDtcclxuICAgICAgICAgICAgICB0d2VlbmVkT3BhY2l0eSA9IChpID09PSBoYWxmICYmIGRlbHRhIDwgMCkgPyAxIC0gdHdlZW4gOiAxO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHpUcmFuc2xhdGlvbiA9IG9wdGlvbnMuZGlzdCAqIChpICogMiArIHR3ZWVuICogZGlyKTtcclxuICAgICAgICAgICAgICB0d2VlbmVkT3BhY2l0eSA9IDEgLSAwLjIgKiAoaSAqIDIgKyB0d2VlbiAqIGRpcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gRG9uJ3Qgc2hvdyB3cmFwcGVkIGl0ZW1zLlxyXG4gICAgICAgICAgICBpZiAoIW9wdGlvbnMubm9fd3JhcCB8fCBjZW50ZXIgKyBpIDwgY291bnQpIHtcclxuICAgICAgICAgICAgICBlbCA9IGltYWdlc1t3cmFwKGNlbnRlciArIGkpXTtcclxuICAgICAgICAgICAgICBlbC5zdHlsZVt4Zm9ybV0gPSBhbGlnbm1lbnQgK1xyXG4gICAgICAgICAgICAgICAgJyB0cmFuc2xhdGVYKCcgKyAob3B0aW9ucy5zaGlmdCArIChkaW0gKiBpIC0gZGVsdGEpIC8gMikgKyAncHgpJyArXHJcbiAgICAgICAgICAgICAgICAnIHRyYW5zbGF0ZVooJyArIHpUcmFuc2xhdGlvbiArICdweCknO1xyXG4gICAgICAgICAgICAgIGVsLnN0eWxlLnpJbmRleCA9IC1pO1xyXG4gICAgICAgICAgICAgIGVsLnN0eWxlLm9wYWNpdHkgPSB0d2VlbmVkT3BhY2l0eTtcclxuICAgICAgICAgICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgIC8vIGxlZnQgc2lkZVxyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5mdWxsX3dpZHRoKSB7XHJcbiAgICAgICAgICAgICAgelRyYW5zbGF0aW9uID0gb3B0aW9ucy5kaXN0O1xyXG4gICAgICAgICAgICAgIHR3ZWVuZWRPcGFjaXR5ID0gKGkgPT09IGhhbGYgJiYgZGVsdGEgPiAwKSA/IDEgLSB0d2VlbiA6IDE7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgelRyYW5zbGF0aW9uID0gb3B0aW9ucy5kaXN0ICogKGkgKiAyIC0gdHdlZW4gKiBkaXIpO1xyXG4gICAgICAgICAgICAgIHR3ZWVuZWRPcGFjaXR5ID0gMSAtIDAuMiAqIChpICogMiAtIHR3ZWVuICogZGlyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBEb24ndCBzaG93IHdyYXBwZWQgaXRlbXMuXHJcbiAgICAgICAgICAgIGlmICghb3B0aW9ucy5ub193cmFwIHx8IGNlbnRlciAtIGkgPj0gMCkge1xyXG4gICAgICAgICAgICAgIGVsID0gaW1hZ2VzW3dyYXAoY2VudGVyIC0gaSldO1xyXG4gICAgICAgICAgICAgIGVsLnN0eWxlW3hmb3JtXSA9IGFsaWdubWVudCArXHJcbiAgICAgICAgICAgICAgICAnIHRyYW5zbGF0ZVgoJyArICgtb3B0aW9ucy5zaGlmdCArICgtZGltICogaSAtIGRlbHRhKSAvIDIpICsgJ3B4KScgK1xyXG4gICAgICAgICAgICAgICAgJyB0cmFuc2xhdGVaKCcgKyB6VHJhbnNsYXRpb24gKyAncHgpJztcclxuICAgICAgICAgICAgICBlbC5zdHlsZS56SW5kZXggPSAtaTtcclxuICAgICAgICAgICAgICBlbC5zdHlsZS5vcGFjaXR5ID0gdHdlZW5lZE9wYWNpdHk7XHJcbiAgICAgICAgICAgICAgZWwuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAvLyBjZW50ZXJcclxuICAgICAgICAgIC8vIERvbid0IHNob3cgd3JhcHBlZCBpdGVtcy5cclxuICAgICAgICAgIGlmICghb3B0aW9ucy5ub193cmFwIHx8IChjZW50ZXIgPj0gMCAmJiBjZW50ZXIgPCBjb3VudCkpIHtcclxuICAgICAgICAgICAgZWwgPSBpbWFnZXNbd3JhcChjZW50ZXIpXTtcclxuICAgICAgICAgICAgZWwuc3R5bGVbeGZvcm1dID0gYWxpZ25tZW50ICtcclxuICAgICAgICAgICAgICAnIHRyYW5zbGF0ZVgoJyArICgtZGVsdGEgLyAyKSArICdweCknICtcclxuICAgICAgICAgICAgICAnIHRyYW5zbGF0ZVgoJyArIChkaXIgKiBvcHRpb25zLnNoaWZ0ICogdHdlZW4pICsgJ3B4KScgK1xyXG4gICAgICAgICAgICAgICcgdHJhbnNsYXRlWignICsgKG9wdGlvbnMuZGlzdCAqIHR3ZWVuKSArICdweCknO1xyXG4gICAgICAgICAgICBlbC5zdHlsZS56SW5kZXggPSAwO1xyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5mdWxsX3dpZHRoKSB7IHR3ZWVuZWRPcGFjaXR5ID0gMTsgfVxyXG4gICAgICAgICAgICBlbHNlIHsgdHdlZW5lZE9wYWNpdHkgPSAxIC0gMC4yICogdHdlZW47IH1cclxuICAgICAgICAgICAgZWwuc3R5bGUub3BhY2l0eSA9IHR3ZWVuZWRPcGFjaXR5O1xyXG4gICAgICAgICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHRyYWNrKCkge1xyXG4gICAgICAgICAgdmFyIG5vdywgZWxhcHNlZCwgZGVsdGEsIHY7XHJcblxyXG4gICAgICAgICAgbm93ID0gRGF0ZS5ub3coKTtcclxuICAgICAgICAgIGVsYXBzZWQgPSBub3cgLSB0aW1lc3RhbXA7XHJcbiAgICAgICAgICB0aW1lc3RhbXAgPSBub3c7XHJcbiAgICAgICAgICBkZWx0YSA9IG9mZnNldCAtIGZyYW1lO1xyXG4gICAgICAgICAgZnJhbWUgPSBvZmZzZXQ7XHJcblxyXG4gICAgICAgICAgdiA9IDEwMDAgKiBkZWx0YSAvICgxICsgZWxhcHNlZCk7XHJcbiAgICAgICAgICB2ZWxvY2l0eSA9IDAuOCAqIHYgKyAwLjIgKiB2ZWxvY2l0eTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGF1dG9TY3JvbGwoKSB7XHJcbiAgICAgICAgICB2YXIgZWxhcHNlZCwgZGVsdGE7XHJcblxyXG4gICAgICAgICAgaWYgKGFtcGxpdHVkZSkge1xyXG4gICAgICAgICAgICBlbGFwc2VkID0gRGF0ZS5ub3coKSAtIHRpbWVzdGFtcDtcclxuICAgICAgICAgICAgZGVsdGEgPSBhbXBsaXR1ZGUgKiBNYXRoLmV4cCgtZWxhcHNlZCAvIG9wdGlvbnMudGltZV9jb25zdGFudCk7XHJcbiAgICAgICAgICAgIGlmIChkZWx0YSA+IDIgfHwgZGVsdGEgPCAtMikge1xyXG4gICAgICAgICAgICAgICAgc2Nyb2xsKHRhcmdldCAtIGRlbHRhKTtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShhdXRvU2Nyb2xsKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHNjcm9sbCh0YXJnZXQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBjbGljayhlKSB7XHJcbiAgICAgICAgICAvLyBEaXNhYmxlIGNsaWNrcyBpZiBjYXJvdXNlbCB3YXMgZHJhZ2dlZC5cclxuICAgICAgICAgIGlmIChkcmFnZ2VkKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgIH0gZWxzZSBpZiAoIW9wdGlvbnMuZnVsbF93aWR0aCkge1xyXG4gICAgICAgICAgICB2YXIgY2xpY2tlZEluZGV4ID0gJChlLnRhcmdldCkuY2xvc2VzdCgnLmNhcm91c2VsLWl0ZW0nKS5pbmRleCgpO1xyXG4gICAgICAgICAgICB2YXIgZGlmZiA9IChjZW50ZXIgJSBjb3VudCkgLSBjbGlja2VkSW5kZXg7XHJcblxyXG4gICAgICAgICAgICAvLyBEaXNhYmxlIGNsaWNrcyBpZiBjYXJvdXNlbCB3YXMgc2hpZnRlZCBieSBjbGlja1xyXG4gICAgICAgICAgICBpZiAoZGlmZiAhPT0gMCkge1xyXG4gICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGN5Y2xlVG8oY2xpY2tlZEluZGV4KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGN5Y2xlVG8obikge1xyXG4gICAgICAgICAgdmFyIGRpZmYgPSAoY2VudGVyICUgY291bnQpIC0gbjtcclxuXHJcbiAgICAgICAgICAvLyBBY2NvdW50IGZvciB3cmFwYXJvdW5kLlxyXG4gICAgICAgICAgaWYgKCFvcHRpb25zLm5vX3dyYXApIHtcclxuICAgICAgICAgICAgaWYgKGRpZmYgPCAwKSB7XHJcbiAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKGRpZmYgKyBjb3VudCkgPCBNYXRoLmFicyhkaWZmKSkgeyBkaWZmICs9IGNvdW50OyB9XHJcblxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRpZmYgPiAwKSB7XHJcbiAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKGRpZmYgLSBjb3VudCkgPCBkaWZmKSB7IGRpZmYgLT0gY291bnQ7IH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIC8vIENhbGwgcHJldiBvciBuZXh0IGFjY29yZGluZ2x5LlxyXG4gICAgICAgICAgaWYgKGRpZmYgPCAwKSB7XHJcbiAgICAgICAgICAgIHZpZXcudHJpZ2dlcignY2Fyb3VzZWxOZXh0JywgW01hdGguYWJzKGRpZmYpXSk7XHJcblxyXG4gICAgICAgICAgfSBlbHNlIGlmIChkaWZmID4gMCkge1xyXG4gICAgICAgICAgICB2aWV3LnRyaWdnZXIoJ2Nhcm91c2VsUHJldicsIFtkaWZmXSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiB0YXAoZSkge1xyXG4gICAgICAgICAgcHJlc3NlZCA9IHRydWU7XHJcbiAgICAgICAgICBkcmFnZ2VkID0gZmFsc2U7XHJcbiAgICAgICAgICB2ZXJ0aWNhbF9kcmFnZ2VkID0gZmFsc2U7XHJcbiAgICAgICAgICByZWZlcmVuY2UgPSB4cG9zKGUpO1xyXG4gICAgICAgICAgcmVmZXJlbmNlWSA9IHlwb3MoZSk7XHJcblxyXG4gICAgICAgICAgdmVsb2NpdHkgPSBhbXBsaXR1ZGUgPSAwO1xyXG4gICAgICAgICAgZnJhbWUgPSBvZmZzZXQ7XHJcbiAgICAgICAgICB0aW1lc3RhbXAgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aWNrZXIpO1xyXG4gICAgICAgICAgdGlja2VyID0gc2V0SW50ZXJ2YWwodHJhY2ssIDEwMCk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZHJhZyhlKSB7XHJcbiAgICAgICAgICB2YXIgeCwgZGVsdGEsIGRlbHRhWTtcclxuICAgICAgICAgIGlmIChwcmVzc2VkKSB7XHJcbiAgICAgICAgICAgIHggPSB4cG9zKGUpO1xyXG4gICAgICAgICAgICB5ID0geXBvcyhlKTtcclxuICAgICAgICAgICAgZGVsdGEgPSByZWZlcmVuY2UgLSB4O1xyXG4gICAgICAgICAgICBkZWx0YVkgPSBNYXRoLmFicyhyZWZlcmVuY2VZIC0geSk7XHJcbiAgICAgICAgICAgIGlmIChkZWx0YVkgPCAzMCAmJiAhdmVydGljYWxfZHJhZ2dlZCkge1xyXG4gICAgICAgICAgICAgIC8vIElmIHZlcnRpY2FsIHNjcm9sbGluZyBkb24ndCBhbGxvdyBkcmFnZ2luZy5cclxuICAgICAgICAgICAgICBpZiAoZGVsdGEgPiAyIHx8IGRlbHRhIDwgLTIpIHtcclxuICAgICAgICAgICAgICAgIGRyYWdnZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgcmVmZXJlbmNlID0geDtcclxuICAgICAgICAgICAgICAgIHNjcm9sbChvZmZzZXQgKyBkZWx0YSk7XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSBlbHNlIGlmIChkcmFnZ2VkKSB7XHJcbiAgICAgICAgICAgICAgLy8gSWYgZHJhZ2dpbmcgZG9uJ3QgYWxsb3cgdmVydGljYWwgc2Nyb2xsLlxyXG4gICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgLy8gVmVydGljYWwgc2Nyb2xsaW5nLlxyXG4gICAgICAgICAgICAgIHZlcnRpY2FsX2RyYWdnZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgaWYgKGRyYWdnZWQpIHtcclxuICAgICAgICAgICAgLy8gSWYgZHJhZ2dpbmcgZG9uJ3QgYWxsb3cgdmVydGljYWwgc2Nyb2xsLlxyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHJlbGVhc2UoZSkge1xyXG4gICAgICAgICAgaWYgKHByZXNzZWQpIHtcclxuICAgICAgICAgICAgcHJlc3NlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGlja2VyKTtcclxuICAgICAgICAgIHRhcmdldCA9IG9mZnNldDtcclxuICAgICAgICAgIGlmICh2ZWxvY2l0eSA+IDEwIHx8IHZlbG9jaXR5IDwgLTEwKSB7XHJcbiAgICAgICAgICAgIGFtcGxpdHVkZSA9IDAuOSAqIHZlbG9jaXR5O1xyXG4gICAgICAgICAgICB0YXJnZXQgPSBvZmZzZXQgKyBhbXBsaXR1ZGU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB0YXJnZXQgPSBNYXRoLnJvdW5kKHRhcmdldCAvIGRpbSkgKiBkaW07XHJcblxyXG4gICAgICAgICAgLy8gTm8gd3JhcCBvZiBpdGVtcy5cclxuICAgICAgICAgIGlmIChvcHRpb25zLm5vX3dyYXApIHtcclxuICAgICAgICAgICAgaWYgKHRhcmdldCA+PSBkaW0gKiAoY291bnQgLSAxKSkge1xyXG4gICAgICAgICAgICAgIHRhcmdldCA9IGRpbSAqIChjb3VudCAtIDEpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRhcmdldCA8IDApIHtcclxuICAgICAgICAgICAgICB0YXJnZXQgPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBhbXBsaXR1ZGUgPSB0YXJnZXQgLSBvZmZzZXQ7XHJcbiAgICAgICAgICB0aW1lc3RhbXAgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGF1dG9TY3JvbGwpO1xyXG5cclxuICAgICAgICAgIGlmIChkcmFnZ2VkKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHhmb3JtID0gJ3RyYW5zZm9ybSc7XHJcbiAgICAgICAgWyd3ZWJraXQnLCAnTW96JywgJ08nLCAnbXMnXS5ldmVyeShmdW5jdGlvbiAocHJlZml4KSB7XHJcbiAgICAgICAgICB2YXIgZSA9IHByZWZpeCArICdUcmFuc2Zvcm0nO1xyXG4gICAgICAgICAgaWYgKHR5cGVvZiBkb2N1bWVudC5ib2R5LnN0eWxlW2VdICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICB4Zm9ybSA9IGU7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0pO1xyXG5cclxuXHJcblxyXG4gICAgICAgIHdpbmRvdy5vbnJlc2l6ZSA9IHNjcm9sbDtcclxuXHJcbiAgICAgICAgc2V0dXBFdmVudHMoKTtcclxuICAgICAgICBzY3JvbGwob2Zmc2V0KTtcclxuXHJcbiAgICAgICAgJCh0aGlzKS5vbignY2Fyb3VzZWxOZXh0JywgZnVuY3Rpb24oZSwgbikge1xyXG4gICAgICAgICAgaWYgKG4gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBuID0gMTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHRhcmdldCA9IG9mZnNldCArIGRpbSAqIG47XHJcbiAgICAgICAgICBpZiAob2Zmc2V0ICE9PSB0YXJnZXQpIHtcclxuICAgICAgICAgICAgYW1wbGl0dWRlID0gdGFyZ2V0IC0gb2Zmc2V0O1xyXG4gICAgICAgICAgICB0aW1lc3RhbXAgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYXV0b1Njcm9sbCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICQodGhpcykub24oJ2Nhcm91c2VsUHJldicsIGZ1bmN0aW9uKGUsIG4pIHtcclxuICAgICAgICAgIGlmIChuID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgbiA9IDE7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB0YXJnZXQgPSBvZmZzZXQgLSBkaW0gKiBuO1xyXG4gICAgICAgICAgaWYgKG9mZnNldCAhPT0gdGFyZ2V0KSB7XHJcbiAgICAgICAgICAgIGFtcGxpdHVkZSA9IHRhcmdldCAtIG9mZnNldDtcclxuICAgICAgICAgICAgdGltZXN0YW1wID0gRGF0ZS5ub3coKTtcclxuICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGF1dG9TY3JvbGwpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkKHRoaXMpLm9uKCdjYXJvdXNlbFNldCcsIGZ1bmN0aW9uKGUsIG4pIHtcclxuICAgICAgICAgIGlmIChuID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgbiA9IDA7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBjeWNsZVRvKG4pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgfSk7XHJcblxyXG5cclxuXHJcbiAgICB9LFxyXG4gICAgbmV4dCA6IGZ1bmN0aW9uKG4pIHtcclxuICAgICAgJCh0aGlzKS50cmlnZ2VyKCdjYXJvdXNlbE5leHQnLCBbbl0pO1xyXG4gICAgfSxcclxuICAgIHByZXYgOiBmdW5jdGlvbihuKSB7XHJcbiAgICAgICQodGhpcykudHJpZ2dlcignY2Fyb3VzZWxQcmV2JywgW25dKTtcclxuICAgIH0sXHJcbiAgICBzZXQgOiBmdW5jdGlvbihuKSB7XHJcbiAgICAgICQodGhpcykudHJpZ2dlcignY2Fyb3VzZWxTZXQnLCBbbl0pO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG5cclxuICAgICQuZm4uY2Fyb3VzZWwgPSBmdW5jdGlvbihtZXRob2RPck9wdGlvbnMpIHtcclxuICAgICAgaWYgKCBtZXRob2RzW21ldGhvZE9yT3B0aW9uc10gKSB7XHJcbiAgICAgICAgcmV0dXJuIG1ldGhvZHNbIG1ldGhvZE9yT3B0aW9ucyBdLmFwcGx5KCB0aGlzLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCggYXJndW1lbnRzLCAxICkpO1xyXG4gICAgICB9IGVsc2UgaWYgKCB0eXBlb2YgbWV0aG9kT3JPcHRpb25zID09PSAnb2JqZWN0JyB8fCAhIG1ldGhvZE9yT3B0aW9ucyApIHtcclxuICAgICAgICAvLyBEZWZhdWx0IHRvIFwiaW5pdFwiXHJcbiAgICAgICAgcmV0dXJuIG1ldGhvZHMuaW5pdC5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJC5lcnJvciggJ01ldGhvZCAnICsgIG1ldGhvZE9yT3B0aW9ucyArICcgZG9lcyBub3QgZXhpc3Qgb24galF1ZXJ5LmNhcm91c2VsJyApO1xyXG4gICAgICB9XHJcbiAgICB9OyAvLyBQbHVnaW4gZW5kXHJcbn0oIGpRdWVyeSApKTsiLCIvKiFcclxuICogTWF0ZXJpYWxpemUgdjAuOTcuOCAoaHR0cDovL21hdGVyaWFsaXplY3NzLmNvbSlcclxuICogQ29weXJpZ2h0IDIwMTQtMjAxNSBNYXRlcmlhbGl6ZVxyXG4gKiBNSVQgTGljZW5zZSAoaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL0RvZ2ZhbG8vbWF0ZXJpYWxpemUvbWFzdGVyL0xJQ0VOU0UpXHJcbiAqL1xyXG5pZihcInVuZGVmaW5lZFwiPT10eXBlb2YgalF1ZXJ5KXt2YXIgalF1ZXJ5O2pRdWVyeT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlPyQ9cmVxdWlyZShcImpxdWVyeVwiKTokfWpRdWVyeS5lYXNpbmcuanN3aW5nPWpRdWVyeS5lYXNpbmcuc3dpbmcsalF1ZXJ5LmV4dGVuZChqUXVlcnkuZWFzaW5nLHtkZWY6XCJlYXNlT3V0UXVhZFwiLHN3aW5nOmZ1bmN0aW9uKGEsYixjLGQsZSl7cmV0dXJuIGpRdWVyeS5lYXNpbmdbalF1ZXJ5LmVhc2luZy5kZWZdKGEsYixjLGQsZSl9LGVhc2VJblF1YWQ6ZnVuY3Rpb24oYSxiLGMsZCxlKXtyZXR1cm4gZCooYi89ZSkqYitjfSxlYXNlT3V0UXVhZDpmdW5jdGlvbihhLGIsYyxkLGUpe3JldHVybi1kKihiLz1lKSooYi0yKStjfSxlYXNlSW5PdXRRdWFkOmZ1bmN0aW9uKGEsYixjLGQsZSl7cmV0dXJuKGIvPWUvMik8MT9kLzIqYipiK2M6LWQvMiooLS1iKihiLTIpLTEpK2N9LGVhc2VJbkN1YmljOmZ1bmN0aW9uKGEsYixjLGQsZSl7cmV0dXJuIGQqKGIvPWUpKmIqYitjfSxlYXNlT3V0Q3ViaWM6ZnVuY3Rpb24oYSxiLGMsZCxlKXtyZXR1cm4gZCooKGI9Yi9lLTEpKmIqYisxKStjfSxlYXNlSW5PdXRDdWJpYzpmdW5jdGlvbihhLGIsYyxkLGUpe3JldHVybihiLz1lLzIpPDE/ZC8yKmIqYipiK2M6ZC8yKigoYi09MikqYipiKzIpK2N9LGVhc2VJblF1YXJ0OmZ1bmN0aW9uKGEsYixjLGQsZSl7cmV0dXJuIGQqKGIvPWUpKmIqYipiK2N9LGVhc2VPdXRRdWFydDpmdW5jdGlvbihhLGIsYyxkLGUpe3JldHVybi1kKigoYj1iL2UtMSkqYipiKmItMSkrY30sZWFzZUluT3V0UXVhcnQ6ZnVuY3Rpb24oYSxiLGMsZCxlKXtyZXR1cm4oYi89ZS8yKTwxP2QvMipiKmIqYipiK2M6LWQvMiooKGItPTIpKmIqYipiLTIpK2N9LGVhc2VJblF1aW50OmZ1bmN0aW9uKGEsYixjLGQsZSl7cmV0dXJuIGQqKGIvPWUpKmIqYipiKmIrY30sZWFzZU91dFF1aW50OmZ1bmN0aW9uKGEsYixjLGQsZSl7cmV0dXJuIGQqKChiPWIvZS0xKSpiKmIqYipiKzEpK2N9LGVhc2VJbk91dFF1aW50OmZ1bmN0aW9uKGEsYixjLGQsZSl7cmV0dXJuKGIvPWUvMik8MT9kLzIqYipiKmIqYipiK2M6ZC8yKigoYi09MikqYipiKmIqYisyKStjfSxlYXNlSW5TaW5lOmZ1bmN0aW9uKGEsYixjLGQsZSl7cmV0dXJuLWQqTWF0aC5jb3MoYi9lKihNYXRoLlBJLzIpKStkK2N9LGVhc2VPdXRTaW5lOmZ1bmN0aW9uKGEsYixjLGQsZSl7cmV0dXJuIGQqTWF0aC5zaW4oYi9lKihNYXRoLlBJLzIpKStjfSxlYXNlSW5PdXRTaW5lOmZ1bmN0aW9uKGEsYixjLGQsZSl7cmV0dXJuLWQvMiooTWF0aC5jb3MoTWF0aC5QSSpiL2UpLTEpK2N9LGVhc2VJbkV4cG86ZnVuY3Rpb24oYSxiLGMsZCxlKXtyZXR1cm4gMD09Yj9jOmQqTWF0aC5wb3coMiwxMCooYi9lLTEpKStjfSxlYXNlT3V0RXhwbzpmdW5jdGlvbihhLGIsYyxkLGUpe3JldHVybiBiPT1lP2MrZDpkKigtTWF0aC5wb3coMiwtMTAqYi9lKSsxKStjfSxlYXNlSW5PdXRFeHBvOmZ1bmN0aW9uKGEsYixjLGQsZSl7cmV0dXJuIDA9PWI/YzpiPT1lP2MrZDooYi89ZS8yKTwxP2QvMipNYXRoLnBvdygyLDEwKihiLTEpKStjOmQvMiooLU1hdGgucG93KDIsLTEwKi0tYikrMikrY30sZWFzZUluQ2lyYzpmdW5jdGlvbihhLGIsYyxkLGUpe3JldHVybi1kKihNYXRoLnNxcnQoMS0oYi89ZSkqYiktMSkrY30sZWFzZU91dENpcmM6ZnVuY3Rpb24oYSxiLGMsZCxlKXtyZXR1cm4gZCpNYXRoLnNxcnQoMS0oYj1iL2UtMSkqYikrY30sZWFzZUluT3V0Q2lyYzpmdW5jdGlvbihhLGIsYyxkLGUpe3JldHVybihiLz1lLzIpPDE/LWQvMiooTWF0aC5zcXJ0KDEtYipiKS0xKStjOmQvMiooTWF0aC5zcXJ0KDEtKGItPTIpKmIpKzEpK2N9LGVhc2VJbkVsYXN0aWM6ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZj0xLjcwMTU4LGc9MCxoPWQ7aWYoMD09YilyZXR1cm4gYztpZigxPT0oYi89ZSkpcmV0dXJuIGMrZDtpZihnfHwoZz0uMyplKSxoPE1hdGguYWJzKGQpKXtoPWQ7dmFyIGY9Zy80fWVsc2UgdmFyIGY9Zy8oMipNYXRoLlBJKSpNYXRoLmFzaW4oZC9oKTtyZXR1cm4tKGgqTWF0aC5wb3coMiwxMCooYi09MSkpKk1hdGguc2luKChiKmUtZikqKDIqTWF0aC5QSSkvZykpK2N9LGVhc2VPdXRFbGFzdGljOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY9MS43MDE1OCxnPTAsaD1kO2lmKDA9PWIpcmV0dXJuIGM7aWYoMT09KGIvPWUpKXJldHVybiBjK2Q7aWYoZ3x8KGc9LjMqZSksaDxNYXRoLmFicyhkKSl7aD1kO3ZhciBmPWcvNH1lbHNlIHZhciBmPWcvKDIqTWF0aC5QSSkqTWF0aC5hc2luKGQvaCk7cmV0dXJuIGgqTWF0aC5wb3coMiwtMTAqYikqTWF0aC5zaW4oKGIqZS1mKSooMipNYXRoLlBJKS9nKStkK2N9LGVhc2VJbk91dEVsYXN0aWM6ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZj0xLjcwMTU4LGc9MCxoPWQ7aWYoMD09YilyZXR1cm4gYztpZigyPT0oYi89ZS8yKSlyZXR1cm4gYytkO2lmKGd8fChnPWUqKC4zKjEuNSkpLGg8TWF0aC5hYnMoZCkpe2g9ZDt2YXIgZj1nLzR9ZWxzZSB2YXIgZj1nLygyKk1hdGguUEkpKk1hdGguYXNpbihkL2gpO3JldHVybiAxPmI/LS41KihoKk1hdGgucG93KDIsMTAqKGItPTEpKSpNYXRoLnNpbigoYiplLWYpKigyKk1hdGguUEkpL2cpKStjOmgqTWF0aC5wb3coMiwtMTAqKGItPTEpKSpNYXRoLnNpbigoYiplLWYpKigyKk1hdGguUEkpL2cpKi41K2QrY30sZWFzZUluQmFjazpmdW5jdGlvbihhLGIsYyxkLGUsZil7cmV0dXJuIHZvaWQgMD09ZiYmKGY9MS43MDE1OCksZCooYi89ZSkqYiooKGYrMSkqYi1mKStjfSxlYXNlT3V0QmFjazpmdW5jdGlvbihhLGIsYyxkLGUsZil7cmV0dXJuIHZvaWQgMD09ZiYmKGY9MS43MDE1OCksZCooKGI9Yi9lLTEpKmIqKChmKzEpKmIrZikrMSkrY30sZWFzZUluT3V0QmFjazpmdW5jdGlvbihhLGIsYyxkLGUsZil7cmV0dXJuIHZvaWQgMD09ZiYmKGY9MS43MDE1OCksKGIvPWUvMik8MT9kLzIqKGIqYiooKChmKj0xLjUyNSkrMSkqYi1mKSkrYzpkLzIqKChiLT0yKSpiKigoKGYqPTEuNTI1KSsxKSpiK2YpKzIpK2N9LGVhc2VJbkJvdW5jZTpmdW5jdGlvbihhLGIsYyxkLGUpe3JldHVybiBkLWpRdWVyeS5lYXNpbmcuZWFzZU91dEJvdW5jZShhLGUtYiwwLGQsZSkrY30sZWFzZU91dEJvdW5jZTpmdW5jdGlvbihhLGIsYyxkLGUpe3JldHVybihiLz1lKTwxLzIuNzU/ZCooNy41NjI1KmIqYikrYzoyLzIuNzU+Yj9kKig3LjU2MjUqKGItPTEuNS8yLjc1KSpiKy43NSkrYzoyLjUvMi43NT5iP2QqKDcuNTYyNSooYi09Mi4yNS8yLjc1KSpiKy45Mzc1KStjOmQqKDcuNTYyNSooYi09Mi42MjUvMi43NSkqYisuOTg0Mzc1KStjfSxlYXNlSW5PdXRCb3VuY2U6ZnVuY3Rpb24oYSxiLGMsZCxlKXtyZXR1cm4gZS8yPmI/LjUqalF1ZXJ5LmVhc2luZy5lYXNlSW5Cb3VuY2UoYSwyKmIsMCxkLGUpK2M6LjUqalF1ZXJ5LmVhc2luZy5lYXNlT3V0Qm91bmNlKGEsMipiLWUsMCxkLGUpKy41KmQrY319KSxqUXVlcnkuZXh0ZW5kKGpRdWVyeS5lYXNpbmcse2Vhc2VJbk91dE1hdGVyaWFsOmZ1bmN0aW9uKGEsYixjLGQsZSl7cmV0dXJuKGIvPWUvMik8MT9kLzIqYipiK2M6ZC80KigoYi09MikqYipiKzIpK2N9fSksalF1ZXJ5LlZlbG9jaXR5P2NvbnNvbGUubG9nKFwiVmVsb2NpdHkgaXMgYWxyZWFkeSBsb2FkZWQuIFlvdSBtYXkgYmUgbmVlZGxlc3NseSBpbXBvcnRpbmcgVmVsb2NpdHkgYWdhaW47IG5vdGUgdGhhdCBNYXRlcmlhbGl6ZSBpbmNsdWRlcyBWZWxvY2l0eS5cIik6KCFmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3ZhciBiPWEubGVuZ3RoLGQ9Yy50eXBlKGEpO3JldHVyblwiZnVuY3Rpb25cIj09PWR8fGMuaXNXaW5kb3coYSk/ITE6MT09PWEubm9kZVR5cGUmJmI/ITA6XCJhcnJheVwiPT09ZHx8MD09PWJ8fFwibnVtYmVyXCI9PXR5cGVvZiBiJiZiPjAmJmItMSBpbiBhfWlmKCFhLmpRdWVyeSl7dmFyIGM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IGMuZm4uaW5pdChhLGIpfTtjLmlzV2luZG93PWZ1bmN0aW9uKGEpe3JldHVybiBudWxsIT1hJiZhPT1hLndpbmRvd30sYy50eXBlPWZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hP2ErXCJcIjpcIm9iamVjdFwiPT10eXBlb2YgYXx8XCJmdW5jdGlvblwiPT10eXBlb2YgYT9lW2cuY2FsbChhKV18fFwib2JqZWN0XCI6dHlwZW9mIGF9LGMuaXNBcnJheT1BcnJheS5pc0FycmF5fHxmdW5jdGlvbihhKXtyZXR1cm5cImFycmF5XCI9PT1jLnR5cGUoYSl9LGMuaXNQbGFpbk9iamVjdD1mdW5jdGlvbihhKXt2YXIgYjtpZighYXx8XCJvYmplY3RcIiE9PWMudHlwZShhKXx8YS5ub2RlVHlwZXx8Yy5pc1dpbmRvdyhhKSlyZXR1cm4hMTt0cnl7aWYoYS5jb25zdHJ1Y3RvciYmIWYuY2FsbChhLFwiY29uc3RydWN0b3JcIikmJiFmLmNhbGwoYS5jb25zdHJ1Y3Rvci5wcm90b3R5cGUsXCJpc1Byb3RvdHlwZU9mXCIpKXJldHVybiExfWNhdGNoKGQpe3JldHVybiExfWZvcihiIGluIGEpO3JldHVybiB2b2lkIDA9PT1ifHxmLmNhbGwoYSxiKX0sYy5lYWNoPWZ1bmN0aW9uKGEsYyxkKXt2YXIgZSxmPTAsZz1hLmxlbmd0aCxoPWIoYSk7aWYoZCl7aWYoaClmb3IoO2c+ZiYmKGU9Yy5hcHBseShhW2ZdLGQpLGUhPT0hMSk7ZisrKTtlbHNlIGZvcihmIGluIGEpaWYoZT1jLmFwcGx5KGFbZl0sZCksZT09PSExKWJyZWFrfWVsc2UgaWYoaClmb3IoO2c+ZiYmKGU9Yy5jYWxsKGFbZl0sZixhW2ZdKSxlIT09ITEpO2YrKyk7ZWxzZSBmb3IoZiBpbiBhKWlmKGU9Yy5jYWxsKGFbZl0sZixhW2ZdKSxlPT09ITEpYnJlYWs7cmV0dXJuIGF9LGMuZGF0YT1mdW5jdGlvbihhLGIsZSl7aWYodm9pZCAwPT09ZSl7dmFyIGY9YVtjLmV4cGFuZG9dLGc9ZiYmZFtmXTtpZih2b2lkIDA9PT1iKXJldHVybiBnO2lmKGcmJmIgaW4gZylyZXR1cm4gZ1tiXX1lbHNlIGlmKHZvaWQgMCE9PWIpe3ZhciBmPWFbYy5leHBhbmRvXXx8KGFbYy5leHBhbmRvXT0rK2MudXVpZCk7cmV0dXJuIGRbZl09ZFtmXXx8e30sZFtmXVtiXT1lLGV9fSxjLnJlbW92ZURhdGE9ZnVuY3Rpb24oYSxiKXt2YXIgZT1hW2MuZXhwYW5kb10sZj1lJiZkW2VdO2YmJmMuZWFjaChiLGZ1bmN0aW9uKGEsYil7ZGVsZXRlIGZbYl19KX0sYy5leHRlbmQ9ZnVuY3Rpb24oKXt2YXIgYSxiLGQsZSxmLGcsaD1hcmd1bWVudHNbMF18fHt9LGk9MSxqPWFyZ3VtZW50cy5sZW5ndGgsaz0hMTtmb3IoXCJib29sZWFuXCI9PXR5cGVvZiBoJiYoaz1oLGg9YXJndW1lbnRzW2ldfHx7fSxpKyspLFwib2JqZWN0XCIhPXR5cGVvZiBoJiZcImZ1bmN0aW9uXCIhPT1jLnR5cGUoaCkmJihoPXt9KSxpPT09aiYmKGg9dGhpcyxpLS0pO2o+aTtpKyspaWYobnVsbCE9KGY9YXJndW1lbnRzW2ldKSlmb3IoZSBpbiBmKWE9aFtlXSxkPWZbZV0saCE9PWQmJihrJiZkJiYoYy5pc1BsYWluT2JqZWN0KGQpfHwoYj1jLmlzQXJyYXkoZCkpKT8oYj8oYj0hMSxnPWEmJmMuaXNBcnJheShhKT9hOltdKTpnPWEmJmMuaXNQbGFpbk9iamVjdChhKT9hOnt9LGhbZV09Yy5leHRlbmQoayxnLGQpKTp2b2lkIDAhPT1kJiYoaFtlXT1kKSk7cmV0dXJuIGh9LGMucXVldWU9ZnVuY3Rpb24oYSxkLGUpe2Z1bmN0aW9uIGYoYSxjKXt2YXIgZD1jfHxbXTtyZXR1cm4gbnVsbCE9YSYmKGIoT2JqZWN0KGEpKT8hZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9K2IubGVuZ3RoLGQ9MCxlPWEubGVuZ3RoO2M+ZDspYVtlKytdPWJbZCsrXTtpZihjIT09Yylmb3IoO3ZvaWQgMCE9PWJbZF07KWFbZSsrXT1iW2QrK107cmV0dXJuIGEubGVuZ3RoPWUsYX0oZCxcInN0cmluZ1wiPT10eXBlb2YgYT9bYV06YSk6W10ucHVzaC5jYWxsKGQsYSkpLGR9aWYoYSl7ZD0oZHx8XCJmeFwiKStcInF1ZXVlXCI7dmFyIGc9Yy5kYXRhKGEsZCk7cmV0dXJuIGU/KCFnfHxjLmlzQXJyYXkoZSk/Zz1jLmRhdGEoYSxkLGYoZSkpOmcucHVzaChlKSxnKTpnfHxbXX19LGMuZGVxdWV1ZT1mdW5jdGlvbihhLGIpe2MuZWFjaChhLm5vZGVUeXBlP1thXTphLGZ1bmN0aW9uKGEsZCl7Yj1ifHxcImZ4XCI7dmFyIGU9Yy5xdWV1ZShkLGIpLGY9ZS5zaGlmdCgpO1wiaW5wcm9ncmVzc1wiPT09ZiYmKGY9ZS5zaGlmdCgpKSxmJiYoXCJmeFwiPT09YiYmZS51bnNoaWZ0KFwiaW5wcm9ncmVzc1wiKSxmLmNhbGwoZCxmdW5jdGlvbigpe2MuZGVxdWV1ZShkLGIpfSkpfSl9LGMuZm49Yy5wcm90b3R5cGU9e2luaXQ6ZnVuY3Rpb24oYSl7aWYoYS5ub2RlVHlwZSlyZXR1cm4gdGhpc1swXT1hLHRoaXM7dGhyb3cgbmV3IEVycm9yKFwiTm90IGEgRE9NIG5vZGUuXCIpfSxvZmZzZXQ6ZnVuY3Rpb24oKXt2YXIgYj10aGlzWzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdD90aGlzWzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOnt0b3A6MCxsZWZ0OjB9O3JldHVybnt0b3A6Yi50b3ArKGEucGFnZVlPZmZzZXR8fGRvY3VtZW50LnNjcm9sbFRvcHx8MCktKGRvY3VtZW50LmNsaWVudFRvcHx8MCksbGVmdDpiLmxlZnQrKGEucGFnZVhPZmZzZXR8fGRvY3VtZW50LnNjcm9sbExlZnR8fDApLShkb2N1bWVudC5jbGllbnRMZWZ0fHwwKX19LHBvc2l0aW9uOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gYSgpe2Zvcih2YXIgYT10aGlzLm9mZnNldFBhcmVudHx8ZG9jdW1lbnQ7YSYmXCJodG1sXCI9PT0hYS5ub2RlVHlwZS50b0xvd2VyQ2FzZSYmXCJzdGF0aWNcIj09PWEuc3R5bGUucG9zaXRpb247KWE9YS5vZmZzZXRQYXJlbnQ7cmV0dXJuIGF8fGRvY3VtZW50fXZhciBiPXRoaXNbMF0sYT1hLmFwcGx5KGIpLGQ9dGhpcy5vZmZzZXQoKSxlPS9eKD86Ym9keXxodG1sKSQvaS50ZXN0KGEubm9kZU5hbWUpP3t0b3A6MCxsZWZ0OjB9OmMoYSkub2Zmc2V0KCk7cmV0dXJuIGQudG9wLT1wYXJzZUZsb2F0KGIuc3R5bGUubWFyZ2luVG9wKXx8MCxkLmxlZnQtPXBhcnNlRmxvYXQoYi5zdHlsZS5tYXJnaW5MZWZ0KXx8MCxhLnN0eWxlJiYoZS50b3ArPXBhcnNlRmxvYXQoYS5zdHlsZS5ib3JkZXJUb3BXaWR0aCl8fDAsZS5sZWZ0Kz1wYXJzZUZsb2F0KGEuc3R5bGUuYm9yZGVyTGVmdFdpZHRoKXx8MCkse3RvcDpkLnRvcC1lLnRvcCxsZWZ0OmQubGVmdC1lLmxlZnR9fX07dmFyIGQ9e307Yy5leHBhbmRvPVwidmVsb2NpdHlcIisobmV3IERhdGUpLmdldFRpbWUoKSxjLnV1aWQ9MDtmb3IodmFyIGU9e30sZj1lLmhhc093blByb3BlcnR5LGc9ZS50b1N0cmluZyxoPVwiQm9vbGVhbiBOdW1iZXIgU3RyaW5nIEZ1bmN0aW9uIEFycmF5IERhdGUgUmVnRXhwIE9iamVjdCBFcnJvclwiLnNwbGl0KFwiIFwiKSxpPTA7aTxoLmxlbmd0aDtpKyspZVtcIltvYmplY3QgXCIraFtpXStcIl1cIl09aFtpXS50b0xvd2VyQ2FzZSgpO2MuZm4uaW5pdC5wcm90b3R5cGU9Yy5mbixhLlZlbG9jaXR5PXtVdGlsaXRpZXM6Y319fSh3aW5kb3cpLGZ1bmN0aW9uKGEpe1wib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUmJlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1hKCk6XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShhKTphKCl9KGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGEsYixjLGQpe2Z1bmN0aW9uIGUoYSl7Zm9yKHZhciBiPS0xLGM9YT9hLmxlbmd0aDowLGQ9W107KytiPGM7KXt2YXIgZT1hW2JdO2UmJmQucHVzaChlKX1yZXR1cm4gZH1mdW5jdGlvbiBmKGEpe3JldHVybiBwLmlzV3JhcHBlZChhKT9hPVtdLnNsaWNlLmNhbGwoYSk6cC5pc05vZGUoYSkmJihhPVthXSksYX1mdW5jdGlvbiBnKGEpe3ZhciBiPW0uZGF0YShhLFwidmVsb2NpdHlcIik7cmV0dXJuIG51bGw9PT1iP2Q6Yn1mdW5jdGlvbiBoKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gTWF0aC5yb3VuZChiKmEpKigxL2EpfX1mdW5jdGlvbiBpKGEsYyxkLGUpe2Z1bmN0aW9uIGYoYSxiKXtyZXR1cm4gMS0zKmIrMyphfWZ1bmN0aW9uIGcoYSxiKXtyZXR1cm4gMypiLTYqYX1mdW5jdGlvbiBoKGEpe3JldHVybiAzKmF9ZnVuY3Rpb24gaShhLGIsYyl7cmV0dXJuKChmKGIsYykqYStnKGIsYykpKmEraChiKSkqYX1mdW5jdGlvbiBqKGEsYixjKXtyZXR1cm4gMypmKGIsYykqYSphKzIqZyhiLGMpKmEraChiKX1mdW5jdGlvbiBrKGIsYyl7Zm9yKHZhciBlPTA7cD5lOysrZSl7dmFyIGY9aihjLGEsZCk7aWYoMD09PWYpcmV0dXJuIGM7dmFyIGc9aShjLGEsZCktYjtjLT1nL2Z9cmV0dXJuIGN9ZnVuY3Rpb24gbCgpe2Zvcih2YXIgYj0wO3Q+YjsrK2IpeFtiXT1pKGIqdSxhLGQpfWZ1bmN0aW9uIG0oYixjLGUpe3ZhciBmLGcsaD0wO2RvIGc9YysoZS1jKS8yLGY9aShnLGEsZCktYixmPjA/ZT1nOmM9Zzt3aGlsZShNYXRoLmFicyhmKT5yJiYrK2g8cyk7cmV0dXJuIGd9ZnVuY3Rpb24gbihiKXtmb3IodmFyIGM9MCxlPTEsZj10LTE7ZSE9ZiYmeFtlXTw9YjsrK2UpYys9dTstLWU7dmFyIGc9KGIteFtlXSkvKHhbZSsxXS14W2VdKSxoPWMrZyp1LGk9aihoLGEsZCk7cmV0dXJuIGk+PXE/ayhiLGgpOjA9PWk/aDptKGIsYyxjK3UpfWZ1bmN0aW9uIG8oKXt5PSEwLChhIT1jfHxkIT1lKSYmbCgpfXZhciBwPTQscT0uMDAxLHI9MWUtNyxzPTEwLHQ9MTEsdT0xLyh0LTEpLHY9XCJGbG9hdDMyQXJyYXlcImluIGI7aWYoNCE9PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciB3PTA7ND53OysrdylpZihcIm51bWJlclwiIT10eXBlb2YgYXJndW1lbnRzW3ddfHxpc05hTihhcmd1bWVudHNbd10pfHwhaXNGaW5pdGUoYXJndW1lbnRzW3ddKSlyZXR1cm4hMTthPU1hdGgubWluKGEsMSksZD1NYXRoLm1pbihkLDEpLGE9TWF0aC5tYXgoYSwwKSxkPU1hdGgubWF4KGQsMCk7dmFyIHg9dj9uZXcgRmxvYXQzMkFycmF5KHQpOm5ldyBBcnJheSh0KSx5PSExLHo9ZnVuY3Rpb24oYil7cmV0dXJuIHl8fG8oKSxhPT09YyYmZD09PWU/YjowPT09Yj8wOjE9PT1iPzE6aShuKGIpLGMsZSl9O3ouZ2V0Q29udHJvbFBvaW50cz1mdW5jdGlvbigpe3JldHVyblt7eDphLHk6Y30se3g6ZCx5OmV9XX07dmFyIEE9XCJnZW5lcmF0ZUJlemllcihcIitbYSxjLGQsZV0rXCIpXCI7cmV0dXJuIHoudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gQX0sen1mdW5jdGlvbiBqKGEsYil7dmFyIGM9YTtyZXR1cm4gcC5pc1N0cmluZyhhKT90LkVhc2luZ3NbYV18fChjPSExKTpjPXAuaXNBcnJheShhKSYmMT09PWEubGVuZ3RoP2guYXBwbHkobnVsbCxhKTpwLmlzQXJyYXkoYSkmJjI9PT1hLmxlbmd0aD91LmFwcGx5KG51bGwsYS5jb25jYXQoW2JdKSk6cC5pc0FycmF5KGEpJiY0PT09YS5sZW5ndGg/aS5hcHBseShudWxsLGEpOiExLGM9PT0hMSYmKGM9dC5FYXNpbmdzW3QuZGVmYXVsdHMuZWFzaW5nXT90LmRlZmF1bHRzLmVhc2luZzpzKSxjfWZ1bmN0aW9uIGsoYSl7aWYoYSl7dmFyIGI9KG5ldyBEYXRlKS5nZXRUaW1lKCksYz10LlN0YXRlLmNhbGxzLmxlbmd0aDtjPjFlNCYmKHQuU3RhdGUuY2FsbHM9ZSh0LlN0YXRlLmNhbGxzKSk7Zm9yKHZhciBmPTA7Yz5mO2YrKylpZih0LlN0YXRlLmNhbGxzW2ZdKXt2YXIgaD10LlN0YXRlLmNhbGxzW2ZdLGk9aFswXSxqPWhbMl0sbj1oWzNdLG89ISFuLHE9bnVsbDtufHwobj10LlN0YXRlLmNhbGxzW2ZdWzNdPWItMTYpO2Zvcih2YXIgcj1NYXRoLm1pbigoYi1uKS9qLmR1cmF0aW9uLDEpLHM9MCx1PWkubGVuZ3RoO3U+cztzKyspe3ZhciB3PWlbc10seT13LmVsZW1lbnQ7aWYoZyh5KSl7dmFyIHo9ITE7aWYoai5kaXNwbGF5IT09ZCYmbnVsbCE9PWouZGlzcGxheSYmXCJub25lXCIhPT1qLmRpc3BsYXkpe2lmKFwiZmxleFwiPT09ai5kaXNwbGF5KXt2YXIgQT1bXCItd2Via2l0LWJveFwiLFwiLW1vei1ib3hcIixcIi1tcy1mbGV4Ym94XCIsXCItd2Via2l0LWZsZXhcIl07bS5lYWNoKEEsZnVuY3Rpb24oYSxiKXt2LnNldFByb3BlcnR5VmFsdWUoeSxcImRpc3BsYXlcIixiKX0pfXYuc2V0UHJvcGVydHlWYWx1ZSh5LFwiZGlzcGxheVwiLGouZGlzcGxheSl9ai52aXNpYmlsaXR5IT09ZCYmXCJoaWRkZW5cIiE9PWoudmlzaWJpbGl0eSYmdi5zZXRQcm9wZXJ0eVZhbHVlKHksXCJ2aXNpYmlsaXR5XCIsai52aXNpYmlsaXR5KTtmb3IodmFyIEIgaW4gdylpZihcImVsZW1lbnRcIiE9PUIpe3ZhciBDLEQ9d1tCXSxFPXAuaXNTdHJpbmcoRC5lYXNpbmcpP3QuRWFzaW5nc1tELmVhc2luZ106RC5lYXNpbmc7aWYoMT09PXIpQz1ELmVuZFZhbHVlO2Vsc2V7dmFyIEY9RC5lbmRWYWx1ZS1ELnN0YXJ0VmFsdWU7aWYoQz1ELnN0YXJ0VmFsdWUrRipFKHIsaixGKSwhbyYmQz09PUQuY3VycmVudFZhbHVlKWNvbnRpbnVlfWlmKEQuY3VycmVudFZhbHVlPUMsXCJ0d2VlblwiPT09QilxPUM7ZWxzZXtpZih2Lkhvb2tzLnJlZ2lzdGVyZWRbQl0pe3ZhciBHPXYuSG9va3MuZ2V0Um9vdChCKSxIPWcoeSkucm9vdFByb3BlcnR5VmFsdWVDYWNoZVtHXTtIJiYoRC5yb290UHJvcGVydHlWYWx1ZT1IKX12YXIgST12LnNldFByb3BlcnR5VmFsdWUoeSxCLEQuY3VycmVudFZhbHVlKygwPT09cGFyc2VGbG9hdChDKT9cIlwiOkQudW5pdFR5cGUpLEQucm9vdFByb3BlcnR5VmFsdWUsRC5zY3JvbGxEYXRhKTt2Lkhvb2tzLnJlZ2lzdGVyZWRbQl0mJihnKHkpLnJvb3RQcm9wZXJ0eVZhbHVlQ2FjaGVbR109di5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW0ddP3YuTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZFtHXShcImV4dHJhY3RcIixudWxsLElbMV0pOklbMV0pLFwidHJhbnNmb3JtXCI9PT1JWzBdJiYoej0hMCl9fWoubW9iaWxlSEEmJmcoeSkudHJhbnNmb3JtQ2FjaGUudHJhbnNsYXRlM2Q9PT1kJiYoZyh5KS50cmFuc2Zvcm1DYWNoZS50cmFuc2xhdGUzZD1cIigwcHgsIDBweCwgMHB4KVwiLHo9ITApLHomJnYuZmx1c2hUcmFuc2Zvcm1DYWNoZSh5KX19ai5kaXNwbGF5IT09ZCYmXCJub25lXCIhPT1qLmRpc3BsYXkmJih0LlN0YXRlLmNhbGxzW2ZdWzJdLmRpc3BsYXk9ITEpLGoudmlzaWJpbGl0eSE9PWQmJlwiaGlkZGVuXCIhPT1qLnZpc2liaWxpdHkmJih0LlN0YXRlLmNhbGxzW2ZdWzJdLnZpc2liaWxpdHk9ITEpLGoucHJvZ3Jlc3MmJmoucHJvZ3Jlc3MuY2FsbChoWzFdLGhbMV0scixNYXRoLm1heCgwLG4rai5kdXJhdGlvbi1iKSxuLHEpLDE9PT1yJiZsKGYpfX10LlN0YXRlLmlzVGlja2luZyYmeChrKX1mdW5jdGlvbiBsKGEsYil7aWYoIXQuU3RhdGUuY2FsbHNbYV0pcmV0dXJuITE7Zm9yKHZhciBjPXQuU3RhdGUuY2FsbHNbYV1bMF0sZT10LlN0YXRlLmNhbGxzW2FdWzFdLGY9dC5TdGF0ZS5jYWxsc1thXVsyXSxoPXQuU3RhdGUuY2FsbHNbYV1bNF0saT0hMSxqPTAsaz1jLmxlbmd0aDtrPmo7aisrKXt2YXIgbD1jW2pdLmVsZW1lbnQ7aWYoYnx8Zi5sb29wfHwoXCJub25lXCI9PT1mLmRpc3BsYXkmJnYuc2V0UHJvcGVydHlWYWx1ZShsLFwiZGlzcGxheVwiLGYuZGlzcGxheSksXCJoaWRkZW5cIj09PWYudmlzaWJpbGl0eSYmdi5zZXRQcm9wZXJ0eVZhbHVlKGwsXCJ2aXNpYmlsaXR5XCIsZi52aXNpYmlsaXR5KSksZi5sb29wIT09ITAmJihtLnF1ZXVlKGwpWzFdPT09ZHx8IS9cXC52ZWxvY2l0eVF1ZXVlRW50cnlGbGFnL2kudGVzdChtLnF1ZXVlKGwpWzFdKSkmJmcobCkpe2cobCkuaXNBbmltYXRpbmc9ITEsZyhsKS5yb290UHJvcGVydHlWYWx1ZUNhY2hlPXt9O3ZhciBuPSExO20uZWFjaCh2Lkxpc3RzLnRyYW5zZm9ybXMzRCxmdW5jdGlvbihhLGIpe3ZhciBjPS9ec2NhbGUvLnRlc3QoYik/MTowLGU9ZyhsKS50cmFuc2Zvcm1DYWNoZVtiXTtnKGwpLnRyYW5zZm9ybUNhY2hlW2JdIT09ZCYmbmV3IFJlZ0V4cChcIl5cXFxcKFwiK2MrXCJbXi5dXCIpLnRlc3QoZSkmJihuPSEwLGRlbGV0ZSBnKGwpLnRyYW5zZm9ybUNhY2hlW2JdKX0pLGYubW9iaWxlSEEmJihuPSEwLGRlbGV0ZSBnKGwpLnRyYW5zZm9ybUNhY2hlLnRyYW5zbGF0ZTNkKSxuJiZ2LmZsdXNoVHJhbnNmb3JtQ2FjaGUobCksdi5WYWx1ZXMucmVtb3ZlQ2xhc3MobCxcInZlbG9jaXR5LWFuaW1hdGluZ1wiKX1pZighYiYmZi5jb21wbGV0ZSYmIWYubG9vcCYmaj09PWstMSl0cnl7Zi5jb21wbGV0ZS5jYWxsKGUsZSl9Y2F0Y2gobyl7c2V0VGltZW91dChmdW5jdGlvbigpe3Rocm93IG99LDEpfWgmJmYubG9vcCE9PSEwJiZoKGUpLGcobCkmJmYubG9vcD09PSEwJiYhYiYmKG0uZWFjaChnKGwpLnR3ZWVuc0NvbnRhaW5lcixmdW5jdGlvbihhLGIpey9ecm90YXRlLy50ZXN0KGEpJiYzNjA9PT1wYXJzZUZsb2F0KGIuZW5kVmFsdWUpJiYoYi5lbmRWYWx1ZT0wLGIuc3RhcnRWYWx1ZT0zNjApLC9eYmFja2dyb3VuZFBvc2l0aW9uLy50ZXN0KGEpJiYxMDA9PT1wYXJzZUZsb2F0KGIuZW5kVmFsdWUpJiZcIiVcIj09PWIudW5pdFR5cGUmJihiLmVuZFZhbHVlPTAsYi5zdGFydFZhbHVlPTEwMCl9KSx0KGwsXCJyZXZlcnNlXCIse2xvb3A6ITAsZGVsYXk6Zi5kZWxheX0pKSxmLnF1ZXVlIT09ITEmJm0uZGVxdWV1ZShsLGYucXVldWUpfXQuU3RhdGUuY2FsbHNbYV09ITE7Zm9yKHZhciBwPTAscT10LlN0YXRlLmNhbGxzLmxlbmd0aDtxPnA7cCsrKWlmKHQuU3RhdGUuY2FsbHNbcF0hPT0hMSl7aT0hMDticmVha31pPT09ITEmJih0LlN0YXRlLmlzVGlja2luZz0hMSxkZWxldGUgdC5TdGF0ZS5jYWxscyx0LlN0YXRlLmNhbGxzPVtdKX12YXIgbSxuPWZ1bmN0aW9uKCl7aWYoYy5kb2N1bWVudE1vZGUpcmV0dXJuIGMuZG9jdW1lbnRNb2RlO2Zvcih2YXIgYT03O2E+NDthLS0pe3ZhciBiPWMuY3JlYXRlRWxlbWVudChcImRpdlwiKTtpZihiLmlubmVySFRNTD1cIjwhLS1baWYgSUUgXCIrYStcIl0+PHNwYW4+PC9zcGFuPjwhW2VuZGlmXS0tPlwiLGIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzcGFuXCIpLmxlbmd0aClyZXR1cm4gYj1udWxsLGF9cmV0dXJuIGR9KCksbz1mdW5jdGlvbigpe3ZhciBhPTA7cmV0dXJuIGIud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxiLm1velJlcXVlc3RBbmltYXRpb25GcmFtZXx8ZnVuY3Rpb24oYil7dmFyIGMsZD0obmV3IERhdGUpLmdldFRpbWUoKTtyZXR1cm4gYz1NYXRoLm1heCgwLDE2LShkLWEpKSxhPWQrYyxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YihkK2MpfSxjKX19KCkscD17aXNTdHJpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGF9LGlzQXJyYXk6QXJyYXkuaXNBcnJheXx8ZnVuY3Rpb24oYSl7cmV0dXJuXCJbb2JqZWN0IEFycmF5XVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEpfSxpc0Z1bmN0aW9uOmZ1bmN0aW9uKGEpe3JldHVyblwiW29iamVjdCBGdW5jdGlvbl1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhKX0saXNOb2RlOmZ1bmN0aW9uKGEpe3JldHVybiBhJiZhLm5vZGVUeXBlfSxpc05vZGVMaXN0OmZ1bmN0aW9uKGEpe3JldHVyblwib2JqZWN0XCI9PXR5cGVvZiBhJiYvXlxcW29iamVjdCAoSFRNTENvbGxlY3Rpb258Tm9kZUxpc3R8T2JqZWN0KVxcXSQvLnRlc3QoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEpKSYmYS5sZW5ndGghPT1kJiYoMD09PWEubGVuZ3RofHxcIm9iamVjdFwiPT10eXBlb2YgYVswXSYmYVswXS5ub2RlVHlwZT4wKX0saXNXcmFwcGVkOmZ1bmN0aW9uKGEpe3JldHVybiBhJiYoYS5qcXVlcnl8fGIuWmVwdG8mJmIuWmVwdG8uemVwdG8uaXNaKGEpKX0saXNTVkc6ZnVuY3Rpb24oYSl7cmV0dXJuIGIuU1ZHRWxlbWVudCYmYSBpbnN0YW5jZW9mIGIuU1ZHRWxlbWVudH0saXNFbXB0eU9iamVjdDpmdW5jdGlvbihhKXtmb3IodmFyIGIgaW4gYSlyZXR1cm4hMTtyZXR1cm4hMH19LHE9ITE7aWYoYS5mbiYmYS5mbi5qcXVlcnk/KG09YSxxPSEwKTptPWIuVmVsb2NpdHkuVXRpbGl0aWVzLDg+PW4mJiFxKXRocm93IG5ldyBFcnJvcihcIlZlbG9jaXR5OiBJRTggYW5kIGJlbG93IHJlcXVpcmUgalF1ZXJ5IHRvIGJlIGxvYWRlZCBiZWZvcmUgVmVsb2NpdHkuXCIpO2lmKDc+PW4pcmV0dXJuIHZvaWQoalF1ZXJ5LmZuLnZlbG9jaXR5PWpRdWVyeS5mbi5hbmltYXRlKTt2YXIgcj00MDAscz1cInN3aW5nXCIsdD17U3RhdGU6e2lzTW9iaWxlOi9BbmRyb2lkfHdlYk9TfGlQaG9uZXxpUGFkfGlQb2R8QmxhY2tCZXJyeXxJRU1vYmlsZXxPcGVyYSBNaW5pL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxpc0FuZHJvaWQ6L0FuZHJvaWQvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLGlzR2luZ2VyYnJlYWQ6L0FuZHJvaWQgMlxcLjNcXC5bMy03XS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksaXNDaHJvbWU6Yi5jaHJvbWUsaXNGaXJlZm94Oi9GaXJlZm94L2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxwcmVmaXhFbGVtZW50OmMuY3JlYXRlRWxlbWVudChcImRpdlwiKSxwcmVmaXhNYXRjaGVzOnt9LHNjcm9sbEFuY2hvcjpudWxsLHNjcm9sbFByb3BlcnR5TGVmdDpudWxsLHNjcm9sbFByb3BlcnR5VG9wOm51bGwsaXNUaWNraW5nOiExLGNhbGxzOltdfSxDU1M6e30sVXRpbGl0aWVzOm0sUmVkaXJlY3RzOnt9LEVhc2luZ3M6e30sUHJvbWlzZTpiLlByb21pc2UsZGVmYXVsdHM6e3F1ZXVlOlwiXCIsZHVyYXRpb246cixlYXNpbmc6cyxiZWdpbjpkLGNvbXBsZXRlOmQscHJvZ3Jlc3M6ZCxkaXNwbGF5OmQsdmlzaWJpbGl0eTpkLGxvb3A6ITEsZGVsYXk6ITEsbW9iaWxlSEE6ITAsX2NhY2hlVmFsdWVzOiEwfSxpbml0OmZ1bmN0aW9uKGEpe20uZGF0YShhLFwidmVsb2NpdHlcIix7aXNTVkc6cC5pc1NWRyhhKSxpc0FuaW1hdGluZzohMSxjb21wdXRlZFN0eWxlOm51bGwsdHdlZW5zQ29udGFpbmVyOm51bGwscm9vdFByb3BlcnR5VmFsdWVDYWNoZTp7fSx0cmFuc2Zvcm1DYWNoZTp7fX0pfSxob29rOm51bGwsbW9jazohMSx2ZXJzaW9uOnttYWpvcjoxLG1pbm9yOjIscGF0Y2g6Mn0sZGVidWc6ITF9O2IucGFnZVlPZmZzZXQhPT1kPyh0LlN0YXRlLnNjcm9sbEFuY2hvcj1iLHQuU3RhdGUuc2Nyb2xsUHJvcGVydHlMZWZ0PVwicGFnZVhPZmZzZXRcIix0LlN0YXRlLnNjcm9sbFByb3BlcnR5VG9wPVwicGFnZVlPZmZzZXRcIik6KHQuU3RhdGUuc2Nyb2xsQW5jaG9yPWMuZG9jdW1lbnRFbGVtZW50fHxjLmJvZHkucGFyZW50Tm9kZXx8Yy5ib2R5LHQuU3RhdGUuc2Nyb2xsUHJvcGVydHlMZWZ0PVwic2Nyb2xsTGVmdFwiLHQuU3RhdGUuc2Nyb2xsUHJvcGVydHlUb3A9XCJzY3JvbGxUb3BcIik7dmFyIHU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe3JldHVybi1hLnRlbnNpb24qYS54LWEuZnJpY3Rpb24qYS52fWZ1bmN0aW9uIGIoYixjLGQpe3ZhciBlPXt4OmIueCtkLmR4KmMsdjpiLnYrZC5kdipjLHRlbnNpb246Yi50ZW5zaW9uLGZyaWN0aW9uOmIuZnJpY3Rpb259O3JldHVybntkeDplLnYsZHY6YShlKX19ZnVuY3Rpb24gYyhjLGQpe3ZhciBlPXtkeDpjLnYsZHY6YShjKX0sZj1iKGMsLjUqZCxlKSxnPWIoYywuNSpkLGYpLGg9YihjLGQsZyksaT0xLzYqKGUuZHgrMiooZi5keCtnLmR4KStoLmR4KSxqPTEvNiooZS5kdisyKihmLmR2K2cuZHYpK2guZHYpO3JldHVybiBjLng9Yy54K2kqZCxjLnY9Yy52K2oqZCxjfXJldHVybiBmdW5jdGlvbiBkKGEsYixlKXt2YXIgZixnLGgsaT17eDotMSx2OjAsdGVuc2lvbjpudWxsLGZyaWN0aW9uOm51bGx9LGo9WzBdLGs9MCxsPTFlLTQsbT0uMDE2O2ZvcihhPXBhcnNlRmxvYXQoYSl8fDUwMCxiPXBhcnNlRmxvYXQoYil8fDIwLGU9ZXx8bnVsbCxpLnRlbnNpb249YSxpLmZyaWN0aW9uPWIsZj1udWxsIT09ZSxmPyhrPWQoYSxiKSxnPWsvZSptKTpnPW07aD1jKGh8fGksZyksai5wdXNoKDEraC54KSxrKz0xNixNYXRoLmFicyhoLngpPmwmJk1hdGguYWJzKGgudik+bDspO3JldHVybiBmP2Z1bmN0aW9uKGEpe3JldHVybiBqW2EqKGoubGVuZ3RoLTEpfDBdfTprfX0oKTt0LkVhc2luZ3M9e2xpbmVhcjpmdW5jdGlvbihhKXtyZXR1cm4gYX0sc3dpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuLjUtTWF0aC5jb3MoYSpNYXRoLlBJKS8yfSxzcHJpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuIDEtTWF0aC5jb3MoNC41KmEqTWF0aC5QSSkqTWF0aC5leHAoNiotYSl9fSxtLmVhY2goW1tcImVhc2VcIixbLjI1LC4xLC4yNSwxXV0sW1wiZWFzZS1pblwiLFsuNDIsMCwxLDFdXSxbXCJlYXNlLW91dFwiLFswLDAsLjU4LDFdXSxbXCJlYXNlLWluLW91dFwiLFsuNDIsMCwuNTgsMV1dLFtcImVhc2VJblNpbmVcIixbLjQ3LDAsLjc0NSwuNzE1XV0sW1wiZWFzZU91dFNpbmVcIixbLjM5LC41NzUsLjU2NSwxXV0sW1wiZWFzZUluT3V0U2luZVwiLFsuNDQ1LC4wNSwuNTUsLjk1XV0sW1wiZWFzZUluUXVhZFwiLFsuNTUsLjA4NSwuNjgsLjUzXV0sW1wiZWFzZU91dFF1YWRcIixbLjI1LC40NiwuNDUsLjk0XV0sW1wiZWFzZUluT3V0UXVhZFwiLFsuNDU1LC4wMywuNTE1LC45NTVdXSxbXCJlYXNlSW5DdWJpY1wiLFsuNTUsLjA1NSwuNjc1LC4xOV1dLFtcImVhc2VPdXRDdWJpY1wiLFsuMjE1LC42MSwuMzU1LDFdXSxbXCJlYXNlSW5PdXRDdWJpY1wiLFsuNjQ1LC4wNDUsLjM1NSwxXV0sW1wiZWFzZUluUXVhcnRcIixbLjg5NSwuMDMsLjY4NSwuMjJdXSxbXCJlYXNlT3V0UXVhcnRcIixbLjE2NSwuODQsLjQ0LDFdXSxbXCJlYXNlSW5PdXRRdWFydFwiLFsuNzcsMCwuMTc1LDFdXSxbXCJlYXNlSW5RdWludFwiLFsuNzU1LC4wNSwuODU1LC4wNl1dLFtcImVhc2VPdXRRdWludFwiLFsuMjMsMSwuMzIsMV1dLFtcImVhc2VJbk91dFF1aW50XCIsWy44NiwwLC4wNywxXV0sW1wiZWFzZUluRXhwb1wiLFsuOTUsLjA1LC43OTUsLjAzNV1dLFtcImVhc2VPdXRFeHBvXCIsWy4xOSwxLC4yMiwxXV0sW1wiZWFzZUluT3V0RXhwb1wiLFsxLDAsMCwxXV0sW1wiZWFzZUluQ2lyY1wiLFsuNiwuMDQsLjk4LC4zMzVdXSxbXCJlYXNlT3V0Q2lyY1wiLFsuMDc1LC44MiwuMTY1LDFdXSxbXCJlYXNlSW5PdXRDaXJjXCIsWy43ODUsLjEzNSwuMTUsLjg2XV1dLGZ1bmN0aW9uKGEsYil7dC5FYXNpbmdzW2JbMF1dPWkuYXBwbHkobnVsbCxiWzFdKX0pO3ZhciB2PXQuQ1NTPXtSZWdFeDp7aXNIZXg6L14jKFtBLWZcXGRdezN9KXsxLDJ9JC9pLHZhbHVlVW53cmFwOi9eW0Etel0rXFwoKC4qKVxcKSQvaSx3cmFwcGVkVmFsdWVBbHJlYWR5RXh0cmFjdGVkOi9bMC05Ll0rIFswLTkuXSsgWzAtOS5dKyggWzAtOS5dKyk/Lyx2YWx1ZVNwbGl0Oi8oW0Etel0rXFwoLitcXCkpfCgoW0EtejAtOSMtLl0rPykoPz1cXHN8JCkpL2dpfSxMaXN0czp7Y29sb3JzOltcImZpbGxcIixcInN0cm9rZVwiLFwic3RvcENvbG9yXCIsXCJjb2xvclwiLFwiYmFja2dyb3VuZENvbG9yXCIsXCJib3JkZXJDb2xvclwiLFwiYm9yZGVyVG9wQ29sb3JcIixcImJvcmRlclJpZ2h0Q29sb3JcIixcImJvcmRlckJvdHRvbUNvbG9yXCIsXCJib3JkZXJMZWZ0Q29sb3JcIixcIm91dGxpbmVDb2xvclwiXSx0cmFuc2Zvcm1zQmFzZTpbXCJ0cmFuc2xhdGVYXCIsXCJ0cmFuc2xhdGVZXCIsXCJzY2FsZVwiLFwic2NhbGVYXCIsXCJzY2FsZVlcIixcInNrZXdYXCIsXCJza2V3WVwiLFwicm90YXRlWlwiXSx0cmFuc2Zvcm1zM0Q6W1widHJhbnNmb3JtUGVyc3BlY3RpdmVcIixcInRyYW5zbGF0ZVpcIixcInNjYWxlWlwiLFwicm90YXRlWFwiLFwicm90YXRlWVwiXX0sSG9va3M6e3RlbXBsYXRlczp7dGV4dFNoYWRvdzpbXCJDb2xvciBYIFkgQmx1clwiLFwiYmxhY2sgMHB4IDBweCAwcHhcIl0sYm94U2hhZG93OltcIkNvbG9yIFggWSBCbHVyIFNwcmVhZFwiLFwiYmxhY2sgMHB4IDBweCAwcHggMHB4XCJdLGNsaXA6W1wiVG9wIFJpZ2h0IEJvdHRvbSBMZWZ0XCIsXCIwcHggMHB4IDBweCAwcHhcIl0sYmFja2dyb3VuZFBvc2l0aW9uOltcIlggWVwiLFwiMCUgMCVcIl0sdHJhbnNmb3JtT3JpZ2luOltcIlggWSBaXCIsXCI1MCUgNTAlIDBweFwiXSxwZXJzcGVjdGl2ZU9yaWdpbjpbXCJYIFlcIixcIjUwJSA1MCVcIl19LHJlZ2lzdGVyZWQ6e30scmVnaXN0ZXI6ZnVuY3Rpb24oKXtmb3IodmFyIGE9MDthPHYuTGlzdHMuY29sb3JzLmxlbmd0aDthKyspe3ZhciBiPVwiY29sb3JcIj09PXYuTGlzdHMuY29sb3JzW2FdP1wiMCAwIDAgMVwiOlwiMjU1IDI1NSAyNTUgMVwiO3YuSG9va3MudGVtcGxhdGVzW3YuTGlzdHMuY29sb3JzW2FdXT1bXCJSZWQgR3JlZW4gQmx1ZSBBbHBoYVwiLGJdfXZhciBjLGQsZTtpZihuKWZvcihjIGluIHYuSG9va3MudGVtcGxhdGVzKXtkPXYuSG9va3MudGVtcGxhdGVzW2NdLGU9ZFswXS5zcGxpdChcIiBcIik7dmFyIGY9ZFsxXS5tYXRjaCh2LlJlZ0V4LnZhbHVlU3BsaXQpO1wiQ29sb3JcIj09PWVbMF0mJihlLnB1c2goZS5zaGlmdCgpKSxmLnB1c2goZi5zaGlmdCgpKSx2Lkhvb2tzLnRlbXBsYXRlc1tjXT1bZS5qb2luKFwiIFwiKSxmLmpvaW4oXCIgXCIpXSl9Zm9yKGMgaW4gdi5Ib29rcy50ZW1wbGF0ZXMpe2Q9di5Ib29rcy50ZW1wbGF0ZXNbY10sZT1kWzBdLnNwbGl0KFwiIFwiKTtmb3IodmFyIGEgaW4gZSl7dmFyIGc9YytlW2FdLGg9YTt2Lkhvb2tzLnJlZ2lzdGVyZWRbZ109W2MsaF19fX0sZ2V0Um9vdDpmdW5jdGlvbihhKXt2YXIgYj12Lkhvb2tzLnJlZ2lzdGVyZWRbYV07cmV0dXJuIGI/YlswXTphfSxjbGVhblJvb3RQcm9wZXJ0eVZhbHVlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHYuUmVnRXgudmFsdWVVbndyYXAudGVzdChiKSYmKGI9Yi5tYXRjaCh2LlJlZ0V4LnZhbHVlVW53cmFwKVsxXSksdi5WYWx1ZXMuaXNDU1NOdWxsVmFsdWUoYikmJihiPXYuSG9va3MudGVtcGxhdGVzW2FdWzFdKSxifSxleHRyYWN0VmFsdWU6ZnVuY3Rpb24oYSxiKXt2YXIgYz12Lkhvb2tzLnJlZ2lzdGVyZWRbYV07aWYoYyl7dmFyIGQ9Y1swXSxlPWNbMV07cmV0dXJuIGI9di5Ib29rcy5jbGVhblJvb3RQcm9wZXJ0eVZhbHVlKGQsYiksYi50b1N0cmluZygpLm1hdGNoKHYuUmVnRXgudmFsdWVTcGxpdClbZV19cmV0dXJuIGJ9LGluamVjdFZhbHVlOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD12Lkhvb2tzLnJlZ2lzdGVyZWRbYV07aWYoZCl7dmFyIGUsZixnPWRbMF0saD1kWzFdO3JldHVybiBjPXYuSG9va3MuY2xlYW5Sb290UHJvcGVydHlWYWx1ZShnLGMpLGU9Yy50b1N0cmluZygpLm1hdGNoKHYuUmVnRXgudmFsdWVTcGxpdCksZVtoXT1iLGY9ZS5qb2luKFwiIFwiKX1yZXR1cm4gY319LE5vcm1hbGl6YXRpb25zOntyZWdpc3RlcmVkOntjbGlwOmZ1bmN0aW9uKGEsYixjKXtzd2l0Y2goYSl7Y2FzZVwibmFtZVwiOnJldHVyblwiY2xpcFwiO2Nhc2VcImV4dHJhY3RcIjp2YXIgZDtyZXR1cm4gdi5SZWdFeC53cmFwcGVkVmFsdWVBbHJlYWR5RXh0cmFjdGVkLnRlc3QoYyk/ZD1jOihkPWMudG9TdHJpbmcoKS5tYXRjaCh2LlJlZ0V4LnZhbHVlVW53cmFwKSxkPWQ/ZFsxXS5yZXBsYWNlKC8sKFxccyspPy9nLFwiIFwiKTpjKSxkO2Nhc2VcImluamVjdFwiOnJldHVyblwicmVjdChcIitjK1wiKVwifX0sYmx1cjpmdW5jdGlvbihhLGIsYyl7c3dpdGNoKGEpe2Nhc2VcIm5hbWVcIjpyZXR1cm4gdC5TdGF0ZS5pc0ZpcmVmb3g/XCJmaWx0ZXJcIjpcIi13ZWJraXQtZmlsdGVyXCI7Y2FzZVwiZXh0cmFjdFwiOnZhciBkPXBhcnNlRmxvYXQoYyk7aWYoIWQmJjAhPT1kKXt2YXIgZT1jLnRvU3RyaW5nKCkubWF0Y2goL2JsdXJcXCgoWzAtOV0rW0Etel0rKVxcKS9pKTtkPWU/ZVsxXTowfXJldHVybiBkO2Nhc2VcImluamVjdFwiOnJldHVybiBwYXJzZUZsb2F0KGMpP1wiYmx1cihcIitjK1wiKVwiOlwibm9uZVwifX0sb3BhY2l0eTpmdW5jdGlvbihhLGIsYyl7aWYoOD49bilzd2l0Y2goYSl7Y2FzZVwibmFtZVwiOnJldHVyblwiZmlsdGVyXCI7Y2FzZVwiZXh0cmFjdFwiOnZhciBkPWMudG9TdHJpbmcoKS5tYXRjaCgvYWxwaGFcXChvcGFjaXR5PSguKilcXCkvaSk7cmV0dXJuIGM9ZD9kWzFdLzEwMDoxO2Nhc2VcImluamVjdFwiOnJldHVybiBiLnN0eWxlLnpvb209MSxwYXJzZUZsb2F0KGMpPj0xP1wiXCI6XCJhbHBoYShvcGFjaXR5PVwiK3BhcnNlSW50KDEwMCpwYXJzZUZsb2F0KGMpLDEwKStcIilcIn1lbHNlIHN3aXRjaChhKXtjYXNlXCJuYW1lXCI6cmV0dXJuXCJvcGFjaXR5XCI7Y2FzZVwiZXh0cmFjdFwiOnJldHVybiBjO2Nhc2VcImluamVjdFwiOnJldHVybiBjfX19LHJlZ2lzdGVyOmZ1bmN0aW9uKCl7OT49bnx8dC5TdGF0ZS5pc0dpbmdlcmJyZWFkfHwodi5MaXN0cy50cmFuc2Zvcm1zQmFzZT12Lkxpc3RzLnRyYW5zZm9ybXNCYXNlLmNvbmNhdCh2Lkxpc3RzLnRyYW5zZm9ybXMzRCkpO2Zvcih2YXIgYT0wO2E8di5MaXN0cy50cmFuc2Zvcm1zQmFzZS5sZW5ndGg7YSsrKSFmdW5jdGlvbigpe3ZhciBiPXYuTGlzdHMudHJhbnNmb3Jtc0Jhc2VbYV07di5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW2JdPWZ1bmN0aW9uKGEsYyxlKXtzd2l0Y2goYSl7Y2FzZVwibmFtZVwiOnJldHVyblwidHJhbnNmb3JtXCI7Y2FzZVwiZXh0cmFjdFwiOnJldHVybiBnKGMpPT09ZHx8ZyhjKS50cmFuc2Zvcm1DYWNoZVtiXT09PWQ/L15zY2FsZS9pLnRlc3QoYik/MTowOmcoYykudHJhbnNmb3JtQ2FjaGVbYl0ucmVwbGFjZSgvWygpXS9nLFwiXCIpO2Nhc2VcImluamVjdFwiOnZhciBmPSExO3N3aXRjaChiLnN1YnN0cigwLGIubGVuZ3RoLTEpKXtjYXNlXCJ0cmFuc2xhdGVcIjpmPSEvKCV8cHh8ZW18cmVtfHZ3fHZofFxcZCkkL2kudGVzdChlKTticmVhaztjYXNlXCJzY2FsXCI6Y2FzZVwic2NhbGVcIjp0LlN0YXRlLmlzQW5kcm9pZCYmZyhjKS50cmFuc2Zvcm1DYWNoZVtiXT09PWQmJjE+ZSYmKGU9MSksZj0hLyhcXGQpJC9pLnRlc3QoZSk7YnJlYWs7Y2FzZVwic2tld1wiOmY9IS8oZGVnfFxcZCkkL2kudGVzdChlKTticmVhaztjYXNlXCJyb3RhdGVcIjpmPSEvKGRlZ3xcXGQpJC9pLnRlc3QoZSl9cmV0dXJuIGZ8fChnKGMpLnRyYW5zZm9ybUNhY2hlW2JdPVwiKFwiK2UrXCIpXCIpLGcoYykudHJhbnNmb3JtQ2FjaGVbYl19fX0oKTtmb3IodmFyIGE9MDthPHYuTGlzdHMuY29sb3JzLmxlbmd0aDthKyspIWZ1bmN0aW9uKCl7dmFyIGI9di5MaXN0cy5jb2xvcnNbYV07di5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW2JdPWZ1bmN0aW9uKGEsYyxlKXtzd2l0Y2goYSl7Y2FzZVwibmFtZVwiOnJldHVybiBiO2Nhc2VcImV4dHJhY3RcIjp2YXIgZjtpZih2LlJlZ0V4LndyYXBwZWRWYWx1ZUFscmVhZHlFeHRyYWN0ZWQudGVzdChlKSlmPWU7ZWxzZXt2YXIgZyxoPXtibGFjazpcInJnYigwLCAwLCAwKVwiLGJsdWU6XCJyZ2IoMCwgMCwgMjU1KVwiLGdyYXk6XCJyZ2IoMTI4LCAxMjgsIDEyOClcIixncmVlbjpcInJnYigwLCAxMjgsIDApXCIscmVkOlwicmdiKDI1NSwgMCwgMClcIix3aGl0ZTpcInJnYigyNTUsIDI1NSwgMjU1KVwifTsvXltBLXpdKyQvaS50ZXN0KGUpP2c9aFtlXSE9PWQ/aFtlXTpoLmJsYWNrOnYuUmVnRXguaXNIZXgudGVzdChlKT9nPVwicmdiKFwiK3YuVmFsdWVzLmhleFRvUmdiKGUpLmpvaW4oXCIgXCIpK1wiKVwiOi9ecmdiYT9cXCgvaS50ZXN0KGUpfHwoZz1oLmJsYWNrKSxmPShnfHxlKS50b1N0cmluZygpLm1hdGNoKHYuUmVnRXgudmFsdWVVbndyYXApWzFdLnJlcGxhY2UoLywoXFxzKyk/L2csXCIgXCIpfXJldHVybiA4Pj1ufHwzIT09Zi5zcGxpdChcIiBcIikubGVuZ3RofHwoZis9XCIgMVwiKSxmO2Nhc2VcImluamVjdFwiOnJldHVybiA4Pj1uPzQ9PT1lLnNwbGl0KFwiIFwiKS5sZW5ndGgmJihlPWUuc3BsaXQoL1xccysvKS5zbGljZSgwLDMpLmpvaW4oXCIgXCIpKTozPT09ZS5zcGxpdChcIiBcIikubGVuZ3RoJiYoZSs9XCIgMVwiKSwoOD49bj9cInJnYlwiOlwicmdiYVwiKStcIihcIitlLnJlcGxhY2UoL1xccysvZyxcIixcIikucmVwbGFjZSgvXFwuKFxcZCkrKD89LCkvZyxcIlwiKStcIilcIn19fSgpfX0sTmFtZXM6e2NhbWVsQ2FzZTpmdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKC8tKFxcdykvZyxmdW5jdGlvbihhLGIpe3JldHVybiBiLnRvVXBwZXJDYXNlKCl9KX0sU1ZHQXR0cmlidXRlOmZ1bmN0aW9uKGEpe3ZhciBiPVwid2lkdGh8aGVpZ2h0fHh8eXxjeHxjeXxyfHJ4fHJ5fHgxfHgyfHkxfHkyXCI7cmV0dXJuKG58fHQuU3RhdGUuaXNBbmRyb2lkJiYhdC5TdGF0ZS5pc0Nocm9tZSkmJihiKz1cInx0cmFuc2Zvcm1cIiksbmV3IFJlZ0V4cChcIl4oXCIrYitcIikkXCIsXCJpXCIpLnRlc3QoYSl9LHByZWZpeENoZWNrOmZ1bmN0aW9uKGEpe2lmKHQuU3RhdGUucHJlZml4TWF0Y2hlc1thXSlyZXR1cm5bdC5TdGF0ZS5wcmVmaXhNYXRjaGVzW2FdLCEwXTtmb3IodmFyIGI9W1wiXCIsXCJXZWJraXRcIixcIk1velwiLFwibXNcIixcIk9cIl0sYz0wLGQ9Yi5sZW5ndGg7ZD5jO2MrKyl7dmFyIGU7aWYoZT0wPT09Yz9hOmJbY10rYS5yZXBsYWNlKC9eXFx3LyxmdW5jdGlvbihhKXtyZXR1cm4gYS50b1VwcGVyQ2FzZSgpfSkscC5pc1N0cmluZyh0LlN0YXRlLnByZWZpeEVsZW1lbnQuc3R5bGVbZV0pKXJldHVybiB0LlN0YXRlLnByZWZpeE1hdGNoZXNbYV09ZSxbZSwhMF19cmV0dXJuW2EsITFdfX0sVmFsdWVzOntoZXhUb1JnYjpmdW5jdGlvbihhKXt2YXIgYixjPS9eIz8oW2EtZlxcZF0pKFthLWZcXGRdKShbYS1mXFxkXSkkL2ksZD0vXiM/KFthLWZcXGRdezJ9KShbYS1mXFxkXXsyfSkoW2EtZlxcZF17Mn0pJC9pO3JldHVybiBhPWEucmVwbGFjZShjLGZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiBiK2IrYytjK2QrZH0pLGI9ZC5leGVjKGEpLGI/W3BhcnNlSW50KGJbMV0sMTYpLHBhcnNlSW50KGJbMl0sMTYpLHBhcnNlSW50KGJbM10sMTYpXTpbMCwwLDBdfSxpc0NTU051bGxWYWx1ZTpmdW5jdGlvbihhKXtyZXR1cm4gMD09YXx8L14obm9uZXxhdXRvfHRyYW5zcGFyZW50fChyZ2JhXFwoMCwgPzAsID8wLCA/MFxcKSkpJC9pLnRlc3QoYSl9LGdldFVuaXRUeXBlOmZ1bmN0aW9uKGEpe3JldHVybi9eKHJvdGF0ZXxza2V3KS9pLnRlc3QoYSk/XCJkZWdcIjovKF4oc2NhbGV8c2NhbGVYfHNjYWxlWXxzY2FsZVp8YWxwaGF8ZmxleEdyb3d8ZmxleEhlaWdodHx6SW5kZXh8Zm9udFdlaWdodCkkKXwoKG9wYWNpdHl8cmVkfGdyZWVufGJsdWV8YWxwaGEpJCkvaS50ZXN0KGEpP1wiXCI6XCJweFwifSxnZXREaXNwbGF5VHlwZTpmdW5jdGlvbihhKXt2YXIgYj1hJiZhLnRhZ05hbWUudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpO3JldHVybi9eKGJ8YmlnfGl8c21hbGx8dHR8YWJicnxhY3JvbnltfGNpdGV8Y29kZXxkZm58ZW18a2JkfHN0cm9uZ3xzYW1wfHZhcnxhfGJkb3xicnxpbWd8bWFwfG9iamVjdHxxfHNjcmlwdHxzcGFufHN1YnxzdXB8YnV0dG9ufGlucHV0fGxhYmVsfHNlbGVjdHx0ZXh0YXJlYSkkL2kudGVzdChiKT9cImlubGluZVwiOi9eKGxpKSQvaS50ZXN0KGIpP1wibGlzdC1pdGVtXCI6L14odHIpJC9pLnRlc3QoYik/XCJ0YWJsZS1yb3dcIjovXih0YWJsZSkkL2kudGVzdChiKT9cInRhYmxlXCI6L14odGJvZHkpJC9pLnRlc3QoYik/XCJ0YWJsZS1yb3ctZ3JvdXBcIjpcImJsb2NrXCJ9LGFkZENsYXNzOmZ1bmN0aW9uKGEsYil7YS5jbGFzc0xpc3Q/YS5jbGFzc0xpc3QuYWRkKGIpOmEuY2xhc3NOYW1lKz0oYS5jbGFzc05hbWUubGVuZ3RoP1wiIFwiOlwiXCIpK2J9LHJlbW92ZUNsYXNzOmZ1bmN0aW9uKGEsYil7YS5jbGFzc0xpc3Q/YS5jbGFzc0xpc3QucmVtb3ZlKGIpOmEuY2xhc3NOYW1lPWEuY2xhc3NOYW1lLnRvU3RyaW5nKCkucmVwbGFjZShuZXcgUmVnRXhwKFwiKF58XFxcXHMpXCIrYi5zcGxpdChcIiBcIikuam9pbihcInxcIikrXCIoXFxcXHN8JClcIixcImdpXCIpLFwiIFwiKX19LGdldFByb3BlcnR5VmFsdWU6ZnVuY3Rpb24oYSxjLGUsZil7ZnVuY3Rpb24gaChhLGMpe2Z1bmN0aW9uIGUoKXtqJiZ2LnNldFByb3BlcnR5VmFsdWUoYSxcImRpc3BsYXlcIixcIm5vbmVcIil9dmFyIGk9MDtpZig4Pj1uKWk9bS5jc3MoYSxjKTtlbHNle3ZhciBqPSExO2lmKC9eKHdpZHRofGhlaWdodCkkLy50ZXN0KGMpJiYwPT09di5nZXRQcm9wZXJ0eVZhbHVlKGEsXCJkaXNwbGF5XCIpJiYoaj0hMCx2LnNldFByb3BlcnR5VmFsdWUoYSxcImRpc3BsYXlcIix2LlZhbHVlcy5nZXREaXNwbGF5VHlwZShhKSkpLCFmKXtpZihcImhlaWdodFwiPT09YyYmXCJib3JkZXItYm94XCIhPT12LmdldFByb3BlcnR5VmFsdWUoYSxcImJveFNpemluZ1wiKS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkpe3ZhciBrPWEub2Zmc2V0SGVpZ2h0LShwYXJzZUZsb2F0KHYuZ2V0UHJvcGVydHlWYWx1ZShhLFwiYm9yZGVyVG9wV2lkdGhcIikpfHwwKS0ocGFyc2VGbG9hdCh2LmdldFByb3BlcnR5VmFsdWUoYSxcImJvcmRlckJvdHRvbVdpZHRoXCIpKXx8MCktKHBhcnNlRmxvYXQodi5nZXRQcm9wZXJ0eVZhbHVlKGEsXCJwYWRkaW5nVG9wXCIpKXx8MCktKHBhcnNlRmxvYXQodi5nZXRQcm9wZXJ0eVZhbHVlKGEsXCJwYWRkaW5nQm90dG9tXCIpKXx8MCk7cmV0dXJuIGUoKSxrfWlmKFwid2lkdGhcIj09PWMmJlwiYm9yZGVyLWJveFwiIT09di5nZXRQcm9wZXJ0eVZhbHVlKGEsXCJib3hTaXppbmdcIikudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpKXt2YXIgbD1hLm9mZnNldFdpZHRoLShwYXJzZUZsb2F0KHYuZ2V0UHJvcGVydHlWYWx1ZShhLFwiYm9yZGVyTGVmdFdpZHRoXCIpKXx8MCktKHBhcnNlRmxvYXQodi5nZXRQcm9wZXJ0eVZhbHVlKGEsXCJib3JkZXJSaWdodFdpZHRoXCIpKXx8MCktKHBhcnNlRmxvYXQodi5nZXRQcm9wZXJ0eVZhbHVlKGEsXCJwYWRkaW5nTGVmdFwiKSl8fDApLShwYXJzZUZsb2F0KHYuZ2V0UHJvcGVydHlWYWx1ZShhLFwicGFkZGluZ1JpZ2h0XCIpKXx8MCk7cmV0dXJuIGUoKSxsfX12YXIgbztvPWcoYSk9PT1kP2IuZ2V0Q29tcHV0ZWRTdHlsZShhLG51bGwpOmcoYSkuY29tcHV0ZWRTdHlsZT9nKGEpLmNvbXB1dGVkU3R5bGU6ZyhhKS5jb21wdXRlZFN0eWxlPWIuZ2V0Q29tcHV0ZWRTdHlsZShhLG51bGwpLFwiYm9yZGVyQ29sb3JcIj09PWMmJihjPVwiYm9yZGVyVG9wQ29sb3JcIiksaT05PT09biYmXCJmaWx0ZXJcIj09PWM/by5nZXRQcm9wZXJ0eVZhbHVlKGMpOm9bY10sKFwiXCI9PT1pfHxudWxsPT09aSkmJihpPWEuc3R5bGVbY10pLGUoKX1pZihcImF1dG9cIj09PWkmJi9eKHRvcHxyaWdodHxib3R0b218bGVmdCkkL2kudGVzdChjKSl7dmFyIHA9aChhLFwicG9zaXRpb25cIik7KFwiZml4ZWRcIj09PXB8fFwiYWJzb2x1dGVcIj09PXAmJi90b3B8bGVmdC9pLnRlc3QoYykpJiYoaT1tKGEpLnBvc2l0aW9uKClbY10rXCJweFwiKX1yZXR1cm4gaX12YXIgaTtpZih2Lkhvb2tzLnJlZ2lzdGVyZWRbY10pe3ZhciBqPWMsaz12Lkhvb2tzLmdldFJvb3Qoaik7ZT09PWQmJihlPXYuZ2V0UHJvcGVydHlWYWx1ZShhLHYuTmFtZXMucHJlZml4Q2hlY2soaylbMF0pKSx2Lk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRba10mJihlPXYuTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZFtrXShcImV4dHJhY3RcIixhLGUpKSxpPXYuSG9va3MuZXh0cmFjdFZhbHVlKGosZSl9ZWxzZSBpZih2Lk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbY10pe3ZhciBsLG87bD12Lk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbY10oXCJuYW1lXCIsYSksXCJ0cmFuc2Zvcm1cIiE9PWwmJihvPWgoYSx2Lk5hbWVzLnByZWZpeENoZWNrKGwpWzBdKSx2LlZhbHVlcy5pc0NTU051bGxWYWx1ZShvKSYmdi5Ib29rcy50ZW1wbGF0ZXNbY10mJihvPXYuSG9va3MudGVtcGxhdGVzW2NdWzFdKSksaT12Lk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbY10oXCJleHRyYWN0XCIsYSxvKX1pZighL15bXFxkLV0vLnRlc3QoaSkpaWYoZyhhKSYmZyhhKS5pc1NWRyYmdi5OYW1lcy5TVkdBdHRyaWJ1dGUoYykpaWYoL14oaGVpZ2h0fHdpZHRoKSQvaS50ZXN0KGMpKXRyeXtpPWEuZ2V0QkJveCgpW2NdfWNhdGNoKHApe2k9MH1lbHNlIGk9YS5nZXRBdHRyaWJ1dGUoYyk7ZWxzZSBpPWgoYSx2Lk5hbWVzLnByZWZpeENoZWNrKGMpWzBdKTtyZXR1cm4gdi5WYWx1ZXMuaXNDU1NOdWxsVmFsdWUoaSkmJihpPTApLHQuZGVidWc+PTImJmNvbnNvbGUubG9nKFwiR2V0IFwiK2MrXCI6IFwiK2kpLGl9LHNldFByb3BlcnR5VmFsdWU6ZnVuY3Rpb24oYSxjLGQsZSxmKXt2YXIgaD1jO2lmKFwic2Nyb2xsXCI9PT1jKWYuY29udGFpbmVyP2YuY29udGFpbmVyW1wic2Nyb2xsXCIrZi5kaXJlY3Rpb25dPWQ6XCJMZWZ0XCI9PT1mLmRpcmVjdGlvbj9iLnNjcm9sbFRvKGQsZi5hbHRlcm5hdGVWYWx1ZSk6Yi5zY3JvbGxUbyhmLmFsdGVybmF0ZVZhbHVlLGQpO2Vsc2UgaWYodi5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW2NdJiZcInRyYW5zZm9ybVwiPT09di5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW2NdKFwibmFtZVwiLGEpKXYuTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZFtjXShcImluamVjdFwiLGEsZCksaD1cInRyYW5zZm9ybVwiLGQ9ZyhhKS50cmFuc2Zvcm1DYWNoZVtjXTtlbHNle2lmKHYuSG9va3MucmVnaXN0ZXJlZFtjXSl7dmFyIGk9YyxqPXYuSG9va3MuZ2V0Um9vdChjKTtlPWV8fHYuZ2V0UHJvcGVydHlWYWx1ZShhLGopLGQ9di5Ib29rcy5pbmplY3RWYWx1ZShpLGQsZSksYz1qfWlmKHYuTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZFtjXSYmKGQ9di5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW2NdKFwiaW5qZWN0XCIsYSxkKSxjPXYuTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZFtjXShcIm5hbWVcIixhKSksaD12Lk5hbWVzLnByZWZpeENoZWNrKGMpWzBdLDg+PW4pdHJ5e2Euc3R5bGVbaF09ZH1jYXRjaChrKXt0LmRlYnVnJiZjb25zb2xlLmxvZyhcIkJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCBbXCIrZCtcIl0gZm9yIFtcIitoK1wiXVwiKX1lbHNlIGcoYSkmJmcoYSkuaXNTVkcmJnYuTmFtZXMuU1ZHQXR0cmlidXRlKGMpP2Euc2V0QXR0cmlidXRlKGMsZCk6YS5zdHlsZVtoXT1kO3QuZGVidWc+PTImJmNvbnNvbGUubG9nKFwiU2V0IFwiK2MrXCIgKFwiK2grXCIpOiBcIitkKX1yZXR1cm5baCxkXX0sZmx1c2hUcmFuc2Zvcm1DYWNoZTpmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGIpe3JldHVybiBwYXJzZUZsb2F0KHYuZ2V0UHJvcGVydHlWYWx1ZShhLGIpKX12YXIgYz1cIlwiO2lmKChufHx0LlN0YXRlLmlzQW5kcm9pZCYmIXQuU3RhdGUuaXNDaHJvbWUpJiZnKGEpLmlzU1ZHKXt2YXIgZD17dHJhbnNsYXRlOltiKFwidHJhbnNsYXRlWFwiKSxiKFwidHJhbnNsYXRlWVwiKV0sc2tld1g6W2IoXCJza2V3WFwiKV0sc2tld1k6W2IoXCJza2V3WVwiKV0sc2NhbGU6MSE9PWIoXCJzY2FsZVwiKT9bYihcInNjYWxlXCIpLGIoXCJzY2FsZVwiKV06W2IoXCJzY2FsZVhcIiksYihcInNjYWxlWVwiKV0scm90YXRlOltiKFwicm90YXRlWlwiKSwwLDBdfTttLmVhY2goZyhhKS50cmFuc2Zvcm1DYWNoZSxmdW5jdGlvbihhKXsvXnRyYW5zbGF0ZS9pLnRlc3QoYSk/YT1cInRyYW5zbGF0ZVwiOi9ec2NhbGUvaS50ZXN0KGEpP2E9XCJzY2FsZVwiOi9ecm90YXRlL2kudGVzdChhKSYmKGE9XCJyb3RhdGVcIiksZFthXSYmKGMrPWErXCIoXCIrZFthXS5qb2luKFwiIFwiKStcIikgXCIsZGVsZXRlIGRbYV0pfSl9ZWxzZXt2YXIgZSxmO20uZWFjaChnKGEpLnRyYW5zZm9ybUNhY2hlLGZ1bmN0aW9uKGIpe3JldHVybiBlPWcoYSkudHJhbnNmb3JtQ2FjaGVbYl0sXCJ0cmFuc2Zvcm1QZXJzcGVjdGl2ZVwiPT09Yj8oZj1lLCEwKTooOT09PW4mJlwicm90YXRlWlwiPT09YiYmKGI9XCJyb3RhdGVcIiksdm9pZChjKz1iK2UrXCIgXCIpKX0pLGYmJihjPVwicGVyc3BlY3RpdmVcIitmK1wiIFwiK2MpfXYuc2V0UHJvcGVydHlWYWx1ZShhLFwidHJhbnNmb3JtXCIsYyl9fTt2Lkhvb2tzLnJlZ2lzdGVyKCksdi5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcigpLHQuaG9vaz1mdW5jdGlvbihhLGIsYyl7dmFyIGU9ZDtyZXR1cm4gYT1mKGEpLG0uZWFjaChhLGZ1bmN0aW9uKGEsZil7aWYoZyhmKT09PWQmJnQuaW5pdChmKSxjPT09ZCllPT09ZCYmKGU9dC5DU1MuZ2V0UHJvcGVydHlWYWx1ZShmLGIpKTtlbHNle3ZhciBoPXQuQ1NTLnNldFByb3BlcnR5VmFsdWUoZixiLGMpO1widHJhbnNmb3JtXCI9PT1oWzBdJiZ0LkNTUy5mbHVzaFRyYW5zZm9ybUNhY2hlKGYpLGU9aH19KSxlfTt2YXIgdz1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXtyZXR1cm4gaD9CLnByb21pc2V8fG51bGw6aX1mdW5jdGlvbiBlKCl7ZnVuY3Rpb24gYShhKXtmdW5jdGlvbiBsKGEsYil7dmFyIGM9ZCxlPWQsZz1kO3JldHVybiBwLmlzQXJyYXkoYSk/KGM9YVswXSwhcC5pc0FycmF5KGFbMV0pJiYvXltcXGQtXS8udGVzdChhWzFdKXx8cC5pc0Z1bmN0aW9uKGFbMV0pfHx2LlJlZ0V4LmlzSGV4LnRlc3QoYVsxXSk/Zz1hWzFdOihwLmlzU3RyaW5nKGFbMV0pJiYhdi5SZWdFeC5pc0hleC50ZXN0KGFbMV0pfHxwLmlzQXJyYXkoYVsxXSkpJiYoZT1iP2FbMV06aihhWzFdLGguZHVyYXRpb24pLGFbMl0hPT1kJiYoZz1hWzJdKSkpOmM9YSxifHwoZT1lfHxoLmVhc2luZykscC5pc0Z1bmN0aW9uKGMpJiYoYz1jLmNhbGwoZix5LHgpKSxwLmlzRnVuY3Rpb24oZykmJihnPWcuY2FsbChmLHkseCkpLFtjfHwwLGUsZ119ZnVuY3Rpb24gbihhLGIpe3ZhciBjLGQ7cmV0dXJuIGQ9KGJ8fFwiMFwiKS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvWyVBLXpdKyQvLGZ1bmN0aW9uKGEpe3JldHVybiBjPWEsXCJcIn0pLGN8fChjPXYuVmFsdWVzLmdldFVuaXRUeXBlKGEpKSxbZCxjXX1mdW5jdGlvbiByKCl7dmFyIGE9e215UGFyZW50OmYucGFyZW50Tm9kZXx8Yy5ib2R5LHBvc2l0aW9uOnYuZ2V0UHJvcGVydHlWYWx1ZShmLFwicG9zaXRpb25cIiksZm9udFNpemU6di5nZXRQcm9wZXJ0eVZhbHVlKGYsXCJmb250U2l6ZVwiKX0sZD1hLnBvc2l0aW9uPT09SS5sYXN0UG9zaXRpb24mJmEubXlQYXJlbnQ9PT1JLmxhc3RQYXJlbnQsZT1hLmZvbnRTaXplPT09SS5sYXN0Rm9udFNpemU7SS5sYXN0UGFyZW50PWEubXlQYXJlbnQsSS5sYXN0UG9zaXRpb249YS5wb3NpdGlvbixJLmxhc3RGb250U2l6ZT1hLmZvbnRTaXplO3ZhciBoPTEwMCxpPXt9O2lmKGUmJmQpaS5lbVRvUHg9SS5sYXN0RW1Ub1B4LGkucGVyY2VudFRvUHhXaWR0aD1JLmxhc3RQZXJjZW50VG9QeFdpZHRoLGkucGVyY2VudFRvUHhIZWlnaHQ9SS5sYXN0UGVyY2VudFRvUHhIZWlnaHQ7ZWxzZXt2YXIgaj1nKGYpLmlzU1ZHP2MuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIixcInJlY3RcIik6Yy5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3QuaW5pdChqKSxhLm15UGFyZW50LmFwcGVuZENoaWxkKGopLG0uZWFjaChbXCJvdmVyZmxvd1wiLFwib3ZlcmZsb3dYXCIsXCJvdmVyZmxvd1lcIl0sZnVuY3Rpb24oYSxiKXt0LkNTUy5zZXRQcm9wZXJ0eVZhbHVlKGosYixcImhpZGRlblwiKX0pLHQuQ1NTLnNldFByb3BlcnR5VmFsdWUoaixcInBvc2l0aW9uXCIsYS5wb3NpdGlvbiksdC5DU1Muc2V0UHJvcGVydHlWYWx1ZShqLFwiZm9udFNpemVcIixhLmZvbnRTaXplKSx0LkNTUy5zZXRQcm9wZXJ0eVZhbHVlKGosXCJib3hTaXppbmdcIixcImNvbnRlbnQtYm94XCIpLG0uZWFjaChbXCJtaW5XaWR0aFwiLFwibWF4V2lkdGhcIixcIndpZHRoXCIsXCJtaW5IZWlnaHRcIixcIm1heEhlaWdodFwiLFwiaGVpZ2h0XCJdLGZ1bmN0aW9uKGEsYil7dC5DU1Muc2V0UHJvcGVydHlWYWx1ZShqLGIsaCtcIiVcIil9KSx0LkNTUy5zZXRQcm9wZXJ0eVZhbHVlKGosXCJwYWRkaW5nTGVmdFwiLGgrXCJlbVwiKSxpLnBlcmNlbnRUb1B4V2lkdGg9SS5sYXN0UGVyY2VudFRvUHhXaWR0aD0ocGFyc2VGbG9hdCh2LmdldFByb3BlcnR5VmFsdWUoaixcIndpZHRoXCIsbnVsbCwhMCkpfHwxKS9oLGkucGVyY2VudFRvUHhIZWlnaHQ9SS5sYXN0UGVyY2VudFRvUHhIZWlnaHQ9KHBhcnNlRmxvYXQodi5nZXRQcm9wZXJ0eVZhbHVlKGosXCJoZWlnaHRcIixudWxsLCEwKSl8fDEpL2gsaS5lbVRvUHg9SS5sYXN0RW1Ub1B4PShwYXJzZUZsb2F0KHYuZ2V0UHJvcGVydHlWYWx1ZShqLFwicGFkZGluZ0xlZnRcIikpfHwxKS9oLGEubXlQYXJlbnQucmVtb3ZlQ2hpbGQoail9cmV0dXJuIG51bGw9PT1JLnJlbVRvUHgmJihJLnJlbVRvUHg9cGFyc2VGbG9hdCh2LmdldFByb3BlcnR5VmFsdWUoYy5ib2R5LFwiZm9udFNpemVcIikpfHwxNiksbnVsbD09PUkudndUb1B4JiYoSS52d1RvUHg9cGFyc2VGbG9hdChiLmlubmVyV2lkdGgpLzEwMCxJLnZoVG9QeD1wYXJzZUZsb2F0KGIuaW5uZXJIZWlnaHQpLzEwMCksaS5yZW1Ub1B4PUkucmVtVG9QeCxpLnZ3VG9QeD1JLnZ3VG9QeCxpLnZoVG9QeD1JLnZoVG9QeCx0LmRlYnVnPj0xJiZjb25zb2xlLmxvZyhcIlVuaXQgcmF0aW9zOiBcIitKU09OLnN0cmluZ2lmeShpKSxmKSxpfWlmKGguYmVnaW4mJjA9PT15KXRyeXtoLmJlZ2luLmNhbGwobyxvKX1jYXRjaCh1KXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dGhyb3cgdX0sMSl9aWYoXCJzY3JvbGxcIj09PUMpe3ZhciB3LHosQSxEPS9eeCQvaS50ZXN0KGguYXhpcyk/XCJMZWZ0XCI6XCJUb3BcIixFPXBhcnNlRmxvYXQoaC5vZmZzZXQpfHwwO2guY29udGFpbmVyP3AuaXNXcmFwcGVkKGguY29udGFpbmVyKXx8cC5pc05vZGUoaC5jb250YWluZXIpPyhoLmNvbnRhaW5lcj1oLmNvbnRhaW5lclswXXx8aC5jb250YWluZXIsdz1oLmNvbnRhaW5lcltcInNjcm9sbFwiK0RdLEE9dyttKGYpLnBvc2l0aW9uKClbRC50b0xvd2VyQ2FzZSgpXStFKTpoLmNvbnRhaW5lcj1udWxsOih3PXQuU3RhdGUuc2Nyb2xsQW5jaG9yW3QuU3RhdGVbXCJzY3JvbGxQcm9wZXJ0eVwiK0RdXSx6PXQuU3RhdGUuc2Nyb2xsQW5jaG9yW3QuU3RhdGVbXCJzY3JvbGxQcm9wZXJ0eVwiKyhcIkxlZnRcIj09PUQ/XCJUb3BcIjpcIkxlZnRcIildXSxBPW0oZikub2Zmc2V0KClbRC50b0xvd2VyQ2FzZSgpXStFKSxpPXtzY3JvbGw6e3Jvb3RQcm9wZXJ0eVZhbHVlOiExLHN0YXJ0VmFsdWU6dyxjdXJyZW50VmFsdWU6dyxlbmRWYWx1ZTpBLHVuaXRUeXBlOlwiXCIsZWFzaW5nOmguZWFzaW5nLHNjcm9sbERhdGE6e2NvbnRhaW5lcjpoLmNvbnRhaW5lcixkaXJlY3Rpb246RCxhbHRlcm5hdGVWYWx1ZTp6fX0sZWxlbWVudDpmfSx0LmRlYnVnJiZjb25zb2xlLmxvZyhcInR3ZWVuc0NvbnRhaW5lciAoc2Nyb2xsKTogXCIsaS5zY3JvbGwsZil9ZWxzZSBpZihcInJldmVyc2VcIj09PUMpe2lmKCFnKGYpLnR3ZWVuc0NvbnRhaW5lcilyZXR1cm4gdm9pZCBtLmRlcXVldWUoZixoLnF1ZXVlKTtcIm5vbmVcIj09PWcoZikub3B0cy5kaXNwbGF5JiYoZyhmKS5vcHRzLmRpc3BsYXk9XCJhdXRvXCIpLFwiaGlkZGVuXCI9PT1nKGYpLm9wdHMudmlzaWJpbGl0eSYmKGcoZikub3B0cy52aXNpYmlsaXR5PVwidmlzaWJsZVwiKSxnKGYpLm9wdHMubG9vcD0hMSxnKGYpLm9wdHMuYmVnaW49bnVsbCxnKGYpLm9wdHMuY29tcGxldGU9bnVsbCxzLmVhc2luZ3x8ZGVsZXRlIGguZWFzaW5nLHMuZHVyYXRpb258fGRlbGV0ZSBoLmR1cmF0aW9uLGg9bS5leHRlbmQoe30sZyhmKS5vcHRzLGgpO3ZhciBGPW0uZXh0ZW5kKCEwLHt9LGcoZikudHdlZW5zQ29udGFpbmVyKTtmb3IodmFyIEcgaW4gRilpZihcImVsZW1lbnRcIiE9PUcpe3ZhciBIPUZbR10uc3RhcnRWYWx1ZTtGW0ddLnN0YXJ0VmFsdWU9RltHXS5jdXJyZW50VmFsdWU9RltHXS5lbmRWYWx1ZSxGW0ddLmVuZFZhbHVlPUgscC5pc0VtcHR5T2JqZWN0KHMpfHwoRltHXS5lYXNpbmc9aC5lYXNpbmcpLHQuZGVidWcmJmNvbnNvbGUubG9nKFwicmV2ZXJzZSB0d2VlbnNDb250YWluZXIgKFwiK0crXCIpOiBcIitKU09OLnN0cmluZ2lmeShGW0ddKSxmKX1pPUZ9ZWxzZSBpZihcInN0YXJ0XCI9PT1DKXt2YXIgRjtnKGYpLnR3ZWVuc0NvbnRhaW5lciYmZyhmKS5pc0FuaW1hdGluZz09PSEwJiYoRj1nKGYpLnR3ZWVuc0NvbnRhaW5lciksbS5lYWNoKHEsZnVuY3Rpb24oYSxiKXtpZihSZWdFeHAoXCJeXCIrdi5MaXN0cy5jb2xvcnMuam9pbihcIiR8XlwiKStcIiRcIikudGVzdChhKSl7dmFyIGM9bChiLCEwKSxlPWNbMF0sZj1jWzFdLGc9Y1syXTtpZih2LlJlZ0V4LmlzSGV4LnRlc3QoZSkpe2Zvcih2YXIgaD1bXCJSZWRcIixcIkdyZWVuXCIsXCJCbHVlXCJdLGk9di5WYWx1ZXMuaGV4VG9SZ2IoZSksaj1nP3YuVmFsdWVzLmhleFRvUmdiKGcpOmQsaz0wO2s8aC5sZW5ndGg7aysrKXt2YXIgbT1baVtrXV07ZiYmbS5wdXNoKGYpLGohPT1kJiZtLnB1c2goaltrXSkscVthK2hba11dPW19ZGVsZXRlIHFbYV19fX0pO2Zvcih2YXIgSyBpbiBxKXt2YXIgTD1sKHFbS10pLE09TFswXSxOPUxbMV0sTz1MWzJdO0s9di5OYW1lcy5jYW1lbENhc2UoSyk7dmFyIFA9di5Ib29rcy5nZXRSb290KEspLFE9ITE7aWYoZyhmKS5pc1NWR3x8XCJ0d2VlblwiPT09UHx8di5OYW1lcy5wcmVmaXhDaGVjayhQKVsxXSE9PSExfHx2Lk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbUF0hPT1kKXsoaC5kaXNwbGF5IT09ZCYmbnVsbCE9PWguZGlzcGxheSYmXCJub25lXCIhPT1oLmRpc3BsYXl8fGgudmlzaWJpbGl0eSE9PWQmJlwiaGlkZGVuXCIhPT1oLnZpc2liaWxpdHkpJiYvb3BhY2l0eXxmaWx0ZXIvLnRlc3QoSykmJiFPJiYwIT09TSYmKE89MCksaC5fY2FjaGVWYWx1ZXMmJkYmJkZbS10/KE89PT1kJiYoTz1GW0tdLmVuZFZhbHVlK0ZbS10udW5pdFR5cGUpLFE9ZyhmKS5yb290UHJvcGVydHlWYWx1ZUNhY2hlW1BdKTp2Lkhvb2tzLnJlZ2lzdGVyZWRbS10/Tz09PWQ/KFE9di5nZXRQcm9wZXJ0eVZhbHVlKGYsUCksTz12LmdldFByb3BlcnR5VmFsdWUoZixLLFEpKTpRPXYuSG9va3MudGVtcGxhdGVzW1BdWzFdOk89PT1kJiYoTz12LmdldFByb3BlcnR5VmFsdWUoZixLKSk7dmFyIFIsUyxULFU9ITE7aWYoUj1uKEssTyksTz1SWzBdLFQ9UlsxXSxSPW4oSyxNKSxNPVJbMF0ucmVwbGFjZSgvXihbKy1cXC8qXSk9LyxmdW5jdGlvbihhLGIpe3JldHVybiBVPWIsXCJcIn0pLFM9UlsxXSxPPXBhcnNlRmxvYXQoTyl8fDAsTT1wYXJzZUZsb2F0KE0pfHwwLFwiJVwiPT09UyYmKC9eKGZvbnRTaXplfGxpbmVIZWlnaHQpJC8udGVzdChLKT8oTS89MTAwLFM9XCJlbVwiKTovXnNjYWxlLy50ZXN0KEspPyhNLz0xMDAsUz1cIlwiKTovKFJlZHxHcmVlbnxCbHVlKSQvaS50ZXN0KEspJiYoTT1NLzEwMCoyNTUsUz1cIlwiKSksL1tcXC8qXS8udGVzdChVKSlTPVQ7ZWxzZSBpZihUIT09UyYmMCE9PU8paWYoMD09PU0pUz1UO2Vsc2V7ZT1lfHxyKCk7dmFyIFY9L21hcmdpbnxwYWRkaW5nfGxlZnR8cmlnaHR8d2lkdGh8dGV4dHx3b3JkfGxldHRlci9pLnRlc3QoSyl8fC9YJC8udGVzdChLKXx8XCJ4XCI9PT1LP1wieFwiOlwieVwiO1xyXG5zd2l0Y2goVCl7Y2FzZVwiJVwiOk8qPVwieFwiPT09Vj9lLnBlcmNlbnRUb1B4V2lkdGg6ZS5wZXJjZW50VG9QeEhlaWdodDticmVhaztjYXNlXCJweFwiOmJyZWFrO2RlZmF1bHQ6Tyo9ZVtUK1wiVG9QeFwiXX1zd2l0Y2goUyl7Y2FzZVwiJVwiOk8qPTEvKFwieFwiPT09Vj9lLnBlcmNlbnRUb1B4V2lkdGg6ZS5wZXJjZW50VG9QeEhlaWdodCk7YnJlYWs7Y2FzZVwicHhcIjpicmVhaztkZWZhdWx0Ok8qPTEvZVtTK1wiVG9QeFwiXX19c3dpdGNoKFUpe2Nhc2VcIitcIjpNPU8rTTticmVhaztjYXNlXCItXCI6TT1PLU07YnJlYWs7Y2FzZVwiKlwiOk09TypNO2JyZWFrO2Nhc2VcIi9cIjpNPU8vTX1pW0tdPXtyb290UHJvcGVydHlWYWx1ZTpRLHN0YXJ0VmFsdWU6TyxjdXJyZW50VmFsdWU6TyxlbmRWYWx1ZTpNLHVuaXRUeXBlOlMsZWFzaW5nOk59LHQuZGVidWcmJmNvbnNvbGUubG9nKFwidHdlZW5zQ29udGFpbmVyIChcIitLK1wiKTogXCIrSlNPTi5zdHJpbmdpZnkoaVtLXSksZil9ZWxzZSB0LmRlYnVnJiZjb25zb2xlLmxvZyhcIlNraXBwaW5nIFtcIitQK1wiXSBkdWUgdG8gYSBsYWNrIG9mIGJyb3dzZXIgc3VwcG9ydC5cIil9aS5lbGVtZW50PWZ9aS5lbGVtZW50JiYodi5WYWx1ZXMuYWRkQ2xhc3MoZixcInZlbG9jaXR5LWFuaW1hdGluZ1wiKSxKLnB1c2goaSksXCJcIj09PWgucXVldWUmJihnKGYpLnR3ZWVuc0NvbnRhaW5lcj1pLGcoZikub3B0cz1oKSxnKGYpLmlzQW5pbWF0aW5nPSEwLHk9PT14LTE/KHQuU3RhdGUuY2FsbHMucHVzaChbSixvLGgsbnVsbCxCLnJlc29sdmVyXSksdC5TdGF0ZS5pc1RpY2tpbmc9PT0hMSYmKHQuU3RhdGUuaXNUaWNraW5nPSEwLGsoKSkpOnkrKyl9dmFyIGUsZj10aGlzLGg9bS5leHRlbmQoe30sdC5kZWZhdWx0cyxzKSxpPXt9O3N3aXRjaChnKGYpPT09ZCYmdC5pbml0KGYpLHBhcnNlRmxvYXQoaC5kZWxheSkmJmgucXVldWUhPT0hMSYmbS5xdWV1ZShmLGgucXVldWUsZnVuY3Rpb24oYSl7dC52ZWxvY2l0eVF1ZXVlRW50cnlGbGFnPSEwLGcoZikuZGVsYXlUaW1lcj17c2V0VGltZW91dDpzZXRUaW1lb3V0KGEscGFyc2VGbG9hdChoLmRlbGF5KSksbmV4dDphfX0pLGguZHVyYXRpb24udG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpKXtjYXNlXCJmYXN0XCI6aC5kdXJhdGlvbj0yMDA7YnJlYWs7Y2FzZVwibm9ybWFsXCI6aC5kdXJhdGlvbj1yO2JyZWFrO2Nhc2VcInNsb3dcIjpoLmR1cmF0aW9uPTYwMDticmVhaztkZWZhdWx0OmguZHVyYXRpb249cGFyc2VGbG9hdChoLmR1cmF0aW9uKXx8MX10Lm1vY2shPT0hMSYmKHQubW9jaz09PSEwP2guZHVyYXRpb249aC5kZWxheT0xOihoLmR1cmF0aW9uKj1wYXJzZUZsb2F0KHQubW9jayl8fDEsaC5kZWxheSo9cGFyc2VGbG9hdCh0Lm1vY2spfHwxKSksaC5lYXNpbmc9aihoLmVhc2luZyxoLmR1cmF0aW9uKSxoLmJlZ2luJiYhcC5pc0Z1bmN0aW9uKGguYmVnaW4pJiYoaC5iZWdpbj1udWxsKSxoLnByb2dyZXNzJiYhcC5pc0Z1bmN0aW9uKGgucHJvZ3Jlc3MpJiYoaC5wcm9ncmVzcz1udWxsKSxoLmNvbXBsZXRlJiYhcC5pc0Z1bmN0aW9uKGguY29tcGxldGUpJiYoaC5jb21wbGV0ZT1udWxsKSxoLmRpc3BsYXkhPT1kJiZudWxsIT09aC5kaXNwbGF5JiYoaC5kaXNwbGF5PWguZGlzcGxheS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCksXCJhdXRvXCI9PT1oLmRpc3BsYXkmJihoLmRpc3BsYXk9dC5DU1MuVmFsdWVzLmdldERpc3BsYXlUeXBlKGYpKSksaC52aXNpYmlsaXR5IT09ZCYmbnVsbCE9PWgudmlzaWJpbGl0eSYmKGgudmlzaWJpbGl0eT1oLnZpc2liaWxpdHkudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpKSxoLm1vYmlsZUhBPWgubW9iaWxlSEEmJnQuU3RhdGUuaXNNb2JpbGUmJiF0LlN0YXRlLmlzR2luZ2VyYnJlYWQsaC5xdWV1ZT09PSExP2guZGVsYXk/c2V0VGltZW91dChhLGguZGVsYXkpOmEoKTptLnF1ZXVlKGYsaC5xdWV1ZSxmdW5jdGlvbihiLGMpe3JldHVybiBjPT09ITA/KEIucHJvbWlzZSYmQi5yZXNvbHZlcihvKSwhMCk6KHQudmVsb2NpdHlRdWV1ZUVudHJ5RmxhZz0hMCx2b2lkIGEoYikpfSksXCJcIiE9PWgucXVldWUmJlwiZnhcIiE9PWgucXVldWV8fFwiaW5wcm9ncmVzc1wiPT09bS5xdWV1ZShmKVswXXx8bS5kZXF1ZXVlKGYpfXZhciBoLGksbixvLHEscyx1PWFyZ3VtZW50c1swXSYmKGFyZ3VtZW50c1swXS5wfHxtLmlzUGxhaW5PYmplY3QoYXJndW1lbnRzWzBdLnByb3BlcnRpZXMpJiYhYXJndW1lbnRzWzBdLnByb3BlcnRpZXMubmFtZXN8fHAuaXNTdHJpbmcoYXJndW1lbnRzWzBdLnByb3BlcnRpZXMpKTtpZihwLmlzV3JhcHBlZCh0aGlzKT8oaD0hMSxuPTAsbz10aGlzLGk9dGhpcyk6KGg9ITAsbj0xLG89dT9hcmd1bWVudHNbMF0uZWxlbWVudHN8fGFyZ3VtZW50c1swXS5lOmFyZ3VtZW50c1swXSksbz1mKG8pKXt1PyhxPWFyZ3VtZW50c1swXS5wcm9wZXJ0aWVzfHxhcmd1bWVudHNbMF0ucCxzPWFyZ3VtZW50c1swXS5vcHRpb25zfHxhcmd1bWVudHNbMF0ubyk6KHE9YXJndW1lbnRzW25dLHM9YXJndW1lbnRzW24rMV0pO3ZhciB4PW8ubGVuZ3RoLHk9MDtpZighL14oc3RvcHxmaW5pc2gpJC9pLnRlc3QocSkmJiFtLmlzUGxhaW5PYmplY3Qocykpe3ZhciB6PW4rMTtzPXt9O2Zvcih2YXIgQT16O0E8YXJndW1lbnRzLmxlbmd0aDtBKyspcC5pc0FycmF5KGFyZ3VtZW50c1tBXSl8fCEvXihmYXN0fG5vcm1hbHxzbG93KSQvaS50ZXN0KGFyZ3VtZW50c1tBXSkmJiEvXlxcZC8udGVzdChhcmd1bWVudHNbQV0pP3AuaXNTdHJpbmcoYXJndW1lbnRzW0FdKXx8cC5pc0FycmF5KGFyZ3VtZW50c1tBXSk/cy5lYXNpbmc9YXJndW1lbnRzW0FdOnAuaXNGdW5jdGlvbihhcmd1bWVudHNbQV0pJiYocy5jb21wbGV0ZT1hcmd1bWVudHNbQV0pOnMuZHVyYXRpb249YXJndW1lbnRzW0FdfXZhciBCPXtwcm9taXNlOm51bGwscmVzb2x2ZXI6bnVsbCxyZWplY3RlcjpudWxsfTtoJiZ0LlByb21pc2UmJihCLnByb21pc2U9bmV3IHQuUHJvbWlzZShmdW5jdGlvbihhLGIpe0IucmVzb2x2ZXI9YSxCLnJlamVjdGVyPWJ9KSk7dmFyIEM7c3dpdGNoKHEpe2Nhc2VcInNjcm9sbFwiOkM9XCJzY3JvbGxcIjticmVhaztjYXNlXCJyZXZlcnNlXCI6Qz1cInJldmVyc2VcIjticmVhaztjYXNlXCJmaW5pc2hcIjpjYXNlXCJzdG9wXCI6bS5lYWNoKG8sZnVuY3Rpb24oYSxiKXtnKGIpJiZnKGIpLmRlbGF5VGltZXImJihjbGVhclRpbWVvdXQoZyhiKS5kZWxheVRpbWVyLnNldFRpbWVvdXQpLGcoYikuZGVsYXlUaW1lci5uZXh0JiZnKGIpLmRlbGF5VGltZXIubmV4dCgpLGRlbGV0ZSBnKGIpLmRlbGF5VGltZXIpfSk7dmFyIEQ9W107cmV0dXJuIG0uZWFjaCh0LlN0YXRlLmNhbGxzLGZ1bmN0aW9uKGEsYil7YiYmbS5lYWNoKGJbMV0sZnVuY3Rpb24oYyxlKXt2YXIgZj1zPT09ZD9cIlwiOnM7cmV0dXJuIGY9PT0hMHx8YlsyXS5xdWV1ZT09PWZ8fHM9PT1kJiZiWzJdLnF1ZXVlPT09ITE/dm9pZCBtLmVhY2gobyxmdW5jdGlvbihjLGQpe2Q9PT1lJiYoKHM9PT0hMHx8cC5pc1N0cmluZyhzKSkmJihtLmVhY2gobS5xdWV1ZShkLHAuaXNTdHJpbmcocyk/czpcIlwiKSxmdW5jdGlvbihhLGIpe3AuaXNGdW5jdGlvbihiKSYmYihudWxsLCEwKX0pLG0ucXVldWUoZCxwLmlzU3RyaW5nKHMpP3M6XCJcIixbXSkpLFwic3RvcFwiPT09cT8oZyhkKSYmZyhkKS50d2VlbnNDb250YWluZXImJmYhPT0hMSYmbS5lYWNoKGcoZCkudHdlZW5zQ29udGFpbmVyLGZ1bmN0aW9uKGEsYil7Yi5lbmRWYWx1ZT1iLmN1cnJlbnRWYWx1ZX0pLEQucHVzaChhKSk6XCJmaW5pc2hcIj09PXEmJihiWzJdLmR1cmF0aW9uPTEpKX0pOiEwfSl9KSxcInN0b3BcIj09PXEmJihtLmVhY2goRCxmdW5jdGlvbihhLGIpe2woYiwhMCl9KSxCLnByb21pc2UmJkIucmVzb2x2ZXIobykpLGEoKTtkZWZhdWx0OmlmKCFtLmlzUGxhaW5PYmplY3QocSl8fHAuaXNFbXB0eU9iamVjdChxKSl7aWYocC5pc1N0cmluZyhxKSYmdC5SZWRpcmVjdHNbcV0pe3ZhciBFPW0uZXh0ZW5kKHt9LHMpLEY9RS5kdXJhdGlvbixHPUUuZGVsYXl8fDA7cmV0dXJuIEUuYmFja3dhcmRzPT09ITAmJihvPW0uZXh0ZW5kKCEwLFtdLG8pLnJldmVyc2UoKSksbS5lYWNoKG8sZnVuY3Rpb24oYSxiKXtwYXJzZUZsb2F0KEUuc3RhZ2dlcik/RS5kZWxheT1HK3BhcnNlRmxvYXQoRS5zdGFnZ2VyKSphOnAuaXNGdW5jdGlvbihFLnN0YWdnZXIpJiYoRS5kZWxheT1HK0Uuc3RhZ2dlci5jYWxsKGIsYSx4KSksRS5kcmFnJiYoRS5kdXJhdGlvbj1wYXJzZUZsb2F0KEYpfHwoL14oY2FsbG91dHx0cmFuc2l0aW9uKS8udGVzdChxKT8xZTM6ciksRS5kdXJhdGlvbj1NYXRoLm1heChFLmR1cmF0aW9uKihFLmJhY2t3YXJkcz8xLWEveDooYSsxKS94KSwuNzUqRS5kdXJhdGlvbiwyMDApKSx0LlJlZGlyZWN0c1txXS5jYWxsKGIsYixFfHx7fSxhLHgsbyxCLnByb21pc2U/QjpkKX0pLGEoKX12YXIgSD1cIlZlbG9jaXR5OiBGaXJzdCBhcmd1bWVudCAoXCIrcStcIikgd2FzIG5vdCBhIHByb3BlcnR5IG1hcCwgYSBrbm93biBhY3Rpb24sIG9yIGEgcmVnaXN0ZXJlZCByZWRpcmVjdC4gQWJvcnRpbmcuXCI7cmV0dXJuIEIucHJvbWlzZT9CLnJlamVjdGVyKG5ldyBFcnJvcihIKSk6Y29uc29sZS5sb2coSCksYSgpfUM9XCJzdGFydFwifXZhciBJPXtsYXN0UGFyZW50Om51bGwsbGFzdFBvc2l0aW9uOm51bGwsbGFzdEZvbnRTaXplOm51bGwsbGFzdFBlcmNlbnRUb1B4V2lkdGg6bnVsbCxsYXN0UGVyY2VudFRvUHhIZWlnaHQ6bnVsbCxsYXN0RW1Ub1B4Om51bGwscmVtVG9QeDpudWxsLHZ3VG9QeDpudWxsLHZoVG9QeDpudWxsfSxKPVtdO20uZWFjaChvLGZ1bmN0aW9uKGEsYil7cC5pc05vZGUoYikmJmUuY2FsbChiKX0pO3ZhciBLLEU9bS5leHRlbmQoe30sdC5kZWZhdWx0cyxzKTtpZihFLmxvb3A9cGFyc2VJbnQoRS5sb29wKSxLPTIqRS5sb29wLTEsRS5sb29wKWZvcih2YXIgTD0wO0s+TDtMKyspe3ZhciBNPXtkZWxheTpFLmRlbGF5LHByb2dyZXNzOkUucHJvZ3Jlc3N9O0w9PT1LLTEmJihNLmRpc3BsYXk9RS5kaXNwbGF5LE0udmlzaWJpbGl0eT1FLnZpc2liaWxpdHksTS5jb21wbGV0ZT1FLmNvbXBsZXRlKSx3KG8sXCJyZXZlcnNlXCIsTSl9cmV0dXJuIGEoKX19O3Q9bS5leHRlbmQodyx0KSx0LmFuaW1hdGU9dzt2YXIgeD1iLnJlcXVlc3RBbmltYXRpb25GcmFtZXx8bztyZXR1cm4gdC5TdGF0ZS5pc01vYmlsZXx8Yy5oaWRkZW49PT1kfHxjLmFkZEV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsZnVuY3Rpb24oKXtjLmhpZGRlbj8oeD1mdW5jdGlvbihhKXtyZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpe2EoITApfSwxNil9LGsoKSk6eD1iLnJlcXVlc3RBbmltYXRpb25GcmFtZXx8b30pLGEuVmVsb2NpdHk9dCxhIT09YiYmKGEuZm4udmVsb2NpdHk9dyxhLmZuLnZlbG9jaXR5LmRlZmF1bHRzPXQuZGVmYXVsdHMpLG0uZWFjaChbXCJEb3duXCIsXCJVcFwiXSxmdW5jdGlvbihhLGIpe3QuUmVkaXJlY3RzW1wic2xpZGVcIitiXT1mdW5jdGlvbihhLGMsZSxmLGcsaCl7dmFyIGk9bS5leHRlbmQoe30sYyksaj1pLmJlZ2luLGs9aS5jb21wbGV0ZSxsPXtoZWlnaHQ6XCJcIixtYXJnaW5Ub3A6XCJcIixtYXJnaW5Cb3R0b206XCJcIixwYWRkaW5nVG9wOlwiXCIscGFkZGluZ0JvdHRvbTpcIlwifSxuPXt9O2kuZGlzcGxheT09PWQmJihpLmRpc3BsYXk9XCJEb3duXCI9PT1iP1wiaW5saW5lXCI9PT10LkNTUy5WYWx1ZXMuZ2V0RGlzcGxheVR5cGUoYSk/XCJpbmxpbmUtYmxvY2tcIjpcImJsb2NrXCI6XCJub25lXCIpLGkuYmVnaW49ZnVuY3Rpb24oKXtqJiZqLmNhbGwoZyxnKTtmb3IodmFyIGMgaW4gbCl7bltjXT1hLnN0eWxlW2NdO3ZhciBkPXQuQ1NTLmdldFByb3BlcnR5VmFsdWUoYSxjKTtsW2NdPVwiRG93blwiPT09Yj9bZCwwXTpbMCxkXX1uLm92ZXJmbG93PWEuc3R5bGUub3ZlcmZsb3csYS5zdHlsZS5vdmVyZmxvdz1cImhpZGRlblwifSxpLmNvbXBsZXRlPWZ1bmN0aW9uKCl7Zm9yKHZhciBiIGluIG4pYS5zdHlsZVtiXT1uW2JdO2smJmsuY2FsbChnLGcpLGgmJmgucmVzb2x2ZXIoZyl9LHQoYSxsLGkpfX0pLG0uZWFjaChbXCJJblwiLFwiT3V0XCJdLGZ1bmN0aW9uKGEsYil7dC5SZWRpcmVjdHNbXCJmYWRlXCIrYl09ZnVuY3Rpb24oYSxjLGUsZixnLGgpe3ZhciBpPW0uZXh0ZW5kKHt9LGMpLGo9e29wYWNpdHk6XCJJblwiPT09Yj8xOjB9LGs9aS5jb21wbGV0ZTtpLmNvbXBsZXRlPWUhPT1mLTE/aS5iZWdpbj1udWxsOmZ1bmN0aW9uKCl7ayYmay5jYWxsKGcsZyksaCYmaC5yZXNvbHZlcihnKX0saS5kaXNwbGF5PT09ZCYmKGkuZGlzcGxheT1cIkluXCI9PT1iP1wiYXV0b1wiOlwibm9uZVwiKSx0KHRoaXMsaixpKX19KSx0fSh3aW5kb3cualF1ZXJ5fHx3aW5kb3cuWmVwdG98fHdpbmRvdyx3aW5kb3csZG9jdW1lbnQpfSkpLCFmdW5jdGlvbihhLGIsYyxkKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBlKGEsYixjKXtyZXR1cm4gc2V0VGltZW91dChrKGEsYyksYil9ZnVuY3Rpb24gZihhLGIsYyl7cmV0dXJuIEFycmF5LmlzQXJyYXkoYSk/KGcoYSxjW2JdLGMpLCEwKTohMX1mdW5jdGlvbiBnKGEsYixjKXt2YXIgZTtpZihhKWlmKGEuZm9yRWFjaClhLmZvckVhY2goYixjKTtlbHNlIGlmKGEubGVuZ3RoIT09ZClmb3IoZT0wO2U8YS5sZW5ndGg7KWIuY2FsbChjLGFbZV0sZSxhKSxlKys7ZWxzZSBmb3IoZSBpbiBhKWEuaGFzT3duUHJvcGVydHkoZSkmJmIuY2FsbChjLGFbZV0sZSxhKX1mdW5jdGlvbiBoKGEsYixjKXtmb3IodmFyIGU9T2JqZWN0LmtleXMoYiksZj0wO2Y8ZS5sZW5ndGg7KSghY3x8YyYmYVtlW2ZdXT09PWQpJiYoYVtlW2ZdXT1iW2VbZl1dKSxmKys7cmV0dXJuIGF9ZnVuY3Rpb24gaShhLGIpe3JldHVybiBoKGEsYiwhMCl9ZnVuY3Rpb24gaihhLGIsYyl7dmFyIGQsZT1iLnByb3RvdHlwZTtkPWEucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSksZC5jb25zdHJ1Y3Rvcj1hLGQuX3N1cGVyPWUsYyYmaChkLGMpfWZ1bmN0aW9uIGsoYSxiKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYS5hcHBseShiLGFyZ3VtZW50cyl9fWZ1bmN0aW9uIGwoYSxiKXtyZXR1cm4gdHlwZW9mIGE9PWthP2EuYXBwbHkoYj9iWzBdfHxkOmQsYik6YX1mdW5jdGlvbiBtKGEsYil7cmV0dXJuIGE9PT1kP2I6YX1mdW5jdGlvbiBuKGEsYixjKXtnKHIoYiksZnVuY3Rpb24oYil7YS5hZGRFdmVudExpc3RlbmVyKGIsYywhMSl9KX1mdW5jdGlvbiBvKGEsYixjKXtnKHIoYiksZnVuY3Rpb24oYil7YS5yZW1vdmVFdmVudExpc3RlbmVyKGIsYywhMSl9KX1mdW5jdGlvbiBwKGEsYil7Zm9yKDthOyl7aWYoYT09YilyZXR1cm4hMDthPWEucGFyZW50Tm9kZX1yZXR1cm4hMX1mdW5jdGlvbiBxKGEsYil7cmV0dXJuIGEuaW5kZXhPZihiKT4tMX1mdW5jdGlvbiByKGEpe3JldHVybiBhLnRyaW0oKS5zcGxpdCgvXFxzKy9nKX1mdW5jdGlvbiBzKGEsYixjKXtpZihhLmluZGV4T2YmJiFjKXJldHVybiBhLmluZGV4T2YoYik7Zm9yKHZhciBkPTA7ZDxhLmxlbmd0aDspe2lmKGMmJmFbZF1bY109PWJ8fCFjJiZhW2RdPT09YilyZXR1cm4gZDtkKyt9cmV0dXJuLTF9ZnVuY3Rpb24gdChhKXtyZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYSwwKX1mdW5jdGlvbiB1KGEsYixjKXtmb3IodmFyIGQ9W10sZT1bXSxmPTA7ZjxhLmxlbmd0aDspe3ZhciBnPWI/YVtmXVtiXTphW2ZdO3MoZSxnKTwwJiZkLnB1c2goYVtmXSksZVtmXT1nLGYrK31yZXR1cm4gYyYmKGQ9Yj9kLnNvcnQoZnVuY3Rpb24oYSxjKXtyZXR1cm4gYVtiXT5jW2JdfSk6ZC5zb3J0KCkpLGR9ZnVuY3Rpb24gdihhLGIpe2Zvcih2YXIgYyxlLGY9YlswXS50b1VwcGVyQ2FzZSgpK2Iuc2xpY2UoMSksZz0wO2c8aWEubGVuZ3RoOyl7aWYoYz1pYVtnXSxlPWM/YytmOmIsZSBpbiBhKXJldHVybiBlO2crK31yZXR1cm4gZH1mdW5jdGlvbiB3KCl7cmV0dXJuIG9hKyt9ZnVuY3Rpb24geChhKXt2YXIgYj1hLm93bmVyRG9jdW1lbnQ7cmV0dXJuIGIuZGVmYXVsdFZpZXd8fGIucGFyZW50V2luZG93fWZ1bmN0aW9uIHkoYSxiKXt2YXIgYz10aGlzO3RoaXMubWFuYWdlcj1hLHRoaXMuY2FsbGJhY2s9Yix0aGlzLmVsZW1lbnQ9YS5lbGVtZW50LHRoaXMudGFyZ2V0PWEub3B0aW9ucy5pbnB1dFRhcmdldCx0aGlzLmRvbUhhbmRsZXI9ZnVuY3Rpb24oYil7bChhLm9wdGlvbnMuZW5hYmxlLFthXSkmJmMuaGFuZGxlcihiKX0sdGhpcy5pbml0KCl9ZnVuY3Rpb24geihhKXt2YXIgYixjPWEub3B0aW9ucy5pbnB1dENsYXNzO3JldHVybiBuZXcoYj1jP2M6cmE/TjpzYT9ROnFhP1M6TSkoYSxBKX1mdW5jdGlvbiBBKGEsYixjKXt2YXIgZD1jLnBvaW50ZXJzLmxlbmd0aCxlPWMuY2hhbmdlZFBvaW50ZXJzLmxlbmd0aCxmPWImeWEmJjA9PT1kLWUsZz1iJihBYXxCYSkmJjA9PT1kLWU7Yy5pc0ZpcnN0PSEhZixjLmlzRmluYWw9ISFnLGYmJihhLnNlc3Npb249e30pLGMuZXZlbnRUeXBlPWIsQihhLGMpLGEuZW1pdChcImhhbW1lci5pbnB1dFwiLGMpLGEucmVjb2duaXplKGMpLGEuc2Vzc2lvbi5wcmV2SW5wdXQ9Y31mdW5jdGlvbiBCKGEsYil7dmFyIGM9YS5zZXNzaW9uLGQ9Yi5wb2ludGVycyxlPWQubGVuZ3RoO2MuZmlyc3RJbnB1dHx8KGMuZmlyc3RJbnB1dD1FKGIpKSxlPjEmJiFjLmZpcnN0TXVsdGlwbGU/Yy5maXJzdE11bHRpcGxlPUUoYik6MT09PWUmJihjLmZpcnN0TXVsdGlwbGU9ITEpO3ZhciBmPWMuZmlyc3RJbnB1dCxnPWMuZmlyc3RNdWx0aXBsZSxoPWc/Zy5jZW50ZXI6Zi5jZW50ZXIsaT1iLmNlbnRlcj1GKGQpO2IudGltZVN0YW1wPW5hKCksYi5kZWx0YVRpbWU9Yi50aW1lU3RhbXAtZi50aW1lU3RhbXAsYi5hbmdsZT1KKGgsaSksYi5kaXN0YW5jZT1JKGgsaSksQyhjLGIpLGIub2Zmc2V0RGlyZWN0aW9uPUgoYi5kZWx0YVgsYi5kZWx0YVkpLGIuc2NhbGU9Zz9MKGcucG9pbnRlcnMsZCk6MSxiLnJvdGF0aW9uPWc/SyhnLnBvaW50ZXJzLGQpOjAsRChjLGIpO3ZhciBqPWEuZWxlbWVudDtwKGIuc3JjRXZlbnQudGFyZ2V0LGopJiYoaj1iLnNyY0V2ZW50LnRhcmdldCksYi50YXJnZXQ9an1mdW5jdGlvbiBDKGEsYil7dmFyIGM9Yi5jZW50ZXIsZD1hLm9mZnNldERlbHRhfHx7fSxlPWEucHJldkRlbHRhfHx7fSxmPWEucHJldklucHV0fHx7fTsoYi5ldmVudFR5cGU9PT15YXx8Zi5ldmVudFR5cGU9PT1BYSkmJihlPWEucHJldkRlbHRhPXt4OmYuZGVsdGFYfHwwLHk6Zi5kZWx0YVl8fDB9LGQ9YS5vZmZzZXREZWx0YT17eDpjLngseTpjLnl9KSxiLmRlbHRhWD1lLngrKGMueC1kLngpLGIuZGVsdGFZPWUueSsoYy55LWQueSl9ZnVuY3Rpb24gRChhLGIpe3ZhciBjLGUsZixnLGg9YS5sYXN0SW50ZXJ2YWx8fGIsaT1iLnRpbWVTdGFtcC1oLnRpbWVTdGFtcDtpZihiLmV2ZW50VHlwZSE9QmEmJihpPnhhfHxoLnZlbG9jaXR5PT09ZCkpe3ZhciBqPWguZGVsdGFYLWIuZGVsdGFYLGs9aC5kZWx0YVktYi5kZWx0YVksbD1HKGksaixrKTtlPWwueCxmPWwueSxjPW1hKGwueCk+bWEobC55KT9sLng6bC55LGc9SChqLGspLGEubGFzdEludGVydmFsPWJ9ZWxzZSBjPWgudmVsb2NpdHksZT1oLnZlbG9jaXR5WCxmPWgudmVsb2NpdHlZLGc9aC5kaXJlY3Rpb247Yi52ZWxvY2l0eT1jLGIudmVsb2NpdHlYPWUsYi52ZWxvY2l0eVk9ZixiLmRpcmVjdGlvbj1nfWZ1bmN0aW9uIEUoYSl7Zm9yKHZhciBiPVtdLGM9MDtjPGEucG9pbnRlcnMubGVuZ3RoOyliW2NdPXtjbGllbnRYOmxhKGEucG9pbnRlcnNbY10uY2xpZW50WCksY2xpZW50WTpsYShhLnBvaW50ZXJzW2NdLmNsaWVudFkpfSxjKys7cmV0dXJue3RpbWVTdGFtcDpuYSgpLHBvaW50ZXJzOmIsY2VudGVyOkYoYiksZGVsdGFYOmEuZGVsdGFYLGRlbHRhWTphLmRlbHRhWX19ZnVuY3Rpb24gRihhKXt2YXIgYj1hLmxlbmd0aDtpZigxPT09YilyZXR1cm57eDpsYShhWzBdLmNsaWVudFgpLHk6bGEoYVswXS5jbGllbnRZKX07Zm9yKHZhciBjPTAsZD0wLGU9MDtiPmU7KWMrPWFbZV0uY2xpZW50WCxkKz1hW2VdLmNsaWVudFksZSsrO3JldHVybnt4OmxhKGMvYikseTpsYShkL2IpfX1mdW5jdGlvbiBHKGEsYixjKXtyZXR1cm57eDpiL2F8fDAseTpjL2F8fDB9fWZ1bmN0aW9uIEgoYSxiKXtyZXR1cm4gYT09PWI/Q2E6bWEoYSk+PW1hKGIpP2E+MD9EYTpFYTpiPjA/RmE6R2F9ZnVuY3Rpb24gSShhLGIsYyl7Y3x8KGM9S2EpO3ZhciBkPWJbY1swXV0tYVtjWzBdXSxlPWJbY1sxXV0tYVtjWzFdXTtyZXR1cm4gTWF0aC5zcXJ0KGQqZCtlKmUpfWZ1bmN0aW9uIEooYSxiLGMpe2N8fChjPUthKTt2YXIgZD1iW2NbMF1dLWFbY1swXV0sZT1iW2NbMV1dLWFbY1sxXV07cmV0dXJuIDE4MCpNYXRoLmF0YW4yKGUsZCkvTWF0aC5QSX1mdW5jdGlvbiBLKGEsYil7cmV0dXJuIEooYlsxXSxiWzBdLExhKS1KKGFbMV0sYVswXSxMYSl9ZnVuY3Rpb24gTChhLGIpe3JldHVybiBJKGJbMF0sYlsxXSxMYSkvSShhWzBdLGFbMV0sTGEpfWZ1bmN0aW9uIE0oKXt0aGlzLmV2RWw9TmEsdGhpcy5ldldpbj1PYSx0aGlzLmFsbG93PSEwLHRoaXMucHJlc3NlZD0hMSx5LmFwcGx5KHRoaXMsYXJndW1lbnRzKX1mdW5jdGlvbiBOKCl7dGhpcy5ldkVsPVJhLHRoaXMuZXZXaW49U2EseS5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5zdG9yZT10aGlzLm1hbmFnZXIuc2Vzc2lvbi5wb2ludGVyRXZlbnRzPVtdfWZ1bmN0aW9uIE8oKXt0aGlzLmV2VGFyZ2V0PVVhLHRoaXMuZXZXaW49VmEsdGhpcy5zdGFydGVkPSExLHkuYXBwbHkodGhpcyxhcmd1bWVudHMpfWZ1bmN0aW9uIFAoYSxiKXt2YXIgYz10KGEudG91Y2hlcyksZD10KGEuY2hhbmdlZFRvdWNoZXMpO3JldHVybiBiJihBYXxCYSkmJihjPXUoYy5jb25jYXQoZCksXCJpZGVudGlmaWVyXCIsITApKSxbYyxkXX1mdW5jdGlvbiBRKCl7dGhpcy5ldlRhcmdldD1YYSx0aGlzLnRhcmdldElkcz17fSx5LmFwcGx5KHRoaXMsYXJndW1lbnRzKX1mdW5jdGlvbiBSKGEsYil7dmFyIGM9dChhLnRvdWNoZXMpLGQ9dGhpcy50YXJnZXRJZHM7aWYoYiYoeWF8emEpJiYxPT09Yy5sZW5ndGgpcmV0dXJuIGRbY1swXS5pZGVudGlmaWVyXT0hMCxbYyxjXTt2YXIgZSxmLGc9dChhLmNoYW5nZWRUb3VjaGVzKSxoPVtdLGk9dGhpcy50YXJnZXQ7aWYoZj1jLmZpbHRlcihmdW5jdGlvbihhKXtyZXR1cm4gcChhLnRhcmdldCxpKX0pLGI9PT15YSlmb3IoZT0wO2U8Zi5sZW5ndGg7KWRbZltlXS5pZGVudGlmaWVyXT0hMCxlKys7Zm9yKGU9MDtlPGcubGVuZ3RoOylkW2dbZV0uaWRlbnRpZmllcl0mJmgucHVzaChnW2VdKSxiJihBYXxCYSkmJmRlbGV0ZSBkW2dbZV0uaWRlbnRpZmllcl0sZSsrO3JldHVybiBoLmxlbmd0aD9bdShmLmNvbmNhdChoKSxcImlkZW50aWZpZXJcIiwhMCksaF06dm9pZCAwfWZ1bmN0aW9uIFMoKXt5LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgYT1rKHRoaXMuaGFuZGxlcix0aGlzKTt0aGlzLnRvdWNoPW5ldyBRKHRoaXMubWFuYWdlcixhKSx0aGlzLm1vdXNlPW5ldyBNKHRoaXMubWFuYWdlcixhKX1mdW5jdGlvbiBUKGEsYil7dGhpcy5tYW5hZ2VyPWEsdGhpcy5zZXQoYil9ZnVuY3Rpb24gVShhKXtpZihxKGEsYmIpKXJldHVybiBiYjt2YXIgYj1xKGEsY2IpLGM9cShhLGRiKTtyZXR1cm4gYiYmYz9jYitcIiBcIitkYjpifHxjP2I/Y2I6ZGI6cShhLGFiKT9hYjpfYX1mdW5jdGlvbiBWKGEpe3RoaXMuaWQ9dygpLHRoaXMubWFuYWdlcj1udWxsLHRoaXMub3B0aW9ucz1pKGF8fHt9LHRoaXMuZGVmYXVsdHMpLHRoaXMub3B0aW9ucy5lbmFibGU9bSh0aGlzLm9wdGlvbnMuZW5hYmxlLCEwKSx0aGlzLnN0YXRlPWViLHRoaXMuc2ltdWx0YW5lb3VzPXt9LHRoaXMucmVxdWlyZUZhaWw9W119ZnVuY3Rpb24gVyhhKXtyZXR1cm4gYSZqYj9cImNhbmNlbFwiOmEmaGI/XCJlbmRcIjphJmdiP1wibW92ZVwiOmEmZmI/XCJzdGFydFwiOlwiXCJ9ZnVuY3Rpb24gWChhKXtyZXR1cm4gYT09R2E/XCJkb3duXCI6YT09RmE/XCJ1cFwiOmE9PURhP1wibGVmdFwiOmE9PUVhP1wicmlnaHRcIjpcIlwifWZ1bmN0aW9uIFkoYSxiKXt2YXIgYz1iLm1hbmFnZXI7cmV0dXJuIGM/Yy5nZXQoYSk6YX1mdW5jdGlvbiBaKCl7Vi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9ZnVuY3Rpb24gJCgpe1ouYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMucFg9bnVsbCx0aGlzLnBZPW51bGx9ZnVuY3Rpb24gXygpe1ouYXBwbHkodGhpcyxhcmd1bWVudHMpfWZ1bmN0aW9uIGFhKCl7Vi5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5fdGltZXI9bnVsbCx0aGlzLl9pbnB1dD1udWxsfWZ1bmN0aW9uIGJhKCl7Wi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9ZnVuY3Rpb24gY2EoKXtaLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1mdW5jdGlvbiBkYSgpe1YuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMucFRpbWU9ITEsdGhpcy5wQ2VudGVyPSExLHRoaXMuX3RpbWVyPW51bGwsdGhpcy5faW5wdXQ9bnVsbCx0aGlzLmNvdW50PTB9ZnVuY3Rpb24gZWEoYSxiKXtyZXR1cm4gYj1ifHx7fSxiLnJlY29nbml6ZXJzPW0oYi5yZWNvZ25pemVycyxlYS5kZWZhdWx0cy5wcmVzZXQpLG5ldyBmYShhLGIpfWZ1bmN0aW9uIGZhKGEsYil7Yj1ifHx7fSx0aGlzLm9wdGlvbnM9aShiLGVhLmRlZmF1bHRzKSx0aGlzLm9wdGlvbnMuaW5wdXRUYXJnZXQ9dGhpcy5vcHRpb25zLmlucHV0VGFyZ2V0fHxhLHRoaXMuaGFuZGxlcnM9e30sdGhpcy5zZXNzaW9uPXt9LHRoaXMucmVjb2duaXplcnM9W10sdGhpcy5lbGVtZW50PWEsdGhpcy5pbnB1dD16KHRoaXMpLHRoaXMudG91Y2hBY3Rpb249bmV3IFQodGhpcyx0aGlzLm9wdGlvbnMudG91Y2hBY3Rpb24pLGdhKHRoaXMsITApLGcoYi5yZWNvZ25pemVycyxmdW5jdGlvbihhKXt2YXIgYj10aGlzLmFkZChuZXcgYVswXShhWzFdKSk7YVsyXSYmYi5yZWNvZ25pemVXaXRoKGFbMl0pLGFbM10mJmIucmVxdWlyZUZhaWx1cmUoYVszXSl9LHRoaXMpfWZ1bmN0aW9uIGdhKGEsYil7dmFyIGM9YS5lbGVtZW50O2coYS5vcHRpb25zLmNzc1Byb3BzLGZ1bmN0aW9uKGEsZCl7Yy5zdHlsZVt2KGMuc3R5bGUsZCldPWI/YTpcIlwifSl9ZnVuY3Rpb24gaGEoYSxjKXt2YXIgZD1iLmNyZWF0ZUV2ZW50KFwiRXZlbnRcIik7ZC5pbml0RXZlbnQoYSwhMCwhMCksZC5nZXN0dXJlPWMsYy50YXJnZXQuZGlzcGF0Y2hFdmVudChkKX12YXIgaWE9W1wiXCIsXCJ3ZWJraXRcIixcIm1velwiLFwiTVNcIixcIm1zXCIsXCJvXCJdLGphPWIuY3JlYXRlRWxlbWVudChcImRpdlwiKSxrYT1cImZ1bmN0aW9uXCIsbGE9TWF0aC5yb3VuZCxtYT1NYXRoLmFicyxuYT1EYXRlLm5vdyxvYT0xLHBhPS9tb2JpbGV8dGFibGV0fGlwKGFkfGhvbmV8b2QpfGFuZHJvaWQvaSxxYT1cIm9udG91Y2hzdGFydFwiaW4gYSxyYT12KGEsXCJQb2ludGVyRXZlbnRcIikhPT1kLHNhPXFhJiZwYS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLHRhPVwidG91Y2hcIix1YT1cInBlblwiLHZhPVwibW91c2VcIix3YT1cImtpbmVjdFwiLHhhPTI1LHlhPTEsemE9MixBYT00LEJhPTgsQ2E9MSxEYT0yLEVhPTQsRmE9OCxHYT0xNixIYT1EYXxFYSxJYT1GYXxHYSxKYT1IYXxJYSxLYT1bXCJ4XCIsXCJ5XCJdLExhPVtcImNsaWVudFhcIixcImNsaWVudFlcIl07eS5wcm90b3R5cGU9e2hhbmRsZXI6ZnVuY3Rpb24oKXt9LGluaXQ6ZnVuY3Rpb24oKXt0aGlzLmV2RWwmJm4odGhpcy5lbGVtZW50LHRoaXMuZXZFbCx0aGlzLmRvbUhhbmRsZXIpLHRoaXMuZXZUYXJnZXQmJm4odGhpcy50YXJnZXQsdGhpcy5ldlRhcmdldCx0aGlzLmRvbUhhbmRsZXIpLHRoaXMuZXZXaW4mJm4oeCh0aGlzLmVsZW1lbnQpLHRoaXMuZXZXaW4sdGhpcy5kb21IYW5kbGVyKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuZXZFbCYmbyh0aGlzLmVsZW1lbnQsdGhpcy5ldkVsLHRoaXMuZG9tSGFuZGxlciksdGhpcy5ldlRhcmdldCYmbyh0aGlzLnRhcmdldCx0aGlzLmV2VGFyZ2V0LHRoaXMuZG9tSGFuZGxlciksdGhpcy5ldldpbiYmbyh4KHRoaXMuZWxlbWVudCksdGhpcy5ldldpbix0aGlzLmRvbUhhbmRsZXIpfX07dmFyIE1hPXttb3VzZWRvd246eWEsbW91c2Vtb3ZlOnphLG1vdXNldXA6QWF9LE5hPVwibW91c2Vkb3duXCIsT2E9XCJtb3VzZW1vdmUgbW91c2V1cFwiO2ooTSx5LHtoYW5kbGVyOmZ1bmN0aW9uKGEpe3ZhciBiPU1hW2EudHlwZV07YiZ5YSYmMD09PWEuYnV0dG9uJiYodGhpcy5wcmVzc2VkPSEwKSxiJnphJiYxIT09YS53aGljaCYmKGI9QWEpLHRoaXMucHJlc3NlZCYmdGhpcy5hbGxvdyYmKGImQWEmJih0aGlzLnByZXNzZWQ9ITEpLHRoaXMuY2FsbGJhY2sodGhpcy5tYW5hZ2VyLGIse3BvaW50ZXJzOlthXSxjaGFuZ2VkUG9pbnRlcnM6W2FdLHBvaW50ZXJUeXBlOnZhLHNyY0V2ZW50OmF9KSl9fSk7dmFyIFBhPXtwb2ludGVyZG93bjp5YSxwb2ludGVybW92ZTp6YSxwb2ludGVydXA6QWEscG9pbnRlcmNhbmNlbDpCYSxwb2ludGVyb3V0OkJhfSxRYT17Mjp0YSwzOnVhLDQ6dmEsNTp3YX0sUmE9XCJwb2ludGVyZG93blwiLFNhPVwicG9pbnRlcm1vdmUgcG9pbnRlcnVwIHBvaW50ZXJjYW5jZWxcIjthLk1TUG9pbnRlckV2ZW50JiYoUmE9XCJNU1BvaW50ZXJEb3duXCIsU2E9XCJNU1BvaW50ZXJNb3ZlIE1TUG9pbnRlclVwIE1TUG9pbnRlckNhbmNlbFwiKSxqKE4seSx7aGFuZGxlcjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnN0b3JlLGM9ITEsZD1hLnR5cGUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKFwibXNcIixcIlwiKSxlPVBhW2RdLGY9UWFbYS5wb2ludGVyVHlwZV18fGEucG9pbnRlclR5cGUsZz1mPT10YSxoPXMoYixhLnBvaW50ZXJJZCxcInBvaW50ZXJJZFwiKTtlJnlhJiYoMD09PWEuYnV0dG9ufHxnKT8wPmgmJihiLnB1c2goYSksaD1iLmxlbmd0aC0xKTplJihBYXxCYSkmJihjPSEwKSwwPmh8fChiW2hdPWEsdGhpcy5jYWxsYmFjayh0aGlzLm1hbmFnZXIsZSx7cG9pbnRlcnM6YixjaGFuZ2VkUG9pbnRlcnM6W2FdLHBvaW50ZXJUeXBlOmYsc3JjRXZlbnQ6YX0pLGMmJmIuc3BsaWNlKGgsMSkpfX0pO3ZhciBUYT17dG91Y2hzdGFydDp5YSx0b3VjaG1vdmU6emEsdG91Y2hlbmQ6QWEsdG91Y2hjYW5jZWw6QmF9LFVhPVwidG91Y2hzdGFydFwiLFZhPVwidG91Y2hzdGFydCB0b3VjaG1vdmUgdG91Y2hlbmQgdG91Y2hjYW5jZWxcIjtqKE8seSx7aGFuZGxlcjpmdW5jdGlvbihhKXt2YXIgYj1UYVthLnR5cGVdO2lmKGI9PT15YSYmKHRoaXMuc3RhcnRlZD0hMCksdGhpcy5zdGFydGVkKXt2YXIgYz1QLmNhbGwodGhpcyxhLGIpO2ImKEFhfEJhKSYmMD09PWNbMF0ubGVuZ3RoLWNbMV0ubGVuZ3RoJiYodGhpcy5zdGFydGVkPSExKSx0aGlzLmNhbGxiYWNrKHRoaXMubWFuYWdlcixiLHtwb2ludGVyczpjWzBdLGNoYW5nZWRQb2ludGVyczpjWzFdLHBvaW50ZXJUeXBlOnRhLHNyY0V2ZW50OmF9KX19fSk7dmFyIFdhPXt0b3VjaHN0YXJ0OnlhLHRvdWNobW92ZTp6YSx0b3VjaGVuZDpBYSx0b3VjaGNhbmNlbDpCYX0sWGE9XCJ0b3VjaHN0YXJ0IHRvdWNobW92ZSB0b3VjaGVuZCB0b3VjaGNhbmNlbFwiO2ooUSx5LHtoYW5kbGVyOmZ1bmN0aW9uKGEpe3ZhciBiPVdhW2EudHlwZV0sYz1SLmNhbGwodGhpcyxhLGIpO2MmJnRoaXMuY2FsbGJhY2sodGhpcy5tYW5hZ2VyLGIse3BvaW50ZXJzOmNbMF0sY2hhbmdlZFBvaW50ZXJzOmNbMV0scG9pbnRlclR5cGU6dGEsc3JjRXZlbnQ6YX0pfX0pLGooUyx5LHtoYW5kbGVyOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1jLnBvaW50ZXJUeXBlPT10YSxlPWMucG9pbnRlclR5cGU9PXZhO2lmKGQpdGhpcy5tb3VzZS5hbGxvdz0hMTtlbHNlIGlmKGUmJiF0aGlzLm1vdXNlLmFsbG93KXJldHVybjtiJihBYXxCYSkmJih0aGlzLm1vdXNlLmFsbG93PSEwKSx0aGlzLmNhbGxiYWNrKGEsYixjKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMudG91Y2guZGVzdHJveSgpLHRoaXMubW91c2UuZGVzdHJveSgpfX0pO3ZhciBZYT12KGphLnN0eWxlLFwidG91Y2hBY3Rpb25cIiksWmE9WWEhPT1kLCRhPVwiY29tcHV0ZVwiLF9hPVwiYXV0b1wiLGFiPVwibWFuaXB1bGF0aW9uXCIsYmI9XCJub25lXCIsY2I9XCJwYW4teFwiLGRiPVwicGFuLXlcIjtULnByb3RvdHlwZT17c2V0OmZ1bmN0aW9uKGEpe2E9PSRhJiYoYT10aGlzLmNvbXB1dGUoKSksWmEmJih0aGlzLm1hbmFnZXIuZWxlbWVudC5zdHlsZVtZYV09YSksdGhpcy5hY3Rpb25zPWEudG9Mb3dlckNhc2UoKS50cmltKCl9LHVwZGF0ZTpmdW5jdGlvbigpe3RoaXMuc2V0KHRoaXMubWFuYWdlci5vcHRpb25zLnRvdWNoQWN0aW9uKX0sY29tcHV0ZTpmdW5jdGlvbigpe3ZhciBhPVtdO3JldHVybiBnKHRoaXMubWFuYWdlci5yZWNvZ25pemVycyxmdW5jdGlvbihiKXtsKGIub3B0aW9ucy5lbmFibGUsW2JdKSYmKGE9YS5jb25jYXQoYi5nZXRUb3VjaEFjdGlvbigpKSl9KSxVKGEuam9pbihcIiBcIikpfSxwcmV2ZW50RGVmYXVsdHM6ZnVuY3Rpb24oYSl7aWYoIVphKXt2YXIgYj1hLnNyY0V2ZW50LGM9YS5vZmZzZXREaXJlY3Rpb247aWYodGhpcy5tYW5hZ2VyLnNlc3Npb24ucHJldmVudGVkKXJldHVybiB2b2lkIGIucHJldmVudERlZmF1bHQoKTt2YXIgZD10aGlzLmFjdGlvbnMsZT1xKGQsYmIpLGY9cShkLGRiKSxnPXEoZCxjYik7cmV0dXJuIGV8fGYmJmMmSGF8fGcmJmMmSWE/dGhpcy5wcmV2ZW50U3JjKGIpOnZvaWQgMH19LHByZXZlbnRTcmM6ZnVuY3Rpb24oYSl7dGhpcy5tYW5hZ2VyLnNlc3Npb24ucHJldmVudGVkPSEwLGEucHJldmVudERlZmF1bHQoKX19O3ZhciBlYj0xLGZiPTIsZ2I9NCxoYj04LGliPWhiLGpiPTE2LGtiPTMyO1YucHJvdG90eXBlPXtkZWZhdWx0czp7fSxzZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGgodGhpcy5vcHRpb25zLGEpLHRoaXMubWFuYWdlciYmdGhpcy5tYW5hZ2VyLnRvdWNoQWN0aW9uLnVwZGF0ZSgpLHRoaXN9LHJlY29nbml6ZVdpdGg6ZnVuY3Rpb24oYSl7aWYoZihhLFwicmVjb2duaXplV2l0aFwiLHRoaXMpKXJldHVybiB0aGlzO3ZhciBiPXRoaXMuc2ltdWx0YW5lb3VzO3JldHVybiBhPVkoYSx0aGlzKSxiW2EuaWRdfHwoYlthLmlkXT1hLGEucmVjb2duaXplV2l0aCh0aGlzKSksdGhpc30sZHJvcFJlY29nbml6ZVdpdGg6ZnVuY3Rpb24oYSl7cmV0dXJuIGYoYSxcImRyb3BSZWNvZ25pemVXaXRoXCIsdGhpcyk/dGhpczooYT1ZKGEsdGhpcyksZGVsZXRlIHRoaXMuc2ltdWx0YW5lb3VzW2EuaWRdLHRoaXMpfSxyZXF1aXJlRmFpbHVyZTpmdW5jdGlvbihhKXtpZihmKGEsXCJyZXF1aXJlRmFpbHVyZVwiLHRoaXMpKXJldHVybiB0aGlzO3ZhciBiPXRoaXMucmVxdWlyZUZhaWw7cmV0dXJuIGE9WShhLHRoaXMpLC0xPT09cyhiLGEpJiYoYi5wdXNoKGEpLGEucmVxdWlyZUZhaWx1cmUodGhpcykpLHRoaXN9LGRyb3BSZXF1aXJlRmFpbHVyZTpmdW5jdGlvbihhKXtpZihmKGEsXCJkcm9wUmVxdWlyZUZhaWx1cmVcIix0aGlzKSlyZXR1cm4gdGhpczthPVkoYSx0aGlzKTt2YXIgYj1zKHRoaXMucmVxdWlyZUZhaWwsYSk7cmV0dXJuIGI+LTEmJnRoaXMucmVxdWlyZUZhaWwuc3BsaWNlKGIsMSksdGhpc30saGFzUmVxdWlyZUZhaWx1cmVzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVxdWlyZUZhaWwubGVuZ3RoPjB9LGNhblJlY29nbml6ZVdpdGg6ZnVuY3Rpb24oYSl7cmV0dXJuISF0aGlzLnNpbXVsdGFuZW91c1thLmlkXX0sZW1pdDpmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGIpe2MubWFuYWdlci5lbWl0KGMub3B0aW9ucy5ldmVudCsoYj9XKGQpOlwiXCIpLGEpfXZhciBjPXRoaXMsZD10aGlzLnN0YXRlO2hiPmQmJmIoITApLGIoKSxkPj1oYiYmYighMCl9LHRyeUVtaXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY2FuRW1pdCgpP3RoaXMuZW1pdChhKTp2b2lkKHRoaXMuc3RhdGU9a2IpfSxjYW5FbWl0OmZ1bmN0aW9uKCl7Zm9yKHZhciBhPTA7YTx0aGlzLnJlcXVpcmVGYWlsLmxlbmd0aDspe2lmKCEodGhpcy5yZXF1aXJlRmFpbFthXS5zdGF0ZSYoa2J8ZWIpKSlyZXR1cm4hMTthKyt9cmV0dXJuITB9LHJlY29nbml6ZTpmdW5jdGlvbihhKXt2YXIgYj1oKHt9LGEpO3JldHVybiBsKHRoaXMub3B0aW9ucy5lbmFibGUsW3RoaXMsYl0pPyh0aGlzLnN0YXRlJihpYnxqYnxrYikmJih0aGlzLnN0YXRlPWViKSx0aGlzLnN0YXRlPXRoaXMucHJvY2VzcyhiKSx2b2lkKHRoaXMuc3RhdGUmKGZifGdifGhifGpiKSYmdGhpcy50cnlFbWl0KGIpKSk6KHRoaXMucmVzZXQoKSx2b2lkKHRoaXMuc3RhdGU9a2IpKX0scHJvY2VzczpmdW5jdGlvbigpe30sZ2V0VG91Y2hBY3Rpb246ZnVuY3Rpb24oKXt9LHJlc2V0OmZ1bmN0aW9uKCl7fX0saihaLFYse2RlZmF1bHRzOntwb2ludGVyczoxfSxhdHRyVGVzdDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLm9wdGlvbnMucG9pbnRlcnM7cmV0dXJuIDA9PT1ifHxhLnBvaW50ZXJzLmxlbmd0aD09PWJ9LHByb2Nlc3M6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5zdGF0ZSxjPWEuZXZlbnRUeXBlLGQ9YiYoZmJ8Z2IpLGU9dGhpcy5hdHRyVGVzdChhKTtyZXR1cm4gZCYmKGMmQmF8fCFlKT9ifGpiOmR8fGU/YyZBYT9ifGhiOmImZmI/YnxnYjpmYjprYn19KSxqKCQsWix7ZGVmYXVsdHM6e2V2ZW50OlwicGFuXCIsdGhyZXNob2xkOjEwLHBvaW50ZXJzOjEsZGlyZWN0aW9uOkphfSxnZXRUb3VjaEFjdGlvbjpmdW5jdGlvbigpe3ZhciBhPXRoaXMub3B0aW9ucy5kaXJlY3Rpb24sYj1bXTtyZXR1cm4gYSZIYSYmYi5wdXNoKGRiKSxhJklhJiZiLnB1c2goY2IpLGJ9LGRpcmVjdGlvblRlc3Q6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5vcHRpb25zLGM9ITAsZD1hLmRpc3RhbmNlLGU9YS5kaXJlY3Rpb24sZj1hLmRlbHRhWCxnPWEuZGVsdGFZO3JldHVybiBlJmIuZGlyZWN0aW9ufHwoYi5kaXJlY3Rpb24mSGE/KGU9MD09PWY/Q2E6MD5mP0RhOkVhLGM9ZiE9dGhpcy5wWCxkPU1hdGguYWJzKGEuZGVsdGFYKSk6KGU9MD09PWc/Q2E6MD5nP0ZhOkdhLGM9ZyE9dGhpcy5wWSxkPU1hdGguYWJzKGEuZGVsdGFZKSkpLGEuZGlyZWN0aW9uPWUsYyYmZD5iLnRocmVzaG9sZCYmZSZiLmRpcmVjdGlvbn0sYXR0clRlc3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIFoucHJvdG90eXBlLmF0dHJUZXN0LmNhbGwodGhpcyxhKSYmKHRoaXMuc3RhdGUmZmJ8fCEodGhpcy5zdGF0ZSZmYikmJnRoaXMuZGlyZWN0aW9uVGVzdChhKSl9LGVtaXQ6ZnVuY3Rpb24oYSl7dGhpcy5wWD1hLmRlbHRhWCx0aGlzLnBZPWEuZGVsdGFZO3ZhciBiPVgoYS5kaXJlY3Rpb24pO2ImJnRoaXMubWFuYWdlci5lbWl0KHRoaXMub3B0aW9ucy5ldmVudCtiLGEpLHRoaXMuX3N1cGVyLmVtaXQuY2FsbCh0aGlzLGEpfX0pLGooXyxaLHtkZWZhdWx0czp7ZXZlbnQ6XCJwaW5jaFwiLHRocmVzaG9sZDowLHBvaW50ZXJzOjJ9LGdldFRvdWNoQWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuW2JiXX0sYXR0clRlc3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuX3N1cGVyLmF0dHJUZXN0LmNhbGwodGhpcyxhKSYmKE1hdGguYWJzKGEuc2NhbGUtMSk+dGhpcy5vcHRpb25zLnRocmVzaG9sZHx8dGhpcy5zdGF0ZSZmYil9LGVtaXQ6ZnVuY3Rpb24oYSl7aWYodGhpcy5fc3VwZXIuZW1pdC5jYWxsKHRoaXMsYSksMSE9PWEuc2NhbGUpe3ZhciBiPWEuc2NhbGU8MT9cImluXCI6XCJvdXRcIjt0aGlzLm1hbmFnZXIuZW1pdCh0aGlzLm9wdGlvbnMuZXZlbnQrYixhKX19fSksaihhYSxWLHtkZWZhdWx0czp7ZXZlbnQ6XCJwcmVzc1wiLHBvaW50ZXJzOjEsdGltZTo1MDAsdGhyZXNob2xkOjV9LGdldFRvdWNoQWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuW19hXX0scHJvY2VzczpmdW5jdGlvbihhKXt2YXIgYj10aGlzLm9wdGlvbnMsYz1hLnBvaW50ZXJzLmxlbmd0aD09PWIucG9pbnRlcnMsZD1hLmRpc3RhbmNlPGIudGhyZXNob2xkLGY9YS5kZWx0YVRpbWU+Yi50aW1lO2lmKHRoaXMuX2lucHV0PWEsIWR8fCFjfHxhLmV2ZW50VHlwZSYoQWF8QmEpJiYhZil0aGlzLnJlc2V0KCk7ZWxzZSBpZihhLmV2ZW50VHlwZSZ5YSl0aGlzLnJlc2V0KCksdGhpcy5fdGltZXI9ZShmdW5jdGlvbigpe3RoaXMuc3RhdGU9aWIsdGhpcy50cnlFbWl0KCl9LGIudGltZSx0aGlzKTtlbHNlIGlmKGEuZXZlbnRUeXBlJkFhKXJldHVybiBpYjtyZXR1cm4ga2J9LHJlc2V0OmZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVyKX0sZW1pdDpmdW5jdGlvbihhKXt0aGlzLnN0YXRlPT09aWImJihhJiZhLmV2ZW50VHlwZSZBYT90aGlzLm1hbmFnZXIuZW1pdCh0aGlzLm9wdGlvbnMuZXZlbnQrXCJ1cFwiLGEpOih0aGlzLl9pbnB1dC50aW1lU3RhbXA9bmEoKSx0aGlzLm1hbmFnZXIuZW1pdCh0aGlzLm9wdGlvbnMuZXZlbnQsdGhpcy5faW5wdXQpKSl9fSksaihiYSxaLHtkZWZhdWx0czp7ZXZlbnQ6XCJyb3RhdGVcIix0aHJlc2hvbGQ6MCxwb2ludGVyczoyfSxnZXRUb3VjaEFjdGlvbjpmdW5jdGlvbigpe3JldHVybltiYl19LGF0dHJUZXN0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLl9zdXBlci5hdHRyVGVzdC5jYWxsKHRoaXMsYSkmJihNYXRoLmFicyhhLnJvdGF0aW9uKT50aGlzLm9wdGlvbnMudGhyZXNob2xkfHx0aGlzLnN0YXRlJmZiKX19KSxqKGNhLFose2RlZmF1bHRzOntldmVudDpcInN3aXBlXCIsdGhyZXNob2xkOjEwLHZlbG9jaXR5Oi42NSxkaXJlY3Rpb246SGF8SWEscG9pbnRlcnM6MX0sZ2V0VG91Y2hBY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gJC5wcm90b3R5cGUuZ2V0VG91Y2hBY3Rpb24uY2FsbCh0aGlzKX0sYXR0clRlc3Q6ZnVuY3Rpb24oYSl7dmFyIGIsYz10aGlzLm9wdGlvbnMuZGlyZWN0aW9uO3JldHVybiBjJihIYXxJYSk/Yj1hLnZlbG9jaXR5OmMmSGE/Yj1hLnZlbG9jaXR5WDpjJklhJiYoYj1hLnZlbG9jaXR5WSksdGhpcy5fc3VwZXIuYXR0clRlc3QuY2FsbCh0aGlzLGEpJiZjJmEuZGlyZWN0aW9uJiZhLmRpc3RhbmNlPnRoaXMub3B0aW9ucy50aHJlc2hvbGQmJm1hKGIpPnRoaXMub3B0aW9ucy52ZWxvY2l0eSYmYS5ldmVudFR5cGUmQWF9LGVtaXQ6ZnVuY3Rpb24oYSl7dmFyIGI9WChhLmRpcmVjdGlvbik7YiYmdGhpcy5tYW5hZ2VyLmVtaXQodGhpcy5vcHRpb25zLmV2ZW50K2IsYSksdGhpcy5tYW5hZ2VyLmVtaXQodGhpcy5vcHRpb25zLmV2ZW50LGEpfX0pLGooZGEsVix7ZGVmYXVsdHM6e2V2ZW50OlwidGFwXCIscG9pbnRlcnM6MSx0YXBzOjEsaW50ZXJ2YWw6MzAwLHRpbWU6MjUwLHRocmVzaG9sZDoyLHBvc1RocmVzaG9sZDoxMH0sZ2V0VG91Y2hBY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm5bYWJdfSxwcm9jZXNzOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMub3B0aW9ucyxjPWEucG9pbnRlcnMubGVuZ3RoPT09Yi5wb2ludGVycyxkPWEuZGlzdGFuY2U8Yi50aHJlc2hvbGQsZj1hLmRlbHRhVGltZTxiLnRpbWU7aWYodGhpcy5yZXNldCgpLGEuZXZlbnRUeXBlJnlhJiYwPT09dGhpcy5jb3VudClyZXR1cm4gdGhpcy5mYWlsVGltZW91dCgpO2lmKGQmJmYmJmMpe2lmKGEuZXZlbnRUeXBlIT1BYSlyZXR1cm4gdGhpcy5mYWlsVGltZW91dCgpO3ZhciBnPXRoaXMucFRpbWU/YS50aW1lU3RhbXAtdGhpcy5wVGltZTxiLmludGVydmFsOiEwLGg9IXRoaXMucENlbnRlcnx8SSh0aGlzLnBDZW50ZXIsYS5jZW50ZXIpPGIucG9zVGhyZXNob2xkO3RoaXMucFRpbWU9YS50aW1lU3RhbXAsdGhpcy5wQ2VudGVyPWEuY2VudGVyLGgmJmc/dGhpcy5jb3VudCs9MTp0aGlzLmNvdW50PTEsdGhpcy5faW5wdXQ9YTt2YXIgaT10aGlzLmNvdW50JWIudGFwcztpZigwPT09aSlyZXR1cm4gdGhpcy5oYXNSZXF1aXJlRmFpbHVyZXMoKT8odGhpcy5fdGltZXI9ZShmdW5jdGlvbigpe3RoaXMuc3RhdGU9aWIsdGhpcy50cnlFbWl0KCl9LGIuaW50ZXJ2YWwsdGhpcyksZmIpOmlifXJldHVybiBrYn0sZmFpbFRpbWVvdXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGltZXI9ZShmdW5jdGlvbigpe3RoaXMuc3RhdGU9a2J9LHRoaXMub3B0aW9ucy5pbnRlcnZhbCx0aGlzKSxrYn0scmVzZXQ6ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQodGhpcy5fdGltZXIpfSxlbWl0OmZ1bmN0aW9uKCl7dGhpcy5zdGF0ZT09aWImJih0aGlzLl9pbnB1dC50YXBDb3VudD10aGlzLmNvdW50LHRoaXMubWFuYWdlci5lbWl0KHRoaXMub3B0aW9ucy5ldmVudCx0aGlzLl9pbnB1dCkpfX0pLGVhLlZFUlNJT049XCIyLjAuNFwiLGVhLmRlZmF1bHRzPXtkb21FdmVudHM6ITEsdG91Y2hBY3Rpb246JGEsZW5hYmxlOiEwLGlucHV0VGFyZ2V0Om51bGwsaW5wdXRDbGFzczpudWxsLHByZXNldDpbW2JhLHtlbmFibGU6ITF9XSxbXyx7ZW5hYmxlOiExfSxbXCJyb3RhdGVcIl1dLFtjYSx7ZGlyZWN0aW9uOkhhfV0sWyQse2RpcmVjdGlvbjpIYX0sW1wic3dpcGVcIl1dLFtkYV0sW2RhLHtldmVudDpcImRvdWJsZXRhcFwiLHRhcHM6Mn0sW1widGFwXCJdXSxbYWFdXSxjc3NQcm9wczp7dXNlclNlbGVjdDpcImRlZmF1bHRcIix0b3VjaFNlbGVjdDpcIm5vbmVcIix0b3VjaENhbGxvdXQ6XCJub25lXCIsY29udGVudFpvb21pbmc6XCJub25lXCIsdXNlckRyYWc6XCJub25lXCIsdGFwSGlnaGxpZ2h0Q29sb3I6XCJyZ2JhKDAsMCwwLDApXCJ9fTt2YXIgbGI9MSxtYj0yO2ZhLnByb3RvdHlwZT17c2V0OmZ1bmN0aW9uKGEpe3JldHVybiBoKHRoaXMub3B0aW9ucyxhKSxhLnRvdWNoQWN0aW9uJiZ0aGlzLnRvdWNoQWN0aW9uLnVwZGF0ZSgpLGEuaW5wdXRUYXJnZXQmJih0aGlzLmlucHV0LmRlc3Ryb3koKSx0aGlzLmlucHV0LnRhcmdldD1hLmlucHV0VGFyZ2V0LHRoaXMuaW5wdXQuaW5pdCgpKSx0aGlzfSxzdG9wOmZ1bmN0aW9uKGEpe3RoaXMuc2Vzc2lvbi5zdG9wcGVkPWE/bWI6bGJ9LHJlY29nbml6ZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnNlc3Npb247aWYoIWIuc3RvcHBlZCl7dGhpcy50b3VjaEFjdGlvbi5wcmV2ZW50RGVmYXVsdHMoYSk7dmFyIGMsZD10aGlzLnJlY29nbml6ZXJzLGU9Yi5jdXJSZWNvZ25pemVyOyghZXx8ZSYmZS5zdGF0ZSZpYikmJihlPWIuY3VyUmVjb2duaXplcj1udWxsKTtmb3IodmFyIGY9MDtmPGQubGVuZ3RoOyljPWRbZl0sYi5zdG9wcGVkPT09bWJ8fGUmJmMhPWUmJiFjLmNhblJlY29nbml6ZVdpdGgoZSk/Yy5yZXNldCgpOmMucmVjb2duaXplKGEpLCFlJiZjLnN0YXRlJihmYnxnYnxoYikmJihlPWIuY3VyUmVjb2duaXplcj1jKSxmKyt9fSxnZXQ6ZnVuY3Rpb24oYSl7aWYoYSBpbnN0YW5jZW9mIFYpcmV0dXJuIGE7Zm9yKHZhciBiPXRoaXMucmVjb2duaXplcnMsYz0wO2M8Yi5sZW5ndGg7YysrKWlmKGJbY10ub3B0aW9ucy5ldmVudD09YSlyZXR1cm4gYltjXTtyZXR1cm4gbnVsbH0sYWRkOmZ1bmN0aW9uKGEpe2lmKGYoYSxcImFkZFwiLHRoaXMpKXJldHVybiB0aGlzO3ZhciBiPXRoaXMuZ2V0KGEub3B0aW9ucy5ldmVudCk7cmV0dXJuIGImJnRoaXMucmVtb3ZlKGIpLHRoaXMucmVjb2duaXplcnMucHVzaChhKSxhLm1hbmFnZXI9dGhpcyx0aGlzLnRvdWNoQWN0aW9uLnVwZGF0ZSgpLGF9LHJlbW92ZTpmdW5jdGlvbihhKXtpZihmKGEsXCJyZW1vdmVcIix0aGlzKSlyZXR1cm4gdGhpczt2YXIgYj10aGlzLnJlY29nbml6ZXJzO3JldHVybiBhPXRoaXMuZ2V0KGEpLGIuc3BsaWNlKHMoYixhKSwxKSx0aGlzLnRvdWNoQWN0aW9uLnVwZGF0ZSgpLHRoaXN9LG9uOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5oYW5kbGVycztyZXR1cm4gZyhyKGEpLGZ1bmN0aW9uKGEpe2NbYV09Y1thXXx8W10sY1thXS5wdXNoKGIpfSksdGhpc30sb2ZmOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5oYW5kbGVycztyZXR1cm4gZyhyKGEpLGZ1bmN0aW9uKGEpe2I/Y1thXS5zcGxpY2UocyhjW2FdLGIpLDEpOmRlbGV0ZSBjW2FdfSksdGhpc30sZW1pdDpmdW5jdGlvbihhLGIpe3RoaXMub3B0aW9ucy5kb21FdmVudHMmJmhhKGEsYik7dmFyIGM9dGhpcy5oYW5kbGVyc1thXSYmdGhpcy5oYW5kbGVyc1thXS5zbGljZSgpO2lmKGMmJmMubGVuZ3RoKXtiLnR5cGU9YSxiLnByZXZlbnREZWZhdWx0PWZ1bmN0aW9uKCl7Yi5zcmNFdmVudC5wcmV2ZW50RGVmYXVsdCgpfTtmb3IodmFyIGQ9MDtkPGMubGVuZ3RoOyljW2RdKGIpLGQrK319LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQmJmdhKHRoaXMsITEpLHRoaXMuaGFuZGxlcnM9e30sdGhpcy5zZXNzaW9uPXt9LHRoaXMuaW5wdXQuZGVzdHJveSgpLHRoaXMuZWxlbWVudD1udWxsfX0saChlYSx7SU5QVVRfU1RBUlQ6eWEsSU5QVVRfTU9WRTp6YSxJTlBVVF9FTkQ6QWEsSU5QVVRfQ0FOQ0VMOkJhLFNUQVRFX1BPU1NJQkxFOmViLFNUQVRFX0JFR0FOOmZiLFNUQVRFX0NIQU5HRUQ6Z2IsU1RBVEVfRU5ERUQ6aGIsU1RBVEVfUkVDT0dOSVpFRDppYixTVEFURV9DQU5DRUxMRUQ6amIsU1RBVEVfRkFJTEVEOmtiLERJUkVDVElPTl9OT05FOkNhLERJUkVDVElPTl9MRUZUOkRhLERJUkVDVElPTl9SSUdIVDpFYSxESVJFQ1RJT05fVVA6RmEsRElSRUNUSU9OX0RPV046R2EsRElSRUNUSU9OX0hPUklaT05UQUw6SGEsRElSRUNUSU9OX1ZFUlRJQ0FMOklhLERJUkVDVElPTl9BTEw6SmEsTWFuYWdlcjpmYSxJbnB1dDp5LFRvdWNoQWN0aW9uOlQsVG91Y2hJbnB1dDpRLE1vdXNlSW5wdXQ6TSxQb2ludGVyRXZlbnRJbnB1dDpOLFRvdWNoTW91c2VJbnB1dDpTLFNpbmdsZVRvdWNoSW5wdXQ6TyxSZWNvZ25pemVyOlYsQXR0clJlY29nbml6ZXI6WixUYXA6ZGEsUGFuOiQsU3dpcGU6Y2EsUGluY2g6XyxSb3RhdGU6YmEsUHJlc3M6YWEsb246bixvZmY6byxlYWNoOmcsbWVyZ2U6aSxleHRlbmQ6aCxpbmhlcml0OmosYmluZEZuOmsscHJlZml4ZWQ6dn0pLHR5cGVvZiBkZWZpbmU9PWthJiZkZWZpbmUuYW1kP2RlZmluZShmdW5jdGlvbigpe3JldHVybiBlYX0pOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGUmJm1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPWVhOmFbY109ZWF9KHdpbmRvdyxkb2N1bWVudCxcIkhhbW1lclwiKSxmdW5jdGlvbihhKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtcImpxdWVyeVwiLFwiaGFtbWVyanNcIl0sYSk6XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHM/YShyZXF1aXJlKFwianF1ZXJ5XCIpLHJlcXVpcmUoXCJoYW1tZXJqc1wiKSk6YShqUXVlcnksSGFtbWVyKX0oZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKGMsZCl7dmFyIGU9YShjKTtlLmRhdGEoXCJoYW1tZXJcIil8fGUuZGF0YShcImhhbW1lclwiLG5ldyBiKGVbMF0sZCkpfWEuZm4uaGFtbWVyPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtjKHRoaXMsYSl9KX0sYi5NYW5hZ2VyLnByb3RvdHlwZS5lbWl0PWZ1bmN0aW9uKGIpe3JldHVybiBmdW5jdGlvbihjLGQpe2IuY2FsbCh0aGlzLGMsZCksYSh0aGlzLmVsZW1lbnQpLnRyaWdnZXIoe3R5cGU6YyxnZXN0dXJlOmR9KX19KGIuTWFuYWdlci5wcm90b3R5cGUuZW1pdCl9KSxmdW5jdGlvbihhKXthLlBhY2thZ2U/TWF0ZXJpYWxpemU9e306YS5NYXRlcmlhbGl6ZT17fX0od2luZG93KSxmdW5jdGlvbihhKXtmb3IodmFyIGI9MCxjPVtcIndlYmtpdFwiLFwibW96XCJdLGQ9YS5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUsZT1hLmNhbmNlbEFuaW1hdGlvbkZyYW1lLGY9Yy5sZW5ndGg7LS1mPj0wJiYhZDspZD1hW2NbZl0rXCJSZXF1ZXN0QW5pbWF0aW9uRnJhbWVcIl0sZT1hW2NbZl0rXCJDYW5jZWxSZXF1ZXN0QW5pbWF0aW9uRnJhbWVcIl07ZCYmZXx8KGQ9ZnVuY3Rpb24oYSl7dmFyIGM9K0RhdGUubm93KCksZD1NYXRoLm1heChiKzE2LGMpO3JldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YShiPWQpfSxkLWMpfSxlPWNsZWFyVGltZW91dCksYS5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU9ZCxhLmNhbmNlbEFuaW1hdGlvbkZyYW1lPWV9KHdpbmRvdyksTWF0ZXJpYWxpemUuZ3VpZD1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXtyZXR1cm4gTWF0aC5mbG9vcig2NTUzNiooMStNYXRoLnJhbmRvbSgpKSkudG9TdHJpbmcoMTYpLnN1YnN0cmluZygxKX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYSgpK2EoKStcIi1cIithKCkrXCItXCIrYSgpK1wiLVwiK2EoKStcIi1cIithKCkrYSgpK2EoKX19KCksTWF0ZXJpYWxpemUuZXNjYXBlSGFzaD1mdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKC8oOnxcXC58XFxbfFxcXXwsfD0pL2csXCJcXFxcJDFcIil9LE1hdGVyaWFsaXplLmVsZW1lbnRPclBhcmVudElzRml4ZWQ9ZnVuY3Rpb24oYSl7dmFyIGI9JChhKSxjPWIuYWRkKGIucGFyZW50cygpKSxkPSExO3JldHVybiBjLmVhY2goZnVuY3Rpb24oKXtyZXR1cm5cImZpeGVkXCI9PT0kKHRoaXMpLmNzcyhcInBvc2l0aW9uXCIpPyhkPSEwLCExKTp2b2lkIDB9KSxkfTt2YXIgVmVsO1ZlbD1qUXVlcnk/alF1ZXJ5LlZlbG9jaXR5OiQ/JC5WZWxvY2l0eTpWZWxvY2l0eSxmdW5jdGlvbihhKXthLmZuLmNvbGxhcHNpYmxlPWZ1bmN0aW9uKGIpe3ZhciBjPXthY2NvcmRpb246dm9pZCAwLG9uT3Blbjp2b2lkIDAsb25DbG9zZTp2b2lkIDB9O3JldHVybiBiPWEuZXh0ZW5kKGMsYiksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYyhiKXtqPWkuZmluZChcIj4gbGkgPiAuY29sbGFwc2libGUtaGVhZGVyXCIpLGIuaGFzQ2xhc3MoXCJhY3RpdmVcIik/Yi5wYXJlbnQoKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTpiLnBhcmVudCgpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpLGIucGFyZW50KCkuaGFzQ2xhc3MoXCJhY3RpdmVcIik/Yi5zaWJsaW5ncyhcIi5jb2xsYXBzaWJsZS1ib2R5XCIpLnN0b3AoITAsITEpLnNsaWRlRG93bih7ZHVyYXRpb246MzUwLGVhc2luZzpcImVhc2VPdXRRdWFydFwiLHF1ZXVlOiExLGNvbXBsZXRlOmZ1bmN0aW9uKCl7YSh0aGlzKS5jc3MoXCJoZWlnaHRcIixcIlwiKX19KTpiLnNpYmxpbmdzKFwiLmNvbGxhcHNpYmxlLWJvZHlcIikuc3RvcCghMCwhMSkuc2xpZGVVcCh7ZHVyYXRpb246MzUwLGVhc2luZzpcImVhc2VPdXRRdWFydFwiLHF1ZXVlOiExLGNvbXBsZXRlOmZ1bmN0aW9uKCl7YSh0aGlzKS5jc3MoXCJoZWlnaHRcIixcIlwiKX19KSxqLm5vdChiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKS5wYXJlbnQoKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKSxqLm5vdChiKS5wYXJlbnQoKS5jaGlsZHJlbihcIi5jb2xsYXBzaWJsZS1ib2R5XCIpLnN0b3AoITAsITEpLmVhY2goZnVuY3Rpb24oKXthKHRoaXMpLmlzKFwiOnZpc2libGVcIikmJmEodGhpcykuc2xpZGVVcCh7ZHVyYXRpb246MzUwLGVhc2luZzpcImVhc2VPdXRRdWFydFwiLHF1ZXVlOiExLGNvbXBsZXRlOmZ1bmN0aW9uKCl7YSh0aGlzKS5jc3MoXCJoZWlnaHRcIixcIlwiKSxmKGEodGhpcykuc2libGluZ3MoXCIuY29sbGFwc2libGUtaGVhZGVyXCIpKX19KX0pfWZ1bmN0aW9uIGQoYil7Yi5oYXNDbGFzcyhcImFjdGl2ZVwiKT9iLnBhcmVudCgpLmFkZENsYXNzKFwiYWN0aXZlXCIpOmIucGFyZW50KCkucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIiksYi5wYXJlbnQoKS5oYXNDbGFzcyhcImFjdGl2ZVwiKT9iLnNpYmxpbmdzKFwiLmNvbGxhcHNpYmxlLWJvZHlcIikuc3RvcCghMCwhMSkuc2xpZGVEb3duKHtkdXJhdGlvbjozNTAsZWFzaW5nOlwiZWFzZU91dFF1YXJ0XCIscXVldWU6ITEsY29tcGxldGU6ZnVuY3Rpb24oKXthKHRoaXMpLmNzcyhcImhlaWdodFwiLFwiXCIpfX0pOmIuc2libGluZ3MoXCIuY29sbGFwc2libGUtYm9keVwiKS5zdG9wKCEwLCExKS5zbGlkZVVwKHtkdXJhdGlvbjozNTAsZWFzaW5nOlwiZWFzZU91dFF1YXJ0XCIscXVldWU6ITEsY29tcGxldGU6ZnVuY3Rpb24oKXthKHRoaXMpLmNzcyhcImhlaWdodFwiLFwiXCIpfX0pfWZ1bmN0aW9uIGUoYSl7Yi5hY2NvcmRpb258fFwiYWNjb3JkaW9uXCI9PT1rfHx2b2lkIDA9PT1rP2MoYSk6ZChhKSxmKGEpfWZ1bmN0aW9uIGYoYSl7YS5oYXNDbGFzcyhcImFjdGl2ZVwiKT9cImZ1bmN0aW9uXCI9PXR5cGVvZiBiLm9uT3BlbiYmYi5vbk9wZW4uY2FsbCh0aGlzLGEucGFyZW50KCkpOlwiZnVuY3Rpb25cIj09dHlwZW9mIGIub25DbG9zZSYmYi5vbkNsb3NlLmNhbGwodGhpcyxhLnBhcmVudCgpKX1mdW5jdGlvbiBnKGEpe3ZhciBiPWgoYSk7cmV0dXJuIGIubGVuZ3RoPjB9ZnVuY3Rpb24gaChhKXtyZXR1cm4gYS5jbG9zZXN0KFwibGkgPiAuY29sbGFwc2libGUtaGVhZGVyXCIpfXZhciBpPWEodGhpcyksaj1hKHRoaXMpLmZpbmQoXCI+IGxpID4gLmNvbGxhcHNpYmxlLWhlYWRlclwiKSxrPWkuZGF0YShcImNvbGxhcHNpYmxlXCIpO2kub2ZmKFwiY2xpY2suY29sbGFwc2VcIixcIj4gbGkgPiAuY29sbGFwc2libGUtaGVhZGVyXCIpLGoub2ZmKFwiY2xpY2suY29sbGFwc2VcIiksaS5vbihcImNsaWNrLmNvbGxhcHNlXCIsXCI+IGxpID4gLmNvbGxhcHNpYmxlLWhlYWRlclwiLGZ1bmN0aW9uKGIpe3ZhciBjPWEoYi50YXJnZXQpO2coYykmJihjPWgoYykpLGMudG9nZ2xlQ2xhc3MoXCJhY3RpdmVcIiksZShjKX0pLGIuYWNjb3JkaW9ufHxcImFjY29yZGlvblwiPT09a3x8dm9pZCAwPT09az9lKGouZmlsdGVyKFwiLmFjdGl2ZVwiKS5maXJzdCgpKTpqLmZpbHRlcihcIi5hY3RpdmVcIikuZWFjaChmdW5jdGlvbigpe2UoYSh0aGlzKSl9KX0pfSxhKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe2EoXCIuY29sbGFwc2libGVcIikuY29sbGFwc2libGUoKX0pfShqUXVlcnkpLGZ1bmN0aW9uKGEpe2EuZm4uc2Nyb2xsVG89ZnVuY3Rpb24oYil7cmV0dXJuIGEodGhpcykuc2Nyb2xsVG9wKGEodGhpcykuc2Nyb2xsVG9wKCktYSh0aGlzKS5vZmZzZXQoKS50b3ArYShiKS5vZmZzZXQoKS50b3ApLHRoaXN9LGEuZm4uZHJvcGRvd249ZnVuY3Rpb24oYil7dmFyIGM9e2luRHVyYXRpb246MzAwLG91dER1cmF0aW9uOjIyNSxjb25zdHJhaW5fd2lkdGg6ITAsaG92ZXI6ITEsZ3V0dGVyOjAsYmVsb3dPcmlnaW46ITEsYWxpZ25tZW50OlwibGVmdFwiLHN0b3BQcm9wYWdhdGlvbjohMX07cmV0dXJuXCJvcGVuXCI9PT1iPyh0aGlzLmVhY2goZnVuY3Rpb24oKXthKHRoaXMpLnRyaWdnZXIoXCJvcGVuXCIpfSksITEpOlwiY2xvc2VcIj09PWI/KHRoaXMuZWFjaChmdW5jdGlvbigpe2EodGhpcykudHJpZ2dlcihcImNsb3NlXCIpfSksITEpOnZvaWQgdGhpcy5lYWNoKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZCgpe3ZvaWQgMCE9PWcuZGF0YShcImluZHVyYXRpb25cIikmJihoLmluRHVyYXRpb249Zy5kYXRhKFwiaW5kdXJhdGlvblwiKSksdm9pZCAwIT09Zy5kYXRhKFwib3V0ZHVyYXRpb25cIikmJihoLm91dER1cmF0aW9uPWcuZGF0YShcIm91dGR1cmF0aW9uXCIpKSx2b2lkIDAhPT1nLmRhdGEoXCJjb25zdHJhaW53aWR0aFwiKSYmKGguY29uc3RyYWluX3dpZHRoPWcuZGF0YShcImNvbnN0cmFpbndpZHRoXCIpKSx2b2lkIDAhPT1nLmRhdGEoXCJob3ZlclwiKSYmKGguaG92ZXI9Zy5kYXRhKFwiaG92ZXJcIikpLHZvaWQgMCE9PWcuZGF0YShcImd1dHRlclwiKSYmKGguZ3V0dGVyPWcuZGF0YShcImd1dHRlclwiKSksdm9pZCAwIT09Zy5kYXRhKFwiYmVsb3dvcmlnaW5cIikmJihoLmJlbG93T3JpZ2luPWcuZGF0YShcImJlbG93b3JpZ2luXCIpKSx2b2lkIDAhPT1nLmRhdGEoXCJhbGlnbm1lbnRcIikmJihoLmFsaWdubWVudD1nLmRhdGEoXCJhbGlnbm1lbnRcIikpLHZvaWQgMCE9PWcuZGF0YShcInN0b3Bwcm9wYWdhdGlvblwiKSYmKGguc3RvcFByb3BhZ2F0aW9uPWcuZGF0YShcInN0b3Bwcm9wYWdhdGlvblwiKSl9ZnVuY3Rpb24gZShiKXtcImZvY3VzXCI9PT1iJiYoaT0hMCksZCgpLGouYWRkQ2xhc3MoXCJhY3RpdmVcIiksZy5hZGRDbGFzcyhcImFjdGl2ZVwiKSxoLmNvbnN0cmFpbl93aWR0aD09PSEwP2ouY3NzKFwid2lkdGhcIixnLm91dGVyV2lkdGgoKSk6ai5jc3MoXCJ3aGl0ZS1zcGFjZVwiLFwibm93cmFwXCIpO3ZhciBjPXdpbmRvdy5pbm5lckhlaWdodCxlPWcuaW5uZXJIZWlnaHQoKSxmPWcub2Zmc2V0KCkubGVmdCxrPWcub2Zmc2V0KCkudG9wLWEod2luZG93KS5zY3JvbGxUb3AoKSxsPWguYWxpZ25tZW50LG09MCxuPTAsbz0wO2guYmVsb3dPcmlnaW49PT0hMCYmKG89ZSk7dmFyIHA9MCxxPTAscj1nLnBhcmVudCgpO2lmKHIuaXMoXCJib2R5XCIpfHwoclswXS5zY3JvbGxIZWlnaHQ+clswXS5jbGllbnRIZWlnaHQmJihwPXJbMF0uc2Nyb2xsVG9wKSxyWzBdLnNjcm9sbFdpZHRoPnJbMF0uY2xpZW50V2lkdGgmJihxPXJbMF0uc2Nyb2xsTGVmdCkpLGYrai5pbm5lcldpZHRoKCk+YSh3aW5kb3cpLndpZHRoKCk/bD1cInJpZ2h0XCI6Zi1qLmlubmVyV2lkdGgoKStnLmlubmVyV2lkdGgoKTwwJiYobD1cImxlZnRcIiksaytqLmlubmVySGVpZ2h0KCk+YylpZihrK2Utai5pbm5lckhlaWdodCgpPDApe3ZhciBzPWMtay1vO2ouY3NzKFwibWF4LWhlaWdodFwiLHMpfWVsc2Ugb3x8KG8rPWUpLG8tPWouaW5uZXJIZWlnaHQoKTtpZihcImxlZnRcIj09PWwpbT1oLmd1dHRlcixuPWcucG9zaXRpb24oKS5sZWZ0K207ZWxzZSBpZihcInJpZ2h0XCI9PT1sKXt2YXIgdD1nLnBvc2l0aW9uKCkubGVmdCtnLm91dGVyV2lkdGgoKS1qLm91dGVyV2lkdGgoKTttPS1oLmd1dHRlcixuPXQrbX1qLmNzcyh7cG9zaXRpb246XCJhYnNvbHV0ZVwiLHRvcDpnLnBvc2l0aW9uKCkudG9wK28rcCxsZWZ0Om4rcX0pLGouc3RvcCghMCwhMCkuY3NzKFwib3BhY2l0eVwiLDApLnNsaWRlRG93bih7cXVldWU6ITEsZHVyYXRpb246aC5pbkR1cmF0aW9uLGVhc2luZzpcImVhc2VPdXRDdWJpY1wiLGNvbXBsZXRlOmZ1bmN0aW9uKCl7YSh0aGlzKS5jc3MoXCJoZWlnaHRcIixcIlwiKX19KS5hbmltYXRlKHtvcGFjaXR5OjF9LHtxdWV1ZTohMSxkdXJhdGlvbjpoLmluRHVyYXRpb24sZWFzaW5nOlwiZWFzZU91dFNpbmVcIn0pfWZ1bmN0aW9uIGYoKXtpPSExLGouZmFkZU91dChoLm91dER1cmF0aW9uKSxqLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpLGcucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIiksc2V0VGltZW91dChmdW5jdGlvbigpe2ouY3NzKFwibWF4LWhlaWdodFwiLFwiXCIpfSxoLm91dER1cmF0aW9uKX12YXIgZz1hKHRoaXMpLGg9YS5leHRlbmQoe30sYyxiKSxpPSExLGo9YShcIiNcIitnLmF0dHIoXCJkYXRhLWFjdGl2YXRlc1wiKSk7aWYoZCgpLGcuYWZ0ZXIoaiksaC5ob3Zlcil7dmFyIGs9ITE7Zy51bmJpbmQoXCJjbGljay5cIitnLmF0dHIoXCJpZFwiKSksZy5vbihcIm1vdXNlZW50ZXJcIixmdW5jdGlvbihhKXtrPT09ITEmJihlKCksaz0hMCl9KSxnLm9uKFwibW91c2VsZWF2ZVwiLGZ1bmN0aW9uKGIpe3ZhciBjPWIudG9FbGVtZW50fHxiLnJlbGF0ZWRUYXJnZXQ7YShjKS5jbG9zZXN0KFwiLmRyb3Bkb3duLWNvbnRlbnRcIikuaXMoail8fChqLnN0b3AoITAsITApLGYoKSxrPSExKX0pLGoub24oXCJtb3VzZWxlYXZlXCIsZnVuY3Rpb24oYil7dmFyIGM9Yi50b0VsZW1lbnR8fGIucmVsYXRlZFRhcmdldDthKGMpLmNsb3Nlc3QoXCIuZHJvcGRvd24tYnV0dG9uXCIpLmlzKGcpfHwoai5zdG9wKCEwLCEwKSxmKCksaz0hMSl9KX1lbHNlIGcudW5iaW5kKFwiY2xpY2suXCIrZy5hdHRyKFwiaWRcIikpLGcuYmluZChcImNsaWNrLlwiK2cuYXR0cihcImlkXCIpLGZ1bmN0aW9uKGIpe2l8fChnWzBdIT1iLmN1cnJlbnRUYXJnZXR8fGcuaGFzQ2xhc3MoXCJhY3RpdmVcIil8fDAhPT1hKGIudGFyZ2V0KS5jbG9zZXN0KFwiLmRyb3Bkb3duLWNvbnRlbnRcIikubGVuZ3RoP2cuaGFzQ2xhc3MoXCJhY3RpdmVcIikmJihmKCksYShkb2N1bWVudCkudW5iaW5kKFwiY2xpY2suXCIrai5hdHRyKFwiaWRcIikrXCIgdG91Y2hzdGFydC5cIitqLmF0dHIoXCJpZFwiKSkpOihiLnByZXZlbnREZWZhdWx0KCksaC5zdG9wUHJvcGFnYXRpb24mJmIuc3RvcFByb3BhZ2F0aW9uKCksZShcImNsaWNrXCIpKSxqLmhhc0NsYXNzKFwiYWN0aXZlXCIpJiZhKGRvY3VtZW50KS5iaW5kKFwiY2xpY2suXCIrai5hdHRyKFwiaWRcIikrXCIgdG91Y2hzdGFydC5cIitqLmF0dHIoXCJpZFwiKSxmdW5jdGlvbihiKXtqLmlzKGIudGFyZ2V0KXx8Zy5pcyhiLnRhcmdldCl8fGcuZmluZChiLnRhcmdldCkubGVuZ3RofHwoZigpLGEoZG9jdW1lbnQpLnVuYmluZChcImNsaWNrLlwiK2ouYXR0cihcImlkXCIpK1wiIHRvdWNoc3RhcnQuXCIrai5hdHRyKFwiaWRcIikpKX0pKX0pO2cub24oXCJvcGVuXCIsZnVuY3Rpb24oYSxiKXtlKGIpfSksZy5vbihcImNsb3NlXCIsZil9KX0sYShkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXthKFwiLmRyb3Bkb3duLWJ1dHRvblwiKS5kcm9wZG93bigpfSl9KGpRdWVyeSksZnVuY3Rpb24oYSl7dmFyIGI9MCxjPTAsZD1mdW5jdGlvbigpe3JldHVybiBjKyssXCJtYXRlcmlhbGl6ZS1tb2RhbC1vdmVybGF5LVwiK2N9LGU9e2luaXQ6ZnVuY3Rpb24oYyl7dmFyIGU9e29wYWNpdHk6LjUsaW5fZHVyYXRpb246MzUwLG91dF9kdXJhdGlvbjoyNTAscmVhZHk6dm9pZCAwLGNvbXBsZXRlOnZvaWQgMCxkaXNtaXNzaWJsZTohMCxzdGFydGluZ190b3A6XCI0JVwiLGVuZGluZ190b3A6XCIxMCVcIn07cmV0dXJuIGM9YS5leHRlbmQoZSxjKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZT1hKHRoaXMpLGY9YSh0aGlzKS5hdHRyKFwiaWRcIil8fFwiI1wiK2EodGhpcykuZGF0YShcInRhcmdldFwiKSxnPWZ1bmN0aW9uKCl7dmFyIGQ9ZS5kYXRhKFwib3ZlcmxheS1pZFwiKSxmPWEoXCIjXCIrZCk7ZS5yZW1vdmVDbGFzcyhcIm9wZW5cIiksYShcImJvZHlcIikuY3NzKHtvdmVyZmxvdzpcIlwiLHdpZHRoOlwiXCJ9KSxlLmZpbmQoXCIubW9kYWwtY2xvc2VcIikub2ZmKFwiY2xpY2suY2xvc2VcIiksYShkb2N1bWVudCkub2ZmKFwia2V5dXAubW9kYWxcIitkKSxmLnZlbG9jaXR5KHtvcGFjaXR5OjB9LHtkdXJhdGlvbjpjLm91dF9kdXJhdGlvbixxdWV1ZTohMSxlYXNlOlwiZWFzZU91dFF1YXJ0XCJ9KTt2YXIgZz17XHJcbmR1cmF0aW9uOmMub3V0X2R1cmF0aW9uLHF1ZXVlOiExLGVhc2U6XCJlYXNlT3V0Q3ViaWNcIixjb21wbGV0ZTpmdW5jdGlvbigpe2EodGhpcykuY3NzKHtkaXNwbGF5Olwibm9uZVwifSksXCJmdW5jdGlvblwiPT10eXBlb2YgYy5jb21wbGV0ZSYmYy5jb21wbGV0ZS5jYWxsKHRoaXMsZSksZi5yZW1vdmUoKSxiLS19fTtlLmhhc0NsYXNzKFwiYm90dG9tLXNoZWV0XCIpP2UudmVsb2NpdHkoe2JvdHRvbTpcIi0xMDAlXCIsb3BhY2l0eTowfSxnKTplLnZlbG9jaXR5KHt0b3A6Yy5zdGFydGluZ190b3Asb3BhY2l0eTowLHNjYWxlWDouN30sZyl9LGg9ZnVuY3Rpb24oZil7dmFyIGg9YShcImJvZHlcIiksaT1oLmlubmVyV2lkdGgoKTtpZihoLmNzcyhcIm92ZXJmbG93XCIsXCJoaWRkZW5cIiksaC53aWR0aChpKSwhZS5oYXNDbGFzcyhcIm9wZW5cIikpe3ZhciBqPWQoKSxrPWEoJzxkaXYgY2xhc3M9XCJtb2RhbC1vdmVybGF5XCI+PC9kaXY+Jyk7bFN0YWNrPSsrYixrLmF0dHIoXCJpZFwiLGopLmNzcyhcInotaW5kZXhcIiwxZTMrMipsU3RhY2spLGUuZGF0YShcIm92ZXJsYXktaWRcIixqKS5jc3MoXCJ6LWluZGV4XCIsMWUzKzIqbFN0YWNrKzEpLGUuYWRkQ2xhc3MoXCJvcGVuXCIpLGEoXCJib2R5XCIpLmFwcGVuZChrKSxjLmRpc21pc3NpYmxlJiYoay5jbGljayhmdW5jdGlvbigpe2coKX0pLGEoZG9jdW1lbnQpLm9uKFwia2V5dXAubW9kYWxcIitqLGZ1bmN0aW9uKGEpezI3PT09YS5rZXlDb2RlJiZnKCl9KSksZS5maW5kKFwiLm1vZGFsLWNsb3NlXCIpLm9uKFwiY2xpY2suY2xvc2VcIixmdW5jdGlvbihhKXtnKCl9KSxrLmNzcyh7ZGlzcGxheTpcImJsb2NrXCIsb3BhY2l0eTowfSksZS5jc3Moe2Rpc3BsYXk6XCJibG9ja1wiLG9wYWNpdHk6MH0pLGsudmVsb2NpdHkoe29wYWNpdHk6Yy5vcGFjaXR5fSx7ZHVyYXRpb246Yy5pbl9kdXJhdGlvbixxdWV1ZTohMSxlYXNlOlwiZWFzZU91dEN1YmljXCJ9KSxlLmRhdGEoXCJhc3NvY2lhdGVkLW92ZXJsYXlcIixrWzBdKTt2YXIgbD17ZHVyYXRpb246Yy5pbl9kdXJhdGlvbixxdWV1ZTohMSxlYXNlOlwiZWFzZU91dEN1YmljXCIsY29tcGxldGU6ZnVuY3Rpb24oKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBjLnJlYWR5JiZjLnJlYWR5LmNhbGwodGhpcyxlLGYpfX07ZS5oYXNDbGFzcyhcImJvdHRvbS1zaGVldFwiKT9lLnZlbG9jaXR5KHtib3R0b206XCIwXCIsb3BhY2l0eToxfSxsKTooYS5WZWxvY2l0eS5ob29rKGUsXCJzY2FsZVhcIiwuNyksZS5jc3Moe3RvcDpjLnN0YXJ0aW5nX3RvcH0pLGUudmVsb2NpdHkoe3RvcDpjLmVuZGluZ190b3Asb3BhY2l0eToxLHNjYWxlWDpcIjFcIn0sbCkpfX07YShkb2N1bWVudCkub2ZmKFwiY2xpY2subW9kYWxUcmlnZ2VyXCIsJ2FbaHJlZj1cIiMnK2YrJ1wiXSwgW2RhdGEtdGFyZ2V0PVwiJytmKydcIl0nKSxhKHRoaXMpLm9mZihcIm9wZW5Nb2RhbFwiKSxhKHRoaXMpLm9mZihcImNsb3NlTW9kYWxcIiksYShkb2N1bWVudCkub24oXCJjbGljay5tb2RhbFRyaWdnZXJcIiwnYVtocmVmPVwiIycrZisnXCJdLCBbZGF0YS10YXJnZXQ9XCInK2YrJ1wiXScsZnVuY3Rpb24oYil7Yy5zdGFydGluZ190b3A9KGEodGhpcykub2Zmc2V0KCkudG9wLWEod2luZG93KS5zY3JvbGxUb3AoKSkvMS4xNSxoKGEodGhpcykpLGIucHJldmVudERlZmF1bHQoKX0pLGEodGhpcykub24oXCJvcGVuTW9kYWxcIixmdW5jdGlvbigpe2EodGhpcykuYXR0cihcImhyZWZcIil8fFwiI1wiK2EodGhpcykuZGF0YShcInRhcmdldFwiKTtoKCl9KSxhKHRoaXMpLm9uKFwiY2xvc2VNb2RhbFwiLGZ1bmN0aW9uKCl7ZygpfSl9KX0sb3BlbjpmdW5jdGlvbigpe2EodGhpcykudHJpZ2dlcihcIm9wZW5Nb2RhbFwiKX0sY2xvc2U6ZnVuY3Rpb24oKXthKHRoaXMpLnRyaWdnZXIoXCJjbG9zZU1vZGFsXCIpfX07YS5mbi5tb2RhbD1mdW5jdGlvbihiKXtyZXR1cm4gZVtiXT9lW2JdLmFwcGx5KHRoaXMsQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpKTpcIm9iamVjdFwiIT10eXBlb2YgYiYmYj92b2lkIGEuZXJyb3IoXCJNZXRob2QgXCIrYitcIiBkb2VzIG5vdCBleGlzdCBvbiBqUXVlcnkubW9kYWxcIik6ZS5pbml0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX19KGpRdWVyeSksZnVuY3Rpb24oYSl7YS5mbi5tYXRlcmlhbGJveD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtmdW5jdGlvbiBiKCl7Zj0hMTt2YXIgYj1pLnBhcmVudChcIi5tYXRlcmlhbC1wbGFjZWhvbGRlclwiKSxkPSh3aW5kb3cuaW5uZXJXaWR0aCx3aW5kb3cuaW5uZXJIZWlnaHQsaS5kYXRhKFwid2lkdGhcIikpLGc9aS5kYXRhKFwiaGVpZ2h0XCIpO2kudmVsb2NpdHkoXCJzdG9wXCIsITApLGEoXCIjbWF0ZXJpYWxib3gtb3ZlcmxheVwiKS52ZWxvY2l0eShcInN0b3BcIiwhMCksYShcIi5tYXRlcmlhbGJveC1jYXB0aW9uXCIpLnZlbG9jaXR5KFwic3RvcFwiLCEwKSxhKFwiI21hdGVyaWFsYm94LW92ZXJsYXlcIikudmVsb2NpdHkoe29wYWNpdHk6MH0se2R1cmF0aW9uOmgscXVldWU6ITEsZWFzaW5nOlwiZWFzZU91dFF1YWRcIixjb21wbGV0ZTpmdW5jdGlvbigpe2U9ITEsYSh0aGlzKS5yZW1vdmUoKX19KSxpLnZlbG9jaXR5KHt3aWR0aDpkLGhlaWdodDpnLGxlZnQ6MCx0b3A6MH0se2R1cmF0aW9uOmgscXVldWU6ITEsZWFzaW5nOlwiZWFzZU91dFF1YWRcIn0pLGEoXCIubWF0ZXJpYWxib3gtY2FwdGlvblwiKS52ZWxvY2l0eSh7b3BhY2l0eTowfSx7ZHVyYXRpb246aCxxdWV1ZTohMSxlYXNpbmc6XCJlYXNlT3V0UXVhZFwiLGNvbXBsZXRlOmZ1bmN0aW9uKCl7Yi5jc3Moe2hlaWdodDpcIlwiLHdpZHRoOlwiXCIscG9zaXRpb246XCJcIix0b3A6XCJcIixsZWZ0OlwiXCJ9KSxpLmNzcyh7aGVpZ2h0OlwiXCIsdG9wOlwiXCIsbGVmdDpcIlwiLHdpZHRoOlwiXCIsXCJtYXgtd2lkdGhcIjpcIlwiLHBvc2l0aW9uOlwiXCIsXCJ6LWluZGV4XCI6XCJcIn0pLGkucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIiksZj0hMCxhKHRoaXMpLnJlbW92ZSgpLGMmJmMuY3NzKFwib3ZlcmZsb3dcIixcIlwiKX19KX1pZighYSh0aGlzKS5oYXNDbGFzcyhcImluaXRpYWxpemVkXCIpKXthKHRoaXMpLmFkZENsYXNzKFwiaW5pdGlhbGl6ZWRcIik7dmFyIGMsZCxlPSExLGY9ITAsZz0yNzUsaD0yMDAsaT1hKHRoaXMpLGo9YShcIjxkaXY+PC9kaXY+XCIpLmFkZENsYXNzKFwibWF0ZXJpYWwtcGxhY2Vob2xkZXJcIik7aS53cmFwKGopLGkub24oXCJjbGlja1wiLGZ1bmN0aW9uKCl7dmFyIGg9aS5wYXJlbnQoXCIubWF0ZXJpYWwtcGxhY2Vob2xkZXJcIiksaj13aW5kb3cuaW5uZXJXaWR0aCxrPXdpbmRvdy5pbm5lckhlaWdodCxsPWkud2lkdGgoKSxtPWkuaGVpZ2h0KCk7aWYoZj09PSExKXJldHVybiBiKCksITE7aWYoZSYmZj09PSEwKXJldHVybiBiKCksITE7Zj0hMSxpLmFkZENsYXNzKFwiYWN0aXZlXCIpLGU9ITAsaC5jc3Moe3dpZHRoOmhbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGgsaGVpZ2h0OmhbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0LHBvc2l0aW9uOlwicmVsYXRpdmVcIix0b3A6MCxsZWZ0OjB9KSxjPXZvaWQgMCxkPWhbMF0ucGFyZW50Tm9kZTtmb3IoO251bGwhPT1kJiYhYShkKS5pcyhkb2N1bWVudCk7KXt2YXIgbj1hKGQpO1widmlzaWJsZVwiIT09bi5jc3MoXCJvdmVyZmxvd1wiKSYmKG4uY3NzKFwib3ZlcmZsb3dcIixcInZpc2libGVcIiksYz12b2lkIDA9PT1jP246Yy5hZGQobikpLGQ9ZC5wYXJlbnROb2RlfWkuY3NzKHtwb3NpdGlvbjpcImFic29sdXRlXCIsXCJ6LWluZGV4XCI6MWUzfSkuZGF0YShcIndpZHRoXCIsbCkuZGF0YShcImhlaWdodFwiLG0pO3ZhciBvPWEoJzxkaXYgaWQ9XCJtYXRlcmlhbGJveC1vdmVybGF5XCI+PC9kaXY+JykuY3NzKHtvcGFjaXR5OjB9KS5jbGljayhmdW5jdGlvbigpe2Y9PT0hMCYmYigpfSk7aWYoaS5iZWZvcmUobyksby52ZWxvY2l0eSh7b3BhY2l0eToxfSx7ZHVyYXRpb246ZyxxdWV1ZTohMSxlYXNpbmc6XCJlYXNlT3V0UXVhZFwifSksXCJcIiE9PWkuZGF0YShcImNhcHRpb25cIikpe3ZhciBwPWEoJzxkaXYgY2xhc3M9XCJtYXRlcmlhbGJveC1jYXB0aW9uXCI+PC9kaXY+Jyk7cC50ZXh0KGkuZGF0YShcImNhcHRpb25cIikpLGEoXCJib2R5XCIpLmFwcGVuZChwKSxwLmNzcyh7ZGlzcGxheTpcImlubGluZVwifSkscC52ZWxvY2l0eSh7b3BhY2l0eToxfSx7ZHVyYXRpb246ZyxxdWV1ZTohMSxlYXNpbmc6XCJlYXNlT3V0UXVhZFwifSl9dmFyIHE9MCxyPWwvaixzPW0vayx0PTAsdT0wO3I+cz8ocT1tL2wsdD0uOSpqLHU9LjkqaipxKToocT1sL20sdD0uOSprKnEsdT0uOSprKSxpLmhhc0NsYXNzKFwicmVzcG9uc2l2ZS1pbWdcIik/aS52ZWxvY2l0eSh7XCJtYXgtd2lkdGhcIjp0LHdpZHRoOmx9LHtkdXJhdGlvbjowLHF1ZXVlOiExLGNvbXBsZXRlOmZ1bmN0aW9uKCl7aS5jc3Moe2xlZnQ6MCx0b3A6MH0pLnZlbG9jaXR5KHtoZWlnaHQ6dSx3aWR0aDp0LGxlZnQ6YShkb2N1bWVudCkuc2Nyb2xsTGVmdCgpK2ovMi1pLnBhcmVudChcIi5tYXRlcmlhbC1wbGFjZWhvbGRlclwiKS5vZmZzZXQoKS5sZWZ0LXQvMix0b3A6YShkb2N1bWVudCkuc2Nyb2xsVG9wKCkray8yLWkucGFyZW50KFwiLm1hdGVyaWFsLXBsYWNlaG9sZGVyXCIpLm9mZnNldCgpLnRvcC11LzJ9LHtkdXJhdGlvbjpnLHF1ZXVlOiExLGVhc2luZzpcImVhc2VPdXRRdWFkXCIsY29tcGxldGU6ZnVuY3Rpb24oKXtmPSEwfX0pfX0pOmkuY3NzKFwibGVmdFwiLDApLmNzcyhcInRvcFwiLDApLnZlbG9jaXR5KHtoZWlnaHQ6dSx3aWR0aDp0LGxlZnQ6YShkb2N1bWVudCkuc2Nyb2xsTGVmdCgpK2ovMi1pLnBhcmVudChcIi5tYXRlcmlhbC1wbGFjZWhvbGRlclwiKS5vZmZzZXQoKS5sZWZ0LXQvMix0b3A6YShkb2N1bWVudCkuc2Nyb2xsVG9wKCkray8yLWkucGFyZW50KFwiLm1hdGVyaWFsLXBsYWNlaG9sZGVyXCIpLm9mZnNldCgpLnRvcC11LzJ9LHtkdXJhdGlvbjpnLHF1ZXVlOiExLGVhc2luZzpcImVhc2VPdXRRdWFkXCIsY29tcGxldGU6ZnVuY3Rpb24oKXtmPSEwfX0pfSksYSh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbigpe2UmJmIoKX0pLGEoZG9jdW1lbnQpLmtleXVwKGZ1bmN0aW9uKGEpezI3PT09YS5rZXlDb2RlJiZmPT09ITAmJmUmJmIoKX0pfX0pfSxhKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe2EoXCIubWF0ZXJpYWxib3hlZFwiKS5tYXRlcmlhbGJveCgpfSl9KGpRdWVyeSksZnVuY3Rpb24oYSl7YS5mbi5wYXJhbGxheD1mdW5jdGlvbigpe3ZhciBiPWEod2luZG93KS53aWR0aCgpO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYyl7ZnVuY3Rpb24gZChjKXt2YXIgZDtkPTYwMT5iP2UuaGVpZ2h0KCk+MD9lLmhlaWdodCgpOmUuY2hpbGRyZW4oXCJpbWdcIikuaGVpZ2h0KCk6ZS5oZWlnaHQoKT4wP2UuaGVpZ2h0KCk6NTAwO3ZhciBmPWUuY2hpbGRyZW4oXCJpbWdcIikuZmlyc3QoKSxnPWYuaGVpZ2h0KCksaD1nLWQsaT1lLm9mZnNldCgpLnRvcCtkLGo9ZS5vZmZzZXQoKS50b3Asaz1hKHdpbmRvdykuc2Nyb2xsVG9wKCksbD13aW5kb3cuaW5uZXJIZWlnaHQsbT1rK2wsbj0obS1qKS8oZCtsKSxvPU1hdGgucm91bmQoaCpuKTtjJiZmLmNzcyhcImRpc3BsYXlcIixcImJsb2NrXCIpLGk+ayYmaytsPmomJmYuY3NzKFwidHJhbnNmb3JtXCIsXCJ0cmFuc2xhdGUzRCgtNTAlLFwiK28rXCJweCwgMClcIil9dmFyIGU9YSh0aGlzKTtlLmFkZENsYXNzKFwicGFyYWxsYXhcIiksZS5jaGlsZHJlbihcImltZ1wiKS5vbmUoXCJsb2FkXCIsZnVuY3Rpb24oKXtkKCEwKX0pLmVhY2goZnVuY3Rpb24oKXt0aGlzLmNvbXBsZXRlJiZhKHRoaXMpLnRyaWdnZXIoXCJsb2FkXCIpfSksYSh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbigpe2I9YSh3aW5kb3cpLndpZHRoKCksZCghMSl9KSxhKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uKCl7Yj1hKHdpbmRvdykud2lkdGgoKSxkKCExKX0pfSl9fShqUXVlcnkpLGZ1bmN0aW9uKGEpe3ZhciBiPXtpbml0OmZ1bmN0aW9uKGIpe3ZhciBjPXtvblNob3c6bnVsbH07cmV0dXJuIGI9YS5leHRlbmQoYyxiKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYyxkLGU9YSh0aGlzKSxmPShhKHdpbmRvdykud2lkdGgoKSxlLmZpbmQoXCJsaS50YWIgYVwiKSksZz1lLndpZHRoKCksaD1NYXRoLm1heChnLGVbMF0uc2Nyb2xsV2lkdGgpL2YubGVuZ3RoLGk9MCxqPWZ1bmN0aW9uKGEpe3JldHVybiBnLWEucG9zaXRpb24oKS5sZWZ0LWEub3V0ZXJXaWR0aCgpLWUuc2Nyb2xsTGVmdCgpfSxrPWZ1bmN0aW9uKGEpe3JldHVybiBhLnBvc2l0aW9uKCkubGVmdCtlLnNjcm9sbExlZnQoKX07Yz1hKGYuZmlsdGVyKCdbaHJlZj1cIicrbG9jYXRpb24uaGFzaCsnXCJdJykpLDA9PT1jLmxlbmd0aCYmKGM9YSh0aGlzKS5maW5kKFwibGkudGFiIGEuYWN0aXZlXCIpLmZpcnN0KCkpLDA9PT1jLmxlbmd0aCYmKGM9YSh0aGlzKS5maW5kKFwibGkudGFiIGFcIikuZmlyc3QoKSksYy5hZGRDbGFzcyhcImFjdGl2ZVwiKSxpPWYuaW5kZXgoYyksMD5pJiYoaT0wKSx2b2lkIDAhPT1jWzBdJiYoZD1hKGNbMF0uaGFzaCkpLGUuYXBwZW5kKCc8ZGl2IGNsYXNzPVwiaW5kaWNhdG9yXCI+PC9kaXY+Jyk7dmFyIGw9ZS5maW5kKFwiLmluZGljYXRvclwiKTtlLmlzKFwiOnZpc2libGVcIikmJnNldFRpbWVvdXQoZnVuY3Rpb24oKXtsLmNzcyh7cmlnaHQ6aihjKX0pLGwuY3NzKHtsZWZ0OmsoYyl9KX0sMCksYSh3aW5kb3cpLnJlc2l6ZShmdW5jdGlvbigpe2c9ZS53aWR0aCgpLGg9TWF0aC5tYXgoZyxlWzBdLnNjcm9sbFdpZHRoKS9mLmxlbmd0aCwwPmkmJihpPTApLDAhPT1oJiYwIT09ZyYmKGwuY3NzKHtyaWdodDpqKGMpfSksbC5jc3Moe2xlZnQ6ayhjKX0pKX0pLGYubm90KGMpLmVhY2goZnVuY3Rpb24oKXthKE1hdGVyaWFsaXplLmVzY2FwZUhhc2godGhpcy5oYXNoKSkuaGlkZSgpfSksZS5vbihcImNsaWNrXCIsXCJhXCIsZnVuY3Rpb24obSl7aWYoYSh0aGlzKS5wYXJlbnQoKS5oYXNDbGFzcyhcImRpc2FibGVkXCIpKXJldHVybiB2b2lkIG0ucHJldmVudERlZmF1bHQoKTtpZighYSh0aGlzKS5hdHRyKFwidGFyZ2V0XCIpKXtnPWUud2lkdGgoKSxoPU1hdGgubWF4KGcsZVswXS5zY3JvbGxXaWR0aCkvZi5sZW5ndGgsYy5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKSx2b2lkIDAhPT1kJiZkLmhpZGUoKSxjPWEodGhpcyksZD1hKE1hdGVyaWFsaXplLmVzY2FwZUhhc2godGhpcy5oYXNoKSksZj1lLmZpbmQoXCJsaS50YWIgYVwiKTtjLnBvc2l0aW9uKCk7Yy5hZGRDbGFzcyhcImFjdGl2ZVwiKTt2YXIgbj1pO2k9Zi5pbmRleChhKHRoaXMpKSwwPmkmJihpPTApLHZvaWQgMCE9PWQmJihkLnNob3coKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBiLm9uU2hvdyYmYi5vblNob3cuY2FsbCh0aGlzLGQpKSxpLW4+PTA/KGwudmVsb2NpdHkoe3JpZ2h0OmooYyl9LHtkdXJhdGlvbjozMDAscXVldWU6ITEsZWFzaW5nOlwiZWFzZU91dFF1YWRcIn0pLGwudmVsb2NpdHkoe2xlZnQ6ayhjKX0se2R1cmF0aW9uOjMwMCxxdWV1ZTohMSxlYXNpbmc6XCJlYXNlT3V0UXVhZFwiLGRlbGF5OjkwfSkpOihsLnZlbG9jaXR5KHtsZWZ0OmsoYyl9LHtkdXJhdGlvbjozMDAscXVldWU6ITEsZWFzaW5nOlwiZWFzZU91dFF1YWRcIn0pLGwudmVsb2NpdHkoe3JpZ2h0OmooYyl9LHtkdXJhdGlvbjozMDAscXVldWU6ITEsZWFzaW5nOlwiZWFzZU91dFF1YWRcIixkZWxheTo5MH0pKSxtLnByZXZlbnREZWZhdWx0KCl9fSl9KX0sc2VsZWN0X3RhYjpmdW5jdGlvbihhKXt0aGlzLmZpbmQoJ2FbaHJlZj1cIiMnK2ErJ1wiXScpLnRyaWdnZXIoXCJjbGlja1wiKX19O2EuZm4udGFicz1mdW5jdGlvbihjKXtyZXR1cm4gYltjXT9iW2NdLmFwcGx5KHRoaXMsQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpKTpcIm9iamVjdFwiIT10eXBlb2YgYyYmYz92b2lkIGEuZXJyb3IoXCJNZXRob2QgXCIrYytcIiBkb2VzIG5vdCBleGlzdCBvbiBqUXVlcnkudGFic1wiKTpiLmluaXQuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxhKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe2EoXCJ1bC50YWJzXCIpLnRhYnMoKX0pfShqUXVlcnkpLGZ1bmN0aW9uKGEpe2EuZm4udG9vbHRpcD1mdW5jdGlvbihjKXt2YXIgZD01LGU9e2RlbGF5OjM1MCx0b29sdGlwOlwiXCIscG9zaXRpb246XCJib3R0b21cIixodG1sOiExfTtyZXR1cm5cInJlbW92ZVwiPT09Yz8odGhpcy5lYWNoKGZ1bmN0aW9uKCl7YShcIiNcIithKHRoaXMpLmF0dHIoXCJkYXRhLXRvb2x0aXAtaWRcIikpLnJlbW92ZSgpLGEodGhpcykub2ZmKFwibW91c2VlbnRlci50b29sdGlwIG1vdXNlbGVhdmUudG9vbHRpcFwiKX0pLCExKTooYz1hLmV4dGVuZChlLGMpLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBlPU1hdGVyaWFsaXplLmd1aWQoKSxmPWEodGhpcyk7Zi5hdHRyKFwiZGF0YS10b29sdGlwLWlkXCIpJiZhKFwiI1wiK2YuYXR0cihcImRhdGEtdG9vbHRpcC1pZFwiKSkucmVtb3ZlKCksZi5hdHRyKFwiZGF0YS10b29sdGlwLWlkXCIsZSk7dmFyIGcsaCxpLGosayxsLG09ZnVuY3Rpb24oKXtnPWYuYXR0cihcImRhdGEtaHRtbFwiKT9cInRydWVcIj09PWYuYXR0cihcImRhdGEtaHRtbFwiKTpjLmh0bWwsaD1mLmF0dHIoXCJkYXRhLWRlbGF5XCIpLGg9dm9pZCAwPT09aHx8XCJcIj09PWg/Yy5kZWxheTpoLGk9Zi5hdHRyKFwiZGF0YS1wb3NpdGlvblwiKSxpPXZvaWQgMD09PWl8fFwiXCI9PT1pP2MucG9zaXRpb246aSxqPWYuYXR0cihcImRhdGEtdG9vbHRpcFwiKSxqPXZvaWQgMD09PWp8fFwiXCI9PT1qP2MudG9vbHRpcDpqfTttKCk7dmFyIG49ZnVuY3Rpb24oKXt2YXIgYj1hKCc8ZGl2IGNsYXNzPVwibWF0ZXJpYWwtdG9vbHRpcFwiPjwvZGl2PicpO3JldHVybiBqPWc/YShcIjxzcGFuPjwvc3Bhbj5cIikuaHRtbChqKTphKFwiPHNwYW4+PC9zcGFuPlwiKS50ZXh0KGopLGIuYXBwZW5kKGopLmFwcGVuZFRvKGEoXCJib2R5XCIpKS5hdHRyKFwiaWRcIixlKSxsPWEoJzxkaXYgY2xhc3M9XCJiYWNrZHJvcFwiPjwvZGl2PicpLGwuYXBwZW5kVG8oYiksYn07az1uKCksZi5vZmYoXCJtb3VzZWVudGVyLnRvb2x0aXAgbW91c2VsZWF2ZS50b29sdGlwXCIpO3ZhciBvLHA9ITE7Zi5vbih7XCJtb3VzZWVudGVyLnRvb2x0aXBcIjpmdW5jdGlvbihhKXt2YXIgYz1mdW5jdGlvbigpe20oKSxwPSEwLGsudmVsb2NpdHkoXCJzdG9wXCIpLGwudmVsb2NpdHkoXCJzdG9wXCIpLGsuY3NzKHtkaXNwbGF5OlwiYmxvY2tcIixsZWZ0OlwiMHB4XCIsdG9wOlwiMHB4XCJ9KTt2YXIgYSxjLGUsZz1mLm91dGVyV2lkdGgoKSxoPWYub3V0ZXJIZWlnaHQoKSxqPWsub3V0ZXJIZWlnaHQoKSxuPWsub3V0ZXJXaWR0aCgpLG89XCIwcHhcIixxPVwiMHB4XCIscj04LHM9ODtcInRvcFwiPT09aT8oYT1mLm9mZnNldCgpLnRvcC1qLWQsYz1mLm9mZnNldCgpLmxlZnQrZy8yLW4vMixlPWIoYyxhLG4saiksbz1cIi0xMHB4XCIsbC5jc3Moe2JvdHRvbTowLGxlZnQ6MCxib3JkZXJSYWRpdXM6XCIxNHB4IDE0cHggMCAwXCIsdHJhbnNmb3JtT3JpZ2luOlwiNTAlIDEwMCVcIixtYXJnaW5Ub3A6aixtYXJnaW5MZWZ0Om4vMi1sLndpZHRoKCkvMn0pKTpcImxlZnRcIj09PWk/KGE9Zi5vZmZzZXQoKS50b3AraC8yLWovMixjPWYub2Zmc2V0KCkubGVmdC1uLWQsZT1iKGMsYSxuLGopLHE9XCItMTBweFwiLGwuY3NzKHt0b3A6XCItN3B4XCIscmlnaHQ6MCx3aWR0aDpcIjE0cHhcIixoZWlnaHQ6XCIxNHB4XCIsYm9yZGVyUmFkaXVzOlwiMTRweCAwIDAgMTRweFwiLHRyYW5zZm9ybU9yaWdpbjpcIjk1JSA1MCVcIixtYXJnaW5Ub3A6ai8yLG1hcmdpbkxlZnQ6bn0pKTpcInJpZ2h0XCI9PT1pPyhhPWYub2Zmc2V0KCkudG9wK2gvMi1qLzIsYz1mLm9mZnNldCgpLmxlZnQrZytkLGU9YihjLGEsbixqKSxxPVwiKzEwcHhcIixsLmNzcyh7dG9wOlwiLTdweFwiLGxlZnQ6MCx3aWR0aDpcIjE0cHhcIixoZWlnaHQ6XCIxNHB4XCIsYm9yZGVyUmFkaXVzOlwiMCAxNHB4IDE0cHggMFwiLHRyYW5zZm9ybU9yaWdpbjpcIjUlIDUwJVwiLG1hcmdpblRvcDpqLzIsbWFyZ2luTGVmdDpcIjBweFwifSkpOihhPWYub2Zmc2V0KCkudG9wK2Yub3V0ZXJIZWlnaHQoKStkLGM9Zi5vZmZzZXQoKS5sZWZ0K2cvMi1uLzIsZT1iKGMsYSxuLGopLG89XCIrMTBweFwiLGwuY3NzKHt0b3A6MCxsZWZ0OjAsbWFyZ2luTGVmdDpuLzItbC53aWR0aCgpLzJ9KSksay5jc3Moe3RvcDplLnksbGVmdDplLnh9KSxyPU1hdGguU1FSVDIqbi9wYXJzZUludChsLmNzcyhcIndpZHRoXCIpKSxzPU1hdGguU1FSVDIqai9wYXJzZUludChsLmNzcyhcImhlaWdodFwiKSksay52ZWxvY2l0eSh7bWFyZ2luVG9wOm8sbWFyZ2luTGVmdDpxfSx7ZHVyYXRpb246MzUwLHF1ZXVlOiExfSkudmVsb2NpdHkoe29wYWNpdHk6MX0se2R1cmF0aW9uOjMwMCxkZWxheTo1MCxxdWV1ZTohMX0pLGwuY3NzKHtkaXNwbGF5OlwiYmxvY2tcIn0pLnZlbG9jaXR5KHtvcGFjaXR5OjF9LHtkdXJhdGlvbjo1NSxkZWxheTowLHF1ZXVlOiExfSkudmVsb2NpdHkoe3NjYWxlWDpyLHNjYWxlWTpzfSx7ZHVyYXRpb246MzAwLGRlbGF5OjAscXVldWU6ITEsZWFzaW5nOlwiZWFzZUluT3V0UXVhZFwifSl9O289c2V0VGltZW91dChjLGgpfSxcIm1vdXNlbGVhdmUudG9vbHRpcFwiOmZ1bmN0aW9uKCl7cD0hMSxjbGVhclRpbWVvdXQobyksc2V0VGltZW91dChmdW5jdGlvbigpe3AhPT0hMCYmKGsudmVsb2NpdHkoe29wYWNpdHk6MCxtYXJnaW5Ub3A6MCxtYXJnaW5MZWZ0OjB9LHtkdXJhdGlvbjoyMjUscXVldWU6ITF9KSxsLnZlbG9jaXR5KHtvcGFjaXR5OjAsc2NhbGVYOjEsc2NhbGVZOjF9LHtkdXJhdGlvbjoyMjUscXVldWU6ITEsY29tcGxldGU6ZnVuY3Rpb24oKXtsLmNzcyhcImRpc3BsYXlcIixcIm5vbmVcIiksay5jc3MoXCJkaXNwbGF5XCIsXCJub25lXCIpLHA9ITF9fSkpfSwyMjUpfX0pfSkpfTt2YXIgYj1mdW5jdGlvbihiLGMsZCxlKXt2YXIgZj1iLGc9YztyZXR1cm4gMD5mP2Y9NDpmK2Q+d2luZG93LmlubmVyV2lkdGgmJihmLT1mK2Qtd2luZG93LmlubmVyV2lkdGgpLDA+Zz9nPTQ6ZytlPndpbmRvdy5pbm5lckhlaWdodCthKHdpbmRvdykuc2Nyb2xsVG9wJiYoZy09ZytlLXdpbmRvdy5pbm5lckhlaWdodCkse3g6Zix5Omd9fTthKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe2EoXCIudG9vbHRpcHBlZFwiKS50b29sdGlwKCl9KX0oalF1ZXJ5KSxmdW5jdGlvbihhKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBiKGEpe3JldHVybiBudWxsIT09YSYmYT09PWEud2luZG93fWZ1bmN0aW9uIGMoYSl7cmV0dXJuIGIoYSk/YTo5PT09YS5ub2RlVHlwZSYmYS5kZWZhdWx0Vmlld31mdW5jdGlvbiBkKGEpe3ZhciBiLGQsZT17dG9wOjAsbGVmdDowfSxmPWEmJmEub3duZXJEb2N1bWVudDtyZXR1cm4gYj1mLmRvY3VtZW50RWxlbWVudCxcInVuZGVmaW5lZFwiIT10eXBlb2YgYS5nZXRCb3VuZGluZ0NsaWVudFJlY3QmJihlPWEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpLGQ9YyhmKSx7dG9wOmUudG9wK2QucGFnZVlPZmZzZXQtYi5jbGllbnRUb3AsbGVmdDplLmxlZnQrZC5wYWdlWE9mZnNldC1iLmNsaWVudExlZnR9fWZ1bmN0aW9uIGUoYSl7dmFyIGI9XCJcIjtmb3IodmFyIGMgaW4gYSlhLmhhc093blByb3BlcnR5KGMpJiYoYis9YytcIjpcIithW2NdK1wiO1wiKTtyZXR1cm4gYn1mdW5jdGlvbiBmKGEpe2lmKGsuYWxsb3dFdmVudChhKT09PSExKXJldHVybiBudWxsO2Zvcih2YXIgYj1udWxsLGM9YS50YXJnZXR8fGEuc3JjRWxlbWVudDtudWxsIT09Yy5wYXJlbnRFbGVtZW50Oyl7aWYoIShjIGluc3RhbmNlb2YgU1ZHRWxlbWVudHx8LTE9PT1jLmNsYXNzTmFtZS5pbmRleE9mKFwid2F2ZXMtZWZmZWN0XCIpKSl7Yj1jO2JyZWFrfWlmKGMuY2xhc3NMaXN0LmNvbnRhaW5zKFwid2F2ZXMtZWZmZWN0XCIpKXtiPWM7YnJlYWt9Yz1jLnBhcmVudEVsZW1lbnR9cmV0dXJuIGJ9ZnVuY3Rpb24gZyhiKXt2YXIgYz1mKGIpO251bGwhPT1jJiYoai5zaG93KGIsYyksXCJvbnRvdWNoc3RhcnRcImluIGEmJihjLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLGouaGlkZSwhMSksYy5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hjYW5jZWxcIixqLmhpZGUsITEpKSxjLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsai5oaWRlLCExKSxjLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWxlYXZlXCIsai5oaWRlLCExKSl9dmFyIGg9aHx8e30saT1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsLmJpbmQoZG9jdW1lbnQpLGo9e2R1cmF0aW9uOjc1MCxzaG93OmZ1bmN0aW9uKGEsYil7aWYoMj09PWEuYnV0dG9uKXJldHVybiExO3ZhciBjPWJ8fHRoaXMsZj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2YuY2xhc3NOYW1lPVwid2F2ZXMtcmlwcGxlXCIsYy5hcHBlbmRDaGlsZChmKTt2YXIgZz1kKGMpLGg9YS5wYWdlWS1nLnRvcCxpPWEucGFnZVgtZy5sZWZ0LGs9XCJzY2FsZShcIitjLmNsaWVudFdpZHRoLzEwMCoxMCtcIilcIjtcInRvdWNoZXNcImluIGEmJihoPWEudG91Y2hlc1swXS5wYWdlWS1nLnRvcCxpPWEudG91Y2hlc1swXS5wYWdlWC1nLmxlZnQpLGYuc2V0QXR0cmlidXRlKFwiZGF0YS1ob2xkXCIsRGF0ZS5ub3coKSksZi5zZXRBdHRyaWJ1dGUoXCJkYXRhLXNjYWxlXCIsayksZi5zZXRBdHRyaWJ1dGUoXCJkYXRhLXhcIixpKSxmLnNldEF0dHJpYnV0ZShcImRhdGEteVwiLGgpO3ZhciBsPXt0b3A6aCtcInB4XCIsbGVmdDppK1wicHhcIn07Zi5jbGFzc05hbWU9Zi5jbGFzc05hbWUrXCIgd2F2ZXMtbm90cmFuc2l0aW9uXCIsZi5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLGUobCkpLGYuY2xhc3NOYW1lPWYuY2xhc3NOYW1lLnJlcGxhY2UoXCJ3YXZlcy1ub3RyYW5zaXRpb25cIixcIlwiKSxsW1wiLXdlYmtpdC10cmFuc2Zvcm1cIl09ayxsW1wiLW1vei10cmFuc2Zvcm1cIl09ayxsW1wiLW1zLXRyYW5zZm9ybVwiXT1rLGxbXCItby10cmFuc2Zvcm1cIl09ayxsLnRyYW5zZm9ybT1rLGwub3BhY2l0eT1cIjFcIixsW1wiLXdlYmtpdC10cmFuc2l0aW9uLWR1cmF0aW9uXCJdPWouZHVyYXRpb24rXCJtc1wiLGxbXCItbW96LXRyYW5zaXRpb24tZHVyYXRpb25cIl09ai5kdXJhdGlvbitcIm1zXCIsbFtcIi1vLXRyYW5zaXRpb24tZHVyYXRpb25cIl09ai5kdXJhdGlvbitcIm1zXCIsbFtcInRyYW5zaXRpb24tZHVyYXRpb25cIl09ai5kdXJhdGlvbitcIm1zXCIsbFtcIi13ZWJraXQtdHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb25cIl09XCJjdWJpYy1iZXppZXIoMC4yNTAsIDAuNDYwLCAwLjQ1MCwgMC45NDApXCIsbFtcIi1tb3otdHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb25cIl09XCJjdWJpYy1iZXppZXIoMC4yNTAsIDAuNDYwLCAwLjQ1MCwgMC45NDApXCIsbFtcIi1vLXRyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uXCJdPVwiY3ViaWMtYmV6aWVyKDAuMjUwLCAwLjQ2MCwgMC40NTAsIDAuOTQwKVwiLGxbXCJ0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvblwiXT1cImN1YmljLWJlemllcigwLjI1MCwgMC40NjAsIDAuNDUwLCAwLjk0MClcIixmLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsZShsKSl9LGhpZGU6ZnVuY3Rpb24oYSl7ay50b3VjaHVwKGEpO3ZhciBiPXRoaXMsYz0oMS40KmIuY2xpZW50V2lkdGgsbnVsbCksZD1iLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJ3YXZlcy1yaXBwbGVcIik7aWYoIShkLmxlbmd0aD4wKSlyZXR1cm4hMTtjPWRbZC5sZW5ndGgtMV07dmFyIGY9Yy5nZXRBdHRyaWJ1dGUoXCJkYXRhLXhcIiksZz1jLmdldEF0dHJpYnV0ZShcImRhdGEteVwiKSxoPWMuZ2V0QXR0cmlidXRlKFwiZGF0YS1zY2FsZVwiKSxpPURhdGUubm93KCktTnVtYmVyKGMuZ2V0QXR0cmlidXRlKFwiZGF0YS1ob2xkXCIpKSxsPTM1MC1pOzA+bCYmKGw9MCksc2V0VGltZW91dChmdW5jdGlvbigpe3ZhciBhPXt0b3A6ZytcInB4XCIsbGVmdDpmK1wicHhcIixvcGFjaXR5OlwiMFwiLFwiLXdlYmtpdC10cmFuc2l0aW9uLWR1cmF0aW9uXCI6ai5kdXJhdGlvbitcIm1zXCIsXCItbW96LXRyYW5zaXRpb24tZHVyYXRpb25cIjpqLmR1cmF0aW9uK1wibXNcIixcIi1vLXRyYW5zaXRpb24tZHVyYXRpb25cIjpqLmR1cmF0aW9uK1wibXNcIixcInRyYW5zaXRpb24tZHVyYXRpb25cIjpqLmR1cmF0aW9uK1wibXNcIixcIi13ZWJraXQtdHJhbnNmb3JtXCI6aCxcIi1tb3otdHJhbnNmb3JtXCI6aCxcIi1tcy10cmFuc2Zvcm1cIjpoLFwiLW8tdHJhbnNmb3JtXCI6aCx0cmFuc2Zvcm06aH07Yy5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLGUoYSkpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXt0cnl7Yi5yZW1vdmVDaGlsZChjKX1jYXRjaChhKXtyZXR1cm4hMX19LGouZHVyYXRpb24pfSxsKX0sd3JhcElucHV0OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7YisrKXt2YXIgYz1hW2JdO2lmKFwiaW5wdXRcIj09PWMudGFnTmFtZS50b0xvd2VyQ2FzZSgpKXt2YXIgZD1jLnBhcmVudE5vZGU7aWYoXCJpXCI9PT1kLnRhZ05hbWUudG9Mb3dlckNhc2UoKSYmLTEhPT1kLmNsYXNzTmFtZS5pbmRleE9mKFwid2F2ZXMtZWZmZWN0XCIpKWNvbnRpbnVlO3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpXCIpO2UuY2xhc3NOYW1lPWMuY2xhc3NOYW1lK1wiIHdhdmVzLWlucHV0LXdyYXBwZXJcIjt2YXIgZj1jLmdldEF0dHJpYnV0ZShcInN0eWxlXCIpO2Z8fChmPVwiXCIpLGUuc2V0QXR0cmlidXRlKFwic3R5bGVcIixmKSxjLmNsYXNzTmFtZT1cIndhdmVzLWJ1dHRvbi1pbnB1dFwiLGMucmVtb3ZlQXR0cmlidXRlKFwic3R5bGVcIiksZC5yZXBsYWNlQ2hpbGQoZSxjKSxlLmFwcGVuZENoaWxkKGMpfX19fSxrPXt0b3VjaGVzOjAsYWxsb3dFdmVudDpmdW5jdGlvbihhKXt2YXIgYj0hMDtyZXR1cm5cInRvdWNoc3RhcnRcIj09PWEudHlwZT9rLnRvdWNoZXMrPTE6XCJ0b3VjaGVuZFwiPT09YS50eXBlfHxcInRvdWNoY2FuY2VsXCI9PT1hLnR5cGU/c2V0VGltZW91dChmdW5jdGlvbigpe2sudG91Y2hlcz4wJiYoay50b3VjaGVzLT0xKX0sNTAwKTpcIm1vdXNlZG93blwiPT09YS50eXBlJiZrLnRvdWNoZXM+MCYmKGI9ITEpLGJ9LHRvdWNodXA6ZnVuY3Rpb24oYSl7ay5hbGxvd0V2ZW50KGEpfX07aC5kaXNwbGF5RWZmZWN0PWZ1bmN0aW9uKGIpe2I9Ynx8e30sXCJkdXJhdGlvblwiaW4gYiYmKGouZHVyYXRpb249Yi5kdXJhdGlvbiksai53cmFwSW5wdXQoaShcIi53YXZlcy1lZmZlY3RcIikpLFwib250b3VjaHN0YXJ0XCJpbiBhJiZkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsZywhMSksZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsZywhMSl9LGguYXR0YWNoPWZ1bmN0aW9uKGIpe1wiaW5wdXRcIj09PWIudGFnTmFtZS50b0xvd2VyQ2FzZSgpJiYoai53cmFwSW5wdXQoW2JdKSxiPWIucGFyZW50RWxlbWVudCksXCJvbnRvdWNoc3RhcnRcImluIGEmJmIuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIixnLCExKSxiLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIixnLCExKX0sYS5XYXZlcz1oLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsZnVuY3Rpb24oKXtoLmRpc3BsYXlFZmZlY3QoKX0sITEpfSh3aW5kb3cpLE1hdGVyaWFsaXplLnRvYXN0PWZ1bmN0aW9uKGEsYixjLGQpe2Z1bmN0aW9uIGUoYSl7dmFyIGI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtpZihiLmNsYXNzTGlzdC5hZGQoXCJ0b2FzdFwiKSxjKWZvcih2YXIgZT1jLnNwbGl0KFwiIFwiKSxmPTAsZz1lLmxlbmd0aDtnPmY7ZisrKWIuY2xhc3NMaXN0LmFkZChlW2ZdKTsoXCJvYmplY3RcIj09dHlwZW9mIEhUTUxFbGVtZW50P2EgaW5zdGFuY2VvZiBIVE1MRWxlbWVudDphJiZcIm9iamVjdFwiPT10eXBlb2YgYSYmbnVsbCE9PWEmJjE9PT1hLm5vZGVUeXBlJiZcInN0cmluZ1wiPT10eXBlb2YgYS5ub2RlTmFtZSk/Yi5hcHBlbmRDaGlsZChhKTphIGluc3RhbmNlb2YgalF1ZXJ5P2IuYXBwZW5kQ2hpbGQoYVswXSk6Yi5pbm5lckhUTUw9YTt2YXIgaD1uZXcgSGFtbWVyKGIse3ByZXZlbnRfZGVmYXVsdDohMX0pO3JldHVybiBoLm9uKFwicGFuXCIsZnVuY3Rpb24oYSl7dmFyIGM9YS5kZWx0YVgsZD04MDtiLmNsYXNzTGlzdC5jb250YWlucyhcInBhbm5pbmdcIil8fGIuY2xhc3NMaXN0LmFkZChcInBhbm5pbmdcIik7dmFyIGU9MS1NYXRoLmFicyhjL2QpOzA+ZSYmKGU9MCksVmVsKGIse2xlZnQ6YyxvcGFjaXR5OmV9LHtkdXJhdGlvbjo1MCxxdWV1ZTohMSxlYXNpbmc6XCJlYXNlT3V0UXVhZFwifSl9KSxoLm9uKFwicGFuZW5kXCIsZnVuY3Rpb24oYSl7dmFyIGM9YS5kZWx0YVgsZT04MDtNYXRoLmFicyhjKT5lP1ZlbChiLHttYXJnaW5Ub3A6XCItNDBweFwifSx7ZHVyYXRpb246Mzc1LGVhc2luZzpcImVhc2VPdXRFeHBvXCIscXVldWU6ITEsY29tcGxldGU6ZnVuY3Rpb24oKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkJiZkKCksYi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIpfX0pOihiLmNsYXNzTGlzdC5yZW1vdmUoXCJwYW5uaW5nXCIpLFZlbChiLHtsZWZ0OjAsb3BhY2l0eToxfSx7ZHVyYXRpb246MzAwLGVhc2luZzpcImVhc2VPdXRFeHBvXCIscXVldWU6ITF9KSl9KSxifWM9Y3x8XCJcIjt2YXIgZj1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRvYXN0LWNvbnRhaW5lclwiKTtudWxsPT09ZiYmKGY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxmLmlkPVwidG9hc3QtY29udGFpbmVyXCIsZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChmKSk7dmFyIGc9ZShhKTthJiZmLmFwcGVuZENoaWxkKGcpLGcuc3R5bGUudG9wPVwiMzVweFwiLGcuc3R5bGUub3BhY2l0eT0wLFZlbChnLHt0b3A6XCIwcHhcIixvcGFjaXR5OjF9LHtkdXJhdGlvbjozMDAsZWFzaW5nOlwiZWFzZU91dEN1YmljXCIscXVldWU6ITF9KTt2YXIgaCxpPWI7bnVsbCE9aSYmKGg9c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtudWxsPT09Zy5wYXJlbnROb2RlJiZ3aW5kb3cuY2xlYXJJbnRlcnZhbChoKSxnLmNsYXNzTGlzdC5jb250YWlucyhcInBhbm5pbmdcIil8fChpLT0yMCksMD49aSYmKFZlbChnLHtvcGFjaXR5OjAsbWFyZ2luVG9wOlwiLTQwcHhcIn0se2R1cmF0aW9uOjM3NSxlYXNpbmc6XCJlYXNlT3V0RXhwb1wiLHF1ZXVlOiExLGNvbXBsZXRlOmZ1bmN0aW9uKCl7XCJmdW5jdGlvblwiPT10eXBlb2YgZCYmZCgpLHRoaXNbMF0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzWzBdKX19KSx3aW5kb3cuY2xlYXJJbnRlcnZhbChoKSl9LDIwKSl9LGZ1bmN0aW9uKGEpe3ZhciBiPXtpbml0OmZ1bmN0aW9uKGIpe3ZhciBjPXttZW51V2lkdGg6MzAwLGVkZ2U6XCJsZWZ0XCIsY2xvc2VPbkNsaWNrOiExLGRyYWdnYWJsZTohMH07Yj1hLmV4dGVuZChjLGIpLGEodGhpcykuZWFjaChmdW5jdGlvbigpe3ZhciBjPWEodGhpcyksZD1hKFwiI1wiK2MuYXR0cihcImRhdGEtYWN0aXZhdGVzXCIpKTszMDAhPWIubWVudVdpZHRoJiZkLmNzcyhcIndpZHRoXCIsYi5tZW51V2lkdGgpO3ZhciBlO2IuZHJhZ2dhYmxlPyhlPWEoJzxkaXYgY2xhc3M9XCJkcmFnLXRhcmdldFwiPjwvZGl2PicpLmF0dHIoXCJkYXRhLXNpZGVuYXZcIixjLmF0dHIoXCJkYXRhLWFjdGl2YXRlc1wiKSksYShcImJvZHlcIikuYXBwZW5kKGUpKTplPWEoKSxcImxlZnRcIj09Yi5lZGdlPyhkLmNzcyhcInRyYW5zZm9ybVwiLFwidHJhbnNsYXRlWCgtMTAwJSlcIiksZS5jc3Moe2xlZnQ6MH0pKTooZC5hZGRDbGFzcyhcInJpZ2h0LWFsaWduZWRcIikuY3NzKFwidHJhbnNmb3JtXCIsXCJ0cmFuc2xhdGVYKDEwMCUpXCIpLGUuY3NzKHtyaWdodDowfSkpLGQuaGFzQ2xhc3MoXCJmaXhlZFwiKSYmd2luZG93LmlubmVyV2lkdGg+OTkyJiZkLmNzcyhcInRyYW5zZm9ybVwiLFwidHJhbnNsYXRlWCgwKVwiKSxkLmhhc0NsYXNzKFwiZml4ZWRcIikmJmEod2luZG93KS5yZXNpemUoZnVuY3Rpb24oKXt3aW5kb3cuaW5uZXJXaWR0aD45OTI/MCE9PWEoXCIjc2lkZW5hdi1vdmVybGF5XCIpLmxlbmd0aCYmaD9mKCEwKTpkLmNzcyhcInRyYW5zZm9ybVwiLFwidHJhbnNsYXRlWCgwJSlcIik6aD09PSExJiYoXCJsZWZ0XCI9PT1iLmVkZ2U/ZC5jc3MoXCJ0cmFuc2Zvcm1cIixcInRyYW5zbGF0ZVgoLTEwMCUpXCIpOmQuY3NzKFwidHJhbnNmb3JtXCIsXCJ0cmFuc2xhdGVYKDEwMCUpXCIpKX0pLGIuY2xvc2VPbkNsaWNrPT09ITAmJmQub24oXCJjbGljay5pdGVtY2xpY2tcIixcImE6bm90KC5jb2xsYXBzaWJsZS1oZWFkZXIpXCIsZnVuY3Rpb24oKXtmKCl9KTt2YXIgZj1mdW5jdGlvbihjKXtnPSExLGg9ITEsYShcImJvZHlcIikuY3NzKHtvdmVyZmxvdzpcIlwiLHdpZHRoOlwiXCJ9KSxhKFwiI3NpZGVuYXYtb3ZlcmxheVwiKS52ZWxvY2l0eSh7b3BhY2l0eTowfSx7ZHVyYXRpb246MjAwLHF1ZXVlOiExLGVhc2luZzpcImVhc2VPdXRRdWFkXCIsY29tcGxldGU6ZnVuY3Rpb24oKXthKHRoaXMpLnJlbW92ZSgpfX0pLFwibGVmdFwiPT09Yi5lZGdlPyhlLmNzcyh7d2lkdGg6XCJcIixyaWdodDpcIlwiLGxlZnQ6XCIwXCJ9KSxkLnZlbG9jaXR5KHt0cmFuc2xhdGVYOlwiLTEwMCVcIn0se2R1cmF0aW9uOjIwMCxxdWV1ZTohMSxlYXNpbmc6XCJlYXNlT3V0Q3ViaWNcIixjb21wbGV0ZTpmdW5jdGlvbigpe2M9PT0hMCYmKGQucmVtb3ZlQXR0cihcInN0eWxlXCIpLGQuY3NzKFwid2lkdGhcIixiLm1lbnVXaWR0aCkpfX0pKTooZS5jc3Moe3dpZHRoOlwiXCIscmlnaHQ6XCIwXCIsbGVmdDpcIlwifSksZC52ZWxvY2l0eSh7dHJhbnNsYXRlWDpcIjEwMCVcIn0se2R1cmF0aW9uOjIwMCxxdWV1ZTohMSxlYXNpbmc6XCJlYXNlT3V0Q3ViaWNcIixjb21wbGV0ZTpmdW5jdGlvbigpe2M9PT0hMCYmKGQucmVtb3ZlQXR0cihcInN0eWxlXCIpLGQuY3NzKFwid2lkdGhcIixiLm1lbnVXaWR0aCkpfX0pKX0sZz0hMSxoPSExO2IuZHJhZ2dhYmxlJiYoZS5vbihcImNsaWNrXCIsZnVuY3Rpb24oKXtoJiZmKCl9KSxlLmhhbW1lcih7cHJldmVudF9kZWZhdWx0OiExfSkuYmluZChcInBhblwiLGZ1bmN0aW9uKGMpe2lmKFwidG91Y2hcIj09Yy5nZXN0dXJlLnBvaW50ZXJUeXBlKXt2YXIgZT0oYy5nZXN0dXJlLmRpcmVjdGlvbixjLmdlc3R1cmUuY2VudGVyLngpLGc9KGMuZ2VzdHVyZS5jZW50ZXIueSxjLmdlc3R1cmUudmVsb2NpdHlYLGEoXCJib2R5XCIpKSxpPWEoXCIjc2lkZW5hdi1vdmVybGF5XCIpLGo9Zy5pbm5lcldpZHRoKCk7aWYoZy5jc3MoXCJvdmVyZmxvd1wiLFwiaGlkZGVuXCIpLGcud2lkdGgoaiksMD09PWkubGVuZ3RoJiYoaT1hKCc8ZGl2IGlkPVwic2lkZW5hdi1vdmVybGF5XCI+PC9kaXY+JyksaS5jc3MoXCJvcGFjaXR5XCIsMCkuY2xpY2soZnVuY3Rpb24oKXtmKCl9KSxhKFwiYm9keVwiKS5hcHBlbmQoaSkpLFwibGVmdFwiPT09Yi5lZGdlJiYoZT5iLm1lbnVXaWR0aD9lPWIubWVudVdpZHRoOjA+ZSYmKGU9MCkpLFwibGVmdFwiPT09Yi5lZGdlKWU8Yi5tZW51V2lkdGgvMj9oPSExOmU+PWIubWVudVdpZHRoLzImJihoPSEwKSxkLmNzcyhcInRyYW5zZm9ybVwiLFwidHJhbnNsYXRlWChcIisoZS1iLm1lbnVXaWR0aCkrXCJweClcIik7ZWxzZXtlPHdpbmRvdy5pbm5lcldpZHRoLWIubWVudVdpZHRoLzI/aD0hMDplPj13aW5kb3cuaW5uZXJXaWR0aC1iLm1lbnVXaWR0aC8yJiYoaD0hMSk7dmFyIGs9ZS1iLm1lbnVXaWR0aC8yOzA+ayYmKGs9MCksZC5jc3MoXCJ0cmFuc2Zvcm1cIixcInRyYW5zbGF0ZVgoXCIraytcInB4KVwiKX12YXIgbDtcImxlZnRcIj09PWIuZWRnZT8obD1lL2IubWVudVdpZHRoLGkudmVsb2NpdHkoe29wYWNpdHk6bH0se2R1cmF0aW9uOjEwLHF1ZXVlOiExLGVhc2luZzpcImVhc2VPdXRRdWFkXCJ9KSk6KGw9TWF0aC5hYnMoKGUtd2luZG93LmlubmVyV2lkdGgpL2IubWVudVdpZHRoKSxpLnZlbG9jaXR5KHtvcGFjaXR5Omx9LHtkdXJhdGlvbjoxMCxxdWV1ZTohMSxlYXNpbmc6XCJlYXNlT3V0UXVhZFwifSkpfX0pLmJpbmQoXCJwYW5lbmRcIixmdW5jdGlvbihjKXtpZihcInRvdWNoXCI9PWMuZ2VzdHVyZS5wb2ludGVyVHlwZSl7dmFyIGY9YSgnPGRpdiBpZD1cInNpZGVuYXYtb3ZlcmxheVwiPjwvZGl2PicpLGk9Yy5nZXN0dXJlLnZlbG9jaXR5WCxqPWMuZ2VzdHVyZS5jZW50ZXIueCxrPWotYi5tZW51V2lkdGgsbD1qLWIubWVudVdpZHRoLzI7az4wJiYoaz0wKSwwPmwmJihsPTApLGc9ITEsXCJsZWZ0XCI9PT1iLmVkZ2U/aCYmLjM+PWl8fC0uNT5pPygwIT09ayYmZC52ZWxvY2l0eSh7dHJhbnNsYXRlWDpbMCxrXX0se2R1cmF0aW9uOjMwMCxxdWV1ZTohMSxlYXNpbmc6XCJlYXNlT3V0UXVhZFwifSksZi52ZWxvY2l0eSh7b3BhY2l0eToxfSx7ZHVyYXRpb246NTAscXVldWU6ITEsZWFzaW5nOlwiZWFzZU91dFF1YWRcIn0pLGUuY3NzKHt3aWR0aDpcIjUwJVwiLHJpZ2h0OjAsbGVmdDpcIlwifSksaD0hMCk6KCFofHxpPi4zKSYmKGEoXCJib2R5XCIpLmNzcyh7b3ZlcmZsb3c6XCJcIix3aWR0aDpcIlwifSksZC52ZWxvY2l0eSh7dHJhbnNsYXRlWDpbLTEqYi5tZW51V2lkdGgtMTAsa119LHtkdXJhdGlvbjoyMDAscXVldWU6ITEsZWFzaW5nOlwiZWFzZU91dFF1YWRcIn0pLGYudmVsb2NpdHkoe29wYWNpdHk6MH0se2R1cmF0aW9uOjIwMCxxdWV1ZTohMSxlYXNpbmc6XCJlYXNlT3V0UXVhZFwiLGNvbXBsZXRlOmZ1bmN0aW9uKCl7YSh0aGlzKS5yZW1vdmUoKX19KSxlLmNzcyh7d2lkdGg6XCIxMHB4XCIscmlnaHQ6XCJcIixsZWZ0OjB9KSk6aCYmaT49LS4zfHxpPi41PygwIT09bCYmZC52ZWxvY2l0eSh7dHJhbnNsYXRlWDpbMCxsXX0se2R1cmF0aW9uOjMwMCxxdWV1ZTohMSxlYXNpbmc6XCJlYXNlT3V0UXVhZFwifSksZi52ZWxvY2l0eSh7b3BhY2l0eToxfSx7ZHVyYXRpb246NTAscXVldWU6ITEsZWFzaW5nOlwiZWFzZU91dFF1YWRcIn0pLGUuY3NzKHt3aWR0aDpcIjUwJVwiLHJpZ2h0OlwiXCIsbGVmdDowfSksaD0hMCk6KCFofHwtLjM+aSkmJihhKFwiYm9keVwiKS5jc3Moe292ZXJmbG93OlwiXCIsd2lkdGg6XCJcIn0pLGQudmVsb2NpdHkoe3RyYW5zbGF0ZVg6W2IubWVudVdpZHRoKzEwLGxdfSx7ZHVyYXRpb246MjAwLHF1ZXVlOiExLGVhc2luZzpcImVhc2VPdXRRdWFkXCJ9KSxmLnZlbG9jaXR5KHtvcGFjaXR5OjB9LHtkdXJhdGlvbjoyMDAscXVldWU6ITEsZWFzaW5nOlwiZWFzZU91dFF1YWRcIixjb21wbGV0ZTpmdW5jdGlvbigpe2EodGhpcykucmVtb3ZlKCl9fSksZS5jc3Moe3dpZHRoOlwiMTBweFwiLHJpZ2h0OjAsbGVmdDpcIlwifSkpfX0pKSxjLmNsaWNrKGZ1bmN0aW9uKCl7aWYoaD09PSEwKWg9ITEsZz0hMSxmKCk7ZWxzZXt2YXIgYz1hKFwiYm9keVwiKSxpPWEoJzxkaXYgaWQ9XCJzaWRlbmF2LW92ZXJsYXlcIj48L2Rpdj4nKSxqPWMuaW5uZXJXaWR0aCgpO2MuY3NzKFwib3ZlcmZsb3dcIixcImhpZGRlblwiKSxjLndpZHRoKGopLGEoXCJib2R5XCIpLmFwcGVuZChlKSxcImxlZnRcIj09PWIuZWRnZT8oZS5jc3Moe3dpZHRoOlwiNTAlXCIscmlnaHQ6MCxsZWZ0OlwiXCJ9KSxkLnZlbG9jaXR5KHt0cmFuc2xhdGVYOlswLC0xKmIubWVudVdpZHRoXX0se2R1cmF0aW9uOjMwMCxxdWV1ZTohMSxlYXNpbmc6XCJlYXNlT3V0UXVhZFwifSkpOihlLmNzcyh7d2lkdGg6XCI1MCVcIixyaWdodDpcIlwiLGxlZnQ6MH0pLGQudmVsb2NpdHkoe3RyYW5zbGF0ZVg6WzAsYi5tZW51V2lkdGhdfSx7ZHVyYXRpb246MzAwLHF1ZXVlOiExLGVhc2luZzpcImVhc2VPdXRRdWFkXCJ9KSksaS5jc3MoXCJvcGFjaXR5XCIsMCkuY2xpY2soZnVuY3Rpb24oKXtoPSExLGc9ITEsZigpLGkudmVsb2NpdHkoe29wYWNpdHk6MH0se2R1cmF0aW9uOjMwMCxxdWV1ZTohMSxlYXNpbmc6XCJlYXNlT3V0UXVhZFwiLGNvbXBsZXRlOmZ1bmN0aW9uKCl7YSh0aGlzKS5yZW1vdmUoKX19KX0pLGEoXCJib2R5XCIpLmFwcGVuZChpKSxpLnZlbG9jaXR5KHtvcGFjaXR5OjF9LHtkdXJhdGlvbjozMDAscXVldWU6ITEsZWFzaW5nOlwiZWFzZU91dFF1YWRcIixjb21wbGV0ZTpmdW5jdGlvbigpe2g9ITAsZz0hMX19KX1yZXR1cm4hMX0pfSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgYj1hKFwiI3NpZGVuYXYtb3ZlcmxheVwiKSxjPWEoJy5kcmFnLXRhcmdldFtkYXRhLXNpZGVuYXY9XCInK2EodGhpcykuYXR0cihcImRhdGEtYWN0aXZhdGVzXCIpKydcIl0nKTtiLnRyaWdnZXIoXCJjbGlja1wiKSxjLnJlbW92ZSgpLGEodGhpcykub2ZmKFwiY2xpY2tcIiksYi5yZW1vdmUoKX0sc2hvdzpmdW5jdGlvbigpe3RoaXMudHJpZ2dlcihcImNsaWNrXCIpfSxoaWRlOmZ1bmN0aW9uKCl7YShcIiNzaWRlbmF2LW92ZXJsYXlcIikudHJpZ2dlcihcImNsaWNrXCIpfX07YS5mbi5zaWRlTmF2PWZ1bmN0aW9uKGMpe3JldHVybiBiW2NdP2JbY10uYXBwbHkodGhpcyxBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSkpOlwib2JqZWN0XCIhPXR5cGVvZiBjJiZjP3ZvaWQgYS5lcnJvcihcIk1ldGhvZCBcIitjK1wiIGRvZXMgbm90IGV4aXN0IG9uIGpRdWVyeS5zaWRlTmF2XCIpOmIuaW5pdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fShqUXVlcnkpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYixjLGQsZSl7dmFyIGY9YSgpO3JldHVybiBhLmVhY2goZyxmdW5jdGlvbihhLGcpe2lmKGcuaGVpZ2h0KCk+MCl7dmFyIGg9Zy5vZmZzZXQoKS50b3AsaT1nLm9mZnNldCgpLmxlZnQsaj1pK2cud2lkdGgoKSxrPWgrZy5oZWlnaHQoKSxsPSEoaT5jfHxlPmp8fGg+ZHx8Yj5rKTtsJiZmLnB1c2goZyl9fSksZn1mdW5jdGlvbiBjKGMpeysrajt2YXIgZD1mLnNjcm9sbFRvcCgpLGU9Zi5zY3JvbGxMZWZ0KCksZz1lK2Yud2lkdGgoKSxpPWQrZi5oZWlnaHQoKSxsPWIoZCtrLnRvcCtjfHwyMDAsZytrLnJpZ2h0LGkray5ib3R0b20sZStrLmxlZnQpO2EuZWFjaChsLGZ1bmN0aW9uKGEsYil7dmFyIGM9Yi5kYXRhKFwic2Nyb2xsU3B5OnRpY2tzXCIpO1wibnVtYmVyXCIhPXR5cGVvZiBjJiZiLnRyaWdnZXJIYW5kbGVyKFwic2Nyb2xsU3B5OmVudGVyXCIpLGIuZGF0YShcInNjcm9sbFNweTp0aWNrc1wiLGopfSksYS5lYWNoKGgsZnVuY3Rpb24oYSxiKXt2YXIgYz1iLmRhdGEoXCJzY3JvbGxTcHk6dGlja3NcIik7XCJudW1iZXJcIj09dHlwZW9mIGMmJmMhPT1qJiYoYi50cmlnZ2VySGFuZGxlcihcInNjcm9sbFNweTpleGl0XCIpLGIuZGF0YShcInNjcm9sbFNweTp0aWNrc1wiLG51bGwpKX0pLGg9bH1mdW5jdGlvbiBkKCl7Zi50cmlnZ2VyKFwic2Nyb2xsU3B5OndpblNpemVcIil9ZnVuY3Rpb24gZShhLGIsYyl7dmFyIGQsZSxmLGc9bnVsbCxoPTA7Y3x8KGM9e30pO3ZhciBpPWZ1bmN0aW9uKCl7aD1jLmxlYWRpbmc9PT0hMT8wOmwoKSxnPW51bGwsZj1hLmFwcGx5KGQsZSksZD1lPW51bGx9O3JldHVybiBmdW5jdGlvbigpe3ZhciBqPWwoKTtofHxjLmxlYWRpbmchPT0hMXx8KGg9aik7dmFyIGs9Yi0oai1oKTtyZXR1cm4gZD10aGlzLGU9YXJndW1lbnRzLDA+PWs/KGNsZWFyVGltZW91dChnKSxnPW51bGwsaD1qLGY9YS5hcHBseShkLGUpLGQ9ZT1udWxsKTpnfHxjLnRyYWlsaW5nPT09ITF8fChnPXNldFRpbWVvdXQoaSxrKSksZn19dmFyIGY9YSh3aW5kb3cpLGc9W10saD1bXSxpPSExLGo9MCxrPXt0b3A6MCxyaWdodDowLGJvdHRvbTowLGxlZnQ6MH0sbD1EYXRlLm5vd3x8ZnVuY3Rpb24oKXtyZXR1cm4obmV3IERhdGUpLmdldFRpbWUoKX07YS5zY3JvbGxTcHk9ZnVuY3Rpb24oYixkKXt2YXIgaD17dGhyb3R0bGU6MTAwLHNjcm9sbE9mZnNldDoyMDB9O2Q9YS5leHRlbmQoaCxkKTt2YXIgaj1bXTtiPWEoYiksYi5lYWNoKGZ1bmN0aW9uKGIsYyl7Zy5wdXNoKGEoYykpLGEoYykuZGF0YShcInNjcm9sbFNweTppZFwiLGIpLGEoJ2FbaHJlZj1cIiMnK2EoYykuYXR0cihcImlkXCIpKydcIl0nKS5jbGljayhmdW5jdGlvbihiKXtiLnByZXZlbnREZWZhdWx0KCk7dmFyIGM9YShNYXRlcmlhbGl6ZS5lc2NhcGVIYXNoKHRoaXMuaGFzaCkpLm9mZnNldCgpLnRvcCsxO2EoXCJodG1sLCBib2R5XCIpLmFuaW1hdGUoe3Njcm9sbFRvcDpjLWQuc2Nyb2xsT2Zmc2V0fSx7ZHVyYXRpb246NDAwLHF1ZXVlOiExLGVhc2luZzpcImVhc2VPdXRDdWJpY1wifSl9KX0pLGsudG9wPWQub2Zmc2V0VG9wfHwwLGsucmlnaHQ9ZC5vZmZzZXRSaWdodHx8MCxrLmJvdHRvbT1kLm9mZnNldEJvdHRvbXx8MCxrLmxlZnQ9ZC5vZmZzZXRMZWZ0fHwwO3ZhciBsPWUoZnVuY3Rpb24oKXtjKGQuc2Nyb2xsT2Zmc2V0KX0sZC50aHJvdHRsZXx8MTAwKSxtPWZ1bmN0aW9uKCl7YShkb2N1bWVudCkucmVhZHkobCl9O3JldHVybiBpfHwoZi5vbihcInNjcm9sbFwiLG0pLGYub24oXCJyZXNpemVcIixtKSxpPSEwKSxzZXRUaW1lb3V0KG0sMCksYi5vbihcInNjcm9sbFNweTplbnRlclwiLGZ1bmN0aW9uKCl7aj1hLmdyZXAoaixmdW5jdGlvbihhKXtyZXR1cm4gMCE9YS5oZWlnaHQoKX0pO3ZhciBiPWEodGhpcyk7alswXT8oYSgnYVtocmVmPVwiIycralswXS5hdHRyKFwiaWRcIikrJ1wiXScpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpLGIuZGF0YShcInNjcm9sbFNweTppZFwiKTxqWzBdLmRhdGEoXCJzY3JvbGxTcHk6aWRcIik/ai51bnNoaWZ0KGEodGhpcykpOmoucHVzaChhKHRoaXMpKSk6ai5wdXNoKGEodGhpcykpLGEoJ2FbaHJlZj1cIiMnK2pbMF0uYXR0cihcImlkXCIpKydcIl0nKS5hZGRDbGFzcyhcImFjdGl2ZVwiKX0pLGIub24oXCJzY3JvbGxTcHk6ZXhpdFwiLGZ1bmN0aW9uKCl7aWYoaj1hLmdyZXAoaixmdW5jdGlvbihhKXtyZXR1cm4gMCE9YS5oZWlnaHQoKX0pLGpbMF0pe2EoJ2FbaHJlZj1cIiMnK2pbMF0uYXR0cihcImlkXCIpKydcIl0nKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTt2YXIgYj1hKHRoaXMpO2o9YS5ncmVwKGosZnVuY3Rpb24oYSl7cmV0dXJuIGEuYXR0cihcImlkXCIpIT1iLmF0dHIoXCJpZFwiKX0pLGpbMF0mJmEoJ2FbaHJlZj1cIiMnK2pbMF0uYXR0cihcImlkXCIpKydcIl0nKS5hZGRDbGFzcyhcImFjdGl2ZVwiKX19KSxifSxhLndpblNpemVTcHk9ZnVuY3Rpb24oYil7cmV0dXJuIGEud2luU2l6ZVNweT1mdW5jdGlvbigpe3JldHVybiBmfSxiPWJ8fHt0aHJvdHRsZToxMDB9LGYub24oXCJyZXNpemVcIixlKGQsYi50aHJvdHRsZXx8MTAwKSl9LGEuZm4uc2Nyb2xsU3B5PWZ1bmN0aW9uKGIpe3JldHVybiBhLnNjcm9sbFNweShhKHRoaXMpLGIpfX0oalF1ZXJ5KSxmdW5jdGlvbihhKXthKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe2Z1bmN0aW9uIGIoYil7dmFyIGM9Yi5jc3MoXCJmb250LWZhbWlseVwiKSxkPWIuY3NzKFwiZm9udC1zaXplXCIpLGY9Yi5jc3MoXCJsaW5lLWhlaWdodFwiKTtkJiZlLmNzcyhcImZvbnQtc2l6ZVwiLGQpLGMmJmUuY3NzKFwiZm9udC1mYW1pbHlcIixjKSxmJiZlLmNzcyhcImxpbmUtaGVpZ2h0XCIsZiksXCJvZmZcIj09PWIuYXR0cihcIndyYXBcIikmJmUuY3NzKFwib3ZlcmZsb3ctd3JhcFwiLFwibm9ybWFsXCIpLmNzcyhcIndoaXRlLXNwYWNlXCIsXCJwcmVcIiksZS50ZXh0KGIudmFsKCkrXCJcXG5cIik7dmFyIGc9ZS5odG1sKCkucmVwbGFjZSgvXFxuL2csXCI8YnI+XCIpO2UuaHRtbChnKSxiLmlzKFwiOnZpc2libGVcIik/ZS5jc3MoXCJ3aWR0aFwiLGIud2lkdGgoKSk6ZS5jc3MoXCJ3aWR0aFwiLGEod2luZG93KS53aWR0aCgpLzIpLGIuY3NzKFwiaGVpZ2h0XCIsZS5oZWlnaHQoKSl9TWF0ZXJpYWxpemUudXBkYXRlVGV4dEZpZWxkcz1mdW5jdGlvbigpe3ZhciBiPVwiaW5wdXRbdHlwZT10ZXh0XSwgaW5wdXRbdHlwZT1wYXNzd29yZF0sIGlucHV0W3R5cGU9ZW1haWxdLCBpbnB1dFt0eXBlPXVybF0sIGlucHV0W3R5cGU9dGVsXSwgaW5wdXRbdHlwZT1udW1iZXJdLCBpbnB1dFt0eXBlPXNlYXJjaF0sIHRleHRhcmVhXCI7YShiKS5lYWNoKGZ1bmN0aW9uKGIsYyl7YShjKS52YWwoKS5sZW5ndGg+MHx8Yy5hdXRvZm9jdXN8fHZvaWQgMCE9PWEodGhpcykuYXR0cihcInBsYWNlaG9sZGVyXCIpfHxhKGMpWzBdLnZhbGlkaXR5LmJhZElucHV0PT09ITA/YSh0aGlzKS5zaWJsaW5ncyhcImxhYmVsXCIpLmFkZENsYXNzKFwiYWN0aXZlXCIpOmEodGhpcykuc2libGluZ3MoXCJsYWJlbFwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKX0pfTt2YXIgYz1cImlucHV0W3R5cGU9dGV4dF0sIGlucHV0W3R5cGU9cGFzc3dvcmRdLCBpbnB1dFt0eXBlPWVtYWlsXSwgaW5wdXRbdHlwZT11cmxdLCBpbnB1dFt0eXBlPXRlbF0sIGlucHV0W3R5cGU9bnVtYmVyXSwgaW5wdXRbdHlwZT1zZWFyY2hdLCB0ZXh0YXJlYVwiO2EoZG9jdW1lbnQpLm9uKFwiY2hhbmdlXCIsYyxmdW5jdGlvbigpeygwIT09YSh0aGlzKS52YWwoKS5sZW5ndGh8fHZvaWQgMCE9PWEodGhpcykuYXR0cihcInBsYWNlaG9sZGVyXCIpKSYmYSh0aGlzKS5zaWJsaW5ncyhcImxhYmVsXCIpLmFkZENsYXNzKFwiYWN0aXZlXCIpLHZhbGlkYXRlX2ZpZWxkKGEodGhpcykpfSksYShkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXtNYXRlcmlhbGl6ZS51cGRhdGVUZXh0RmllbGRzKCl9KSxhKGRvY3VtZW50KS5vbihcInJlc2V0XCIsZnVuY3Rpb24oYil7dmFyIGQ9YShiLnRhcmdldCk7ZC5pcyhcImZvcm1cIikmJihkLmZpbmQoYykucmVtb3ZlQ2xhc3MoXCJ2YWxpZFwiKS5yZW1vdmVDbGFzcyhcImludmFsaWRcIiksZC5maW5kKGMpLmVhY2goZnVuY3Rpb24oKXtcIlwiPT09YSh0aGlzKS5hdHRyKFwidmFsdWVcIikmJmEodGhpcykuc2libGluZ3MoXCJsYWJlbFwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKX0pLGQuZmluZChcInNlbGVjdC5pbml0aWFsaXplZFwiKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGE9ZC5maW5kKFwib3B0aW9uW3NlbGVjdGVkXVwiKS50ZXh0KCk7ZC5zaWJsaW5ncyhcImlucHV0LnNlbGVjdC1kcm9wZG93blwiKS52YWwoYSl9KSl9KSxhKGRvY3VtZW50KS5vbihcImZvY3VzXCIsYyxmdW5jdGlvbigpe2EodGhpcykuc2libGluZ3MoXCJsYWJlbCwgLnByZWZpeFwiKS5hZGRDbGFzcyhcImFjdGl2ZVwiKX0pLGEoZG9jdW1lbnQpLm9uKFwiYmx1clwiLGMsZnVuY3Rpb24oKXt2YXIgYj1hKHRoaXMpLGM9XCIucHJlZml4XCI7MD09PWIudmFsKCkubGVuZ3RoJiZiWzBdLnZhbGlkaXR5LmJhZElucHV0IT09ITAmJnZvaWQgMD09PWIuYXR0cihcInBsYWNlaG9sZGVyXCIpJiYoYys9XCIsIGxhYmVsXCIpLGIuc2libGluZ3MoYykucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIiksdmFsaWRhdGVfZmllbGQoYil9KSx3aW5kb3cudmFsaWRhdGVfZmllbGQ9ZnVuY3Rpb24oYSl7dmFyIGI9dm9pZCAwIT09YS5hdHRyKFwibGVuZ3RoXCIpLGM9cGFyc2VJbnQoYS5hdHRyKFwibGVuZ3RoXCIpKSxkPWEudmFsKCkubGVuZ3RoOzA9PT1hLnZhbCgpLmxlbmd0aCYmYVswXS52YWxpZGl0eS5iYWRJbnB1dD09PSExP2EuaGFzQ2xhc3MoXCJ2YWxpZGF0ZVwiKSYmKGEucmVtb3ZlQ2xhc3MoXCJ2YWxpZFwiKSxhLnJlbW92ZUNsYXNzKFwiaW52YWxpZFwiKSk6YS5oYXNDbGFzcyhcInZhbGlkYXRlXCIpJiYoYS5pcyhcIjp2YWxpZFwiKSYmYiYmYz49ZHx8YS5pcyhcIjp2YWxpZFwiKSYmIWI/KGEucmVtb3ZlQ2xhc3MoXCJpbnZhbGlkXCIpLGEuYWRkQ2xhc3MoXCJ2YWxpZFwiKSk6KGEucmVtb3ZlQ2xhc3MoXCJ2YWxpZFwiKSxhLmFkZENsYXNzKFwiaW52YWxpZFwiKSkpfTt2YXIgZD1cImlucHV0W3R5cGU9cmFkaW9dLCBpbnB1dFt0eXBlPWNoZWNrYm94XVwiO2EoZG9jdW1lbnQpLm9uKFwia2V5dXAucmFkaW9cIixkLGZ1bmN0aW9uKGIpe2lmKDk9PT1iLndoaWNoKXthKHRoaXMpLmFkZENsYXNzKFwidGFiYmVkXCIpO3ZhciBjPWEodGhpcyk7cmV0dXJuIHZvaWQgYy5vbmUoXCJibHVyXCIsZnVuY3Rpb24oYil7YSh0aGlzKS5yZW1vdmVDbGFzcyhcInRhYmJlZFwiKX0pfX0pO3ZhciBlPWEoXCIuaGlkZGVuZGl2XCIpLmZpcnN0KCk7ZS5sZW5ndGh8fChlPWEoJzxkaXYgY2xhc3M9XCJoaWRkZW5kaXYgY29tbW9uXCI+PC9kaXY+JyksYShcImJvZHlcIikuYXBwZW5kKGUpKTt2YXIgZj1cIi5tYXRlcmlhbGl6ZS10ZXh0YXJlYVwiO2EoZikuZWFjaChmdW5jdGlvbigpe3ZhciBjPWEodGhpcyk7Yy52YWwoKS5sZW5ndGgmJmIoYyl9KSxhKFwiYm9keVwiKS5vbihcImtleXVwIGtleWRvd24gYXV0b3Jlc2l6ZVwiLGYsZnVuY3Rpb24oKXtiKGEodGhpcykpfSksYShkb2N1bWVudCkub24oXCJjaGFuZ2VcIiwnLmZpbGUtZmllbGQgaW5wdXRbdHlwZT1cImZpbGVcIl0nLGZ1bmN0aW9uKCl7Zm9yKHZhciBiPWEodGhpcykuY2xvc2VzdChcIi5maWxlLWZpZWxkXCIpLGM9Yi5maW5kKFwiaW5wdXQuZmlsZS1wYXRoXCIpLGQ9YSh0aGlzKVswXS5maWxlcyxlPVtdLGY9MDtmPGQubGVuZ3RoO2YrKyllLnB1c2goZFtmXS5uYW1lKTtjLnZhbChlLmpvaW4oXCIsIFwiKSksYy50cmlnZ2VyKFwiY2hhbmdlXCIpfSk7dmFyIGcsaD1cImlucHV0W3R5cGU9cmFuZ2VdXCIsaT0hMTthKGgpLmVhY2goZnVuY3Rpb24oKXt2YXIgYj1hKCc8c3BhbiBjbGFzcz1cInRodW1iXCI+PHNwYW4gY2xhc3M9XCJ2YWx1ZVwiPjwvc3Bhbj48L3NwYW4+Jyk7YSh0aGlzKS5hZnRlcihiKX0pO3ZhciBqPVwiLnJhbmdlLWZpZWxkXCI7YShkb2N1bWVudCkub24oXCJjaGFuZ2VcIixoLGZ1bmN0aW9uKGIpe3ZhciBjPWEodGhpcykuc2libGluZ3MoXCIudGh1bWJcIik7Yy5maW5kKFwiLnZhbHVlXCIpLmh0bWwoYSh0aGlzKS52YWwoKSl9KSxhKGRvY3VtZW50KS5vbihcImlucHV0IG1vdXNlZG93biB0b3VjaHN0YXJ0XCIsaCxmdW5jdGlvbihiKXt2YXIgYz1hKHRoaXMpLnNpYmxpbmdzKFwiLnRodW1iXCIpLGQ9YSh0aGlzKS5vdXRlcldpZHRoKCk7Yy5sZW5ndGg8PTAmJihjPWEoJzxzcGFuIGNsYXNzPVwidGh1bWJcIj48c3BhbiBjbGFzcz1cInZhbHVlXCI+PC9zcGFuPjwvc3Bhbj4nKSxhKHRoaXMpLmFmdGVyKGMpKSxjLmZpbmQoXCIudmFsdWVcIikuaHRtbChhKHRoaXMpLnZhbCgpKSxpPSEwLGEodGhpcykuYWRkQ2xhc3MoXCJhY3RpdmVcIiksYy5oYXNDbGFzcyhcImFjdGl2ZVwiKXx8Yy52ZWxvY2l0eSh7aGVpZ2h0OlwiMzBweFwiLHdpZHRoOlwiMzBweFwiLHRvcDpcIi0yMHB4XCIsbWFyZ2luTGVmdDpcIi0xNXB4XCJ9LHtkdXJhdGlvbjozMDAsZWFzaW5nOlwiZWFzZU91dEV4cG9cIn0pLFwiaW5wdXRcIiE9PWIudHlwZSYmKGc9dm9pZCAwPT09Yi5wYWdlWHx8bnVsbD09PWIucGFnZVg/Yi5vcmlnaW5hbEV2ZW50LnRvdWNoZXNbMF0ucGFnZVgtYSh0aGlzKS5vZmZzZXQoKS5sZWZ0OmIucGFnZVgtYSh0aGlzKS5vZmZzZXQoKS5sZWZ0LDA+Zz9nPTA6Zz5kJiYoZz1kKSxjLmFkZENsYXNzKFwiYWN0aXZlXCIpLmNzcyhcImxlZnRcIixnKSksYy5maW5kKFwiLnZhbHVlXCIpLmh0bWwoYSh0aGlzKS52YWwoKSl9KSxhKGRvY3VtZW50KS5vbihcIm1vdXNldXAgdG91Y2hlbmRcIixqLGZ1bmN0aW9uKCl7aT0hMSxhKHRoaXMpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpfSksYShkb2N1bWVudCkub24oXCJtb3VzZW1vdmUgdG91Y2htb3ZlXCIsaixmdW5jdGlvbihiKXt2YXIgYyxkPWEodGhpcykuY2hpbGRyZW4oXCIudGh1bWJcIik7aWYoaSl7ZC5oYXNDbGFzcyhcImFjdGl2ZVwiKXx8ZC52ZWxvY2l0eSh7aGVpZ2h0OlwiMzBweFwiLHdpZHRoOlwiMzBweFwiLHRvcDpcIi0yMHB4XCIsbWFyZ2luTGVmdDpcIi0xNXB4XCJ9LHtkdXJhdGlvbjozMDAsZWFzaW5nOlwiZWFzZU91dEV4cG9cIn0pLGM9dm9pZCAwPT09Yi5wYWdlWHx8bnVsbD09PWIucGFnZVg/Yi5vcmlnaW5hbEV2ZW50LnRvdWNoZXNbMF0ucGFnZVgtYSh0aGlzKS5vZmZzZXQoKS5sZWZ0OmIucGFnZVgtYSh0aGlzKS5vZmZzZXQoKS5sZWZ0O3ZhciBlPWEodGhpcykub3V0ZXJXaWR0aCgpOzA+Yz9jPTA6Yz5lJiYoYz1lKSxkLmFkZENsYXNzKFwiYWN0aXZlXCIpLmNzcyhcImxlZnRcIixjKSxkLmZpbmQoXCIudmFsdWVcIikuaHRtbChkLnNpYmxpbmdzKGgpLnZhbCgpKX19KSxhKGRvY3VtZW50KS5vbihcIm1vdXNlb3V0IHRvdWNobGVhdmVcIixqLGZ1bmN0aW9uKCl7aWYoIWkpe3ZhciBiPWEodGhpcykuY2hpbGRyZW4oXCIudGh1bWJcIik7Yi5oYXNDbGFzcyhcImFjdGl2ZVwiKSYmYi52ZWxvY2l0eSh7aGVpZ2h0OlwiMFwiLHdpZHRoOlwiMFwiLHRvcDpcIjEwcHhcIixtYXJnaW5MZWZ0OlwiLTZweFwifSx7ZHVyYXRpb246MTAwfSksYi5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKX19KSxhLmZuLmF1dG9jb21wbGV0ZT1mdW5jdGlvbihiKXt2YXIgYz17ZGF0YTp7fX07cmV0dXJuIGI9YS5leHRlbmQoYyxiKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYz1hKHRoaXMpLGQ9Yi5kYXRhLGU9Yy5jbG9zZXN0KFwiLmlucHV0LWZpZWxkXCIpO2lmKCFhLmlzRW1wdHlPYmplY3QoZCkpe3ZhciBmPWEoJzx1bCBjbGFzcz1cImF1dG9jb21wbGV0ZS1jb250ZW50IGRyb3Bkb3duLWNvbnRlbnRcIj48L3VsPicpO2UubGVuZ3RoP2UuYXBwZW5kKGYpOmMuYWZ0ZXIoZik7dmFyIGc9ZnVuY3Rpb24oYSxiKXt2YXIgYz1iLmZpbmQoXCJpbWdcIiksZD1iLnRleHQoKS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXCJcIithLnRvTG93ZXJDYXNlKCkpLGU9ZCthLmxlbmd0aC0xLGY9Yi50ZXh0KCkuc2xpY2UoMCxkKSxnPWIudGV4dCgpLnNsaWNlKGQsZSsxKSxoPWIudGV4dCgpLnNsaWNlKGUrMSk7Yi5odG1sKFwiPHNwYW4+XCIrZitcIjxzcGFuIGNsYXNzPSdoaWdobGlnaHQnPlwiK2crXCI8L3NwYW4+XCIraCtcIjwvc3Bhbj5cIiksYy5sZW5ndGgmJmIucHJlcGVuZChjKX07Yy5vbihcImtleXVwXCIsZnVuY3Rpb24oYil7aWYoMTM9PT1iLndoaWNoKXJldHVybiB2b2lkIGYuZmluZChcImxpXCIpLmZpcnN0KCkuY2xpY2soKTt2YXIgZT1jLnZhbCgpLnRvTG93ZXJDYXNlKCk7aWYoZi5lbXB0eSgpLFwiXCIhPT1lKWZvcih2YXIgaCBpbiBkKWlmKGQuaGFzT3duUHJvcGVydHkoaCkmJi0xIT09aC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoZSkmJmgudG9Mb3dlckNhc2UoKSE9PWUpe3ZhciBpPWEoXCI8bGk+PC9saT5cIik7ZFtoXT9pLmFwcGVuZCgnPGltZyBzcmM9XCInK2RbaF0rJ1wiIGNsYXNzPVwicmlnaHQgY2lyY2xlXCI+PHNwYW4+JytoK1wiPC9zcGFuPlwiKTppLmFwcGVuZChcIjxzcGFuPlwiK2grXCI8L3NwYW4+XCIpLGYuYXBwZW5kKGkpLGcoZSxpKX19KSxmLm9uKFwiY2xpY2tcIixcImxpXCIsZnVuY3Rpb24oKXtjLnZhbChhKHRoaXMpLnRleHQoKS50cmltKCkpLGMudHJpZ2dlcihcImNoYW5nZVwiKSxmLmVtcHR5KCl9KX19KX19KSxhLmZuLm1hdGVyaWFsX3NlbGVjdD1mdW5jdGlvbihiKXtmdW5jdGlvbiBjKGEsYixjKXt2YXIgZT1hLmluZGV4T2YoYiksZj0tMT09PWU7cmV0dXJuIGY/YS5wdXNoKGIpOmEuc3BsaWNlKGUsMSksYy5zaWJsaW5ncyhcInVsLmRyb3Bkb3duLWNvbnRlbnRcIikuZmluZChcImxpXCIpLmVxKGIpLnRvZ2dsZUNsYXNzKFwiYWN0aXZlXCIpLGMuZmluZChcIm9wdGlvblwiKS5lcShiKS5wcm9wKFwic2VsZWN0ZWRcIixmKSxkKGEsYyksZn1mdW5jdGlvbiBkKGEsYil7Zm9yKHZhciBjPVwiXCIsZD0wLGU9YS5sZW5ndGg7ZT5kO2QrKyl7dmFyIGY9Yi5maW5kKFwib3B0aW9uXCIpLmVxKGFbZF0pLnRleHQoKTtjKz0wPT09ZD9mOlwiLCBcIitmfVwiXCI9PT1jJiYoYz1iLmZpbmQoXCJvcHRpb246ZGlzYWJsZWRcIikuZXEoMCkudGV4dCgpKSxiLnNpYmxpbmdzKFwiaW5wdXQuc2VsZWN0LWRyb3Bkb3duXCIpLnZhbChjKX1hKHRoaXMpLmVhY2goZnVuY3Rpb24oKXt2YXIgZD1hKHRoaXMpO2lmKCFkLmhhc0NsYXNzKFwiYnJvd3Nlci1kZWZhdWx0XCIpKXt2YXIgZT1kLmF0dHIoXCJtdWx0aXBsZVwiKT8hMDohMSxmPWQuZGF0YShcInNlbGVjdC1pZFwiKTtpZihmJiYoZC5wYXJlbnQoKS5maW5kKFwic3Bhbi5jYXJldFwiKS5yZW1vdmUoKSxkLnBhcmVudCgpLmZpbmQoXCJpbnB1dFwiKS5yZW1vdmUoKSxkLnVud3JhcCgpLGEoXCJ1bCNzZWxlY3Qtb3B0aW9ucy1cIitmKS5yZW1vdmUoKSksXCJkZXN0cm95XCI9PT1iKXJldHVybiB2b2lkIGQuZGF0YShcInNlbGVjdC1pZFwiLG51bGwpLnJlbW92ZUNsYXNzKFwiaW5pdGlhbGl6ZWRcIik7dmFyIGc9TWF0ZXJpYWxpemUuZ3VpZCgpO2QuZGF0YShcInNlbGVjdC1pZFwiLGcpO3ZhciBoPWEoJzxkaXYgY2xhc3M9XCJzZWxlY3Qtd3JhcHBlclwiPjwvZGl2PicpO2guYWRkQ2xhc3MoZC5hdHRyKFwiY2xhc3NcIikpO3ZhciBpPWEoJzx1bCBpZD1cInNlbGVjdC1vcHRpb25zLScrZysnXCIgY2xhc3M9XCJkcm9wZG93bi1jb250ZW50IHNlbGVjdC1kcm9wZG93biAnKyhlP1wibXVsdGlwbGUtc2VsZWN0LWRyb3Bkb3duXCI6XCJcIikrJ1wiPjwvdWw+Jyksaj1kLmNoaWxkcmVuKFwib3B0aW9uLCBvcHRncm91cFwiKSxrPVtdLGw9ITEsbT1kLmZpbmQoXCJvcHRpb246c2VsZWN0ZWRcIikuaHRtbCgpfHxkLmZpbmQoXCJvcHRpb246Zmlyc3RcIikuaHRtbCgpfHxcIlwiLG49ZnVuY3Rpb24oYixjLGQpe3ZhciBlPWMuaXMoXCI6ZGlzYWJsZWRcIik/XCJkaXNhYmxlZCBcIjpcIlwiLGY9XCJvcHRncm91cC1vcHRpb25cIj09PWQ/XCJvcHRncm91cC1vcHRpb24gXCI6XCJcIixnPWMuZGF0YShcImljb25cIiksaD1jLmF0dHIoXCJjbGFzc1wiKTtpZihnKXt2YXIgaj1cIlwiO3JldHVybiBoJiYoaj0nIGNsYXNzPVwiJytoKydcIicpLFwibXVsdGlwbGVcIj09PWQ/aS5hcHBlbmQoYSgnPGxpIGNsYXNzPVwiJytlKydcIj48aW1nIGFsdD1cIlwiIHNyYz1cIicrZysnXCInK2orJz48c3Bhbj48aW5wdXQgdHlwZT1cImNoZWNrYm94XCInK2UrXCIvPjxsYWJlbD48L2xhYmVsPlwiK2MuaHRtbCgpK1wiPC9zcGFuPjwvbGk+XCIpKTppLmFwcGVuZChhKCc8bGkgY2xhc3M9XCInK2UrZisnXCI+PGltZyBhbHQ9XCJcIiBzcmM9XCInK2crJ1wiJytqK1wiPjxzcGFuPlwiK2MuaHRtbCgpK1wiPC9zcGFuPjwvbGk+XCIpKSwhMH1cIm11bHRpcGxlXCI9PT1kP2kuYXBwZW5kKGEoJzxsaSBjbGFzcz1cIicrZSsnXCI+PHNwYW4+PGlucHV0IHR5cGU9XCJjaGVja2JveFwiJytlK1wiLz48bGFiZWw+PC9sYWJlbD5cIitjLmh0bWwoKStcIjwvc3Bhbj48L2xpPlwiKSk6aS5hcHBlbmQoYSgnPGxpIGNsYXNzPVwiJytlK2YrJ1wiPjxzcGFuPicrYy5odG1sKCkrXCI8L3NwYW4+PC9saT5cIikpfTtqLmxlbmd0aCYmai5lYWNoKGZ1bmN0aW9uKCl7aWYoYSh0aGlzKS5pcyhcIm9wdGlvblwiKSllP24oZCxhKHRoaXMpLFwibXVsdGlwbGVcIik6bihkLGEodGhpcykpO2Vsc2UgaWYoYSh0aGlzKS5pcyhcIm9wdGdyb3VwXCIpKXt2YXIgYj1hKHRoaXMpLmNoaWxkcmVuKFwib3B0aW9uXCIpO2kuYXBwZW5kKGEoJzxsaSBjbGFzcz1cIm9wdGdyb3VwXCI+PHNwYW4+JythKHRoaXMpLmF0dHIoXCJsYWJlbFwiKStcIjwvc3Bhbj48L2xpPlwiKSksYi5lYWNoKGZ1bmN0aW9uKCl7bihkLGEodGhpcyksXCJvcHRncm91cC1vcHRpb25cIil9KX19KSxpLmZpbmQoXCJsaTpub3QoLm9wdGdyb3VwKVwiKS5lYWNoKGZ1bmN0aW9uKGYpe2EodGhpcykuY2xpY2soZnVuY3Rpb24oZyl7aWYoIWEodGhpcykuaGFzQ2xhc3MoXCJkaXNhYmxlZFwiKSYmIWEodGhpcykuaGFzQ2xhc3MoXCJvcHRncm91cFwiKSl7XHJcbnZhciBoPSEwO2U/KGEoJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXScsdGhpcykucHJvcChcImNoZWNrZWRcIixmdW5jdGlvbihhLGIpe3JldHVybiFifSksaD1jKGssYSh0aGlzKS5pbmRleCgpLGQpLHEudHJpZ2dlcihcImZvY3VzXCIpKTooaS5maW5kKFwibGlcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIiksYSh0aGlzKS50b2dnbGVDbGFzcyhcImFjdGl2ZVwiKSxxLnZhbChhKHRoaXMpLnRleHQoKSkpLHIoaSxhKHRoaXMpKSxkLmZpbmQoXCJvcHRpb25cIikuZXEoZikucHJvcChcInNlbGVjdGVkXCIsaCksZC50cmlnZ2VyKFwiY2hhbmdlXCIpLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBiJiZiKCl9Zy5zdG9wUHJvcGFnYXRpb24oKX0pfSksZC53cmFwKGgpO3ZhciBvPWEoJzxzcGFuIGNsYXNzPVwiY2FyZXRcIj4mIzk2NjA7PC9zcGFuPicpO2QuaXMoXCI6ZGlzYWJsZWRcIikmJm8uYWRkQ2xhc3MoXCJkaXNhYmxlZFwiKTt2YXIgcD1tLnJlcGxhY2UoL1wiL2csXCImcXVvdDtcIikscT1hKCc8aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cInNlbGVjdC1kcm9wZG93blwiIHJlYWRvbmx5PVwidHJ1ZVwiICcrKGQuaXMoXCI6ZGlzYWJsZWRcIik/XCJkaXNhYmxlZFwiOlwiXCIpKycgZGF0YS1hY3RpdmF0ZXM9XCJzZWxlY3Qtb3B0aW9ucy0nK2crJ1wiIHZhbHVlPVwiJytwKydcIi8+Jyk7ZC5iZWZvcmUocSkscS5iZWZvcmUobykscS5hZnRlcihpKSxkLmlzKFwiOmRpc2FibGVkXCIpfHxxLmRyb3Bkb3duKHtob3ZlcjohMSxjbG9zZU9uQ2xpY2s6ITF9KSxkLmF0dHIoXCJ0YWJpbmRleFwiKSYmYShxWzBdKS5hdHRyKFwidGFiaW5kZXhcIixkLmF0dHIoXCJ0YWJpbmRleFwiKSksZC5hZGRDbGFzcyhcImluaXRpYWxpemVkXCIpLHEub24oe2ZvY3VzOmZ1bmN0aW9uKCl7aWYoYShcInVsLnNlbGVjdC1kcm9wZG93blwiKS5ub3QoaVswXSkuaXMoXCI6dmlzaWJsZVwiKSYmYShcImlucHV0LnNlbGVjdC1kcm9wZG93blwiKS50cmlnZ2VyKFwiY2xvc2VcIiksIWkuaXMoXCI6dmlzaWJsZVwiKSl7YSh0aGlzKS50cmlnZ2VyKFwib3BlblwiLFtcImZvY3VzXCJdKTt2YXIgYj1hKHRoaXMpLnZhbCgpLGM9aS5maW5kKFwibGlcIikuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuIGEodGhpcykudGV4dCgpLnRvTG93ZXJDYXNlKCk9PT1iLnRvTG93ZXJDYXNlKCl9KVswXTtyKGksYyl9fSxjbGljazpmdW5jdGlvbihhKXthLnN0b3BQcm9wYWdhdGlvbigpfX0pLHEub24oXCJibHVyXCIsZnVuY3Rpb24oKXtlfHxhKHRoaXMpLnRyaWdnZXIoXCJjbG9zZVwiKSxpLmZpbmQoXCJsaS5zZWxlY3RlZFwiKS5yZW1vdmVDbGFzcyhcInNlbGVjdGVkXCIpfSksaS5ob3ZlcihmdW5jdGlvbigpe2w9ITB9LGZ1bmN0aW9uKCl7bD0hMX0pLGEod2luZG93KS5vbih7Y2xpY2s6ZnVuY3Rpb24oKXtlJiYobHx8cS50cmlnZ2VyKFwiY2xvc2VcIikpfX0pLGUmJmQuZmluZChcIm9wdGlvbjpzZWxlY3RlZDpub3QoOmRpc2FibGVkKVwiKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGI9YSh0aGlzKS5pbmRleCgpO2MoayxiLGQpLGkuZmluZChcImxpXCIpLmVxKGIpLmZpbmQoXCI6Y2hlY2tib3hcIikucHJvcChcImNoZWNrZWRcIiwhMCl9KTt2YXIgcj1mdW5jdGlvbihiLGMpe2lmKGMpe2IuZmluZChcImxpLnNlbGVjdGVkXCIpLnJlbW92ZUNsYXNzKFwic2VsZWN0ZWRcIik7dmFyIGQ9YShjKTtkLmFkZENsYXNzKFwic2VsZWN0ZWRcIiksaS5zY3JvbGxUbyhkKX19LHM9W10sdD1mdW5jdGlvbihiKXtpZig5PT1iLndoaWNoKXJldHVybiB2b2lkIHEudHJpZ2dlcihcImNsb3NlXCIpO2lmKDQwPT1iLndoaWNoJiYhaS5pcyhcIjp2aXNpYmxlXCIpKXJldHVybiB2b2lkIHEudHJpZ2dlcihcIm9wZW5cIik7aWYoMTMhPWIud2hpY2h8fGkuaXMoXCI6dmlzaWJsZVwiKSl7Yi5wcmV2ZW50RGVmYXVsdCgpO3ZhciBjPVN0cmluZy5mcm9tQ2hhckNvZGUoYi53aGljaCkudG9Mb3dlckNhc2UoKSxkPVs5LDEzLDI3LDM4LDQwXTtpZihjJiYtMT09PWQuaW5kZXhPZihiLndoaWNoKSl7cy5wdXNoKGMpO3ZhciBmPXMuam9pbihcIlwiKSxnPWkuZmluZChcImxpXCIpLmZpbHRlcihmdW5jdGlvbigpe3JldHVybiAwPT09YSh0aGlzKS50ZXh0KCkudG9Mb3dlckNhc2UoKS5pbmRleE9mKGYpfSlbMF07ZyYmcihpLGcpfWlmKDEzPT1iLndoaWNoKXt2YXIgaD1pLmZpbmQoXCJsaS5zZWxlY3RlZDpub3QoLmRpc2FibGVkKVwiKVswXTtoJiYoYShoKS50cmlnZ2VyKFwiY2xpY2tcIiksZXx8cS50cmlnZ2VyKFwiY2xvc2VcIikpfTQwPT1iLndoaWNoJiYoZz1pLmZpbmQoXCJsaS5zZWxlY3RlZFwiKS5sZW5ndGg/aS5maW5kKFwibGkuc2VsZWN0ZWRcIikubmV4dChcImxpOm5vdCguZGlzYWJsZWQpXCIpWzBdOmkuZmluZChcImxpOm5vdCguZGlzYWJsZWQpXCIpWzBdLHIoaSxnKSksMjc9PWIud2hpY2gmJnEudHJpZ2dlcihcImNsb3NlXCIpLDM4PT1iLndoaWNoJiYoZz1pLmZpbmQoXCJsaS5zZWxlY3RlZFwiKS5wcmV2KFwibGk6bm90KC5kaXNhYmxlZClcIilbMF0sZyYmcihpLGcpKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cz1bXX0sMWUzKX19O3Eub24oXCJrZXlkb3duXCIsdCl9fSl9fShqUXVlcnkpLGZ1bmN0aW9uKGEpe3ZhciBiPXtpbml0OmZ1bmN0aW9uKGIpe3ZhciBjPXtpbmRpY2F0b3JzOiEwLGhlaWdodDo0MDAsdHJhbnNpdGlvbjo1MDAsaW50ZXJ2YWw6NmUzfTtyZXR1cm4gYj1hLmV4dGVuZChjLGIpLHRoaXMuZWFjaChmdW5jdGlvbigpe2Z1bmN0aW9uIGMoYSxiKXthLmhhc0NsYXNzKFwiY2VudGVyLWFsaWduXCIpP2EudmVsb2NpdHkoe29wYWNpdHk6MCx0cmFuc2xhdGVZOi0xMDB9LHtkdXJhdGlvbjpiLHF1ZXVlOiExfSk6YS5oYXNDbGFzcyhcInJpZ2h0LWFsaWduXCIpP2EudmVsb2NpdHkoe29wYWNpdHk6MCx0cmFuc2xhdGVYOjEwMH0se2R1cmF0aW9uOmIscXVldWU6ITF9KTphLmhhc0NsYXNzKFwibGVmdC1hbGlnblwiKSYmYS52ZWxvY2l0eSh7b3BhY2l0eTowLHRyYW5zbGF0ZVg6LTEwMH0se2R1cmF0aW9uOmIscXVldWU6ITF9KX1mdW5jdGlvbiBkKGEpe2E+PWoubGVuZ3RoP2E9MDowPmEmJihhPWoubGVuZ3RoLTEpLGs9aS5maW5kKFwiLmFjdGl2ZVwiKS5pbmRleCgpLGshPWEmJihlPWouZXEoayksJGNhcHRpb249ZS5maW5kKFwiLmNhcHRpb25cIiksZS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKSxlLnZlbG9jaXR5KHtvcGFjaXR5OjB9LHtkdXJhdGlvbjpiLnRyYW5zaXRpb24scXVldWU6ITEsZWFzaW5nOlwiZWFzZU91dFF1YWRcIixjb21wbGV0ZTpmdW5jdGlvbigpe2oubm90KFwiLmFjdGl2ZVwiKS52ZWxvY2l0eSh7b3BhY2l0eTowLHRyYW5zbGF0ZVg6MCx0cmFuc2xhdGVZOjB9LHtkdXJhdGlvbjowLHF1ZXVlOiExfSl9fSksYygkY2FwdGlvbixiLnRyYW5zaXRpb24pLGIuaW5kaWNhdG9ycyYmZi5lcShrKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKSxqLmVxKGEpLnZlbG9jaXR5KHtvcGFjaXR5OjF9LHtkdXJhdGlvbjpiLnRyYW5zaXRpb24scXVldWU6ITEsZWFzaW5nOlwiZWFzZU91dFF1YWRcIn0pLGouZXEoYSkuZmluZChcIi5jYXB0aW9uXCIpLnZlbG9jaXR5KHtvcGFjaXR5OjEsdHJhbnNsYXRlWDowLHRyYW5zbGF0ZVk6MH0se2R1cmF0aW9uOmIudHJhbnNpdGlvbixkZWxheTpiLnRyYW5zaXRpb24scXVldWU6ITEsZWFzaW5nOlwiZWFzZU91dFF1YWRcIn0pLGouZXEoYSkuYWRkQ2xhc3MoXCJhY3RpdmVcIiksYi5pbmRpY2F0b3JzJiZmLmVxKGEpLmFkZENsYXNzKFwiYWN0aXZlXCIpKX12YXIgZSxmLGcsaD1hKHRoaXMpLGk9aC5maW5kKFwidWwuc2xpZGVzXCIpLmZpcnN0KCksaj1pLmZpbmQoXCI+IGxpXCIpLGs9aS5maW5kKFwiLmFjdGl2ZVwiKS5pbmRleCgpOy0xIT1rJiYoZT1qLmVxKGspKSxoLmhhc0NsYXNzKFwiZnVsbHNjcmVlblwiKXx8KGIuaW5kaWNhdG9ycz9oLmhlaWdodChiLmhlaWdodCs0MCk6aC5oZWlnaHQoYi5oZWlnaHQpLGkuaGVpZ2h0KGIuaGVpZ2h0KSksai5maW5kKFwiLmNhcHRpb25cIikuZWFjaChmdW5jdGlvbigpe2MoYSh0aGlzKSwwKX0pLGouZmluZChcImltZ1wiKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGI9XCJkYXRhOmltYWdlL2dpZjtiYXNlNjQsUjBsR09EbGhBUUFCQUlBQkFQLy8vd0FBQUNINUJBRUtBQUVBTEFBQUFBQUJBQUVBQUFJQ1RBRUFPdz09XCI7YSh0aGlzKS5hdHRyKFwic3JjXCIpIT09YiYmKGEodGhpcykuY3NzKFwiYmFja2dyb3VuZC1pbWFnZVwiLFwidXJsKFwiK2EodGhpcykuYXR0cihcInNyY1wiKStcIilcIiksYSh0aGlzKS5hdHRyKFwic3JjXCIsYikpfSksYi5pbmRpY2F0b3JzJiYoZj1hKCc8dWwgY2xhc3M9XCJpbmRpY2F0b3JzXCI+PC91bD4nKSxqLmVhY2goZnVuY3Rpb24oYyl7dmFyIGU9YSgnPGxpIGNsYXNzPVwiaW5kaWNhdG9yLWl0ZW1cIj48L2xpPicpO2UuY2xpY2soZnVuY3Rpb24oKXt2YXIgYz1pLnBhcmVudCgpLGU9Yy5maW5kKGEodGhpcykpLmluZGV4KCk7ZChlKSxjbGVhckludGVydmFsKGcpLGc9c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtrPWkuZmluZChcIi5hY3RpdmVcIikuaW5kZXgoKSxqLmxlbmd0aD09aysxP2s9MDprKz0xLGQoayl9LGIudHJhbnNpdGlvbitiLmludGVydmFsKX0pLGYuYXBwZW5kKGUpfSksaC5hcHBlbmQoZiksZj1oLmZpbmQoXCJ1bC5pbmRpY2F0b3JzXCIpLmZpbmQoXCJsaS5pbmRpY2F0b3ItaXRlbVwiKSksZT9lLnNob3coKTooai5maXJzdCgpLmFkZENsYXNzKFwiYWN0aXZlXCIpLnZlbG9jaXR5KHtvcGFjaXR5OjF9LHtkdXJhdGlvbjpiLnRyYW5zaXRpb24scXVldWU6ITEsZWFzaW5nOlwiZWFzZU91dFF1YWRcIn0pLGs9MCxlPWouZXEoayksYi5pbmRpY2F0b3JzJiZmLmVxKGspLmFkZENsYXNzKFwiYWN0aXZlXCIpKSxlLmZpbmQoXCJpbWdcIikuZWFjaChmdW5jdGlvbigpe2UuZmluZChcIi5jYXB0aW9uXCIpLnZlbG9jaXR5KHtvcGFjaXR5OjEsdHJhbnNsYXRlWDowLHRyYW5zbGF0ZVk6MH0se2R1cmF0aW9uOmIudHJhbnNpdGlvbixxdWV1ZTohMSxlYXNpbmc6XCJlYXNlT3V0UXVhZFwifSl9KSxnPXNldEludGVydmFsKGZ1bmN0aW9uKCl7az1pLmZpbmQoXCIuYWN0aXZlXCIpLmluZGV4KCksZChrKzEpfSxiLnRyYW5zaXRpb24rYi5pbnRlcnZhbCk7dmFyIGw9ITEsbT0hMSxuPSExO2guaGFtbWVyKHtwcmV2ZW50X2RlZmF1bHQ6ITF9KS5iaW5kKFwicGFuXCIsZnVuY3Rpb24oYSl7aWYoXCJ0b3VjaFwiPT09YS5nZXN0dXJlLnBvaW50ZXJUeXBlKXtjbGVhckludGVydmFsKGcpO3ZhciBiPWEuZ2VzdHVyZS5kaXJlY3Rpb24sYz1hLmdlc3R1cmUuZGVsdGFYLGQ9YS5nZXN0dXJlLnZlbG9jaXR5WDskY3Vycl9zbGlkZT1pLmZpbmQoXCIuYWN0aXZlXCIpLCRjdXJyX3NsaWRlLnZlbG9jaXR5KHt0cmFuc2xhdGVYOmN9LHtkdXJhdGlvbjo1MCxxdWV1ZTohMSxlYXNpbmc6XCJlYXNlT3V0UXVhZFwifSksND09PWImJihjPmguaW5uZXJXaWR0aCgpLzJ8fC0uNjU+ZCk/bj0hMDoyPT09YiYmKGM8LTEqaC5pbm5lcldpZHRoKCkvMnx8ZD4uNjUpJiYobT0hMCk7dmFyIGU7bSYmKGU9JGN1cnJfc2xpZGUubmV4dCgpLDA9PT1lLmxlbmd0aCYmKGU9ai5maXJzdCgpKSxlLnZlbG9jaXR5KHtvcGFjaXR5OjF9LHtkdXJhdGlvbjozMDAscXVldWU6ITEsZWFzaW5nOlwiZWFzZU91dFF1YWRcIn0pKSxuJiYoZT0kY3Vycl9zbGlkZS5wcmV2KCksMD09PWUubGVuZ3RoJiYoZT1qLmxhc3QoKSksZS52ZWxvY2l0eSh7b3BhY2l0eToxfSx7ZHVyYXRpb246MzAwLHF1ZXVlOiExLGVhc2luZzpcImVhc2VPdXRRdWFkXCJ9KSl9fSkuYmluZChcInBhbmVuZFwiLGZ1bmN0aW9uKGEpe1widG91Y2hcIj09PWEuZ2VzdHVyZS5wb2ludGVyVHlwZSYmKCRjdXJyX3NsaWRlPWkuZmluZChcIi5hY3RpdmVcIiksbD0hMSxjdXJyX2luZGV4PWkuZmluZChcIi5hY3RpdmVcIikuaW5kZXgoKSwhbiYmIW18fGoubGVuZ3RoPD0xPyRjdXJyX3NsaWRlLnZlbG9jaXR5KHt0cmFuc2xhdGVYOjB9LHtkdXJhdGlvbjozMDAscXVldWU6ITEsZWFzaW5nOlwiZWFzZU91dFF1YWRcIn0pOm0/KGQoY3Vycl9pbmRleCsxKSwkY3Vycl9zbGlkZS52ZWxvY2l0eSh7dHJhbnNsYXRlWDotMSpoLmlubmVyV2lkdGgoKX0se2R1cmF0aW9uOjMwMCxxdWV1ZTohMSxlYXNpbmc6XCJlYXNlT3V0UXVhZFwiLGNvbXBsZXRlOmZ1bmN0aW9uKCl7JGN1cnJfc2xpZGUudmVsb2NpdHkoe29wYWNpdHk6MCx0cmFuc2xhdGVYOjB9LHtkdXJhdGlvbjowLHF1ZXVlOiExfSl9fSkpOm4mJihkKGN1cnJfaW5kZXgtMSksJGN1cnJfc2xpZGUudmVsb2NpdHkoe3RyYW5zbGF0ZVg6aC5pbm5lcldpZHRoKCl9LHtkdXJhdGlvbjozMDAscXVldWU6ITEsZWFzaW5nOlwiZWFzZU91dFF1YWRcIixjb21wbGV0ZTpmdW5jdGlvbigpeyRjdXJyX3NsaWRlLnZlbG9jaXR5KHtvcGFjaXR5OjAsdHJhbnNsYXRlWDowfSx7ZHVyYXRpb246MCxxdWV1ZTohMX0pfX0pKSxtPSExLG49ITEsY2xlYXJJbnRlcnZhbChnKSxnPXNldEludGVydmFsKGZ1bmN0aW9uKCl7az1pLmZpbmQoXCIuYWN0aXZlXCIpLmluZGV4KCksai5sZW5ndGg9PWsrMT9rPTA6ays9MSxkKGspfSxiLnRyYW5zaXRpb24rYi5pbnRlcnZhbCkpfSksaC5vbihcInNsaWRlclBhdXNlXCIsZnVuY3Rpb24oKXtjbGVhckludGVydmFsKGcpfSksaC5vbihcInNsaWRlclN0YXJ0XCIsZnVuY3Rpb24oKXtjbGVhckludGVydmFsKGcpLGc9c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtrPWkuZmluZChcIi5hY3RpdmVcIikuaW5kZXgoKSxqLmxlbmd0aD09aysxP2s9MDprKz0xLGQoayl9LGIudHJhbnNpdGlvbitiLmludGVydmFsKX0pLGgub24oXCJzbGlkZXJOZXh0XCIsZnVuY3Rpb24oKXtrPWkuZmluZChcIi5hY3RpdmVcIikuaW5kZXgoKSxkKGsrMSl9KSxoLm9uKFwic2xpZGVyUHJldlwiLGZ1bmN0aW9uKCl7az1pLmZpbmQoXCIuYWN0aXZlXCIpLmluZGV4KCksZChrLTEpfSl9KX0scGF1c2U6ZnVuY3Rpb24oKXthKHRoaXMpLnRyaWdnZXIoXCJzbGlkZXJQYXVzZVwiKX0sc3RhcnQ6ZnVuY3Rpb24oKXthKHRoaXMpLnRyaWdnZXIoXCJzbGlkZXJTdGFydFwiKX0sbmV4dDpmdW5jdGlvbigpe2EodGhpcykudHJpZ2dlcihcInNsaWRlck5leHRcIil9LHByZXY6ZnVuY3Rpb24oKXthKHRoaXMpLnRyaWdnZXIoXCJzbGlkZXJQcmV2XCIpfX07YS5mbi5zbGlkZXI9ZnVuY3Rpb24oYyl7cmV0dXJuIGJbY10/YltjXS5hcHBseSh0aGlzLEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKSk6XCJvYmplY3RcIiE9dHlwZW9mIGMmJmM/dm9pZCBhLmVycm9yKFwiTWV0aG9kIFwiK2MrXCIgZG9lcyBub3QgZXhpc3Qgb24galF1ZXJ5LnRvb2x0aXBcIik6Yi5pbml0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX19KGpRdWVyeSksZnVuY3Rpb24oYSl7YShkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXthKGRvY3VtZW50KS5vbihcImNsaWNrLmNhcmRcIixcIi5jYXJkXCIsZnVuY3Rpb24oYil7YSh0aGlzKS5maW5kKFwiPiAuY2FyZC1yZXZlYWxcIikubGVuZ3RoJiYoYShiLnRhcmdldCkuaXMoYShcIi5jYXJkLXJldmVhbCAuY2FyZC10aXRsZVwiKSl8fGEoYi50YXJnZXQpLmlzKGEoXCIuY2FyZC1yZXZlYWwgLmNhcmQtdGl0bGUgaVwiKSk/YSh0aGlzKS5maW5kKFwiLmNhcmQtcmV2ZWFsXCIpLnZlbG9jaXR5KHt0cmFuc2xhdGVZOjB9LHtkdXJhdGlvbjoyMjUscXVldWU6ITEsZWFzaW5nOlwiZWFzZUluT3V0UXVhZFwiLGNvbXBsZXRlOmZ1bmN0aW9uKCl7YSh0aGlzKS5jc3Moe2Rpc3BsYXk6XCJub25lXCJ9KX19KTooYShiLnRhcmdldCkuaXMoYShcIi5jYXJkIC5hY3RpdmF0b3JcIikpfHxhKGIudGFyZ2V0KS5pcyhhKFwiLmNhcmQgLmFjdGl2YXRvciBpXCIpKSkmJihhKGIudGFyZ2V0KS5jbG9zZXN0KFwiLmNhcmRcIikuY3NzKFwib3ZlcmZsb3dcIixcImhpZGRlblwiKSxhKHRoaXMpLmZpbmQoXCIuY2FyZC1yZXZlYWxcIikuY3NzKHtkaXNwbGF5OlwiYmxvY2tcIn0pLnZlbG9jaXR5KFwic3RvcFwiLCExKS52ZWxvY2l0eSh7dHJhbnNsYXRlWTpcIi0xMDAlXCJ9LHtkdXJhdGlvbjozMDAscXVldWU6ITEsZWFzaW5nOlwiZWFzZUluT3V0UXVhZFwifSkpKX0pfSl9KGpRdWVyeSksZnVuY3Rpb24oYSl7dmFyIGI9ITEsYz17ZGF0YTpbXSxwbGFjZWhvbGRlcjpcIlwiLHNlY29uZGFyeVBsYWNlaG9sZGVyOlwiXCJ9O2EoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCl7YShkb2N1bWVudCkub24oXCJjbGlja1wiLFwiLmNoaXAgLmNsb3NlXCIsZnVuY3Rpb24oYil7dmFyIGM9YSh0aGlzKS5jbG9zZXN0KFwiLmNoaXBzXCIpO2MuYXR0cihcImRhdGEtaW5pdGlhbGl6ZWRcIil8fGEodGhpcykuY2xvc2VzdChcIi5jaGlwXCIpLnJlbW92ZSgpfSl9KSxhLmZuLm1hdGVyaWFsX2NoaXA9ZnVuY3Rpb24oZCl7dmFyIGU9dGhpcztpZih0aGlzLiRlbD1hKHRoaXMpLHRoaXMuJGRvY3VtZW50PWEoZG9jdW1lbnQpLHRoaXMuU0VMUz17Q0hJUFM6XCIuY2hpcHNcIixDSElQOlwiLmNoaXBcIixJTlBVVDpcImlucHV0XCIsREVMRVRFOlwiLm1hdGVyaWFsLWljb25zXCIsU0VMRUNURURfQ0hJUDpcIi5zZWxlY3RlZFwifSxcImRhdGFcIj09PWQpcmV0dXJuIHRoaXMuJGVsLmRhdGEoXCJjaGlwc1wiKTt2YXIgZj1hLmV4dGVuZCh7fSxjLGQpO3RoaXMuaW5pdD1mdW5jdGlvbigpe3ZhciBiPTA7ZS4kZWwuZWFjaChmdW5jdGlvbigpe3ZhciBjPWEodGhpcyksZD1NYXRlcmlhbGl6ZS5ndWlkKCk7Zi5kYXRhJiZmLmRhdGEgaW5zdGFuY2VvZiBBcnJheXx8KGYuZGF0YT1bXSksYy5kYXRhKFwiY2hpcHNcIixmLmRhdGEpLGMuYXR0cihcImRhdGEtaW5kZXhcIixiKSxjLmF0dHIoXCJkYXRhLWluaXRpYWxpemVkXCIsITApLGMuaGFzQ2xhc3MoZS5TRUxTLkNISVBTKXx8Yy5hZGRDbGFzcyhcImNoaXBzXCIpLGUuY2hpcHMoYyxkKSxiKyt9KX0sdGhpcy5oYW5kbGVFdmVudHM9ZnVuY3Rpb24oKXt2YXIgYj1lLlNFTFM7ZS4kZG9jdW1lbnQub2ZmKFwiY2xpY2suY2hpcHMtZm9jdXNcIixiLkNISVBTKS5vbihcImNsaWNrLmNoaXBzLWZvY3VzXCIsYi5DSElQUyxmdW5jdGlvbihjKXthKGMudGFyZ2V0KS5maW5kKGIuSU5QVVQpLmZvY3VzKCl9KSxlLiRkb2N1bWVudC5vZmYoXCJjbGljay5jaGlwcy1zZWxlY3RcIixiLkNISVApLm9uKFwiY2xpY2suY2hpcHMtc2VsZWN0XCIsYi5DSElQLGZ1bmN0aW9uKGMpe2EoYi5DSElQKS5yZW1vdmVDbGFzcyhcInNlbGVjdGVkXCIpLGEodGhpcykudG9nZ2xlQ2xhc3MoXCJzZWxlY3RlZFwiKX0pLGUuJGRvY3VtZW50Lm9mZihcImtleWRvd24uY2hpcHNcIikub24oXCJrZXlkb3duLmNoaXBzXCIsZnVuY3Rpb24oYyl7aWYoIWEoYy50YXJnZXQpLmlzKFwiaW5wdXQsIHRleHRhcmVhXCIpKXt2YXIgZCxmPWUuJGRvY3VtZW50LmZpbmQoYi5DSElQK2IuU0VMRUNURURfQ0hJUCksZz1mLmNsb3Nlc3QoYi5DSElQUyksaD1mLnNpYmxpbmdzKGIuQ0hJUCkubGVuZ3RoO2lmKGYubGVuZ3RoKWlmKDg9PT1jLndoaWNofHw0Nj09PWMud2hpY2gpe2MucHJldmVudERlZmF1bHQoKSxkPWYuaW5kZXgoKSxlLmRlbGV0ZUNoaXAoZCxnKTt2YXIgaT1udWxsO2g+ZCsxP2k9ZDooZD09PWh8fGQrMT09PWgpJiYoaT1oLTEpLDA+aSYmKGk9bnVsbCksbnVsbCE9PWkmJmUuc2VsZWN0Q2hpcChpLGcpLGh8fGcuZmluZChcImlucHV0XCIpLmZvY3VzKCl9ZWxzZSBpZigzNz09PWMud2hpY2gpe2lmKGQ9Zi5pbmRleCgpLTEsMD5kKXJldHVybjthKGIuQ0hJUCkucmVtb3ZlQ2xhc3MoXCJzZWxlY3RlZFwiKSxlLnNlbGVjdENoaXAoZCxnKX1lbHNlIGlmKDM5PT09Yy53aGljaCl7aWYoZD1mLmluZGV4KCkrMSxhKGIuQ0hJUCkucmVtb3ZlQ2xhc3MoXCJzZWxlY3RlZFwiKSxkPmgpcmV0dXJuIHZvaWQgZy5maW5kKFwiaW5wdXRcIikuZm9jdXMoKTtlLnNlbGVjdENoaXAoZCxnKX19fSksZS4kZG9jdW1lbnQub2ZmKFwiZm9jdXNpbi5jaGlwc1wiLGIuQ0hJUFMrXCIgXCIrYi5JTlBVVCkub24oXCJmb2N1c2luLmNoaXBzXCIsYi5DSElQUytcIiBcIitiLklOUFVULGZ1bmN0aW9uKGMpe3ZhciBkPWEoYy50YXJnZXQpLmNsb3Nlc3QoYi5DSElQUyk7ZC5hZGRDbGFzcyhcImZvY3VzXCIpLGQuc2libGluZ3MoXCJsYWJlbCwgLnByZWZpeFwiKS5hZGRDbGFzcyhcImFjdGl2ZVwiKSxhKGIuQ0hJUCkucmVtb3ZlQ2xhc3MoXCJzZWxlY3RlZFwiKX0pLGUuJGRvY3VtZW50Lm9mZihcImZvY3Vzb3V0LmNoaXBzXCIsYi5DSElQUytcIiBcIitiLklOUFVUKS5vbihcImZvY3Vzb3V0LmNoaXBzXCIsYi5DSElQUytcIiBcIitiLklOUFVULGZ1bmN0aW9uKGMpe3ZhciBkPWEoYy50YXJnZXQpLmNsb3Nlc3QoYi5DSElQUyk7ZC5yZW1vdmVDbGFzcyhcImZvY3VzXCIpLGQuZGF0YShcImNoaXBzXCIpLmxlbmd0aHx8ZC5zaWJsaW5ncyhcImxhYmVsXCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpLGQuc2libGluZ3MoXCIucHJlZml4XCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpfSksZS4kZG9jdW1lbnQub2ZmKFwia2V5ZG93bi5jaGlwcy1hZGRcIixiLkNISVBTK1wiIFwiK2IuSU5QVVQpLm9uKFwia2V5ZG93bi5jaGlwcy1hZGRcIixiLkNISVBTK1wiIFwiK2IuSU5QVVQsZnVuY3Rpb24oYyl7dmFyIGQ9YShjLnRhcmdldCksZj1kLmNsb3Nlc3QoYi5DSElQUyksZz1mLmNoaWxkcmVuKGIuQ0hJUCkubGVuZ3RoO3JldHVybiAxMz09PWMud2hpY2g/KGMucHJldmVudERlZmF1bHQoKSxlLmFkZENoaXAoe3RhZzpkLnZhbCgpfSxmKSx2b2lkIGQudmFsKFwiXCIpKTo4IT09Yy5rZXlDb2RlJiYzNyE9PWMua2V5Q29kZXx8XCJcIiE9PWQudmFsKCl8fCFnP3ZvaWQgMDooZS5zZWxlY3RDaGlwKGctMSxmKSx2b2lkIGQuYmx1cigpKX0pLGUuJGRvY3VtZW50Lm9mZihcImNsaWNrLmNoaXBzLWRlbGV0ZVwiLGIuQ0hJUFMrXCIgXCIrYi5ERUxFVEUpLm9uKFwiY2xpY2suY2hpcHMtZGVsZXRlXCIsYi5DSElQUytcIiBcIitiLkRFTEVURSxmdW5jdGlvbihjKXt2YXIgZD1hKGMudGFyZ2V0KSxmPWQuY2xvc2VzdChiLkNISVBTKSxnPWQuY2xvc2VzdChiLkNISVApO2Muc3RvcFByb3BhZ2F0aW9uKCksZS5kZWxldGVDaGlwKGcuaW5kZXgoKSxmKSxmLmZpbmQoXCJpbnB1dFwiKS5mb2N1cygpfSl9LHRoaXMuY2hpcHM9ZnVuY3Rpb24oYSxiKXt2YXIgYz1cIlwiO2EuZGF0YShcImNoaXBzXCIpLmZvckVhY2goZnVuY3Rpb24oYSl7Yys9ZS5yZW5kZXJDaGlwKGEpfSksYys9JzxpbnB1dCBpZD1cIicrYisnXCIgY2xhc3M9XCJpbnB1dFwiIHBsYWNlaG9sZGVyPVwiXCI+JyxhLmh0bWwoYyksZS5zZXRQbGFjZWhvbGRlcihhKTt2YXIgZD1hLm5leHQoXCJsYWJlbFwiKTtkLmxlbmd0aCYmKGQuYXR0cihcImZvclwiLGIpLGEuZGF0YShcImNoaXBzXCIpLmxlbmd0aCYmZC5hZGRDbGFzcyhcImFjdGl2ZVwiKSl9LHRoaXMucmVuZGVyQ2hpcD1mdW5jdGlvbihhKXtpZihhLnRhZyl7dmFyIGI9JzxkaXYgY2xhc3M9XCJjaGlwXCI+JythLnRhZztyZXR1cm4gYS5pbWFnZSYmKGIrPScgPGltZyBzcmM9XCInK2EuaW1hZ2UrJ1wiPiAnKSxiKz0nPGkgY2xhc3M9XCJtYXRlcmlhbC1pY29ucyBjbG9zZVwiPmNsb3NlPC9pPicsYis9XCI8L2Rpdj5cIn19LHRoaXMuc2V0UGxhY2Vob2xkZXI9ZnVuY3Rpb24oYSl7YS5kYXRhKFwiY2hpcHNcIikubGVuZ3RoJiZmLnBsYWNlaG9sZGVyP2EuZmluZChcImlucHV0XCIpLnByb3AoXCJwbGFjZWhvbGRlclwiLGYucGxhY2Vob2xkZXIpOiFhLmRhdGEoXCJjaGlwc1wiKS5sZW5ndGgmJmYuc2Vjb25kYXJ5UGxhY2Vob2xkZXImJmEuZmluZChcImlucHV0XCIpLnByb3AoXCJwbGFjZWhvbGRlclwiLGYuc2Vjb25kYXJ5UGxhY2Vob2xkZXIpfSx0aGlzLmlzVmFsaWQ9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9YS5kYXRhKFwiY2hpcHNcIiksZD0hMSxlPTA7ZTxjLmxlbmd0aDtlKyspaWYoY1tlXS50YWc9PT1iLnRhZylyZXR1cm4gdm9pZChkPSEwKTtyZXR1cm5cIlwiIT09Yi50YWcmJiFkfSx0aGlzLmFkZENoaXA9ZnVuY3Rpb24oYixjKXtpZihlLmlzVmFsaWQoYyxiKSl7Zm9yKHZhciBkPWUucmVuZGVyQ2hpcChiKSxmPVtdLGc9Yy5kYXRhKFwiY2hpcHNcIiksaD0wO2g8Zy5sZW5ndGg7aCsrKWYucHVzaChnW2hdKTtmLnB1c2goYiksYy5kYXRhKFwiY2hpcHNcIixmKSxhKGQpLmluc2VydEJlZm9yZShjLmZpbmQoXCJpbnB1dFwiKSksYy50cmlnZ2VyKFwiY2hpcC5hZGRcIixiKSxlLnNldFBsYWNlaG9sZGVyKGMpfX0sdGhpcy5kZWxldGVDaGlwPWZ1bmN0aW9uKGEsYil7dmFyIGM9Yi5kYXRhKFwiY2hpcHNcIilbYV07Yi5maW5kKFwiLmNoaXBcIikuZXEoYSkucmVtb3ZlKCk7Zm9yKHZhciBkPVtdLGY9Yi5kYXRhKFwiY2hpcHNcIiksZz0wO2c8Zi5sZW5ndGg7ZysrKWchPT1hJiZkLnB1c2goZltnXSk7Yi5kYXRhKFwiY2hpcHNcIixkKSxiLnRyaWdnZXIoXCJjaGlwLmRlbGV0ZVwiLGMpLGUuc2V0UGxhY2Vob2xkZXIoYil9LHRoaXMuc2VsZWN0Q2hpcD1mdW5jdGlvbihhLGIpe3ZhciBjPWIuZmluZChcIi5jaGlwXCIpLmVxKGEpO2MmJiExPT09Yy5oYXNDbGFzcyhcInNlbGVjdGVkXCIpJiYoYy5hZGRDbGFzcyhcInNlbGVjdGVkXCIpLGIudHJpZ2dlcihcImNoaXAuc2VsZWN0XCIsYi5kYXRhKFwiY2hpcHNcIilbYV0pKX0sdGhpcy5nZXRDaGlwc0VsZW1lbnQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi5lcShhKX0sdGhpcy5pbml0KCksYnx8KHRoaXMuaGFuZGxlRXZlbnRzKCksYj0hMCl9fShqUXVlcnkpLGZ1bmN0aW9uKGEpe2EuZm4ucHVzaHBpbj1mdW5jdGlvbihiKXt2YXIgYz17dG9wOjAsYm90dG9tOjEvMCxvZmZzZXQ6MH07cmV0dXJuXCJyZW1vdmVcIj09PWI/KHRoaXMuZWFjaChmdW5jdGlvbigpeyhpZD1hKHRoaXMpLmRhdGEoXCJwdXNocGluLWlkXCIpKSYmKGEod2luZG93KS5vZmYoXCJzY3JvbGwuXCIraWQpLGEodGhpcykucmVtb3ZlRGF0YShcInB1c2hwaW4taWRcIikucmVtb3ZlQ2xhc3MoXCJwaW4tdG9wIHBpbm5lZCBwaW4tYm90dG9tXCIpLnJlbW92ZUF0dHIoXCJzdHlsZVwiKSl9KSwhMSk6KGI9YS5leHRlbmQoYyxiKSwkaW5kZXg9MCx0aGlzLmVhY2goZnVuY3Rpb24oKXtmdW5jdGlvbiBjKGEpe2EucmVtb3ZlQ2xhc3MoXCJwaW4tdG9wXCIpLGEucmVtb3ZlQ2xhc3MoXCJwaW5uZWRcIiksYS5yZW1vdmVDbGFzcyhcInBpbi1ib3R0b21cIil9ZnVuY3Rpb24gZChkLGUpe2QuZWFjaChmdW5jdGlvbigpe2IudG9wPD1lJiZiLmJvdHRvbT49ZSYmIWEodGhpcykuaGFzQ2xhc3MoXCJwaW5uZWRcIikmJihjKGEodGhpcykpLGEodGhpcykuY3NzKFwidG9wXCIsYi5vZmZzZXQpLGEodGhpcykuYWRkQ2xhc3MoXCJwaW5uZWRcIikpLGU8Yi50b3AmJiFhKHRoaXMpLmhhc0NsYXNzKFwicGluLXRvcFwiKSYmKGMoYSh0aGlzKSksYSh0aGlzKS5jc3MoXCJ0b3BcIiwwKSxhKHRoaXMpLmFkZENsYXNzKFwicGluLXRvcFwiKSksZT5iLmJvdHRvbSYmIWEodGhpcykuaGFzQ2xhc3MoXCJwaW4tYm90dG9tXCIpJiYoYyhhKHRoaXMpKSxhKHRoaXMpLmFkZENsYXNzKFwicGluLWJvdHRvbVwiKSxhKHRoaXMpLmNzcyhcInRvcFwiLGIuYm90dG9tLWcpKX0pfXZhciBlPU1hdGVyaWFsaXplLmd1aWQoKSxmPWEodGhpcyksZz1hKHRoaXMpLm9mZnNldCgpLnRvcDthKHRoaXMpLmRhdGEoXCJwdXNocGluLWlkXCIsZSksZChmLGEod2luZG93KS5zY3JvbGxUb3AoKSksYSh3aW5kb3cpLm9uKFwic2Nyb2xsLlwiK2UsZnVuY3Rpb24oKXt2YXIgYz1hKHdpbmRvdykuc2Nyb2xsVG9wKCkrYi5vZmZzZXQ7ZChmLGMpfSl9KSl9fShqUXVlcnkpLGZ1bmN0aW9uKGEpe2EoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCl7YS5mbi5yZXZlcnNlPVtdLnJldmVyc2UsYShkb2N1bWVudCkub24oXCJtb3VzZWVudGVyLmZpeGVkQWN0aW9uQnRuXCIsXCIuZml4ZWQtYWN0aW9uLWJ0bjpub3QoLmNsaWNrLXRvLXRvZ2dsZSk6bm90KC50b29sYmFyKVwiLGZ1bmN0aW9uKGMpe3ZhciBkPWEodGhpcyk7YihkKX0pLGEoZG9jdW1lbnQpLm9uKFwibW91c2VsZWF2ZS5maXhlZEFjdGlvbkJ0blwiLFwiLmZpeGVkLWFjdGlvbi1idG46bm90KC5jbGljay10by10b2dnbGUpOm5vdCgudG9vbGJhcilcIixmdW5jdGlvbihiKXt2YXIgZD1hKHRoaXMpO2MoZCl9KSxhKGRvY3VtZW50KS5vbihcImNsaWNrLmZhYkNsaWNrVG9nZ2xlXCIsXCIuZml4ZWQtYWN0aW9uLWJ0bi5jbGljay10by10b2dnbGUgPiBhXCIsZnVuY3Rpb24oZCl7dmFyIGU9YSh0aGlzKSxmPWUucGFyZW50KCk7Zi5oYXNDbGFzcyhcImFjdGl2ZVwiKT9jKGYpOmIoZil9KSxhKGRvY3VtZW50KS5vbihcImNsaWNrLmZhYlRvb2xiYXJcIixcIi5maXhlZC1hY3Rpb24tYnRuLnRvb2xiYXIgPiBhXCIsZnVuY3Rpb24oYil7dmFyIGM9YSh0aGlzKSxlPWMucGFyZW50KCk7ZChlKX0pfSksYS5mbi5leHRlbmQoe29wZW5GQUI6ZnVuY3Rpb24oKXtiKGEodGhpcykpfSxjbG9zZUZBQjpmdW5jdGlvbigpe2MoYSh0aGlzKSl9LG9wZW5Ub29sYmFyOmZ1bmN0aW9uKCl7ZChhKHRoaXMpKX0sY2xvc2VUb29sYmFyOmZ1bmN0aW9uKCl7ZShhKHRoaXMpKX19KTt2YXIgYj1mdW5jdGlvbihiKXt2YXIgYz1iO2lmKGMuaGFzQ2xhc3MoXCJhY3RpdmVcIik9PT0hMSl7dmFyIGQsZSxmPWMuaGFzQ2xhc3MoXCJob3Jpem9udGFsXCIpO2Y9PT0hMD9lPTQwOmQ9NDAsYy5hZGRDbGFzcyhcImFjdGl2ZVwiKSxjLmZpbmQoXCJ1bCAuYnRuLWZsb2F0aW5nXCIpLnZlbG9jaXR5KHtzY2FsZVk6XCIuNFwiLHNjYWxlWDpcIi40XCIsdHJhbnNsYXRlWTpkK1wicHhcIix0cmFuc2xhdGVYOmUrXCJweFwifSx7ZHVyYXRpb246MH0pO3ZhciBnPTA7Yy5maW5kKFwidWwgLmJ0bi1mbG9hdGluZ1wiKS5yZXZlcnNlKCkuZWFjaChmdW5jdGlvbigpe2EodGhpcykudmVsb2NpdHkoe29wYWNpdHk6XCIxXCIsc2NhbGVYOlwiMVwiLHNjYWxlWTpcIjFcIix0cmFuc2xhdGVZOlwiMFwiLHRyYW5zbGF0ZVg6XCIwXCJ9LHtkdXJhdGlvbjo4MCxkZWxheTpnfSksZys9NDB9KX19LGM9ZnVuY3Rpb24oYSl7dmFyIGIsYyxkPWEsZT1kLmhhc0NsYXNzKFwiaG9yaXpvbnRhbFwiKTtlPT09ITA/Yz00MDpiPTQwLGQucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7ZC5maW5kKFwidWwgLmJ0bi1mbG9hdGluZ1wiKS52ZWxvY2l0eShcInN0b3BcIiwhMCksZC5maW5kKFwidWwgLmJ0bi1mbG9hdGluZ1wiKS52ZWxvY2l0eSh7b3BhY2l0eTpcIjBcIixzY2FsZVg6XCIuNFwiLHNjYWxlWTpcIi40XCIsdHJhbnNsYXRlWTpiK1wicHhcIix0cmFuc2xhdGVYOmMrXCJweFwifSx7ZHVyYXRpb246ODB9KX0sZD1mdW5jdGlvbihiKXtpZihcInRydWVcIiE9PWIuYXR0cihcImRhdGEtb3BlblwiKSl7dmFyIGMsZCxmLGc9d2luZG93LmlubmVyV2lkdGgsaD13aW5kb3cuaW5uZXJIZWlnaHQsaT1iWzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGo9Yi5maW5kKFwiPiBhXCIpLmZpcnN0KCksaz1iLmZpbmQoXCI+IHVsXCIpLmZpcnN0KCksbD1hKCc8ZGl2IGNsYXNzPVwiZmFiLWJhY2tkcm9wXCI+PC9kaXY+JyksbT1qLmNzcyhcImJhY2tncm91bmQtY29sb3JcIik7ai5hcHBlbmQobCksYz1pLmxlZnQtZy8yK2kud2lkdGgvMixkPWgtaS5ib3R0b20sZj1nL2wud2lkdGgoKSxiLmF0dHIoXCJkYXRhLW9yaWdpbi1ib3R0b21cIixpLmJvdHRvbSksYi5hdHRyKFwiZGF0YS1vcmlnaW4tbGVmdFwiLGkubGVmdCksYi5hdHRyKFwiZGF0YS1vcmlnaW4td2lkdGhcIixpLndpZHRoKSxiLmFkZENsYXNzKFwiYWN0aXZlXCIpLGIuYXR0cihcImRhdGEtb3BlblwiLCEwKSxiLmNzcyh7XCJ0ZXh0LWFsaWduXCI6XCJjZW50ZXJcIix3aWR0aDpcIjEwMCVcIixib3R0b206MCxsZWZ0OjAsdHJhbnNmb3JtOlwidHJhbnNsYXRlWChcIitjK1wicHgpXCIsdHJhbnNpdGlvbjpcIm5vbmVcIn0pLGouY3NzKHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGVZKFwiKy1kK1wicHgpXCIsdHJhbnNpdGlvbjpcIm5vbmVcIn0pLGwuY3NzKHtcImJhY2tncm91bmQtY29sb3JcIjptfSksc2V0VGltZW91dChmdW5jdGlvbigpe2IuY3NzKHt0cmFuc2Zvcm06XCJcIix0cmFuc2l0aW9uOlwidHJhbnNmb3JtIC4ycyBjdWJpYy1iZXppZXIoMC41NTAsIDAuMDg1LCAwLjY4MCwgMC41MzApLCBiYWNrZ3JvdW5kLWNvbG9yIDBzIGxpbmVhciAuMnNcIn0pLGouY3NzKHtvdmVyZmxvdzpcInZpc2libGVcIix0cmFuc2Zvcm06XCJcIix0cmFuc2l0aW9uOlwidHJhbnNmb3JtIC4yc1wifSksc2V0VGltZW91dChmdW5jdGlvbigpe2IuY3NzKHtvdmVyZmxvdzpcImhpZGRlblwiLFwiYmFja2dyb3VuZC1jb2xvclwiOm19KSxsLmNzcyh7dHJhbnNmb3JtOlwic2NhbGUoXCIrZitcIilcIix0cmFuc2l0aW9uOlwidHJhbnNmb3JtIC4ycyBjdWJpYy1iZXppZXIoMC41NTAsIDAuMDU1LCAwLjY3NSwgMC4xOTApXCJ9KSxrLmZpbmQoXCI+IGxpID4gYVwiKS5jc3Moe29wYWNpdHk6MX0pLGEod2luZG93KS5vbihcInNjcm9sbC5mYWJUb29sYmFyQ2xvc2VcIixmdW5jdGlvbigpe2UoYiksYSh3aW5kb3cpLm9mZihcInNjcm9sbC5mYWJUb29sYmFyQ2xvc2VcIiksYShkb2N1bWVudCkub2ZmKFwiY2xpY2suZmFiVG9vbGJhckNsb3NlXCIpfSksYShkb2N1bWVudCkub24oXCJjbGljay5mYWJUb29sYmFyQ2xvc2VcIixmdW5jdGlvbihjKXthKGMudGFyZ2V0KS5jbG9zZXN0KGspLmxlbmd0aHx8KGUoYiksYSh3aW5kb3cpLm9mZihcInNjcm9sbC5mYWJUb29sYmFyQ2xvc2VcIiksYShkb2N1bWVudCkub2ZmKFwiY2xpY2suZmFiVG9vbGJhckNsb3NlXCIpKX0pfSwxMDApfSwwKX19LGU9ZnVuY3Rpb24oYSl7aWYoXCJ0cnVlXCI9PT1hLmF0dHIoXCJkYXRhLW9wZW5cIikpe3ZhciBiLGMsZCxlPXdpbmRvdy5pbm5lcldpZHRoLGY9d2luZG93LmlubmVySGVpZ2h0LGc9YS5hdHRyKFwiZGF0YS1vcmlnaW4td2lkdGhcIiksaD1hLmF0dHIoXCJkYXRhLW9yaWdpbi1ib3R0b21cIiksaT1hLmF0dHIoXCJkYXRhLW9yaWdpbi1sZWZ0XCIpLGo9YS5maW5kKFwiPiAuYnRuLWZsb2F0aW5nXCIpLmZpcnN0KCksaz1hLmZpbmQoXCI+IHVsXCIpLmZpcnN0KCksbD1hLmZpbmQoXCIuZmFiLWJhY2tkcm9wXCIpLG09ai5jc3MoXCJiYWNrZ3JvdW5kLWNvbG9yXCIpO2I9aS1lLzIrZy8yLGM9Zi1oLGQ9ZS9sLndpZHRoKCksYS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKSxhLmF0dHIoXCJkYXRhLW9wZW5cIiwhMSksYS5jc3Moe1wiYmFja2dyb3VuZC1jb2xvclwiOlwidHJhbnNwYXJlbnRcIix0cmFuc2l0aW9uOlwibm9uZVwifSksai5jc3Moe3RyYW5zaXRpb246XCJub25lXCJ9KSxsLmNzcyh7dHJhbnNmb3JtOlwic2NhbGUoMClcIixcImJhY2tncm91bmQtY29sb3JcIjptfSksay5maW5kKFwiPiBsaSA+IGFcIikuY3NzKHtvcGFjaXR5OlwiXCJ9KSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bC5yZW1vdmUoKSxhLmNzcyh7XCJ0ZXh0LWFsaWduXCI6XCJcIix3aWR0aDpcIlwiLGJvdHRvbTpcIlwiLGxlZnQ6XCJcIixvdmVyZmxvdzpcIlwiLFwiYmFja2dyb3VuZC1jb2xvclwiOlwiXCIsdHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoXCIrLWIrXCJweCwwLDApXCJ9KSxqLmNzcyh7b3ZlcmZsb3c6XCJcIix0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLFwiK2MrXCJweCwwKVwifSksc2V0VGltZW91dChmdW5jdGlvbigpe2EuY3NzKHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLDAsMClcIix0cmFuc2l0aW9uOlwidHJhbnNmb3JtIC4yc1wifSksai5jc3Moe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsMCwwKVwiLHRyYW5zaXRpb246XCJ0cmFuc2Zvcm0gLjJzIGN1YmljLWJlemllcigwLjU1MCwgMC4wNTUsIDAuNjc1LCAwLjE5MClcIn0pfSwyMCl9LDIwMCl9fX0oalF1ZXJ5KSxmdW5jdGlvbihhKXtNYXRlcmlhbGl6ZS5mYWRlSW5JbWFnZT1mdW5jdGlvbihiKXt2YXIgYztpZihcInN0cmluZ1wiPT10eXBlb2YgYiljPWEoYik7ZWxzZXtpZihcIm9iamVjdFwiIT10eXBlb2YgYilyZXR1cm47Yz1ifWMuY3NzKHtvcGFjaXR5OjB9KSxhKGMpLnZlbG9jaXR5KHtvcGFjaXR5OjF9LHtkdXJhdGlvbjo2NTAscXVldWU6ITEsZWFzaW5nOlwiZWFzZU91dFNpbmVcIn0pLGEoYykudmVsb2NpdHkoe29wYWNpdHk6MX0se2R1cmF0aW9uOjEzMDAscXVldWU6ITEsZWFzaW5nOlwic3dpbmdcIixzdGVwOmZ1bmN0aW9uKGIsYyl7Yy5zdGFydD0xMDA7dmFyIGQ9Yi8xMDAsZT0xNTAtKDEwMC1iKS8xLjc1OzEwMD5lJiYoZT0xMDApLGI+PTAmJmEodGhpcykuY3NzKHtcIi13ZWJraXQtZmlsdGVyXCI6XCJncmF5c2NhbGUoXCIrZCtcIilicmlnaHRuZXNzKFwiK2UrXCIlKVwiLGZpbHRlcjpcImdyYXlzY2FsZShcIitkK1wiKWJyaWdodG5lc3MoXCIrZStcIiUpXCJ9KX19KX0sTWF0ZXJpYWxpemUuc2hvd1N0YWdnZXJlZExpc3Q9ZnVuY3Rpb24oYil7dmFyIGM7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGIpYz1hKGIpO2Vsc2V7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGIpcmV0dXJuO2M9Yn12YXIgZD0wO2MuZmluZChcImxpXCIpLnZlbG9jaXR5KHt0cmFuc2xhdGVYOlwiLTEwMHB4XCJ9LHtkdXJhdGlvbjowfSksYy5maW5kKFwibGlcIikuZWFjaChmdW5jdGlvbigpe2EodGhpcykudmVsb2NpdHkoe29wYWNpdHk6XCIxXCIsdHJhbnNsYXRlWDpcIjBcIn0se2R1cmF0aW9uOjgwMCxkZWxheTpkLGVhc2luZzpbNjAsMTBdfSksZCs9MTIwfSl9LGEoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCl7dmFyIGI9ITEsYz0hMTthKFwiLmRpc21pc3NhYmxlXCIpLmVhY2goZnVuY3Rpb24oKXthKHRoaXMpLmhhbW1lcih7cHJldmVudF9kZWZhdWx0OiExfSkuYmluZChcInBhblwiLGZ1bmN0aW9uKGQpe2lmKFwidG91Y2hcIj09PWQuZ2VzdHVyZS5wb2ludGVyVHlwZSl7dmFyIGU9YSh0aGlzKSxmPWQuZ2VzdHVyZS5kaXJlY3Rpb24sZz1kLmdlc3R1cmUuZGVsdGFYLGg9ZC5nZXN0dXJlLnZlbG9jaXR5WDtlLnZlbG9jaXR5KHt0cmFuc2xhdGVYOmd9LHtkdXJhdGlvbjo1MCxxdWV1ZTohMSxlYXNpbmc6XCJlYXNlT3V0UXVhZFwifSksND09PWYmJihnPmUuaW5uZXJXaWR0aCgpLzJ8fC0uNzU+aCkmJihiPSEwKSwyPT09ZiYmKGc8LTEqZS5pbm5lcldpZHRoKCkvMnx8aD4uNzUpJiYoYz0hMCl9fSkuYmluZChcInBhbmVuZFwiLGZ1bmN0aW9uKGQpe2lmKE1hdGguYWJzKGQuZ2VzdHVyZS5kZWx0YVgpPGEodGhpcykuaW5uZXJXaWR0aCgpLzImJihjPSExLGI9ITEpLFwidG91Y2hcIj09PWQuZ2VzdHVyZS5wb2ludGVyVHlwZSl7dmFyIGU9YSh0aGlzKTtpZihifHxjKXt2YXIgZjtmPWI/ZS5pbm5lcldpZHRoKCk6LTEqZS5pbm5lcldpZHRoKCksZS52ZWxvY2l0eSh7dHJhbnNsYXRlWDpmfSx7ZHVyYXRpb246MTAwLHF1ZXVlOiExLGVhc2luZzpcImVhc2VPdXRRdWFkXCIsY29tcGxldGU6ZnVuY3Rpb24oKXtlLmNzcyhcImJvcmRlclwiLFwibm9uZVwiKSxlLnZlbG9jaXR5KHtoZWlnaHQ6MCxwYWRkaW5nOjB9LHtkdXJhdGlvbjoyMDAscXVldWU6ITEsZWFzaW5nOlwiZWFzZU91dFF1YWRcIixjb21wbGV0ZTpmdW5jdGlvbigpe2UucmVtb3ZlKCl9fSl9fSl9ZWxzZSBlLnZlbG9jaXR5KHt0cmFuc2xhdGVYOjB9LHtkdXJhdGlvbjoxMDAscXVldWU6ITEsZWFzaW5nOlwiZWFzZU91dFF1YWRcIn0pO2I9ITEsYz0hMX19KX0pfSl9KGpRdWVyeSksZnVuY3Rpb24oYSl7TWF0ZXJpYWxpemUuc2Nyb2xsRmlyZT1mdW5jdGlvbihhKXt2YXIgYj0hMTt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLGZ1bmN0aW9uKCl7Yj0hMH0pLHNldEludGVydmFsKGZ1bmN0aW9uKCl7aWYoYil7Yj0hMTtmb3IodmFyIGM9d2luZG93LnBhZ2VZT2Zmc2V0K3dpbmRvdy5pbm5lckhlaWdodCxkPTA7ZDxhLmxlbmd0aDtkKyspe3ZhciBlPWFbZF0sZj1lLnNlbGVjdG9yLGc9ZS5vZmZzZXQsaD1lLmNhbGxiYWNrLGk9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihmKTtpZihudWxsIT09aSl7dmFyIGo9aS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3Ard2luZG93LnBhZ2VZT2Zmc2V0O2lmKGM+aitnJiZlLmRvbmUhPT0hMCl7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgaCloLmNhbGwodGhpcyxpKTtlbHNlIGlmKFwic3RyaW5nXCI9PXR5cGVvZiBoKXt2YXIgaz1uZXcgRnVuY3Rpb24oaCk7ayhpKX1lLmRvbmU9ITB9fX19fSwxMDApfX0oalF1ZXJ5KSxmdW5jdGlvbihhKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFwicGlja2VyXCIsW1wianF1ZXJ5XCJdLGEpOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP21vZHVsZS5leHBvcnRzPWEocmVxdWlyZShcImpxdWVyeVwiKSk6dGhpcy5QaWNrZXI9YShqUXVlcnkpfShmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGYsZyxpLGwpe2Z1bmN0aW9uIG0oKXtyZXR1cm4gYi5fLm5vZGUoXCJkaXZcIixiLl8ubm9kZShcImRpdlwiLGIuXy5ub2RlKFwiZGl2XCIsYi5fLm5vZGUoXCJkaXZcIix5LmNvbXBvbmVudC5ub2Rlcyh0Lm9wZW4pLHYuYm94KSx2LndyYXApLHYuZnJhbWUpLHYuaG9sZGVyKX1mdW5jdGlvbiBuKCl7dy5kYXRhKGcseSkuYWRkQ2xhc3Modi5pbnB1dCkuYXR0cihcInRhYmluZGV4XCIsLTEpLnZhbCh3LmRhdGEoXCJ2YWx1ZVwiKT95LmdldChcInNlbGVjdFwiLHUuZm9ybWF0KTpmLnZhbHVlKSx1LmVkaXRhYmxlfHx3Lm9uKFwiZm9jdXMuXCIrdC5pZCtcIiBjbGljay5cIit0LmlkLGZ1bmN0aW9uKGEpe2EucHJldmVudERlZmF1bHQoKSx5LiRyb290LmVxKDApLmZvY3VzKCl9KS5vbihcImtleWRvd24uXCIrdC5pZCxxKSxlKGYse2hhc3BvcHVwOiEwLGV4cGFuZGVkOiExLHJlYWRvbmx5OiExLG93bnM6Zi5pZCtcIl9yb290XCJ9KX1mdW5jdGlvbiBvKCl7eS4kcm9vdC5vbih7a2V5ZG93bjpxLGZvY3VzaW46ZnVuY3Rpb24oYSl7eS4kcm9vdC5yZW1vdmVDbGFzcyh2LmZvY3VzZWQpLGEuc3RvcFByb3BhZ2F0aW9uKCl9LFwibW91c2Vkb3duIGNsaWNrXCI6ZnVuY3Rpb24oYil7dmFyIGM9Yi50YXJnZXQ7YyE9eS4kcm9vdC5jaGlsZHJlbigpWzBdJiYoYi5zdG9wUHJvcGFnYXRpb24oKSxcIm1vdXNlZG93blwiIT1iLnR5cGV8fGEoYykuaXMoXCJpbnB1dCwgc2VsZWN0LCB0ZXh0YXJlYSwgYnV0dG9uLCBvcHRpb25cIil8fChiLnByZXZlbnREZWZhdWx0KCkseS4kcm9vdC5lcSgwKS5mb2N1cygpKSl9fSkub24oe2ZvY3VzOmZ1bmN0aW9uKCl7dy5hZGRDbGFzcyh2LnRhcmdldCl9LGJsdXI6ZnVuY3Rpb24oKXt3LnJlbW92ZUNsYXNzKHYudGFyZ2V0KX19KS5vbihcImZvY3VzLnRvT3BlblwiLHIpLm9uKFwiY2xpY2tcIixcIltkYXRhLXBpY2tdLCBbZGF0YS1uYXZdLCBbZGF0YS1jbGVhcl0sIFtkYXRhLWNsb3NlXVwiLGZ1bmN0aW9uKCl7dmFyIGI9YSh0aGlzKSxjPWIuZGF0YSgpLGQ9Yi5oYXNDbGFzcyh2Lm5hdkRpc2FibGVkKXx8Yi5oYXNDbGFzcyh2LmRpc2FibGVkKSxlPWgoKTtlPWUmJihlLnR5cGV8fGUuaHJlZiksKGR8fGUmJiFhLmNvbnRhaW5zKHkuJHJvb3RbMF0sZSkpJiZ5LiRyb290LmVxKDApLmZvY3VzKCksIWQmJmMubmF2P3kuc2V0KFwiaGlnaGxpZ2h0XCIseS5jb21wb25lbnQuaXRlbS5oaWdobGlnaHQse25hdjpjLm5hdn0pOiFkJiZcInBpY2tcImluIGM/eS5zZXQoXCJzZWxlY3RcIixjLnBpY2spOmMuY2xlYXI/eS5jbGVhcigpLmNsb3NlKCEwKTpjLmNsb3NlJiZ5LmNsb3NlKCEwKX0pLGUoeS4kcm9vdFswXSxcImhpZGRlblwiLCEwKX1mdW5jdGlvbiBwKCl7dmFyIGI7dS5oaWRkZW5OYW1lPT09ITA/KGI9Zi5uYW1lLGYubmFtZT1cIlwiKTooYj1bXCJzdHJpbmdcIj09dHlwZW9mIHUuaGlkZGVuUHJlZml4P3UuaGlkZGVuUHJlZml4OlwiXCIsXCJzdHJpbmdcIj09dHlwZW9mIHUuaGlkZGVuU3VmZml4P3UuaGlkZGVuU3VmZml4OlwiX3N1Ym1pdFwiXSxiPWJbMF0rZi5uYW1lK2JbMV0pLHkuX2hpZGRlbj1hKCc8aW5wdXQgdHlwZT1oaWRkZW4gbmFtZT1cIicrYisnXCInKyh3LmRhdGEoXCJ2YWx1ZVwiKXx8Zi52YWx1ZT8nIHZhbHVlPVwiJyt5LmdldChcInNlbGVjdFwiLHUuZm9ybWF0U3VibWl0KSsnXCInOlwiXCIpK1wiPlwiKVswXSx3Lm9uKFwiY2hhbmdlLlwiK3QuaWQsZnVuY3Rpb24oKXt5Ll9oaWRkZW4udmFsdWU9Zi52YWx1ZT95LmdldChcInNlbGVjdFwiLHUuZm9ybWF0U3VibWl0KTpcIlwifSksdS5jb250YWluZXI/YSh1LmNvbnRhaW5lcikuYXBwZW5kKHkuX2hpZGRlbik6dy5hZnRlcih5Ll9oaWRkZW4pfWZ1bmN0aW9uIHEoYSl7dmFyIGI9YS5rZXlDb2RlLGM9L14oOHw0NikkLy50ZXN0KGIpO3JldHVybiAyNz09Yj8oeS5jbG9zZSgpLCExKTp2b2lkKCgzMj09Ynx8Y3x8IXQub3BlbiYmeS5jb21wb25lbnQua2V5W2JdKSYmKGEucHJldmVudERlZmF1bHQoKSxhLnN0b3BQcm9wYWdhdGlvbigpLGM/eS5jbGVhcigpLmNsb3NlKCk6eS5vcGVuKCkpKX1mdW5jdGlvbiByKGEpe2Euc3RvcFByb3BhZ2F0aW9uKCksXCJmb2N1c1wiPT1hLnR5cGUmJnkuJHJvb3QuYWRkQ2xhc3Modi5mb2N1c2VkKSx5Lm9wZW4oKX1pZighZilyZXR1cm4gYjt2YXIgcz0hMSx0PXtpZDpmLmlkfHxcIlBcIitNYXRoLmFicyh+fihNYXRoLnJhbmRvbSgpKm5ldyBEYXRlKSl9LHU9aT9hLmV4dGVuZCghMCx7fSxpLmRlZmF1bHRzLGwpOmx8fHt9LHY9YS5leHRlbmQoe30sYi5rbGFzc2VzKCksdS5rbGFzcyksdz1hKGYpLHg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGFydCgpfSx5PXgucHJvdG90eXBlPXtjb25zdHJ1Y3Rvcjp4LCRub2RlOncsc3RhcnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdCYmdC5zdGFydD95Oih0Lm1ldGhvZHM9e30sdC5zdGFydD0hMCx0Lm9wZW49ITEsdC50eXBlPWYudHlwZSxmLmF1dG9mb2N1cz1mPT1oKCksZi5yZWFkT25seT0hdS5lZGl0YWJsZSxmLmlkPWYuaWR8fHQuaWQsXCJ0ZXh0XCIhPWYudHlwZSYmKGYudHlwZT1cInRleHRcIikseS5jb21wb25lbnQ9bmV3IGkoeSx1KSx5LiRyb290PWEoYi5fLm5vZGUoXCJkaXZcIixtKCksdi5waWNrZXIsJ2lkPVwiJytmLmlkKydfcm9vdFwiIHRhYmluZGV4PVwiMFwiJykpLG8oKSx1LmZvcm1hdFN1Ym1pdCYmcCgpLG4oKSx1LmNvbnRhaW5lcj9hKHUuY29udGFpbmVyKS5hcHBlbmQoeS4kcm9vdCk6dy5hZnRlcih5LiRyb290KSx5Lm9uKHtzdGFydDp5LmNvbXBvbmVudC5vblN0YXJ0LHJlbmRlcjp5LmNvbXBvbmVudC5vblJlbmRlcixzdG9wOnkuY29tcG9uZW50Lm9uU3RvcCxvcGVuOnkuY29tcG9uZW50Lm9uT3BlbixjbG9zZTp5LmNvbXBvbmVudC5vbkNsb3NlLHNldDp5LmNvbXBvbmVudC5vblNldH0pLm9uKHtzdGFydDp1Lm9uU3RhcnQscmVuZGVyOnUub25SZW5kZXIsc3RvcDp1Lm9uU3RvcCxvcGVuOnUub25PcGVuLGNsb3NlOnUub25DbG9zZSxzZXQ6dS5vblNldH0pLHM9Yyh5LiRyb290LmNoaWxkcmVuKClbMF0pLGYuYXV0b2ZvY3VzJiZ5Lm9wZW4oKSx5LnRyaWdnZXIoXCJzdGFydFwiKS50cmlnZ2VyKFwicmVuZGVyXCIpKX0scmVuZGVyOmZ1bmN0aW9uKGEpe3JldHVybiBhP3kuJHJvb3QuaHRtbChtKCkpOnkuJHJvb3QuZmluZChcIi5cIit2LmJveCkuaHRtbCh5LmNvbXBvbmVudC5ub2Rlcyh0Lm9wZW4pKSx5LnRyaWdnZXIoXCJyZW5kZXJcIil9LHN0b3A6ZnVuY3Rpb24oKXtyZXR1cm4gdC5zdGFydD8oeS5jbG9zZSgpLHkuX2hpZGRlbiYmeS5faGlkZGVuLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoeS5faGlkZGVuKSx5LiRyb290LnJlbW92ZSgpLHcucmVtb3ZlQ2xhc3Modi5pbnB1dCkucmVtb3ZlRGF0YShnKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dy5vZmYoXCIuXCIrdC5pZCl9LDApLGYudHlwZT10LnR5cGUsZi5yZWFkT25seT0hMSx5LnRyaWdnZXIoXCJzdG9wXCIpLHQubWV0aG9kcz17fSx0LnN0YXJ0PSExLHkpOnl9LG9wZW46ZnVuY3Rpb24oYyl7cmV0dXJuIHQub3Blbj95Oih3LmFkZENsYXNzKHYuYWN0aXZlKSxlKGYsXCJleHBhbmRlZFwiLCEwKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7eS4kcm9vdC5hZGRDbGFzcyh2Lm9wZW5lZCksZSh5LiRyb290WzBdLFwiaGlkZGVuXCIsITEpfSwwKSxjIT09ITEmJih0Lm9wZW49ITAscyYmay5jc3MoXCJvdmVyZmxvd1wiLFwiaGlkZGVuXCIpLmNzcyhcInBhZGRpbmctcmlnaHRcIixcIis9XCIrZCgpKSx5LiRyb290LmVxKDApLmZvY3VzKCksai5vbihcImNsaWNrLlwiK3QuaWQrXCIgZm9jdXNpbi5cIit0LmlkLGZ1bmN0aW9uKGEpe3ZhciBiPWEudGFyZ2V0O2IhPWYmJmIhPWRvY3VtZW50JiYzIT1hLndoaWNoJiZ5LmNsb3NlKGI9PT15LiRyb290LmNoaWxkcmVuKClbMF0pfSkub24oXCJrZXlkb3duLlwiK3QuaWQsZnVuY3Rpb24oYyl7dmFyIGQ9Yy5rZXlDb2RlLGU9eS5jb21wb25lbnQua2V5W2RdLGY9Yy50YXJnZXQ7Mjc9PWQ/eS5jbG9zZSghMCk6ZiE9eS4kcm9vdFswXXx8IWUmJjEzIT1kP2EuY29udGFpbnMoeS4kcm9vdFswXSxmKSYmMTM9PWQmJihjLnByZXZlbnREZWZhdWx0KCksZi5jbGljaygpKTooYy5wcmV2ZW50RGVmYXVsdCgpLGU/Yi5fLnRyaWdnZXIoeS5jb21wb25lbnQua2V5LmdvLHksW2IuXy50cmlnZ2VyKGUpXSk6eS4kcm9vdC5maW5kKFwiLlwiK3YuaGlnaGxpZ2h0ZWQpLmhhc0NsYXNzKHYuZGlzYWJsZWQpfHx5LnNldChcInNlbGVjdFwiLHkuY29tcG9uZW50Lml0ZW0uaGlnaGxpZ2h0KS5jbG9zZSgpKX0pKSx5LnRyaWdnZXIoXCJvcGVuXCIpKX0sY2xvc2U6ZnVuY3Rpb24oYSl7cmV0dXJuIGEmJih5LiRyb290Lm9mZihcImZvY3VzLnRvT3BlblwiKS5lcSgwKS5mb2N1cygpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXt5LiRyb290Lm9uKFwiZm9jdXMudG9PcGVuXCIscil9LDApKSx3LnJlbW92ZUNsYXNzKHYuYWN0aXZlKSxlKGYsXCJleHBhbmRlZFwiLCExKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7eS4kcm9vdC5yZW1vdmVDbGFzcyh2Lm9wZW5lZCtcIiBcIit2LmZvY3VzZWQpLGUoeS4kcm9vdFswXSxcImhpZGRlblwiLCEwKX0sMCksdC5vcGVuPyh0Lm9wZW49ITEscyYmay5jc3MoXCJvdmVyZmxvd1wiLFwiXCIpLmNzcyhcInBhZGRpbmctcmlnaHRcIixcIi09XCIrZCgpKSxqLm9mZihcIi5cIit0LmlkKSx5LnRyaWdnZXIoXCJjbG9zZVwiKSk6eX0sY2xlYXI6ZnVuY3Rpb24oYSl7cmV0dXJuIHkuc2V0KFwiY2xlYXJcIixudWxsLGEpfSxzZXQ6ZnVuY3Rpb24oYixjLGQpe3ZhciBlLGYsZz1hLmlzUGxhaW5PYmplY3QoYiksaD1nP2I6e307aWYoZD1nJiZhLmlzUGxhaW5PYmplY3QoYyk/YzpkfHx7fSxiKXtnfHwoaFtiXT1jKTtmb3IoZSBpbiBoKWY9aFtlXSxlIGluIHkuY29tcG9uZW50Lml0ZW0mJih2b2lkIDA9PT1mJiYoZj1udWxsKSx5LmNvbXBvbmVudC5zZXQoZSxmLGQpKSwoXCJzZWxlY3RcIj09ZXx8XCJjbGVhclwiPT1lKSYmdy52YWwoXCJjbGVhclwiPT1lP1wiXCI6eS5nZXQoZSx1LmZvcm1hdCkpLnRyaWdnZXIoXCJjaGFuZ2VcIik7eS5yZW5kZXIoKX1yZXR1cm4gZC5tdXRlZD95OnkudHJpZ2dlcihcInNldFwiLGgpfSxnZXQ6ZnVuY3Rpb24oYSxjKXtpZihhPWF8fFwidmFsdWVcIixudWxsIT10W2FdKXJldHVybiB0W2FdO2lmKFwidmFsdWVTdWJtaXRcIj09YSl7aWYoeS5faGlkZGVuKXJldHVybiB5Ll9oaWRkZW4udmFsdWU7YT1cInZhbHVlXCJ9aWYoXCJ2YWx1ZVwiPT1hKXJldHVybiBmLnZhbHVlO2lmKGEgaW4geS5jb21wb25lbnQuaXRlbSl7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGMpe3ZhciBkPXkuY29tcG9uZW50LmdldChhKTtyZXR1cm4gZD9iLl8udHJpZ2dlcih5LmNvbXBvbmVudC5mb3JtYXRzLnRvU3RyaW5nLHkuY29tcG9uZW50LFtjLGRdKTpcIlwifXJldHVybiB5LmNvbXBvbmVudC5nZXQoYSl9fSxvbjpmdW5jdGlvbihiLGMsZCl7dmFyIGUsZixnPWEuaXNQbGFpbk9iamVjdChiKSxoPWc/Yjp7fTtpZihiKXtnfHwoaFtiXT1jKTtmb3IoZSBpbiBoKWY9aFtlXSxkJiYoZT1cIl9cIitlKSx0Lm1ldGhvZHNbZV09dC5tZXRob2RzW2VdfHxbXSx0Lm1ldGhvZHNbZV0ucHVzaChmKX1yZXR1cm4geX0sb2ZmOmZ1bmN0aW9uKCl7dmFyIGEsYixjPWFyZ3VtZW50cztmb3IoYT0wLG5hbWVzQ291bnQ9Yy5sZW5ndGg7YTxuYW1lc0NvdW50O2ErPTEpYj1jW2FdLGIgaW4gdC5tZXRob2RzJiZkZWxldGUgdC5tZXRob2RzW2JdO3JldHVybiB5fSx0cmlnZ2VyOmZ1bmN0aW9uKGEsYyl7dmFyIGQ9ZnVuY3Rpb24oYSl7dmFyIGQ9dC5tZXRob2RzW2FdO2QmJmQubWFwKGZ1bmN0aW9uKGEpe2IuXy50cmlnZ2VyKGEseSxbY10pfSl9O3JldHVybiBkKFwiX1wiK2EpLGQoYSkseX19O3JldHVybiBuZXcgeH1mdW5jdGlvbiBjKGEpe3ZhciBiLGM9XCJwb3NpdGlvblwiO3JldHVybiBhLmN1cnJlbnRTdHlsZT9iPWEuY3VycmVudFN0eWxlW2NdOndpbmRvdy5nZXRDb21wdXRlZFN0eWxlJiYoYj1nZXRDb21wdXRlZFN0eWxlKGEpW2NdKSxcImZpeGVkXCI9PWJ9ZnVuY3Rpb24gZCgpe2lmKGsuaGVpZ2h0KCk8PWkuaGVpZ2h0KCkpcmV0dXJuIDA7dmFyIGI9YSgnPGRpdiBzdHlsZT1cInZpc2liaWxpdHk6aGlkZGVuO3dpZHRoOjEwMHB4XCIgLz4nKS5hcHBlbmRUbyhcImJvZHlcIiksYz1iWzBdLm9mZnNldFdpZHRoO2IuY3NzKFwib3ZlcmZsb3dcIixcInNjcm9sbFwiKTt2YXIgZD1hKCc8ZGl2IHN0eWxlPVwid2lkdGg6MTAwJVwiIC8+JykuYXBwZW5kVG8oYiksZT1kWzBdLm9mZnNldFdpZHRoO3JldHVybiBiLnJlbW92ZSgpLGMtZX1mdW5jdGlvbiBlKGIsYyxkKXtpZihhLmlzUGxhaW5PYmplY3QoYykpZm9yKHZhciBlIGluIGMpZihiLGUsY1tlXSk7ZWxzZSBmKGIsYyxkKX1mdW5jdGlvbiBmKGEsYixjKXthLnNldEF0dHJpYnV0ZSgoXCJyb2xlXCI9PWI/XCJcIjpcImFyaWEtXCIpK2IsYyl9ZnVuY3Rpb24gZyhiLGMpe2EuaXNQbGFpbk9iamVjdChiKXx8KGI9e2F0dHJpYnV0ZTpjfSksYz1cIlwiO2Zvcih2YXIgZCBpbiBiKXt2YXIgZT0oXCJyb2xlXCI9PWQ/XCJcIjpcImFyaWEtXCIpK2QsZj1iW2RdO2MrPW51bGw9PWY/XCJcIjplKyc9XCInK2JbZF0rJ1wiJ31yZXR1cm4gY31mdW5jdGlvbiBoKCl7dHJ5e3JldHVybiBkb2N1bWVudC5hY3RpdmVFbGVtZW50fWNhdGNoKGEpe319dmFyIGk9YSh3aW5kb3cpLGo9YShkb2N1bWVudCksaz1hKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCk7cmV0dXJuIGIua2xhc3Nlcz1mdW5jdGlvbihhKXtyZXR1cm4gYT1hfHxcInBpY2tlclwiLHtwaWNrZXI6YSxvcGVuZWQ6YStcIi0tb3BlbmVkXCIsZm9jdXNlZDphK1wiLS1mb2N1c2VkXCIsaW5wdXQ6YStcIl9faW5wdXRcIixhY3RpdmU6YStcIl9faW5wdXQtLWFjdGl2ZVwiLHRhcmdldDphK1wiX19pbnB1dC0tdGFyZ2V0XCIsaG9sZGVyOmErXCJfX2hvbGRlclwiLGZyYW1lOmErXCJfX2ZyYW1lXCIsd3JhcDphK1wiX193cmFwXCIsYm94OmErXCJfX2JveFwifX0sYi5fPXtncm91cDpmdW5jdGlvbihhKXtmb3IodmFyIGMsZD1cIlwiLGU9Yi5fLnRyaWdnZXIoYS5taW4sYSk7ZTw9Yi5fLnRyaWdnZXIoYS5tYXgsYSxbZV0pO2UrPWEuaSljPWIuXy50cmlnZ2VyKGEuaXRlbSxhLFtlXSksZCs9Yi5fLm5vZGUoYS5ub2RlLGNbMF0sY1sxXSxjWzJdKTtyZXR1cm4gZH0sbm9kZTpmdW5jdGlvbihiLGMsZCxlKXtyZXR1cm4gYz8oYz1hLmlzQXJyYXkoYyk/Yy5qb2luKFwiXCIpOmMsZD1kPycgY2xhc3M9XCInK2QrJ1wiJzpcIlwiLGU9ZT9cIiBcIitlOlwiXCIsXCI8XCIrYitkK2UrXCI+XCIrYytcIjwvXCIrYitcIj5cIik6XCJcIn0sbGVhZDpmdW5jdGlvbihhKXtyZXR1cm4oMTA+YT9cIjBcIjpcIlwiKSthfSx0cmlnZ2VyOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBhP2EuYXBwbHkoYixjfHxbXSk6YX0sZGlnaXRzOmZ1bmN0aW9uKGEpe3JldHVybi9cXGQvLnRlc3QoYVsxXSk/MjoxfSxpc0RhdGU6ZnVuY3Rpb24oYSl7cmV0dXJue30udG9TdHJpbmcuY2FsbChhKS5pbmRleE9mKFwiRGF0ZVwiKT4tMSYmdGhpcy5pc0ludGVnZXIoYS5nZXREYXRlKCkpfSxpc0ludGVnZXI6ZnVuY3Rpb24oYSl7cmV0dXJue30udG9TdHJpbmcuY2FsbChhKS5pbmRleE9mKFwiTnVtYmVyXCIpPi0xJiZhJTE9PT0wfSxhcmlhQXR0cjpnfSxiLmV4dGVuZD1mdW5jdGlvbihjLGQpe2EuZm5bY109ZnVuY3Rpb24oZSxmKXt2YXIgZz10aGlzLmRhdGEoYyk7cmV0dXJuXCJwaWNrZXJcIj09ZT9nOmcmJlwic3RyaW5nXCI9PXR5cGVvZiBlP2IuXy50cmlnZ2VyKGdbZV0sZyxbZl0pOnRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBmPWEodGhpcyk7Zi5kYXRhKGMpfHxuZXcgYih0aGlzLGMsZCxlKX0pfSxhLmZuW2NdLmRlZmF1bHRzPWQuZGVmYXVsdHN9LGJ9KSxmdW5jdGlvbihhKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtcInBpY2tlclwiLFwianF1ZXJ5XCJdLGEpOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP21vZHVsZS5leHBvcnRzPWEocmVxdWlyZShcIi4vcGlja2VyLmpzXCIpLHJlcXVpcmUoXCJqcXVlcnlcIikpOmEoUGlja2VyLGpRdWVyeSl9KGZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhhLGIpe3ZhciBjPXRoaXMsZD1hLiRub2RlWzBdLGU9ZC52YWx1ZSxmPWEuJG5vZGUuZGF0YShcInZhbHVlXCIpLGc9Znx8ZSxoPWY/Yi5mb3JtYXRTdWJtaXQ6Yi5mb3JtYXQsaT1mdW5jdGlvbigpe3JldHVybiBkLmN1cnJlbnRTdHlsZT9cInJ0bFwiPT1kLmN1cnJlbnRTdHlsZS5kaXJlY3Rpb246XCJydGxcIj09Z2V0Q29tcHV0ZWRTdHlsZShhLiRyb290WzBdKS5kaXJlY3Rpb259O2Muc2V0dGluZ3M9YixjLiRub2RlPWEuJG5vZGUsYy5xdWV1ZT17bWluOlwibWVhc3VyZSBjcmVhdGVcIixtYXg6XCJtZWFzdXJlIGNyZWF0ZVwiLG5vdzpcIm5vdyBjcmVhdGVcIixzZWxlY3Q6XCJwYXJzZSBjcmVhdGUgdmFsaWRhdGVcIixoaWdobGlnaHQ6XCJwYXJzZSBuYXZpZ2F0ZSBjcmVhdGUgdmFsaWRhdGVcIix2aWV3OlwicGFyc2UgY3JlYXRlIHZhbGlkYXRlIHZpZXdzZXRcIixkaXNhYmxlOlwiZGVhY3RpdmF0ZVwiLGVuYWJsZTpcImFjdGl2YXRlXCJ9LGMuaXRlbT17fSxjLml0ZW0uY2xlYXI9bnVsbCxjLml0ZW0uZGlzYWJsZT0oYi5kaXNhYmxlfHxbXSkuc2xpY2UoMCksYy5pdGVtLmVuYWJsZT0tZnVuY3Rpb24oYSl7cmV0dXJuIGFbMF09PT0hMD9hLnNoaWZ0KCk6LTF9KGMuaXRlbS5kaXNhYmxlKSxjLnNldChcIm1pblwiLGIubWluKS5zZXQoXCJtYXhcIixiLm1heCkuc2V0KFwibm93XCIpLGc/Yy5zZXQoXCJzZWxlY3RcIixnLHtmb3JtYXQ6aH0pOmMuc2V0KFwic2VsZWN0XCIsbnVsbCkuc2V0KFwiaGlnaGxpZ2h0XCIsYy5pdGVtLm5vdyksYy5rZXk9ezQwOjcsMzg6LTcsMzk6ZnVuY3Rpb24oKXtyZXR1cm4gaSgpPy0xOjF9LDM3OmZ1bmN0aW9uKCl7cmV0dXJuIGkoKT8xOi0xfSxnbzpmdW5jdGlvbihhKXt2YXIgYj1jLml0ZW0uaGlnaGxpZ2h0LGQ9bmV3IERhdGUoYi55ZWFyLGIubW9udGgsYi5kYXRlK2EpO2Muc2V0KFwiaGlnaGxpZ2h0XCIsZCx7aW50ZXJ2YWw6YX0pLHRoaXMucmVuZGVyKCl9fSxhLm9uKFwicmVuZGVyXCIsZnVuY3Rpb24oKXthLiRyb290LmZpbmQoXCIuXCIrYi5rbGFzcy5zZWxlY3RNb250aCkub24oXCJjaGFuZ2VcIixmdW5jdGlvbigpe3ZhciBjPXRoaXMudmFsdWU7YyYmKGEuc2V0KFwiaGlnaGxpZ2h0XCIsW2EuZ2V0KFwidmlld1wiKS55ZWFyLGMsYS5nZXQoXCJoaWdobGlnaHRcIikuZGF0ZV0pLGEuJHJvb3QuZmluZChcIi5cIitiLmtsYXNzLnNlbGVjdE1vbnRoKS50cmlnZ2VyKFwiZm9jdXNcIikpfSksYS4kcm9vdC5maW5kKFwiLlwiK2Iua2xhc3Muc2VsZWN0WWVhcikub24oXCJjaGFuZ2VcIixmdW5jdGlvbigpe3ZhciBjPXRoaXMudmFsdWU7YyYmKGEuc2V0KFwiaGlnaGxpZ2h0XCIsW2MsYS5nZXQoXCJ2aWV3XCIpLm1vbnRoLGEuZ2V0KFwiaGlnaGxpZ2h0XCIpLmRhdGVdKSxhLiRyb290LmZpbmQoXCIuXCIrYi5rbGFzcy5zZWxlY3RZZWFyKS50cmlnZ2VyKFwiZm9jdXNcIikpfSl9LDEpLm9uKFwib3BlblwiLGZ1bmN0aW9uKCl7dmFyIGQ9XCJcIjtjLmRpc2FibGVkKGMuZ2V0KFwibm93XCIpKSYmKGQ9XCI6bm90KC5cIitiLmtsYXNzLmJ1dHRvblRvZGF5K1wiKVwiKSxhLiRyb290LmZpbmQoXCJidXR0b25cIitkK1wiLCBzZWxlY3RcIikuYXR0cihcImRpc2FibGVkXCIsITEpfSwxKS5vbihcImNsb3NlXCIsZnVuY3Rpb24oKXthLiRyb290LmZpbmQoXCJidXR0b24sIHNlbGVjdFwiKS5hdHRyKFwiZGlzYWJsZWRcIiwhMCl9LDEpfXZhciBkPTcsZT02LGY9YS5fO2MucHJvdG90eXBlLnNldD1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcyxlPWQuaXRlbTtyZXR1cm4gbnVsbD09PWI/KFwiY2xlYXJcIj09YSYmKGE9XCJzZWxlY3RcIiksZVthXT1iLGQpOihlW1wiZW5hYmxlXCI9PWE/XCJkaXNhYmxlXCI6XCJmbGlwXCI9PWE/XCJlbmFibGVcIjphXT1kLnF1ZXVlW2FdLnNwbGl0KFwiIFwiKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGI9ZFtlXShhLGIsYyl9KS5wb3AoKSxcInNlbGVjdFwiPT1hP2Quc2V0KFwiaGlnaGxpZ2h0XCIsZS5zZWxlY3QsYyk6XCJoaWdobGlnaHRcIj09YT9kLnNldChcInZpZXdcIixlLmhpZ2hsaWdodCxjKTphLm1hdGNoKC9eKGZsaXB8bWlufG1heHxkaXNhYmxlfGVuYWJsZSkkLykmJihlLnNlbGVjdCYmZC5kaXNhYmxlZChlLnNlbGVjdCkmJmQuc2V0KFwic2VsZWN0XCIsZS5zZWxlY3QsYyksZS5oaWdobGlnaHQmJmQuZGlzYWJsZWQoZS5oaWdobGlnaHQpJiZkLnNldChcImhpZ2hsaWdodFwiLGUuaGlnaGxpZ2h0LGMpKSxkKX0sYy5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLml0ZW1bYV19LGMucHJvdG90eXBlLmNyZWF0ZT1mdW5jdGlvbihhLGMsZCl7dmFyIGUsZz10aGlzO3JldHVybiBjPXZvaWQgMD09PWM/YTpjLGM9PS0oMS8wKXx8Yz09MS8wP2U9YzpiLmlzUGxhaW5PYmplY3QoYykmJmYuaXNJbnRlZ2VyKGMucGljayk/Yz1jLm9iajpiLmlzQXJyYXkoYyk/KGM9bmV3IERhdGUoY1swXSxjWzFdLGNbMl0pLGM9Zi5pc0RhdGUoYyk/YzpnLmNyZWF0ZSgpLm9iaik6Yz1mLmlzSW50ZWdlcihjKXx8Zi5pc0RhdGUoYyk/Zy5ub3JtYWxpemUobmV3IERhdGUoYyksZCk6Zy5ub3coYSxjLGQpLHt5ZWFyOmV8fGMuZ2V0RnVsbFllYXIoKSxtb250aDplfHxjLmdldE1vbnRoKCksZGF0ZTplfHxjLmdldERhdGUoKSxkYXk6ZXx8Yy5nZXREYXkoKSxvYmo6ZXx8YyxwaWNrOmV8fGMuZ2V0VGltZSgpfX0sYy5wcm90b3R5cGUuY3JlYXRlUmFuZ2U9ZnVuY3Rpb24oYSxjKXt2YXIgZD10aGlzLGU9ZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT0hMHx8Yi5pc0FycmF5KGEpfHxmLmlzRGF0ZShhKT9kLmNyZWF0ZShhKTphfTtyZXR1cm4gZi5pc0ludGVnZXIoYSl8fChhPWUoYSkpLGYuaXNJbnRlZ2VyKGMpfHwoYz1lKGMpKSxmLmlzSW50ZWdlcihhKSYmYi5pc1BsYWluT2JqZWN0KGMpP2E9W2MueWVhcixjLm1vbnRoLGMuZGF0ZSthXTpmLmlzSW50ZWdlcihjKSYmYi5pc1BsYWluT2JqZWN0KGEpJiYoYz1bYS55ZWFyLGEubW9udGgsYS5kYXRlK2NdKSx7ZnJvbTplKGEpLHRvOmUoYyl9fSxjLnByb3RvdHlwZS53aXRoaW5SYW5nZT1mdW5jdGlvbihhLGIpe3JldHVybiBhPXRoaXMuY3JlYXRlUmFuZ2UoYS5mcm9tLGEudG8pLGIucGljaz49YS5mcm9tLnBpY2smJmIucGljazw9YS50by5waWNrfSxjLnByb3RvdHlwZS5vdmVybGFwUmFuZ2VzPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcztyZXR1cm4gYT1jLmNyZWF0ZVJhbmdlKGEuZnJvbSxhLnRvKSxiPWMuY3JlYXRlUmFuZ2UoYi5mcm9tLGIudG8pLGMud2l0aGluUmFuZ2UoYSxiLmZyb20pfHxjLndpdGhpblJhbmdlKGEsYi50byl8fGMud2l0aGluUmFuZ2UoYixhLmZyb20pfHxjLndpdGhpblJhbmdlKGIsYS50byl9LGMucHJvdG90eXBlLm5vdz1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIGI9bmV3IERhdGUsYyYmYy5yZWwmJmIuc2V0RGF0ZShiLmdldERhdGUoKStjLnJlbCksdGhpcy5ub3JtYWxpemUoYixjKX0sYy5wcm90b3R5cGUubmF2aWdhdGU9ZnVuY3Rpb24oYSxjLGQpe3ZhciBlLGYsZyxoLGk9Yi5pc0FycmF5KGMpLGo9Yi5pc1BsYWluT2JqZWN0KGMpLGs9dGhpcy5pdGVtLnZpZXc7aWYoaXx8ail7Zm9yKGo/KGY9Yy55ZWFyLGc9Yy5tb250aCxoPWMuZGF0ZSk6KGY9K2NbMF0sZz0rY1sxXSxoPStjWzJdKSxkJiZkLm5hdiYmayYmay5tb250aCE9PWcmJihmPWsueWVhcixnPWsubW9udGgpLGU9bmV3IERhdGUoZixnKyhkJiZkLm5hdj9kLm5hdjowKSwxKSxmPWUuZ2V0RnVsbFllYXIoKSxnPWUuZ2V0TW9udGgoKTtuZXcgRGF0ZShmLGcsaCkuZ2V0TW9udGgoKSE9PWc7KWgtPTE7Yz1bZixnLGhdfXJldHVybiBjfSxjLnByb3RvdHlwZS5ub3JtYWxpemU9ZnVuY3Rpb24oYSl7cmV0dXJuIGEuc2V0SG91cnMoMCwwLDAsMCksYX0sYy5wcm90b3R5cGUubWVhc3VyZT1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXM7cmV0dXJuIGI/XCJzdHJpbmdcIj09dHlwZW9mIGI/Yj1jLnBhcnNlKGEsYik6Zi5pc0ludGVnZXIoYikmJihiPWMubm93KGEsYix7cmVsOmJ9KSk6Yj1cIm1pblwiPT1hPy0oMS8wKToxLzAsYn0sYy5wcm90b3R5cGUudmlld3NldD1mdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmNyZWF0ZShbYi55ZWFyLGIubW9udGgsMV0pfSxjLnByb3RvdHlwZS52YWxpZGF0ZT1mdW5jdGlvbihhLGMsZCl7dmFyIGUsZyxoLGksaj10aGlzLGs9YyxsPWQmJmQuaW50ZXJ2YWw/ZC5pbnRlcnZhbDoxLG09LTE9PT1qLml0ZW0uZW5hYmxlLG49ai5pdGVtLm1pbixvPWouaXRlbS5tYXgscD1tJiZqLml0ZW0uZGlzYWJsZS5maWx0ZXIoZnVuY3Rpb24oYSl7aWYoYi5pc0FycmF5KGEpKXt2YXIgZD1qLmNyZWF0ZShhKS5waWNrO2Q8Yy5waWNrP2U9ITA6ZD5jLnBpY2smJihnPSEwKX1yZXR1cm4gZi5pc0ludGVnZXIoYSl9KS5sZW5ndGg7aWYoKCFkfHwhZC5uYXYpJiYoIW0mJmouZGlzYWJsZWQoYyl8fG0mJmouZGlzYWJsZWQoYykmJihwfHxlfHxnKXx8IW0mJihjLnBpY2s8PW4ucGlja3x8Yy5waWNrPj1vLnBpY2spKSlmb3IobSYmIXAmJighZyYmbD4wfHwhZSYmMD5sKSYmKGwqPS0xKTtqLmRpc2FibGVkKGMpJiYoTWF0aC5hYnMobCk+MSYmKGMubW9udGg8ay5tb250aHx8Yy5tb250aD5rLm1vbnRoKSYmKGM9ayxsPWw+MD8xOi0xKSxjLnBpY2s8PW4ucGljaz8oaD0hMCxsPTEsYz1qLmNyZWF0ZShbbi55ZWFyLG4ubW9udGgsbi5kYXRlKyhjLnBpY2s9PT1uLnBpY2s/MDotMSldKSk6Yy5waWNrPj1vLnBpY2smJihpPSEwLGw9LTEsYz1qLmNyZWF0ZShbby55ZWFyLG8ubW9udGgsby5kYXRlKyhjLnBpY2s9PT1vLnBpY2s/MDoxKV0pKSwhaHx8IWkpOyljPWouY3JlYXRlKFtjLnllYXIsYy5tb250aCxjLmRhdGUrbF0pO3JldHVybiBjfSxjLnByb3RvdHlwZS5kaXNhYmxlZD1mdW5jdGlvbihhKXt2YXIgYz10aGlzLGQ9Yy5pdGVtLmRpc2FibGUuZmlsdGVyKGZ1bmN0aW9uKGQpe3JldHVybiBmLmlzSW50ZWdlcihkKT9hLmRheT09PShjLnNldHRpbmdzLmZpcnN0RGF5P2Q6ZC0xKSU3OmIuaXNBcnJheShkKXx8Zi5pc0RhdGUoZCk/YS5waWNrPT09Yy5jcmVhdGUoZCkucGljazpiLmlzUGxhaW5PYmplY3QoZCk/Yy53aXRoaW5SYW5nZShkLGEpOnZvaWQgMDtcclxufSk7cmV0dXJuIGQ9ZC5sZW5ndGgmJiFkLmZpbHRlcihmdW5jdGlvbihhKXtyZXR1cm4gYi5pc0FycmF5KGEpJiZcImludmVydGVkXCI9PWFbM118fGIuaXNQbGFpbk9iamVjdChhKSYmYS5pbnZlcnRlZH0pLmxlbmd0aCwtMT09PWMuaXRlbS5lbmFibGU/IWQ6ZHx8YS5waWNrPGMuaXRlbS5taW4ucGlja3x8YS5waWNrPmMuaXRlbS5tYXgucGlja30sYy5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMsZT17fTtyZXR1cm4gYiYmXCJzdHJpbmdcIj09dHlwZW9mIGI/KGMmJmMuZm9ybWF0fHwoYz1jfHx7fSxjLmZvcm1hdD1kLnNldHRpbmdzLmZvcm1hdCksZC5mb3JtYXRzLnRvQXJyYXkoYy5mb3JtYXQpLm1hcChmdW5jdGlvbihhKXt2YXIgYz1kLmZvcm1hdHNbYV0sZz1jP2YudHJpZ2dlcihjLGQsW2IsZV0pOmEucmVwbGFjZSgvXiEvLFwiXCIpLmxlbmd0aDtjJiYoZVthXT1iLnN1YnN0cigwLGcpKSxiPWIuc3Vic3RyKGcpfSksW2UueXl5eXx8ZS55eSwrKGUubW18fGUubSktMSxlLmRkfHxlLmRdKTpifSxjLnByb3RvdHlwZS5mb3JtYXRzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhLGIsYyl7dmFyIGQ9YS5tYXRjaCgvXFx3Ky8pWzBdO3JldHVybiBjLm1tfHxjLm18fChjLm09Yi5pbmRleE9mKGQpKzEpLGQubGVuZ3RofWZ1bmN0aW9uIGIoYSl7cmV0dXJuIGEubWF0Y2goL1xcdysvKVswXS5sZW5ndGh9cmV0dXJue2Q6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT9mLmRpZ2l0cyhhKTpiLmRhdGV9LGRkOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE/MjpmLmxlYWQoYi5kYXRlKX0sZGRkOmZ1bmN0aW9uKGEsYyl7cmV0dXJuIGE/YihhKTp0aGlzLnNldHRpbmdzLndlZWtkYXlzU2hvcnRbYy5kYXldfSxkZGRkOmZ1bmN0aW9uKGEsYyl7cmV0dXJuIGE/YihhKTp0aGlzLnNldHRpbmdzLndlZWtkYXlzRnVsbFtjLmRheV19LG06ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT9mLmRpZ2l0cyhhKTpiLm1vbnRoKzF9LG1tOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE/MjpmLmxlYWQoYi5tb250aCsxKX0sbW1tOmZ1bmN0aW9uKGIsYyl7dmFyIGQ9dGhpcy5zZXR0aW5ncy5tb250aHNTaG9ydDtyZXR1cm4gYj9hKGIsZCxjKTpkW2MubW9udGhdfSxtbW1tOmZ1bmN0aW9uKGIsYyl7dmFyIGQ9dGhpcy5zZXR0aW5ncy5tb250aHNGdWxsO3JldHVybiBiP2EoYixkLGMpOmRbYy5tb250aF19LHl5OmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE/MjooXCJcIitiLnllYXIpLnNsaWNlKDIpfSx5eXl5OmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE/NDpiLnllYXJ9LHRvQXJyYXk6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuc3BsaXQoLyhkezEsNH18bXsxLDR9fHl7NH18eXl8IS4pL2cpfSx0b1N0cmluZzpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXM7cmV0dXJuIGMuZm9ybWF0cy50b0FycmF5KGEpLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gZi50cmlnZ2VyKGMuZm9ybWF0c1thXSxjLFswLGJdKXx8YS5yZXBsYWNlKC9eIS8sXCJcIil9KS5qb2luKFwiXCIpfX19KCksYy5wcm90b3R5cGUuaXNEYXRlRXhhY3Q9ZnVuY3Rpb24oYSxjKXt2YXIgZD10aGlzO3JldHVybiBmLmlzSW50ZWdlcihhKSYmZi5pc0ludGVnZXIoYyl8fFwiYm9vbGVhblwiPT10eXBlb2YgYSYmXCJib29sZWFuXCI9PXR5cGVvZiBjP2E9PT1jOihmLmlzRGF0ZShhKXx8Yi5pc0FycmF5KGEpKSYmKGYuaXNEYXRlKGMpfHxiLmlzQXJyYXkoYykpP2QuY3JlYXRlKGEpLnBpY2s9PT1kLmNyZWF0ZShjKS5waWNrOmIuaXNQbGFpbk9iamVjdChhKSYmYi5pc1BsYWluT2JqZWN0KGMpP2QuaXNEYXRlRXhhY3QoYS5mcm9tLGMuZnJvbSkmJmQuaXNEYXRlRXhhY3QoYS50byxjLnRvKTohMX0sYy5wcm90b3R5cGUuaXNEYXRlT3ZlcmxhcD1mdW5jdGlvbihhLGMpe3ZhciBkPXRoaXMsZT1kLnNldHRpbmdzLmZpcnN0RGF5PzE6MDtyZXR1cm4gZi5pc0ludGVnZXIoYSkmJihmLmlzRGF0ZShjKXx8Yi5pc0FycmF5KGMpKT8oYT1hJTcrZSxhPT09ZC5jcmVhdGUoYykuZGF5KzEpOmYuaXNJbnRlZ2VyKGMpJiYoZi5pc0RhdGUoYSl8fGIuaXNBcnJheShhKSk/KGM9YyU3K2UsYz09PWQuY3JlYXRlKGEpLmRheSsxKTpiLmlzUGxhaW5PYmplY3QoYSkmJmIuaXNQbGFpbk9iamVjdChjKT9kLm92ZXJsYXBSYW5nZXMoYSxjKTohMX0sYy5wcm90b3R5cGUuZmxpcEVuYWJsZT1mdW5jdGlvbihhKXt2YXIgYj10aGlzLml0ZW07Yi5lbmFibGU9YXx8KC0xPT1iLmVuYWJsZT8xOi0xKX0sYy5wcm90b3R5cGUuZGVhY3RpdmF0ZT1mdW5jdGlvbihhLGMpe3ZhciBkPXRoaXMsZT1kLml0ZW0uZGlzYWJsZS5zbGljZSgwKTtyZXR1cm5cImZsaXBcIj09Yz9kLmZsaXBFbmFibGUoKTpjPT09ITE/KGQuZmxpcEVuYWJsZSgxKSxlPVtdKTpjPT09ITA/KGQuZmxpcEVuYWJsZSgtMSksZT1bXSk6Yy5tYXAoZnVuY3Rpb24oYSl7Zm9yKHZhciBjLGc9MDtnPGUubGVuZ3RoO2crPTEpaWYoZC5pc0RhdGVFeGFjdChhLGVbZ10pKXtjPSEwO2JyZWFrfWN8fChmLmlzSW50ZWdlcihhKXx8Zi5pc0RhdGUoYSl8fGIuaXNBcnJheShhKXx8Yi5pc1BsYWluT2JqZWN0KGEpJiZhLmZyb20mJmEudG8pJiZlLnB1c2goYSl9KSxlfSxjLnByb3RvdHlwZS5hY3RpdmF0ZT1mdW5jdGlvbihhLGMpe3ZhciBkPXRoaXMsZT1kLml0ZW0uZGlzYWJsZSxnPWUubGVuZ3RoO3JldHVyblwiZmxpcFwiPT1jP2QuZmxpcEVuYWJsZSgpOmM9PT0hMD8oZC5mbGlwRW5hYmxlKDEpLGU9W10pOmM9PT0hMT8oZC5mbGlwRW5hYmxlKC0xKSxlPVtdKTpjLm1hcChmdW5jdGlvbihhKXt2YXIgYyxoLGksajtmb3IoaT0wO2c+aTtpKz0xKXtpZihoPWVbaV0sZC5pc0RhdGVFeGFjdChoLGEpKXtjPWVbaV09bnVsbCxqPSEwO2JyZWFrfWlmKGQuaXNEYXRlT3ZlcmxhcChoLGEpKXtiLmlzUGxhaW5PYmplY3QoYSk/KGEuaW52ZXJ0ZWQ9ITAsYz1hKTpiLmlzQXJyYXkoYSk/KGM9YSxjWzNdfHxjLnB1c2goXCJpbnZlcnRlZFwiKSk6Zi5pc0RhdGUoYSkmJihjPVthLmdldEZ1bGxZZWFyKCksYS5nZXRNb250aCgpLGEuZ2V0RGF0ZSgpLFwiaW52ZXJ0ZWRcIl0pO2JyZWFrfX1pZihjKWZvcihpPTA7Zz5pO2krPTEpaWYoZC5pc0RhdGVFeGFjdChlW2ldLGEpKXtlW2ldPW51bGw7YnJlYWt9aWYoailmb3IoaT0wO2c+aTtpKz0xKWlmKGQuaXNEYXRlT3ZlcmxhcChlW2ldLGEpKXtlW2ldPW51bGw7YnJlYWt9YyYmZS5wdXNoKGMpfSksZS5maWx0ZXIoZnVuY3Rpb24oYSl7cmV0dXJuIG51bGwhPWF9KX0sYy5wcm90b3R5cGUubm9kZXM9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcyxjPWIuc2V0dGluZ3MsZz1iLml0ZW0saD1nLm5vdyxpPWcuc2VsZWN0LGo9Zy5oaWdobGlnaHQsaz1nLnZpZXcsbD1nLmRpc2FibGUsbT1nLm1pbixuPWcubWF4LG89ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYy5maXJzdERheSYmKGEucHVzaChhLnNoaWZ0KCkpLGIucHVzaChiLnNoaWZ0KCkpKSxmLm5vZGUoXCJ0aGVhZFwiLGYubm9kZShcInRyXCIsZi5ncm91cCh7bWluOjAsbWF4OmQtMSxpOjEsbm9kZTpcInRoXCIsaXRlbTpmdW5jdGlvbihkKXtyZXR1cm5bYVtkXSxjLmtsYXNzLndlZWtkYXlzLCdzY29wZT1jb2wgdGl0bGU9XCInK2JbZF0rJ1wiJ119fSkpKX0oKGMuc2hvd1dlZWtkYXlzRnVsbD9jLndlZWtkYXlzRnVsbDpjLndlZWtkYXlzTGV0dGVyKS5zbGljZSgwKSxjLndlZWtkYXlzRnVsbC5zbGljZSgwKSkscD1mdW5jdGlvbihhKXtyZXR1cm4gZi5ub2RlKFwiZGl2XCIsXCIgXCIsYy5rbGFzc1tcIm5hdlwiKyhhP1wiTmV4dFwiOlwiUHJldlwiKV0rKGEmJmsueWVhcj49bi55ZWFyJiZrLm1vbnRoPj1uLm1vbnRofHwhYSYmay55ZWFyPD1tLnllYXImJmsubW9udGg8PW0ubW9udGg/XCIgXCIrYy5rbGFzcy5uYXZEaXNhYmxlZDpcIlwiKSxcImRhdGEtbmF2PVwiKyhhfHwtMSkrXCIgXCIrZi5hcmlhQXR0cih7cm9sZTpcImJ1dHRvblwiLGNvbnRyb2xzOmIuJG5vZGVbMF0uaWQrXCJfdGFibGVcIn0pKycgdGl0bGU9XCInKyhhP2MubGFiZWxNb250aE5leHQ6Yy5sYWJlbE1vbnRoUHJldikrJ1wiJyl9LHE9ZnVuY3Rpb24oZCl7dmFyIGU9Yy5zaG93TW9udGhzU2hvcnQ/Yy5tb250aHNTaG9ydDpjLm1vbnRoc0Z1bGw7cmV0dXJuXCJzaG9ydF9tb250aHNcIj09ZCYmKGU9Yy5tb250aHNTaG9ydCksYy5zZWxlY3RNb250aHMmJnZvaWQgMD09ZD9mLm5vZGUoXCJzZWxlY3RcIixmLmdyb3VwKHttaW46MCxtYXg6MTEsaToxLG5vZGU6XCJvcHRpb25cIixpdGVtOmZ1bmN0aW9uKGEpe3JldHVybltlW2FdLDAsXCJ2YWx1ZT1cIithKyhrLm1vbnRoPT1hP1wiIHNlbGVjdGVkXCI6XCJcIikrKGsueWVhcj09bS55ZWFyJiZhPG0ubW9udGh8fGsueWVhcj09bi55ZWFyJiZhPm4ubW9udGg/XCIgZGlzYWJsZWRcIjpcIlwiKV19fSksYy5rbGFzcy5zZWxlY3RNb250aCtcIiBicm93c2VyLWRlZmF1bHRcIiwoYT9cIlwiOlwiZGlzYWJsZWRcIikrXCIgXCIrZi5hcmlhQXR0cih7Y29udHJvbHM6Yi4kbm9kZVswXS5pZCtcIl90YWJsZVwifSkrJyB0aXRsZT1cIicrYy5sYWJlbE1vbnRoU2VsZWN0KydcIicpOlwic2hvcnRfbW9udGhzXCI9PWQ/bnVsbCE9aT9mLm5vZGUoXCJkaXZcIixlW2kubW9udGhdKTpmLm5vZGUoXCJkaXZcIixlW2subW9udGhdKTpmLm5vZGUoXCJkaXZcIixlW2subW9udGhdLGMua2xhc3MubW9udGgpfSxyPWZ1bmN0aW9uKGQpe3ZhciBlPWsueWVhcixnPWMuc2VsZWN0WWVhcnM9PT0hMD81On5+KGMuc2VsZWN0WWVhcnMvMik7aWYoZyl7dmFyIGg9bS55ZWFyLGk9bi55ZWFyLGo9ZS1nLGw9ZStnO2lmKGg+aiYmKGwrPWgtaixqPWgpLGw+aSl7dmFyIG89ai1oLHA9bC1pO2otPW8+cD9wOm8sbD1pfWlmKGMuc2VsZWN0WWVhcnMmJnZvaWQgMD09ZClyZXR1cm4gZi5ub2RlKFwic2VsZWN0XCIsZi5ncm91cCh7bWluOmosbWF4OmwsaToxLG5vZGU6XCJvcHRpb25cIixpdGVtOmZ1bmN0aW9uKGEpe3JldHVyblthLDAsXCJ2YWx1ZT1cIithKyhlPT1hP1wiIHNlbGVjdGVkXCI6XCJcIildfX0pLGMua2xhc3Muc2VsZWN0WWVhcitcIiBicm93c2VyLWRlZmF1bHRcIiwoYT9cIlwiOlwiZGlzYWJsZWRcIikrXCIgXCIrZi5hcmlhQXR0cih7Y29udHJvbHM6Yi4kbm9kZVswXS5pZCtcIl90YWJsZVwifSkrJyB0aXRsZT1cIicrYy5sYWJlbFllYXJTZWxlY3QrJ1wiJyl9cmV0dXJuXCJyYXdcIj09ZD9mLm5vZGUoXCJkaXZcIixlKTpmLm5vZGUoXCJkaXZcIixlLGMua2xhc3MueWVhcil9O3JldHVybiBjcmVhdGVEYXlMYWJlbD1mdW5jdGlvbigpe3JldHVybiBudWxsIT1pP2Yubm9kZShcImRpdlwiLGkuZGF0ZSk6Zi5ub2RlKFwiZGl2XCIsaC5kYXRlKX0sY3JlYXRlV2Vla2RheUxhYmVsPWZ1bmN0aW9uKCl7dmFyIGE7YT1udWxsIT1pP2kuZGF5OmguZGF5O3ZhciBiPWMud2Vla2RheXNGdWxsW2FdO3JldHVybiBifSxmLm5vZGUoXCJkaXZcIixmLm5vZGUoXCJkaXZcIixjcmVhdGVXZWVrZGF5TGFiZWwoKSxcInBpY2tlcl9fd2Vla2RheS1kaXNwbGF5XCIpK2Yubm9kZShcImRpdlwiLHEoXCJzaG9ydF9tb250aHNcIiksYy5rbGFzcy5tb250aF9kaXNwbGF5KStmLm5vZGUoXCJkaXZcIixjcmVhdGVEYXlMYWJlbCgpLGMua2xhc3MuZGF5X2Rpc3BsYXkpK2Yubm9kZShcImRpdlwiLHIoXCJyYXdcIiksYy5rbGFzcy55ZWFyX2Rpc3BsYXkpLGMua2xhc3MuZGF0ZV9kaXNwbGF5KStmLm5vZGUoXCJkaXZcIixmLm5vZGUoXCJkaXZcIiwoYy5zZWxlY3RZZWFycz9xKCkrcigpOnEoKStyKCkpK3AoKStwKDEpLGMua2xhc3MuaGVhZGVyKStmLm5vZGUoXCJ0YWJsZVwiLG8rZi5ub2RlKFwidGJvZHlcIixmLmdyb3VwKHttaW46MCxtYXg6ZS0xLGk6MSxub2RlOlwidHJcIixpdGVtOmZ1bmN0aW9uKGEpe3ZhciBlPWMuZmlyc3REYXkmJjA9PT1iLmNyZWF0ZShbay55ZWFyLGsubW9udGgsMV0pLmRheT8tNzowO3JldHVybltmLmdyb3VwKHttaW46ZCphLWsuZGF5K2UrMSxtYXg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5taW4rZC0xfSxpOjEsbm9kZTpcInRkXCIsaXRlbTpmdW5jdGlvbihhKXthPWIuY3JlYXRlKFtrLnllYXIsay5tb250aCxhKyhjLmZpcnN0RGF5PzE6MCldKTt2YXIgZD1pJiZpLnBpY2s9PWEucGljayxlPWomJmoucGljaz09YS5waWNrLGc9bCYmYi5kaXNhYmxlZChhKXx8YS5waWNrPG0ucGlja3x8YS5waWNrPm4ucGljayxvPWYudHJpZ2dlcihiLmZvcm1hdHMudG9TdHJpbmcsYixbYy5mb3JtYXQsYV0pO3JldHVybltmLm5vZGUoXCJkaXZcIixhLmRhdGUsZnVuY3Rpb24oYil7cmV0dXJuIGIucHVzaChrLm1vbnRoPT1hLm1vbnRoP2Mua2xhc3MuaW5mb2N1czpjLmtsYXNzLm91dGZvY3VzKSxoLnBpY2s9PWEucGljayYmYi5wdXNoKGMua2xhc3Mubm93KSxkJiZiLnB1c2goYy5rbGFzcy5zZWxlY3RlZCksZSYmYi5wdXNoKGMua2xhc3MuaGlnaGxpZ2h0ZWQpLGcmJmIucHVzaChjLmtsYXNzLmRpc2FibGVkKSxiLmpvaW4oXCIgXCIpfShbYy5rbGFzcy5kYXldKSxcImRhdGEtcGljaz1cIithLnBpY2srXCIgXCIrZi5hcmlhQXR0cih7cm9sZTpcImdyaWRjZWxsXCIsbGFiZWw6byxzZWxlY3RlZDpkJiZiLiRub2RlLnZhbCgpPT09bz8hMDpudWxsLGFjdGl2ZWRlc2NlbmRhbnQ6ZT8hMDpudWxsLGRpc2FibGVkOmc/ITA6bnVsbH0pKSxcIlwiLGYuYXJpYUF0dHIoe3JvbGU6XCJwcmVzZW50YXRpb25cIn0pXX19KV19fSkpLGMua2xhc3MudGFibGUsJ2lkPVwiJytiLiRub2RlWzBdLmlkKydfdGFibGVcIiAnK2YuYXJpYUF0dHIoe3JvbGU6XCJncmlkXCIsY29udHJvbHM6Yi4kbm9kZVswXS5pZCxyZWFkb25seTohMH0pKSxjLmtsYXNzLmNhbGVuZGFyX2NvbnRhaW5lcikrZi5ub2RlKFwiZGl2XCIsZi5ub2RlKFwiYnV0dG9uXCIsYy50b2RheSxcImJ0bi1mbGF0IHBpY2tlcl9fdG9kYXlcIixcInR5cGU9YnV0dG9uIGRhdGEtcGljaz1cIitoLnBpY2srKGEmJiFiLmRpc2FibGVkKGgpP1wiXCI6XCIgZGlzYWJsZWRcIikrXCIgXCIrZi5hcmlhQXR0cih7Y29udHJvbHM6Yi4kbm9kZVswXS5pZH0pKStmLm5vZGUoXCJidXR0b25cIixjLmNsZWFyLFwiYnRuLWZsYXQgcGlja2VyX19jbGVhclwiLFwidHlwZT1idXR0b24gZGF0YS1jbGVhcj0xXCIrKGE/XCJcIjpcIiBkaXNhYmxlZFwiKStcIiBcIitmLmFyaWFBdHRyKHtjb250cm9sczpiLiRub2RlWzBdLmlkfSkpK2Yubm9kZShcImJ1dHRvblwiLGMuY2xvc2UsXCJidG4tZmxhdCBwaWNrZXJfX2Nsb3NlXCIsXCJ0eXBlPWJ1dHRvbiBkYXRhLWNsb3NlPXRydWUgXCIrKGE/XCJcIjpcIiBkaXNhYmxlZFwiKStcIiBcIitmLmFyaWFBdHRyKHtjb250cm9sczpiLiRub2RlWzBdLmlkfSkpLGMua2xhc3MuZm9vdGVyKX0sYy5kZWZhdWx0cz1mdW5jdGlvbihhKXtyZXR1cm57bGFiZWxNb250aE5leHQ6XCJOZXh0IG1vbnRoXCIsbGFiZWxNb250aFByZXY6XCJQcmV2aW91cyBtb250aFwiLGxhYmVsTW9udGhTZWxlY3Q6XCJTZWxlY3QgYSBtb250aFwiLGxhYmVsWWVhclNlbGVjdDpcIlNlbGVjdCBhIHllYXJcIixtb250aHNGdWxsOltcIkphbnVhcnlcIixcIkZlYnJ1YXJ5XCIsXCJNYXJjaFwiLFwiQXByaWxcIixcIk1heVwiLFwiSnVuZVwiLFwiSnVseVwiLFwiQXVndXN0XCIsXCJTZXB0ZW1iZXJcIixcIk9jdG9iZXJcIixcIk5vdmVtYmVyXCIsXCJEZWNlbWJlclwiXSxtb250aHNTaG9ydDpbXCJKYW5cIixcIkZlYlwiLFwiTWFyXCIsXCJBcHJcIixcIk1heVwiLFwiSnVuXCIsXCJKdWxcIixcIkF1Z1wiLFwiU2VwXCIsXCJPY3RcIixcIk5vdlwiLFwiRGVjXCJdLHdlZWtkYXlzRnVsbDpbXCJTdW5kYXlcIixcIk1vbmRheVwiLFwiVHVlc2RheVwiLFwiV2VkbmVzZGF5XCIsXCJUaHVyc2RheVwiLFwiRnJpZGF5XCIsXCJTYXR1cmRheVwiXSx3ZWVrZGF5c1Nob3J0OltcIlN1blwiLFwiTW9uXCIsXCJUdWVcIixcIldlZFwiLFwiVGh1XCIsXCJGcmlcIixcIlNhdFwiXSx3ZWVrZGF5c0xldHRlcjpbXCJTXCIsXCJNXCIsXCJUXCIsXCJXXCIsXCJUXCIsXCJGXCIsXCJTXCJdLHRvZGF5OlwiVG9kYXlcIixjbGVhcjpcIkNsZWFyXCIsY2xvc2U6XCJDbG9zZVwiLGZvcm1hdDpcImQgbW1tbSwgeXl5eVwiLGtsYXNzOnt0YWJsZTphK1widGFibGVcIixoZWFkZXI6YStcImhlYWRlclwiLGRhdGVfZGlzcGxheTphK1wiZGF0ZS1kaXNwbGF5XCIsZGF5X2Rpc3BsYXk6YStcImRheS1kaXNwbGF5XCIsbW9udGhfZGlzcGxheTphK1wibW9udGgtZGlzcGxheVwiLHllYXJfZGlzcGxheTphK1wieWVhci1kaXNwbGF5XCIsY2FsZW5kYXJfY29udGFpbmVyOmErXCJjYWxlbmRhci1jb250YWluZXJcIixuYXZQcmV2OmErXCJuYXYtLXByZXZcIixuYXZOZXh0OmErXCJuYXYtLW5leHRcIixuYXZEaXNhYmxlZDphK1wibmF2LS1kaXNhYmxlZFwiLG1vbnRoOmErXCJtb250aFwiLHllYXI6YStcInllYXJcIixzZWxlY3RNb250aDphK1wic2VsZWN0LS1tb250aFwiLHNlbGVjdFllYXI6YStcInNlbGVjdC0teWVhclwiLHdlZWtkYXlzOmErXCJ3ZWVrZGF5XCIsZGF5OmErXCJkYXlcIixkaXNhYmxlZDphK1wiZGF5LS1kaXNhYmxlZFwiLHNlbGVjdGVkOmErXCJkYXktLXNlbGVjdGVkXCIsaGlnaGxpZ2h0ZWQ6YStcImRheS0taGlnaGxpZ2h0ZWRcIixub3c6YStcImRheS0tdG9kYXlcIixpbmZvY3VzOmErXCJkYXktLWluZm9jdXNcIixvdXRmb2N1czphK1wiZGF5LS1vdXRmb2N1c1wiLGZvb3RlcjphK1wiZm9vdGVyXCIsYnV0dG9uQ2xlYXI6YStcImJ1dHRvbi0tY2xlYXJcIixidXR0b25Ub2RheTphK1wiYnV0dG9uLS10b2RheVwiLGJ1dHRvbkNsb3NlOmErXCJidXR0b24tLWNsb3NlXCJ9fX0oYS5rbGFzc2VzKCkucGlja2VyK1wiX19cIiksYS5leHRlbmQoXCJwaWNrYWRhdGVcIixjKX0pLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXt2YXIgYj0rYSh0aGlzKS5hdHRyKFwibGVuZ3RoXCIpLGM9K2EodGhpcykudmFsKCkubGVuZ3RoLGQ9Yj49YzthKHRoaXMpLnBhcmVudCgpLmZpbmQoJ3NwYW5bY2xhc3M9XCJjaGFyYWN0ZXItY291bnRlclwiXScpLmh0bWwoYytcIi9cIitiKSxlKGQsYSh0aGlzKSl9ZnVuY3Rpb24gYyhiKXt2YXIgYz1iLnBhcmVudCgpLmZpbmQoJ3NwYW5bY2xhc3M9XCJjaGFyYWN0ZXItY291bnRlclwiXScpO2MubGVuZ3RofHwoYz1hKFwiPHNwYW4vPlwiKS5hZGRDbGFzcyhcImNoYXJhY3Rlci1jb3VudGVyXCIpLmNzcyhcImZsb2F0XCIsXCJyaWdodFwiKS5jc3MoXCJmb250LXNpemVcIixcIjEycHhcIikuY3NzKFwiaGVpZ2h0XCIsMSksYi5wYXJlbnQoKS5hcHBlbmQoYykpfWZ1bmN0aW9uIGQoKXthKHRoaXMpLnBhcmVudCgpLmZpbmQoJ3NwYW5bY2xhc3M9XCJjaGFyYWN0ZXItY291bnRlclwiXScpLmh0bWwoXCJcIil9ZnVuY3Rpb24gZShhLGIpe3ZhciBjPWIuaGFzQ2xhc3MoXCJpbnZhbGlkXCIpO2EmJmM/Yi5yZW1vdmVDbGFzcyhcImludmFsaWRcIik6YXx8Y3x8KGIucmVtb3ZlQ2xhc3MoXCJ2YWxpZFwiKSxiLmFkZENsYXNzKFwiaW52YWxpZFwiKSl9YS5mbi5jaGFyYWN0ZXJDb3VudGVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBlPWEodGhpcyksZj1lLnBhcmVudCgpLmZpbmQoJ3NwYW5bY2xhc3M9XCJjaGFyYWN0ZXItY291bnRlclwiXScpO2lmKCFmLmxlbmd0aCl7dmFyIGc9dm9pZCAwIT09ZS5hdHRyKFwibGVuZ3RoXCIpO2cmJihlLm9uKFwiaW5wdXRcIixiKSxlLm9uKFwiZm9jdXNcIixiKSxlLm9uKFwiYmx1clwiLGQpLGMoZSkpfX0pfSxhKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe2EoXCJpbnB1dCwgdGV4dGFyZWFcIikuY2hhcmFjdGVyQ291bnRlcigpfSl9KGpRdWVyeSksZnVuY3Rpb24oYSl7dmFyIGI9e2luaXQ6ZnVuY3Rpb24oYil7dmFyIGM9e3RpbWVfY29uc3RhbnQ6MjAwLGRpc3Q6LTEwMCxzaGlmdDowLHBhZGRpbmc6MCxmdWxsX3dpZHRoOiExLGluZGljYXRvcnM6ITEsbm9fd3JhcDohMX07cmV0dXJuIGI9YS5leHRlbmQoYyxiKSx0aGlzLmVhY2goZnVuY3Rpb24oKXtmdW5jdGlvbiBjKCl7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdy5vbnRvdWNoc3RhcnQmJihIWzBdLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsbCksSFswXS5hZGRFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsbSksSFswXS5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIixuKSksSFswXS5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsbCksSFswXS5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsbSksSFswXS5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLG4pLEhbMF0uYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbGVhdmVcIixuKSxIWzBdLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLGopfWZ1bmN0aW9uIGQoYSl7cmV0dXJuIGEudGFyZ2V0VG91Y2hlcyYmYS50YXJnZXRUb3VjaGVzLmxlbmd0aD49MT9hLnRhcmdldFRvdWNoZXNbMF0uY2xpZW50WDphLmNsaWVudFh9ZnVuY3Rpb24gZShhKXtyZXR1cm4gYS50YXJnZXRUb3VjaGVzJiZhLnRhcmdldFRvdWNoZXMubGVuZ3RoPj0xP2EudGFyZ2V0VG91Y2hlc1swXS5jbGllbnRZOmEuY2xpZW50WX1mdW5jdGlvbiBmKGEpe3JldHVybiBhPj10P2EldDowPmE/Zih0K2EldCk6YX1mdW5jdGlvbiBnKGEpe3ZhciBjLGQsZSxnLGgsaSxqO2lmKHA9XCJudW1iZXJcIj09dHlwZW9mIGE/YTpwLHE9TWF0aC5mbG9vcigocCtzLzIpL3MpLGU9cC1xKnMsZz0wPmU/MTotMSxoPS1nKmUqMi9zLGQ9dD4+MSxiLmZ1bGxfd2lkdGg/aj1cInRyYW5zbGF0ZVgoMClcIjooaj1cInRyYW5zbGF0ZVgoXCIrKEhbMF0uY2xpZW50V2lkdGgtaXRlbV93aWR0aCkvMitcInB4KSBcIixqKz1cInRyYW5zbGF0ZVkoXCIrKEhbMF0uY2xpZW50SGVpZ2h0LWl0ZW1fd2lkdGgpLzIrXCJweClcIiksSSl7dmFyIGs9cSV0LGw9Ry5maW5kKFwiLmluZGljYXRvci1pdGVtLmFjdGl2ZVwiKTtsLmluZGV4KCkhPT1rJiYobC5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKSxHLmZpbmQoXCIuaW5kaWNhdG9yLWl0ZW1cIikuZXEoaykuYWRkQ2xhc3MoXCJhY3RpdmVcIikpfWZvcigoIWIubm9fd3JhcHx8cT49MCYmdD5xKSYmKGk9b1tmKHEpXSxpLnN0eWxlW0FdPWorXCIgdHJhbnNsYXRlWChcIistZS8yK1wicHgpIHRyYW5zbGF0ZVgoXCIrZypiLnNoaWZ0KmgqYytcInB4KSB0cmFuc2xhdGVaKFwiK2IuZGlzdCpoK1wicHgpXCIsaS5zdHlsZS56SW5kZXg9MCxiLmZ1bGxfd2lkdGg/dHdlZW5lZE9wYWNpdHk9MTp0d2VlbmVkT3BhY2l0eT0xLS4yKmgsaS5zdHlsZS5vcGFjaXR5PXR3ZWVuZWRPcGFjaXR5LGkuc3R5bGUuZGlzcGxheT1cImJsb2NrXCIpLGM9MTtkPj1jOysrYyliLmZ1bGxfd2lkdGg/KHpUcmFuc2xhdGlvbj1iLmRpc3QsdHdlZW5lZE9wYWNpdHk9Yz09PWQmJjA+ZT8xLWg6MSk6KHpUcmFuc2xhdGlvbj1iLmRpc3QqKDIqYytoKmcpLHR3ZWVuZWRPcGFjaXR5PTEtLjIqKDIqYytoKmcpKSwoIWIubm9fd3JhcHx8dD5xK2MpJiYoaT1vW2YocStjKV0saS5zdHlsZVtBXT1qK1wiIHRyYW5zbGF0ZVgoXCIrKGIuc2hpZnQrKHMqYy1lKS8yKStcInB4KSB0cmFuc2xhdGVaKFwiK3pUcmFuc2xhdGlvbitcInB4KVwiLGkuc3R5bGUuekluZGV4PS1jLGkuc3R5bGUub3BhY2l0eT10d2VlbmVkT3BhY2l0eSxpLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiKSxiLmZ1bGxfd2lkdGg/KHpUcmFuc2xhdGlvbj1iLmRpc3QsdHdlZW5lZE9wYWNpdHk9Yz09PWQmJmU+MD8xLWg6MSk6KHpUcmFuc2xhdGlvbj1iLmRpc3QqKDIqYy1oKmcpLHR3ZWVuZWRPcGFjaXR5PTEtLjIqKDIqYy1oKmcpKSwoIWIubm9fd3JhcHx8cS1jPj0wKSYmKGk9b1tmKHEtYyldLGkuc3R5bGVbQV09aitcIiB0cmFuc2xhdGVYKFwiKygtYi5zaGlmdCsoLXMqYy1lKS8yKStcInB4KSB0cmFuc2xhdGVaKFwiK3pUcmFuc2xhdGlvbitcInB4KVwiLGkuc3R5bGUuekluZGV4PS1jLGkuc3R5bGUub3BhY2l0eT10d2VlbmVkT3BhY2l0eSxpLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiKTsoIWIubm9fd3JhcHx8cT49MCYmdD5xKSYmKGk9b1tmKHEpXSxpLnN0eWxlW0FdPWorXCIgdHJhbnNsYXRlWChcIistZS8yK1wicHgpIHRyYW5zbGF0ZVgoXCIrZypiLnNoaWZ0KmgrXCJweCkgdHJhbnNsYXRlWihcIitiLmRpc3QqaCtcInB4KVwiLGkuc3R5bGUuekluZGV4PTAsYi5mdWxsX3dpZHRoP3R3ZWVuZWRPcGFjaXR5PTE6dHdlZW5lZE9wYWNpdHk9MS0uMipoLGkuc3R5bGUub3BhY2l0eT10d2VlbmVkT3BhY2l0eSxpLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiKX1mdW5jdGlvbiBoKCl7dmFyIGEsYixjLGQ7YT1EYXRlLm5vdygpLGI9YS1DLEM9YSxjPXAtQixCPXAsZD0xZTMqYy8oMStiKSx6PS44KmQrLjIqen1mdW5jdGlvbiBpKCl7dmFyIGEsYzt3JiYoYT1EYXRlLm5vdygpLUMsYz13Kk1hdGguZXhwKC1hL2IudGltZV9jb25zdGFudCksYz4yfHwtMj5jPyhnKHgtYykscmVxdWVzdEFuaW1hdGlvbkZyYW1lKGkpKTpnKHgpKX1mdW5jdGlvbiBqKGMpe2lmKEUpcmV0dXJuIGMucHJldmVudERlZmF1bHQoKSxjLnN0b3BQcm9wYWdhdGlvbigpLCExO2lmKCFiLmZ1bGxfd2lkdGgpe3ZhciBkPWEoYy50YXJnZXQpLmNsb3Nlc3QoXCIuY2Fyb3VzZWwtaXRlbVwiKS5pbmRleCgpLGU9cSV0LWQ7MCE9PWUmJihjLnByZXZlbnREZWZhdWx0KCksYy5zdG9wUHJvcGFnYXRpb24oKSksayhkKX19ZnVuY3Rpb24gayhhKXt2YXIgYz1xJXQtYTtiLm5vX3dyYXB8fCgwPmM/TWF0aC5hYnMoYyt0KTxNYXRoLmFicyhjKSYmKGMrPXQpOmM+MCYmTWF0aC5hYnMoYy10KTxjJiYoYy09dCkpLDA+Yz9ILnRyaWdnZXIoXCJjYXJvdXNlbE5leHRcIixbTWF0aC5hYnMoYyldKTpjPjAmJkgudHJpZ2dlcihcImNhcm91c2VsUHJldlwiLFtjXSl9ZnVuY3Rpb24gbChhKXtyPSEwLEU9ITEsRj0hMSx1PWQoYSksdj1lKGEpLHo9dz0wLEI9cCxDPURhdGUubm93KCksY2xlYXJJbnRlcnZhbChEKSxEPXNldEludGVydmFsKGgsMTAwKX1mdW5jdGlvbiBtKGEpe3ZhciBiLGMsZjtpZihyKWlmKGI9ZChhKSx5PWUoYSksYz11LWIsZj1NYXRoLmFicyh2LXkpLDMwPmYmJiFGKShjPjJ8fC0yPmMpJiYoRT0hMCx1PWIsZyhwK2MpKTtlbHNle2lmKEUpcmV0dXJuIGEucHJldmVudERlZmF1bHQoKSxhLnN0b3BQcm9wYWdhdGlvbigpLCExO0Y9ITB9cmV0dXJuIEU/KGEucHJldmVudERlZmF1bHQoKSxhLnN0b3BQcm9wYWdhdGlvbigpLCExKTp2b2lkIDB9ZnVuY3Rpb24gbihhKXtyZXR1cm4gcj8ocj0hMSxjbGVhckludGVydmFsKEQpLHg9cCwoej4xMHx8LTEwPnopJiYodz0uOSp6LHg9cCt3KSx4PU1hdGgucm91bmQoeC9zKSpzLGIubm9fd3JhcCYmKHg+PXMqKHQtMSk/eD1zKih0LTEpOjA+eCYmKHg9MCkpLHc9eC1wLEM9RGF0ZS5ub3coKSxyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoaSksRSYmKGEucHJldmVudERlZmF1bHQoKSxhLnN0b3BQcm9wYWdhdGlvbigpKSwhMSk6dm9pZCAwfXZhciBvLHAscSxyLHMsdCx1LHYsdyx4LHosQSxCLEMsRCxFLEYsRz1hKCc8dWwgY2xhc3M9XCJpbmRpY2F0b3JzXCI+PC91bD4nKSxIPWEodGhpcyksST1ILmF0dHIoXCJkYXRhLWluZGljYXRvcnNcIil8fGIuaW5kaWNhdG9ycztpZihILmhhc0NsYXNzKFwiaW5pdGlhbGl6ZWRcIikpcmV0dXJuIGEodGhpcykudHJpZ2dlcihcImNhcm91c2VsTmV4dFwiLFsxZS02XSksITA7aWYoYi5mdWxsX3dpZHRoKXtiLmRpc3Q9MDt2YXIgSj1ILmZpbmQoXCIuY2Fyb3VzZWwtaXRlbSBpbWdcIikuZmlyc3QoKTtKLmxlbmd0aD9pbWFnZUhlaWdodD1KLm9uKFwibG9hZFwiLGZ1bmN0aW9uKCl7SC5jc3MoXCJoZWlnaHRcIixhKHRoaXMpLmhlaWdodCgpKX0pOihpbWFnZUhlaWdodD1ILmZpbmQoXCIuY2Fyb3VzZWwtaXRlbVwiKS5maXJzdCgpLmhlaWdodCgpLEguY3NzKFwiaGVpZ2h0XCIsaW1hZ2VIZWlnaHQpKSxJJiZILmZpbmQoXCIuY2Fyb3VzZWwtZml4ZWQtaXRlbVwiKS5hZGRDbGFzcyhcIndpdGgtaW5kaWNhdG9yc1wiKX1ILmFkZENsYXNzKFwiaW5pdGlhbGl6ZWRcIikscj0hMSxwPXg9MCxvPVtdLGl0ZW1fd2lkdGg9SC5maW5kKFwiLmNhcm91c2VsLWl0ZW1cIikuZmlyc3QoKS5pbm5lcldpZHRoKCkscz0yKml0ZW1fd2lkdGgrYi5wYWRkaW5nLEguZmluZChcIi5jYXJvdXNlbC1pdGVtXCIpLmVhY2goZnVuY3Rpb24oYil7aWYoby5wdXNoKGEodGhpcylbMF0pLEkpe3ZhciBjPWEoJzxsaSBjbGFzcz1cImluZGljYXRvci1pdGVtXCI+PC9saT4nKTswPT09YiYmYy5hZGRDbGFzcyhcImFjdGl2ZVwiKSxjLmNsaWNrKGZ1bmN0aW9uKCl7dmFyIGI9YSh0aGlzKS5pbmRleCgpO2soYil9KSxHLmFwcGVuZChjKX19KSxJJiZILmFwcGVuZChHKSx0PW8ubGVuZ3RoLEE9XCJ0cmFuc2Zvcm1cIixbXCJ3ZWJraXRcIixcIk1velwiLFwiT1wiLFwibXNcIl0uZXZlcnkoZnVuY3Rpb24oYSl7dmFyIGI9YStcIlRyYW5zZm9ybVwiO3JldHVyblwidW5kZWZpbmVkXCIhPXR5cGVvZiBkb2N1bWVudC5ib2R5LnN0eWxlW2JdPyhBPWIsITEpOiEwfSksd2luZG93Lm9ucmVzaXplPWcsYygpLGcocCksYSh0aGlzKS5vbihcImNhcm91c2VsTmV4dFwiLGZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YiYmKGI9MSkseD1wK3MqYixwIT09eCYmKHc9eC1wLEM9RGF0ZS5ub3coKSxyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoaSkpfSksYSh0aGlzKS5vbihcImNhcm91c2VsUHJldlwiLGZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YiYmKGI9MSkseD1wLXMqYixwIT09eCYmKHc9eC1wLEM9RGF0ZS5ub3coKSxyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoaSkpfSksYSh0aGlzKS5vbihcImNhcm91c2VsU2V0XCIsZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT1iJiYoYj0wKSxrKGIpfSl9KX0sbmV4dDpmdW5jdGlvbihiKXthKHRoaXMpLnRyaWdnZXIoXCJjYXJvdXNlbE5leHRcIixbYl0pfSxwcmV2OmZ1bmN0aW9uKGIpe2EodGhpcykudHJpZ2dlcihcImNhcm91c2VsUHJldlwiLFtiXSl9LHNldDpmdW5jdGlvbihiKXthKHRoaXMpLnRyaWdnZXIoXCJjYXJvdXNlbFNldFwiLFtiXSl9fTthLmZuLmNhcm91c2VsPWZ1bmN0aW9uKGMpe3JldHVybiBiW2NdP2JbY10uYXBwbHkodGhpcyxBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSkpOlwib2JqZWN0XCIhPXR5cGVvZiBjJiZjP3ZvaWQgYS5lcnJvcihcIk1ldGhvZCBcIitjK1wiIGRvZXMgbm90IGV4aXN0IG9uIGpRdWVyeS5jYXJvdXNlbFwiKTpiLmluaXQuYXBwbHkodGhpcyxhcmd1bWVudHMpfX0oalF1ZXJ5KTsiXX0=
