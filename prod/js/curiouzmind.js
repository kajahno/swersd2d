(function($){
  $(function(){

    $('.button-collapse').sideNav();
    $('.parallax').parallax();

  }); // end of document ready
})(jQuery); // end of jQuery name space
/*!
 * Materialize v0.97.8 (http://materializecss.com)
 * Copyright 2014-2015 Materialize
 * MIT License (https://raw.githubusercontent.com/Dogfalo/materialize/master/LICENSE)
 */
// Check for jQuery.
if (typeof(jQuery) === 'undefined') {
  var jQuery;
  // Check if require is a defined function.
  if (typeof(require) === 'function') {
    jQuery = $ = require('jquery');
  // Else use the dollar sign alias.
  } else {
    jQuery = $;
  }
}
;/*
 * jQuery Easing v1.3 - http://gsgd.co.uk/sandbox/jquery/easing/
 *
 * Uses the built in easing capabilities added In jQuery 1.1
 * to offer multiple easing options
 *
 * TERMS OF USE - jQuery Easing
 *
 * Open source under the BSD License.
 *
 * Copyright © 2008 George McGinley Smith
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * Redistributions of source code must retain the above copyright notice, this list of
 * conditions and the following disclaimer.
 * Redistributions in binary form must reproduce the above copyright notice, this list
 * of conditions and the following disclaimer in the documentation and/or other materials
 * provided with the distribution.
 *
 * Neither the name of the author nor the names of contributors may be used to endorse
 * or promote products derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
 *  COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 *  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
 *  GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED
 * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 *  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED
 * OF THE POSSIBILITY OF SUCH DAMAGE.
 *
*/

// t: current time, b: begInnIng value, c: change In value, d: duration
jQuery.easing['jswing'] = jQuery.easing['swing'];

jQuery.extend( jQuery.easing,
{
	def: 'easeOutQuad',
	swing: function (x, t, b, c, d) {
		//alert(jQuery.easing.default);
		return jQuery.easing[jQuery.easing.def](x, t, b, c, d);
	},
	easeInQuad: function (x, t, b, c, d) {
		return c*(t/=d)*t + b;
	},
	easeOutQuad: function (x, t, b, c, d) {
		return -c *(t/=d)*(t-2) + b;
	},
	easeInOutQuad: function (x, t, b, c, d) {
		if ((t/=d/2) < 1) return c/2*t*t + b;
		return -c/2 * ((--t)*(t-2) - 1) + b;
	},
	easeInCubic: function (x, t, b, c, d) {
		return c*(t/=d)*t*t + b;
	},
	easeOutCubic: function (x, t, b, c, d) {
		return c*((t=t/d-1)*t*t + 1) + b;
	},
	easeInOutCubic: function (x, t, b, c, d) {
		if ((t/=d/2) < 1) return c/2*t*t*t + b;
		return c/2*((t-=2)*t*t + 2) + b;
	},
	easeInQuart: function (x, t, b, c, d) {
		return c*(t/=d)*t*t*t + b;
	},
	easeOutQuart: function (x, t, b, c, d) {
		return -c * ((t=t/d-1)*t*t*t - 1) + b;
	},
	easeInOutQuart: function (x, t, b, c, d) {
		if ((t/=d/2) < 1) return c/2*t*t*t*t + b;
		return -c/2 * ((t-=2)*t*t*t - 2) + b;
	},
	easeInQuint: function (x, t, b, c, d) {
		return c*(t/=d)*t*t*t*t + b;
	},
	easeOutQuint: function (x, t, b, c, d) {
		return c*((t=t/d-1)*t*t*t*t + 1) + b;
	},
	easeInOutQuint: function (x, t, b, c, d) {
		if ((t/=d/2) < 1) return c/2*t*t*t*t*t + b;
		return c/2*((t-=2)*t*t*t*t + 2) + b;
	},
	easeInSine: function (x, t, b, c, d) {
		return -c * Math.cos(t/d * (Math.PI/2)) + c + b;
	},
	easeOutSine: function (x, t, b, c, d) {
		return c * Math.sin(t/d * (Math.PI/2)) + b;
	},
	easeInOutSine: function (x, t, b, c, d) {
		return -c/2 * (Math.cos(Math.PI*t/d) - 1) + b;
	},
	easeInExpo: function (x, t, b, c, d) {
		return (t==0) ? b : c * Math.pow(2, 10 * (t/d - 1)) + b;
	},
	easeOutExpo: function (x, t, b, c, d) {
		return (t==d) ? b+c : c * (-Math.pow(2, -10 * t/d) + 1) + b;
	},
	easeInOutExpo: function (x, t, b, c, d) {
		if (t==0) return b;
		if (t==d) return b+c;
		if ((t/=d/2) < 1) return c/2 * Math.pow(2, 10 * (t - 1)) + b;
		return c/2 * (-Math.pow(2, -10 * --t) + 2) + b;
	},
	easeInCirc: function (x, t, b, c, d) {
		return -c * (Math.sqrt(1 - (t/=d)*t) - 1) + b;
	},
	easeOutCirc: function (x, t, b, c, d) {
		return c * Math.sqrt(1 - (t=t/d-1)*t) + b;
	},
	easeInOutCirc: function (x, t, b, c, d) {
		if ((t/=d/2) < 1) return -c/2 * (Math.sqrt(1 - t*t) - 1) + b;
		return c/2 * (Math.sqrt(1 - (t-=2)*t) + 1) + b;
	},
	easeInElastic: function (x, t, b, c, d) {
		var s=1.70158;var p=0;var a=c;
		if (t==0) return b;  if ((t/=d)==1) return b+c;  if (!p) p=d*.3;
		if (a < Math.abs(c)) { a=c; var s=p/4; }
		else var s = p/(2*Math.PI) * Math.asin (c/a);
		return -(a*Math.pow(2,10*(t-=1)) * Math.sin( (t*d-s)*(2*Math.PI)/p )) + b;
	},
	easeOutElastic: function (x, t, b, c, d) {
		var s=1.70158;var p=0;var a=c;
		if (t==0) return b;  if ((t/=d)==1) return b+c;  if (!p) p=d*.3;
		if (a < Math.abs(c)) { a=c; var s=p/4; }
		else var s = p/(2*Math.PI) * Math.asin (c/a);
		return a*Math.pow(2,-10*t) * Math.sin( (t*d-s)*(2*Math.PI)/p ) + c + b;
	},
	easeInOutElastic: function (x, t, b, c, d) {
		var s=1.70158;var p=0;var a=c;
		if (t==0) return b;  if ((t/=d/2)==2) return b+c;  if (!p) p=d*(.3*1.5);
		if (a < Math.abs(c)) { a=c; var s=p/4; }
		else var s = p/(2*Math.PI) * Math.asin (c/a);
		if (t < 1) return -.5*(a*Math.pow(2,10*(t-=1)) * Math.sin( (t*d-s)*(2*Math.PI)/p )) + b;
		return a*Math.pow(2,-10*(t-=1)) * Math.sin( (t*d-s)*(2*Math.PI)/p )*.5 + c + b;
	},
	easeInBack: function (x, t, b, c, d, s) {
		if (s == undefined) s = 1.70158;
		return c*(t/=d)*t*((s+1)*t - s) + b;
	},
	easeOutBack: function (x, t, b, c, d, s) {
		if (s == undefined) s = 1.70158;
		return c*((t=t/d-1)*t*((s+1)*t + s) + 1) + b;
	},
	easeInOutBack: function (x, t, b, c, d, s) {
		if (s == undefined) s = 1.70158;
		if ((t/=d/2) < 1) return c/2*(t*t*(((s*=(1.525))+1)*t - s)) + b;
		return c/2*((t-=2)*t*(((s*=(1.525))+1)*t + s) + 2) + b;
	},
	easeInBounce: function (x, t, b, c, d) {
		return c - jQuery.easing.easeOutBounce (x, d-t, 0, c, d) + b;
	},
	easeOutBounce: function (x, t, b, c, d) {
		if ((t/=d) < (1/2.75)) {
			return c*(7.5625*t*t) + b;
		} else if (t < (2/2.75)) {
			return c*(7.5625*(t-=(1.5/2.75))*t + .75) + b;
		} else if (t < (2.5/2.75)) {
			return c*(7.5625*(t-=(2.25/2.75))*t + .9375) + b;
		} else {
			return c*(7.5625*(t-=(2.625/2.75))*t + .984375) + b;
		}
	},
	easeInOutBounce: function (x, t, b, c, d) {
		if (t < d/2) return jQuery.easing.easeInBounce (x, t*2, 0, c, d) * .5 + b;
		return jQuery.easing.easeOutBounce (x, t*2-d, 0, c, d) * .5 + c*.5 + b;
	}
});

/*
 *
 * TERMS OF USE - EASING EQUATIONS
 *
 * Open source under the BSD License.
 *
 * Copyright © 2001 Robert Penner
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 *
 * Redistributions of source code must retain the above copyright notice, this list of
 * conditions and the following disclaimer.
 * Redistributions in binary form must reproduce the above copyright notice, this list
 * of conditions and the following disclaimer in the documentation and/or other materials
 * provided with the distribution.
 *
 * Neither the name of the author nor the names of contributors may be used to endorse
 * or promote products derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
 *  COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 *  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
 *  GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED
 * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 *  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED
 * OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 */;    // Custom Easing
    jQuery.extend( jQuery.easing,
    {
      easeInOutMaterial: function (x, t, b, c, d) {
        if ((t/=d/2) < 1) return c/2*t*t + b;
        return c/4*((t-=2)*t*t + 2) + b;
      }
    });

;/*! VelocityJS.org (1.2.3). (C) 2014 Julian Shapiro. MIT @license: en.wikipedia.org/wiki/MIT_License */
/*! VelocityJS.org jQuery Shim (1.0.1). (C) 2014 The jQuery Foundation. MIT @license: en.wikipedia.org/wiki/MIT_License. */
/*! Note that this has been modified by Materialize to confirm that Velocity is not already being imported. */
jQuery.Velocity?console.log("Velocity is already loaded. You may be needlessly importing Velocity again; note that Materialize includes Velocity."):(!function(e){function t(e){var t=e.length,a=r.type(e);return"function"===a||r.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===a||0===t||"number"==typeof t&&t>0&&t-1 in e}if(!e.jQuery){var r=function(e,t){return new r.fn.init(e,t)};r.isWindow=function(e){return null!=e&&e==e.window},r.type=function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?n[i.call(e)]||"object":typeof e},r.isArray=Array.isArray||function(e){return"array"===r.type(e)},r.isPlainObject=function(e){var t;if(!e||"object"!==r.type(e)||e.nodeType||r.isWindow(e))return!1;try{if(e.constructor&&!o.call(e,"constructor")&&!o.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(a){return!1}for(t in e);return void 0===t||o.call(e,t)},r.each=function(e,r,a){var n,o=0,i=e.length,s=t(e);if(a){if(s)for(;i>o&&(n=r.apply(e[o],a),n!==!1);o++);else for(o in e)if(n=r.apply(e[o],a),n===!1)break}else if(s)for(;i>o&&(n=r.call(e[o],o,e[o]),n!==!1);o++);else for(o in e)if(n=r.call(e[o],o,e[o]),n===!1)break;return e},r.data=function(e,t,n){if(void 0===n){var o=e[r.expando],i=o&&a[o];if(void 0===t)return i;if(i&&t in i)return i[t]}else if(void 0!==t){var o=e[r.expando]||(e[r.expando]=++r.uuid);return a[o]=a[o]||{},a[o][t]=n,n}},r.removeData=function(e,t){var n=e[r.expando],o=n&&a[n];o&&r.each(t,function(e,t){delete o[t]})},r.extend=function(){var e,t,a,n,o,i,s=arguments[0]||{},l=1,u=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[l]||{},l++),"object"!=typeof s&&"function"!==r.type(s)&&(s={}),l===u&&(s=this,l--);u>l;l++)if(null!=(o=arguments[l]))for(n in o)e=s[n],a=o[n],s!==a&&(c&&a&&(r.isPlainObject(a)||(t=r.isArray(a)))?(t?(t=!1,i=e&&r.isArray(e)?e:[]):i=e&&r.isPlainObject(e)?e:{},s[n]=r.extend(c,i,a)):void 0!==a&&(s[n]=a));return s},r.queue=function(e,a,n){function o(e,r){var a=r||[];return null!=e&&(t(Object(e))?!function(e,t){for(var r=+t.length,a=0,n=e.length;r>a;)e[n++]=t[a++];if(r!==r)for(;void 0!==t[a];)e[n++]=t[a++];return e.length=n,e}(a,"string"==typeof e?[e]:e):[].push.call(a,e)),a}if(e){a=(a||"fx")+"queue";var i=r.data(e,a);return n?(!i||r.isArray(n)?i=r.data(e,a,o(n)):i.push(n),i):i||[]}},r.dequeue=function(e,t){r.each(e.nodeType?[e]:e,function(e,a){t=t||"fx";var n=r.queue(a,t),o=n.shift();"inprogress"===o&&(o=n.shift()),o&&("fx"===t&&n.unshift("inprogress"),o.call(a,function(){r.dequeue(a,t)}))})},r.fn=r.prototype={init:function(e){if(e.nodeType)return this[0]=e,this;throw new Error("Not a DOM node.")},offset:function(){var t=this[0].getBoundingClientRect?this[0].getBoundingClientRect():{top:0,left:0};return{top:t.top+(e.pageYOffset||document.scrollTop||0)-(document.clientTop||0),left:t.left+(e.pageXOffset||document.scrollLeft||0)-(document.clientLeft||0)}},position:function(){function e(){for(var e=this.offsetParent||document;e&&"html"===!e.nodeType.toLowerCase&&"static"===e.style.position;)e=e.offsetParent;return e||document}var t=this[0],e=e.apply(t),a=this.offset(),n=/^(?:body|html)$/i.test(e.nodeName)?{top:0,left:0}:r(e).offset();return a.top-=parseFloat(t.style.marginTop)||0,a.left-=parseFloat(t.style.marginLeft)||0,e.style&&(n.top+=parseFloat(e.style.borderTopWidth)||0,n.left+=parseFloat(e.style.borderLeftWidth)||0),{top:a.top-n.top,left:a.left-n.left}}};var a={};r.expando="velocity"+(new Date).getTime(),r.uuid=0;for(var n={},o=n.hasOwnProperty,i=n.toString,s="Boolean Number String Function Array Date RegExp Object Error".split(" "),l=0;l<s.length;l++)n["[object "+s[l]+"]"]=s[l].toLowerCase();r.fn.init.prototype=r.fn,e.Velocity={Utilities:r}}}(window),function(e){"object"==typeof module&&"object"==typeof module.exports?module.exports=e():"function"==typeof define&&define.amd?define(e):e()}(function(){return function(e,t,r,a){function n(e){for(var t=-1,r=e?e.length:0,a=[];++t<r;){var n=e[t];n&&a.push(n)}return a}function o(e){return m.isWrapped(e)?e=[].slice.call(e):m.isNode(e)&&(e=[e]),e}function i(e){var t=f.data(e,"velocity");return null===t?a:t}function s(e){return function(t){return Math.round(t*e)*(1/e)}}function l(e,r,a,n){function o(e,t){return 1-3*t+3*e}function i(e,t){return 3*t-6*e}function s(e){return 3*e}function l(e,t,r){return((o(t,r)*e+i(t,r))*e+s(t))*e}function u(e,t,r){return 3*o(t,r)*e*e+2*i(t,r)*e+s(t)}function c(t,r){for(var n=0;m>n;++n){var o=u(r,e,a);if(0===o)return r;var i=l(r,e,a)-t;r-=i/o}return r}function p(){for(var t=0;b>t;++t)w[t]=l(t*x,e,a)}function f(t,r,n){var o,i,s=0;do i=r+(n-r)/2,o=l(i,e,a)-t,o>0?n=i:r=i;while(Math.abs(o)>h&&++s<v);return i}function d(t){for(var r=0,n=1,o=b-1;n!=o&&w[n]<=t;++n)r+=x;--n;var i=(t-w[n])/(w[n+1]-w[n]),s=r+i*x,l=u(s,e,a);return l>=y?c(t,s):0==l?s:f(t,r,r+x)}function g(){V=!0,(e!=r||a!=n)&&p()}var m=4,y=.001,h=1e-7,v=10,b=11,x=1/(b-1),S="Float32Array"in t;if(4!==arguments.length)return!1;for(var P=0;4>P;++P)if("number"!=typeof arguments[P]||isNaN(arguments[P])||!isFinite(arguments[P]))return!1;e=Math.min(e,1),a=Math.min(a,1),e=Math.max(e,0),a=Math.max(a,0);var w=S?new Float32Array(b):new Array(b),V=!1,C=function(t){return V||g(),e===r&&a===n?t:0===t?0:1===t?1:l(d(t),r,n)};C.getControlPoints=function(){return[{x:e,y:r},{x:a,y:n}]};var T="generateBezier("+[e,r,a,n]+")";return C.toString=function(){return T},C}function u(e,t){var r=e;return m.isString(e)?b.Easings[e]||(r=!1):r=m.isArray(e)&&1===e.length?s.apply(null,e):m.isArray(e)&&2===e.length?x.apply(null,e.concat([t])):m.isArray(e)&&4===e.length?l.apply(null,e):!1,r===!1&&(r=b.Easings[b.defaults.easing]?b.defaults.easing:v),r}function c(e){if(e){var t=(new Date).getTime(),r=b.State.calls.length;r>1e4&&(b.State.calls=n(b.State.calls));for(var o=0;r>o;o++)if(b.State.calls[o]){var s=b.State.calls[o],l=s[0],u=s[2],d=s[3],g=!!d,y=null;d||(d=b.State.calls[o][3]=t-16);for(var h=Math.min((t-d)/u.duration,1),v=0,x=l.length;x>v;v++){var P=l[v],V=P.element;if(i(V)){var C=!1;if(u.display!==a&&null!==u.display&&"none"!==u.display){if("flex"===u.display){var T=["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex"];f.each(T,function(e,t){S.setPropertyValue(V,"display",t)})}S.setPropertyValue(V,"display",u.display)}u.visibility!==a&&"hidden"!==u.visibility&&S.setPropertyValue(V,"visibility",u.visibility);for(var k in P)if("element"!==k){var A,F=P[k],j=m.isString(F.easing)?b.Easings[F.easing]:F.easing;if(1===h)A=F.endValue;else{var E=F.endValue-F.startValue;if(A=F.startValue+E*j(h,u,E),!g&&A===F.currentValue)continue}if(F.currentValue=A,"tween"===k)y=A;else{if(S.Hooks.registered[k]){var H=S.Hooks.getRoot(k),N=i(V).rootPropertyValueCache[H];N&&(F.rootPropertyValue=N)}var L=S.setPropertyValue(V,k,F.currentValue+(0===parseFloat(A)?"":F.unitType),F.rootPropertyValue,F.scrollData);S.Hooks.registered[k]&&(i(V).rootPropertyValueCache[H]=S.Normalizations.registered[H]?S.Normalizations.registered[H]("extract",null,L[1]):L[1]),"transform"===L[0]&&(C=!0)}}u.mobileHA&&i(V).transformCache.translate3d===a&&(i(V).transformCache.translate3d="(0px, 0px, 0px)",C=!0),C&&S.flushTransformCache(V)}}u.display!==a&&"none"!==u.display&&(b.State.calls[o][2].display=!1),u.visibility!==a&&"hidden"!==u.visibility&&(b.State.calls[o][2].visibility=!1),u.progress&&u.progress.call(s[1],s[1],h,Math.max(0,d+u.duration-t),d,y),1===h&&p(o)}}b.State.isTicking&&w(c)}function p(e,t){if(!b.State.calls[e])return!1;for(var r=b.State.calls[e][0],n=b.State.calls[e][1],o=b.State.calls[e][2],s=b.State.calls[e][4],l=!1,u=0,c=r.length;c>u;u++){var p=r[u].element;if(t||o.loop||("none"===o.display&&S.setPropertyValue(p,"display",o.display),"hidden"===o.visibility&&S.setPropertyValue(p,"visibility",o.visibility)),o.loop!==!0&&(f.queue(p)[1]===a||!/\.velocityQueueEntryFlag/i.test(f.queue(p)[1]))&&i(p)){i(p).isAnimating=!1,i(p).rootPropertyValueCache={};var d=!1;f.each(S.Lists.transforms3D,function(e,t){var r=/^scale/.test(t)?1:0,n=i(p).transformCache[t];i(p).transformCache[t]!==a&&new RegExp("^\\("+r+"[^.]").test(n)&&(d=!0,delete i(p).transformCache[t])}),o.mobileHA&&(d=!0,delete i(p).transformCache.translate3d),d&&S.flushTransformCache(p),S.Values.removeClass(p,"velocity-animating")}if(!t&&o.complete&&!o.loop&&u===c-1)try{o.complete.call(n,n)}catch(g){setTimeout(function(){throw g},1)}s&&o.loop!==!0&&s(n),i(p)&&o.loop===!0&&!t&&(f.each(i(p).tweensContainer,function(e,t){/^rotate/.test(e)&&360===parseFloat(t.endValue)&&(t.endValue=0,t.startValue=360),/^backgroundPosition/.test(e)&&100===parseFloat(t.endValue)&&"%"===t.unitType&&(t.endValue=0,t.startValue=100)}),b(p,"reverse",{loop:!0,delay:o.delay})),o.queue!==!1&&f.dequeue(p,o.queue)}b.State.calls[e]=!1;for(var m=0,y=b.State.calls.length;y>m;m++)if(b.State.calls[m]!==!1){l=!0;break}l===!1&&(b.State.isTicking=!1,delete b.State.calls,b.State.calls=[])}var f,d=function(){if(r.documentMode)return r.documentMode;for(var e=7;e>4;e--){var t=r.createElement("div");if(t.innerHTML="<!--[if IE "+e+"]><span></span><![endif]-->",t.getElementsByTagName("span").length)return t=null,e}return a}(),g=function(){var e=0;return t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||function(t){var r,a=(new Date).getTime();return r=Math.max(0,16-(a-e)),e=a+r,setTimeout(function(){t(a+r)},r)}}(),m={isString:function(e){return"string"==typeof e},isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)},isNode:function(e){return e&&e.nodeType},isNodeList:function(e){return"object"==typeof e&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(Object.prototype.toString.call(e))&&e.length!==a&&(0===e.length||"object"==typeof e[0]&&e[0].nodeType>0)},isWrapped:function(e){return e&&(e.jquery||t.Zepto&&t.Zepto.zepto.isZ(e))},isSVG:function(e){return t.SVGElement&&e instanceof t.SVGElement},isEmptyObject:function(e){for(var t in e)return!1;return!0}},y=!1;if(e.fn&&e.fn.jquery?(f=e,y=!0):f=t.Velocity.Utilities,8>=d&&!y)throw new Error("Velocity: IE8 and below require jQuery to be loaded before Velocity.");if(7>=d)return void(jQuery.fn.velocity=jQuery.fn.animate);var h=400,v="swing",b={State:{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isAndroid:/Android/i.test(navigator.userAgent),isGingerbread:/Android 2\.3\.[3-7]/i.test(navigator.userAgent),isChrome:t.chrome,isFirefox:/Firefox/i.test(navigator.userAgent),prefixElement:r.createElement("div"),prefixMatches:{},scrollAnchor:null,scrollPropertyLeft:null,scrollPropertyTop:null,isTicking:!1,calls:[]},CSS:{},Utilities:f,Redirects:{},Easings:{},Promise:t.Promise,defaults:{queue:"",duration:h,easing:v,begin:a,complete:a,progress:a,display:a,visibility:a,loop:!1,delay:!1,mobileHA:!0,_cacheValues:!0},init:function(e){f.data(e,"velocity",{isSVG:m.isSVG(e),isAnimating:!1,computedStyle:null,tweensContainer:null,rootPropertyValueCache:{},transformCache:{}})},hook:null,mock:!1,version:{major:1,minor:2,patch:2},debug:!1};t.pageYOffset!==a?(b.State.scrollAnchor=t,b.State.scrollPropertyLeft="pageXOffset",b.State.scrollPropertyTop="pageYOffset"):(b.State.scrollAnchor=r.documentElement||r.body.parentNode||r.body,b.State.scrollPropertyLeft="scrollLeft",b.State.scrollPropertyTop="scrollTop");var x=function(){function e(e){return-e.tension*e.x-e.friction*e.v}function t(t,r,a){var n={x:t.x+a.dx*r,v:t.v+a.dv*r,tension:t.tension,friction:t.friction};return{dx:n.v,dv:e(n)}}function r(r,a){var n={dx:r.v,dv:e(r)},o=t(r,.5*a,n),i=t(r,.5*a,o),s=t(r,a,i),l=1/6*(n.dx+2*(o.dx+i.dx)+s.dx),u=1/6*(n.dv+2*(o.dv+i.dv)+s.dv);return r.x=r.x+l*a,r.v=r.v+u*a,r}return function a(e,t,n){var o,i,s,l={x:-1,v:0,tension:null,friction:null},u=[0],c=0,p=1e-4,f=.016;for(e=parseFloat(e)||500,t=parseFloat(t)||20,n=n||null,l.tension=e,l.friction=t,o=null!==n,o?(c=a(e,t),i=c/n*f):i=f;s=r(s||l,i),u.push(1+s.x),c+=16,Math.abs(s.x)>p&&Math.abs(s.v)>p;);return o?function(e){return u[e*(u.length-1)|0]}:c}}();b.Easings={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},spring:function(e){return 1-Math.cos(4.5*e*Math.PI)*Math.exp(6*-e)}},f.each([["ease",[.25,.1,.25,1]],["ease-in",[.42,0,1,1]],["ease-out",[0,0,.58,1]],["ease-in-out",[.42,0,.58,1]],["easeInSine",[.47,0,.745,.715]],["easeOutSine",[.39,.575,.565,1]],["easeInOutSine",[.445,.05,.55,.95]],["easeInQuad",[.55,.085,.68,.53]],["easeOutQuad",[.25,.46,.45,.94]],["easeInOutQuad",[.455,.03,.515,.955]],["easeInCubic",[.55,.055,.675,.19]],["easeOutCubic",[.215,.61,.355,1]],["easeInOutCubic",[.645,.045,.355,1]],["easeInQuart",[.895,.03,.685,.22]],["easeOutQuart",[.165,.84,.44,1]],["easeInOutQuart",[.77,0,.175,1]],["easeInQuint",[.755,.05,.855,.06]],["easeOutQuint",[.23,1,.32,1]],["easeInOutQuint",[.86,0,.07,1]],["easeInExpo",[.95,.05,.795,.035]],["easeOutExpo",[.19,1,.22,1]],["easeInOutExpo",[1,0,0,1]],["easeInCirc",[.6,.04,.98,.335]],["easeOutCirc",[.075,.82,.165,1]],["easeInOutCirc",[.785,.135,.15,.86]]],function(e,t){b.Easings[t[0]]=l.apply(null,t[1])});var S=b.CSS={RegEx:{isHex:/^#([A-f\d]{3}){1,2}$/i,valueUnwrap:/^[A-z]+\((.*)\)$/i,wrappedValueAlreadyExtracted:/[0-9.]+ [0-9.]+ [0-9.]+( [0-9.]+)?/,valueSplit:/([A-z]+\(.+\))|(([A-z0-9#-.]+?)(?=\s|$))/gi},Lists:{colors:["fill","stroke","stopColor","color","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","outlineColor"],transformsBase:["translateX","translateY","scale","scaleX","scaleY","skewX","skewY","rotateZ"],transforms3D:["transformPerspective","translateZ","scaleZ","rotateX","rotateY"]},Hooks:{templates:{textShadow:["Color X Y Blur","black 0px 0px 0px"],boxShadow:["Color X Y Blur Spread","black 0px 0px 0px 0px"],clip:["Top Right Bottom Left","0px 0px 0px 0px"],backgroundPosition:["X Y","0% 0%"],transformOrigin:["X Y Z","50% 50% 0px"],perspectiveOrigin:["X Y","50% 50%"]},registered:{},register:function(){for(var e=0;e<S.Lists.colors.length;e++){var t="color"===S.Lists.colors[e]?"0 0 0 1":"255 255 255 1";S.Hooks.templates[S.Lists.colors[e]]=["Red Green Blue Alpha",t]}var r,a,n;if(d)for(r in S.Hooks.templates){a=S.Hooks.templates[r],n=a[0].split(" ");var o=a[1].match(S.RegEx.valueSplit);"Color"===n[0]&&(n.push(n.shift()),o.push(o.shift()),S.Hooks.templates[r]=[n.join(" "),o.join(" ")])}for(r in S.Hooks.templates){a=S.Hooks.templates[r],n=a[0].split(" ");for(var e in n){var i=r+n[e],s=e;S.Hooks.registered[i]=[r,s]}}},getRoot:function(e){var t=S.Hooks.registered[e];return t?t[0]:e},cleanRootPropertyValue:function(e,t){return S.RegEx.valueUnwrap.test(t)&&(t=t.match(S.RegEx.valueUnwrap)[1]),S.Values.isCSSNullValue(t)&&(t=S.Hooks.templates[e][1]),t},extractValue:function(e,t){var r=S.Hooks.registered[e];if(r){var a=r[0],n=r[1];return t=S.Hooks.cleanRootPropertyValue(a,t),t.toString().match(S.RegEx.valueSplit)[n]}return t},injectValue:function(e,t,r){var a=S.Hooks.registered[e];if(a){var n,o,i=a[0],s=a[1];return r=S.Hooks.cleanRootPropertyValue(i,r),n=r.toString().match(S.RegEx.valueSplit),n[s]=t,o=n.join(" ")}return r}},Normalizations:{registered:{clip:function(e,t,r){switch(e){case"name":return"clip";case"extract":var a;return S.RegEx.wrappedValueAlreadyExtracted.test(r)?a=r:(a=r.toString().match(S.RegEx.valueUnwrap),a=a?a[1].replace(/,(\s+)?/g," "):r),a;case"inject":return"rect("+r+")"}},blur:function(e,t,r){switch(e){case"name":return b.State.isFirefox?"filter":"-webkit-filter";case"extract":var a=parseFloat(r);if(!a&&0!==a){var n=r.toString().match(/blur\(([0-9]+[A-z]+)\)/i);a=n?n[1]:0}return a;case"inject":return parseFloat(r)?"blur("+r+")":"none"}},opacity:function(e,t,r){if(8>=d)switch(e){case"name":return"filter";case"extract":var a=r.toString().match(/alpha\(opacity=(.*)\)/i);return r=a?a[1]/100:1;case"inject":return t.style.zoom=1,parseFloat(r)>=1?"":"alpha(opacity="+parseInt(100*parseFloat(r),10)+")"}else switch(e){case"name":return"opacity";case"extract":return r;case"inject":return r}}},register:function(){9>=d||b.State.isGingerbread||(S.Lists.transformsBase=S.Lists.transformsBase.concat(S.Lists.transforms3D));for(var e=0;e<S.Lists.transformsBase.length;e++)!function(){var t=S.Lists.transformsBase[e];S.Normalizations.registered[t]=function(e,r,n){switch(e){case"name":return"transform";case"extract":return i(r)===a||i(r).transformCache[t]===a?/^scale/i.test(t)?1:0:i(r).transformCache[t].replace(/[()]/g,"");case"inject":var o=!1;switch(t.substr(0,t.length-1)){case"translate":o=!/(%|px|em|rem|vw|vh|\d)$/i.test(n);break;case"scal":case"scale":b.State.isAndroid&&i(r).transformCache[t]===a&&1>n&&(n=1),o=!/(\d)$/i.test(n);break;case"skew":o=!/(deg|\d)$/i.test(n);break;case"rotate":o=!/(deg|\d)$/i.test(n)}return o||(i(r).transformCache[t]="("+n+")"),i(r).transformCache[t]}}}();for(var e=0;e<S.Lists.colors.length;e++)!function(){var t=S.Lists.colors[e];S.Normalizations.registered[t]=function(e,r,n){switch(e){case"name":return t;case"extract":var o;if(S.RegEx.wrappedValueAlreadyExtracted.test(n))o=n;else{var i,s={black:"rgb(0, 0, 0)",blue:"rgb(0, 0, 255)",gray:"rgb(128, 128, 128)",green:"rgb(0, 128, 0)",red:"rgb(255, 0, 0)",white:"rgb(255, 255, 255)"};/^[A-z]+$/i.test(n)?i=s[n]!==a?s[n]:s.black:S.RegEx.isHex.test(n)?i="rgb("+S.Values.hexToRgb(n).join(" ")+")":/^rgba?\(/i.test(n)||(i=s.black),o=(i||n).toString().match(S.RegEx.valueUnwrap)[1].replace(/,(\s+)?/g," ")}return 8>=d||3!==o.split(" ").length||(o+=" 1"),o;case"inject":return 8>=d?4===n.split(" ").length&&(n=n.split(/\s+/).slice(0,3).join(" ")):3===n.split(" ").length&&(n+=" 1"),(8>=d?"rgb":"rgba")+"("+n.replace(/\s+/g,",").replace(/\.(\d)+(?=,)/g,"")+")"}}}()}},Names:{camelCase:function(e){return e.replace(/-(\w)/g,function(e,t){return t.toUpperCase()})},SVGAttribute:function(e){var t="width|height|x|y|cx|cy|r|rx|ry|x1|x2|y1|y2";return(d||b.State.isAndroid&&!b.State.isChrome)&&(t+="|transform"),new RegExp("^("+t+")$","i").test(e)},prefixCheck:function(e){if(b.State.prefixMatches[e])return[b.State.prefixMatches[e],!0];for(var t=["","Webkit","Moz","ms","O"],r=0,a=t.length;a>r;r++){var n;if(n=0===r?e:t[r]+e.replace(/^\w/,function(e){return e.toUpperCase()}),m.isString(b.State.prefixElement.style[n]))return b.State.prefixMatches[e]=n,[n,!0]}return[e,!1]}},Values:{hexToRgb:function(e){var t,r=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i;return e=e.replace(r,function(e,t,r,a){return t+t+r+r+a+a}),t=a.exec(e),t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:[0,0,0]},isCSSNullValue:function(e){return 0==e||/^(none|auto|transparent|(rgba\(0, ?0, ?0, ?0\)))$/i.test(e)},getUnitType:function(e){return/^(rotate|skew)/i.test(e)?"deg":/(^(scale|scaleX|scaleY|scaleZ|alpha|flexGrow|flexHeight|zIndex|fontWeight)$)|((opacity|red|green|blue|alpha)$)/i.test(e)?"":"px"},getDisplayType:function(e){var t=e&&e.tagName.toString().toLowerCase();return/^(b|big|i|small|tt|abbr|acronym|cite|code|dfn|em|kbd|strong|samp|var|a|bdo|br|img|map|object|q|script|span|sub|sup|button|input|label|select|textarea)$/i.test(t)?"inline":/^(li)$/i.test(t)?"list-item":/^(tr)$/i.test(t)?"table-row":/^(table)$/i.test(t)?"table":/^(tbody)$/i.test(t)?"table-row-group":"block"},addClass:function(e,t){e.classList?e.classList.add(t):e.className+=(e.className.length?" ":"")+t},removeClass:function(e,t){e.classList?e.classList.remove(t):e.className=e.className.toString().replace(new RegExp("(^|\\s)"+t.split(" ").join("|")+"(\\s|$)","gi")," ")}},getPropertyValue:function(e,r,n,o){function s(e,r){function n(){u&&S.setPropertyValue(e,"display","none")}var l=0;if(8>=d)l=f.css(e,r);else{var u=!1;if(/^(width|height)$/.test(r)&&0===S.getPropertyValue(e,"display")&&(u=!0,S.setPropertyValue(e,"display",S.Values.getDisplayType(e))),!o){if("height"===r&&"border-box"!==S.getPropertyValue(e,"boxSizing").toString().toLowerCase()){var c=e.offsetHeight-(parseFloat(S.getPropertyValue(e,"borderTopWidth"))||0)-(parseFloat(S.getPropertyValue(e,"borderBottomWidth"))||0)-(parseFloat(S.getPropertyValue(e,"paddingTop"))||0)-(parseFloat(S.getPropertyValue(e,"paddingBottom"))||0);return n(),c}if("width"===r&&"border-box"!==S.getPropertyValue(e,"boxSizing").toString().toLowerCase()){var p=e.offsetWidth-(parseFloat(S.getPropertyValue(e,"borderLeftWidth"))||0)-(parseFloat(S.getPropertyValue(e,"borderRightWidth"))||0)-(parseFloat(S.getPropertyValue(e,"paddingLeft"))||0)-(parseFloat(S.getPropertyValue(e,"paddingRight"))||0);return n(),p}}var g;g=i(e)===a?t.getComputedStyle(e,null):i(e).computedStyle?i(e).computedStyle:i(e).computedStyle=t.getComputedStyle(e,null),"borderColor"===r&&(r="borderTopColor"),l=9===d&&"filter"===r?g.getPropertyValue(r):g[r],(""===l||null===l)&&(l=e.style[r]),n()}if("auto"===l&&/^(top|right|bottom|left)$/i.test(r)){var m=s(e,"position");("fixed"===m||"absolute"===m&&/top|left/i.test(r))&&(l=f(e).position()[r]+"px")}return l}var l;if(S.Hooks.registered[r]){var u=r,c=S.Hooks.getRoot(u);n===a&&(n=S.getPropertyValue(e,S.Names.prefixCheck(c)[0])),S.Normalizations.registered[c]&&(n=S.Normalizations.registered[c]("extract",e,n)),l=S.Hooks.extractValue(u,n)}else if(S.Normalizations.registered[r]){var p,g;p=S.Normalizations.registered[r]("name",e),"transform"!==p&&(g=s(e,S.Names.prefixCheck(p)[0]),S.Values.isCSSNullValue(g)&&S.Hooks.templates[r]&&(g=S.Hooks.templates[r][1])),l=S.Normalizations.registered[r]("extract",e,g)}if(!/^[\d-]/.test(l))if(i(e)&&i(e).isSVG&&S.Names.SVGAttribute(r))if(/^(height|width)$/i.test(r))try{l=e.getBBox()[r]}catch(m){l=0}else l=e.getAttribute(r);else l=s(e,S.Names.prefixCheck(r)[0]);return S.Values.isCSSNullValue(l)&&(l=0),b.debug>=2&&console.log("Get "+r+": "+l),l},setPropertyValue:function(e,r,a,n,o){var s=r;if("scroll"===r)o.container?o.container["scroll"+o.direction]=a:"Left"===o.direction?t.scrollTo(a,o.alternateValue):t.scrollTo(o.alternateValue,a);else if(S.Normalizations.registered[r]&&"transform"===S.Normalizations.registered[r]("name",e))S.Normalizations.registered[r]("inject",e,a),s="transform",a=i(e).transformCache[r];else{if(S.Hooks.registered[r]){var l=r,u=S.Hooks.getRoot(r);n=n||S.getPropertyValue(e,u),a=S.Hooks.injectValue(l,a,n),r=u}if(S.Normalizations.registered[r]&&(a=S.Normalizations.registered[r]("inject",e,a),r=S.Normalizations.registered[r]("name",e)),s=S.Names.prefixCheck(r)[0],8>=d)try{e.style[s]=a}catch(c){b.debug&&console.log("Browser does not support ["+a+"] for ["+s+"]")}else i(e)&&i(e).isSVG&&S.Names.SVGAttribute(r)?e.setAttribute(r,a):e.style[s]=a;b.debug>=2&&console.log("Set "+r+" ("+s+"): "+a)}return[s,a]},flushTransformCache:function(e){function t(t){return parseFloat(S.getPropertyValue(e,t))}var r="";if((d||b.State.isAndroid&&!b.State.isChrome)&&i(e).isSVG){var a={translate:[t("translateX"),t("translateY")],skewX:[t("skewX")],skewY:[t("skewY")],scale:1!==t("scale")?[t("scale"),t("scale")]:[t("scaleX"),t("scaleY")],rotate:[t("rotateZ"),0,0]};f.each(i(e).transformCache,function(e){/^translate/i.test(e)?e="translate":/^scale/i.test(e)?e="scale":/^rotate/i.test(e)&&(e="rotate"),a[e]&&(r+=e+"("+a[e].join(" ")+") ",delete a[e])})}else{var n,o;f.each(i(e).transformCache,function(t){return n=i(e).transformCache[t],"transformPerspective"===t?(o=n,!0):(9===d&&"rotateZ"===t&&(t="rotate"),void(r+=t+n+" "))}),o&&(r="perspective"+o+" "+r)}S.setPropertyValue(e,"transform",r)}};S.Hooks.register(),S.Normalizations.register(),b.hook=function(e,t,r){var n=a;return e=o(e),f.each(e,function(e,o){if(i(o)===a&&b.init(o),r===a)n===a&&(n=b.CSS.getPropertyValue(o,t));else{var s=b.CSS.setPropertyValue(o,t,r);"transform"===s[0]&&b.CSS.flushTransformCache(o),n=s}}),n};var P=function(){function e(){return s?k.promise||null:l}function n(){function e(e){function p(e,t){var r=a,n=a,i=a;return m.isArray(e)?(r=e[0],!m.isArray(e[1])&&/^[\d-]/.test(e[1])||m.isFunction(e[1])||S.RegEx.isHex.test(e[1])?i=e[1]:(m.isString(e[1])&&!S.RegEx.isHex.test(e[1])||m.isArray(e[1]))&&(n=t?e[1]:u(e[1],s.duration),e[2]!==a&&(i=e[2]))):r=e,t||(n=n||s.easing),m.isFunction(r)&&(r=r.call(o,V,w)),m.isFunction(i)&&(i=i.call(o,V,w)),[r||0,n,i]}function d(e,t){var r,a;return a=(t||"0").toString().toLowerCase().replace(/[%A-z]+$/,function(e){return r=e,""}),r||(r=S.Values.getUnitType(e)),[a,r]}function h(){var e={myParent:o.parentNode||r.body,position:S.getPropertyValue(o,"position"),fontSize:S.getPropertyValue(o,"fontSize")},a=e.position===L.lastPosition&&e.myParent===L.lastParent,n=e.fontSize===L.lastFontSize;L.lastParent=e.myParent,L.lastPosition=e.position,L.lastFontSize=e.fontSize;var s=100,l={};if(n&&a)l.emToPx=L.lastEmToPx,l.percentToPxWidth=L.lastPercentToPxWidth,l.percentToPxHeight=L.lastPercentToPxHeight;else{var u=i(o).isSVG?r.createElementNS("http://www.w3.org/2000/svg","rect"):r.createElement("div");b.init(u),e.myParent.appendChild(u),f.each(["overflow","overflowX","overflowY"],function(e,t){b.CSS.setPropertyValue(u,t,"hidden")}),b.CSS.setPropertyValue(u,"position",e.position),b.CSS.setPropertyValue(u,"fontSize",e.fontSize),b.CSS.setPropertyValue(u,"boxSizing","content-box"),f.each(["minWidth","maxWidth","width","minHeight","maxHeight","height"],function(e,t){b.CSS.setPropertyValue(u,t,s+"%")}),b.CSS.setPropertyValue(u,"paddingLeft",s+"em"),l.percentToPxWidth=L.lastPercentToPxWidth=(parseFloat(S.getPropertyValue(u,"width",null,!0))||1)/s,l.percentToPxHeight=L.lastPercentToPxHeight=(parseFloat(S.getPropertyValue(u,"height",null,!0))||1)/s,l.emToPx=L.lastEmToPx=(parseFloat(S.getPropertyValue(u,"paddingLeft"))||1)/s,e.myParent.removeChild(u)}return null===L.remToPx&&(L.remToPx=parseFloat(S.getPropertyValue(r.body,"fontSize"))||16),null===L.vwToPx&&(L.vwToPx=parseFloat(t.innerWidth)/100,L.vhToPx=parseFloat(t.innerHeight)/100),l.remToPx=L.remToPx,l.vwToPx=L.vwToPx,l.vhToPx=L.vhToPx,b.debug>=1&&console.log("Unit ratios: "+JSON.stringify(l),o),l}if(s.begin&&0===V)try{s.begin.call(g,g)}catch(x){setTimeout(function(){throw x},1)}if("scroll"===A){var P,C,T,F=/^x$/i.test(s.axis)?"Left":"Top",j=parseFloat(s.offset)||0;s.container?m.isWrapped(s.container)||m.isNode(s.container)?(s.container=s.container[0]||s.container,P=s.container["scroll"+F],T=P+f(o).position()[F.toLowerCase()]+j):s.container=null:(P=b.State.scrollAnchor[b.State["scrollProperty"+F]],C=b.State.scrollAnchor[b.State["scrollProperty"+("Left"===F?"Top":"Left")]],T=f(o).offset()[F.toLowerCase()]+j),l={scroll:{rootPropertyValue:!1,startValue:P,currentValue:P,endValue:T,unitType:"",easing:s.easing,scrollData:{container:s.container,direction:F,alternateValue:C}},element:o},b.debug&&console.log("tweensContainer (scroll): ",l.scroll,o)}else if("reverse"===A){if(!i(o).tweensContainer)return void f.dequeue(o,s.queue);"none"===i(o).opts.display&&(i(o).opts.display="auto"),"hidden"===i(o).opts.visibility&&(i(o).opts.visibility="visible"),i(o).opts.loop=!1,i(o).opts.begin=null,i(o).opts.complete=null,v.easing||delete s.easing,v.duration||delete s.duration,s=f.extend({},i(o).opts,s);var E=f.extend(!0,{},i(o).tweensContainer);for(var H in E)if("element"!==H){var N=E[H].startValue;E[H].startValue=E[H].currentValue=E[H].endValue,E[H].endValue=N,m.isEmptyObject(v)||(E[H].easing=s.easing),b.debug&&console.log("reverse tweensContainer ("+H+"): "+JSON.stringify(E[H]),o)}l=E}else if("start"===A){var E;i(o).tweensContainer&&i(o).isAnimating===!0&&(E=i(o).tweensContainer),f.each(y,function(e,t){if(RegExp("^"+S.Lists.colors.join("$|^")+"$").test(e)){var r=p(t,!0),n=r[0],o=r[1],i=r[2];if(S.RegEx.isHex.test(n)){for(var s=["Red","Green","Blue"],l=S.Values.hexToRgb(n),u=i?S.Values.hexToRgb(i):a,c=0;c<s.length;c++){var f=[l[c]];o&&f.push(o),u!==a&&f.push(u[c]),y[e+s[c]]=f}delete y[e]}}});for(var z in y){var O=p(y[z]),q=O[0],$=O[1],M=O[2];z=S.Names.camelCase(z);var I=S.Hooks.getRoot(z),B=!1;if(i(o).isSVG||"tween"===I||S.Names.prefixCheck(I)[1]!==!1||S.Normalizations.registered[I]!==a){(s.display!==a&&null!==s.display&&"none"!==s.display||s.visibility!==a&&"hidden"!==s.visibility)&&/opacity|filter/.test(z)&&!M&&0!==q&&(M=0),s._cacheValues&&E&&E[z]?(M===a&&(M=E[z].endValue+E[z].unitType),B=i(o).rootPropertyValueCache[I]):S.Hooks.registered[z]?M===a?(B=S.getPropertyValue(o,I),M=S.getPropertyValue(o,z,B)):B=S.Hooks.templates[I][1]:M===a&&(M=S.getPropertyValue(o,z));var W,G,Y,D=!1;if(W=d(z,M),M=W[0],Y=W[1],W=d(z,q),q=W[0].replace(/^([+-\/*])=/,function(e,t){return D=t,""}),G=W[1],M=parseFloat(M)||0,q=parseFloat(q)||0,"%"===G&&(/^(fontSize|lineHeight)$/.test(z)?(q/=100,G="em"):/^scale/.test(z)?(q/=100,G=""):/(Red|Green|Blue)$/i.test(z)&&(q=q/100*255,G="")),/[\/*]/.test(D))G=Y;else if(Y!==G&&0!==M)if(0===q)G=Y;else{n=n||h();var Q=/margin|padding|left|right|width|text|word|letter/i.test(z)||/X$/.test(z)||"x"===z?"x":"y";switch(Y){case"%":M*="x"===Q?n.percentToPxWidth:n.percentToPxHeight;break;case"px":break;default:M*=n[Y+"ToPx"]}switch(G){case"%":M*=1/("x"===Q?n.percentToPxWidth:n.percentToPxHeight);break;case"px":break;default:M*=1/n[G+"ToPx"]}}switch(D){case"+":q=M+q;break;case"-":q=M-q;break;case"*":q=M*q;break;case"/":q=M/q}l[z]={rootPropertyValue:B,startValue:M,currentValue:M,endValue:q,unitType:G,easing:$},b.debug&&console.log("tweensContainer ("+z+"): "+JSON.stringify(l[z]),o)}else b.debug&&console.log("Skipping ["+I+"] due to a lack of browser support.")}l.element=o}l.element&&(S.Values.addClass(o,"velocity-animating"),R.push(l),""===s.queue&&(i(o).tweensContainer=l,i(o).opts=s),i(o).isAnimating=!0,V===w-1?(b.State.calls.push([R,g,s,null,k.resolver]),b.State.isTicking===!1&&(b.State.isTicking=!0,c())):V++)}var n,o=this,s=f.extend({},b.defaults,v),l={};switch(i(o)===a&&b.init(o),parseFloat(s.delay)&&s.queue!==!1&&f.queue(o,s.queue,function(e){b.velocityQueueEntryFlag=!0,i(o).delayTimer={setTimeout:setTimeout(e,parseFloat(s.delay)),next:e}}),s.duration.toString().toLowerCase()){case"fast":s.duration=200;break;case"normal":s.duration=h;break;case"slow":s.duration=600;break;default:s.duration=parseFloat(s.duration)||1}b.mock!==!1&&(b.mock===!0?s.duration=s.delay=1:(s.duration*=parseFloat(b.mock)||1,s.delay*=parseFloat(b.mock)||1)),s.easing=u(s.easing,s.duration),s.begin&&!m.isFunction(s.begin)&&(s.begin=null),s.progress&&!m.isFunction(s.progress)&&(s.progress=null),s.complete&&!m.isFunction(s.complete)&&(s.complete=null),s.display!==a&&null!==s.display&&(s.display=s.display.toString().toLowerCase(),"auto"===s.display&&(s.display=b.CSS.Values.getDisplayType(o))),s.visibility!==a&&null!==s.visibility&&(s.visibility=s.visibility.toString().toLowerCase()),s.mobileHA=s.mobileHA&&b.State.isMobile&&!b.State.isGingerbread,s.queue===!1?s.delay?setTimeout(e,s.delay):e():f.queue(o,s.queue,function(t,r){return r===!0?(k.promise&&k.resolver(g),!0):(b.velocityQueueEntryFlag=!0,void e(t))}),""!==s.queue&&"fx"!==s.queue||"inprogress"===f.queue(o)[0]||f.dequeue(o)}var s,l,d,g,y,v,x=arguments[0]&&(arguments[0].p||f.isPlainObject(arguments[0].properties)&&!arguments[0].properties.names||m.isString(arguments[0].properties));if(m.isWrapped(this)?(s=!1,d=0,g=this,l=this):(s=!0,d=1,g=x?arguments[0].elements||arguments[0].e:arguments[0]),g=o(g)){x?(y=arguments[0].properties||arguments[0].p,v=arguments[0].options||arguments[0].o):(y=arguments[d],v=arguments[d+1]);var w=g.length,V=0;if(!/^(stop|finish)$/i.test(y)&&!f.isPlainObject(v)){var C=d+1;v={};for(var T=C;T<arguments.length;T++)m.isArray(arguments[T])||!/^(fast|normal|slow)$/i.test(arguments[T])&&!/^\d/.test(arguments[T])?m.isString(arguments[T])||m.isArray(arguments[T])?v.easing=arguments[T]:m.isFunction(arguments[T])&&(v.complete=arguments[T]):v.duration=arguments[T]}var k={promise:null,resolver:null,rejecter:null};s&&b.Promise&&(k.promise=new b.Promise(function(e,t){k.resolver=e,k.rejecter=t}));var A;switch(y){case"scroll":A="scroll";break;case"reverse":A="reverse";break;case"finish":case"stop":f.each(g,function(e,t){i(t)&&i(t).delayTimer&&(clearTimeout(i(t).delayTimer.setTimeout),i(t).delayTimer.next&&i(t).delayTimer.next(),delete i(t).delayTimer)});var F=[];return f.each(b.State.calls,function(e,t){t&&f.each(t[1],function(r,n){var o=v===a?"":v;return o===!0||t[2].queue===o||v===a&&t[2].queue===!1?void f.each(g,function(r,a){a===n&&((v===!0||m.isString(v))&&(f.each(f.queue(a,m.isString(v)?v:""),function(e,t){
m.isFunction(t)&&t(null,!0)}),f.queue(a,m.isString(v)?v:"",[])),"stop"===y?(i(a)&&i(a).tweensContainer&&o!==!1&&f.each(i(a).tweensContainer,function(e,t){t.endValue=t.currentValue}),F.push(e)):"finish"===y&&(t[2].duration=1))}):!0})}),"stop"===y&&(f.each(F,function(e,t){p(t,!0)}),k.promise&&k.resolver(g)),e();default:if(!f.isPlainObject(y)||m.isEmptyObject(y)){if(m.isString(y)&&b.Redirects[y]){var j=f.extend({},v),E=j.duration,H=j.delay||0;return j.backwards===!0&&(g=f.extend(!0,[],g).reverse()),f.each(g,function(e,t){parseFloat(j.stagger)?j.delay=H+parseFloat(j.stagger)*e:m.isFunction(j.stagger)&&(j.delay=H+j.stagger.call(t,e,w)),j.drag&&(j.duration=parseFloat(E)||(/^(callout|transition)/.test(y)?1e3:h),j.duration=Math.max(j.duration*(j.backwards?1-e/w:(e+1)/w),.75*j.duration,200)),b.Redirects[y].call(t,t,j||{},e,w,g,k.promise?k:a)}),e()}var N="Velocity: First argument ("+y+") was not a property map, a known action, or a registered redirect. Aborting.";return k.promise?k.rejecter(new Error(N)):console.log(N),e()}A="start"}var L={lastParent:null,lastPosition:null,lastFontSize:null,lastPercentToPxWidth:null,lastPercentToPxHeight:null,lastEmToPx:null,remToPx:null,vwToPx:null,vhToPx:null},R=[];f.each(g,function(e,t){m.isNode(t)&&n.call(t)});var z,j=f.extend({},b.defaults,v);if(j.loop=parseInt(j.loop),z=2*j.loop-1,j.loop)for(var O=0;z>O;O++){var q={delay:j.delay,progress:j.progress};O===z-1&&(q.display=j.display,q.visibility=j.visibility,q.complete=j.complete),P(g,"reverse",q)}return e()}};b=f.extend(P,b),b.animate=P;var w=t.requestAnimationFrame||g;return b.State.isMobile||r.hidden===a||r.addEventListener("visibilitychange",function(){r.hidden?(w=function(e){return setTimeout(function(){e(!0)},16)},c()):w=t.requestAnimationFrame||g}),e.Velocity=b,e!==t&&(e.fn.velocity=P,e.fn.velocity.defaults=b.defaults),f.each(["Down","Up"],function(e,t){b.Redirects["slide"+t]=function(e,r,n,o,i,s){var l=f.extend({},r),u=l.begin,c=l.complete,p={height:"",marginTop:"",marginBottom:"",paddingTop:"",paddingBottom:""},d={};l.display===a&&(l.display="Down"===t?"inline"===b.CSS.Values.getDisplayType(e)?"inline-block":"block":"none"),l.begin=function(){u&&u.call(i,i);for(var r in p){d[r]=e.style[r];var a=b.CSS.getPropertyValue(e,r);p[r]="Down"===t?[a,0]:[0,a]}d.overflow=e.style.overflow,e.style.overflow="hidden"},l.complete=function(){for(var t in d)e.style[t]=d[t];c&&c.call(i,i),s&&s.resolver(i)},b(e,p,l)}}),f.each(["In","Out"],function(e,t){b.Redirects["fade"+t]=function(e,r,n,o,i,s){var l=f.extend({},r),u={opacity:"In"===t?1:0},c=l.complete;l.complete=n!==o-1?l.begin=null:function(){c&&c.call(i,i),s&&s.resolver(i)},l.display===a&&(l.display="In"===t?"auto":"none"),b(this,u,l)}}),b}(window.jQuery||window.Zepto||window,window,document)}));
;!function(a,b,c,d){"use strict";function k(a,b,c){return setTimeout(q(a,c),b)}function l(a,b,c){return Array.isArray(a)?(m(a,c[b],c),!0):!1}function m(a,b,c){var e;if(a)if(a.forEach)a.forEach(b,c);else if(a.length!==d)for(e=0;e<a.length;)b.call(c,a[e],e,a),e++;else for(e in a)a.hasOwnProperty(e)&&b.call(c,a[e],e,a)}function n(a,b,c){for(var e=Object.keys(b),f=0;f<e.length;)(!c||c&&a[e[f]]===d)&&(a[e[f]]=b[e[f]]),f++;return a}function o(a,b){return n(a,b,!0)}function p(a,b,c){var e,d=b.prototype;e=a.prototype=Object.create(d),e.constructor=a,e._super=d,c&&n(e,c)}function q(a,b){return function(){return a.apply(b,arguments)}}function r(a,b){return typeof a==g?a.apply(b?b[0]||d:d,b):a}function s(a,b){return a===d?b:a}function t(a,b,c){m(x(b),function(b){a.addEventListener(b,c,!1)})}function u(a,b,c){m(x(b),function(b){a.removeEventListener(b,c,!1)})}function v(a,b){for(;a;){if(a==b)return!0;a=a.parentNode}return!1}function w(a,b){return a.indexOf(b)>-1}function x(a){return a.trim().split(/\s+/g)}function y(a,b,c){if(a.indexOf&&!c)return a.indexOf(b);for(var d=0;d<a.length;){if(c&&a[d][c]==b||!c&&a[d]===b)return d;d++}return-1}function z(a){return Array.prototype.slice.call(a,0)}function A(a,b,c){for(var d=[],e=[],f=0;f<a.length;){var g=b?a[f][b]:a[f];y(e,g)<0&&d.push(a[f]),e[f]=g,f++}return c&&(d=b?d.sort(function(a,c){return a[b]>c[b]}):d.sort()),d}function B(a,b){for(var c,f,g=b[0].toUpperCase()+b.slice(1),h=0;h<e.length;){if(c=e[h],f=c?c+g:b,f in a)return f;h++}return d}function D(){return C++}function E(a){var b=a.ownerDocument;return b.defaultView||b.parentWindow}function ab(a,b){var c=this;this.manager=a,this.callback=b,this.element=a.element,this.target=a.options.inputTarget,this.domHandler=function(b){r(a.options.enable,[a])&&c.handler(b)},this.init()}function bb(a){var b,c=a.options.inputClass;return b=c?c:H?wb:I?Eb:G?Gb:rb,new b(a,cb)}function cb(a,b,c){var d=c.pointers.length,e=c.changedPointers.length,f=b&O&&0===d-e,g=b&(Q|R)&&0===d-e;c.isFirst=!!f,c.isFinal=!!g,f&&(a.session={}),c.eventType=b,db(a,c),a.emit("hammer.input",c),a.recognize(c),a.session.prevInput=c}function db(a,b){var c=a.session,d=b.pointers,e=d.length;c.firstInput||(c.firstInput=gb(b)),e>1&&!c.firstMultiple?c.firstMultiple=gb(b):1===e&&(c.firstMultiple=!1);var f=c.firstInput,g=c.firstMultiple,h=g?g.center:f.center,i=b.center=hb(d);b.timeStamp=j(),b.deltaTime=b.timeStamp-f.timeStamp,b.angle=lb(h,i),b.distance=kb(h,i),eb(c,b),b.offsetDirection=jb(b.deltaX,b.deltaY),b.scale=g?nb(g.pointers,d):1,b.rotation=g?mb(g.pointers,d):0,fb(c,b);var k=a.element;v(b.srcEvent.target,k)&&(k=b.srcEvent.target),b.target=k}function eb(a,b){var c=b.center,d=a.offsetDelta||{},e=a.prevDelta||{},f=a.prevInput||{};(b.eventType===O||f.eventType===Q)&&(e=a.prevDelta={x:f.deltaX||0,y:f.deltaY||0},d=a.offsetDelta={x:c.x,y:c.y}),b.deltaX=e.x+(c.x-d.x),b.deltaY=e.y+(c.y-d.y)}function fb(a,b){var f,g,h,j,c=a.lastInterval||b,e=b.timeStamp-c.timeStamp;if(b.eventType!=R&&(e>N||c.velocity===d)){var k=c.deltaX-b.deltaX,l=c.deltaY-b.deltaY,m=ib(e,k,l);g=m.x,h=m.y,f=i(m.x)>i(m.y)?m.x:m.y,j=jb(k,l),a.lastInterval=b}else f=c.velocity,g=c.velocityX,h=c.velocityY,j=c.direction;b.velocity=f,b.velocityX=g,b.velocityY=h,b.direction=j}function gb(a){for(var b=[],c=0;c<a.pointers.length;)b[c]={clientX:h(a.pointers[c].clientX),clientY:h(a.pointers[c].clientY)},c++;return{timeStamp:j(),pointers:b,center:hb(b),deltaX:a.deltaX,deltaY:a.deltaY}}function hb(a){var b=a.length;if(1===b)return{x:h(a[0].clientX),y:h(a[0].clientY)};for(var c=0,d=0,e=0;b>e;)c+=a[e].clientX,d+=a[e].clientY,e++;return{x:h(c/b),y:h(d/b)}}function ib(a,b,c){return{x:b/a||0,y:c/a||0}}function jb(a,b){return a===b?S:i(a)>=i(b)?a>0?T:U:b>0?V:W}function kb(a,b,c){c||(c=$);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return Math.sqrt(d*d+e*e)}function lb(a,b,c){c||(c=$);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return 180*Math.atan2(e,d)/Math.PI}function mb(a,b){return lb(b[1],b[0],_)-lb(a[1],a[0],_)}function nb(a,b){return kb(b[0],b[1],_)/kb(a[0],a[1],_)}function rb(){this.evEl=pb,this.evWin=qb,this.allow=!0,this.pressed=!1,ab.apply(this,arguments)}function wb(){this.evEl=ub,this.evWin=vb,ab.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function Ab(){this.evTarget=yb,this.evWin=zb,this.started=!1,ab.apply(this,arguments)}function Bb(a,b){var c=z(a.touches),d=z(a.changedTouches);return b&(Q|R)&&(c=A(c.concat(d),"identifier",!0)),[c,d]}function Eb(){this.evTarget=Db,this.targetIds={},ab.apply(this,arguments)}function Fb(a,b){var c=z(a.touches),d=this.targetIds;if(b&(O|P)&&1===c.length)return d[c[0].identifier]=!0,[c,c];var e,f,g=z(a.changedTouches),h=[],i=this.target;if(f=c.filter(function(a){return v(a.target,i)}),b===O)for(e=0;e<f.length;)d[f[e].identifier]=!0,e++;for(e=0;e<g.length;)d[g[e].identifier]&&h.push(g[e]),b&(Q|R)&&delete d[g[e].identifier],e++;return h.length?[A(f.concat(h),"identifier",!0),h]:void 0}function Gb(){ab.apply(this,arguments);var a=q(this.handler,this);this.touch=new Eb(this.manager,a),this.mouse=new rb(this.manager,a)}function Pb(a,b){this.manager=a,this.set(b)}function Qb(a){if(w(a,Mb))return Mb;var b=w(a,Nb),c=w(a,Ob);return b&&c?Nb+" "+Ob:b||c?b?Nb:Ob:w(a,Lb)?Lb:Kb}function Yb(a){this.id=D(),this.manager=null,this.options=o(a||{},this.defaults),this.options.enable=s(this.options.enable,!0),this.state=Rb,this.simultaneous={},this.requireFail=[]}function Zb(a){return a&Wb?"cancel":a&Ub?"end":a&Tb?"move":a&Sb?"start":""}function $b(a){return a==W?"down":a==V?"up":a==T?"left":a==U?"right":""}function _b(a,b){var c=b.manager;return c?c.get(a):a}function ac(){Yb.apply(this,arguments)}function bc(){ac.apply(this,arguments),this.pX=null,this.pY=null}function cc(){ac.apply(this,arguments)}function dc(){Yb.apply(this,arguments),this._timer=null,this._input=null}function ec(){ac.apply(this,arguments)}function fc(){ac.apply(this,arguments)}function gc(){Yb.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function hc(a,b){return b=b||{},b.recognizers=s(b.recognizers,hc.defaults.preset),new kc(a,b)}function kc(a,b){b=b||{},this.options=o(b,hc.defaults),this.options.inputTarget=this.options.inputTarget||a,this.handlers={},this.session={},this.recognizers=[],this.element=a,this.input=bb(this),this.touchAction=new Pb(this,this.options.touchAction),lc(this,!0),m(b.recognizers,function(a){var b=this.add(new a[0](a[1]));a[2]&&b.recognizeWith(a[2]),a[3]&&b.requireFailure(a[3])},this)}function lc(a,b){var c=a.element;m(a.options.cssProps,function(a,d){c.style[B(c.style,d)]=b?a:""})}function mc(a,c){var d=b.createEvent("Event");d.initEvent(a,!0,!0),d.gesture=c,c.target.dispatchEvent(d)}var e=["","webkit","moz","MS","ms","o"],f=b.createElement("div"),g="function",h=Math.round,i=Math.abs,j=Date.now,C=1,F=/mobile|tablet|ip(ad|hone|od)|android/i,G="ontouchstart"in a,H=B(a,"PointerEvent")!==d,I=G&&F.test(navigator.userAgent),J="touch",K="pen",L="mouse",M="kinect",N=25,O=1,P=2,Q=4,R=8,S=1,T=2,U=4,V=8,W=16,X=T|U,Y=V|W,Z=X|Y,$=["x","y"],_=["clientX","clientY"];ab.prototype={handler:function(){},init:function(){this.evEl&&t(this.element,this.evEl,this.domHandler),this.evTarget&&t(this.target,this.evTarget,this.domHandler),this.evWin&&t(E(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&u(this.element,this.evEl,this.domHandler),this.evTarget&&u(this.target,this.evTarget,this.domHandler),this.evWin&&u(E(this.element),this.evWin,this.domHandler)}};var ob={mousedown:O,mousemove:P,mouseup:Q},pb="mousedown",qb="mousemove mouseup";p(rb,ab,{handler:function(a){var b=ob[a.type];b&O&&0===a.button&&(this.pressed=!0),b&P&&1!==a.which&&(b=Q),this.pressed&&this.allow&&(b&Q&&(this.pressed=!1),this.callback(this.manager,b,{pointers:[a],changedPointers:[a],pointerType:L,srcEvent:a}))}});var sb={pointerdown:O,pointermove:P,pointerup:Q,pointercancel:R,pointerout:R},tb={2:J,3:K,4:L,5:M},ub="pointerdown",vb="pointermove pointerup pointercancel";a.MSPointerEvent&&(ub="MSPointerDown",vb="MSPointerMove MSPointerUp MSPointerCancel"),p(wb,ab,{handler:function(a){var b=this.store,c=!1,d=a.type.toLowerCase().replace("ms",""),e=sb[d],f=tb[a.pointerType]||a.pointerType,g=f==J,h=y(b,a.pointerId,"pointerId");e&O&&(0===a.button||g)?0>h&&(b.push(a),h=b.length-1):e&(Q|R)&&(c=!0),0>h||(b[h]=a,this.callback(this.manager,e,{pointers:b,changedPointers:[a],pointerType:f,srcEvent:a}),c&&b.splice(h,1))}});var xb={touchstart:O,touchmove:P,touchend:Q,touchcancel:R},yb="touchstart",zb="touchstart touchmove touchend touchcancel";p(Ab,ab,{handler:function(a){var b=xb[a.type];if(b===O&&(this.started=!0),this.started){var c=Bb.call(this,a,b);b&(Q|R)&&0===c[0].length-c[1].length&&(this.started=!1),this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:J,srcEvent:a})}}});var Cb={touchstart:O,touchmove:P,touchend:Q,touchcancel:R},Db="touchstart touchmove touchend touchcancel";p(Eb,ab,{handler:function(a){var b=Cb[a.type],c=Fb.call(this,a,b);c&&this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:J,srcEvent:a})}}),p(Gb,ab,{handler:function(a,b,c){var d=c.pointerType==J,e=c.pointerType==L;if(d)this.mouse.allow=!1;else if(e&&!this.mouse.allow)return;b&(Q|R)&&(this.mouse.allow=!0),this.callback(a,b,c)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Hb=B(f.style,"touchAction"),Ib=Hb!==d,Jb="compute",Kb="auto",Lb="manipulation",Mb="none",Nb="pan-x",Ob="pan-y";Pb.prototype={set:function(a){a==Jb&&(a=this.compute()),Ib&&(this.manager.element.style[Hb]=a),this.actions=a.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var a=[];return m(this.manager.recognizers,function(b){r(b.options.enable,[b])&&(a=a.concat(b.getTouchAction()))}),Qb(a.join(" "))},preventDefaults:function(a){if(!Ib){var b=a.srcEvent,c=a.offsetDirection;if(this.manager.session.prevented)return b.preventDefault(),void 0;var d=this.actions,e=w(d,Mb),f=w(d,Ob),g=w(d,Nb);return e||f&&c&X||g&&c&Y?this.preventSrc(b):void 0}},preventSrc:function(a){this.manager.session.prevented=!0,a.preventDefault()}};var Rb=1,Sb=2,Tb=4,Ub=8,Vb=Ub,Wb=16,Xb=32;Yb.prototype={defaults:{},set:function(a){return n(this.options,a),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(a){if(l(a,"recognizeWith",this))return this;var b=this.simultaneous;return a=_b(a,this),b[a.id]||(b[a.id]=a,a.recognizeWith(this)),this},dropRecognizeWith:function(a){return l(a,"dropRecognizeWith",this)?this:(a=_b(a,this),delete this.simultaneous[a.id],this)},requireFailure:function(a){if(l(a,"requireFailure",this))return this;var b=this.requireFail;return a=_b(a,this),-1===y(b,a)&&(b.push(a),a.requireFailure(this)),this},dropRequireFailure:function(a){if(l(a,"dropRequireFailure",this))return this;a=_b(a,this);var b=y(this.requireFail,a);return b>-1&&this.requireFail.splice(b,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(a){return!!this.simultaneous[a.id]},emit:function(a){function d(d){b.manager.emit(b.options.event+(d?Zb(c):""),a)}var b=this,c=this.state;Ub>c&&d(!0),d(),c>=Ub&&d(!0)},tryEmit:function(a){return this.canEmit()?this.emit(a):(this.state=Xb,void 0)},canEmit:function(){for(var a=0;a<this.requireFail.length;){if(!(this.requireFail[a].state&(Xb|Rb)))return!1;a++}return!0},recognize:function(a){var b=n({},a);return r(this.options.enable,[this,b])?(this.state&(Vb|Wb|Xb)&&(this.state=Rb),this.state=this.process(b),this.state&(Sb|Tb|Ub|Wb)&&this.tryEmit(b),void 0):(this.reset(),this.state=Xb,void 0)},process:function(){},getTouchAction:function(){},reset:function(){}},p(ac,Yb,{defaults:{pointers:1},attrTest:function(a){var b=this.options.pointers;return 0===b||a.pointers.length===b},process:function(a){var b=this.state,c=a.eventType,d=b&(Sb|Tb),e=this.attrTest(a);return d&&(c&R||!e)?b|Wb:d||e?c&Q?b|Ub:b&Sb?b|Tb:Sb:Xb}}),p(bc,ac,{defaults:{event:"pan",threshold:10,pointers:1,direction:Z},getTouchAction:function(){var a=this.options.direction,b=[];return a&X&&b.push(Ob),a&Y&&b.push(Nb),b},directionTest:function(a){var b=this.options,c=!0,d=a.distance,e=a.direction,f=a.deltaX,g=a.deltaY;return e&b.direction||(b.direction&X?(e=0===f?S:0>f?T:U,c=f!=this.pX,d=Math.abs(a.deltaX)):(e=0===g?S:0>g?V:W,c=g!=this.pY,d=Math.abs(a.deltaY))),a.direction=e,c&&d>b.threshold&&e&b.direction},attrTest:function(a){return ac.prototype.attrTest.call(this,a)&&(this.state&Sb||!(this.state&Sb)&&this.directionTest(a))},emit:function(a){this.pX=a.deltaX,this.pY=a.deltaY;var b=$b(a.direction);b&&this.manager.emit(this.options.event+b,a),this._super.emit.call(this,a)}}),p(cc,ac,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Mb]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.scale-1)>this.options.threshold||this.state&Sb)},emit:function(a){if(this._super.emit.call(this,a),1!==a.scale){var b=a.scale<1?"in":"out";this.manager.emit(this.options.event+b,a)}}}),p(dc,Yb,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return[Kb]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,e=a.deltaTime>b.time;if(this._input=a,!d||!c||a.eventType&(Q|R)&&!e)this.reset();else if(a.eventType&O)this.reset(),this._timer=k(function(){this.state=Vb,this.tryEmit()},b.time,this);else if(a.eventType&Q)return Vb;return Xb},reset:function(){clearTimeout(this._timer)},emit:function(a){this.state===Vb&&(a&&a.eventType&Q?this.manager.emit(this.options.event+"up",a):(this._input.timeStamp=j(),this.manager.emit(this.options.event,this._input)))}}),p(ec,ac,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Mb]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.rotation)>this.options.threshold||this.state&Sb)}}),p(fc,ac,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:X|Y,pointers:1},getTouchAction:function(){return bc.prototype.getTouchAction.call(this)},attrTest:function(a){var c,b=this.options.direction;return b&(X|Y)?c=a.velocity:b&X?c=a.velocityX:b&Y&&(c=a.velocityY),this._super.attrTest.call(this,a)&&b&a.direction&&a.distance>this.options.threshold&&i(c)>this.options.velocity&&a.eventType&Q},emit:function(a){var b=$b(a.direction);b&&this.manager.emit(this.options.event+b,a),this.manager.emit(this.options.event,a)}}),p(gc,Yb,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[Lb]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,e=a.deltaTime<b.time;if(this.reset(),a.eventType&O&&0===this.count)return this.failTimeout();if(d&&e&&c){if(a.eventType!=Q)return this.failTimeout();var f=this.pTime?a.timeStamp-this.pTime<b.interval:!0,g=!this.pCenter||kb(this.pCenter,a.center)<b.posThreshold;this.pTime=a.timeStamp,this.pCenter=a.center,g&&f?this.count+=1:this.count=1,this._input=a;var h=this.count%b.taps;if(0===h)return this.hasRequireFailures()?(this._timer=k(function(){this.state=Vb,this.tryEmit()},b.interval,this),Sb):Vb}return Xb},failTimeout:function(){return this._timer=k(function(){this.state=Xb},this.options.interval,this),Xb},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Vb&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),hc.VERSION="2.0.4",hc.defaults={domEvents:!1,touchAction:Jb,enable:!0,inputTarget:null,inputClass:null,preset:[[ec,{enable:!1}],[cc,{enable:!1},["rotate"]],[fc,{direction:X}],[bc,{direction:X},["swipe"]],[gc],[gc,{event:"doubletap",taps:2},["tap"]],[dc]],cssProps:{userSelect:"default",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var ic=1,jc=2;kc.prototype={set:function(a){return n(this.options,a),a.touchAction&&this.touchAction.update(),a.inputTarget&&(this.input.destroy(),this.input.target=a.inputTarget,this.input.init()),this},stop:function(a){this.session.stopped=a?jc:ic},recognize:function(a){var b=this.session;if(!b.stopped){this.touchAction.preventDefaults(a);var c,d=this.recognizers,e=b.curRecognizer;(!e||e&&e.state&Vb)&&(e=b.curRecognizer=null);for(var f=0;f<d.length;)c=d[f],b.stopped===jc||e&&c!=e&&!c.canRecognizeWith(e)?c.reset():c.recognize(a),!e&&c.state&(Sb|Tb|Ub)&&(e=b.curRecognizer=c),f++}},get:function(a){if(a instanceof Yb)return a;for(var b=this.recognizers,c=0;c<b.length;c++)if(b[c].options.event==a)return b[c];return null},add:function(a){if(l(a,"add",this))return this;var b=this.get(a.options.event);return b&&this.remove(b),this.recognizers.push(a),a.manager=this,this.touchAction.update(),a},remove:function(a){if(l(a,"remove",this))return this;var b=this.recognizers;return a=this.get(a),b.splice(y(b,a),1),this.touchAction.update(),this},on:function(a,b){var c=this.handlers;return m(x(a),function(a){c[a]=c[a]||[],c[a].push(b)}),this},off:function(a,b){var c=this.handlers;return m(x(a),function(a){b?c[a].splice(y(c[a],b),1):delete c[a]}),this},emit:function(a,b){this.options.domEvents&&mc(a,b);var c=this.handlers[a]&&this.handlers[a].slice();if(c&&c.length){b.type=a,b.preventDefault=function(){b.srcEvent.preventDefault()};for(var d=0;d<c.length;)c[d](b),d++}},destroy:function(){this.element&&lc(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},n(hc,{INPUT_START:O,INPUT_MOVE:P,INPUT_END:Q,INPUT_CANCEL:R,STATE_POSSIBLE:Rb,STATE_BEGAN:Sb,STATE_CHANGED:Tb,STATE_ENDED:Ub,STATE_RECOGNIZED:Vb,STATE_CANCELLED:Wb,STATE_FAILED:Xb,DIRECTION_NONE:S,DIRECTION_LEFT:T,DIRECTION_RIGHT:U,DIRECTION_UP:V,DIRECTION_DOWN:W,DIRECTION_HORIZONTAL:X,DIRECTION_VERTICAL:Y,DIRECTION_ALL:Z,Manager:kc,Input:ab,TouchAction:Pb,TouchInput:Eb,MouseInput:rb,PointerEventInput:wb,TouchMouseInput:Gb,SingleTouchInput:Ab,Recognizer:Yb,AttrRecognizer:ac,Tap:gc,Pan:bc,Swipe:fc,Pinch:cc,Rotate:ec,Press:dc,on:t,off:u,each:m,merge:o,extend:n,inherit:p,bindFn:q,prefixed:B}),typeof define==g&&define.amd?define(function(){return hc}):"undefined"!=typeof module&&module.exports?module.exports=hc:a[c]=hc}(window,document,"Hammer");;(function(factory) {
    if (typeof define === 'function' && define.amd) {
        define(['jquery', 'hammerjs'], factory);
    } else if (typeof exports === 'object') {
        factory(require('jquery'), require('hammerjs'));
    } else {
        factory(jQuery, Hammer);
    }
}(function($, Hammer) {
    function hammerify(el, options) {
        var $el = $(el);
        if(!$el.data("hammer")) {
            $el.data("hammer", new Hammer($el[0], options));
        }
    }

    $.fn.hammer = function(options) {
        return this.each(function() {
            hammerify(this, options);
        });
    };

    // extend the emit method to also trigger jQuery events
    Hammer.Manager.prototype.emit = (function(originalEmit) {
        return function(type, data) {
            originalEmit.call(this, type, data);
            $(this.element).trigger({
                type: type,
                gesture: data
            });
        };
    })(Hammer.Manager.prototype.emit);
}));
;// Required for Meteor package, the use of window prevents export by Meteor
(function(window){
  if(window.Package){
    Materialize = {};
  } else {
    window.Materialize = {};
  }
})(window);


/*
 * raf.js
 * https://github.com/ngryman/raf.js
 *
 * original requestAnimationFrame polyfill by Erik Möller
 * inspired from paul_irish gist and post
 *
 * Copyright (c) 2013 ngryman
 * Licensed under the MIT license.
 */
(function(window) {
  var lastTime = 0,
    vendors = ['webkit', 'moz'],
    requestAnimationFrame = window.requestAnimationFrame,
    cancelAnimationFrame = window.cancelAnimationFrame,
    i = vendors.length;

  // try to un-prefix existing raf
  while (--i >= 0 && !requestAnimationFrame) {
    requestAnimationFrame = window[vendors[i] + 'RequestAnimationFrame'];
    cancelAnimationFrame = window[vendors[i] + 'CancelRequestAnimationFrame'];
  }

  // polyfill with setTimeout fallback
  // heavily inspired from @darius gist mod: https://gist.github.com/paulirish/1579671#comment-837945
  if (!requestAnimationFrame || !cancelAnimationFrame) {
    requestAnimationFrame = function(callback) {
      var now = +Date.now(),
        nextTime = Math.max(lastTime + 16, now);
      return setTimeout(function() {
        callback(lastTime = nextTime);
      }, nextTime - now);
    };

    cancelAnimationFrame = clearTimeout;
  }

  // export to window
  window.requestAnimationFrame = requestAnimationFrame;
  window.cancelAnimationFrame = cancelAnimationFrame;
}(window));


// Unique ID
Materialize.guid = (function() {
  function s4() {
    return Math.floor((1 + Math.random()) * 0x10000)
      .toString(16)
      .substring(1);
  }
  return function() {
    return s4() + s4() + '-' + s4() + '-' + s4() + '-' +
           s4() + '-' + s4() + s4() + s4();
  };
})();

/**
 * Escapes hash from special characters
 * @param {string} hash  String returned from this.hash
 * @returns {string}
 */
Materialize.escapeHash = function(hash) {
  return hash.replace( /(:|\.|\[|\]|,|=)/g, "\\$1" );
};

Materialize.elementOrParentIsFixed = function(element) {
    var $element = $(element);
    var $checkElements = $element.add($element.parents());
    var isFixed = false;
    $checkElements.each(function(){
        if ($(this).css("position") === "fixed") {
            isFixed = true;
            return false;
        }
    });
    return isFixed;
};

// Velocity has conflicts when loaded with jQuery, this will check for it
// First, check if in noConflict mode
var Vel;
if (jQuery) {
  Vel = jQuery.Velocity;
} else if ($) {
  Vel = $.Velocity;
} else {
  Vel = Velocity;
}
;(function ($) {
  $.fn.collapsible = function(options) {
    var defaults = {
      accordion: undefined,
      onOpen: undefined,
      onClose: undefined
    };

    options = $.extend(defaults, options);


    return this.each(function() {

      var $this = $(this);

      var $panel_headers = $(this).find('> li > .collapsible-header');

      var collapsible_type = $this.data("collapsible");

      // Turn off any existing event handlers
      $this.off('click.collapse', '> li > .collapsible-header');
      $panel_headers.off('click.collapse');


      /****************
      Helper Functions
      ****************/

      // Accordion Open
      function accordionOpen(object) {
        $panel_headers = $this.find('> li > .collapsible-header');
        if (object.hasClass('active')) {
          object.parent().addClass('active');
        }
        else {
          object.parent().removeClass('active');
        }
        if (object.parent().hasClass('active')){
          object.siblings('.collapsible-body').stop(true,false).slideDown({ duration: 350, easing: "easeOutQuart", queue: false, complete: function() {$(this).css('height', '');}});
        }
        else{
          object.siblings('.collapsible-body').stop(true,false).slideUp({ duration: 350, easing: "easeOutQuart", queue: false, complete: function() {$(this).css('height', '');}});
        }

        $panel_headers.not(object).removeClass('active').parent().removeClass('active');

        // Close previously open accordion elements.
        $panel_headers.not(object).parent().children('.collapsible-body').stop(true,false).each(function() {
          if ($(this).is(':visible')) {
            $(this).slideUp({
              duration: 350,
              easing: "easeOutQuart",
              queue: false,
              complete:
                function() {
                  $(this).css('height', '');
                  execCallbacks($(this).siblings('.collapsible-header'));
                }
            });
          }
        });
      }

      // Expandable Open
      function expandableOpen(object) {
        if (object.hasClass('active')) {
          object.parent().addClass('active');
        }
        else {
          object.parent().removeClass('active');
        }
        if (object.parent().hasClass('active')){
          object.siblings('.collapsible-body').stop(true,false).slideDown({ duration: 350, easing: "easeOutQuart", queue: false, complete: function() {$(this).css('height', '');}});
        }
        else {
          object.siblings('.collapsible-body').stop(true,false).slideUp({ duration: 350, easing: "easeOutQuart", queue: false, complete: function() {$(this).css('height', '');}});
        }
      }

      // Open collapsible. object: .collapsible-header
      function collapsibleOpen(object) {
        if (options.accordion || collapsible_type === "accordion" || collapsible_type === undefined) { // Handle Accordion
          accordionOpen(object);
        } else { // Handle Expandables
          expandableOpen(object);
        }

        execCallbacks(object);
      }

      // Handle callbacks
      function execCallbacks(object) {
        if (object.hasClass('active')) {
          if (typeof(options.onOpen) === "function") {
            options.onOpen.call(this, object.parent());
          }
        } else {
          if (typeof(options.onClose) === "function") {
            options.onClose.call(this, object.parent());
          }
        }
      }

      /**
       * Check if object is children of panel header
       * @param  {Object}  object Jquery object
       * @return {Boolean} true if it is children
       */
      function isChildrenOfPanelHeader(object) {

        var panelHeader = getPanelHeader(object);

        return panelHeader.length > 0;
      }

      /**
       * Get panel header from a children element
       * @param  {Object} object Jquery object
       * @return {Object} panel header object
       */
      function getPanelHeader(object) {

        return object.closest('li > .collapsible-header');
      }

      /*****  End Helper Functions  *****/



      // Add click handler to only direct collapsible header children
      $this.on('click.collapse', '> li > .collapsible-header', function(e) {
        var element = $(e.target);

        if (isChildrenOfPanelHeader(element)) {
          element = getPanelHeader(element);
        }

        element.toggleClass('active');

        collapsibleOpen(element);
      });


      // Open first active
      if (options.accordion || collapsible_type === "accordion" || collapsible_type === undefined) { // Handle Accordion
        collapsibleOpen($panel_headers.filter('.active').first());

      } else { // Handle Expandables
        $panel_headers.filter('.active').each(function() {
          collapsibleOpen($(this));
        });
      }

    });
  };

  $(document).ready(function(){
    $('.collapsible').collapsible();
  });
}( jQuery ));;(function ($) {

  // Add posibility to scroll to selected option
  // usefull for select for example
  $.fn.scrollTo = function(elem) {
    $(this).scrollTop($(this).scrollTop() - $(this).offset().top + $(elem).offset().top);
    return this;
  };

  $.fn.dropdown = function (options) {
    var defaults = {
      inDuration: 300,
      outDuration: 225,
      constrain_width: true, // Constrains width of dropdown to the activator
      hover: false,
      gutter: 0, // Spacing from edge
      belowOrigin: false,
      alignment: 'left',
      stopPropagation: false
    };

    // Open dropdown.
    if (options === "open") {
      this.each(function() {
        $(this).trigger('open');
      });
      return false;
    }

    // Close dropdown.
    if (options === "close") {
      this.each(function() {
        $(this).trigger('close');
      });
      return false;
    }

    this.each(function(){
      var origin = $(this);
      var curr_options = $.extend({}, defaults, options);
      var isFocused = false;

      // Dropdown menu
      var activates = $("#"+ origin.attr('data-activates'));

      function updateOptions() {
        if (origin.data('induration') !== undefined)
          curr_options.inDuration = origin.data('induration');
        if (origin.data('outduration') !== undefined)
          curr_options.outDuration = origin.data('outduration');
        if (origin.data('constrainwidth') !== undefined)
          curr_options.constrain_width = origin.data('constrainwidth');
        if (origin.data('hover') !== undefined)
          curr_options.hover = origin.data('hover');
        if (origin.data('gutter') !== undefined)
          curr_options.gutter = origin.data('gutter');
        if (origin.data('beloworigin') !== undefined)
          curr_options.belowOrigin = origin.data('beloworigin');
        if (origin.data('alignment') !== undefined)
          curr_options.alignment = origin.data('alignment');
        if (origin.data('stoppropagation') !== undefined)
          curr_options.stopPropagation = origin.data('stoppropagation');
      }

      updateOptions();

      // Attach dropdown to its activator
      origin.after(activates);

      /*
        Helper function to position and resize dropdown.
        Used in hover and click handler.
      */
      function placeDropdown(eventType) {
        // Check for simultaneous focus and click events.
        if (eventType === 'focus') {
          isFocused = true;
        }

        // Check html data attributes
        updateOptions();

        // Set Dropdown state
        activates.addClass('active');
        origin.addClass('active');

        // Constrain width
        if (curr_options.constrain_width === true) {
          activates.css('width', origin.outerWidth());

        } else {
          activates.css('white-space', 'nowrap');
        }

        // Offscreen detection
        var windowHeight = window.innerHeight;
        var originHeight = origin.innerHeight();
        var offsetLeft = origin.offset().left;
        var offsetTop = origin.offset().top - $(window).scrollTop();
        var currAlignment = curr_options.alignment;
        var gutterSpacing = 0;
        var leftPosition = 0;

        // Below Origin
        var verticalOffset = 0;
        if (curr_options.belowOrigin === true) {
          verticalOffset = originHeight;
        }

        // Check for scrolling positioned container.
        var scrollYOffset = 0;
        var scrollXOffset = 0;
        var wrapper = origin.parent();
        if (!wrapper.is('body')) {
          if (wrapper[0].scrollHeight > wrapper[0].clientHeight) {
            scrollYOffset = wrapper[0].scrollTop;
          }
          if (wrapper[0].scrollWidth > wrapper[0].clientWidth) {
            scrollXOffset = wrapper[0].scrollLeft;
          }
        }


        if (offsetLeft + activates.innerWidth() > $(window).width()) {
          // Dropdown goes past screen on right, force right alignment
          currAlignment = 'right';

        } else if (offsetLeft - activates.innerWidth() + origin.innerWidth() < 0) {
          // Dropdown goes past screen on left, force left alignment
          currAlignment = 'left';
        }
        // Vertical bottom offscreen detection
        if (offsetTop + activates.innerHeight() > windowHeight) {
          // If going upwards still goes offscreen, just crop height of dropdown.
          if (offsetTop + originHeight - activates.innerHeight() < 0) {
            var adjustedHeight = windowHeight - offsetTop - verticalOffset;
            activates.css('max-height', adjustedHeight);
          } else {
            // Flow upwards.
            if (!verticalOffset) {
              verticalOffset += originHeight;
            }
            verticalOffset -= activates.innerHeight();
          }
        }

        // Handle edge alignment
        if (currAlignment === 'left') {
          gutterSpacing = curr_options.gutter;
          leftPosition = origin.position().left + gutterSpacing;
        }
        else if (currAlignment === 'right') {
          var offsetRight = origin.position().left + origin.outerWidth() - activates.outerWidth();
          gutterSpacing = -curr_options.gutter;
          leftPosition =  offsetRight + gutterSpacing;
        }

        // Position dropdown
        activates.css({
          position: 'absolute',
          top: origin.position().top + verticalOffset + scrollYOffset,
          left: leftPosition + scrollXOffset
        });


        // Show dropdown
        activates.stop(true, true).css('opacity', 0)
          .slideDown({
            queue: false,
            duration: curr_options.inDuration,
            easing: 'easeOutCubic',
            complete: function() {
              $(this).css('height', '');
            }
          })
          .animate( {opacity: 1}, {queue: false, duration: curr_options.inDuration, easing: 'easeOutSine'});
      }

      function hideDropdown() {
        // Check for simultaneous focus and click events.
        isFocused = false;
        activates.fadeOut(curr_options.outDuration);
        activates.removeClass('active');
        origin.removeClass('active');
        setTimeout(function() { activates.css('max-height', ''); }, curr_options.outDuration);
      }

      // Hover
      if (curr_options.hover) {
        var open = false;
        origin.unbind('click.' + origin.attr('id'));
        // Hover handler to show dropdown
        origin.on('mouseenter', function(e){ // Mouse over
          if (open === false) {
            placeDropdown();
            open = true;
          }
        });
        origin.on('mouseleave', function(e){
          // If hover on origin then to something other than dropdown content, then close
          var toEl = e.toElement || e.relatedTarget; // added browser compatibility for target element
          if(!$(toEl).closest('.dropdown-content').is(activates)) {
            activates.stop(true, true);
            hideDropdown();
            open = false;
          }
        });

        activates.on('mouseleave', function(e){ // Mouse out
          var toEl = e.toElement || e.relatedTarget;
          if(!$(toEl).closest('.dropdown-button').is(origin)) {
            activates.stop(true, true);
            hideDropdown();
            open = false;
          }
        });

        // Click
      } else {
        // Click handler to show dropdown
        origin.unbind('click.' + origin.attr('id'));
        origin.bind('click.'+origin.attr('id'), function(e){
          if (!isFocused) {
            if ( origin[0] == e.currentTarget &&
                 !origin.hasClass('active') &&
                 ($(e.target).closest('.dropdown-content').length === 0)) {
              e.preventDefault(); // Prevents button click from moving window
              if (curr_options.stopPropagation) {
                e.stopPropagation();
              }
              placeDropdown('click');
            }
            // If origin is clicked and menu is open, close menu
            else if (origin.hasClass('active')) {
              hideDropdown();
              $(document).unbind('click.'+ activates.attr('id') + ' touchstart.' + activates.attr('id'));
            }
            // If menu open, add click close handler to document
            if (activates.hasClass('active')) {
              $(document).bind('click.'+ activates.attr('id') + ' touchstart.' + activates.attr('id'), function (e) {
                if (!activates.is(e.target) && !origin.is(e.target) && (!origin.find(e.target).length) ) {
                  hideDropdown();
                  $(document).unbind('click.'+ activates.attr('id') + ' touchstart.' + activates.attr('id'));
                }
              });
            }
          }
        });

      } // End else

      // Listen to open and close event - useful for select component
      origin.on('open', function(e, eventType) {
        placeDropdown(eventType);
      });
      origin.on('close', hideDropdown);


    });
  }; // End dropdown plugin

  $(document).ready(function(){
    $('.dropdown-button').dropdown();
  });
}( jQuery ));
;(function($) {
  var _stack = 0,
  _lastID = 0,
  _generateID = function() {
    _lastID++;
    return 'materialize-modal-overlay-' + _lastID;
  };

  var methods = {
    init : function(options) {
      var defaults = {
        opacity: 0.5,
        in_duration: 350,
        out_duration: 250,
        ready: undefined,
        complete: undefined,
        dismissible: true,
        starting_top: '4%',
        ending_top: '10%'
      };

      // Override defaults
      options = $.extend(defaults, options);

      return this.each(function() {
        var $modal = $(this);
        var modal_id = $(this).attr("id") || '#' + $(this).data('target');

        var closeModal = function() {
          var overlayID = $modal.data('overlay-id');
          var $overlay = $('#' + overlayID);
          $modal.removeClass('open');

          // Enable scrolling
          $('body').css({
            overflow: '',
            width: ''
          });

          $modal.find('.modal-close').off('click.close');
          $(document).off('keyup.modal' + overlayID);

          $overlay.velocity( { opacity: 0}, {duration: options.out_duration, queue: false, ease: "easeOutQuart"});


          // Define Bottom Sheet animation
          var exitVelocityOptions = {
            duration: options.out_duration,
            queue: false,
            ease: "easeOutCubic",
            // Handle modal ready callback
            complete: function() {
              $(this).css({display:"none"});

              // Call complete callback
              if (typeof(options.complete) === "function") {
                options.complete.call(this, $modal);
              }
              $overlay.remove();
              _stack--;
            }
          };
          if ($modal.hasClass('bottom-sheet')) {
            $modal.velocity({bottom: "-100%", opacity: 0}, exitVelocityOptions);
          }
          else {
            $modal.velocity(
              { top: options.starting_top, opacity: 0, scaleX: 0.7},
              exitVelocityOptions
            );
          }
        };

        var openModal = function($trigger) {
          var $body = $('body');
          var oldWidth = $body.innerWidth();
          $body.css('overflow', 'hidden');
          $body.width(oldWidth);

          if ($modal.hasClass('open')) {
            return;
          }

          var overlayID = _generateID();
          var $overlay = $('<div class="modal-overlay"></div>');
          lStack = (++_stack);

          // Store a reference of the overlay
          $overlay.attr('id', overlayID).css('z-index', 1000 + lStack * 2);
          $modal.data('overlay-id', overlayID).css('z-index', 1000 + lStack * 2 + 1);
          $modal.addClass('open');

          $("body").append($overlay);

          if (options.dismissible) {
            $overlay.click(function() {
              closeModal();
            });
            // Return on ESC
            $(document).on('keyup.modal' + overlayID, function(e) {
              if (e.keyCode === 27) {   // ESC key
                closeModal();
              }
            });
          }

          $modal.find(".modal-close").on('click.close', function(e) {
            closeModal();
          });

          $overlay.css({ display : "block", opacity : 0 });

          $modal.css({
            display : "block",
            opacity: 0
          });

          $overlay.velocity({opacity: options.opacity}, {duration: options.in_duration, queue: false, ease: "easeOutCubic"});
          $modal.data('associated-overlay', $overlay[0]);

          // Define Bottom Sheet animation
          var enterVelocityOptions = {
            duration: options.in_duration,
            queue: false,
            ease: "easeOutCubic",
            // Handle modal ready callback
            complete: function() {
              if (typeof(options.ready) === "function") {
                options.ready.call(this, $modal, $trigger);
              }
            }
          };
          if ($modal.hasClass('bottom-sheet')) {
            $modal.velocity({bottom: "0", opacity: 1}, enterVelocityOptions);
          }
          else {
            $.Velocity.hook($modal, "scaleX", 0.7);
            $modal.css({ top: options.starting_top });
            $modal.velocity({top: options.ending_top, opacity: 1, scaleX: '1'}, enterVelocityOptions);
          }

        };

        // Reset handlers
        $(document).off('click.modalTrigger', 'a[href="#' + modal_id + '"], [data-target="' + modal_id + '"]');
        $(this).off('openModal');
        $(this).off('closeModal');

        // Close Handlers
        $(document).on('click.modalTrigger', 'a[href="#' + modal_id + '"], [data-target="' + modal_id + '"]', function(e) {
          options.starting_top = ($(this).offset().top - $(window).scrollTop()) /1.15;
          openModal($(this));
          e.preventDefault();
        }); // done set on click

        $(this).on('openModal', function() {
          var modal_id = $(this).attr("href") || '#' + $(this).data('target');
          openModal();
        });

        $(this).on('closeModal', function() {
          closeModal();
        });
      }); // done return
    },
    open : function() {
      $(this).trigger('openModal');
    },
    close : function() {
      $(this).trigger('closeModal');
    }
  };

  $.fn.modal = function(methodOrOptions) {
    if ( methods[methodOrOptions] ) {
      return methods[ methodOrOptions ].apply( this, Array.prototype.slice.call( arguments, 1 ));
    } else if ( typeof methodOrOptions === 'object' || ! methodOrOptions ) {
      // Default to "init"
      return methods.init.apply( this, arguments );
    } else {
      $.error( 'Method ' +  methodOrOptions + ' does not exist on jQuery.modal' );
    }
  };
})(jQuery);
;(function ($) {

  $.fn.materialbox = function () {

    return this.each(function() {

      if ($(this).hasClass('initialized')) {
        return;
      }

      $(this).addClass('initialized');

      var overlayActive = false;
      var doneAnimating = true;
      var inDuration = 275;
      var outDuration = 200;
      var origin = $(this);
      var placeholder = $('<div></div>').addClass('material-placeholder');
      var originalWidth = 0;
      var originalHeight = 0;
      var ancestorsChanged;
      var ancestor;
      origin.wrap(placeholder);


      origin.on('click', function(){
        var placeholder = origin.parent('.material-placeholder');
        var windowWidth = window.innerWidth;
        var windowHeight = window.innerHeight;
        var originalWidth = origin.width();
        var originalHeight = origin.height();


        // If already modal, return to original
        if (doneAnimating === false) {
          returnToOriginal();
          return false;
        }
        else if (overlayActive && doneAnimating===true) {
          returnToOriginal();
          return false;
        }


        // Set states
        doneAnimating = false;
        origin.addClass('active');
        overlayActive = true;

        // Set positioning for placeholder
        placeholder.css({
          width: placeholder[0].getBoundingClientRect().width,
          height: placeholder[0].getBoundingClientRect().height,
          position: 'relative',
          top: 0,
          left: 0
        });

        // Find ancestor with overflow: hidden; and remove it
        ancestorsChanged = undefined;
        ancestor = placeholder[0].parentNode;
        var count = 0;
        while (ancestor !== null && !$(ancestor).is(document)) {
          var curr = $(ancestor);
          if (curr.css('overflow') !== 'visible') {
            curr.css('overflow', 'visible');
            if (ancestorsChanged === undefined) {
              ancestorsChanged = curr;
            }
            else {
              ancestorsChanged = ancestorsChanged.add(curr);
            }
          }
          ancestor = ancestor.parentNode;
        }

        // Set css on origin
        origin.css({position: 'absolute', 'z-index': 1000})
        .data('width', originalWidth)
        .data('height', originalHeight);

        // Add overlay
        var overlay = $('<div id="materialbox-overlay"></div>')
          .css({
            opacity: 0
          })
          .click(function(){
            if (doneAnimating === true)
            returnToOriginal();
          });
          // Animate Overlay
          // Put before in origin image to preserve z-index layering.
          origin.before(overlay);
          overlay.velocity({opacity: 1},
                           {duration: inDuration, queue: false, easing: 'easeOutQuad'} );

        // Add and animate caption if it exists
        if (origin.data('caption') !== "") {
          var $photo_caption = $('<div class="materialbox-caption"></div>');
          $photo_caption.text(origin.data('caption'));
          $('body').append($photo_caption);
          $photo_caption.css({ "display": "inline" });
          $photo_caption.velocity({opacity: 1}, {duration: inDuration, queue: false, easing: 'easeOutQuad'});
        }

        // Resize Image
        var ratio = 0;
        var widthPercent = originalWidth / windowWidth;
        var heightPercent = originalHeight / windowHeight;
        var newWidth = 0;
        var newHeight = 0;

        if (widthPercent > heightPercent) {
          ratio = originalHeight / originalWidth;
          newWidth = windowWidth * 0.9;
          newHeight = windowWidth * 0.9 * ratio;
        }
        else {
          ratio = originalWidth / originalHeight;
          newWidth = (windowHeight * 0.9) * ratio;
          newHeight = windowHeight * 0.9;
        }

        // Animate image + set z-index
        if(origin.hasClass('responsive-img')) {
          origin.velocity({'max-width': newWidth, 'width': originalWidth}, {duration: 0, queue: false,
            complete: function(){
              origin.css({left: 0, top: 0})
              .velocity(
                {
                  height: newHeight,
                  width: newWidth,
                  left: $(document).scrollLeft() + windowWidth/2 - origin.parent('.material-placeholder').offset().left - newWidth/2,
                  top: $(document).scrollTop() + windowHeight/2 - origin.parent('.material-placeholder').offset().top - newHeight/ 2
                },
                {
                  duration: inDuration,
                  queue: false,
                  easing: 'easeOutQuad',
                  complete: function(){doneAnimating = true;}
                }
              );
            } // End Complete
          }); // End Velocity
        }
        else {
          origin.css('left', 0)
          .css('top', 0)
          .velocity(
            {
              height: newHeight,
              width: newWidth,
              left: $(document).scrollLeft() + windowWidth/2 - origin.parent('.material-placeholder').offset().left - newWidth/2,
              top: $(document).scrollTop() + windowHeight/2 - origin.parent('.material-placeholder').offset().top - newHeight/ 2
            },
            {
              duration: inDuration,
              queue: false,
              easing: 'easeOutQuad',
              complete: function(){doneAnimating = true;}
            }
            ); // End Velocity
        }

    }); // End origin on click


      // Return on scroll
      $(window).scroll(function() {
        if (overlayActive) {
          returnToOriginal();
        }
      });

      // Return on ESC
      $(document).keyup(function(e) {

        if (e.keyCode === 27 && doneAnimating === true) {   // ESC key
          if (overlayActive) {
            returnToOriginal();
          }
        }
      });


      // This function returns the modaled image to the original spot
      function returnToOriginal() {

          doneAnimating = false;

          var placeholder = origin.parent('.material-placeholder');
          var windowWidth = window.innerWidth;
          var windowHeight = window.innerHeight;
          var originalWidth = origin.data('width');
          var originalHeight = origin.data('height');

          origin.velocity("stop", true);
          $('#materialbox-overlay').velocity("stop", true);
          $('.materialbox-caption').velocity("stop", true);


          $('#materialbox-overlay').velocity({opacity: 0}, {
            duration: outDuration, // Delay prevents animation overlapping
            queue: false, easing: 'easeOutQuad',
            complete: function(){
              // Remove Overlay
              overlayActive = false;
              $(this).remove();
            }
          });

          // Resize Image
          origin.velocity(
            {
              width: originalWidth,
              height: originalHeight,
              left: 0,
              top: 0
            },
            {
              duration: outDuration,
              queue: false, easing: 'easeOutQuad'
            }
          );

          // Remove Caption + reset css settings on image
          $('.materialbox-caption').velocity({opacity: 0}, {
            duration: outDuration, // Delay prevents animation overlapping
            queue: false, easing: 'easeOutQuad',
            complete: function(){
              placeholder.css({
                height: '',
                width: '',
                position: '',
                top: '',
                left: ''
              });

              origin.css({
                height: '',
                top: '',
                left: '',
                width: '',
                'max-width': '',
                position: '',
                'z-index': ''
              });

              // Remove class
              origin.removeClass('active');
              doneAnimating = true;
              $(this).remove();

              // Remove overflow overrides on ancestors
              if (ancestorsChanged) {
                ancestorsChanged.css('overflow', '');
              }
            }
          });

        }
        });
};

$(document).ready(function(){
  $('.materialboxed').materialbox();
});

}( jQuery ));
;(function ($) {

    $.fn.parallax = function () {
      var window_width = $(window).width();
      // Parallax Scripts
      return this.each(function(i) {
        var $this = $(this);
        $this.addClass('parallax');

        function updateParallax(initial) {
          var container_height;
          if (window_width < 601) {
            container_height = ($this.height() > 0) ? $this.height() : $this.children("img").height();
          }
          else {
            container_height = ($this.height() > 0) ? $this.height() : 500;
          }
          var $img = $this.children("img").first();
          var img_height = $img.height();
          var parallax_dist = img_height - container_height;
          var bottom = $this.offset().top + container_height;
          var top = $this.offset().top;
          var scrollTop = $(window).scrollTop();
          var windowHeight = window.innerHeight;
          var windowBottom = scrollTop + windowHeight;
          var percentScrolled = (windowBottom - top) / (container_height + windowHeight);
          var parallax = Math.round((parallax_dist * percentScrolled));

          if (initial) {
            $img.css('display', 'block');
          }
          if ((bottom > scrollTop) && (top < (scrollTop + windowHeight))) {
            $img.css('transform', "translate3D(-50%," + parallax + "px, 0)");
          }

        }

        // Wait for image load
        $this.children("img").one("load", function() {
          updateParallax(true);
        }).each(function() {
          if (this.complete) $(this).trigger("load");
        });

        $(window).scroll(function() {
          window_width = $(window).width();
          updateParallax(false);
        });

        $(window).resize(function() {
          window_width = $(window).width();
          updateParallax(false);
        });

      });

    };
}( jQuery ));
;(function ($) {

  var methods = {
    init : function(options) {
      var defaults = {
        onShow: null
      };
      options = $.extend(defaults, options);

      return this.each(function() {

      // For each set of tabs, we want to keep track of
      // which tab is active and its associated content
      var $this = $(this),
          window_width = $(window).width();

      var $active, $content, $links = $this.find('li.tab a'),
          $tabs_width = $this.width(),
          $tab_width = Math.max($tabs_width, $this[0].scrollWidth) / $links.length,
          $index = 0;

      // Finds right attribute for indicator based on active tab.
      // el: jQuery Object
      var calcRightPos = function(el) {
        return $tabs_width - el.position().left - el.outerWidth() - $this.scrollLeft();
      };

      // Finds left attribute for indicator based on active tab.
      // el: jQuery Object
      var calcLeftPos = function(el) {
        return el.position().left + $this.scrollLeft();
      };

      // If the location.hash matches one of the links, use that as the active tab.
      $active = $($links.filter('[href="'+location.hash+'"]'));

      // If no match is found, use the first link or any with class 'active' as the initial active tab.
      if ($active.length === 0) {
        $active = $(this).find('li.tab a.active').first();
      }
      if ($active.length === 0) {
        $active = $(this).find('li.tab a').first();
      }

      $active.addClass('active');
      $index = $links.index($active);
      if ($index < 0) {
        $index = 0;
      }

      if ($active[0] !== undefined) {
        $content = $($active[0].hash);
      }

      // append indicator then set indicator width to tab width
      $this.append('<div class="indicator"></div>');
      var $indicator = $this.find('.indicator');
      if ($this.is(":visible")) {
        // $indicator.css({"right": $tabs_width - (($index + 1) * $tab_width)});
        // $indicator.css({"left": $index * $tab_width});
        setTimeout(function() {
          $indicator.css({"right": calcRightPos($active) });
          $indicator.css({"left": calcLeftPos($active) });
        }, 0);
      }
      $(window).resize(function () {
        $tabs_width = $this.width();
        $tab_width = Math.max($tabs_width, $this[0].scrollWidth) / $links.length;
        if ($index < 0) {
          $index = 0;
        }
        if ($tab_width !== 0 && $tabs_width !== 0) {
          $indicator.css({"right": calcRightPos($active) });
          $indicator.css({"left": calcLeftPos($active) });
        }
      });

      // Hide the remaining content
      $links.not($active).each(function () {
        $(Materialize.escapeHash(this.hash)).hide();
      });


      // Bind the click event handler
      $this.on('click', 'a', function(e) {
        if ($(this).parent().hasClass('disabled')) {
          e.preventDefault();
          return;
        }

        // Act as regular link if target attribute is specified.
        if (!!$(this).attr("target")) {
          return;
        }

        $tabs_width = $this.width();
        $tab_width = Math.max($tabs_width, $this[0].scrollWidth) / $links.length;

        // Make the old tab inactive.
        $active.removeClass('active');
        if ($content !== undefined) {
          $content.hide();
        }

        // Update the variables with the new link and content
        $active = $(this);
        $content = $(Materialize.escapeHash(this.hash));
        $links = $this.find('li.tab a');
        var activeRect = $active.position();

        // Make the tab active.
        $active.addClass('active');
        var $prev_index = $index;
        $index = $links.index($(this));
        if ($index < 0) {
          $index = 0;
        }
        // Change url to current tab
        // window.location.hash = $active.attr('href');

        if ($content !== undefined) {
          $content.show();
          if (typeof(options.onShow) === "function") {
            options.onShow.call(this, $content);
          }
        }

        // Update indicator

        if (($index - $prev_index) >= 0) {
          $indicator.velocity({"right": calcRightPos($active) }, { duration: 300, queue: false, easing: 'easeOutQuad'});
          $indicator.velocity({"left": calcLeftPos($active) }, {duration: 300, queue: false, easing: 'easeOutQuad', delay: 90});

        } else {
          $indicator.velocity({"left": calcLeftPos($active) }, { duration: 300, queue: false, easing: 'easeOutQuad'});
          $indicator.velocity({"right": calcRightPos($active) }, {duration: 300, queue: false, easing: 'easeOutQuad', delay: 90});
        }

        // Prevent the anchor's default click action
        e.preventDefault();
      });
    });

    },
    select_tab : function( id ) {
      this.find('a[href="#' + id + '"]').trigger('click');
    }
  };

  $.fn.tabs = function(methodOrOptions) {
    if ( methods[methodOrOptions] ) {
      return methods[ methodOrOptions ].apply( this, Array.prototype.slice.call( arguments, 1 ));
    } else if ( typeof methodOrOptions === 'object' || ! methodOrOptions ) {
      // Default to "init"
      return methods.init.apply( this, arguments );
    } else {
      $.error( 'Method ' +  methodOrOptions + ' does not exist on jQuery.tabs' );
    }
  };

  $(document).ready(function(){
    $('ul.tabs').tabs();
  });
}( jQuery ));
;(function ($) {
    $.fn.tooltip = function (options) {
      var timeout = null,
      margin = 5;

      // Defaults
      var defaults = {
        delay: 350,
        tooltip: '',
        position: 'bottom',
        html: false
      };

      // Remove tooltip from the activator
      if (options === "remove") {
        this.each(function() {
          $('#' + $(this).attr('data-tooltip-id')).remove();
          $(this).off('mouseenter.tooltip mouseleave.tooltip');
        });
        return false;
      }

      options = $.extend(defaults, options);

      return this.each(function() {
        var tooltipId = Materialize.guid();
        var origin = $(this);

        // Destroy old tooltip
        if (origin.attr('data-tooltip-id')) {
          $('#' + origin.attr('data-tooltip-id')).remove();
        }

        origin.attr('data-tooltip-id', tooltipId);

        // Get attributes.
        var allowHtml,
            tooltipDelay,
            tooltipPosition,
            tooltipText,
            tooltipEl,
            backdrop;
        var setAttributes = function() {
          allowHtml = origin.attr('data-html') ? origin.attr('data-html') === 'true' : options.html;
          tooltipDelay = origin.attr('data-delay');
          tooltipDelay = (tooltipDelay === undefined || tooltipDelay === '') ?
              options.delay : tooltipDelay;
          tooltipPosition = origin.attr('data-position');
          tooltipPosition = (tooltipPosition === undefined || tooltipPosition === '') ?
              options.position : tooltipPosition;
          tooltipText = origin.attr('data-tooltip');
          tooltipText = (tooltipText === undefined || tooltipText === '') ?
              options.tooltip : tooltipText;
        };
        setAttributes();

        var renderTooltipEl = function() {
          var tooltip = $('<div class="material-tooltip"></div>');

          // Create Text span
          if (allowHtml) {
            tooltipText = $('<span></span>').html(tooltipText);
          } else{
            tooltipText = $('<span></span>').text(tooltipText);
          }

          // Create tooltip
          tooltip.append(tooltipText)
            .appendTo($('body'))
            .attr('id', tooltipId);

          // Create backdrop
          backdrop = $('<div class="backdrop"></div>');
          backdrop.appendTo(tooltip);
          return tooltip;
        };
        tooltipEl = renderTooltipEl();

        // Destroy previously binded events
        origin.off('mouseenter.tooltip mouseleave.tooltip');
        // Mouse In
        var started = false, timeoutRef;
        origin.on({'mouseenter.tooltip': function(e) {
          var showTooltip = function() {
            setAttributes();
            started = true;
            tooltipEl.velocity('stop');
            backdrop.velocity('stop');
            tooltipEl.css({ display: 'block', left: '0px', top: '0px' });

            // Tooltip positioning
            var originWidth = origin.outerWidth();
            var originHeight = origin.outerHeight();

            var tooltipHeight = tooltipEl.outerHeight();
            var tooltipWidth = tooltipEl.outerWidth();
            var tooltipVerticalMovement = '0px';
            var tooltipHorizontalMovement = '0px';
            var scaleXFactor = 8;
            var scaleYFactor = 8;
            var targetTop, targetLeft, newCoordinates;

            if (tooltipPosition === "top") {
              // Top Position
              targetTop = origin.offset().top - tooltipHeight - margin;
              targetLeft = origin.offset().left + originWidth/2 - tooltipWidth/2;
              newCoordinates = repositionWithinScreen(targetLeft, targetTop, tooltipWidth, tooltipHeight);

              tooltipVerticalMovement = '-10px';
              backdrop.css({
                bottom: 0,
                left: 0,
                borderRadius: '14px 14px 0 0',
                transformOrigin: '50% 100%',
                marginTop: tooltipHeight,
                marginLeft: (tooltipWidth/2) - (backdrop.width()/2)
              });
            }
            // Left Position
            else if (tooltipPosition === "left") {
              targetTop = origin.offset().top + originHeight/2 - tooltipHeight/2;
              targetLeft =  origin.offset().left - tooltipWidth - margin;
              newCoordinates = repositionWithinScreen(targetLeft, targetTop, tooltipWidth, tooltipHeight);

              tooltipHorizontalMovement = '-10px';
              backdrop.css({
                top: '-7px',
                right: 0,
                width: '14px',
                height: '14px',
                borderRadius: '14px 0 0 14px',
                transformOrigin: '95% 50%',
                marginTop: tooltipHeight/2,
                marginLeft: tooltipWidth
              });
            }
            // Right Position
            else if (tooltipPosition === "right") {
              targetTop = origin.offset().top + originHeight/2 - tooltipHeight/2;
              targetLeft = origin.offset().left + originWidth + margin;
              newCoordinates = repositionWithinScreen(targetLeft, targetTop, tooltipWidth, tooltipHeight);

              tooltipHorizontalMovement = '+10px';
              backdrop.css({
                top: '-7px',
                left: 0,
                width: '14px',
                height: '14px',
                borderRadius: '0 14px 14px 0',
                transformOrigin: '5% 50%',
                marginTop: tooltipHeight/2,
                marginLeft: '0px'
              });
            }
            else {
              // Bottom Position
              targetTop = origin.offset().top + origin.outerHeight() + margin;
              targetLeft = origin.offset().left + originWidth/2 - tooltipWidth/2;
              newCoordinates = repositionWithinScreen(targetLeft, targetTop, tooltipWidth, tooltipHeight);
              tooltipVerticalMovement = '+10px';
              backdrop.css({
                top: 0,
                left: 0,
                marginLeft: (tooltipWidth/2) - (backdrop.width()/2)
              });
            }

            // Set tooptip css placement
            tooltipEl.css({
              top: newCoordinates.y,
              left: newCoordinates.x
            });

            // Calculate Scale to fill
            scaleXFactor = Math.SQRT2 * tooltipWidth / parseInt(backdrop.css('width'));
            scaleYFactor = Math.SQRT2 * tooltipHeight / parseInt(backdrop.css('height'));

            tooltipEl.velocity({ marginTop: tooltipVerticalMovement, marginLeft: tooltipHorizontalMovement}, { duration: 350, queue: false })
              .velocity({opacity: 1}, {duration: 300, delay: 50, queue: false});
            backdrop.css({ display: 'block' })
              .velocity({opacity:1},{duration: 55, delay: 0, queue: false})
              .velocity({scaleX: scaleXFactor, scaleY: scaleYFactor}, {duration: 300, delay: 0, queue: false, easing: 'easeInOutQuad'});
          };

          timeoutRef = setTimeout(showTooltip, tooltipDelay); // End Interval

        // Mouse Out
        },
        'mouseleave.tooltip': function(){
          // Reset State
          started = false;
          clearTimeout(timeoutRef);

          // Animate back
          setTimeout(function() {
            if (started !== true) {
              tooltipEl.velocity({
                opacity: 0, marginTop: 0, marginLeft: 0}, { duration: 225, queue: false});
              backdrop.velocity({opacity: 0, scaleX: 1, scaleY: 1}, {
                duration:225,
                queue: false,
                complete: function(){
                  backdrop.css('display', 'none');
                  tooltipEl.css('display', 'none');
                  started = false;}
              });
            }
          },225);
        }
        });
    });
  };

  var repositionWithinScreen = function(x, y, width, height) {
    var newX = x;
    var newY = y;

    if (newX < 0) {
      newX = 4;
    } else if (newX + width > window.innerWidth) {
      newX -= newX + width - window.innerWidth;
    }

    if (newY < 0) {
      newY = 4;
    } else if (newY + height > window.innerHeight + $(window).scrollTop) {
      newY -= newY + height - window.innerHeight;
    }

    return {x: newX, y: newY};
  };

  $(document).ready(function(){
     $('.tooltipped').tooltip();
   });
}( jQuery ));
;/*!
 * Waves v0.6.4
 * http://fian.my.id/Waves
 *
 * Copyright 2014 Alfiana E. Sibuea and other contributors
 * Released under the MIT license
 * https://github.com/fians/Waves/blob/master/LICENSE
 */

;(function(window) {
    'use strict';

    var Waves = Waves || {};
    var $$ = document.querySelectorAll.bind(document);

    // Find exact position of element
    function isWindow(obj) {
        return obj !== null && obj === obj.window;
    }

    function getWindow(elem) {
        return isWindow(elem) ? elem : elem.nodeType === 9 && elem.defaultView;
    }

    function offset(elem) {
        var docElem, win,
            box = {top: 0, left: 0},
            doc = elem && elem.ownerDocument;

        docElem = doc.documentElement;

        if (typeof elem.getBoundingClientRect !== typeof undefined) {
            box = elem.getBoundingClientRect();
        }
        win = getWindow(doc);
        return {
            top: box.top + win.pageYOffset - docElem.clientTop,
            left: box.left + win.pageXOffset - docElem.clientLeft
        };
    }

    function convertStyle(obj) {
        var style = '';

        for (var a in obj) {
            if (obj.hasOwnProperty(a)) {
                style += (a + ':' + obj[a] + ';');
            }
        }

        return style;
    }

    var Effect = {

        // Effect delay
        duration: 750,

        show: function(e, element) {

            // Disable right click
            if (e.button === 2) {
                return false;
            }

            var el = element || this;

            // Create ripple
            var ripple = document.createElement('div');
            ripple.className = 'waves-ripple';
            el.appendChild(ripple);

            // Get click coordinate and element witdh
            var pos         = offset(el);
            var relativeY   = (e.pageY - pos.top);
            var relativeX   = (e.pageX - pos.left);
            var scale       = 'scale('+((el.clientWidth / 100) * 10)+')';

            // Support for touch devices
            if ('touches' in e) {
              relativeY   = (e.touches[0].pageY - pos.top);
              relativeX   = (e.touches[0].pageX - pos.left);
            }

            // Attach data to element
            ripple.setAttribute('data-hold', Date.now());
            ripple.setAttribute('data-scale', scale);
            ripple.setAttribute('data-x', relativeX);
            ripple.setAttribute('data-y', relativeY);

            // Set ripple position
            var rippleStyle = {
                'top': relativeY+'px',
                'left': relativeX+'px'
            };

            ripple.className = ripple.className + ' waves-notransition';
            ripple.setAttribute('style', convertStyle(rippleStyle));
            ripple.className = ripple.className.replace('waves-notransition', '');

            // Scale the ripple
            rippleStyle['-webkit-transform'] = scale;
            rippleStyle['-moz-transform'] = scale;
            rippleStyle['-ms-transform'] = scale;
            rippleStyle['-o-transform'] = scale;
            rippleStyle.transform = scale;
            rippleStyle.opacity   = '1';

            rippleStyle['-webkit-transition-duration'] = Effect.duration + 'ms';
            rippleStyle['-moz-transition-duration']    = Effect.duration + 'ms';
            rippleStyle['-o-transition-duration']      = Effect.duration + 'ms';
            rippleStyle['transition-duration']         = Effect.duration + 'ms';

            rippleStyle['-webkit-transition-timing-function'] = 'cubic-bezier(0.250, 0.460, 0.450, 0.940)';
            rippleStyle['-moz-transition-timing-function']    = 'cubic-bezier(0.250, 0.460, 0.450, 0.940)';
            rippleStyle['-o-transition-timing-function']      = 'cubic-bezier(0.250, 0.460, 0.450, 0.940)';
            rippleStyle['transition-timing-function']         = 'cubic-bezier(0.250, 0.460, 0.450, 0.940)';

            ripple.setAttribute('style', convertStyle(rippleStyle));
        },

        hide: function(e) {
            TouchHandler.touchup(e);

            var el = this;
            var width = el.clientWidth * 1.4;

            // Get first ripple
            var ripple = null;
            var ripples = el.getElementsByClassName('waves-ripple');
            if (ripples.length > 0) {
                ripple = ripples[ripples.length - 1];
            } else {
                return false;
            }

            var relativeX   = ripple.getAttribute('data-x');
            var relativeY   = ripple.getAttribute('data-y');
            var scale       = ripple.getAttribute('data-scale');

            // Get delay beetween mousedown and mouse leave
            var diff = Date.now() - Number(ripple.getAttribute('data-hold'));
            var delay = 350 - diff;

            if (delay < 0) {
                delay = 0;
            }

            // Fade out ripple after delay
            setTimeout(function() {
                var style = {
                    'top': relativeY+'px',
                    'left': relativeX+'px',
                    'opacity': '0',

                    // Duration
                    '-webkit-transition-duration': Effect.duration + 'ms',
                    '-moz-transition-duration': Effect.duration + 'ms',
                    '-o-transition-duration': Effect.duration + 'ms',
                    'transition-duration': Effect.duration + 'ms',
                    '-webkit-transform': scale,
                    '-moz-transform': scale,
                    '-ms-transform': scale,
                    '-o-transform': scale,
                    'transform': scale,
                };

                ripple.setAttribute('style', convertStyle(style));

                setTimeout(function() {
                    try {
                        el.removeChild(ripple);
                    } catch(e) {
                        return false;
                    }
                }, Effect.duration);
            }, delay);
        },

        // Little hack to make <input> can perform waves effect
        wrapInput: function(elements) {
            for (var a = 0; a < elements.length; a++) {
                var el = elements[a];

                if (el.tagName.toLowerCase() === 'input') {
                    var parent = el.parentNode;

                    // If input already have parent just pass through
                    if (parent.tagName.toLowerCase() === 'i' && parent.className.indexOf('waves-effect') !== -1) {
                        continue;
                    }

                    // Put element class and style to the specified parent
                    var wrapper = document.createElement('i');
                    wrapper.className = el.className + ' waves-input-wrapper';

                    var elementStyle = el.getAttribute('style');

                    if (!elementStyle) {
                        elementStyle = '';
                    }

                    wrapper.setAttribute('style', elementStyle);

                    el.className = 'waves-button-input';
                    el.removeAttribute('style');

                    // Put element as child
                    parent.replaceChild(wrapper, el);
                    wrapper.appendChild(el);
                }
            }
        }
    };


    /**
     * Disable mousedown event for 500ms during and after touch
     */
    var TouchHandler = {
        /* uses an integer rather than bool so there's no issues with
         * needing to clear timeouts if another touch event occurred
         * within the 500ms. Cannot mouseup between touchstart and
         * touchend, nor in the 500ms after touchend. */
        touches: 0,
        allowEvent: function(e) {
            var allow = true;

            if (e.type === 'touchstart') {
                TouchHandler.touches += 1; //push
            } else if (e.type === 'touchend' || e.type === 'touchcancel') {
                setTimeout(function() {
                    if (TouchHandler.touches > 0) {
                        TouchHandler.touches -= 1; //pop after 500ms
                    }
                }, 500);
            } else if (e.type === 'mousedown' && TouchHandler.touches > 0) {
                allow = false;
            }

            return allow;
        },
        touchup: function(e) {
            TouchHandler.allowEvent(e);
        }
    };


    /**
     * Delegated click handler for .waves-effect element.
     * returns null when .waves-effect element not in "click tree"
     */
    function getWavesEffectElement(e) {
        if (TouchHandler.allowEvent(e) === false) {
            return null;
        }

        var element = null;
        var target = e.target || e.srcElement;

        while (target.parentElement !== null) {
            if (!(target instanceof SVGElement) && target.className.indexOf('waves-effect') !== -1) {
                element = target;
                break;
            } else if (target.classList.contains('waves-effect')) {
                element = target;
                break;
            }
            target = target.parentElement;
        }

        return element;
    }

    /**
     * Bubble the click and show effect if .waves-effect elem was found
     */
    function showEffect(e) {
        var element = getWavesEffectElement(e);

        if (element !== null) {
            Effect.show(e, element);

            if ('ontouchstart' in window) {
                element.addEventListener('touchend', Effect.hide, false);
                element.addEventListener('touchcancel', Effect.hide, false);
            }

            element.addEventListener('mouseup', Effect.hide, false);
            element.addEventListener('mouseleave', Effect.hide, false);
        }
    }

    Waves.displayEffect = function(options) {
        options = options || {};

        if ('duration' in options) {
            Effect.duration = options.duration;
        }

        //Wrap input inside <i> tag
        Effect.wrapInput($$('.waves-effect'));

        if ('ontouchstart' in window) {
            document.body.addEventListener('touchstart', showEffect, false);
        }

        document.body.addEventListener('mousedown', showEffect, false);
    };

    /**
     * Attach Waves to an input element (or any element which doesn't
     * bubble mouseup/mousedown events).
     *   Intended to be used with dynamically loaded forms/inputs, or
     * where the user doesn't want a delegated click handler.
     */
    Waves.attach = function(element) {
        //FUTURE: automatically add waves classes and allow users
        // to specify them with an options param? Eg. light/classic/button
        if (element.tagName.toLowerCase() === 'input') {
            Effect.wrapInput([element]);
            element = element.parentElement;
        }

        if ('ontouchstart' in window) {
            element.addEventListener('touchstart', showEffect, false);
        }

        element.addEventListener('mousedown', showEffect, false);
    };

    window.Waves = Waves;

    document.addEventListener('DOMContentLoaded', function() {
        Waves.displayEffect();
    }, false);

})(window);
;Materialize.toast = function (message, displayLength, className, completeCallback) {
    className = className || "";

    var container = document.getElementById('toast-container');

    // Create toast container if it does not exist
    if (container === null) {
        // create notification container
        container = document.createElement('div');
        container.id = 'toast-container';
        document.body.appendChild(container);
    }

    // Select and append toast
    var newToast = createToast(message);

    // only append toast if message is not undefined
    if(message){
        container.appendChild(newToast);
    }

    newToast.style.top = '35px';
    newToast.style.opacity = 0;

    // Animate toast in
    Vel(newToast, { "top" : "0px", opacity: 1 }, {duration: 300,
      easing: 'easeOutCubic',
      queue: false});

    // Allows timer to be pause while being panned
    var timeLeft = displayLength;
    var counterInterval;
    if (timeLeft != null)  {
      counterInterval = setInterval (function(){
        if (newToast.parentNode === null)
          window.clearInterval(counterInterval);

        // If toast is not being dragged, decrease its time remaining
        if (!newToast.classList.contains('panning')) {
          timeLeft -= 20;
        }

        if (timeLeft <= 0) {
          // Animate toast out
          Vel(newToast, {"opacity": 0, marginTop: '-40px'}, { duration: 375,
              easing: 'easeOutExpo',
              queue: false,
              complete: function(){
                // Call the optional callback
                if(typeof(completeCallback) === "function")
                  completeCallback();
                // Remove toast after it times out
                this[0].parentNode.removeChild(this[0]);
              }
            });
          window.clearInterval(counterInterval);
        }
      }, 20);
    }



    function createToast(html) {

        // Create toast
        var toast = document.createElement('div');
        toast.classList.add('toast');
        if (className) {
            var classes = className.split(' ');

            for (var i = 0, count = classes.length; i < count; i++) {
                toast.classList.add(classes[i]);
            }
        }
        // If type of parameter is HTML Element
        if ( typeof HTMLElement === "object" ? html instanceof HTMLElement : html && typeof html === "object" && html !== null && html.nodeType === 1 && typeof html.nodeName==="string"
) {
          toast.appendChild(html);
        }
        else if (html instanceof jQuery) {
          // Check if it is jQuery object
          toast.appendChild(html[0]);
        }
        else {
          // Insert as text;
          toast.innerHTML = html;
        }
        // Bind hammer
        var hammerHandler = new Hammer(toast, {prevent_default: false});
        hammerHandler.on('pan', function(e) {
          var deltaX = e.deltaX;
          var activationDistance = 80;

          // Change toast state
          if (!toast.classList.contains('panning')){
            toast.classList.add('panning');
          }

          var opacityPercent = 1-Math.abs(deltaX / activationDistance);
          if (opacityPercent < 0)
            opacityPercent = 0;

          Vel(toast, {left: deltaX, opacity: opacityPercent }, {duration: 50, queue: false, easing: 'easeOutQuad'});

        });

        hammerHandler.on('panend', function(e) {
          var deltaX = e.deltaX;
          var activationDistance = 80;

          // If toast dragged past activation point
          if (Math.abs(deltaX) > activationDistance) {
            Vel(toast, {marginTop: '-40px'}, { duration: 375,
                easing: 'easeOutExpo',
                queue: false,
                complete: function(){
                  if(typeof(completeCallback) === "function") {
                    completeCallback();
                  }
                  toast.parentNode.removeChild(toast);
                }
            });

          } else {
            toast.classList.remove('panning');
            // Put toast back into original position
            Vel(toast, { left: 0, opacity: 1 }, { duration: 300,
              easing: 'easeOutExpo',
              queue: false
            });

          }
        });

        return toast;
    }
};
;(function ($) {

  var methods = {
    init : function(options) {
      var defaults = {
        menuWidth: 300,
        edge: 'left',
        closeOnClick: false,
        draggable: true
      };
      options = $.extend(defaults, options);

      $(this).each(function(){
        var $this = $(this);
        var menu_id = $("#"+ $this.attr('data-activates'));

        // Set to width
        if (options.menuWidth != 300) {
          menu_id.css('width', options.menuWidth);
        }

        // Add Touch Area
        var $dragTarget;
        if (options.draggable) {
          $dragTarget = $('<div class="drag-target"></div>').attr('data-sidenav', $this.attr('data-activates'));
          $('body').append($dragTarget);
        } else {
          $dragTarget = $();
        }

        if (options.edge == 'left') {
          menu_id.css('transform', 'translateX(-100%)');
          $dragTarget.css({'left': 0}); // Add Touch Area
        }
        else {
          menu_id.addClass('right-aligned') // Change text-alignment to right
            .css('transform', 'translateX(100%)');
          $dragTarget.css({'right': 0}); // Add Touch Area
        }

        // If fixed sidenav, bring menu out
        if (menu_id.hasClass('fixed')) {
            if (window.innerWidth > 992) {
              menu_id.css('transform', 'translateX(0)');
            }
          }

        // Window resize to reset on large screens fixed
        if (menu_id.hasClass('fixed')) {
          $(window).resize( function() {
            if (window.innerWidth > 992) {
              // Close menu if window is resized bigger than 992 and user has fixed sidenav
              if ($('#sidenav-overlay').length !== 0 && menuOut) {
                removeMenu(true);
              }
              else {
                // menu_id.removeAttr('style');
                menu_id.css('transform', 'translateX(0%)');
                // menu_id.css('width', options.menuWidth);
              }
            }
            else if (menuOut === false){
              if (options.edge === 'left') {
                menu_id.css('transform', 'translateX(-100%)');
              } else {
                menu_id.css('transform', 'translateX(100%)');
              }

            }

          });
        }

        // if closeOnClick, then add close event for all a tags in side sideNav
        if (options.closeOnClick === true) {
          menu_id.on("click.itemclick", "a:not(.collapsible-header)", function(){
            removeMenu();
          });
        }

        var removeMenu = function(restoreNav) {
          panning = false;
          menuOut = false;
          // Reenable scrolling
          $('body').css({
            overflow: '',
            width: ''
          });

          $('#sidenav-overlay').velocity({opacity: 0}, {duration: 200,
              queue: false, easing: 'easeOutQuad',
            complete: function() {
              $(this).remove();
            } });
          if (options.edge === 'left') {
            // Reset phantom div
            $dragTarget.css({width: '', right: '', left: '0'});
            menu_id.velocity(
              {'translateX': '-100%'},
              { duration: 200,
                queue: false,
                easing: 'easeOutCubic',
                complete: function() {
                  if (restoreNav === true) {
                    // Restore Fixed sidenav
                    menu_id.removeAttr('style');
                    menu_id.css('width', options.menuWidth);
                  }
                }

            });
          }
          else {
            // Reset phantom div
            $dragTarget.css({width: '', right: '0', left: ''});
            menu_id.velocity(
              {'translateX': '100%'},
              { duration: 200,
                queue: false,
                easing: 'easeOutCubic',
                complete: function() {
                  if (restoreNav === true) {
                    // Restore Fixed sidenav
                    menu_id.removeAttr('style');
                    menu_id.css('width', options.menuWidth);
                  }
                }
              });
          }
        };



        // Touch Event
        var panning = false;
        var menuOut = false;

        if (options.draggable) {
          $dragTarget.on('click', function(){
            if (menuOut) {
              removeMenu();
            }
          });

          $dragTarget.hammer({
            prevent_default: false
          }).bind('pan', function(e) {

            if (e.gesture.pointerType == "touch") {

              var direction = e.gesture.direction;
              var x = e.gesture.center.x;
              var y = e.gesture.center.y;
              var velocityX = e.gesture.velocityX;

              // Disable Scrolling
              var $body = $('body');
              var $overlay = $('#sidenav-overlay');
              var oldWidth = $body.innerWidth();
              $body.css('overflow', 'hidden');
              $body.width(oldWidth);

              // If overlay does not exist, create one and if it is clicked, close menu
              if ($overlay.length === 0) {
                $overlay = $('<div id="sidenav-overlay"></div>');
                $overlay.css('opacity', 0).click( function(){
                  removeMenu();
                });
                $('body').append($overlay);
              }

              // Keep within boundaries
              if (options.edge === 'left') {
                if (x > options.menuWidth) { x = options.menuWidth; }
                else if (x < 0) { x = 0; }
              }

              if (options.edge === 'left') {
                // Left Direction
                if (x < (options.menuWidth / 2)) { menuOut = false; }
                // Right Direction
                else if (x >= (options.menuWidth / 2)) { menuOut = true; }
                menu_id.css('transform', 'translateX(' + (x - options.menuWidth) + 'px)');
              }
              else {
                // Left Direction
                if (x < (window.innerWidth - options.menuWidth / 2)) {
                  menuOut = true;
                }
                // Right Direction
                else if (x >= (window.innerWidth - options.menuWidth / 2)) {
                 menuOut = false;
               }
                var rightPos = (x - options.menuWidth / 2);
                if (rightPos < 0) {
                  rightPos = 0;
                }

                menu_id.css('transform', 'translateX(' + rightPos + 'px)');
              }


              // Percentage overlay
              var overlayPerc;
              if (options.edge === 'left') {
                overlayPerc = x / options.menuWidth;
                $overlay.velocity({opacity: overlayPerc }, {duration: 10, queue: false, easing: 'easeOutQuad'});
              }
              else {
                overlayPerc = Math.abs((x - window.innerWidth) / options.menuWidth);
                $overlay.velocity({opacity: overlayPerc }, {duration: 10, queue: false, easing: 'easeOutQuad'});
              }
            }

          }).bind('panend', function(e) {

            if (e.gesture.pointerType == "touch") {
              var $overlay = $('<div id="sidenav-overlay"></div>');
              var velocityX = e.gesture.velocityX;
              var x = e.gesture.center.x;
              var leftPos = x - options.menuWidth;
              var rightPos = x - options.menuWidth / 2;
              if (leftPos > 0 ) {
                leftPos = 0;
              }
              if (rightPos < 0) {
                rightPos = 0;
              }
              panning = false;

              if (options.edge === 'left') {
                // If velocityX <= 0.3 then the user is flinging the menu closed so ignore menuOut
                if ((menuOut && velocityX <= 0.3) || velocityX < -0.5) {
                  // Return menu to open
                  if (leftPos !== 0) {
                    menu_id.velocity({'translateX': [0, leftPos]}, {duration: 300, queue: false, easing: 'easeOutQuad'});
                  }

                  $overlay.velocity({opacity: 1 }, {duration: 50, queue: false, easing: 'easeOutQuad'});
                  $dragTarget.css({width: '50%', right: 0, left: ''});
                  menuOut = true;
                }
                else if (!menuOut || velocityX > 0.3) {
                  // Enable Scrolling
                  $('body').css({
                    overflow: '',
                    width: ''
                  });
                  // Slide menu closed
                  menu_id.velocity({'translateX': [-1 * options.menuWidth - 10, leftPos]}, {duration: 200, queue: false, easing: 'easeOutQuad'});
                  $overlay.velocity({opacity: 0 }, {duration: 200, queue: false, easing: 'easeOutQuad',
                    complete: function () {
                      $(this).remove();
                    }});
                  $dragTarget.css({width: '10px', right: '', left: 0});
                }
              }
              else {
                if ((menuOut && velocityX >= -0.3) || velocityX > 0.5) {
                  // Return menu to open
                  if (rightPos !== 0) {
                    menu_id.velocity({'translateX': [0, rightPos]}, {duration: 300, queue: false, easing: 'easeOutQuad'});
                  }

                  $overlay.velocity({opacity: 1 }, {duration: 50, queue: false, easing: 'easeOutQuad'});
                  $dragTarget.css({width: '50%', right: '', left: 0});
                  menuOut = true;
                }
                else if (!menuOut || velocityX < -0.3) {
                  // Enable Scrolling
                  $('body').css({
                    overflow: '',
                    width: ''
                  });

                  // Slide menu closed
                  menu_id.velocity({'translateX': [options.menuWidth + 10, rightPos]}, {duration: 200, queue: false, easing: 'easeOutQuad'});
                  $overlay.velocity({opacity: 0 }, {duration: 200, queue: false, easing: 'easeOutQuad',
                    complete: function () {
                      $(this).remove();
                    }});
                  $dragTarget.css({width: '10px', right: 0, left: ''});
                }
              }

            }
          });
        }

        $this.click(function() {
          if (menuOut === true) {
            menuOut = false;
            panning = false;
            removeMenu();
          }
          else {

            // Disable Scrolling
            var $body = $('body');
            var $overlay = $('<div id="sidenav-overlay"></div>');
            var oldWidth = $body.innerWidth();
            $body.css('overflow', 'hidden');
            $body.width(oldWidth);

            // Push current drag target on top of DOM tree
            $('body').append($dragTarget);

            if (options.edge === 'left') {
              $dragTarget.css({width: '50%', right: 0, left: ''});
              menu_id.velocity({'translateX': [0, -1 * options.menuWidth]}, {duration: 300, queue: false, easing: 'easeOutQuad'});
            }
            else {
              $dragTarget.css({width: '50%', right: '', left: 0});
              menu_id.velocity({'translateX': [0, options.menuWidth]}, {duration: 300, queue: false, easing: 'easeOutQuad'});
            }

            $overlay.css('opacity', 0)
            .click(function(){
              menuOut = false;
              panning = false;
              removeMenu();
              $overlay.velocity({opacity: 0}, {duration: 300, queue: false, easing: 'easeOutQuad',
                complete: function() {
                  $(this).remove();
                } });

            });
            $('body').append($overlay);
            $overlay.velocity({opacity: 1}, {duration: 300, queue: false, easing: 'easeOutQuad',
              complete: function () {
                menuOut = true;
                panning = false;
              }
            });
          }

          return false;
        });
      });


    },
    destroy: function () {
      var $overlay = $('#sidenav-overlay');
      var $dragTarget = $('.drag-target[data-sidenav="' + $(this).attr('data-activates') + '"]');
      $overlay.trigger('click');
      $dragTarget.remove();
      $(this).off('click');
      $overlay.remove();
    },
    show : function() {
      this.trigger('click');
    },
    hide : function() {
      $('#sidenav-overlay').trigger('click');
    }
  };


    $.fn.sideNav = function(methodOrOptions) {
      if ( methods[methodOrOptions] ) {
        return methods[ methodOrOptions ].apply( this, Array.prototype.slice.call( arguments, 1 ));
      } else if ( typeof methodOrOptions === 'object' || ! methodOrOptions ) {
        // Default to "init"
        return methods.init.apply( this, arguments );
      } else {
        $.error( 'Method ' +  methodOrOptions + ' does not exist on jQuery.sideNav' );
      }
    }; // Plugin end
}( jQuery ));
;/**
 * Extend jquery with a scrollspy plugin.
 * This watches the window scroll and fires events when elements are scrolled into viewport.
 *
 * throttle() and getTime() taken from Underscore.js
 * https://github.com/jashkenas/underscore
 *
 * @author Copyright 2013 John Smart
 * @license https://raw.github.com/thesmart/jquery-scrollspy/master/LICENSE
 * @see https://github.com/thesmart
 * @version 0.1.2
 */
(function($) {

	var jWindow = $(window);
	var elements = [];
	var elementsInView = [];
	var isSpying = false;
	var ticks = 0;
	var unique_id = 1;
	var offset = {
		top : 0,
		right : 0,
		bottom : 0,
		left : 0,
	}

	/**
	 * Find elements that are within the boundary
	 * @param {number} top
	 * @param {number} right
	 * @param {number} bottom
	 * @param {number} left
	 * @return {jQuery}		A collection of elements
	 */
	function findElements(top, right, bottom, left) {
		var hits = $();
		$.each(elements, function(i, element) {
			if (element.height() > 0) {
				var elTop = element.offset().top,
					elLeft = element.offset().left,
					elRight = elLeft + element.width(),
					elBottom = elTop + element.height();

				var isIntersect = !(elLeft > right ||
					elRight < left ||
					elTop > bottom ||
					elBottom < top);

				if (isIntersect) {
					hits.push(element);
				}
			}
		});

		return hits;
	}


	/**
	 * Called when the user scrolls the window
	 */
	function onScroll(scrollOffset) {
		// unique tick id
		++ticks;

		// viewport rectangle
		var top = jWindow.scrollTop(),
			left = jWindow.scrollLeft(),
			right = left + jWindow.width(),
			bottom = top + jWindow.height();

		// determine which elements are in view
		var intersections = findElements(top+offset.top + scrollOffset || 200, right+offset.right, bottom+offset.bottom, left+offset.left);
		$.each(intersections, function(i, element) {

			var lastTick = element.data('scrollSpy:ticks');
			if (typeof lastTick != 'number') {
				// entered into view
				element.triggerHandler('scrollSpy:enter');
			}

			// update tick id
			element.data('scrollSpy:ticks', ticks);
		});

		// determine which elements are no longer in view
		$.each(elementsInView, function(i, element) {
			var lastTick = element.data('scrollSpy:ticks');
			if (typeof lastTick == 'number' && lastTick !== ticks) {
				// exited from view
				element.triggerHandler('scrollSpy:exit');
				element.data('scrollSpy:ticks', null);
			}
		});

		// remember elements in view for next tick
		elementsInView = intersections;
	}

	/**
	 * Called when window is resized
	*/
	function onWinSize() {
		jWindow.trigger('scrollSpy:winSize');
	}

	/**
	 * Get time in ms
   * @license https://raw.github.com/jashkenas/underscore/master/LICENSE
	 * @type {function}
	 * @return {number}
	 */
	var getTime = (Date.now || function () {
		return new Date().getTime();
	});

	/**
	 * Returns a function, that, when invoked, will only be triggered at most once
	 * during a given window of time. Normally, the throttled function will run
	 * as much as it can, without ever going more than once per `wait` duration;
	 * but if you'd like to disable the execution on the leading edge, pass
	 * `{leading: false}`. To disable execution on the trailing edge, ditto.
	 * @license https://raw.github.com/jashkenas/underscore/master/LICENSE
	 * @param {function} func
	 * @param {number} wait
	 * @param {Object=} options
	 * @returns {Function}
	 */
	function throttle(func, wait, options) {
		var context, args, result;
		var timeout = null;
		var previous = 0;
		options || (options = {});
		var later = function () {
			previous = options.leading === false ? 0 : getTime();
			timeout = null;
			result = func.apply(context, args);
			context = args = null;
		};
		return function () {
			var now = getTime();
			if (!previous && options.leading === false) previous = now;
			var remaining = wait - (now - previous);
			context = this;
			args = arguments;
			if (remaining <= 0) {
				clearTimeout(timeout);
				timeout = null;
				previous = now;
				result = func.apply(context, args);
				context = args = null;
			} else if (!timeout && options.trailing !== false) {
				timeout = setTimeout(later, remaining);
			}
			return result;
		};
	};

	/**
	 * Enables ScrollSpy using a selector
	 * @param {jQuery|string} selector  The elements collection, or a selector
	 * @param {Object=} options	Optional.
        throttle : number -> scrollspy throttling. Default: 100 ms
        offsetTop : number -> offset from top. Default: 0
        offsetRight : number -> offset from right. Default: 0
        offsetBottom : number -> offset from bottom. Default: 0
        offsetLeft : number -> offset from left. Default: 0
	 * @returns {jQuery}
	 */
	$.scrollSpy = function(selector, options) {
	  var defaults = {
			throttle: 100,
			scrollOffset: 200 // offset - 200 allows elements near bottom of page to scroll
    };
    options = $.extend(defaults, options);

		var visible = [];
		selector = $(selector);
		selector.each(function(i, element) {
			elements.push($(element));
			$(element).data("scrollSpy:id", i);
			// Smooth scroll to section
		  $('a[href="#' + $(element).attr('id') + '"]').click(function(e) {
		    e.preventDefault();
		    var offset = $(Materialize.escapeHash(this.hash)).offset().top + 1;
	    	$('html, body').animate({ scrollTop: offset - options.scrollOffset }, {duration: 400, queue: false, easing: 'easeOutCubic'});
		  });
		});

		offset.top = options.offsetTop || 0;
		offset.right = options.offsetRight || 0;
		offset.bottom = options.offsetBottom || 0;
		offset.left = options.offsetLeft || 0;

		var throttledScroll = throttle(function() {
			onScroll(options.scrollOffset);
		}, options.throttle || 100);
		var readyScroll = function(){
			$(document).ready(throttledScroll);
		};

		if (!isSpying) {
			jWindow.on('scroll', readyScroll);
			jWindow.on('resize', readyScroll);
			isSpying = true;
		}

		// perform a scan once, after current execution context, and after dom is ready
		setTimeout(readyScroll, 0);


		selector.on('scrollSpy:enter', function() {
			visible = $.grep(visible, function(value) {
	      return value.height() != 0;
	    });

			var $this = $(this);

			if (visible[0]) {
				$('a[href="#' + visible[0].attr('id') + '"]').removeClass('active');
				if ($this.data('scrollSpy:id') < visible[0].data('scrollSpy:id')) {
					visible.unshift($(this));
				}
				else {
					visible.push($(this));
				}
			}
			else {
				visible.push($(this));
			}


			$('a[href="#' + visible[0].attr('id') + '"]').addClass('active');
		});
		selector.on('scrollSpy:exit', function() {
			visible = $.grep(visible, function(value) {
	      return value.height() != 0;
	    });

			if (visible[0]) {
				$('a[href="#' + visible[0].attr('id') + '"]').removeClass('active');
				var $this = $(this);
				visible = $.grep(visible, function(value) {
	        return value.attr('id') != $this.attr('id');
	      });
	      if (visible[0]) { // Check if empty
					$('a[href="#' + visible[0].attr('id') + '"]').addClass('active');
	      }
			}
		});

		return selector;
	};

	/**
	 * Listen for window resize events
	 * @param {Object=} options						Optional. Set { throttle: number } to change throttling. Default: 100 ms
	 * @returns {jQuery}		$(window)
	 */
	$.winSizeSpy = function(options) {
		$.winSizeSpy = function() { return jWindow; }; // lock from multiple calls
		options = options || {
			throttle: 100
		};
		return jWindow.on('resize', throttle(onWinSize, options.throttle || 100));
	};

	/**
	 * Enables ScrollSpy on a collection of elements
	 * e.g. $('.scrollSpy').scrollSpy()
	 * @param {Object=} options	Optional.
											throttle : number -> scrollspy throttling. Default: 100 ms
											offsetTop : number -> offset from top. Default: 0
											offsetRight : number -> offset from right. Default: 0
											offsetBottom : number -> offset from bottom. Default: 0
											offsetLeft : number -> offset from left. Default: 0
	 * @returns {jQuery}
	 */
	$.fn.scrollSpy = function(options) {
		return $.scrollSpy($(this), options);
	};

})(jQuery);
;(function ($) {
  $(document).ready(function() {

    // Function to update labels of text fields
    Materialize.updateTextFields = function() {
      var input_selector = 'input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], textarea';
      $(input_selector).each(function(index, element) {
        if ($(element).val().length > 0 || element.autofocus ||$(this).attr('placeholder') !== undefined || $(element)[0].validity.badInput === true) {
          $(this).siblings('label').addClass('active');
        }
        else {
          $(this).siblings('label').removeClass('active');
        }
      });
    };

    // Text based inputs
    var input_selector = 'input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], textarea';

    // Add active if form auto complete
    $(document).on('change', input_selector, function () {
      if($(this).val().length !== 0 || $(this).attr('placeholder') !== undefined) {
        $(this).siblings('label').addClass('active');
      }
      validate_field($(this));
    });

    // Add active if input element has been pre-populated on document ready
    $(document).ready(function() {
      Materialize.updateTextFields();
    });

    // HTML DOM FORM RESET handling
    $(document).on('reset', function(e) {
      var formReset = $(e.target);
      if (formReset.is('form')) {
        formReset.find(input_selector).removeClass('valid').removeClass('invalid');
        formReset.find(input_selector).each(function () {
          if ($(this).attr('value') === '') {
            $(this).siblings('label').removeClass('active');
          }
        });

        // Reset select
        formReset.find('select.initialized').each(function () {
          var reset_text = formReset.find('option[selected]').text();
          formReset.siblings('input.select-dropdown').val(reset_text);
        });
      }
    });

    // Add active when element has focus
    $(document).on('focus', input_selector, function () {
      $(this).siblings('label, .prefix').addClass('active');
    });

    $(document).on('blur', input_selector, function () {
      var $inputElement = $(this);
      var selector = ".prefix";

      if ($inputElement.val().length === 0 && $inputElement[0].validity.badInput !== true && $inputElement.attr('placeholder') === undefined) {
        selector += ", label";
      }

      $inputElement.siblings(selector).removeClass('active');

      validate_field($inputElement);
    });

    window.validate_field = function(object) {
      var hasLength = object.attr('length') !== undefined;
      var lenAttr = parseInt(object.attr('length'));
      var len = object.val().length;

      if (object.val().length === 0 && object[0].validity.badInput === false) {
        if (object.hasClass('validate')) {
          object.removeClass('valid');
          object.removeClass('invalid');
        }
      }
      else {
        if (object.hasClass('validate')) {
          // Check for character counter attributes
          if ((object.is(':valid') && hasLength && (len <= lenAttr)) || (object.is(':valid') && !hasLength)) {
            object.removeClass('invalid');
            object.addClass('valid');
          }
          else {
            object.removeClass('valid');
            object.addClass('invalid');
          }
        }
      }
    };

    // Radio and Checkbox focus class
    var radio_checkbox = 'input[type=radio], input[type=checkbox]';
    $(document).on('keyup.radio', radio_checkbox, function(e) {
      // TAB, check if tabbing to radio or checkbox.
      if (e.which === 9) {
        $(this).addClass('tabbed');
        var $this = $(this);
        $this.one('blur', function(e) {

          $(this).removeClass('tabbed');
        });
        return;
      }
    });

    // Textarea Auto Resize
    var hiddenDiv = $('.hiddendiv').first();
    if (!hiddenDiv.length) {
      hiddenDiv = $('<div class="hiddendiv common"></div>');
      $('body').append(hiddenDiv);
    }
    var text_area_selector = '.materialize-textarea';

    function textareaAutoResize($textarea) {
      // Set font properties of hiddenDiv

      var fontFamily = $textarea.css('font-family');
      var fontSize = $textarea.css('font-size');
      var lineHeight = $textarea.css('line-height');

      if (fontSize) { hiddenDiv.css('font-size', fontSize); }
      if (fontFamily) { hiddenDiv.css('font-family', fontFamily); }
      if (lineHeight) { hiddenDiv.css('line-height', lineHeight); }

      if ($textarea.attr('wrap') === "off") {
        hiddenDiv.css('overflow-wrap', "normal")
                 .css('white-space', "pre");
      }

      hiddenDiv.text($textarea.val() + '\n');
      var content = hiddenDiv.html().replace(/\n/g, '<br>');
      hiddenDiv.html(content);


      // When textarea is hidden, width goes crazy.
      // Approximate with half of window size

      if ($textarea.is(':visible')) {
        hiddenDiv.css('width', $textarea.width());
      }
      else {
        hiddenDiv.css('width', $(window).width()/2);
      }

      $textarea.css('height', hiddenDiv.height());
    }

    $(text_area_selector).each(function () {
      var $textarea = $(this);
      if ($textarea.val().length) {
        textareaAutoResize($textarea);
      }
    });

    $('body').on('keyup keydown autoresize', text_area_selector, function () {
      textareaAutoResize($(this));
    });

    // File Input Path
    $(document).on('change', '.file-field input[type="file"]', function () {
      var file_field = $(this).closest('.file-field');
      var path_input = file_field.find('input.file-path');
      var files      = $(this)[0].files;
      var file_names = [];
      for (var i = 0; i < files.length; i++) {
        file_names.push(files[i].name);
      }
      path_input.val(file_names.join(", "));
      path_input.trigger('change');
    });

    /****************
    *  Range Input  *
    ****************/

    var range_type = 'input[type=range]';
    var range_mousedown = false;
    var left;

    $(range_type).each(function () {
      var thumb = $('<span class="thumb"><span class="value"></span></span>');
      $(this).after(thumb);
    });

    var range_wrapper = '.range-field';
    $(document).on('change', range_type, function(e) {
      var thumb = $(this).siblings('.thumb');
      thumb.find('.value').html($(this).val());
    });

    $(document).on('input mousedown touchstart', range_type, function(e) {
      var thumb = $(this).siblings('.thumb');
      var width = $(this).outerWidth();

      // If thumb indicator does not exist yet, create it
      if (thumb.length <= 0) {
        thumb = $('<span class="thumb"><span class="value"></span></span>');
        $(this).after(thumb);
      }

      // Set indicator value
      thumb.find('.value').html($(this).val());

      range_mousedown = true;
      $(this).addClass('active');

      if (!thumb.hasClass('active')) {
        thumb.velocity({ height: "30px", width: "30px", top: "-20px", marginLeft: "-15px"}, { duration: 300, easing: 'easeOutExpo' });
      }

      if (e.type !== 'input') {
        if(e.pageX === undefined || e.pageX === null){//mobile
           left = e.originalEvent.touches[0].pageX - $(this).offset().left;
        }
        else{ // desktop
           left = e.pageX - $(this).offset().left;
        }
        if (left < 0) {
          left = 0;
        }
        else if (left > width) {
          left = width;
        }
        thumb.addClass('active').css('left', left);
      }

      thumb.find('.value').html($(this).val());
    });

    $(document).on('mouseup touchend', range_wrapper, function() {
      range_mousedown = false;
      $(this).removeClass('active');
    });

    $(document).on('mousemove touchmove', range_wrapper, function(e) {
      var thumb = $(this).children('.thumb');
      var left;
      if (range_mousedown) {
        if (!thumb.hasClass('active')) {
          thumb.velocity({ height: '30px', width: '30px', top: '-20px', marginLeft: '-15px'}, { duration: 300, easing: 'easeOutExpo' });
        }
        if (e.pageX === undefined || e.pageX === null) { //mobile
          left = e.originalEvent.touches[0].pageX - $(this).offset().left;
        }
        else{ // desktop
          left = e.pageX - $(this).offset().left;
        }
        var width = $(this).outerWidth();

        if (left < 0) {
          left = 0;
        }
        else if (left > width) {
          left = width;
        }
        thumb.addClass('active').css('left', left);
        thumb.find('.value').html(thumb.siblings(range_type).val());
      }
    });

    $(document).on('mouseout touchleave', range_wrapper, function() {
      if (!range_mousedown) {

        var thumb = $(this).children('.thumb');

        if (thumb.hasClass('active')) {
          thumb.velocity({ height: '0', width: '0', top: '10px', marginLeft: '-6px'}, { duration: 100 });
        }
        thumb.removeClass('active');
      }
    });

    /**************************
     * Auto complete plugin  *
     *************************/
    $.fn.autocomplete = function (options) {
      // Defaults
      var defaults = {
        data: {}
      };

      options = $.extend(defaults, options);

      return this.each(function() {
        var $input = $(this);
        var data = options.data,
            $inputDiv = $input.closest('.input-field'); // Div to append on

        // Check if data isn't empty
        if (!$.isEmptyObject(data)) {
          // Create autocomplete element
          var $autocomplete = $('<ul class="autocomplete-content dropdown-content"></ul>');

          // Append autocomplete element
          if ($inputDiv.length) {
            $inputDiv.append($autocomplete); // Set ul in body
          } else {
            $input.after($autocomplete);
          }

          var highlight = function(string, $el) {
            var img = $el.find('img');
            var matchStart = $el.text().toLowerCase().indexOf("" + string.toLowerCase() + ""),
                matchEnd = matchStart + string.length - 1,
                beforeMatch = $el.text().slice(0, matchStart),
                matchText = $el.text().slice(matchStart, matchEnd + 1),
                afterMatch = $el.text().slice(matchEnd + 1);
            $el.html("<span>" + beforeMatch + "<span class='highlight'>" + matchText + "</span>" + afterMatch + "</span>");
            if (img.length) {
              $el.prepend(img);
            }
          };

          // Perform search
          $input.on('keyup', function (e) {
            // Capture Enter
            if (e.which === 13) {
              $autocomplete.find('li').first().click();
              return;
            }

            var val = $input.val().toLowerCase();
            $autocomplete.empty();

            // Check if the input isn't empty
            if (val !== '') {
              for(var key in data) {
                if (data.hasOwnProperty(key) &&
                    key.toLowerCase().indexOf(val) !== -1 &&
                    key.toLowerCase() !== val) {
                  var autocompleteOption = $('<li></li>');
                  if(!!data[key]) {
                    autocompleteOption.append('<img src="'+ data[key] +'" class="right circle"><span>'+ key +'</span>');
                  } else {
                    autocompleteOption.append('<span>'+ key +'</span>');
                  }
                  $autocomplete.append(autocompleteOption);

                  highlight(val, autocompleteOption);
                }
              }
            }
          });

          // Set input value
          $autocomplete.on('click', 'li', function () {
            $input.val($(this).text().trim());
            $input.trigger('change');
            $autocomplete.empty();
          });
        }
      });
    };

  }); // End of $(document).ready

  /*******************
   *  Select Plugin  *
   ******************/
  $.fn.material_select = function (callback) {
    $(this).each(function(){
      var $select = $(this);

      if ($select.hasClass('browser-default')) {
        return; // Continue to next (return false breaks out of entire loop)
      }

      var multiple = $select.attr('multiple') ? true : false,
          lastID = $select.data('select-id'); // Tear down structure if Select needs to be rebuilt

      if (lastID) {
        $select.parent().find('span.caret').remove();
        $select.parent().find('input').remove();

        $select.unwrap();
        $('ul#select-options-'+lastID).remove();
      }

      // If destroying the select, remove the selelct-id and reset it to it's uninitialized state.
      if(callback === 'destroy') {
        $select.data('select-id', null).removeClass('initialized');
        return;
      }

      var uniqueID = Materialize.guid();
      $select.data('select-id', uniqueID);
      var wrapper = $('<div class="select-wrapper"></div>');
      wrapper.addClass($select.attr('class'));
      var options = $('<ul id="select-options-' + uniqueID +'" class="dropdown-content select-dropdown ' + (multiple ? 'multiple-select-dropdown' : '') + '"></ul>'),
          selectChildren = $select.children('option, optgroup'),
          valuesSelected = [],
          optionsHover = false;

      var label = $select.find('option:selected').html() || $select.find('option:first').html() || "";

      // Function that renders and appends the option taking into
      // account type and possible image icon.
      var appendOptionWithIcon = function(select, option, type) {
        // Add disabled attr if disabled
        var disabledClass = (option.is(':disabled')) ? 'disabled ' : '';
        var optgroupClass = (type === 'optgroup-option') ? 'optgroup-option ' : '';

        // add icons
        var icon_url = option.data('icon');
        var classes = option.attr('class');
        if (!!icon_url) {
          var classString = '';
          if (!!classes) classString = ' class="' + classes + '"';

          // Check for multiple type.
          if (type === 'multiple') {
            options.append($('<li class="' + disabledClass + '"><img alt="" src="' + icon_url + '"' + classString + '><span><input type="checkbox"' + disabledClass + '/><label></label>' + option.html() + '</span></li>'));
          } else {
            options.append($('<li class="' + disabledClass + optgroupClass + '"><img alt="" src="' + icon_url + '"' + classString + '><span>' + option.html() + '</span></li>'));
          }
          return true;
        }

        // Check for multiple type.
        if (type === 'multiple') {
          options.append($('<li class="' + disabledClass + '"><span><input type="checkbox"' + disabledClass + '/><label></label>' + option.html() + '</span></li>'));
        } else {
          options.append($('<li class="' + disabledClass + optgroupClass + '"><span>' + option.html() + '</span></li>'));
        }
      };

      /* Create dropdown structure. */
      if (selectChildren.length) {
        selectChildren.each(function() {
          if ($(this).is('option')) {
            // Direct descendant option.
            if (multiple) {
              appendOptionWithIcon($select, $(this), 'multiple');

            } else {
              appendOptionWithIcon($select, $(this));
            }
          } else if ($(this).is('optgroup')) {
            // Optgroup.
            var selectOptions = $(this).children('option');
            options.append($('<li class="optgroup"><span>' + $(this).attr('label') + '</span></li>'));

            selectOptions.each(function() {
              appendOptionWithIcon($select, $(this), 'optgroup-option');
            });
          }
        });
      }

      options.find('li:not(.optgroup)').each(function (i) {
        $(this).click(function (e) {
          // Check if option element is disabled
          if (!$(this).hasClass('disabled') && !$(this).hasClass('optgroup')) {
            var selected = true;

            if (multiple) {
              $('input[type="checkbox"]', this).prop('checked', function(i, v) { return !v; });
              selected = toggleEntryFromArray(valuesSelected, $(this).index(), $select);
              $newSelect.trigger('focus');
            } else {
              options.find('li').removeClass('active');
              $(this).toggleClass('active');
              $newSelect.val($(this).text());
            }

            activateOption(options, $(this));
            $select.find('option').eq(i).prop('selected', selected);
            // Trigger onchange() event
            $select.trigger('change');
            if (typeof callback !== 'undefined') callback();
          }

          e.stopPropagation();
        });
      });

      // Wrap Elements
      $select.wrap(wrapper);
      // Add Select Display Element
      var dropdownIcon = $('<span class="caret">&#9660;</span>');
      if ($select.is(':disabled'))
        dropdownIcon.addClass('disabled');

      // escape double quotes
      var sanitizedLabelHtml = label.replace(/"/g, '&quot;');

      var $newSelect = $('<input type="text" class="select-dropdown" readonly="true" ' + (($select.is(':disabled')) ? 'disabled' : '') + ' data-activates="select-options-' + uniqueID +'" value="'+ sanitizedLabelHtml +'"/>');
      $select.before($newSelect);
      $newSelect.before(dropdownIcon);

      $newSelect.after(options);
      // Check if section element is disabled
      if (!$select.is(':disabled')) {
        $newSelect.dropdown({'hover': false, 'closeOnClick': false});
      }

      // Copy tabindex
      if ($select.attr('tabindex')) {
        $($newSelect[0]).attr('tabindex', $select.attr('tabindex'));
      }

      $select.addClass('initialized');

      $newSelect.on({
        'focus': function (){
          if ($('ul.select-dropdown').not(options[0]).is(':visible')) {
            $('input.select-dropdown').trigger('close');
          }
          if (!options.is(':visible')) {
            $(this).trigger('open', ['focus']);
            var label = $(this).val();
            var selectedOption = options.find('li').filter(function() {
              return $(this).text().toLowerCase() === label.toLowerCase();
            })[0];
            activateOption(options, selectedOption);
          }
        },
        'click': function (e){
          e.stopPropagation();
        }
      });

      $newSelect.on('blur', function() {
        if (!multiple) {
          $(this).trigger('close');
        }
        options.find('li.selected').removeClass('selected');
      });

      options.hover(function() {
        optionsHover = true;
      }, function () {
        optionsHover = false;
      });

      $(window).on({
        'click': function () {
          multiple && (optionsHover || $newSelect.trigger('close'));
        }
      });

      // Add initial multiple selections.
      if (multiple) {
        $select.find("option:selected:not(:disabled)").each(function () {
          var index = $(this).index();

          toggleEntryFromArray(valuesSelected, index, $select);
          options.find("li").eq(index).find(":checkbox").prop("checked", true);
        });
      }

      // Make option as selected and scroll to selected position
      var activateOption = function(collection, newOption) {
        if (newOption) {
          collection.find('li.selected').removeClass('selected');
          var option = $(newOption);
          option.addClass('selected');
          options.scrollTo(option);
        }
      };

      // Allow user to search by typing
      // this array is cleared after 1 second
      var filterQuery = [],
          onKeyDown = function(e){
            // TAB - switch to another input
            if(e.which == 9){
              $newSelect.trigger('close');
              return;
            }

            // ARROW DOWN WHEN SELECT IS CLOSED - open select options
            if(e.which == 40 && !options.is(':visible')){
              $newSelect.trigger('open');
              return;
            }

            // ENTER WHEN SELECT IS CLOSED - submit form
            if(e.which == 13 && !options.is(':visible')){
              return;
            }

            e.preventDefault();

            // CASE WHEN USER TYPE LETTERS
            var letter = String.fromCharCode(e.which).toLowerCase(),
                nonLetters = [9,13,27,38,40];
            if (letter && (nonLetters.indexOf(e.which) === -1)) {
              filterQuery.push(letter);

              var string = filterQuery.join(''),
                  newOption = options.find('li').filter(function() {
                    return $(this).text().toLowerCase().indexOf(string) === 0;
                  })[0];

              if (newOption) {
                activateOption(options, newOption);
              }
            }

            // ENTER - select option and close when select options are opened
            if (e.which == 13) {
              var activeOption = options.find('li.selected:not(.disabled)')[0];
              if(activeOption){
                $(activeOption).trigger('click');
                if (!multiple) {
                  $newSelect.trigger('close');
                }
              }
            }

            // ARROW DOWN - move to next not disabled option
            if (e.which == 40) {
              if (options.find('li.selected').length) {
                newOption = options.find('li.selected').next('li:not(.disabled)')[0];
              } else {
                newOption = options.find('li:not(.disabled)')[0];
              }
              activateOption(options, newOption);
            }

            // ESC - close options
            if (e.which == 27) {
              $newSelect.trigger('close');
            }

            // ARROW UP - move to previous not disabled option
            if (e.which == 38) {
              newOption = options.find('li.selected').prev('li:not(.disabled)')[0];
              if(newOption)
                activateOption(options, newOption);
            }

            // Automaticaly clean filter query so user can search again by starting letters
            setTimeout(function(){ filterQuery = []; }, 1000);
          };

      $newSelect.on('keydown', onKeyDown);
    });

    function toggleEntryFromArray(entriesArray, entryIndex, select) {
      var index = entriesArray.indexOf(entryIndex),
          notAdded = index === -1;

      if (notAdded) {
        entriesArray.push(entryIndex);
      } else {
        entriesArray.splice(index, 1);
      }

      select.siblings('ul.dropdown-content').find('li').eq(entryIndex).toggleClass('active');

      // use notAdded instead of true (to detect if the option is selected or not)
      select.find('option').eq(entryIndex).prop('selected', notAdded);
      setValueToInput(entriesArray, select);

      return notAdded;
    }

    function setValueToInput(entriesArray, select) {
      var value = '';

      for (var i = 0, count = entriesArray.length; i < count; i++) {
        var text = select.find('option').eq(entriesArray[i]).text();

        i === 0 ? value += text : value += ', ' + text;
      }

      if (value === '') {
        value = select.find('option:disabled').eq(0).text();
      }

      select.siblings('input.select-dropdown').val(value);
    }
  };

}( jQuery ));
;(function ($) {

  var methods = {

    init : function(options) {
      var defaults = {
        indicators: true,
        height: 400,
        transition: 500,
        interval: 6000
      };
      options = $.extend(defaults, options);

      return this.each(function() {

        // For each slider, we want to keep track of
        // which slide is active and its associated content
        var $this = $(this);
        var $slider = $this.find('ul.slides').first();
        var $slides = $slider.find('> li');
        var $active_index = $slider.find('.active').index();
        var $active, $indicators, $interval;
        if ($active_index != -1) { $active = $slides.eq($active_index); }

        // Transitions the caption depending on alignment
        function captionTransition(caption, duration) {
          if (caption.hasClass("center-align")) {
            caption.velocity({opacity: 0, translateY: -100}, {duration: duration, queue: false});
          }
          else if (caption.hasClass("right-align")) {
            caption.velocity({opacity: 0, translateX: 100}, {duration: duration, queue: false});
          }
          else if (caption.hasClass("left-align")) {
            caption.velocity({opacity: 0, translateX: -100}, {duration: duration, queue: false});
          }
        }

        // This function will transition the slide to any index of the next slide
        function moveToSlide(index) {
          // Wrap around indices.
          if (index >= $slides.length) index = 0;
          else if (index < 0) index = $slides.length -1;

          $active_index = $slider.find('.active').index();

          // Only do if index changes
          if ($active_index != index) {
            $active = $slides.eq($active_index);
            $caption = $active.find('.caption');

            $active.removeClass('active');
            $active.velocity({opacity: 0}, {duration: options.transition, queue: false, easing: 'easeOutQuad',
                              complete: function() {
                                $slides.not('.active').velocity({opacity: 0, translateX: 0, translateY: 0}, {duration: 0, queue: false});
                              } });
            captionTransition($caption, options.transition);


            // Update indicators
            if (options.indicators) {
              $indicators.eq($active_index).removeClass('active');
            }

            $slides.eq(index).velocity({opacity: 1}, {duration: options.transition, queue: false, easing: 'easeOutQuad'});
            $slides.eq(index).find('.caption').velocity({opacity: 1, translateX: 0, translateY: 0}, {duration: options.transition, delay: options.transition, queue: false, easing: 'easeOutQuad'});
            $slides.eq(index).addClass('active');


            // Update indicators
            if (options.indicators) {
              $indicators.eq(index).addClass('active');
            }
          }
        }

        // Set height of slider
        // If fullscreen, do nothing
        if (!$this.hasClass('fullscreen')) {
          if (options.indicators) {
            // Add height if indicators are present
            $this.height(options.height + 40);
          }
          else {
            $this.height(options.height);
          }
          $slider.height(options.height);
        }


        // Set initial positions of captions
        $slides.find('.caption').each(function () {
          captionTransition($(this), 0);
        });

        // Move img src into background-image
        $slides.find('img').each(function () {
          var placeholderBase64 = 'data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';
          if ($(this).attr('src') !== placeholderBase64) {
            $(this).css('background-image', 'url(' + $(this).attr('src') + ')' );
            $(this).attr('src', placeholderBase64);
          }
        });

        // dynamically add indicators
        if (options.indicators) {
          $indicators = $('<ul class="indicators"></ul>');
          $slides.each(function( index ) {
            var $indicator = $('<li class="indicator-item"></li>');

            // Handle clicks on indicators
            $indicator.click(function () {
              var $parent = $slider.parent();
              var curr_index = $parent.find($(this)).index();
              moveToSlide(curr_index);

              // reset interval
              clearInterval($interval);
              $interval = setInterval(
                function(){
                  $active_index = $slider.find('.active').index();
                  if ($slides.length == $active_index + 1) $active_index = 0; // loop to start
                  else $active_index += 1;

                  moveToSlide($active_index);

                }, options.transition + options.interval
              );
            });
            $indicators.append($indicator);
          });
          $this.append($indicators);
          $indicators = $this.find('ul.indicators').find('li.indicator-item');
        }

        if ($active) {
          $active.show();
        }
        else {
          $slides.first().addClass('active').velocity({opacity: 1}, {duration: options.transition, queue: false, easing: 'easeOutQuad'});

          $active_index = 0;
          $active = $slides.eq($active_index);

          // Update indicators
          if (options.indicators) {
            $indicators.eq($active_index).addClass('active');
          }
        }

        // Adjust height to current slide
        $active.find('img').each(function() {
          $active.find('.caption').velocity({opacity: 1, translateX: 0, translateY: 0}, {duration: options.transition, queue: false, easing: 'easeOutQuad'});
        });

        // auto scroll
        $interval = setInterval(
          function(){
            $active_index = $slider.find('.active').index();
            moveToSlide($active_index + 1);

          }, options.transition + options.interval
        );


        // HammerJS, Swipe navigation

        // Touch Event
        var panning = false;
        var swipeLeft = false;
        var swipeRight = false;

        $this.hammer({
            prevent_default: false
        }).bind('pan', function(e) {
          if (e.gesture.pointerType === "touch") {

            // reset interval
            clearInterval($interval);

            var direction = e.gesture.direction;
            var x = e.gesture.deltaX;
            var velocityX = e.gesture.velocityX;

            $curr_slide = $slider.find('.active');
            $curr_slide.velocity({ translateX: x
                }, {duration: 50, queue: false, easing: 'easeOutQuad'});

            // Swipe Left
            if (direction === 4 && (x > ($this.innerWidth() / 2) || velocityX < -0.65)) {
              swipeRight = true;
            }
            // Swipe Right
            else if (direction === 2 && (x < (-1 * $this.innerWidth() / 2) || velocityX > 0.65)) {
              swipeLeft = true;
            }

            // Make Slide Behind active slide visible
            var next_slide;
            if (swipeLeft) {
              next_slide = $curr_slide.next();
              if (next_slide.length === 0) {
                next_slide = $slides.first();
              }
              next_slide.velocity({ opacity: 1
                  }, {duration: 300, queue: false, easing: 'easeOutQuad'});
            }
            if (swipeRight) {
              next_slide = $curr_slide.prev();
              if (next_slide.length === 0) {
                next_slide = $slides.last();
              }
              next_slide.velocity({ opacity: 1
                  }, {duration: 300, queue: false, easing: 'easeOutQuad'});
            }


          }

        }).bind('panend', function(e) {
          if (e.gesture.pointerType === "touch") {

            $curr_slide = $slider.find('.active');
            panning = false;
            curr_index = $slider.find('.active').index();

            if (!swipeRight && !swipeLeft || $slides.length <=1) {
              // Return to original spot
              $curr_slide.velocity({ translateX: 0
                  }, {duration: 300, queue: false, easing: 'easeOutQuad'});
            }
            else if (swipeLeft) {
              moveToSlide(curr_index + 1);
              $curr_slide.velocity({translateX: -1 * $this.innerWidth() }, {duration: 300, queue: false, easing: 'easeOutQuad',
                                    complete: function() {
                                      $curr_slide.velocity({opacity: 0, translateX: 0}, {duration: 0, queue: false});
                                    } });
            }
            else if (swipeRight) {
              moveToSlide(curr_index - 1);
              $curr_slide.velocity({translateX: $this.innerWidth() }, {duration: 300, queue: false, easing: 'easeOutQuad',
                                    complete: function() {
                                      $curr_slide.velocity({opacity: 0, translateX: 0}, {duration: 0, queue: false});
                                    } });
            }
            swipeLeft = false;
            swipeRight = false;

            // Restart interval
            clearInterval($interval);
            $interval = setInterval(
              function(){
                $active_index = $slider.find('.active').index();
                if ($slides.length == $active_index + 1) $active_index = 0; // loop to start
                else $active_index += 1;

                moveToSlide($active_index);

              }, options.transition + options.interval
            );
          }
        });

        $this.on('sliderPause', function() {
          clearInterval($interval);
        });

        $this.on('sliderStart', function() {
          clearInterval($interval);
          $interval = setInterval(
            function(){
              $active_index = $slider.find('.active').index();
              if ($slides.length == $active_index + 1) $active_index = 0; // loop to start
              else $active_index += 1;

              moveToSlide($active_index);

            }, options.transition + options.interval
          );
        });

        $this.on('sliderNext', function() {
          $active_index = $slider.find('.active').index();
          moveToSlide($active_index + 1);
        });

        $this.on('sliderPrev', function() {
          $active_index = $slider.find('.active').index();
          moveToSlide($active_index - 1);
        });

      });



    },
    pause : function() {
      $(this).trigger('sliderPause');
    },
    start : function() {
      $(this).trigger('sliderStart');
    },
    next : function() {
      $(this).trigger('sliderNext');
    },
    prev : function() {
      $(this).trigger('sliderPrev');
    }
  };


    $.fn.slider = function(methodOrOptions) {
      if ( methods[methodOrOptions] ) {
        return methods[ methodOrOptions ].apply( this, Array.prototype.slice.call( arguments, 1 ));
      } else if ( typeof methodOrOptions === 'object' || ! methodOrOptions ) {
        // Default to "init"
        return methods.init.apply( this, arguments );
      } else {
        $.error( 'Method ' +  methodOrOptions + ' does not exist on jQuery.tooltip' );
      }
    }; // Plugin end
}( jQuery ));
;(function ($) {
  $(document).ready(function() {

    $(document).on('click.card', '.card', function (e) {
      if ($(this).find('> .card-reveal').length) {
        if ($(e.target).is($('.card-reveal .card-title')) || $(e.target).is($('.card-reveal .card-title i'))) {
          // Make Reveal animate down and display none
          $(this).find('.card-reveal').velocity(
            {translateY: 0}, {
              duration: 225,
              queue: false,
              easing: 'easeInOutQuad',
              complete: function() { $(this).css({ display: 'none'}); }
            }
          );
        }
        else if ($(e.target).is($('.card .activator')) ||
                 $(e.target).is($('.card .activator i')) ) {
          $(e.target).closest('.card').css('overflow', 'hidden');
          $(this).find('.card-reveal').css({ display: 'block'}).velocity("stop", false).velocity({translateY: '-100%'}, {duration: 300, queue: false, easing: 'easeInOutQuad'});
        }
      }
    });

  });
}( jQuery ));;(function ($) {
  var chipsHandleEvents = false;
  var materialChipsDefaults = {
    data: [],
    placeholder: '',
    secondaryPlaceholder: '',
  };

  $(document).ready(function() {
    // Handle removal of static chips.
    $(document).on('click', '.chip .close', function(e){
      var $chips = $(this).closest('.chips');
      if ($chips.attr('data-initialized')) {
        return;
      }
      $(this).closest('.chip').remove();
    });
  });

  $.fn.material_chip = function (options) {
    var self = this;
    this.$el = $(this);
    this.$document = $(document);
    this.SELS = {
      CHIPS: '.chips',
      CHIP: '.chip',
      INPUT: 'input',
      DELETE: '.material-icons',
      SELECTED_CHIP: '.selected',
    };

    if ('data' === options) {
      return this.$el.data('chips');
    }

    var curr_options = $.extend({}, materialChipsDefaults, options);


    // Initialize
    this.init = function() {
      var i = 0;
      var chips;
      self.$el.each(function(){
        var $chips = $(this);
        var chipId = Materialize.guid();

        if (!curr_options.data || !(curr_options.data instanceof Array)) {
          curr_options.data = [];
        }
        $chips.data('chips', curr_options.data);
        $chips.attr('data-index', i);
        $chips.attr('data-initialized', true);

        if (!$chips.hasClass(self.SELS.CHIPS)) {
          $chips.addClass('chips');
        }

        self.chips($chips, chipId);
        i++;
      });
    };

    this.handleEvents = function(){
      var SELS = self.SELS;

      self.$document.off('click.chips-focus', SELS.CHIPS).on('click.chips-focus', SELS.CHIPS, function(e){
        $(e.target).find(SELS.INPUT).focus();
      });

      self.$document.off('click.chips-select', SELS.CHIP).on('click.chips-select', SELS.CHIP, function(e){
        $(SELS.CHIP).removeClass('selected');
        $(this).toggleClass('selected');
      });

      self.$document.off('keydown.chips').on('keydown.chips', function(e){
        if ($(e.target).is('input, textarea')) {
          return;
        }

        // delete
        var $chip = self.$document.find(SELS.CHIP + SELS.SELECTED_CHIP);
        var $chips = $chip.closest(SELS.CHIPS);
        var length = $chip.siblings(SELS.CHIP).length;
        var index;

        if (!$chip.length) {
          return;
        }

        if (e.which === 8 || e.which === 46) {
          e.preventDefault();

          index = $chip.index();
          self.deleteChip(index, $chips);

          var selectIndex = null;
          if ((index + 1) < length) {
            selectIndex = index;
          } else if (index === length || (index + 1) === length) {
            selectIndex = length - 1;
          }

          if (selectIndex < 0) selectIndex = null;

          if (null !== selectIndex) {
            self.selectChip(selectIndex, $chips);
          }
          if (!length) $chips.find('input').focus();

        // left
        } else if (e.which === 37) {
          index = $chip.index() - 1;
          if (index < 0) {
            return;
          }
          $(SELS.CHIP).removeClass('selected');
          self.selectChip(index, $chips);

        // right
        } else if (e.which === 39) {
          index = $chip.index() + 1;
          $(SELS.CHIP).removeClass('selected');
          if (index > length) {
            $chips.find('input').focus();
            return;
          }
          self.selectChip(index, $chips);
        }
      });

      self.$document.off('focusin.chips', SELS.CHIPS + ' ' + SELS.INPUT).on('focusin.chips', SELS.CHIPS + ' ' + SELS.INPUT, function(e){
        var $currChips = $(e.target).closest(SELS.CHIPS);
        $currChips.addClass('focus');
        $currChips.siblings('label, .prefix').addClass('active');
        $(SELS.CHIP).removeClass('selected');
      });

      self.$document.off('focusout.chips', SELS.CHIPS + ' ' + SELS.INPUT).on('focusout.chips', SELS.CHIPS + ' ' + SELS.INPUT, function(e){
        var $currChips = $(e.target).closest(SELS.CHIPS);
        $currChips.removeClass('focus');

        // Remove active if empty
        if (!$currChips.data('chips').length) {
          $currChips.siblings('label').removeClass('active');
        }
        $currChips.siblings('.prefix').removeClass('active');
      });

      self.$document.off('keydown.chips-add', SELS.CHIPS + ' ' + SELS.INPUT).on('keydown.chips-add', SELS.CHIPS + ' ' + SELS.INPUT, function(e){
        var $target = $(e.target);
        var $chips = $target.closest(SELS.CHIPS);
        var chipsLength = $chips.children(SELS.CHIP).length;

        // enter
        if (13 === e.which) {
          e.preventDefault();
          self.addChip({tag: $target.val()}, $chips);
          $target.val('');
          return;
        }

        // delete or left
         if ((8 === e.keyCode || 37 === e.keyCode) && '' === $target.val() && chipsLength) {
          self.selectChip(chipsLength - 1, $chips);
          $target.blur();
          return;
        }
      });

      // Click on delete icon in chip.
      self.$document.off('click.chips-delete', SELS.CHIPS + ' ' + SELS.DELETE).on('click.chips-delete', SELS.CHIPS + ' ' + SELS.DELETE, function(e) {
        var $target = $(e.target);
        var $chips = $target.closest(SELS.CHIPS);
        var $chip = $target.closest(SELS.CHIP);
        e.stopPropagation();
        self.deleteChip($chip.index(), $chips);
        $chips.find('input').focus();
      });
    };

    this.chips = function($chips, chipId) {
      var html = '';
      $chips.data('chips').forEach(function(elem){
        html += self.renderChip(elem);
      });
      html += '<input id="' + chipId +'" class="input" placeholder="">';
      $chips.html(html);
      self.setPlaceholder($chips);

      // Set for attribute for label
      var label = $chips.next('label');
      if (label.length) {
        label.attr('for', chipId);

        if ($chips.data('chips').length) {
          label.addClass('active');
        }
      }
    };

    this.renderChip = function(elem) {
      if (!elem.tag) return;

      var html = '<div class="chip">' + elem.tag;
      if (elem.image) {
        html += ' <img src="' + elem.image + '"> ';
      }
      html += '<i class="material-icons close">close</i>';
      html += '</div>';
      return html;
    };

    this.setPlaceholder = function($chips) {
      if ($chips.data('chips').length && curr_options.placeholder) {
        $chips.find('input').prop('placeholder', curr_options.placeholder);

      } else if (!$chips.data('chips').length && curr_options.secondaryPlaceholder) {
        $chips.find('input').prop('placeholder', curr_options.secondaryPlaceholder);
      }
    };

    this.isValid = function($chips, elem) {
      var chips = $chips.data('chips');
      var exists = false;
      for (var i=0; i < chips.length; i++) {
        if (chips[i].tag === elem.tag) {
            exists = true;
            return;
        }
      }
      return '' !== elem.tag && !exists;
    };

    this.addChip = function(elem, $chips) {
      if (!self.isValid($chips, elem)) {
        return;
      }
      var chipHtml = self.renderChip(elem);
      var newData = [];
      var oldData = $chips.data('chips');
      for (var i = 0; i < oldData.length; i++) {
        newData.push(oldData[i]);
      }
      newData.push(elem);

      $chips.data('chips', newData);
      $(chipHtml).insertBefore($chips.find('input'));
      $chips.trigger('chip.add', elem);
      self.setPlaceholder($chips);
    };

    this.deleteChip = function(chipIndex, $chips) {
      var chip = $chips.data('chips')[chipIndex];
      $chips.find('.chip').eq(chipIndex).remove();

      var newData = [];
      var oldData = $chips.data('chips');
      for (var i = 0; i < oldData.length; i++) {
        if (i !== chipIndex) {
          newData.push(oldData[i]);
        }
      }

      $chips.data('chips', newData);
      $chips.trigger('chip.delete', chip);
      self.setPlaceholder($chips);
    };

    this.selectChip = function(chipIndex, $chips) {
      var $chip = $chips.find('.chip').eq(chipIndex);
      if ($chip && false === $chip.hasClass('selected')) {
        $chip.addClass('selected');
        $chips.trigger('chip.select', $chips.data('chips')[chipIndex]);
      }
    };

    this.getChipsElement = function(index, $chips) {
      return $chips.eq(index);
    };

    // init
    this.init();

    if (!chipsHandleEvents) {
      this.handleEvents();
      chipsHandleEvents = true;
    }
  };
}( jQuery ));;(function ($) {
  $.fn.pushpin = function (options) {
    // Defaults
    var defaults = {
      top: 0,
      bottom: Infinity,
      offset: 0
    };

    // Remove pushpin event and classes
    if (options === "remove") {
      this.each(function () {
        if (id = $(this).data('pushpin-id')) {
          $(window).off('scroll.' + id);
          $(this).removeData('pushpin-id').removeClass('pin-top pinned pin-bottom').removeAttr('style');
        }
      });
      return false;
    }

    options = $.extend(defaults, options);


    $index = 0;
    return this.each(function() {
      var $uniqueId = Materialize.guid(),
          $this = $(this),
          $original_offset = $(this).offset().top;

      function removePinClasses(object) {
        object.removeClass('pin-top');
        object.removeClass('pinned');
        object.removeClass('pin-bottom');
      }

      function updateElements(objects, scrolled) {
        objects.each(function () {
          // Add position fixed (because its between top and bottom)
          if (options.top <= scrolled && options.bottom >= scrolled && !$(this).hasClass('pinned')) {
            removePinClasses($(this));
            $(this).css('top', options.offset);
            $(this).addClass('pinned');
          }

          // Add pin-top (when scrolled position is above top)
          if (scrolled < options.top && !$(this).hasClass('pin-top')) {
            removePinClasses($(this));
            $(this).css('top', 0);
            $(this).addClass('pin-top');
          }

          // Add pin-bottom (when scrolled position is below bottom)
          if (scrolled > options.bottom && !$(this).hasClass('pin-bottom')) {
            removePinClasses($(this));
            $(this).addClass('pin-bottom');
            $(this).css('top', options.bottom - $original_offset);
          }
        });
      }

      $(this).data('pushpin-id', $uniqueId);
      updateElements($this, $(window).scrollTop());
      $(window).on('scroll.' + $uniqueId, function () {
        var $scrolled = $(window).scrollTop() + options.offset;
        updateElements($this, $scrolled);
      });

    });

  };
}( jQuery ));;(function ($) {
  $(document).ready(function() {

    // jQuery reverse
    $.fn.reverse = [].reverse;

    // Hover behaviour: make sure this doesn't work on .click-to-toggle FABs!
    $(document).on('mouseenter.fixedActionBtn', '.fixed-action-btn:not(.click-to-toggle):not(.toolbar)', function(e) {
      var $this = $(this);
      openFABMenu($this);
    });
    $(document).on('mouseleave.fixedActionBtn', '.fixed-action-btn:not(.click-to-toggle):not(.toolbar)', function(e) {
      var $this = $(this);
      closeFABMenu($this);
    });

    // Toggle-on-click behaviour.
    $(document).on('click.fabClickToggle', '.fixed-action-btn.click-to-toggle > a', function(e) {
      var $this = $(this);
      var $menu = $this.parent();
      if ($menu.hasClass('active')) {
        closeFABMenu($menu);
      } else {
        openFABMenu($menu);
      }
    });

    // Toolbar transition behaviour.
    $(document).on('click.fabToolbar', '.fixed-action-btn.toolbar > a', function(e) {
      var $this = $(this);
      var $menu = $this.parent();
      FABtoToolbar($menu);
    });

  });

  $.fn.extend({
    openFAB: function() {
      openFABMenu($(this));
    },
    closeFAB: function() {
      closeFABMenu($(this));
    },
    openToolbar: function() {
      FABtoToolbar($(this));
    },
    closeToolbar: function() {
      toolbarToFAB($(this));
    }
  });


  var openFABMenu = function (btn) {
    var $this = btn;
    if ($this.hasClass('active') === false) {

      // Get direction option
      var horizontal = $this.hasClass('horizontal');
      var offsetY, offsetX;

      if (horizontal === true) {
        offsetX = 40;
      } else {
        offsetY = 40;
      }

      $this.addClass('active');
      $this.find('ul .btn-floating').velocity(
        { scaleY: ".4", scaleX: ".4", translateY: offsetY + 'px', translateX: offsetX + 'px'},
        { duration: 0 });

      var time = 0;
      $this.find('ul .btn-floating').reverse().each( function () {
        $(this).velocity(
          { opacity: "1", scaleX: "1", scaleY: "1", translateY: "0", translateX: '0'},
          { duration: 80, delay: time });
        time += 40;
      });
    }
  };

  var closeFABMenu = function (btn) {
    var $this = btn;
    // Get direction option
    var horizontal = $this.hasClass('horizontal');
    var offsetY, offsetX;

    if (horizontal === true) {
      offsetX = 40;
    } else {
      offsetY = 40;
    }

    $this.removeClass('active');
    var time = 0;
    $this.find('ul .btn-floating').velocity("stop", true);
    $this.find('ul .btn-floating').velocity(
      { opacity: "0", scaleX: ".4", scaleY: ".4", translateY: offsetY + 'px', translateX: offsetX + 'px'},
      { duration: 80 }
    );
  };


  /**
   * Transform FAB into toolbar
   * @param  {Object}  object jQuery object
   */
  var FABtoToolbar = function(btn) {
    if (btn.attr('data-open') === "true") {
      return;
    }

    var offsetX, offsetY, scaleFactor;
    var windowWidth = window.innerWidth;
    var windowHeight = window.innerHeight;
    var btnRect = btn[0].getBoundingClientRect();
    var anchor = btn.find('> a').first();
    var menu = btn.find('> ul').first();
    var backdrop = $('<div class="fab-backdrop"></div>');
    var fabColor = anchor.css('background-color');
    anchor.append(backdrop);

    offsetX = btnRect.left - (windowWidth / 2) + (btnRect.width / 2);
    offsetY = windowHeight - btnRect.bottom;
    scaleFactor = windowWidth / backdrop.width();
    btn.attr('data-origin-bottom', btnRect.bottom);
    btn.attr('data-origin-left', btnRect.left);
    btn.attr('data-origin-width', btnRect.width);

    // Set initial state
    btn.addClass('active');
    btn.attr('data-open', true);
    btn.css({
      'text-align': 'center',
      width: '100%',
      bottom: 0,
      left: 0,
      transform: 'translateX(' + offsetX + 'px)',
      transition: 'none'
    });
    anchor.css({
      transform: 'translateY(' + -offsetY + 'px)',
      transition: 'none'
    });
    backdrop.css({
      'background-color': fabColor
    });


    setTimeout(function() {
      btn.css({
        transform: '',
        transition: 'transform .2s cubic-bezier(0.550, 0.085, 0.680, 0.530), background-color 0s linear .2s'
      });
      anchor.css({
        overflow: 'visible',
        transform: '',
        transition: 'transform .2s'
      });

      setTimeout(function() {
        btn.css({
          overflow: 'hidden',
          'background-color': fabColor
        });
        backdrop.css({
          transform: 'scale(' + scaleFactor + ')',
          transition: 'transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)'
        });
        menu.find('> li > a').css({
          opacity: 1
        });

        // Scroll to close.
        $(window).on('scroll.fabToolbarClose', function() {
          toolbarToFAB(btn);
          $(window).off('scroll.fabToolbarClose');
          $(document).off('click.fabToolbarClose');
        });

        $(document).on('click.fabToolbarClose', function(e) {
          if (!$(e.target).closest(menu).length) {
            toolbarToFAB(btn);
            $(window).off('scroll.fabToolbarClose');
            $(document).off('click.fabToolbarClose');
          }
        });
      }, 100);
    }, 0);
  };

  /**
   * Transform toolbar back into FAB
   * @param  {Object}  object jQuery object
   */
  var toolbarToFAB = function(btn) {
    if (btn.attr('data-open') !== "true") {
      return;
    }

    var offsetX, offsetY, scaleFactor;
    var windowWidth = window.innerWidth;
    var windowHeight = window.innerHeight;
    var btnWidth = btn.attr('data-origin-width');
    var btnBottom = btn.attr('data-origin-bottom');
    var btnLeft = btn.attr('data-origin-left');
    var anchor = btn.find('> .btn-floating').first();
    var menu = btn.find('> ul').first();
    var backdrop = btn.find('.fab-backdrop');
    var fabColor = anchor.css('background-color');

    offsetX = btnLeft - (windowWidth / 2) + (btnWidth / 2);
    offsetY = windowHeight - btnBottom;
    scaleFactor = windowWidth / backdrop.width();


    // Hide backdrop
    btn.removeClass('active');
    btn.attr('data-open', false);
    btn.css({
      'background-color': 'transparent',
      transition: 'none'
    });
    anchor.css({
      transition: 'none'
    });
    backdrop.css({
      transform: 'scale(0)',
      'background-color': fabColor
    });
    menu.find('> li > a').css({
      opacity: ''
    });

    setTimeout(function() {
      backdrop.remove();

      // Set initial state.
      btn.css({
        'text-align': '',
        width: '',
        bottom: '',
        left: '',
        overflow: '',
        'background-color': '',
        transform: 'translate3d(' + -offsetX + 'px,0,0)'
      });
      anchor.css({
        overflow: '',
        transform: 'translate3d(0,' + offsetY + 'px,0)'
      });

      setTimeout(function() {
        btn.css({
          transform: 'translate3d(0,0,0)',
          transition: 'transform .2s'
        });
        anchor.css({
          transform: 'translate3d(0,0,0)',
          transition: 'transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)'
        });
      }, 20);
    }, 200);
  };


}( jQuery ));
;(function ($) {
  // Image transition function
  Materialize.fadeInImage =  function(selectorOrEl) {
    var element;
    if (typeof(selectorOrEl) === 'string') {
      element = $(selectorOrEl);
    } else if (typeof(selectorOrEl) === 'object') {
      element = selectorOrEl;
    } else {
      return;
    }
    element.css({opacity: 0});
    $(element).velocity({opacity: 1}, {
        duration: 650,
        queue: false,
        easing: 'easeOutSine'
      });
    $(element).velocity({opacity: 1}, {
          duration: 1300,
          queue: false,
          easing: 'swing',
          step: function(now, fx) {
              fx.start = 100;
              var grayscale_setting = now/100;
              var brightness_setting = 150 - (100 - now)/1.75;

              if (brightness_setting < 100) {
                brightness_setting = 100;
              }
              if (now >= 0) {
                $(this).css({
                    "-webkit-filter": "grayscale("+grayscale_setting+")" + "brightness("+brightness_setting+"%)",
                    "filter": "grayscale("+grayscale_setting+")" + "brightness("+brightness_setting+"%)"
                });
              }
          }
      });
  };

  // Horizontal staggered list
  Materialize.showStaggeredList = function(selectorOrEl) {
    var element;
    if (typeof(selectorOrEl) === 'string') {
      element = $(selectorOrEl);
    } else if (typeof(selectorOrEl) === 'object') {
      element = selectorOrEl;
    } else {
      return;
    }
    var time = 0;
    element.find('li').velocity(
        { translateX: "-100px"},
        { duration: 0 });

    element.find('li').each(function() {
      $(this).velocity(
        { opacity: "1", translateX: "0"},
        { duration: 800, delay: time, easing: [60, 10] });
      time += 120;
    });
  };


  $(document).ready(function() {
    // Hardcoded .staggered-list scrollFire
    // var staggeredListOptions = [];
    // $('ul.staggered-list').each(function (i) {

    //   var label = 'scrollFire-' + i;
    //   $(this).addClass(label);
    //   staggeredListOptions.push(
    //     {selector: 'ul.staggered-list.' + label,
    //      offset: 200,
    //      callback: 'showStaggeredList("ul.staggered-list.' + label + '")'});
    // });
    // scrollFire(staggeredListOptions);

    // HammerJS, Swipe navigation

    // Touch Event
    var swipeLeft = false;
    var swipeRight = false;


    // Dismissible Collections
    $('.dismissable').each(function() {
      $(this).hammer({
        prevent_default: false
      }).bind('pan', function(e) {
        if (e.gesture.pointerType === "touch") {
          var $this = $(this);
          var direction = e.gesture.direction;
          var x = e.gesture.deltaX;
          var velocityX = e.gesture.velocityX;

          $this.velocity({ translateX: x
              }, {duration: 50, queue: false, easing: 'easeOutQuad'});

          // Swipe Left
          if (direction === 4 && (x > ($this.innerWidth() / 2) || velocityX < -0.75)) {
            swipeLeft = true;
          }

          // Swipe Right
          if (direction === 2 && (x < (-1 * $this.innerWidth() / 2) || velocityX > 0.75)) {
            swipeRight = true;
          }
        }
      }).bind('panend', function(e) {
        // Reset if collection is moved back into original position
        if (Math.abs(e.gesture.deltaX) < ($(this).innerWidth() / 2)) {
          swipeRight = false;
          swipeLeft = false;
        }

        if (e.gesture.pointerType === "touch") {
          var $this = $(this);
          if (swipeLeft || swipeRight) {
            var fullWidth;
            if (swipeLeft) { fullWidth = $this.innerWidth(); }
            else { fullWidth = -1 * $this.innerWidth(); }

            $this.velocity({ translateX: fullWidth,
              }, {duration: 100, queue: false, easing: 'easeOutQuad', complete:
              function() {
                $this.css('border', 'none');
                $this.velocity({ height: 0, padding: 0,
                  }, {duration: 200, queue: false, easing: 'easeOutQuad', complete:
                    function() { $this.remove(); }
                  });
              }
            });
          }
          else {
            $this.velocity({ translateX: 0,
              }, {duration: 100, queue: false, easing: 'easeOutQuad'});
          }
          swipeLeft = false;
          swipeRight = false;
        }
      });

    });


    // time = 0
    // // Vertical Staggered list
    // $('ul.staggered-list.vertical li').velocity(
    //     { translateY: "100px"},
    //     { duration: 0 });

    // $('ul.staggered-list.vertical li').each(function() {
    //   $(this).velocity(
    //     { opacity: "1", translateY: "0"},
    //     { duration: 800, delay: time, easing: [60, 25] });
    //   time += 120;
    // });

    // // Fade in and Scale
    // $('.fade-in.scale').velocity(
    //     { scaleX: .4, scaleY: .4, translateX: -600},
    //     { duration: 0});
    // $('.fade-in').each(function() {
    //   $(this).velocity(
    //     { opacity: "1", scaleX: 1, scaleY: 1, translateX: 0},
    //     { duration: 800, easing: [60, 10] });
    // });
  });
}( jQuery ));
;(function($) {

  // Input: Array of JSON objects {selector, offset, callback}

  Materialize.scrollFire = function(options) {

    var didScroll = false;

    window.addEventListener("scroll", function() {
      didScroll = true;
    });

    // Rate limit to 100ms
    setInterval(function() {
      if(didScroll) {
          didScroll = false;

          var windowScroll = window.pageYOffset + window.innerHeight;

          for (var i = 0 ; i < options.length; i++) {
            // Get options from each line
            var value = options[i];
            var selector = value.selector,
                offset = value.offset,
                callback = value.callback;

            var currentElement = document.querySelector(selector);
            if ( currentElement !== null) {
              var elementOffset = currentElement.getBoundingClientRect().top + window.pageYOffset;

              if (windowScroll > (elementOffset + offset)) {
                if (value.done !== true) {
                  if (typeof(callback) === 'function') {
                    callback.call(this, currentElement);
                  } else if (typeof(callback) === 'string') {
                    var callbackFunc = new Function(callback);
                    callbackFunc(currentElement);
                  }
                  value.done = true;
                }
              }
            }
          }
      }
    }, 100);
  };

})(jQuery);
;/*!
 * pickadate.js v3.5.0, 2014/04/13
 * By Amsul, http://amsul.ca
 * Hosted on http://amsul.github.io/pickadate.js
 * Licensed under MIT
 */

(function ( factory ) {

    // AMD.
    if ( typeof define == 'function' && define.amd )
        define( 'picker', ['jquery'], factory )

    // Node.js/browserify.
    else if ( typeof exports == 'object' )
        module.exports = factory( require('jquery') )

    // Browser globals.
    else this.Picker = factory( jQuery )

}(function( $ ) {

var $window = $( window )
var $document = $( document )
var $html = $( document.documentElement )


/**
 * The picker constructor that creates a blank picker.
 */
function PickerConstructor( ELEMENT, NAME, COMPONENT, OPTIONS ) {

    // If there’s no element, return the picker constructor.
    if ( !ELEMENT ) return PickerConstructor


    var
        IS_DEFAULT_THEME = false,


        // The state of the picker.
        STATE = {
            id: ELEMENT.id || 'P' + Math.abs( ~~(Math.random() * new Date()) )
        },


        // Merge the defaults and options passed.
        SETTINGS = COMPONENT ? $.extend( true, {}, COMPONENT.defaults, OPTIONS ) : OPTIONS || {},


        // Merge the default classes with the settings classes.
        CLASSES = $.extend( {}, PickerConstructor.klasses(), SETTINGS.klass ),


        // The element node wrapper into a jQuery object.
        $ELEMENT = $( ELEMENT ),


        // Pseudo picker constructor.
        PickerInstance = function() {
            return this.start()
        },


        // The picker prototype.
        P = PickerInstance.prototype = {

            constructor: PickerInstance,

            $node: $ELEMENT,


            /**
             * Initialize everything
             */
            start: function() {

                // If it’s already started, do nothing.
                if ( STATE && STATE.start ) return P


                // Update the picker states.
                STATE.methods = {}
                STATE.start = true
                STATE.open = false
                STATE.type = ELEMENT.type


                // Confirm focus state, convert into text input to remove UA stylings,
                // and set as readonly to prevent keyboard popup.
                ELEMENT.autofocus = ELEMENT == getActiveElement()
                ELEMENT.readOnly = !SETTINGS.editable
                ELEMENT.id = ELEMENT.id || STATE.id
                if ( ELEMENT.type != 'text' ) {
                    ELEMENT.type = 'text'
                }


                // Create a new picker component with the settings.
                P.component = new COMPONENT(P, SETTINGS)


                // Create the picker root with a holder and then prepare it.
                P.$root = $( PickerConstructor._.node('div', createWrappedComponent(), CLASSES.picker, 'id="' + ELEMENT.id + '_root" tabindex="0"') )
                prepareElementRoot()


                // If there’s a format for the hidden input element, create the element.
                if ( SETTINGS.formatSubmit ) {
                    prepareElementHidden()
                }


                // Prepare the input element.
                prepareElement()


                // Insert the root as specified in the settings.
                if ( SETTINGS.container ) $( SETTINGS.container ).append( P.$root )
                else $ELEMENT.after( P.$root )


                // Bind the default component and settings events.
                P.on({
                    start: P.component.onStart,
                    render: P.component.onRender,
                    stop: P.component.onStop,
                    open: P.component.onOpen,
                    close: P.component.onClose,
                    set: P.component.onSet
                }).on({
                    start: SETTINGS.onStart,
                    render: SETTINGS.onRender,
                    stop: SETTINGS.onStop,
                    open: SETTINGS.onOpen,
                    close: SETTINGS.onClose,
                    set: SETTINGS.onSet
                })


                // Once we’re all set, check the theme in use.
                IS_DEFAULT_THEME = isUsingDefaultTheme( P.$root.children()[ 0 ] )


                // If the element has autofocus, open the picker.
                if ( ELEMENT.autofocus ) {
                    P.open()
                }


                // Trigger queued the “start” and “render” events.
                return P.trigger( 'start' ).trigger( 'render' )
            }, //start


            /**
             * Render a new picker
             */
            render: function( entireComponent ) {

                // Insert a new component holder in the root or box.
                if ( entireComponent ) P.$root.html( createWrappedComponent() )
                else P.$root.find( '.' + CLASSES.box ).html( P.component.nodes( STATE.open ) )

                // Trigger the queued “render” events.
                return P.trigger( 'render' )
            }, //render


            /**
             * Destroy everything
             */
            stop: function() {

                // If it’s already stopped, do nothing.
                if ( !STATE.start ) return P

                // Then close the picker.
                P.close()

                // Remove the hidden field.
                if ( P._hidden ) {
                    P._hidden.parentNode.removeChild( P._hidden )
                }

                // Remove the root.
                P.$root.remove()

                // Remove the input class, remove the stored data, and unbind
                // the events (after a tick for IE - see `P.close`).
                $ELEMENT.removeClass( CLASSES.input ).removeData( NAME )
                setTimeout( function() {
                    $ELEMENT.off( '.' + STATE.id )
                }, 0)

                // Restore the element state
                ELEMENT.type = STATE.type
                ELEMENT.readOnly = false

                // Trigger the queued “stop” events.
                P.trigger( 'stop' )

                // Reset the picker states.
                STATE.methods = {}
                STATE.start = false

                return P
            }, //stop


            /**
             * Open up the picker
             */
            open: function( dontGiveFocus ) {

                // If it’s already open, do nothing.
                if ( STATE.open ) return P

                // Add the “active” class.
                $ELEMENT.addClass( CLASSES.active )
                aria( ELEMENT, 'expanded', true )

                // * A Firefox bug, when `html` has `overflow:hidden`, results in
                //   killing transitions :(. So add the “opened” state on the next tick.
                //   Bug: https://bugzilla.mozilla.org/show_bug.cgi?id=625289
                setTimeout( function() {

                    // Add the “opened” class to the picker root.
                    P.$root.addClass( CLASSES.opened )
                    aria( P.$root[0], 'hidden', false )

                }, 0 )

                // If we have to give focus, bind the element and doc events.
                if ( dontGiveFocus !== false ) {

                    // Set it as open.
                    STATE.open = true

                    // Prevent the page from scrolling.
                    if ( IS_DEFAULT_THEME ) {
                        $html.
                            css( 'overflow', 'hidden' ).
                            css( 'padding-right', '+=' + getScrollbarWidth() )
                    }

                    // Pass focus to the root element’s jQuery object.
                    // * Workaround for iOS8 to bring the picker’s root into view.
                    P.$root.eq(0).focus()

                    // Bind the document events.
                    $document.on( 'click.' + STATE.id + ' focusin.' + STATE.id, function( event ) {

                        var target = event.target

                        // If the target of the event is not the element, close the picker picker.
                        // * Don’t worry about clicks or focusins on the root because those don’t bubble up.
                        //   Also, for Firefox, a click on an `option` element bubbles up directly
                        //   to the doc. So make sure the target wasn't the doc.
                        // * In Firefox stopPropagation() doesn’t prevent right-click events from bubbling,
                        //   which causes the picker to unexpectedly close when right-clicking it. So make
                        //   sure the event wasn’t a right-click.
                        if ( target != ELEMENT && target != document && event.which != 3 ) {

                            // If the target was the holder that covers the screen,
                            // keep the element focused to maintain tabindex.
                            P.close( target === P.$root.children()[0] )
                        }

                    }).on( 'keydown.' + STATE.id, function( event ) {

                        var
                            // Get the keycode.
                            keycode = event.keyCode,

                            // Translate that to a selection change.
                            keycodeToMove = P.component.key[ keycode ],

                            // Grab the target.
                            target = event.target


                        // On escape, close the picker and give focus.
                        if ( keycode == 27 ) {
                            P.close( true )
                        }


                        // Check if there is a key movement or “enter” keypress on the element.
                        else if ( target == P.$root[0] && ( keycodeToMove || keycode == 13 ) ) {

                            // Prevent the default action to stop page movement.
                            event.preventDefault()

                            // Trigger the key movement action.
                            if ( keycodeToMove ) {
                                PickerConstructor._.trigger( P.component.key.go, P, [ PickerConstructor._.trigger( keycodeToMove ) ] )
                            }

                            // On “enter”, if the highlighted item isn’t disabled, set the value and close.
                            else if ( !P.$root.find( '.' + CLASSES.highlighted ).hasClass( CLASSES.disabled ) ) {
                                P.set( 'select', P.component.item.highlight ).close()
                            }
                        }


                        // If the target is within the root and “enter” is pressed,
                        // prevent the default action and trigger a click on the target instead.
                        else if ( $.contains( P.$root[0], target ) && keycode == 13 ) {
                            event.preventDefault()
                            target.click()
                        }
                    })
                }

                // Trigger the queued “open” events.
                return P.trigger( 'open' )
            }, //open


            /**
             * Close the picker
             */
            close: function( giveFocus ) {

                // If we need to give focus, do it before changing states.
                if ( giveFocus ) {
                    // ....ah yes! It would’ve been incomplete without a crazy workaround for IE :|
                    // The focus is triggered *after* the close has completed - causing it
                    // to open again. So unbind and rebind the event at the next tick.
                    P.$root.off( 'focus.toOpen' ).eq(0).focus()
                    setTimeout( function() {
                        P.$root.on( 'focus.toOpen', handleFocusToOpenEvent )
                    }, 0 )
                }

                // Remove the “active” class.
                $ELEMENT.removeClass( CLASSES.active )
                aria( ELEMENT, 'expanded', false )

                // * A Firefox bug, when `html` has `overflow:hidden`, results in
                //   killing transitions :(. So remove the “opened” state on the next tick.
                //   Bug: https://bugzilla.mozilla.org/show_bug.cgi?id=625289
                setTimeout( function() {

                    // Remove the “opened” and “focused” class from the picker root.
                    P.$root.removeClass( CLASSES.opened + ' ' + CLASSES.focused )
                    aria( P.$root[0], 'hidden', true )

                }, 0 )

                // If it’s already closed, do nothing more.
                if ( !STATE.open ) return P

                // Set it as closed.
                STATE.open = false

                // Allow the page to scroll.
                if ( IS_DEFAULT_THEME ) {
                    $html.
                        css( 'overflow', '' ).
                        css( 'padding-right', '-=' + getScrollbarWidth() )
                }

                // Unbind the document events.
                $document.off( '.' + STATE.id )

                // Trigger the queued “close” events.
                return P.trigger( 'close' )
            }, //close


            /**
             * Clear the values
             */
            clear: function( options ) {
                return P.set( 'clear', null, options )
            }, //clear


            /**
             * Set something
             */
            set: function( thing, value, options ) {

                var thingItem, thingValue,
                    thingIsObject = $.isPlainObject( thing ),
                    thingObject = thingIsObject ? thing : {}

                // Make sure we have usable options.
                options = thingIsObject && $.isPlainObject( value ) ? value : options || {}

                if ( thing ) {

                    // If the thing isn’t an object, make it one.
                    if ( !thingIsObject ) {
                        thingObject[ thing ] = value
                    }

                    // Go through the things of items to set.
                    for ( thingItem in thingObject ) {

                        // Grab the value of the thing.
                        thingValue = thingObject[ thingItem ]

                        // First, if the item exists and there’s a value, set it.
                        if ( thingItem in P.component.item ) {
                            if ( thingValue === undefined ) thingValue = null
                            P.component.set( thingItem, thingValue, options )
                        }

                        // Then, check to update the element value and broadcast a change.
                        if ( thingItem == 'select' || thingItem == 'clear' ) {
                            $ELEMENT.
                                val( thingItem == 'clear' ? '' : P.get( thingItem, SETTINGS.format ) ).
                                trigger( 'change' )
                        }
                    }

                    // Render a new picker.
                    P.render()
                }

                // When the method isn’t muted, trigger queued “set” events and pass the `thingObject`.
                return options.muted ? P : P.trigger( 'set', thingObject )
            }, //set


            /**
             * Get something
             */
            get: function( thing, format ) {

                // Make sure there’s something to get.
                thing = thing || 'value'

                // If a picker state exists, return that.
                if ( STATE[ thing ] != null ) {
                    return STATE[ thing ]
                }

                // Return the submission value, if that.
                if ( thing == 'valueSubmit' ) {
                    if ( P._hidden ) {
                        return P._hidden.value
                    }
                    thing = 'value'
                }

                // Return the value, if that.
                if ( thing == 'value' ) {
                    return ELEMENT.value
                }

                // Check if a component item exists, return that.
                if ( thing in P.component.item ) {
                    if ( typeof format == 'string' ) {
                        var thingValue = P.component.get( thing )
                        return thingValue ?
                            PickerConstructor._.trigger(
                                P.component.formats.toString,
                                P.component,
                                [ format, thingValue ]
                            ) : ''
                    }
                    return P.component.get( thing )
                }
            }, //get



            /**
             * Bind events on the things.
             */
            on: function( thing, method, internal ) {

                var thingName, thingMethod,
                    thingIsObject = $.isPlainObject( thing ),
                    thingObject = thingIsObject ? thing : {}

                if ( thing ) {

                    // If the thing isn’t an object, make it one.
                    if ( !thingIsObject ) {
                        thingObject[ thing ] = method
                    }

                    // Go through the things to bind to.
                    for ( thingName in thingObject ) {

                        // Grab the method of the thing.
                        thingMethod = thingObject[ thingName ]

                        // If it was an internal binding, prefix it.
                        if ( internal ) {
                            thingName = '_' + thingName
                        }

                        // Make sure the thing methods collection exists.
                        STATE.methods[ thingName ] = STATE.methods[ thingName ] || []

                        // Add the method to the relative method collection.
                        STATE.methods[ thingName ].push( thingMethod )
                    }
                }

                return P
            }, //on



            /**
             * Unbind events on the things.
             */
            off: function() {
                var i, thingName,
                    names = arguments;
                for ( i = 0, namesCount = names.length; i < namesCount; i += 1 ) {
                    thingName = names[i]
                    if ( thingName in STATE.methods ) {
                        delete STATE.methods[thingName]
                    }
                }
                return P
            },


            /**
             * Fire off method events.
             */
            trigger: function( name, data ) {
                var _trigger = function( name ) {
                    var methodList = STATE.methods[ name ]
                    if ( methodList ) {
                        methodList.map( function( method ) {
                            PickerConstructor._.trigger( method, P, [ data ] )
                        })
                    }
                }
                _trigger( '_' + name )
                _trigger( name )
                return P
            } //trigger
        } //PickerInstance.prototype


    /**
     * Wrap the picker holder components together.
     */
    function createWrappedComponent() {

        // Create a picker wrapper holder
        return PickerConstructor._.node( 'div',

            // Create a picker wrapper node
            PickerConstructor._.node( 'div',

                // Create a picker frame
                PickerConstructor._.node( 'div',

                    // Create a picker box node
                    PickerConstructor._.node( 'div',

                        // Create the components nodes.
                        P.component.nodes( STATE.open ),

                        // The picker box class
                        CLASSES.box
                    ),

                    // Picker wrap class
                    CLASSES.wrap
                ),

                // Picker frame class
                CLASSES.frame
            ),

            // Picker holder class
            CLASSES.holder
        ) //endreturn
    } //createWrappedComponent



    /**
     * Prepare the input element with all bindings.
     */
    function prepareElement() {

        $ELEMENT.

            // Store the picker data by component name.
            data(NAME, P).

            // Add the “input” class name.
            addClass(CLASSES.input).

            // Remove the tabindex.
            attr('tabindex', -1).

            // If there’s a `data-value`, update the value of the element.
            val( $ELEMENT.data('value') ?
                P.get('select', SETTINGS.format) :
                ELEMENT.value
            )


        // Only bind keydown events if the element isn’t editable.
        if ( !SETTINGS.editable ) {

            $ELEMENT.

                // On focus/click, focus onto the root to open it up.
                on( 'focus.' + STATE.id + ' click.' + STATE.id, function( event ) {
                    event.preventDefault()
                    P.$root.eq(0).focus()
                }).

                // Handle keyboard event based on the picker being opened or not.
                on( 'keydown.' + STATE.id, handleKeydownEvent )
        }


        // Update the aria attributes.
        aria(ELEMENT, {
            haspopup: true,
            expanded: false,
            readonly: false,
            owns: ELEMENT.id + '_root'
        })
    }


    /**
     * Prepare the root picker element with all bindings.
     */
    function prepareElementRoot() {

        P.$root.

            on({

                // For iOS8.
                keydown: handleKeydownEvent,

                // When something within the root is focused, stop from bubbling
                // to the doc and remove the “focused” state from the root.
                focusin: function( event ) {
                    P.$root.removeClass( CLASSES.focused )
                    event.stopPropagation()
                },

                // When something within the root holder is clicked, stop it
                // from bubbling to the doc.
                'mousedown click': function( event ) {

                    var target = event.target

                    // Make sure the target isn’t the root holder so it can bubble up.
                    if ( target != P.$root.children()[ 0 ] ) {

                        event.stopPropagation()

                        // * For mousedown events, cancel the default action in order to
                        //   prevent cases where focus is shifted onto external elements
                        //   when using things like jQuery mobile or MagnificPopup (ref: #249 & #120).
                        //   Also, for Firefox, don’t prevent action on the `option` element.
                        if ( event.type == 'mousedown' && !$( target ).is( 'input, select, textarea, button, option' )) {

                            event.preventDefault()

                            // Re-focus onto the root so that users can click away
                            // from elements focused within the picker.
                            P.$root.eq(0).focus()
                        }
                    }
                }
            }).

            // Add/remove the “target” class on focus and blur.
            on({
                focus: function() {
                    $ELEMENT.addClass( CLASSES.target )
                },
                blur: function() {
                    $ELEMENT.removeClass( CLASSES.target )
                }
            }).

            // Open the picker and adjust the root “focused” state
            on( 'focus.toOpen', handleFocusToOpenEvent ).

            // If there’s a click on an actionable element, carry out the actions.
            on( 'click', '[data-pick], [data-nav], [data-clear], [data-close]', function() {

                var $target = $( this ),
                    targetData = $target.data(),
                    targetDisabled = $target.hasClass( CLASSES.navDisabled ) || $target.hasClass( CLASSES.disabled ),

                    // * For IE, non-focusable elements can be active elements as well
                    //   (http://stackoverflow.com/a/2684561).
                    activeElement = getActiveElement()
                    activeElement = activeElement && ( activeElement.type || activeElement.href )

                // If it’s disabled or nothing inside is actively focused, re-focus the element.
                if ( targetDisabled || activeElement && !$.contains( P.$root[0], activeElement ) ) {
                    P.$root.eq(0).focus()
                }

                // If something is superficially changed, update the `highlight` based on the `nav`.
                if ( !targetDisabled && targetData.nav ) {
                    P.set( 'highlight', P.component.item.highlight, { nav: targetData.nav } )
                }

                // If something is picked, set `select` then close with focus.
                else if ( !targetDisabled && 'pick' in targetData ) {
                    P.set( 'select', targetData.pick )
                }

                // If a “clear” button is pressed, empty the values and close with focus.
                else if ( targetData.clear ) {
                    P.clear().close( true )
                }

                else if ( targetData.close ) {
                    P.close( true )
                }

            }) //P.$root

        aria( P.$root[0], 'hidden', true )
    }


     /**
      * Prepare the hidden input element along with all bindings.
      */
    function prepareElementHidden() {

        var name

        if ( SETTINGS.hiddenName === true ) {
            name = ELEMENT.name
            ELEMENT.name = ''
        }
        else {
            name = [
                typeof SETTINGS.hiddenPrefix == 'string' ? SETTINGS.hiddenPrefix : '',
                typeof SETTINGS.hiddenSuffix == 'string' ? SETTINGS.hiddenSuffix : '_submit'
            ]
            name = name[0] + ELEMENT.name + name[1]
        }

        P._hidden = $(
            '<input ' +
            'type=hidden ' +

            // Create the name using the original input’s with a prefix and suffix.
            'name="' + name + '"' +

            // If the element has a value, set the hidden value as well.
            (
                $ELEMENT.data('value') || ELEMENT.value ?
                    ' value="' + P.get('select', SETTINGS.formatSubmit) + '"' :
                    ''
            ) +
            '>'
        )[0]

        $ELEMENT.

            // If the value changes, update the hidden input with the correct format.
            on('change.' + STATE.id, function() {
                P._hidden.value = ELEMENT.value ?
                    P.get('select', SETTINGS.formatSubmit) :
                    ''
            })


        // Insert the hidden input as specified in the settings.
        if ( SETTINGS.container ) $( SETTINGS.container ).append( P._hidden )
        else $ELEMENT.after( P._hidden )
    }


    // For iOS8.
    function handleKeydownEvent( event ) {

        var keycode = event.keyCode,

            // Check if one of the delete keys was pressed.
            isKeycodeDelete = /^(8|46)$/.test(keycode)

        // For some reason IE clears the input value on “escape”.
        if ( keycode == 27 ) {
            P.close()
            return false
        }

        // Check if `space` or `delete` was pressed or the picker is closed with a key movement.
        if ( keycode == 32 || isKeycodeDelete || !STATE.open && P.component.key[keycode] ) {

            // Prevent it from moving the page and bubbling to doc.
            event.preventDefault()
            event.stopPropagation()

            // If `delete` was pressed, clear the values and close the picker.
            // Otherwise open the picker.
            if ( isKeycodeDelete ) { P.clear().close() }
            else { P.open() }
        }
    }


    // Separated for IE
    function handleFocusToOpenEvent( event ) {

        // Stop the event from propagating to the doc.
        event.stopPropagation()

        // If it’s a focus event, add the “focused” class to the root.
        if ( event.type == 'focus' ) {
            P.$root.addClass( CLASSES.focused )
        }

        // And then finally open the picker.
        P.open()
    }


    // Return a new picker instance.
    return new PickerInstance()
} //PickerConstructor



/**
 * The default classes and prefix to use for the HTML classes.
 */
PickerConstructor.klasses = function( prefix ) {
    prefix = prefix || 'picker'
    return {

        picker: prefix,
        opened: prefix + '--opened',
        focused: prefix + '--focused',

        input: prefix + '__input',
        active: prefix + '__input--active',
        target: prefix + '__input--target',

        holder: prefix + '__holder',

        frame: prefix + '__frame',
        wrap: prefix + '__wrap',

        box: prefix + '__box'
    }
} //PickerConstructor.klasses



/**
 * Check if the default theme is being used.
 */
function isUsingDefaultTheme( element ) {

    var theme,
        prop = 'position'

    // For IE.
    if ( element.currentStyle ) {
        theme = element.currentStyle[prop]
    }

    // For normal browsers.
    else if ( window.getComputedStyle ) {
        theme = getComputedStyle( element )[prop]
    }

    return theme == 'fixed'
}



/**
 * Get the width of the browser’s scrollbar.
 * Taken from: https://github.com/VodkaBears/Remodal/blob/master/src/jquery.remodal.js
 */
function getScrollbarWidth() {

    if ( $html.height() <= $window.height() ) {
        return 0
    }

    var $outer = $( '<div style="visibility:hidden;width:100px" />' ).
        appendTo( 'body' )

    // Get the width without scrollbars.
    var widthWithoutScroll = $outer[0].offsetWidth

    // Force adding scrollbars.
    $outer.css( 'overflow', 'scroll' )

    // Add the inner div.
    var $inner = $( '<div style="width:100%" />' ).appendTo( $outer )

    // Get the width with scrollbars.
    var widthWithScroll = $inner[0].offsetWidth

    // Remove the divs.
    $outer.remove()

    // Return the difference between the widths.
    return widthWithoutScroll - widthWithScroll
}



/**
 * PickerConstructor helper methods.
 */
PickerConstructor._ = {

    /**
     * Create a group of nodes. Expects:
     * `
        {
            min:    {Integer},
            max:    {Integer},
            i:      {Integer},
            node:   {String},
            item:   {Function}
        }
     * `
     */
    group: function( groupObject ) {

        var
            // Scope for the looped object
            loopObjectScope,

            // Create the nodes list
            nodesList = '',

            // The counter starts from the `min`
            counter = PickerConstructor._.trigger( groupObject.min, groupObject )


        // Loop from the `min` to `max`, incrementing by `i`
        for ( ; counter <= PickerConstructor._.trigger( groupObject.max, groupObject, [ counter ] ); counter += groupObject.i ) {

            // Trigger the `item` function within scope of the object
            loopObjectScope = PickerConstructor._.trigger( groupObject.item, groupObject, [ counter ] )

            // Splice the subgroup and create nodes out of the sub nodes
            nodesList += PickerConstructor._.node(
                groupObject.node,
                loopObjectScope[ 0 ],   // the node
                loopObjectScope[ 1 ],   // the classes
                loopObjectScope[ 2 ]    // the attributes
            )
        }

        // Return the list of nodes
        return nodesList
    }, //group


    /**
     * Create a dom node string
     */
    node: function( wrapper, item, klass, attribute ) {

        // If the item is false-y, just return an empty string
        if ( !item ) return ''

        // If the item is an array, do a join
        item = $.isArray( item ) ? item.join( '' ) : item

        // Check for the class
        klass = klass ? ' class="' + klass + '"' : ''

        // Check for any attributes
        attribute = attribute ? ' ' + attribute : ''

        // Return the wrapped item
        return '<' + wrapper + klass + attribute + '>' + item + '</' + wrapper + '>'
    }, //node


    /**
     * Lead numbers below 10 with a zero.
     */
    lead: function( number ) {
        return ( number < 10 ? '0': '' ) + number
    },


    /**
     * Trigger a function otherwise return the value.
     */
    trigger: function( callback, scope, args ) {
        return typeof callback == 'function' ? callback.apply( scope, args || [] ) : callback
    },


    /**
     * If the second character is a digit, length is 2 otherwise 1.
     */
    digits: function( string ) {
        return ( /\d/ ).test( string[ 1 ] ) ? 2 : 1
    },


    /**
     * Tell if something is a date object.
     */
    isDate: function( value ) {
        return {}.toString.call( value ).indexOf( 'Date' ) > -1 && this.isInteger( value.getDate() )
    },


    /**
     * Tell if something is an integer.
     */
    isInteger: function( value ) {
        return {}.toString.call( value ).indexOf( 'Number' ) > -1 && value % 1 === 0
    },


    /**
     * Create ARIA attribute strings.
     */
    ariaAttr: ariaAttr
} //PickerConstructor._



/**
 * Extend the picker with a component and defaults.
 */
PickerConstructor.extend = function( name, Component ) {

    // Extend jQuery.
    $.fn[ name ] = function( options, action ) {

        // Grab the component data.
        var componentData = this.data( name )

        // If the picker is requested, return the data object.
        if ( options == 'picker' ) {
            return componentData
        }

        // If the component data exists and `options` is a string, carry out the action.
        if ( componentData && typeof options == 'string' ) {
            return PickerConstructor._.trigger( componentData[ options ], componentData, [ action ] )
        }

        // Otherwise go through each matched element and if the component
        // doesn’t exist, create a new picker using `this` element
        // and merging the defaults and options with a deep copy.
        return this.each( function() {
            var $this = $( this )
            if ( !$this.data( name ) ) {
                new PickerConstructor( this, name, Component, options )
            }
        })
    }

    // Set the defaults.
    $.fn[ name ].defaults = Component.defaults
} //PickerConstructor.extend



function aria(element, attribute, value) {
    if ( $.isPlainObject(attribute) ) {
        for ( var key in attribute ) {
            ariaSet(element, key, attribute[key])
        }
    }
    else {
        ariaSet(element, attribute, value)
    }
}
function ariaSet(element, attribute, value) {
    element.setAttribute(
        (attribute == 'role' ? '' : 'aria-') + attribute,
        value
    )
}
function ariaAttr(attribute, data) {
    if ( !$.isPlainObject(attribute) ) {
        attribute = { attribute: data }
    }
    data = ''
    for ( var key in attribute ) {
        var attr = (key == 'role' ? '' : 'aria-') + key,
            attrVal = attribute[key]
        data += attrVal == null ? '' : attr + '="' + attribute[key] + '"'
    }
    return data
}

// IE8 bug throws an error for activeElements within iframes.
function getActiveElement() {
    try {
        return document.activeElement
    } catch ( err ) { }
}



// Expose the picker constructor.
return PickerConstructor


}));


;/*!
 * Date picker for pickadate.js v3.5.0
 * http://amsul.github.io/pickadate.js/date.htm
 */

(function ( factory ) {

    // AMD.
    if ( typeof define == 'function' && define.amd )
        define( ['picker', 'jquery'], factory )

    // Node.js/browserify.
    else if ( typeof exports == 'object' )
        module.exports = factory( require('./picker.js'), require('jquery') )

    // Browser globals.
    else factory( Picker, jQuery )

}(function( Picker, $ ) {


/**
 * Globals and constants
 */
var DAYS_IN_WEEK = 7,
    WEEKS_IN_CALENDAR = 6,
    _ = Picker._



/**
 * The date picker constructor
 */
function DatePicker( picker, settings ) {

    var calendar = this,
        element = picker.$node[ 0 ],
        elementValue = element.value,
        elementDataValue = picker.$node.data( 'value' ),
        valueString = elementDataValue || elementValue,
        formatString = elementDataValue ? settings.formatSubmit : settings.format,
        isRTL = function() {

            return element.currentStyle ?

                // For IE.
                element.currentStyle.direction == 'rtl' :

                // For normal browsers.
                getComputedStyle( picker.$root[0] ).direction == 'rtl'
        }

    calendar.settings = settings
    calendar.$node = picker.$node

    // The queue of methods that will be used to build item objects.
    calendar.queue = {
        min: 'measure create',
        max: 'measure create',
        now: 'now create',
        select: 'parse create validate',
        highlight: 'parse navigate create validate',
        view: 'parse create validate viewset',
        disable: 'deactivate',
        enable: 'activate'
    }

    // The component's item object.
    calendar.item = {}

    calendar.item.clear = null
    calendar.item.disable = ( settings.disable || [] ).slice( 0 )
    calendar.item.enable = -(function( collectionDisabled ) {
        return collectionDisabled[ 0 ] === true ? collectionDisabled.shift() : -1
    })( calendar.item.disable )

    calendar.
        set( 'min', settings.min ).
        set( 'max', settings.max ).
        set( 'now' )

    // When there’s a value, set the `select`, which in turn
    // also sets the `highlight` and `view`.
    if ( valueString ) {
        calendar.set( 'select', valueString, { format: formatString })
    }

    // If there’s no value, default to highlighting “today”.
    else {
        calendar.
            set( 'select', null ).
            set( 'highlight', calendar.item.now )
    }


    // The keycode to movement mapping.
    calendar.key = {
        40: 7, // Down
        38: -7, // Up
        39: function() { return isRTL() ? -1 : 1 }, // Right
        37: function() { return isRTL() ? 1 : -1 }, // Left
        go: function( timeChange ) {
            var highlightedObject = calendar.item.highlight,
                targetDate = new Date( highlightedObject.year, highlightedObject.month, highlightedObject.date + timeChange )
            calendar.set(
                'highlight',
                targetDate,
                { interval: timeChange }
            )
            this.render()
        }
    }


    // Bind some picker events.
    picker.
        on( 'render', function() {
            picker.$root.find( '.' + settings.klass.selectMonth ).on( 'change', function() {
                var value = this.value
                if ( value ) {
                    picker.set( 'highlight', [ picker.get( 'view' ).year, value, picker.get( 'highlight' ).date ] )
                    picker.$root.find( '.' + settings.klass.selectMonth ).trigger( 'focus' )
                }
            })
            picker.$root.find( '.' + settings.klass.selectYear ).on( 'change', function() {
                var value = this.value
                if ( value ) {
                    picker.set( 'highlight', [ value, picker.get( 'view' ).month, picker.get( 'highlight' ).date ] )
                    picker.$root.find( '.' + settings.klass.selectYear ).trigger( 'focus' )
                }
            })
        }, 1 ).
        on( 'open', function() {
            var includeToday = ''
            if ( calendar.disabled( calendar.get('now') ) ) {
                includeToday = ':not(.' + settings.klass.buttonToday + ')'
            }
            picker.$root.find( 'button' + includeToday + ', select' ).attr( 'disabled', false )
        }, 1 ).
        on( 'close', function() {
            picker.$root.find( 'button, select' ).attr( 'disabled', true )
        }, 1 )

} //DatePicker


/**
 * Set a datepicker item object.
 */
DatePicker.prototype.set = function( type, value, options ) {

    var calendar = this,
        calendarItem = calendar.item

    // If the value is `null` just set it immediately.
    if ( value === null ) {
        if ( type == 'clear' ) type = 'select'
        calendarItem[ type ] = value
        return calendar
    }

    // Otherwise go through the queue of methods, and invoke the functions.
    // Update this as the time unit, and set the final value as this item.
    // * In the case of `enable`, keep the queue but set `disable` instead.
    //   And in the case of `flip`, keep the queue but set `enable` instead.
    calendarItem[ ( type == 'enable' ? 'disable' : type == 'flip' ? 'enable' : type ) ] = calendar.queue[ type ].split( ' ' ).map( function( method ) {
        value = calendar[ method ]( type, value, options )
        return value
    }).pop()

    // Check if we need to cascade through more updates.
    if ( type == 'select' ) {
        calendar.set( 'highlight', calendarItem.select, options )
    }
    else if ( type == 'highlight' ) {
        calendar.set( 'view', calendarItem.highlight, options )
    }
    else if ( type.match( /^(flip|min|max|disable|enable)$/ ) ) {
        if ( calendarItem.select && calendar.disabled( calendarItem.select ) ) {
            calendar.set( 'select', calendarItem.select, options )
        }
        if ( calendarItem.highlight && calendar.disabled( calendarItem.highlight ) ) {
            calendar.set( 'highlight', calendarItem.highlight, options )
        }
    }

    return calendar
} //DatePicker.prototype.set


/**
 * Get a datepicker item object.
 */
DatePicker.prototype.get = function( type ) {
    return this.item[ type ]
} //DatePicker.prototype.get


/**
 * Create a picker date object.
 */
DatePicker.prototype.create = function( type, value, options ) {

    var isInfiniteValue,
        calendar = this

    // If there’s no value, use the type as the value.
    value = value === undefined ? type : value


    // If it’s infinity, update the value.
    if ( value == -Infinity || value == Infinity ) {
        isInfiniteValue = value
    }

    // If it’s an object, use the native date object.
    else if ( $.isPlainObject( value ) && _.isInteger( value.pick ) ) {
        value = value.obj
    }

    // If it’s an array, convert it into a date and make sure
    // that it’s a valid date – otherwise default to today.
    else if ( $.isArray( value ) ) {
        value = new Date( value[ 0 ], value[ 1 ], value[ 2 ] )
        value = _.isDate( value ) ? value : calendar.create().obj
    }

    // If it’s a number or date object, make a normalized date.
    else if ( _.isInteger( value ) || _.isDate( value ) ) {
        value = calendar.normalize( new Date( value ), options )
    }

    // If it’s a literal true or any other case, set it to now.
    else /*if ( value === true )*/ {
        value = calendar.now( type, value, options )
    }

    // Return the compiled object.
    return {
        year: isInfiniteValue || value.getFullYear(),
        month: isInfiniteValue || value.getMonth(),
        date: isInfiniteValue || value.getDate(),
        day: isInfiniteValue || value.getDay(),
        obj: isInfiniteValue || value,
        pick: isInfiniteValue || value.getTime()
    }
} //DatePicker.prototype.create


/**
 * Create a range limit object using an array, date object,
 * literal “true”, or integer relative to another time.
 */
DatePicker.prototype.createRange = function( from, to ) {

    var calendar = this,
        createDate = function( date ) {
            if ( date === true || $.isArray( date ) || _.isDate( date ) ) {
                return calendar.create( date )
            }
            return date
        }

    // Create objects if possible.
    if ( !_.isInteger( from ) ) {
        from = createDate( from )
    }
    if ( !_.isInteger( to ) ) {
        to = createDate( to )
    }

    // Create relative dates.
    if ( _.isInteger( from ) && $.isPlainObject( to ) ) {
        from = [ to.year, to.month, to.date + from ];
    }
    else if ( _.isInteger( to ) && $.isPlainObject( from ) ) {
        to = [ from.year, from.month, from.date + to ];
    }

    return {
        from: createDate( from ),
        to: createDate( to )
    }
} //DatePicker.prototype.createRange


/**
 * Check if a date unit falls within a date range object.
 */
DatePicker.prototype.withinRange = function( range, dateUnit ) {
    range = this.createRange(range.from, range.to)
    return dateUnit.pick >= range.from.pick && dateUnit.pick <= range.to.pick
}


/**
 * Check if two date range objects overlap.
 */
DatePicker.prototype.overlapRanges = function( one, two ) {

    var calendar = this

    // Convert the ranges into comparable dates.
    one = calendar.createRange( one.from, one.to )
    two = calendar.createRange( two.from, two.to )

    return calendar.withinRange( one, two.from ) || calendar.withinRange( one, two.to ) ||
        calendar.withinRange( two, one.from ) || calendar.withinRange( two, one.to )
}


/**
 * Get the date today.
 */
DatePicker.prototype.now = function( type, value, options ) {
    value = new Date()
    if ( options && options.rel ) {
        value.setDate( value.getDate() + options.rel )
    }
    return this.normalize( value, options )
}


/**
 * Navigate to next/prev month.
 */
DatePicker.prototype.navigate = function( type, value, options ) {

    var targetDateObject,
        targetYear,
        targetMonth,
        targetDate,
        isTargetArray = $.isArray( value ),
        isTargetObject = $.isPlainObject( value ),
        viewsetObject = this.item.view/*,
        safety = 100*/


    if ( isTargetArray || isTargetObject ) {

        if ( isTargetObject ) {
            targetYear = value.year
            targetMonth = value.month
            targetDate = value.date
        }
        else {
            targetYear = +value[0]
            targetMonth = +value[1]
            targetDate = +value[2]
        }

        // If we’re navigating months but the view is in a different
        // month, navigate to the view’s year and month.
        if ( options && options.nav && viewsetObject && viewsetObject.month !== targetMonth ) {
            targetYear = viewsetObject.year
            targetMonth = viewsetObject.month
        }

        // Figure out the expected target year and month.
        targetDateObject = new Date( targetYear, targetMonth + ( options && options.nav ? options.nav : 0 ), 1 )
        targetYear = targetDateObject.getFullYear()
        targetMonth = targetDateObject.getMonth()

        // If the month we’re going to doesn’t have enough days,
        // keep decreasing the date until we reach the month’s last date.
        while ( /*safety &&*/ new Date( targetYear, targetMonth, targetDate ).getMonth() !== targetMonth ) {
            targetDate -= 1
            /*safety -= 1
            if ( !safety ) {
                throw 'Fell into an infinite loop while navigating to ' + new Date( targetYear, targetMonth, targetDate ) + '.'
            }*/
        }

        value = [ targetYear, targetMonth, targetDate ]
    }

    return value
} //DatePicker.prototype.navigate


/**
 * Normalize a date by setting the hours to midnight.
 */
DatePicker.prototype.normalize = function( value/*, options*/ ) {
    value.setHours( 0, 0, 0, 0 )
    return value
}


/**
 * Measure the range of dates.
 */
DatePicker.prototype.measure = function( type, value/*, options*/ ) {

    var calendar = this

    // If it’s anything false-y, remove the limits.
    if ( !value ) {
        value = type == 'min' ? -Infinity : Infinity
    }

    // If it’s a string, parse it.
    else if ( typeof value == 'string' ) {
        value = calendar.parse( type, value )
    }

    // If it's an integer, get a date relative to today.
    else if ( _.isInteger( value ) ) {
        value = calendar.now( type, value, { rel: value } )
    }

    return value
} ///DatePicker.prototype.measure


/**
 * Create a viewset object based on navigation.
 */
DatePicker.prototype.viewset = function( type, dateObject/*, options*/ ) {
    return this.create([ dateObject.year, dateObject.month, 1 ])
}


/**
 * Validate a date as enabled and shift if needed.
 */
DatePicker.prototype.validate = function( type, dateObject, options ) {

    var calendar = this,

        // Keep a reference to the original date.
        originalDateObject = dateObject,

        // Make sure we have an interval.
        interval = options && options.interval ? options.interval : 1,

        // Check if the calendar enabled dates are inverted.
        isFlippedBase = calendar.item.enable === -1,

        // Check if we have any enabled dates after/before now.
        hasEnabledBeforeTarget, hasEnabledAfterTarget,

        // The min & max limits.
        minLimitObject = calendar.item.min,
        maxLimitObject = calendar.item.max,

        // Check if we’ve reached the limit during shifting.
        reachedMin, reachedMax,

        // Check if the calendar is inverted and at least one weekday is enabled.
        hasEnabledWeekdays = isFlippedBase && calendar.item.disable.filter( function( value ) {

            // If there’s a date, check where it is relative to the target.
            if ( $.isArray( value ) ) {
                var dateTime = calendar.create( value ).pick
                if ( dateTime < dateObject.pick ) hasEnabledBeforeTarget = true
                else if ( dateTime > dateObject.pick ) hasEnabledAfterTarget = true
            }

            // Return only integers for enabled weekdays.
            return _.isInteger( value )
        }).length/*,

        safety = 100*/



    // Cases to validate for:
    // [1] Not inverted and date disabled.
    // [2] Inverted and some dates enabled.
    // [3] Not inverted and out of range.
    //
    // Cases to **not** validate for:
    // • Navigating months.
    // • Not inverted and date enabled.
    // • Inverted and all dates disabled.
    // • ..and anything else.
    if ( !options || !options.nav ) if (
        /* 1 */ ( !isFlippedBase && calendar.disabled( dateObject ) ) ||
        /* 2 */ ( isFlippedBase && calendar.disabled( dateObject ) && ( hasEnabledWeekdays || hasEnabledBeforeTarget || hasEnabledAfterTarget ) ) ||
        /* 3 */ ( !isFlippedBase && (dateObject.pick <= minLimitObject.pick || dateObject.pick >= maxLimitObject.pick) )
    ) {


        // When inverted, flip the direction if there aren’t any enabled weekdays
        // and there are no enabled dates in the direction of the interval.
        if ( isFlippedBase && !hasEnabledWeekdays && ( ( !hasEnabledAfterTarget && interval > 0 ) || ( !hasEnabledBeforeTarget && interval < 0 ) ) ) {
            interval *= -1
        }


        // Keep looping until we reach an enabled date.
        while ( /*safety &&*/ calendar.disabled( dateObject ) ) {

            /*safety -= 1
            if ( !safety ) {
                throw 'Fell into an infinite loop while validating ' + dateObject.obj + '.'
            }*/


            // If we’ve looped into the next/prev month with a large interval, return to the original date and flatten the interval.
            if ( Math.abs( interval ) > 1 && ( dateObject.month < originalDateObject.month || dateObject.month > originalDateObject.month ) ) {
                dateObject = originalDateObject
                interval = interval > 0 ? 1 : -1
            }


            // If we’ve reached the min/max limit, reverse the direction, flatten the interval and set it to the limit.
            if ( dateObject.pick <= minLimitObject.pick ) {
                reachedMin = true
                interval = 1
                dateObject = calendar.create([
                    minLimitObject.year,
                    minLimitObject.month,
                    minLimitObject.date + (dateObject.pick === minLimitObject.pick ? 0 : -1)
                ])
            }
            else if ( dateObject.pick >= maxLimitObject.pick ) {
                reachedMax = true
                interval = -1
                dateObject = calendar.create([
                    maxLimitObject.year,
                    maxLimitObject.month,
                    maxLimitObject.date + (dateObject.pick === maxLimitObject.pick ? 0 : 1)
                ])
            }


            // If we’ve reached both limits, just break out of the loop.
            if ( reachedMin && reachedMax ) {
                break
            }


            // Finally, create the shifted date using the interval and keep looping.
            dateObject = calendar.create([ dateObject.year, dateObject.month, dateObject.date + interval ])
        }

    } //endif


    // Return the date object settled on.
    return dateObject
} //DatePicker.prototype.validate


/**
 * Check if a date is disabled.
 */
DatePicker.prototype.disabled = function( dateToVerify ) {

    var
        calendar = this,

        // Filter through the disabled dates to check if this is one.
        isDisabledMatch = calendar.item.disable.filter( function( dateToDisable ) {

            // If the date is a number, match the weekday with 0index and `firstDay` check.
            if ( _.isInteger( dateToDisable ) ) {
                return dateToVerify.day === ( calendar.settings.firstDay ? dateToDisable : dateToDisable - 1 ) % 7
            }

            // If it’s an array or a native JS date, create and match the exact date.
            if ( $.isArray( dateToDisable ) || _.isDate( dateToDisable ) ) {
                return dateToVerify.pick === calendar.create( dateToDisable ).pick
            }

            // If it’s an object, match a date within the “from” and “to” range.
            if ( $.isPlainObject( dateToDisable ) ) {
                return calendar.withinRange( dateToDisable, dateToVerify )
            }
        })

    // If this date matches a disabled date, confirm it’s not inverted.
    isDisabledMatch = isDisabledMatch.length && !isDisabledMatch.filter(function( dateToDisable ) {
        return $.isArray( dateToDisable ) && dateToDisable[3] == 'inverted' ||
            $.isPlainObject( dateToDisable ) && dateToDisable.inverted
    }).length

    // Check the calendar “enabled” flag and respectively flip the
    // disabled state. Then also check if it’s beyond the min/max limits.
    return calendar.item.enable === -1 ? !isDisabledMatch : isDisabledMatch ||
        dateToVerify.pick < calendar.item.min.pick ||
        dateToVerify.pick > calendar.item.max.pick

} //DatePicker.prototype.disabled


/**
 * Parse a string into a usable type.
 */
DatePicker.prototype.parse = function( type, value, options ) {

    var calendar = this,
        parsingObject = {}

    // If it’s already parsed, we’re good.
    if ( !value || typeof value != 'string' ) {
        return value
    }

    // We need a `.format` to parse the value with.
    if ( !( options && options.format ) ) {
        options = options || {}
        options.format = calendar.settings.format
    }

    // Convert the format into an array and then map through it.
    calendar.formats.toArray( options.format ).map( function( label ) {

        var
            // Grab the formatting label.
            formattingLabel = calendar.formats[ label ],

            // The format length is from the formatting label function or the
            // label length without the escaping exclamation (!) mark.
            formatLength = formattingLabel ? _.trigger( formattingLabel, calendar, [ value, parsingObject ] ) : label.replace( /^!/, '' ).length

        // If there's a format label, split the value up to the format length.
        // Then add it to the parsing object with appropriate label.
        if ( formattingLabel ) {
            parsingObject[ label ] = value.substr( 0, formatLength )
        }

        // Update the value as the substring from format length to end.
        value = value.substr( formatLength )
    })

    // Compensate for month 0index.
    return [
        parsingObject.yyyy || parsingObject.yy,
        +( parsingObject.mm || parsingObject.m ) - 1,
        parsingObject.dd || parsingObject.d
    ]
} //DatePicker.prototype.parse


/**
 * Various formats to display the object in.
 */
DatePicker.prototype.formats = (function() {

    // Return the length of the first word in a collection.
    function getWordLengthFromCollection( string, collection, dateObject ) {

        // Grab the first word from the string.
        var word = string.match( /\w+/ )[ 0 ]

        // If there's no month index, add it to the date object
        if ( !dateObject.mm && !dateObject.m ) {
            dateObject.m = collection.indexOf( word ) + 1
        }

        // Return the length of the word.
        return word.length
    }

    // Get the length of the first word in a string.
    function getFirstWordLength( string ) {
        return string.match( /\w+/ )[ 0 ].length
    }

    return {

        d: function( string, dateObject ) {

            // If there's string, then get the digits length.
            // Otherwise return the selected date.
            return string ? _.digits( string ) : dateObject.date
        },
        dd: function( string, dateObject ) {

            // If there's a string, then the length is always 2.
            // Otherwise return the selected date with a leading zero.
            return string ? 2 : _.lead( dateObject.date )
        },
        ddd: function( string, dateObject ) {

            // If there's a string, then get the length of the first word.
            // Otherwise return the short selected weekday.
            return string ? getFirstWordLength( string ) : this.settings.weekdaysShort[ dateObject.day ]
        },
        dddd: function( string, dateObject ) {

            // If there's a string, then get the length of the first word.
            // Otherwise return the full selected weekday.
            return string ? getFirstWordLength( string ) : this.settings.weekdaysFull[ dateObject.day ]
        },
        m: function( string, dateObject ) {

            // If there's a string, then get the length of the digits
            // Otherwise return the selected month with 0index compensation.
            return string ? _.digits( string ) : dateObject.month + 1
        },
        mm: function( string, dateObject ) {

            // If there's a string, then the length is always 2.
            // Otherwise return the selected month with 0index and leading zero.
            return string ? 2 : _.lead( dateObject.month + 1 )
        },
        mmm: function( string, dateObject ) {

            var collection = this.settings.monthsShort

            // If there's a string, get length of the relevant month from the short
            // months collection. Otherwise return the selected month from that collection.
            return string ? getWordLengthFromCollection( string, collection, dateObject ) : collection[ dateObject.month ]
        },
        mmmm: function( string, dateObject ) {

            var collection = this.settings.monthsFull

            // If there's a string, get length of the relevant month from the full
            // months collection. Otherwise return the selected month from that collection.
            return string ? getWordLengthFromCollection( string, collection, dateObject ) : collection[ dateObject.month ]
        },
        yy: function( string, dateObject ) {

            // If there's a string, then the length is always 2.
            // Otherwise return the selected year by slicing out the first 2 digits.
            return string ? 2 : ( '' + dateObject.year ).slice( 2 )
        },
        yyyy: function( string, dateObject ) {

            // If there's a string, then the length is always 4.
            // Otherwise return the selected year.
            return string ? 4 : dateObject.year
        },

        // Create an array by splitting the formatting string passed.
        toArray: function( formatString ) { return formatString.split( /(d{1,4}|m{1,4}|y{4}|yy|!.)/g ) },

        // Format an object into a string using the formatting options.
        toString: function ( formatString, itemObject ) {
            var calendar = this
            return calendar.formats.toArray( formatString ).map( function( label ) {
                return _.trigger( calendar.formats[ label ], calendar, [ 0, itemObject ] ) || label.replace( /^!/, '' )
            }).join( '' )
        }
    }
})() //DatePicker.prototype.formats




/**
 * Check if two date units are the exact.
 */
DatePicker.prototype.isDateExact = function( one, two ) {

    var calendar = this

    // When we’re working with weekdays, do a direct comparison.
    if (
        ( _.isInteger( one ) && _.isInteger( two ) ) ||
        ( typeof one == 'boolean' && typeof two == 'boolean' )
     ) {
        return one === two
    }

    // When we’re working with date representations, compare the “pick” value.
    if (
        ( _.isDate( one ) || $.isArray( one ) ) &&
        ( _.isDate( two ) || $.isArray( two ) )
    ) {
        return calendar.create( one ).pick === calendar.create( two ).pick
    }

    // When we’re working with range objects, compare the “from” and “to”.
    if ( $.isPlainObject( one ) && $.isPlainObject( two ) ) {
        return calendar.isDateExact( one.from, two.from ) && calendar.isDateExact( one.to, two.to )
    }

    return false
}


/**
 * Check if two date units overlap.
 */
DatePicker.prototype.isDateOverlap = function( one, two ) {

    var calendar = this,
        firstDay = calendar.settings.firstDay ? 1 : 0

    // When we’re working with a weekday index, compare the days.
    if ( _.isInteger( one ) && ( _.isDate( two ) || $.isArray( two ) ) ) {
        one = one % 7 + firstDay
        return one === calendar.create( two ).day + 1
    }
    if ( _.isInteger( two ) && ( _.isDate( one ) || $.isArray( one ) ) ) {
        two = two % 7 + firstDay
        return two === calendar.create( one ).day + 1
    }

    // When we’re working with range objects, check if the ranges overlap.
    if ( $.isPlainObject( one ) && $.isPlainObject( two ) ) {
        return calendar.overlapRanges( one, two )
    }

    return false
}


/**
 * Flip the “enabled” state.
 */
DatePicker.prototype.flipEnable = function(val) {
    var itemObject = this.item
    itemObject.enable = val || (itemObject.enable == -1 ? 1 : -1)
}


/**
 * Mark a collection of dates as “disabled”.
 */
DatePicker.prototype.deactivate = function( type, datesToDisable ) {

    var calendar = this,
        disabledItems = calendar.item.disable.slice(0)


    // If we’re flipping, that’s all we need to do.
    if ( datesToDisable == 'flip' ) {
        calendar.flipEnable()
    }

    else if ( datesToDisable === false ) {
        calendar.flipEnable(1)
        disabledItems = []
    }

    else if ( datesToDisable === true ) {
        calendar.flipEnable(-1)
        disabledItems = []
    }

    // Otherwise go through the dates to disable.
    else {

        datesToDisable.map(function( unitToDisable ) {

            var matchFound

            // When we have disabled items, check for matches.
            // If something is matched, immediately break out.
            for ( var index = 0; index < disabledItems.length; index += 1 ) {
                if ( calendar.isDateExact( unitToDisable, disabledItems[index] ) ) {
                    matchFound = true
                    break
                }
            }

            // If nothing was found, add the validated unit to the collection.
            if ( !matchFound ) {
                if (
                    _.isInteger( unitToDisable ) ||
                    _.isDate( unitToDisable ) ||
                    $.isArray( unitToDisable ) ||
                    ( $.isPlainObject( unitToDisable ) && unitToDisable.from && unitToDisable.to )
                ) {
                    disabledItems.push( unitToDisable )
                }
            }
        })
    }

    // Return the updated collection.
    return disabledItems
} //DatePicker.prototype.deactivate


/**
 * Mark a collection of dates as “enabled”.
 */
DatePicker.prototype.activate = function( type, datesToEnable ) {

    var calendar = this,
        disabledItems = calendar.item.disable,
        disabledItemsCount = disabledItems.length

    // If we’re flipping, that’s all we need to do.
    if ( datesToEnable == 'flip' ) {
        calendar.flipEnable()
    }

    else if ( datesToEnable === true ) {
        calendar.flipEnable(1)
        disabledItems = []
    }

    else if ( datesToEnable === false ) {
        calendar.flipEnable(-1)
        disabledItems = []
    }

    // Otherwise go through the disabled dates.
    else {

        datesToEnable.map(function( unitToEnable ) {

            var matchFound,
                disabledUnit,
                index,
                isExactRange

            // Go through the disabled items and try to find a match.
            for ( index = 0; index < disabledItemsCount; index += 1 ) {

                disabledUnit = disabledItems[index]

                // When an exact match is found, remove it from the collection.
                if ( calendar.isDateExact( disabledUnit, unitToEnable ) ) {
                    matchFound = disabledItems[index] = null
                    isExactRange = true
                    break
                }

                // When an overlapped match is found, add the “inverted” state to it.
                else if ( calendar.isDateOverlap( disabledUnit, unitToEnable ) ) {
                    if ( $.isPlainObject( unitToEnable ) ) {
                        unitToEnable.inverted = true
                        matchFound = unitToEnable
                    }
                    else if ( $.isArray( unitToEnable ) ) {
                        matchFound = unitToEnable
                        if ( !matchFound[3] ) matchFound.push( 'inverted' )
                    }
                    else if ( _.isDate( unitToEnable ) ) {
                        matchFound = [ unitToEnable.getFullYear(), unitToEnable.getMonth(), unitToEnable.getDate(), 'inverted' ]
                    }
                    break
                }
            }

            // If a match was found, remove a previous duplicate entry.
            if ( matchFound ) for ( index = 0; index < disabledItemsCount; index += 1 ) {
                if ( calendar.isDateExact( disabledItems[index], unitToEnable ) ) {
                    disabledItems[index] = null
                    break
                }
            }

            // In the event that we’re dealing with an exact range of dates,
            // make sure there are no “inverted” dates because of it.
            if ( isExactRange ) for ( index = 0; index < disabledItemsCount; index += 1 ) {
                if ( calendar.isDateOverlap( disabledItems[index], unitToEnable ) ) {
                    disabledItems[index] = null
                    break
                }
            }

            // If something is still matched, add it into the collection.
            if ( matchFound ) {
                disabledItems.push( matchFound )
            }
        })
    }

    // Return the updated collection.
    return disabledItems.filter(function( val ) { return val != null })
} //DatePicker.prototype.activate


/**
 * Create a string for the nodes in the picker.
 */
DatePicker.prototype.nodes = function( isOpen ) {

    var
        calendar = this,
        settings = calendar.settings,
        calendarItem = calendar.item,
        nowObject = calendarItem.now,
        selectedObject = calendarItem.select,
        highlightedObject = calendarItem.highlight,
        viewsetObject = calendarItem.view,
        disabledCollection = calendarItem.disable,
        minLimitObject = calendarItem.min,
        maxLimitObject = calendarItem.max,


        // Create the calendar table head using a copy of weekday labels collection.
        // * We do a copy so we don't mutate the original array.
        tableHead = (function( collection, fullCollection ) {

            // If the first day should be Monday, move Sunday to the end.
            if ( settings.firstDay ) {
                collection.push( collection.shift() )
                fullCollection.push( fullCollection.shift() )
            }

            // Create and return the table head group.
            return _.node(
                'thead',
                _.node(
                    'tr',
                    _.group({
                        min: 0,
                        max: DAYS_IN_WEEK - 1,
                        i: 1,
                        node: 'th',
                        item: function( counter ) {
                            return [
                                collection[ counter ],
                                settings.klass.weekdays,
                                'scope=col title="' + fullCollection[ counter ] + '"'
                            ]
                        }
                    })
                )
            ) //endreturn

        // Materialize modified
        })( ( settings.showWeekdaysFull ? settings.weekdaysFull : settings.weekdaysLetter ).slice( 0 ), settings.weekdaysFull.slice( 0 ) ), //tableHead


        // Create the nav for next/prev month.
        createMonthNav = function( next ) {

            // Otherwise, return the created month tag.
            return _.node(
                'div',
                ' ',
                settings.klass[ 'nav' + ( next ? 'Next' : 'Prev' ) ] + (

                    // If the focused month is outside the range, disabled the button.
                    ( next && viewsetObject.year >= maxLimitObject.year && viewsetObject.month >= maxLimitObject.month ) ||
                    ( !next && viewsetObject.year <= minLimitObject.year && viewsetObject.month <= minLimitObject.month ) ?
                    ' ' + settings.klass.navDisabled : ''
                ),
                'data-nav=' + ( next || -1 ) + ' ' +
                _.ariaAttr({
                    role: 'button',
                    controls: calendar.$node[0].id + '_table'
                }) + ' ' +
                'title="' + (next ? settings.labelMonthNext : settings.labelMonthPrev ) + '"'
            ) //endreturn
        }, //createMonthNav


        // Create the month label.
        //Materialize modified
        createMonthLabel = function(override) {

            var monthsCollection = settings.showMonthsShort ? settings.monthsShort : settings.monthsFull

             // Materialize modified
            if (override == "short_months") {
              monthsCollection = settings.monthsShort;
            }

            // If there are months to select, add a dropdown menu.
            if ( settings.selectMonths  && override == undefined) {

                return _.node( 'select',
                    _.group({
                        min: 0,
                        max: 11,
                        i: 1,
                        node: 'option',
                        item: function( loopedMonth ) {

                            return [

                                // The looped month and no classes.
                                monthsCollection[ loopedMonth ], 0,

                                // Set the value and selected index.
                                'value=' + loopedMonth +
                                ( viewsetObject.month == loopedMonth ? ' selected' : '' ) +
                                (
                                    (
                                        ( viewsetObject.year == minLimitObject.year && loopedMonth < minLimitObject.month ) ||
                                        ( viewsetObject.year == maxLimitObject.year && loopedMonth > maxLimitObject.month )
                                    ) ?
                                    ' disabled' : ''
                                )
                            ]
                        }
                    }),
                    settings.klass.selectMonth + ' browser-default',
                    ( isOpen ? '' : 'disabled' ) + ' ' +
                    _.ariaAttr({ controls: calendar.$node[0].id + '_table' }) + ' ' +
                    'title="' + settings.labelMonthSelect + '"'
                )
            }

            // Materialize modified
            if (override == "short_months")
                if (selectedObject != null)
                return _.node( 'div', monthsCollection[ selectedObject.month ] );
                else return _.node( 'div', monthsCollection[ viewsetObject.month ] );

            // If there's a need for a month selector
            return _.node( 'div', monthsCollection[ viewsetObject.month ], settings.klass.month )
        }, //createMonthLabel


        // Create the year label.
        // Materialize modified
        createYearLabel = function(override) {

            var focusedYear = viewsetObject.year,

            // If years selector is set to a literal "true", set it to 5. Otherwise
            // divide in half to get half before and half after focused year.
            numberYears = settings.selectYears === true ? 5 : ~~( settings.selectYears / 2 )

            // If there are years to select, add a dropdown menu.
            if ( numberYears ) {

                var
                    minYear = minLimitObject.year,
                    maxYear = maxLimitObject.year,
                    lowestYear = focusedYear - numberYears,
                    highestYear = focusedYear + numberYears

                // If the min year is greater than the lowest year, increase the highest year
                // by the difference and set the lowest year to the min year.
                if ( minYear > lowestYear ) {
                    highestYear += minYear - lowestYear
                    lowestYear = minYear
                }

                // If the max year is less than the highest year, decrease the lowest year
                // by the lower of the two: available and needed years. Then set the
                // highest year to the max year.
                if ( maxYear < highestYear ) {

                    var availableYears = lowestYear - minYear,
                        neededYears = highestYear - maxYear

                    lowestYear -= availableYears > neededYears ? neededYears : availableYears
                    highestYear = maxYear
                }

                if ( settings.selectYears  && override == undefined ) {
                    return _.node( 'select',
                        _.group({
                            min: lowestYear,
                            max: highestYear,
                            i: 1,
                            node: 'option',
                            item: function( loopedYear ) {
                                return [

                                    // The looped year and no classes.
                                    loopedYear, 0,

                                    // Set the value and selected index.
                                    'value=' + loopedYear + ( focusedYear == loopedYear ? ' selected' : '' )
                                ]
                            }
                        }),
                        settings.klass.selectYear + ' browser-default',
                        ( isOpen ? '' : 'disabled' ) + ' ' + _.ariaAttr({ controls: calendar.$node[0].id + '_table' }) + ' ' +
                        'title="' + settings.labelYearSelect + '"'
                    )
                }
            }

            // Materialize modified
            if (override == "raw")
                return _.node( 'div', focusedYear )

            // Otherwise just return the year focused
            return _.node( 'div', focusedYear, settings.klass.year )
        } //createYearLabel


        // Materialize modified
        createDayLabel = function() {
                if (selectedObject != null)
                    return _.node( 'div', selectedObject.date)
                else return _.node( 'div', nowObject.date)
            }
        createWeekdayLabel = function() {
            var display_day;

            if (selectedObject != null)
                display_day = selectedObject.day;
            else
                display_day = nowObject.day;
            var weekday = settings.weekdaysFull[ display_day ]
            return weekday
        }


    // Create and return the entire calendar.
return _.node(
        // Date presentation View
        'div',
            _.node(
                'div',
                createWeekdayLabel(),
                "picker__weekday-display"
            )+
            _.node(
                // Div for short Month
                'div',
                createMonthLabel("short_months"),
                settings.klass.month_display
            )+
            _.node(
                // Div for Day
                'div',
                createDayLabel() ,
                settings.klass.day_display
            )+
            _.node(
                // Div for Year
                'div',
                createYearLabel("raw") ,
                settings.klass.year_display
            ),
        settings.klass.date_display
    )+
    // Calendar container
    _.node('div',
        _.node('div',
        ( settings.selectYears ?  createMonthLabel() + createYearLabel() : createMonthLabel() + createYearLabel() ) +
        createMonthNav() + createMonthNav( 1 ),
        settings.klass.header
    ) + _.node(
        'table',
        tableHead +
        _.node(
            'tbody',
            _.group({
                min: 0,
                max: WEEKS_IN_CALENDAR - 1,
                i: 1,
                node: 'tr',
                item: function( rowCounter ) {

                    // If Monday is the first day and the month starts on Sunday, shift the date back a week.
                    var shiftDateBy = settings.firstDay && calendar.create([ viewsetObject.year, viewsetObject.month, 1 ]).day === 0 ? -7 : 0

                    return [
                        _.group({
                            min: DAYS_IN_WEEK * rowCounter - viewsetObject.day + shiftDateBy + 1, // Add 1 for weekday 0index
                            max: function() {
                                return this.min + DAYS_IN_WEEK - 1
                            },
                            i: 1,
                            node: 'td',
                            item: function( targetDate ) {

                                // Convert the time date from a relative date to a target date.
                                targetDate = calendar.create([ viewsetObject.year, viewsetObject.month, targetDate + ( settings.firstDay ? 1 : 0 ) ])

                                var isSelected = selectedObject && selectedObject.pick == targetDate.pick,
                                    isHighlighted = highlightedObject && highlightedObject.pick == targetDate.pick,
                                    isDisabled = disabledCollection && calendar.disabled( targetDate ) || targetDate.pick < minLimitObject.pick || targetDate.pick > maxLimitObject.pick,
                                    formattedDate = _.trigger( calendar.formats.toString, calendar, [ settings.format, targetDate ] )

                                return [
                                    _.node(
                                        'div',
                                        targetDate.date,
                                        (function( klasses ) {

                                            // Add the `infocus` or `outfocus` classes based on month in view.
                                            klasses.push( viewsetObject.month == targetDate.month ? settings.klass.infocus : settings.klass.outfocus )

                                            // Add the `today` class if needed.
                                            if ( nowObject.pick == targetDate.pick ) {
                                                klasses.push( settings.klass.now )
                                            }

                                            // Add the `selected` class if something's selected and the time matches.
                                            if ( isSelected ) {
                                                klasses.push( settings.klass.selected )
                                            }

                                            // Add the `highlighted` class if something's highlighted and the time matches.
                                            if ( isHighlighted ) {
                                                klasses.push( settings.klass.highlighted )
                                            }

                                            // Add the `disabled` class if something's disabled and the object matches.
                                            if ( isDisabled ) {
                                                klasses.push( settings.klass.disabled )
                                            }

                                            return klasses.join( ' ' )
                                        })([ settings.klass.day ]),
                                        'data-pick=' + targetDate.pick + ' ' + _.ariaAttr({
                                            role: 'gridcell',
                                            label: formattedDate,
                                            selected: isSelected && calendar.$node.val() === formattedDate ? true : null,
                                            activedescendant: isHighlighted ? true : null,
                                            disabled: isDisabled ? true : null
                                        })
                                    ),
                                    '',
                                    _.ariaAttr({ role: 'presentation' })
                                ] //endreturn
                            }
                        })
                    ] //endreturn
                }
            })
        ),
        settings.klass.table,
        'id="' + calendar.$node[0].id + '_table' + '" ' + _.ariaAttr({
            role: 'grid',
            controls: calendar.$node[0].id,
            readonly: true
        })
    )
    , settings.klass.calendar_container) // end calendar

     +

    // * For Firefox forms to submit, make sure to set the buttons’ `type` attributes as “button”.
    _.node(
        'div',
        _.node( 'button', settings.today, "btn-flat picker__today",
            'type=button data-pick=' + nowObject.pick +
            ( isOpen && !calendar.disabled(nowObject) ? '' : ' disabled' ) + ' ' +
            _.ariaAttr({ controls: calendar.$node[0].id }) ) +
        _.node( 'button', settings.clear, "btn-flat picker__clear",
            'type=button data-clear=1' +
            ( isOpen ? '' : ' disabled' ) + ' ' +
            _.ariaAttr({ controls: calendar.$node[0].id }) ) +
        _.node('button', settings.close, "btn-flat picker__close",
            'type=button data-close=true ' +
            ( isOpen ? '' : ' disabled' ) + ' ' +
            _.ariaAttr({ controls: calendar.$node[0].id }) ),
        settings.klass.footer
    ) //endreturn
} //DatePicker.prototype.nodes




/**
 * The date picker defaults.
 */
DatePicker.defaults = (function( prefix ) {

    return {

        // The title label to use for the month nav buttons
        labelMonthNext: 'Next month',
        labelMonthPrev: 'Previous month',

        // The title label to use for the dropdown selectors
        labelMonthSelect: 'Select a month',
        labelYearSelect: 'Select a year',

        // Months and weekdays
        monthsFull: [ 'January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December' ],
        monthsShort: [ 'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec' ],
        weekdaysFull: [ 'Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday' ],
        weekdaysShort: [ 'Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat' ],

        // Materialize modified
        weekdaysLetter: [ 'S', 'M', 'T', 'W', 'T', 'F', 'S' ],

        // Today and clear
        today: 'Today',
        clear: 'Clear',
        close: 'Close',

        // The format to show on the `input` element
        format: 'd mmmm, yyyy',

        // Classes
        klass: {

            table: prefix + 'table',

            header: prefix + 'header',


            // Materialize Added klasses
            date_display: prefix + 'date-display',
            day_display: prefix + 'day-display',
            month_display: prefix + 'month-display',
            year_display: prefix + 'year-display',
            calendar_container: prefix + 'calendar-container',
            // end



            navPrev: prefix + 'nav--prev',
            navNext: prefix + 'nav--next',
            navDisabled: prefix + 'nav--disabled',

            month: prefix + 'month',
            year: prefix + 'year',

            selectMonth: prefix + 'select--month',
            selectYear: prefix + 'select--year',

            weekdays: prefix + 'weekday',

            day: prefix + 'day',
            disabled: prefix + 'day--disabled',
            selected: prefix + 'day--selected',
            highlighted: prefix + 'day--highlighted',
            now: prefix + 'day--today',
            infocus: prefix + 'day--infocus',
            outfocus: prefix + 'day--outfocus',

            footer: prefix + 'footer',

            buttonClear: prefix + 'button--clear',
            buttonToday: prefix + 'button--today',
            buttonClose: prefix + 'button--close'
        }
    }
})( Picker.klasses().picker + '__' )





/**
 * Extend the picker to add the date picker.
 */
Picker.extend( 'pickadate', DatePicker )


}));


;(function ($) {

  $.fn.characterCounter = function(){
    return this.each(function(){
      var $input = $(this);
      var $counterElement = $input.parent().find('span[class="character-counter"]');

      // character counter has already been added appended to the parent container
      if ($counterElement.length) {
        return;
      }

      var itHasLengthAttribute = $input.attr('length') !== undefined;

      if(itHasLengthAttribute){
        $input.on('input', updateCounter);
        $input.on('focus', updateCounter);
        $input.on('blur', removeCounterElement);

        addCounterElement($input);
      }

    });
  };

  function updateCounter(){
    var maxLength     = +$(this).attr('length'),
    actualLength      = +$(this).val().length,
    isValidLength     = actualLength <= maxLength;

    $(this).parent().find('span[class="character-counter"]')
                    .html( actualLength + '/' + maxLength);

    addInputStyle(isValidLength, $(this));
  }

  function addCounterElement($input) {
    var $counterElement = $input.parent().find('span[class="character-counter"]');

    if ($counterElement.length) {
      return;
    }

    $counterElement = $('<span/>')
                        .addClass('character-counter')
                        .css('float','right')
                        .css('font-size','12px')
                        .css('height', 1);

    $input.parent().append($counterElement);
  }

  function removeCounterElement(){
    $(this).parent().find('span[class="character-counter"]').html('');
  }

  function addInputStyle(isValidLength, $input){
    var inputHasInvalidClass = $input.hasClass('invalid');
    if (isValidLength && inputHasInvalidClass) {
      $input.removeClass('invalid');
    }
    else if(!isValidLength && !inputHasInvalidClass){
      $input.removeClass('valid');
      $input.addClass('invalid');
    }
  }

  $(document).ready(function(){
    $('input, textarea').characterCounter();
  });

}( jQuery ));
;(function ($) {

  var methods = {

    init : function(options) {
      var defaults = {
        time_constant: 200, // ms
        dist: -100, // zoom scale TODO: make this more intuitive as an option
        shift: 0, // spacing for center image
        padding: 0, // Padding between non center items
        full_width: false, // Change to full width styles
        indicators: false, // Toggle indicators
        no_wrap: false // Don't wrap around and cycle through items.
      };
      options = $.extend(defaults, options);

      return this.each(function() {

        var images, offset, center, pressed, dim, count,
            reference, referenceY, amplitude, target, velocity,
            xform, frame, timestamp, ticker, dragged, vertical_dragged;
        var $indicators = $('<ul class="indicators"></ul>');


        // Initialize
        var view = $(this);
        var showIndicators = view.attr('data-indicators') || options.indicators;

        // Don't double initialize.
        if (view.hasClass('initialized')) {
          // Redraw carousel.
          $(this).trigger('carouselNext', [0.000001]);
          return true;
        }


        // Options
        if (options.full_width) {
          options.dist = 0;
          var firstImage = view.find('.carousel-item img').first();
          if (firstImage.length) {
            imageHeight = firstImage.on('load', function(){
              view.css('height', $(this).height());
            });
          } else {
            imageHeight = view.find('.carousel-item').first().height();
            view.css('height', imageHeight);
          }

          // Offset fixed items when indicators.
          if (showIndicators) {
            view.find('.carousel-fixed-item').addClass('with-indicators');
          }
        }


        view.addClass('initialized');
        pressed = false;
        offset = target = 0;
        images = [];
        item_width = view.find('.carousel-item').first().innerWidth();
        dim = item_width * 2 + options.padding;

        view.find('.carousel-item').each(function (i) {
          images.push($(this)[0]);
          if (showIndicators) {
            var $indicator = $('<li class="indicator-item"></li>');

            // Add active to first by default.
            if (i === 0) {
              $indicator.addClass('active');
            }

            // Handle clicks on indicators.
            $indicator.click(function () {
              var index = $(this).index();
              cycleTo(index);
            });
            $indicators.append($indicator);
          }
        });

        if (showIndicators) {
          view.append($indicators);
        }
        count = images.length;


        function setupEvents() {
          if (typeof window.ontouchstart !== 'undefined') {
            view[0].addEventListener('touchstart', tap);
            view[0].addEventListener('touchmove', drag);
            view[0].addEventListener('touchend', release);
          }
          view[0].addEventListener('mousedown', tap);
          view[0].addEventListener('mousemove', drag);
          view[0].addEventListener('mouseup', release);
          view[0].addEventListener('mouseleave', release);
          view[0].addEventListener('click', click);
        }

        function xpos(e) {
          // touch event
          if (e.targetTouches && (e.targetTouches.length >= 1)) {
            return e.targetTouches[0].clientX;
          }

          // mouse event
          return e.clientX;
        }

        function ypos(e) {
          // touch event
          if (e.targetTouches && (e.targetTouches.length >= 1)) {
            return e.targetTouches[0].clientY;
          }

          // mouse event
          return e.clientY;
        }

        function wrap(x) {
          return (x >= count) ? (x % count) : (x < 0) ? wrap(count + (x % count)) : x;
        }

        function scroll(x) {
          var i, half, delta, dir, tween, el, alignment, xTranslation;

          offset = (typeof x === 'number') ? x : offset;
          center = Math.floor((offset + dim / 2) / dim);
          delta = offset - center * dim;
          dir = (delta < 0) ? 1 : -1;
          tween = -dir * delta * 2 / dim;
          half = count >> 1;

          if (!options.full_width) {
            alignment = 'translateX(' + (view[0].clientWidth - item_width) / 2 + 'px) ';
            alignment += 'translateY(' + (view[0].clientHeight - item_width) / 2 + 'px)';
          } else {
            alignment = 'translateX(0)';
          }

          // Set indicator active
          if (showIndicators) {
            var diff = (center % count);
            var activeIndicator = $indicators.find('.indicator-item.active');
            if (activeIndicator.index() !== diff) {
              activeIndicator.removeClass('active');
              $indicators.find('.indicator-item').eq(diff).addClass('active');
            }
          }

          // center
          // Don't show wrapped items.
          if (!options.no_wrap || (center >= 0 && center < count)) {
            el = images[wrap(center)];
            el.style[xform] = alignment +
              ' translateX(' + (-delta / 2) + 'px)' +
              ' translateX(' + (dir * options.shift * tween * i) + 'px)' +
              ' translateZ(' + (options.dist * tween) + 'px)';
            el.style.zIndex = 0;
            if (options.full_width) { tweenedOpacity = 1; }
            else { tweenedOpacity = 1 - 0.2 * tween; }
            el.style.opacity = tweenedOpacity;
            el.style.display = 'block';
          }

          for (i = 1; i <= half; ++i) {
            // right side
            if (options.full_width) {
              zTranslation = options.dist;
              tweenedOpacity = (i === half && delta < 0) ? 1 - tween : 1;
            } else {
              zTranslation = options.dist * (i * 2 + tween * dir);
              tweenedOpacity = 1 - 0.2 * (i * 2 + tween * dir);
            }
            // Don't show wrapped items.
            if (!options.no_wrap || center + i < count) {
              el = images[wrap(center + i)];
              el.style[xform] = alignment +
                ' translateX(' + (options.shift + (dim * i - delta) / 2) + 'px)' +
                ' translateZ(' + zTranslation + 'px)';
              el.style.zIndex = -i;
              el.style.opacity = tweenedOpacity;
              el.style.display = 'block';
            }


            // left side
            if (options.full_width) {
              zTranslation = options.dist;
              tweenedOpacity = (i === half && delta > 0) ? 1 - tween : 1;
            } else {
              zTranslation = options.dist * (i * 2 - tween * dir);
              tweenedOpacity = 1 - 0.2 * (i * 2 - tween * dir);
            }
            // Don't show wrapped items.
            if (!options.no_wrap || center - i >= 0) {
              el = images[wrap(center - i)];
              el.style[xform] = alignment +
                ' translateX(' + (-options.shift + (-dim * i - delta) / 2) + 'px)' +
                ' translateZ(' + zTranslation + 'px)';
              el.style.zIndex = -i;
              el.style.opacity = tweenedOpacity;
              el.style.display = 'block';
            }
          }

          // center
          // Don't show wrapped items.
          if (!options.no_wrap || (center >= 0 && center < count)) {
            el = images[wrap(center)];
            el.style[xform] = alignment +
              ' translateX(' + (-delta / 2) + 'px)' +
              ' translateX(' + (dir * options.shift * tween) + 'px)' +
              ' translateZ(' + (options.dist * tween) + 'px)';
            el.style.zIndex = 0;
            if (options.full_width) { tweenedOpacity = 1; }
            else { tweenedOpacity = 1 - 0.2 * tween; }
            el.style.opacity = tweenedOpacity;
            el.style.display = 'block';
          }
        }

        function track() {
          var now, elapsed, delta, v;

          now = Date.now();
          elapsed = now - timestamp;
          timestamp = now;
          delta = offset - frame;
          frame = offset;

          v = 1000 * delta / (1 + elapsed);
          velocity = 0.8 * v + 0.2 * velocity;
        }

        function autoScroll() {
          var elapsed, delta;

          if (amplitude) {
            elapsed = Date.now() - timestamp;
            delta = amplitude * Math.exp(-elapsed / options.time_constant);
            if (delta > 2 || delta < -2) {
                scroll(target - delta);
                requestAnimationFrame(autoScroll);
            } else {
                scroll(target);
            }
          }
        }

        function click(e) {
          // Disable clicks if carousel was dragged.
          if (dragged) {
            e.preventDefault();
            e.stopPropagation();
            return false;

          } else if (!options.full_width) {
            var clickedIndex = $(e.target).closest('.carousel-item').index();
            var diff = (center % count) - clickedIndex;

            // Disable clicks if carousel was shifted by click
            if (diff !== 0) {
              e.preventDefault();
              e.stopPropagation();
            }
            cycleTo(clickedIndex);
          }
        }

        function cycleTo(n) {
          var diff = (center % count) - n;

          // Account for wraparound.
          if (!options.no_wrap) {
            if (diff < 0) {
              if (Math.abs(diff + count) < Math.abs(diff)) { diff += count; }

            } else if (diff > 0) {
              if (Math.abs(diff - count) < diff) { diff -= count; }
            }
          }

          // Call prev or next accordingly.
          if (diff < 0) {
            view.trigger('carouselNext', [Math.abs(diff)]);

          } else if (diff > 0) {
            view.trigger('carouselPrev', [diff]);
          }
        }

        function tap(e) {
          pressed = true;
          dragged = false;
          vertical_dragged = false;
          reference = xpos(e);
          referenceY = ypos(e);

          velocity = amplitude = 0;
          frame = offset;
          timestamp = Date.now();
          clearInterval(ticker);
          ticker = setInterval(track, 100);

        }

        function drag(e) {
          var x, delta, deltaY;
          if (pressed) {
            x = xpos(e);
            y = ypos(e);
            delta = reference - x;
            deltaY = Math.abs(referenceY - y);
            if (deltaY < 30 && !vertical_dragged) {
              // If vertical scrolling don't allow dragging.
              if (delta > 2 || delta < -2) {
                dragged = true;
                reference = x;
                scroll(offset + delta);
              }

            } else if (dragged) {
              // If dragging don't allow vertical scroll.
              e.preventDefault();
              e.stopPropagation();
              return false;

            } else {
              // Vertical scrolling.
              vertical_dragged = true;
            }
          }

          if (dragged) {
            // If dragging don't allow vertical scroll.
            e.preventDefault();
            e.stopPropagation();
            return false;
          }
        }

        function release(e) {
          if (pressed) {
            pressed = false;
          } else {
            return;
          }

          clearInterval(ticker);
          target = offset;
          if (velocity > 10 || velocity < -10) {
            amplitude = 0.9 * velocity;
            target = offset + amplitude;
          }
          target = Math.round(target / dim) * dim;

          // No wrap of items.
          if (options.no_wrap) {
            if (target >= dim * (count - 1)) {
              target = dim * (count - 1);
            } else if (target < 0) {
              target = 0;
            }
          }
          amplitude = target - offset;
          timestamp = Date.now();
          requestAnimationFrame(autoScroll);

          if (dragged) {
            e.preventDefault();
            e.stopPropagation();
          }
          return false;
        }

        xform = 'transform';
        ['webkit', 'Moz', 'O', 'ms'].every(function (prefix) {
          var e = prefix + 'Transform';
          if (typeof document.body.style[e] !== 'undefined') {
            xform = e;
            return false;
          }
          return true;
        });



        window.onresize = scroll;

        setupEvents();
        scroll(offset);

        $(this).on('carouselNext', function(e, n) {
          if (n === undefined) {
            n = 1;
          }
          target = offset + dim * n;
          if (offset !== target) {
            amplitude = target - offset;
            timestamp = Date.now();
            requestAnimationFrame(autoScroll);
          }
        });

        $(this).on('carouselPrev', function(e, n) {
          if (n === undefined) {
            n = 1;
          }
          target = offset - dim * n;
          if (offset !== target) {
            amplitude = target - offset;
            timestamp = Date.now();
            requestAnimationFrame(autoScroll);
          }
        });

        $(this).on('carouselSet', function(e, n) {
          if (n === undefined) {
            n = 0;
          }
          cycleTo(n);
        });

      });



    },
    next : function(n) {
      $(this).trigger('carouselNext', [n]);
    },
    prev : function(n) {
      $(this).trigger('carouselPrev', [n]);
    },
    set : function(n) {
      $(this).trigger('carouselSet', [n]);
    }
  };


    $.fn.carousel = function(methodOrOptions) {
      if ( methods[methodOrOptions] ) {
        return methods[ methodOrOptions ].apply( this, Array.prototype.slice.call( arguments, 1 ));
      } else if ( typeof methodOrOptions === 'object' || ! methodOrOptions ) {
        // Default to "init"
        return methods.init.apply( this, arguments );
      } else {
        $.error( 'Method ' +  methodOrOptions + ' does not exist on jQuery.carousel' );
      }
    }; // Plugin end
}( jQuery ));
/*!
 * Materialize v0.97.8 (http://materializecss.com)
 * Copyright 2014-2015 Materialize
 * MIT License (https://raw.githubusercontent.com/Dogfalo/materialize/master/LICENSE)
 */
if("undefined"==typeof jQuery){var jQuery;jQuery="function"==typeof require?$=require("jquery"):$}jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(a,b,c,d,e){return jQuery.easing[jQuery.easing.def](a,b,c,d,e)},easeInQuad:function(a,b,c,d,e){return d*(b/=e)*b+c},easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c},easeInOutQuad:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b+c:-d/2*(--b*(b-2)-1)+c},easeInCubic:function(a,b,c,d,e){return d*(b/=e)*b*b+c},easeOutCubic:function(a,b,c,d,e){return d*((b=b/e-1)*b*b+1)+c},easeInOutCubic:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b+c:d/2*((b-=2)*b*b+2)+c},easeInQuart:function(a,b,c,d,e){return d*(b/=e)*b*b*b+c},easeOutQuart:function(a,b,c,d,e){return-d*((b=b/e-1)*b*b*b-1)+c},easeInOutQuart:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b+c:-d/2*((b-=2)*b*b*b-2)+c},easeInQuint:function(a,b,c,d,e){return d*(b/=e)*b*b*b*b+c},easeOutQuint:function(a,b,c,d,e){return d*((b=b/e-1)*b*b*b*b+1)+c},easeInOutQuint:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b*b+c:d/2*((b-=2)*b*b*b*b+2)+c},easeInSine:function(a,b,c,d,e){return-d*Math.cos(b/e*(Math.PI/2))+d+c},easeOutSine:function(a,b,c,d,e){return d*Math.sin(b/e*(Math.PI/2))+c},easeInOutSine:function(a,b,c,d,e){return-d/2*(Math.cos(Math.PI*b/e)-1)+c},easeInExpo:function(a,b,c,d,e){return 0==b?c:d*Math.pow(2,10*(b/e-1))+c},easeOutExpo:function(a,b,c,d,e){return b==e?c+d:d*(-Math.pow(2,-10*b/e)+1)+c},easeInOutExpo:function(a,b,c,d,e){return 0==b?c:b==e?c+d:(b/=e/2)<1?d/2*Math.pow(2,10*(b-1))+c:d/2*(-Math.pow(2,-10*--b)+2)+c},easeInCirc:function(a,b,c,d,e){return-d*(Math.sqrt(1-(b/=e)*b)-1)+c},easeOutCirc:function(a,b,c,d,e){return d*Math.sqrt(1-(b=b/e-1)*b)+c},easeInOutCirc:function(a,b,c,d,e){return(b/=e/2)<1?-d/2*(Math.sqrt(1-b*b)-1)+c:d/2*(Math.sqrt(1-(b-=2)*b)+1)+c},easeInElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(0==b)return c;if(1==(b/=e))return c+d;if(g||(g=.3*e),h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return-(h*Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*(2*Math.PI)/g))+c},easeOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(0==b)return c;if(1==(b/=e))return c+d;if(g||(g=.3*e),h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return h*Math.pow(2,-10*b)*Math.sin((b*e-f)*(2*Math.PI)/g)+d+c},easeInOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(0==b)return c;if(2==(b/=e/2))return c+d;if(g||(g=e*(.3*1.5)),h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return 1>b?-.5*(h*Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*(2*Math.PI)/g))+c:h*Math.pow(2,-10*(b-=1))*Math.sin((b*e-f)*(2*Math.PI)/g)*.5+d+c},easeInBack:function(a,b,c,d,e,f){return void 0==f&&(f=1.70158),d*(b/=e)*b*((f+1)*b-f)+c},easeOutBack:function(a,b,c,d,e,f){return void 0==f&&(f=1.70158),d*((b=b/e-1)*b*((f+1)*b+f)+1)+c},easeInOutBack:function(a,b,c,d,e,f){return void 0==f&&(f=1.70158),(b/=e/2)<1?d/2*(b*b*(((f*=1.525)+1)*b-f))+c:d/2*((b-=2)*b*(((f*=1.525)+1)*b+f)+2)+c},easeInBounce:function(a,b,c,d,e){return d-jQuery.easing.easeOutBounce(a,e-b,0,d,e)+c},easeOutBounce:function(a,b,c,d,e){return(b/=e)<1/2.75?d*(7.5625*b*b)+c:2/2.75>b?d*(7.5625*(b-=1.5/2.75)*b+.75)+c:2.5/2.75>b?d*(7.5625*(b-=2.25/2.75)*b+.9375)+c:d*(7.5625*(b-=2.625/2.75)*b+.984375)+c},easeInOutBounce:function(a,b,c,d,e){return e/2>b?.5*jQuery.easing.easeInBounce(a,2*b,0,d,e)+c:.5*jQuery.easing.easeOutBounce(a,2*b-e,0,d,e)+.5*d+c}}),jQuery.extend(jQuery.easing,{easeInOutMaterial:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b+c:d/4*((b-=2)*b*b+2)+c}}),jQuery.Velocity?console.log("Velocity is already loaded. You may be needlessly importing Velocity again; note that Materialize includes Velocity."):(!function(a){function b(a){var b=a.length,d=c.type(a);return"function"===d||c.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===d||0===b||"number"==typeof b&&b>0&&b-1 in a}if(!a.jQuery){var c=function(a,b){return new c.fn.init(a,b)};c.isWindow=function(a){return null!=a&&a==a.window},c.type=function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?e[g.call(a)]||"object":typeof a},c.isArray=Array.isArray||function(a){return"array"===c.type(a)},c.isPlainObject=function(a){var b;if(!a||"object"!==c.type(a)||a.nodeType||c.isWindow(a))return!1;try{if(a.constructor&&!f.call(a,"constructor")&&!f.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(d){return!1}for(b in a);return void 0===b||f.call(a,b)},c.each=function(a,c,d){var e,f=0,g=a.length,h=b(a);if(d){if(h)for(;g>f&&(e=c.apply(a[f],d),e!==!1);f++);else for(f in a)if(e=c.apply(a[f],d),e===!1)break}else if(h)for(;g>f&&(e=c.call(a[f],f,a[f]),e!==!1);f++);else for(f in a)if(e=c.call(a[f],f,a[f]),e===!1)break;return a},c.data=function(a,b,e){if(void 0===e){var f=a[c.expando],g=f&&d[f];if(void 0===b)return g;if(g&&b in g)return g[b]}else if(void 0!==b){var f=a[c.expando]||(a[c.expando]=++c.uuid);return d[f]=d[f]||{},d[f][b]=e,e}},c.removeData=function(a,b){var e=a[c.expando],f=e&&d[e];f&&c.each(b,function(a,b){delete f[b]})},c.extend=function(){var a,b,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;for("boolean"==typeof h&&(k=h,h=arguments[i]||{},i++),"object"!=typeof h&&"function"!==c.type(h)&&(h={}),i===j&&(h=this,i--);j>i;i++)if(null!=(f=arguments[i]))for(e in f)a=h[e],d=f[e],h!==d&&(k&&d&&(c.isPlainObject(d)||(b=c.isArray(d)))?(b?(b=!1,g=a&&c.isArray(a)?a:[]):g=a&&c.isPlainObject(a)?a:{},h[e]=c.extend(k,g,d)):void 0!==d&&(h[e]=d));return h},c.queue=function(a,d,e){function f(a,c){var d=c||[];return null!=a&&(b(Object(a))?!function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;)a[e++]=b[d++];if(c!==c)for(;void 0!==b[d];)a[e++]=b[d++];return a.length=e,a}(d,"string"==typeof a?[a]:a):[].push.call(d,a)),d}if(a){d=(d||"fx")+"queue";var g=c.data(a,d);return e?(!g||c.isArray(e)?g=c.data(a,d,f(e)):g.push(e),g):g||[]}},c.dequeue=function(a,b){c.each(a.nodeType?[a]:a,function(a,d){b=b||"fx";var e=c.queue(d,b),f=e.shift();"inprogress"===f&&(f=e.shift()),f&&("fx"===b&&e.unshift("inprogress"),f.call(d,function(){c.dequeue(d,b)}))})},c.fn=c.prototype={init:function(a){if(a.nodeType)return this[0]=a,this;throw new Error("Not a DOM node.")},offset:function(){var b=this[0].getBoundingClientRect?this[0].getBoundingClientRect():{top:0,left:0};return{top:b.top+(a.pageYOffset||document.scrollTop||0)-(document.clientTop||0),left:b.left+(a.pageXOffset||document.scrollLeft||0)-(document.clientLeft||0)}},position:function(){function a(){for(var a=this.offsetParent||document;a&&"html"===!a.nodeType.toLowerCase&&"static"===a.style.position;)a=a.offsetParent;return a||document}var b=this[0],a=a.apply(b),d=this.offset(),e=/^(?:body|html)$/i.test(a.nodeName)?{top:0,left:0}:c(a).offset();return d.top-=parseFloat(b.style.marginTop)||0,d.left-=parseFloat(b.style.marginLeft)||0,a.style&&(e.top+=parseFloat(a.style.borderTopWidth)||0,e.left+=parseFloat(a.style.borderLeftWidth)||0),{top:d.top-e.top,left:d.left-e.left}}};var d={};c.expando="velocity"+(new Date).getTime(),c.uuid=0;for(var e={},f=e.hasOwnProperty,g=e.toString,h="Boolean Number String Function Array Date RegExp Object Error".split(" "),i=0;i<h.length;i++)e["[object "+h[i]+"]"]=h[i].toLowerCase();c.fn.init.prototype=c.fn,a.Velocity={Utilities:c}}}(window),function(a){"object"==typeof module&&"object"==typeof module.exports?module.exports=a():"function"==typeof define&&define.amd?define(a):a()}(function(){return function(a,b,c,d){function e(a){for(var b=-1,c=a?a.length:0,d=[];++b<c;){var e=a[b];e&&d.push(e)}return d}function f(a){return p.isWrapped(a)?a=[].slice.call(a):p.isNode(a)&&(a=[a]),a}function g(a){var b=m.data(a,"velocity");return null===b?d:b}function h(a){return function(b){return Math.round(b*a)*(1/a)}}function i(a,c,d,e){function f(a,b){return 1-3*b+3*a}function g(a,b){return 3*b-6*a}function h(a){return 3*a}function i(a,b,c){return((f(b,c)*a+g(b,c))*a+h(b))*a}function j(a,b,c){return 3*f(b,c)*a*a+2*g(b,c)*a+h(b)}function k(b,c){for(var e=0;p>e;++e){var f=j(c,a,d);if(0===f)return c;var g=i(c,a,d)-b;c-=g/f}return c}function l(){for(var b=0;t>b;++b)x[b]=i(b*u,a,d)}function m(b,c,e){var f,g,h=0;do g=c+(e-c)/2,f=i(g,a,d)-b,f>0?e=g:c=g;while(Math.abs(f)>r&&++h<s);return g}function n(b){for(var c=0,e=1,f=t-1;e!=f&&x[e]<=b;++e)c+=u;--e;var g=(b-x[e])/(x[e+1]-x[e]),h=c+g*u,i=j(h,a,d);return i>=q?k(b,h):0==i?h:m(b,c,c+u)}function o(){y=!0,(a!=c||d!=e)&&l()}var p=4,q=.001,r=1e-7,s=10,t=11,u=1/(t-1),v="Float32Array"in b;if(4!==arguments.length)return!1;for(var w=0;4>w;++w)if("number"!=typeof arguments[w]||isNaN(arguments[w])||!isFinite(arguments[w]))return!1;a=Math.min(a,1),d=Math.min(d,1),a=Math.max(a,0),d=Math.max(d,0);var x=v?new Float32Array(t):new Array(t),y=!1,z=function(b){return y||o(),a===c&&d===e?b:0===b?0:1===b?1:i(n(b),c,e)};z.getControlPoints=function(){return[{x:a,y:c},{x:d,y:e}]};var A="generateBezier("+[a,c,d,e]+")";return z.toString=function(){return A},z}function j(a,b){var c=a;return p.isString(a)?t.Easings[a]||(c=!1):c=p.isArray(a)&&1===a.length?h.apply(null,a):p.isArray(a)&&2===a.length?u.apply(null,a.concat([b])):p.isArray(a)&&4===a.length?i.apply(null,a):!1,c===!1&&(c=t.Easings[t.defaults.easing]?t.defaults.easing:s),c}function k(a){if(a){var b=(new Date).getTime(),c=t.State.calls.length;c>1e4&&(t.State.calls=e(t.State.calls));for(var f=0;c>f;f++)if(t.State.calls[f]){var h=t.State.calls[f],i=h[0],j=h[2],n=h[3],o=!!n,q=null;n||(n=t.State.calls[f][3]=b-16);for(var r=Math.min((b-n)/j.duration,1),s=0,u=i.length;u>s;s++){var w=i[s],y=w.element;if(g(y)){var z=!1;if(j.display!==d&&null!==j.display&&"none"!==j.display){if("flex"===j.display){var A=["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex"];m.each(A,function(a,b){v.setPropertyValue(y,"display",b)})}v.setPropertyValue(y,"display",j.display)}j.visibility!==d&&"hidden"!==j.visibility&&v.setPropertyValue(y,"visibility",j.visibility);for(var B in w)if("element"!==B){var C,D=w[B],E=p.isString(D.easing)?t.Easings[D.easing]:D.easing;if(1===r)C=D.endValue;else{var F=D.endValue-D.startValue;if(C=D.startValue+F*E(r,j,F),!o&&C===D.currentValue)continue}if(D.currentValue=C,"tween"===B)q=C;else{if(v.Hooks.registered[B]){var G=v.Hooks.getRoot(B),H=g(y).rootPropertyValueCache[G];H&&(D.rootPropertyValue=H)}var I=v.setPropertyValue(y,B,D.currentValue+(0===parseFloat(C)?"":D.unitType),D.rootPropertyValue,D.scrollData);v.Hooks.registered[B]&&(g(y).rootPropertyValueCache[G]=v.Normalizations.registered[G]?v.Normalizations.registered[G]("extract",null,I[1]):I[1]),"transform"===I[0]&&(z=!0)}}j.mobileHA&&g(y).transformCache.translate3d===d&&(g(y).transformCache.translate3d="(0px, 0px, 0px)",z=!0),z&&v.flushTransformCache(y)}}j.display!==d&&"none"!==j.display&&(t.State.calls[f][2].display=!1),j.visibility!==d&&"hidden"!==j.visibility&&(t.State.calls[f][2].visibility=!1),j.progress&&j.progress.call(h[1],h[1],r,Math.max(0,n+j.duration-b),n,q),1===r&&l(f)}}t.State.isTicking&&x(k)}function l(a,b){if(!t.State.calls[a])return!1;for(var c=t.State.calls[a][0],e=t.State.calls[a][1],f=t.State.calls[a][2],h=t.State.calls[a][4],i=!1,j=0,k=c.length;k>j;j++){var l=c[j].element;if(b||f.loop||("none"===f.display&&v.setPropertyValue(l,"display",f.display),"hidden"===f.visibility&&v.setPropertyValue(l,"visibility",f.visibility)),f.loop!==!0&&(m.queue(l)[1]===d||!/\.velocityQueueEntryFlag/i.test(m.queue(l)[1]))&&g(l)){g(l).isAnimating=!1,g(l).rootPropertyValueCache={};var n=!1;m.each(v.Lists.transforms3D,function(a,b){var c=/^scale/.test(b)?1:0,e=g(l).transformCache[b];g(l).transformCache[b]!==d&&new RegExp("^\\("+c+"[^.]").test(e)&&(n=!0,delete g(l).transformCache[b])}),f.mobileHA&&(n=!0,delete g(l).transformCache.translate3d),n&&v.flushTransformCache(l),v.Values.removeClass(l,"velocity-animating")}if(!b&&f.complete&&!f.loop&&j===k-1)try{f.complete.call(e,e)}catch(o){setTimeout(function(){throw o},1)}h&&f.loop!==!0&&h(e),g(l)&&f.loop===!0&&!b&&(m.each(g(l).tweensContainer,function(a,b){/^rotate/.test(a)&&360===parseFloat(b.endValue)&&(b.endValue=0,b.startValue=360),/^backgroundPosition/.test(a)&&100===parseFloat(b.endValue)&&"%"===b.unitType&&(b.endValue=0,b.startValue=100)}),t(l,"reverse",{loop:!0,delay:f.delay})),f.queue!==!1&&m.dequeue(l,f.queue)}t.State.calls[a]=!1;for(var p=0,q=t.State.calls.length;q>p;p++)if(t.State.calls[p]!==!1){i=!0;break}i===!1&&(t.State.isTicking=!1,delete t.State.calls,t.State.calls=[])}var m,n=function(){if(c.documentMode)return c.documentMode;for(var a=7;a>4;a--){var b=c.createElement("div");if(b.innerHTML="<!--[if IE "+a+"]><span></span><![endif]-->",b.getElementsByTagName("span").length)return b=null,a}return d}(),o=function(){var a=0;return b.webkitRequestAnimationFrame||b.mozRequestAnimationFrame||function(b){var c,d=(new Date).getTime();return c=Math.max(0,16-(d-a)),a=d+c,setTimeout(function(){b(d+c)},c)}}(),p={isString:function(a){return"string"==typeof a},isArray:Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},isFunction:function(a){return"[object Function]"===Object.prototype.toString.call(a)},isNode:function(a){return a&&a.nodeType},isNodeList:function(a){return"object"==typeof a&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(Object.prototype.toString.call(a))&&a.length!==d&&(0===a.length||"object"==typeof a[0]&&a[0].nodeType>0)},isWrapped:function(a){return a&&(a.jquery||b.Zepto&&b.Zepto.zepto.isZ(a))},isSVG:function(a){return b.SVGElement&&a instanceof b.SVGElement},isEmptyObject:function(a){for(var b in a)return!1;return!0}},q=!1;if(a.fn&&a.fn.jquery?(m=a,q=!0):m=b.Velocity.Utilities,8>=n&&!q)throw new Error("Velocity: IE8 and below require jQuery to be loaded before Velocity.");if(7>=n)return void(jQuery.fn.velocity=jQuery.fn.animate);var r=400,s="swing",t={State:{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isAndroid:/Android/i.test(navigator.userAgent),isGingerbread:/Android 2\.3\.[3-7]/i.test(navigator.userAgent),isChrome:b.chrome,isFirefox:/Firefox/i.test(navigator.userAgent),prefixElement:c.createElement("div"),prefixMatches:{},scrollAnchor:null,scrollPropertyLeft:null,scrollPropertyTop:null,isTicking:!1,calls:[]},CSS:{},Utilities:m,Redirects:{},Easings:{},Promise:b.Promise,defaults:{queue:"",duration:r,easing:s,begin:d,complete:d,progress:d,display:d,visibility:d,loop:!1,delay:!1,mobileHA:!0,_cacheValues:!0},init:function(a){m.data(a,"velocity",{isSVG:p.isSVG(a),isAnimating:!1,computedStyle:null,tweensContainer:null,rootPropertyValueCache:{},transformCache:{}})},hook:null,mock:!1,version:{major:1,minor:2,patch:2},debug:!1};b.pageYOffset!==d?(t.State.scrollAnchor=b,t.State.scrollPropertyLeft="pageXOffset",t.State.scrollPropertyTop="pageYOffset"):(t.State.scrollAnchor=c.documentElement||c.body.parentNode||c.body,t.State.scrollPropertyLeft="scrollLeft",t.State.scrollPropertyTop="scrollTop");var u=function(){function a(a){return-a.tension*a.x-a.friction*a.v}function b(b,c,d){var e={x:b.x+d.dx*c,v:b.v+d.dv*c,tension:b.tension,friction:b.friction};return{dx:e.v,dv:a(e)}}function c(c,d){var e={dx:c.v,dv:a(c)},f=b(c,.5*d,e),g=b(c,.5*d,f),h=b(c,d,g),i=1/6*(e.dx+2*(f.dx+g.dx)+h.dx),j=1/6*(e.dv+2*(f.dv+g.dv)+h.dv);return c.x=c.x+i*d,c.v=c.v+j*d,c}return function d(a,b,e){var f,g,h,i={x:-1,v:0,tension:null,friction:null},j=[0],k=0,l=1e-4,m=.016;for(a=parseFloat(a)||500,b=parseFloat(b)||20,e=e||null,i.tension=a,i.friction=b,f=null!==e,f?(k=d(a,b),g=k/e*m):g=m;h=c(h||i,g),j.push(1+h.x),k+=16,Math.abs(h.x)>l&&Math.abs(h.v)>l;);return f?function(a){return j[a*(j.length-1)|0]}:k}}();t.Easings={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},spring:function(a){return 1-Math.cos(4.5*a*Math.PI)*Math.exp(6*-a)}},m.each([["ease",[.25,.1,.25,1]],["ease-in",[.42,0,1,1]],["ease-out",[0,0,.58,1]],["ease-in-out",[.42,0,.58,1]],["easeInSine",[.47,0,.745,.715]],["easeOutSine",[.39,.575,.565,1]],["easeInOutSine",[.445,.05,.55,.95]],["easeInQuad",[.55,.085,.68,.53]],["easeOutQuad",[.25,.46,.45,.94]],["easeInOutQuad",[.455,.03,.515,.955]],["easeInCubic",[.55,.055,.675,.19]],["easeOutCubic",[.215,.61,.355,1]],["easeInOutCubic",[.645,.045,.355,1]],["easeInQuart",[.895,.03,.685,.22]],["easeOutQuart",[.165,.84,.44,1]],["easeInOutQuart",[.77,0,.175,1]],["easeInQuint",[.755,.05,.855,.06]],["easeOutQuint",[.23,1,.32,1]],["easeInOutQuint",[.86,0,.07,1]],["easeInExpo",[.95,.05,.795,.035]],["easeOutExpo",[.19,1,.22,1]],["easeInOutExpo",[1,0,0,1]],["easeInCirc",[.6,.04,.98,.335]],["easeOutCirc",[.075,.82,.165,1]],["easeInOutCirc",[.785,.135,.15,.86]]],function(a,b){t.Easings[b[0]]=i.apply(null,b[1])});var v=t.CSS={RegEx:{isHex:/^#([A-f\d]{3}){1,2}$/i,valueUnwrap:/^[A-z]+\((.*)\)$/i,wrappedValueAlreadyExtracted:/[0-9.]+ [0-9.]+ [0-9.]+( [0-9.]+)?/,valueSplit:/([A-z]+\(.+\))|(([A-z0-9#-.]+?)(?=\s|$))/gi},Lists:{colors:["fill","stroke","stopColor","color","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","outlineColor"],transformsBase:["translateX","translateY","scale","scaleX","scaleY","skewX","skewY","rotateZ"],transforms3D:["transformPerspective","translateZ","scaleZ","rotateX","rotateY"]},Hooks:{templates:{textShadow:["Color X Y Blur","black 0px 0px 0px"],boxShadow:["Color X Y Blur Spread","black 0px 0px 0px 0px"],clip:["Top Right Bottom Left","0px 0px 0px 0px"],backgroundPosition:["X Y","0% 0%"],transformOrigin:["X Y Z","50% 50% 0px"],perspectiveOrigin:["X Y","50% 50%"]},registered:{},register:function(){for(var a=0;a<v.Lists.colors.length;a++){var b="color"===v.Lists.colors[a]?"0 0 0 1":"255 255 255 1";v.Hooks.templates[v.Lists.colors[a]]=["Red Green Blue Alpha",b]}var c,d,e;if(n)for(c in v.Hooks.templates){d=v.Hooks.templates[c],e=d[0].split(" ");var f=d[1].match(v.RegEx.valueSplit);"Color"===e[0]&&(e.push(e.shift()),f.push(f.shift()),v.Hooks.templates[c]=[e.join(" "),f.join(" ")])}for(c in v.Hooks.templates){d=v.Hooks.templates[c],e=d[0].split(" ");for(var a in e){var g=c+e[a],h=a;v.Hooks.registered[g]=[c,h]}}},getRoot:function(a){var b=v.Hooks.registered[a];return b?b[0]:a},cleanRootPropertyValue:function(a,b){return v.RegEx.valueUnwrap.test(b)&&(b=b.match(v.RegEx.valueUnwrap)[1]),v.Values.isCSSNullValue(b)&&(b=v.Hooks.templates[a][1]),b},extractValue:function(a,b){var c=v.Hooks.registered[a];if(c){var d=c[0],e=c[1];return b=v.Hooks.cleanRootPropertyValue(d,b),b.toString().match(v.RegEx.valueSplit)[e]}return b},injectValue:function(a,b,c){var d=v.Hooks.registered[a];if(d){var e,f,g=d[0],h=d[1];return c=v.Hooks.cleanRootPropertyValue(g,c),e=c.toString().match(v.RegEx.valueSplit),e[h]=b,f=e.join(" ")}return c}},Normalizations:{registered:{clip:function(a,b,c){switch(a){case"name":return"clip";case"extract":var d;return v.RegEx.wrappedValueAlreadyExtracted.test(c)?d=c:(d=c.toString().match(v.RegEx.valueUnwrap),d=d?d[1].replace(/,(\s+)?/g," "):c),d;case"inject":return"rect("+c+")"}},blur:function(a,b,c){switch(a){case"name":return t.State.isFirefox?"filter":"-webkit-filter";case"extract":var d=parseFloat(c);if(!d&&0!==d){var e=c.toString().match(/blur\(([0-9]+[A-z]+)\)/i);d=e?e[1]:0}return d;case"inject":return parseFloat(c)?"blur("+c+")":"none"}},opacity:function(a,b,c){if(8>=n)switch(a){case"name":return"filter";case"extract":var d=c.toString().match(/alpha\(opacity=(.*)\)/i);return c=d?d[1]/100:1;case"inject":return b.style.zoom=1,parseFloat(c)>=1?"":"alpha(opacity="+parseInt(100*parseFloat(c),10)+")"}else switch(a){case"name":return"opacity";case"extract":return c;case"inject":return c}}},register:function(){9>=n||t.State.isGingerbread||(v.Lists.transformsBase=v.Lists.transformsBase.concat(v.Lists.transforms3D));for(var a=0;a<v.Lists.transformsBase.length;a++)!function(){var b=v.Lists.transformsBase[a];v.Normalizations.registered[b]=function(a,c,e){switch(a){case"name":return"transform";case"extract":return g(c)===d||g(c).transformCache[b]===d?/^scale/i.test(b)?1:0:g(c).transformCache[b].replace(/[()]/g,"");case"inject":var f=!1;switch(b.substr(0,b.length-1)){case"translate":f=!/(%|px|em|rem|vw|vh|\d)$/i.test(e);break;case"scal":case"scale":t.State.isAndroid&&g(c).transformCache[b]===d&&1>e&&(e=1),f=!/(\d)$/i.test(e);break;case"skew":f=!/(deg|\d)$/i.test(e);break;case"rotate":f=!/(deg|\d)$/i.test(e)}return f||(g(c).transformCache[b]="("+e+")"),g(c).transformCache[b]}}}();for(var a=0;a<v.Lists.colors.length;a++)!function(){var b=v.Lists.colors[a];v.Normalizations.registered[b]=function(a,c,e){switch(a){case"name":return b;case"extract":var f;if(v.RegEx.wrappedValueAlreadyExtracted.test(e))f=e;else{var g,h={black:"rgb(0, 0, 0)",blue:"rgb(0, 0, 255)",gray:"rgb(128, 128, 128)",green:"rgb(0, 128, 0)",red:"rgb(255, 0, 0)",white:"rgb(255, 255, 255)"};/^[A-z]+$/i.test(e)?g=h[e]!==d?h[e]:h.black:v.RegEx.isHex.test(e)?g="rgb("+v.Values.hexToRgb(e).join(" ")+")":/^rgba?\(/i.test(e)||(g=h.black),f=(g||e).toString().match(v.RegEx.valueUnwrap)[1].replace(/,(\s+)?/g," ")}return 8>=n||3!==f.split(" ").length||(f+=" 1"),f;case"inject":return 8>=n?4===e.split(" ").length&&(e=e.split(/\s+/).slice(0,3).join(" ")):3===e.split(" ").length&&(e+=" 1"),(8>=n?"rgb":"rgba")+"("+e.replace(/\s+/g,",").replace(/\.(\d)+(?=,)/g,"")+")"}}}()}},Names:{camelCase:function(a){return a.replace(/-(\w)/g,function(a,b){return b.toUpperCase()})},SVGAttribute:function(a){var b="width|height|x|y|cx|cy|r|rx|ry|x1|x2|y1|y2";return(n||t.State.isAndroid&&!t.State.isChrome)&&(b+="|transform"),new RegExp("^("+b+")$","i").test(a)},prefixCheck:function(a){if(t.State.prefixMatches[a])return[t.State.prefixMatches[a],!0];for(var b=["","Webkit","Moz","ms","O"],c=0,d=b.length;d>c;c++){var e;if(e=0===c?a:b[c]+a.replace(/^\w/,function(a){return a.toUpperCase()}),p.isString(t.State.prefixElement.style[e]))return t.State.prefixMatches[a]=e,[e,!0]}return[a,!1]}},Values:{hexToRgb:function(a){var b,c=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,d=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i;return a=a.replace(c,function(a,b,c,d){return b+b+c+c+d+d}),b=d.exec(a),b?[parseInt(b[1],16),parseInt(b[2],16),parseInt(b[3],16)]:[0,0,0]},isCSSNullValue:function(a){return 0==a||/^(none|auto|transparent|(rgba\(0, ?0, ?0, ?0\)))$/i.test(a)},getUnitType:function(a){return/^(rotate|skew)/i.test(a)?"deg":/(^(scale|scaleX|scaleY|scaleZ|alpha|flexGrow|flexHeight|zIndex|fontWeight)$)|((opacity|red|green|blue|alpha)$)/i.test(a)?"":"px"},getDisplayType:function(a){var b=a&&a.tagName.toString().toLowerCase();return/^(b|big|i|small|tt|abbr|acronym|cite|code|dfn|em|kbd|strong|samp|var|a|bdo|br|img|map|object|q|script|span|sub|sup|button|input|label|select|textarea)$/i.test(b)?"inline":/^(li)$/i.test(b)?"list-item":/^(tr)$/i.test(b)?"table-row":/^(table)$/i.test(b)?"table":/^(tbody)$/i.test(b)?"table-row-group":"block"},addClass:function(a,b){a.classList?a.classList.add(b):a.className+=(a.className.length?" ":"")+b},removeClass:function(a,b){a.classList?a.classList.remove(b):a.className=a.className.toString().replace(new RegExp("(^|\\s)"+b.split(" ").join("|")+"(\\s|$)","gi")," ")}},getPropertyValue:function(a,c,e,f){function h(a,c){function e(){j&&v.setPropertyValue(a,"display","none")}var i=0;if(8>=n)i=m.css(a,c);else{var j=!1;if(/^(width|height)$/.test(c)&&0===v.getPropertyValue(a,"display")&&(j=!0,v.setPropertyValue(a,"display",v.Values.getDisplayType(a))),!f){if("height"===c&&"border-box"!==v.getPropertyValue(a,"boxSizing").toString().toLowerCase()){var k=a.offsetHeight-(parseFloat(v.getPropertyValue(a,"borderTopWidth"))||0)-(parseFloat(v.getPropertyValue(a,"borderBottomWidth"))||0)-(parseFloat(v.getPropertyValue(a,"paddingTop"))||0)-(parseFloat(v.getPropertyValue(a,"paddingBottom"))||0);return e(),k}if("width"===c&&"border-box"!==v.getPropertyValue(a,"boxSizing").toString().toLowerCase()){var l=a.offsetWidth-(parseFloat(v.getPropertyValue(a,"borderLeftWidth"))||0)-(parseFloat(v.getPropertyValue(a,"borderRightWidth"))||0)-(parseFloat(v.getPropertyValue(a,"paddingLeft"))||0)-(parseFloat(v.getPropertyValue(a,"paddingRight"))||0);return e(),l}}var o;o=g(a)===d?b.getComputedStyle(a,null):g(a).computedStyle?g(a).computedStyle:g(a).computedStyle=b.getComputedStyle(a,null),"borderColor"===c&&(c="borderTopColor"),i=9===n&&"filter"===c?o.getPropertyValue(c):o[c],(""===i||null===i)&&(i=a.style[c]),e()}if("auto"===i&&/^(top|right|bottom|left)$/i.test(c)){var p=h(a,"position");("fixed"===p||"absolute"===p&&/top|left/i.test(c))&&(i=m(a).position()[c]+"px")}return i}var i;if(v.Hooks.registered[c]){var j=c,k=v.Hooks.getRoot(j);e===d&&(e=v.getPropertyValue(a,v.Names.prefixCheck(k)[0])),v.Normalizations.registered[k]&&(e=v.Normalizations.registered[k]("extract",a,e)),i=v.Hooks.extractValue(j,e)}else if(v.Normalizations.registered[c]){var l,o;l=v.Normalizations.registered[c]("name",a),"transform"!==l&&(o=h(a,v.Names.prefixCheck(l)[0]),v.Values.isCSSNullValue(o)&&v.Hooks.templates[c]&&(o=v.Hooks.templates[c][1])),i=v.Normalizations.registered[c]("extract",a,o)}if(!/^[\d-]/.test(i))if(g(a)&&g(a).isSVG&&v.Names.SVGAttribute(c))if(/^(height|width)$/i.test(c))try{i=a.getBBox()[c]}catch(p){i=0}else i=a.getAttribute(c);else i=h(a,v.Names.prefixCheck(c)[0]);return v.Values.isCSSNullValue(i)&&(i=0),t.debug>=2&&console.log("Get "+c+": "+i),i},setPropertyValue:function(a,c,d,e,f){var h=c;if("scroll"===c)f.container?f.container["scroll"+f.direction]=d:"Left"===f.direction?b.scrollTo(d,f.alternateValue):b.scrollTo(f.alternateValue,d);else if(v.Normalizations.registered[c]&&"transform"===v.Normalizations.registered[c]("name",a))v.Normalizations.registered[c]("inject",a,d),h="transform",d=g(a).transformCache[c];else{if(v.Hooks.registered[c]){var i=c,j=v.Hooks.getRoot(c);e=e||v.getPropertyValue(a,j),d=v.Hooks.injectValue(i,d,e),c=j}if(v.Normalizations.registered[c]&&(d=v.Normalizations.registered[c]("inject",a,d),c=v.Normalizations.registered[c]("name",a)),h=v.Names.prefixCheck(c)[0],8>=n)try{a.style[h]=d}catch(k){t.debug&&console.log("Browser does not support ["+d+"] for ["+h+"]")}else g(a)&&g(a).isSVG&&v.Names.SVGAttribute(c)?a.setAttribute(c,d):a.style[h]=d;t.debug>=2&&console.log("Set "+c+" ("+h+"): "+d)}return[h,d]},flushTransformCache:function(a){function b(b){return parseFloat(v.getPropertyValue(a,b))}var c="";if((n||t.State.isAndroid&&!t.State.isChrome)&&g(a).isSVG){var d={translate:[b("translateX"),b("translateY")],skewX:[b("skewX")],skewY:[b("skewY")],scale:1!==b("scale")?[b("scale"),b("scale")]:[b("scaleX"),b("scaleY")],rotate:[b("rotateZ"),0,0]};m.each(g(a).transformCache,function(a){/^translate/i.test(a)?a="translate":/^scale/i.test(a)?a="scale":/^rotate/i.test(a)&&(a="rotate"),d[a]&&(c+=a+"("+d[a].join(" ")+") ",delete d[a])})}else{var e,f;m.each(g(a).transformCache,function(b){return e=g(a).transformCache[b],"transformPerspective"===b?(f=e,!0):(9===n&&"rotateZ"===b&&(b="rotate"),void(c+=b+e+" "))}),f&&(c="perspective"+f+" "+c)}v.setPropertyValue(a,"transform",c)}};v.Hooks.register(),v.Normalizations.register(),t.hook=function(a,b,c){var e=d;return a=f(a),m.each(a,function(a,f){if(g(f)===d&&t.init(f),c===d)e===d&&(e=t.CSS.getPropertyValue(f,b));else{var h=t.CSS.setPropertyValue(f,b,c);"transform"===h[0]&&t.CSS.flushTransformCache(f),e=h}}),e};var w=function(){function a(){return h?B.promise||null:i}function e(){function a(a){function l(a,b){var c=d,e=d,g=d;return p.isArray(a)?(c=a[0],!p.isArray(a[1])&&/^[\d-]/.test(a[1])||p.isFunction(a[1])||v.RegEx.isHex.test(a[1])?g=a[1]:(p.isString(a[1])&&!v.RegEx.isHex.test(a[1])||p.isArray(a[1]))&&(e=b?a[1]:j(a[1],h.duration),a[2]!==d&&(g=a[2]))):c=a,b||(e=e||h.easing),p.isFunction(c)&&(c=c.call(f,y,x)),p.isFunction(g)&&(g=g.call(f,y,x)),[c||0,e,g]}function n(a,b){var c,d;return d=(b||"0").toString().toLowerCase().replace(/[%A-z]+$/,function(a){return c=a,""}),c||(c=v.Values.getUnitType(a)),[d,c]}function r(){var a={myParent:f.parentNode||c.body,position:v.getPropertyValue(f,"position"),fontSize:v.getPropertyValue(f,"fontSize")},d=a.position===I.lastPosition&&a.myParent===I.lastParent,e=a.fontSize===I.lastFontSize;I.lastParent=a.myParent,I.lastPosition=a.position,I.lastFontSize=a.fontSize;var h=100,i={};if(e&&d)i.emToPx=I.lastEmToPx,i.percentToPxWidth=I.lastPercentToPxWidth,i.percentToPxHeight=I.lastPercentToPxHeight;else{var j=g(f).isSVG?c.createElementNS("http://www.w3.org/2000/svg","rect"):c.createElement("div");t.init(j),a.myParent.appendChild(j),m.each(["overflow","overflowX","overflowY"],function(a,b){t.CSS.setPropertyValue(j,b,"hidden")}),t.CSS.setPropertyValue(j,"position",a.position),t.CSS.setPropertyValue(j,"fontSize",a.fontSize),t.CSS.setPropertyValue(j,"boxSizing","content-box"),m.each(["minWidth","maxWidth","width","minHeight","maxHeight","height"],function(a,b){t.CSS.setPropertyValue(j,b,h+"%")}),t.CSS.setPropertyValue(j,"paddingLeft",h+"em"),i.percentToPxWidth=I.lastPercentToPxWidth=(parseFloat(v.getPropertyValue(j,"width",null,!0))||1)/h,i.percentToPxHeight=I.lastPercentToPxHeight=(parseFloat(v.getPropertyValue(j,"height",null,!0))||1)/h,i.emToPx=I.lastEmToPx=(parseFloat(v.getPropertyValue(j,"paddingLeft"))||1)/h,a.myParent.removeChild(j)}return null===I.remToPx&&(I.remToPx=parseFloat(v.getPropertyValue(c.body,"fontSize"))||16),null===I.vwToPx&&(I.vwToPx=parseFloat(b.innerWidth)/100,I.vhToPx=parseFloat(b.innerHeight)/100),i.remToPx=I.remToPx,i.vwToPx=I.vwToPx,i.vhToPx=I.vhToPx,t.debug>=1&&console.log("Unit ratios: "+JSON.stringify(i),f),i}if(h.begin&&0===y)try{h.begin.call(o,o)}catch(u){setTimeout(function(){throw u},1)}if("scroll"===C){var w,z,A,D=/^x$/i.test(h.axis)?"Left":"Top",E=parseFloat(h.offset)||0;h.container?p.isWrapped(h.container)||p.isNode(h.container)?(h.container=h.container[0]||h.container,w=h.container["scroll"+D],A=w+m(f).position()[D.toLowerCase()]+E):h.container=null:(w=t.State.scrollAnchor[t.State["scrollProperty"+D]],z=t.State.scrollAnchor[t.State["scrollProperty"+("Left"===D?"Top":"Left")]],A=m(f).offset()[D.toLowerCase()]+E),i={scroll:{rootPropertyValue:!1,startValue:w,currentValue:w,endValue:A,unitType:"",easing:h.easing,scrollData:{container:h.container,direction:D,alternateValue:z}},element:f},t.debug&&console.log("tweensContainer (scroll): ",i.scroll,f)}else if("reverse"===C){if(!g(f).tweensContainer)return void m.dequeue(f,h.queue);"none"===g(f).opts.display&&(g(f).opts.display="auto"),"hidden"===g(f).opts.visibility&&(g(f).opts.visibility="visible"),g(f).opts.loop=!1,g(f).opts.begin=null,g(f).opts.complete=null,s.easing||delete h.easing,s.duration||delete h.duration,h=m.extend({},g(f).opts,h);var F=m.extend(!0,{},g(f).tweensContainer);for(var G in F)if("element"!==G){var H=F[G].startValue;F[G].startValue=F[G].currentValue=F[G].endValue,F[G].endValue=H,p.isEmptyObject(s)||(F[G].easing=h.easing),t.debug&&console.log("reverse tweensContainer ("+G+"): "+JSON.stringify(F[G]),f)}i=F}else if("start"===C){var F;g(f).tweensContainer&&g(f).isAnimating===!0&&(F=g(f).tweensContainer),m.each(q,function(a,b){if(RegExp("^"+v.Lists.colors.join("$|^")+"$").test(a)){var c=l(b,!0),e=c[0],f=c[1],g=c[2];if(v.RegEx.isHex.test(e)){for(var h=["Red","Green","Blue"],i=v.Values.hexToRgb(e),j=g?v.Values.hexToRgb(g):d,k=0;k<h.length;k++){var m=[i[k]];f&&m.push(f),j!==d&&m.push(j[k]),q[a+h[k]]=m}delete q[a]}}});for(var K in q){var L=l(q[K]),M=L[0],N=L[1],O=L[2];K=v.Names.camelCase(K);var P=v.Hooks.getRoot(K),Q=!1;if(g(f).isSVG||"tween"===P||v.Names.prefixCheck(P)[1]!==!1||v.Normalizations.registered[P]!==d){(h.display!==d&&null!==h.display&&"none"!==h.display||h.visibility!==d&&"hidden"!==h.visibility)&&/opacity|filter/.test(K)&&!O&&0!==M&&(O=0),h._cacheValues&&F&&F[K]?(O===d&&(O=F[K].endValue+F[K].unitType),Q=g(f).rootPropertyValueCache[P]):v.Hooks.registered[K]?O===d?(Q=v.getPropertyValue(f,P),O=v.getPropertyValue(f,K,Q)):Q=v.Hooks.templates[P][1]:O===d&&(O=v.getPropertyValue(f,K));var R,S,T,U=!1;if(R=n(K,O),O=R[0],T=R[1],R=n(K,M),M=R[0].replace(/^([+-\/*])=/,function(a,b){return U=b,""}),S=R[1],O=parseFloat(O)||0,M=parseFloat(M)||0,"%"===S&&(/^(fontSize|lineHeight)$/.test(K)?(M/=100,S="em"):/^scale/.test(K)?(M/=100,S=""):/(Red|Green|Blue)$/i.test(K)&&(M=M/100*255,S="")),/[\/*]/.test(U))S=T;else if(T!==S&&0!==O)if(0===M)S=T;else{e=e||r();var V=/margin|padding|left|right|width|text|word|letter/i.test(K)||/X$/.test(K)||"x"===K?"x":"y";
switch(T){case"%":O*="x"===V?e.percentToPxWidth:e.percentToPxHeight;break;case"px":break;default:O*=e[T+"ToPx"]}switch(S){case"%":O*=1/("x"===V?e.percentToPxWidth:e.percentToPxHeight);break;case"px":break;default:O*=1/e[S+"ToPx"]}}switch(U){case"+":M=O+M;break;case"-":M=O-M;break;case"*":M=O*M;break;case"/":M=O/M}i[K]={rootPropertyValue:Q,startValue:O,currentValue:O,endValue:M,unitType:S,easing:N},t.debug&&console.log("tweensContainer ("+K+"): "+JSON.stringify(i[K]),f)}else t.debug&&console.log("Skipping ["+P+"] due to a lack of browser support.")}i.element=f}i.element&&(v.Values.addClass(f,"velocity-animating"),J.push(i),""===h.queue&&(g(f).tweensContainer=i,g(f).opts=h),g(f).isAnimating=!0,y===x-1?(t.State.calls.push([J,o,h,null,B.resolver]),t.State.isTicking===!1&&(t.State.isTicking=!0,k())):y++)}var e,f=this,h=m.extend({},t.defaults,s),i={};switch(g(f)===d&&t.init(f),parseFloat(h.delay)&&h.queue!==!1&&m.queue(f,h.queue,function(a){t.velocityQueueEntryFlag=!0,g(f).delayTimer={setTimeout:setTimeout(a,parseFloat(h.delay)),next:a}}),h.duration.toString().toLowerCase()){case"fast":h.duration=200;break;case"normal":h.duration=r;break;case"slow":h.duration=600;break;default:h.duration=parseFloat(h.duration)||1}t.mock!==!1&&(t.mock===!0?h.duration=h.delay=1:(h.duration*=parseFloat(t.mock)||1,h.delay*=parseFloat(t.mock)||1)),h.easing=j(h.easing,h.duration),h.begin&&!p.isFunction(h.begin)&&(h.begin=null),h.progress&&!p.isFunction(h.progress)&&(h.progress=null),h.complete&&!p.isFunction(h.complete)&&(h.complete=null),h.display!==d&&null!==h.display&&(h.display=h.display.toString().toLowerCase(),"auto"===h.display&&(h.display=t.CSS.Values.getDisplayType(f))),h.visibility!==d&&null!==h.visibility&&(h.visibility=h.visibility.toString().toLowerCase()),h.mobileHA=h.mobileHA&&t.State.isMobile&&!t.State.isGingerbread,h.queue===!1?h.delay?setTimeout(a,h.delay):a():m.queue(f,h.queue,function(b,c){return c===!0?(B.promise&&B.resolver(o),!0):(t.velocityQueueEntryFlag=!0,void a(b))}),""!==h.queue&&"fx"!==h.queue||"inprogress"===m.queue(f)[0]||m.dequeue(f)}var h,i,n,o,q,s,u=arguments[0]&&(arguments[0].p||m.isPlainObject(arguments[0].properties)&&!arguments[0].properties.names||p.isString(arguments[0].properties));if(p.isWrapped(this)?(h=!1,n=0,o=this,i=this):(h=!0,n=1,o=u?arguments[0].elements||arguments[0].e:arguments[0]),o=f(o)){u?(q=arguments[0].properties||arguments[0].p,s=arguments[0].options||arguments[0].o):(q=arguments[n],s=arguments[n+1]);var x=o.length,y=0;if(!/^(stop|finish)$/i.test(q)&&!m.isPlainObject(s)){var z=n+1;s={};for(var A=z;A<arguments.length;A++)p.isArray(arguments[A])||!/^(fast|normal|slow)$/i.test(arguments[A])&&!/^\d/.test(arguments[A])?p.isString(arguments[A])||p.isArray(arguments[A])?s.easing=arguments[A]:p.isFunction(arguments[A])&&(s.complete=arguments[A]):s.duration=arguments[A]}var B={promise:null,resolver:null,rejecter:null};h&&t.Promise&&(B.promise=new t.Promise(function(a,b){B.resolver=a,B.rejecter=b}));var C;switch(q){case"scroll":C="scroll";break;case"reverse":C="reverse";break;case"finish":case"stop":m.each(o,function(a,b){g(b)&&g(b).delayTimer&&(clearTimeout(g(b).delayTimer.setTimeout),g(b).delayTimer.next&&g(b).delayTimer.next(),delete g(b).delayTimer)});var D=[];return m.each(t.State.calls,function(a,b){b&&m.each(b[1],function(c,e){var f=s===d?"":s;return f===!0||b[2].queue===f||s===d&&b[2].queue===!1?void m.each(o,function(c,d){d===e&&((s===!0||p.isString(s))&&(m.each(m.queue(d,p.isString(s)?s:""),function(a,b){p.isFunction(b)&&b(null,!0)}),m.queue(d,p.isString(s)?s:"",[])),"stop"===q?(g(d)&&g(d).tweensContainer&&f!==!1&&m.each(g(d).tweensContainer,function(a,b){b.endValue=b.currentValue}),D.push(a)):"finish"===q&&(b[2].duration=1))}):!0})}),"stop"===q&&(m.each(D,function(a,b){l(b,!0)}),B.promise&&B.resolver(o)),a();default:if(!m.isPlainObject(q)||p.isEmptyObject(q)){if(p.isString(q)&&t.Redirects[q]){var E=m.extend({},s),F=E.duration,G=E.delay||0;return E.backwards===!0&&(o=m.extend(!0,[],o).reverse()),m.each(o,function(a,b){parseFloat(E.stagger)?E.delay=G+parseFloat(E.stagger)*a:p.isFunction(E.stagger)&&(E.delay=G+E.stagger.call(b,a,x)),E.drag&&(E.duration=parseFloat(F)||(/^(callout|transition)/.test(q)?1e3:r),E.duration=Math.max(E.duration*(E.backwards?1-a/x:(a+1)/x),.75*E.duration,200)),t.Redirects[q].call(b,b,E||{},a,x,o,B.promise?B:d)}),a()}var H="Velocity: First argument ("+q+") was not a property map, a known action, or a registered redirect. Aborting.";return B.promise?B.rejecter(new Error(H)):console.log(H),a()}C="start"}var I={lastParent:null,lastPosition:null,lastFontSize:null,lastPercentToPxWidth:null,lastPercentToPxHeight:null,lastEmToPx:null,remToPx:null,vwToPx:null,vhToPx:null},J=[];m.each(o,function(a,b){p.isNode(b)&&e.call(b)});var K,E=m.extend({},t.defaults,s);if(E.loop=parseInt(E.loop),K=2*E.loop-1,E.loop)for(var L=0;K>L;L++){var M={delay:E.delay,progress:E.progress};L===K-1&&(M.display=E.display,M.visibility=E.visibility,M.complete=E.complete),w(o,"reverse",M)}return a()}};t=m.extend(w,t),t.animate=w;var x=b.requestAnimationFrame||o;return t.State.isMobile||c.hidden===d||c.addEventListener("visibilitychange",function(){c.hidden?(x=function(a){return setTimeout(function(){a(!0)},16)},k()):x=b.requestAnimationFrame||o}),a.Velocity=t,a!==b&&(a.fn.velocity=w,a.fn.velocity.defaults=t.defaults),m.each(["Down","Up"],function(a,b){t.Redirects["slide"+b]=function(a,c,e,f,g,h){var i=m.extend({},c),j=i.begin,k=i.complete,l={height:"",marginTop:"",marginBottom:"",paddingTop:"",paddingBottom:""},n={};i.display===d&&(i.display="Down"===b?"inline"===t.CSS.Values.getDisplayType(a)?"inline-block":"block":"none"),i.begin=function(){j&&j.call(g,g);for(var c in l){n[c]=a.style[c];var d=t.CSS.getPropertyValue(a,c);l[c]="Down"===b?[d,0]:[0,d]}n.overflow=a.style.overflow,a.style.overflow="hidden"},i.complete=function(){for(var b in n)a.style[b]=n[b];k&&k.call(g,g),h&&h.resolver(g)},t(a,l,i)}}),m.each(["In","Out"],function(a,b){t.Redirects["fade"+b]=function(a,c,e,f,g,h){var i=m.extend({},c),j={opacity:"In"===b?1:0},k=i.complete;i.complete=e!==f-1?i.begin=null:function(){k&&k.call(g,g),h&&h.resolver(g)},i.display===d&&(i.display="In"===b?"auto":"none"),t(this,j,i)}}),t}(window.jQuery||window.Zepto||window,window,document)})),!function(a,b,c,d){"use strict";function e(a,b,c){return setTimeout(k(a,c),b)}function f(a,b,c){return Array.isArray(a)?(g(a,c[b],c),!0):!1}function g(a,b,c){var e;if(a)if(a.forEach)a.forEach(b,c);else if(a.length!==d)for(e=0;e<a.length;)b.call(c,a[e],e,a),e++;else for(e in a)a.hasOwnProperty(e)&&b.call(c,a[e],e,a)}function h(a,b,c){for(var e=Object.keys(b),f=0;f<e.length;)(!c||c&&a[e[f]]===d)&&(a[e[f]]=b[e[f]]),f++;return a}function i(a,b){return h(a,b,!0)}function j(a,b,c){var d,e=b.prototype;d=a.prototype=Object.create(e),d.constructor=a,d._super=e,c&&h(d,c)}function k(a,b){return function(){return a.apply(b,arguments)}}function l(a,b){return typeof a==ka?a.apply(b?b[0]||d:d,b):a}function m(a,b){return a===d?b:a}function n(a,b,c){g(r(b),function(b){a.addEventListener(b,c,!1)})}function o(a,b,c){g(r(b),function(b){a.removeEventListener(b,c,!1)})}function p(a,b){for(;a;){if(a==b)return!0;a=a.parentNode}return!1}function q(a,b){return a.indexOf(b)>-1}function r(a){return a.trim().split(/\s+/g)}function s(a,b,c){if(a.indexOf&&!c)return a.indexOf(b);for(var d=0;d<a.length;){if(c&&a[d][c]==b||!c&&a[d]===b)return d;d++}return-1}function t(a){return Array.prototype.slice.call(a,0)}function u(a,b,c){for(var d=[],e=[],f=0;f<a.length;){var g=b?a[f][b]:a[f];s(e,g)<0&&d.push(a[f]),e[f]=g,f++}return c&&(d=b?d.sort(function(a,c){return a[b]>c[b]}):d.sort()),d}function v(a,b){for(var c,e,f=b[0].toUpperCase()+b.slice(1),g=0;g<ia.length;){if(c=ia[g],e=c?c+f:b,e in a)return e;g++}return d}function w(){return oa++}function x(a){var b=a.ownerDocument;return b.defaultView||b.parentWindow}function y(a,b){var c=this;this.manager=a,this.callback=b,this.element=a.element,this.target=a.options.inputTarget,this.domHandler=function(b){l(a.options.enable,[a])&&c.handler(b)},this.init()}function z(a){var b,c=a.options.inputClass;return new(b=c?c:ra?N:sa?Q:qa?S:M)(a,A)}function A(a,b,c){var d=c.pointers.length,e=c.changedPointers.length,f=b&ya&&0===d-e,g=b&(Aa|Ba)&&0===d-e;c.isFirst=!!f,c.isFinal=!!g,f&&(a.session={}),c.eventType=b,B(a,c),a.emit("hammer.input",c),a.recognize(c),a.session.prevInput=c}function B(a,b){var c=a.session,d=b.pointers,e=d.length;c.firstInput||(c.firstInput=E(b)),e>1&&!c.firstMultiple?c.firstMultiple=E(b):1===e&&(c.firstMultiple=!1);var f=c.firstInput,g=c.firstMultiple,h=g?g.center:f.center,i=b.center=F(d);b.timeStamp=na(),b.deltaTime=b.timeStamp-f.timeStamp,b.angle=J(h,i),b.distance=I(h,i),C(c,b),b.offsetDirection=H(b.deltaX,b.deltaY),b.scale=g?L(g.pointers,d):1,b.rotation=g?K(g.pointers,d):0,D(c,b);var j=a.element;p(b.srcEvent.target,j)&&(j=b.srcEvent.target),b.target=j}function C(a,b){var c=b.center,d=a.offsetDelta||{},e=a.prevDelta||{},f=a.prevInput||{};(b.eventType===ya||f.eventType===Aa)&&(e=a.prevDelta={x:f.deltaX||0,y:f.deltaY||0},d=a.offsetDelta={x:c.x,y:c.y}),b.deltaX=e.x+(c.x-d.x),b.deltaY=e.y+(c.y-d.y)}function D(a,b){var c,e,f,g,h=a.lastInterval||b,i=b.timeStamp-h.timeStamp;if(b.eventType!=Ba&&(i>xa||h.velocity===d)){var j=h.deltaX-b.deltaX,k=h.deltaY-b.deltaY,l=G(i,j,k);e=l.x,f=l.y,c=ma(l.x)>ma(l.y)?l.x:l.y,g=H(j,k),a.lastInterval=b}else c=h.velocity,e=h.velocityX,f=h.velocityY,g=h.direction;b.velocity=c,b.velocityX=e,b.velocityY=f,b.direction=g}function E(a){for(var b=[],c=0;c<a.pointers.length;)b[c]={clientX:la(a.pointers[c].clientX),clientY:la(a.pointers[c].clientY)},c++;return{timeStamp:na(),pointers:b,center:F(b),deltaX:a.deltaX,deltaY:a.deltaY}}function F(a){var b=a.length;if(1===b)return{x:la(a[0].clientX),y:la(a[0].clientY)};for(var c=0,d=0,e=0;b>e;)c+=a[e].clientX,d+=a[e].clientY,e++;return{x:la(c/b),y:la(d/b)}}function G(a,b,c){return{x:b/a||0,y:c/a||0}}function H(a,b){return a===b?Ca:ma(a)>=ma(b)?a>0?Da:Ea:b>0?Fa:Ga}function I(a,b,c){c||(c=Ka);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return Math.sqrt(d*d+e*e)}function J(a,b,c){c||(c=Ka);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return 180*Math.atan2(e,d)/Math.PI}function K(a,b){return J(b[1],b[0],La)-J(a[1],a[0],La)}function L(a,b){return I(b[0],b[1],La)/I(a[0],a[1],La)}function M(){this.evEl=Na,this.evWin=Oa,this.allow=!0,this.pressed=!1,y.apply(this,arguments)}function N(){this.evEl=Ra,this.evWin=Sa,y.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function O(){this.evTarget=Ua,this.evWin=Va,this.started=!1,y.apply(this,arguments)}function P(a,b){var c=t(a.touches),d=t(a.changedTouches);return b&(Aa|Ba)&&(c=u(c.concat(d),"identifier",!0)),[c,d]}function Q(){this.evTarget=Xa,this.targetIds={},y.apply(this,arguments)}function R(a,b){var c=t(a.touches),d=this.targetIds;if(b&(ya|za)&&1===c.length)return d[c[0].identifier]=!0,[c,c];var e,f,g=t(a.changedTouches),h=[],i=this.target;if(f=c.filter(function(a){return p(a.target,i)}),b===ya)for(e=0;e<f.length;)d[f[e].identifier]=!0,e++;for(e=0;e<g.length;)d[g[e].identifier]&&h.push(g[e]),b&(Aa|Ba)&&delete d[g[e].identifier],e++;return h.length?[u(f.concat(h),"identifier",!0),h]:void 0}function S(){y.apply(this,arguments);var a=k(this.handler,this);this.touch=new Q(this.manager,a),this.mouse=new M(this.manager,a)}function T(a,b){this.manager=a,this.set(b)}function U(a){if(q(a,bb))return bb;var b=q(a,cb),c=q(a,db);return b&&c?cb+" "+db:b||c?b?cb:db:q(a,ab)?ab:_a}function V(a){this.id=w(),this.manager=null,this.options=i(a||{},this.defaults),this.options.enable=m(this.options.enable,!0),this.state=eb,this.simultaneous={},this.requireFail=[]}function W(a){return a&jb?"cancel":a&hb?"end":a&gb?"move":a&fb?"start":""}function X(a){return a==Ga?"down":a==Fa?"up":a==Da?"left":a==Ea?"right":""}function Y(a,b){var c=b.manager;return c?c.get(a):a}function Z(){V.apply(this,arguments)}function $(){Z.apply(this,arguments),this.pX=null,this.pY=null}function _(){Z.apply(this,arguments)}function aa(){V.apply(this,arguments),this._timer=null,this._input=null}function ba(){Z.apply(this,arguments)}function ca(){Z.apply(this,arguments)}function da(){V.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ea(a,b){return b=b||{},b.recognizers=m(b.recognizers,ea.defaults.preset),new fa(a,b)}function fa(a,b){b=b||{},this.options=i(b,ea.defaults),this.options.inputTarget=this.options.inputTarget||a,this.handlers={},this.session={},this.recognizers=[],this.element=a,this.input=z(this),this.touchAction=new T(this,this.options.touchAction),ga(this,!0),g(b.recognizers,function(a){var b=this.add(new a[0](a[1]));a[2]&&b.recognizeWith(a[2]),a[3]&&b.requireFailure(a[3])},this)}function ga(a,b){var c=a.element;g(a.options.cssProps,function(a,d){c.style[v(c.style,d)]=b?a:""})}function ha(a,c){var d=b.createEvent("Event");d.initEvent(a,!0,!0),d.gesture=c,c.target.dispatchEvent(d)}var ia=["","webkit","moz","MS","ms","o"],ja=b.createElement("div"),ka="function",la=Math.round,ma=Math.abs,na=Date.now,oa=1,pa=/mobile|tablet|ip(ad|hone|od)|android/i,qa="ontouchstart"in a,ra=v(a,"PointerEvent")!==d,sa=qa&&pa.test(navigator.userAgent),ta="touch",ua="pen",va="mouse",wa="kinect",xa=25,ya=1,za=2,Aa=4,Ba=8,Ca=1,Da=2,Ea=4,Fa=8,Ga=16,Ha=Da|Ea,Ia=Fa|Ga,Ja=Ha|Ia,Ka=["x","y"],La=["clientX","clientY"];y.prototype={handler:function(){},init:function(){this.evEl&&n(this.element,this.evEl,this.domHandler),this.evTarget&&n(this.target,this.evTarget,this.domHandler),this.evWin&&n(x(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&o(this.element,this.evEl,this.domHandler),this.evTarget&&o(this.target,this.evTarget,this.domHandler),this.evWin&&o(x(this.element),this.evWin,this.domHandler)}};var Ma={mousedown:ya,mousemove:za,mouseup:Aa},Na="mousedown",Oa="mousemove mouseup";j(M,y,{handler:function(a){var b=Ma[a.type];b&ya&&0===a.button&&(this.pressed=!0),b&za&&1!==a.which&&(b=Aa),this.pressed&&this.allow&&(b&Aa&&(this.pressed=!1),this.callback(this.manager,b,{pointers:[a],changedPointers:[a],pointerType:va,srcEvent:a}))}});var Pa={pointerdown:ya,pointermove:za,pointerup:Aa,pointercancel:Ba,pointerout:Ba},Qa={2:ta,3:ua,4:va,5:wa},Ra="pointerdown",Sa="pointermove pointerup pointercancel";a.MSPointerEvent&&(Ra="MSPointerDown",Sa="MSPointerMove MSPointerUp MSPointerCancel"),j(N,y,{handler:function(a){var b=this.store,c=!1,d=a.type.toLowerCase().replace("ms",""),e=Pa[d],f=Qa[a.pointerType]||a.pointerType,g=f==ta,h=s(b,a.pointerId,"pointerId");e&ya&&(0===a.button||g)?0>h&&(b.push(a),h=b.length-1):e&(Aa|Ba)&&(c=!0),0>h||(b[h]=a,this.callback(this.manager,e,{pointers:b,changedPointers:[a],pointerType:f,srcEvent:a}),c&&b.splice(h,1))}});var Ta={touchstart:ya,touchmove:za,touchend:Aa,touchcancel:Ba},Ua="touchstart",Va="touchstart touchmove touchend touchcancel";j(O,y,{handler:function(a){var b=Ta[a.type];if(b===ya&&(this.started=!0),this.started){var c=P.call(this,a,b);b&(Aa|Ba)&&0===c[0].length-c[1].length&&(this.started=!1),this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:ta,srcEvent:a})}}});var Wa={touchstart:ya,touchmove:za,touchend:Aa,touchcancel:Ba},Xa="touchstart touchmove touchend touchcancel";j(Q,y,{handler:function(a){var b=Wa[a.type],c=R.call(this,a,b);c&&this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:ta,srcEvent:a})}}),j(S,y,{handler:function(a,b,c){var d=c.pointerType==ta,e=c.pointerType==va;if(d)this.mouse.allow=!1;else if(e&&!this.mouse.allow)return;b&(Aa|Ba)&&(this.mouse.allow=!0),this.callback(a,b,c)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Ya=v(ja.style,"touchAction"),Za=Ya!==d,$a="compute",_a="auto",ab="manipulation",bb="none",cb="pan-x",db="pan-y";T.prototype={set:function(a){a==$a&&(a=this.compute()),Za&&(this.manager.element.style[Ya]=a),this.actions=a.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var a=[];return g(this.manager.recognizers,function(b){l(b.options.enable,[b])&&(a=a.concat(b.getTouchAction()))}),U(a.join(" "))},preventDefaults:function(a){if(!Za){var b=a.srcEvent,c=a.offsetDirection;if(this.manager.session.prevented)return void b.preventDefault();var d=this.actions,e=q(d,bb),f=q(d,db),g=q(d,cb);return e||f&&c&Ha||g&&c&Ia?this.preventSrc(b):void 0}},preventSrc:function(a){this.manager.session.prevented=!0,a.preventDefault()}};var eb=1,fb=2,gb=4,hb=8,ib=hb,jb=16,kb=32;V.prototype={defaults:{},set:function(a){return h(this.options,a),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(a){if(f(a,"recognizeWith",this))return this;var b=this.simultaneous;return a=Y(a,this),b[a.id]||(b[a.id]=a,a.recognizeWith(this)),this},dropRecognizeWith:function(a){return f(a,"dropRecognizeWith",this)?this:(a=Y(a,this),delete this.simultaneous[a.id],this)},requireFailure:function(a){if(f(a,"requireFailure",this))return this;var b=this.requireFail;return a=Y(a,this),-1===s(b,a)&&(b.push(a),a.requireFailure(this)),this},dropRequireFailure:function(a){if(f(a,"dropRequireFailure",this))return this;a=Y(a,this);var b=s(this.requireFail,a);return b>-1&&this.requireFail.splice(b,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(a){return!!this.simultaneous[a.id]},emit:function(a){function b(b){c.manager.emit(c.options.event+(b?W(d):""),a)}var c=this,d=this.state;hb>d&&b(!0),b(),d>=hb&&b(!0)},tryEmit:function(a){return this.canEmit()?this.emit(a):void(this.state=kb)},canEmit:function(){for(var a=0;a<this.requireFail.length;){if(!(this.requireFail[a].state&(kb|eb)))return!1;a++}return!0},recognize:function(a){var b=h({},a);return l(this.options.enable,[this,b])?(this.state&(ib|jb|kb)&&(this.state=eb),this.state=this.process(b),void(this.state&(fb|gb|hb|jb)&&this.tryEmit(b))):(this.reset(),void(this.state=kb))},process:function(){},getTouchAction:function(){},reset:function(){}},j(Z,V,{defaults:{pointers:1},attrTest:function(a){var b=this.options.pointers;return 0===b||a.pointers.length===b},process:function(a){var b=this.state,c=a.eventType,d=b&(fb|gb),e=this.attrTest(a);return d&&(c&Ba||!e)?b|jb:d||e?c&Aa?b|hb:b&fb?b|gb:fb:kb}}),j($,Z,{defaults:{event:"pan",threshold:10,pointers:1,direction:Ja},getTouchAction:function(){var a=this.options.direction,b=[];return a&Ha&&b.push(db),a&Ia&&b.push(cb),b},directionTest:function(a){var b=this.options,c=!0,d=a.distance,e=a.direction,f=a.deltaX,g=a.deltaY;return e&b.direction||(b.direction&Ha?(e=0===f?Ca:0>f?Da:Ea,c=f!=this.pX,d=Math.abs(a.deltaX)):(e=0===g?Ca:0>g?Fa:Ga,c=g!=this.pY,d=Math.abs(a.deltaY))),a.direction=e,c&&d>b.threshold&&e&b.direction},attrTest:function(a){return Z.prototype.attrTest.call(this,a)&&(this.state&fb||!(this.state&fb)&&this.directionTest(a))},emit:function(a){this.pX=a.deltaX,this.pY=a.deltaY;var b=X(a.direction);b&&this.manager.emit(this.options.event+b,a),this._super.emit.call(this,a)}}),j(_,Z,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[bb]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.scale-1)>this.options.threshold||this.state&fb)},emit:function(a){if(this._super.emit.call(this,a),1!==a.scale){var b=a.scale<1?"in":"out";this.manager.emit(this.options.event+b,a)}}}),j(aa,V,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return[_a]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime>b.time;if(this._input=a,!d||!c||a.eventType&(Aa|Ba)&&!f)this.reset();else if(a.eventType&ya)this.reset(),this._timer=e(function(){this.state=ib,this.tryEmit()},b.time,this);else if(a.eventType&Aa)return ib;return kb},reset:function(){clearTimeout(this._timer)},emit:function(a){this.state===ib&&(a&&a.eventType&Aa?this.manager.emit(this.options.event+"up",a):(this._input.timeStamp=na(),this.manager.emit(this.options.event,this._input)))}}),j(ba,Z,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[bb]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.rotation)>this.options.threshold||this.state&fb)}}),j(ca,Z,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:Ha|Ia,pointers:1},getTouchAction:function(){return $.prototype.getTouchAction.call(this)},attrTest:function(a){var b,c=this.options.direction;return c&(Ha|Ia)?b=a.velocity:c&Ha?b=a.velocityX:c&Ia&&(b=a.velocityY),this._super.attrTest.call(this,a)&&c&a.direction&&a.distance>this.options.threshold&&ma(b)>this.options.velocity&&a.eventType&Aa},emit:function(a){var b=X(a.direction);b&&this.manager.emit(this.options.event+b,a),this.manager.emit(this.options.event,a)}}),j(da,V,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[ab]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime<b.time;if(this.reset(),a.eventType&ya&&0===this.count)return this.failTimeout();if(d&&f&&c){if(a.eventType!=Aa)return this.failTimeout();var g=this.pTime?a.timeStamp-this.pTime<b.interval:!0,h=!this.pCenter||I(this.pCenter,a.center)<b.posThreshold;this.pTime=a.timeStamp,this.pCenter=a.center,h&&g?this.count+=1:this.count=1,this._input=a;var i=this.count%b.taps;if(0===i)return this.hasRequireFailures()?(this._timer=e(function(){this.state=ib,this.tryEmit()},b.interval,this),fb):ib}return kb},failTimeout:function(){return this._timer=e(function(){this.state=kb},this.options.interval,this),kb},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ib&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ea.VERSION="2.0.4",ea.defaults={domEvents:!1,touchAction:$a,enable:!0,inputTarget:null,inputClass:null,preset:[[ba,{enable:!1}],[_,{enable:!1},["rotate"]],[ca,{direction:Ha}],[$,{direction:Ha},["swipe"]],[da],[da,{event:"doubletap",taps:2},["tap"]],[aa]],cssProps:{userSelect:"default",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var lb=1,mb=2;fa.prototype={set:function(a){return h(this.options,a),a.touchAction&&this.touchAction.update(),a.inputTarget&&(this.input.destroy(),this.input.target=a.inputTarget,this.input.init()),this},stop:function(a){this.session.stopped=a?mb:lb},recognize:function(a){var b=this.session;if(!b.stopped){this.touchAction.preventDefaults(a);var c,d=this.recognizers,e=b.curRecognizer;(!e||e&&e.state&ib)&&(e=b.curRecognizer=null);for(var f=0;f<d.length;)c=d[f],b.stopped===mb||e&&c!=e&&!c.canRecognizeWith(e)?c.reset():c.recognize(a),!e&&c.state&(fb|gb|hb)&&(e=b.curRecognizer=c),f++}},get:function(a){if(a instanceof V)return a;for(var b=this.recognizers,c=0;c<b.length;c++)if(b[c].options.event==a)return b[c];return null},add:function(a){if(f(a,"add",this))return this;var b=this.get(a.options.event);return b&&this.remove(b),this.recognizers.push(a),a.manager=this,this.touchAction.update(),a},remove:function(a){if(f(a,"remove",this))return this;var b=this.recognizers;return a=this.get(a),b.splice(s(b,a),1),this.touchAction.update(),this},on:function(a,b){var c=this.handlers;return g(r(a),function(a){c[a]=c[a]||[],c[a].push(b)}),this},off:function(a,b){var c=this.handlers;return g(r(a),function(a){b?c[a].splice(s(c[a],b),1):delete c[a]}),this},emit:function(a,b){this.options.domEvents&&ha(a,b);var c=this.handlers[a]&&this.handlers[a].slice();if(c&&c.length){b.type=a,b.preventDefault=function(){b.srcEvent.preventDefault()};for(var d=0;d<c.length;)c[d](b),d++}},destroy:function(){this.element&&ga(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},h(ea,{INPUT_START:ya,INPUT_MOVE:za,INPUT_END:Aa,INPUT_CANCEL:Ba,STATE_POSSIBLE:eb,STATE_BEGAN:fb,STATE_CHANGED:gb,STATE_ENDED:hb,STATE_RECOGNIZED:ib,STATE_CANCELLED:jb,STATE_FAILED:kb,DIRECTION_NONE:Ca,DIRECTION_LEFT:Da,DIRECTION_RIGHT:Ea,DIRECTION_UP:Fa,DIRECTION_DOWN:Ga,DIRECTION_HORIZONTAL:Ha,DIRECTION_VERTICAL:Ia,DIRECTION_ALL:Ja,Manager:fa,Input:y,TouchAction:T,TouchInput:Q,MouseInput:M,PointerEventInput:N,TouchMouseInput:S,SingleTouchInput:O,Recognizer:V,AttrRecognizer:Z,Tap:da,Pan:$,Swipe:ca,Pinch:_,Rotate:ba,Press:aa,on:n,off:o,each:g,merge:i,extend:h,inherit:j,bindFn:k,prefixed:v}),typeof define==ka&&define.amd?define(function(){return ea}):"undefined"!=typeof module&&module.exports?module.exports=ea:a[c]=ea}(window,document,"Hammer"),function(a){"function"==typeof define&&define.amd?define(["jquery","hammerjs"],a):"object"==typeof exports?a(require("jquery"),require("hammerjs")):a(jQuery,Hammer)}(function(a,b){function c(c,d){var e=a(c);e.data("hammer")||e.data("hammer",new b(e[0],d))}a.fn.hammer=function(a){return this.each(function(){c(this,a)})},b.Manager.prototype.emit=function(b){return function(c,d){b.call(this,c,d),a(this.element).trigger({type:c,gesture:d})}}(b.Manager.prototype.emit)}),function(a){a.Package?Materialize={}:a.Materialize={}}(window),function(a){for(var b=0,c=["webkit","moz"],d=a.requestAnimationFrame,e=a.cancelAnimationFrame,f=c.length;--f>=0&&!d;)d=a[c[f]+"RequestAnimationFrame"],e=a[c[f]+"CancelRequestAnimationFrame"];d&&e||(d=function(a){var c=+Date.now(),d=Math.max(b+16,c);return setTimeout(function(){a(b=d)},d-c)},e=clearTimeout),a.requestAnimationFrame=d,a.cancelAnimationFrame=e}(window),Materialize.guid=function(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()}}(),Materialize.escapeHash=function(a){return a.replace(/(:|\.|\[|\]|,|=)/g,"\\$1")},Materialize.elementOrParentIsFixed=function(a){var b=$(a),c=b.add(b.parents()),d=!1;return c.each(function(){return"fixed"===$(this).css("position")?(d=!0,!1):void 0}),d};var Vel;Vel=jQuery?jQuery.Velocity:$?$.Velocity:Velocity,function(a){a.fn.collapsible=function(b){var c={accordion:void 0,onOpen:void 0,onClose:void 0};return b=a.extend(c,b),this.each(function(){function c(b){j=i.find("> li > .collapsible-header"),b.hasClass("active")?b.parent().addClass("active"):b.parent().removeClass("active"),b.parent().hasClass("active")?b.siblings(".collapsible-body").stop(!0,!1).slideDown({duration:350,easing:"easeOutQuart",queue:!1,complete:function(){a(this).css("height","")}}):b.siblings(".collapsible-body").stop(!0,!1).slideUp({duration:350,easing:"easeOutQuart",queue:!1,complete:function(){a(this).css("height","")}}),j.not(b).removeClass("active").parent().removeClass("active"),j.not(b).parent().children(".collapsible-body").stop(!0,!1).each(function(){a(this).is(":visible")&&a(this).slideUp({duration:350,easing:"easeOutQuart",queue:!1,complete:function(){a(this).css("height",""),f(a(this).siblings(".collapsible-header"))}})})}function d(b){b.hasClass("active")?b.parent().addClass("active"):b.parent().removeClass("active"),b.parent().hasClass("active")?b.siblings(".collapsible-body").stop(!0,!1).slideDown({duration:350,easing:"easeOutQuart",queue:!1,complete:function(){a(this).css("height","")}}):b.siblings(".collapsible-body").stop(!0,!1).slideUp({duration:350,easing:"easeOutQuart",queue:!1,complete:function(){a(this).css("height","")}})}function e(a){b.accordion||"accordion"===k||void 0===k?c(a):d(a),f(a)}function f(a){a.hasClass("active")?"function"==typeof b.onOpen&&b.onOpen.call(this,a.parent()):"function"==typeof b.onClose&&b.onClose.call(this,a.parent())}function g(a){var b=h(a);return b.length>0}function h(a){return a.closest("li > .collapsible-header")}var i=a(this),j=a(this).find("> li > .collapsible-header"),k=i.data("collapsible");i.off("click.collapse","> li > .collapsible-header"),j.off("click.collapse"),i.on("click.collapse","> li > .collapsible-header",function(b){var c=a(b.target);g(c)&&(c=h(c)),c.toggleClass("active"),e(c)}),b.accordion||"accordion"===k||void 0===k?e(j.filter(".active").first()):j.filter(".active").each(function(){e(a(this))})})},a(document).ready(function(){a(".collapsible").collapsible()})}(jQuery),function(a){a.fn.scrollTo=function(b){return a(this).scrollTop(a(this).scrollTop()-a(this).offset().top+a(b).offset().top),this},a.fn.dropdown=function(b){var c={inDuration:300,outDuration:225,constrain_width:!0,hover:!1,gutter:0,belowOrigin:!1,alignment:"left",stopPropagation:!1};return"open"===b?(this.each(function(){a(this).trigger("open")}),!1):"close"===b?(this.each(function(){a(this).trigger("close")}),!1):void this.each(function(){function d(){void 0!==g.data("induration")&&(h.inDuration=g.data("induration")),void 0!==g.data("outduration")&&(h.outDuration=g.data("outduration")),void 0!==g.data("constrainwidth")&&(h.constrain_width=g.data("constrainwidth")),void 0!==g.data("hover")&&(h.hover=g.data("hover")),void 0!==g.data("gutter")&&(h.gutter=g.data("gutter")),void 0!==g.data("beloworigin")&&(h.belowOrigin=g.data("beloworigin")),void 0!==g.data("alignment")&&(h.alignment=g.data("alignment")),void 0!==g.data("stoppropagation")&&(h.stopPropagation=g.data("stoppropagation"))}function e(b){"focus"===b&&(i=!0),d(),j.addClass("active"),g.addClass("active"),h.constrain_width===!0?j.css("width",g.outerWidth()):j.css("white-space","nowrap");var c=window.innerHeight,e=g.innerHeight(),f=g.offset().left,k=g.offset().top-a(window).scrollTop(),l=h.alignment,m=0,n=0,o=0;h.belowOrigin===!0&&(o=e);var p=0,q=0,r=g.parent();if(r.is("body")||(r[0].scrollHeight>r[0].clientHeight&&(p=r[0].scrollTop),r[0].scrollWidth>r[0].clientWidth&&(q=r[0].scrollLeft)),f+j.innerWidth()>a(window).width()?l="right":f-j.innerWidth()+g.innerWidth()<0&&(l="left"),k+j.innerHeight()>c)if(k+e-j.innerHeight()<0){var s=c-k-o;j.css("max-height",s)}else o||(o+=e),o-=j.innerHeight();if("left"===l)m=h.gutter,n=g.position().left+m;else if("right"===l){var t=g.position().left+g.outerWidth()-j.outerWidth();m=-h.gutter,n=t+m}j.css({position:"absolute",top:g.position().top+o+p,left:n+q}),j.stop(!0,!0).css("opacity",0).slideDown({queue:!1,duration:h.inDuration,easing:"easeOutCubic",complete:function(){a(this).css("height","")}}).animate({opacity:1},{queue:!1,duration:h.inDuration,easing:"easeOutSine"})}function f(){i=!1,j.fadeOut(h.outDuration),j.removeClass("active"),g.removeClass("active"),setTimeout(function(){j.css("max-height","")},h.outDuration)}var g=a(this),h=a.extend({},c,b),i=!1,j=a("#"+g.attr("data-activates"));if(d(),g.after(j),h.hover){var k=!1;g.unbind("click."+g.attr("id")),g.on("mouseenter",function(a){k===!1&&(e(),k=!0)}),g.on("mouseleave",function(b){var c=b.toElement||b.relatedTarget;a(c).closest(".dropdown-content").is(j)||(j.stop(!0,!0),f(),k=!1)}),j.on("mouseleave",function(b){var c=b.toElement||b.relatedTarget;a(c).closest(".dropdown-button").is(g)||(j.stop(!0,!0),f(),k=!1)})}else g.unbind("click."+g.attr("id")),g.bind("click."+g.attr("id"),function(b){i||(g[0]!=b.currentTarget||g.hasClass("active")||0!==a(b.target).closest(".dropdown-content").length?g.hasClass("active")&&(f(),a(document).unbind("click."+j.attr("id")+" touchstart."+j.attr("id"))):(b.preventDefault(),h.stopPropagation&&b.stopPropagation(),e("click")),j.hasClass("active")&&a(document).bind("click."+j.attr("id")+" touchstart."+j.attr("id"),function(b){j.is(b.target)||g.is(b.target)||g.find(b.target).length||(f(),a(document).unbind("click."+j.attr("id")+" touchstart."+j.attr("id")))}))});g.on("open",function(a,b){e(b)}),g.on("close",f)})},a(document).ready(function(){a(".dropdown-button").dropdown()})}(jQuery),function(a){var b=0,c=0,d=function(){return c++,"materialize-modal-overlay-"+c},e={init:function(c){var e={opacity:.5,in_duration:350,out_duration:250,ready:void 0,complete:void 0,dismissible:!0,starting_top:"4%",ending_top:"10%"};return c=a.extend(e,c),this.each(function(){var e=a(this),f=a(this).attr("id")||"#"+a(this).data("target"),g=function(){var d=e.data("overlay-id"),f=a("#"+d);e.removeClass("open"),a("body").css({overflow:"",width:""}),e.find(".modal-close").off("click.close"),a(document).off("keyup.modal"+d),f.velocity({opacity:0},{duration:c.out_duration,queue:!1,ease:"easeOutQuart"});var g={
duration:c.out_duration,queue:!1,ease:"easeOutCubic",complete:function(){a(this).css({display:"none"}),"function"==typeof c.complete&&c.complete.call(this,e),f.remove(),b--}};e.hasClass("bottom-sheet")?e.velocity({bottom:"-100%",opacity:0},g):e.velocity({top:c.starting_top,opacity:0,scaleX:.7},g)},h=function(f){var h=a("body"),i=h.innerWidth();if(h.css("overflow","hidden"),h.width(i),!e.hasClass("open")){var j=d(),k=a('<div class="modal-overlay"></div>');lStack=++b,k.attr("id",j).css("z-index",1e3+2*lStack),e.data("overlay-id",j).css("z-index",1e3+2*lStack+1),e.addClass("open"),a("body").append(k),c.dismissible&&(k.click(function(){g()}),a(document).on("keyup.modal"+j,function(a){27===a.keyCode&&g()})),e.find(".modal-close").on("click.close",function(a){g()}),k.css({display:"block",opacity:0}),e.css({display:"block",opacity:0}),k.velocity({opacity:c.opacity},{duration:c.in_duration,queue:!1,ease:"easeOutCubic"}),e.data("associated-overlay",k[0]);var l={duration:c.in_duration,queue:!1,ease:"easeOutCubic",complete:function(){"function"==typeof c.ready&&c.ready.call(this,e,f)}};e.hasClass("bottom-sheet")?e.velocity({bottom:"0",opacity:1},l):(a.Velocity.hook(e,"scaleX",.7),e.css({top:c.starting_top}),e.velocity({top:c.ending_top,opacity:1,scaleX:"1"},l))}};a(document).off("click.modalTrigger",'a[href="#'+f+'"], [data-target="'+f+'"]'),a(this).off("openModal"),a(this).off("closeModal"),a(document).on("click.modalTrigger",'a[href="#'+f+'"], [data-target="'+f+'"]',function(b){c.starting_top=(a(this).offset().top-a(window).scrollTop())/1.15,h(a(this)),b.preventDefault()}),a(this).on("openModal",function(){a(this).attr("href")||"#"+a(this).data("target");h()}),a(this).on("closeModal",function(){g()})})},open:function(){a(this).trigger("openModal")},close:function(){a(this).trigger("closeModal")}};a.fn.modal=function(b){return e[b]?e[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?void a.error("Method "+b+" does not exist on jQuery.modal"):e.init.apply(this,arguments)}}(jQuery),function(a){a.fn.materialbox=function(){return this.each(function(){function b(){f=!1;var b=i.parent(".material-placeholder"),d=(window.innerWidth,window.innerHeight,i.data("width")),g=i.data("height");i.velocity("stop",!0),a("#materialbox-overlay").velocity("stop",!0),a(".materialbox-caption").velocity("stop",!0),a("#materialbox-overlay").velocity({opacity:0},{duration:h,queue:!1,easing:"easeOutQuad",complete:function(){e=!1,a(this).remove()}}),i.velocity({width:d,height:g,left:0,top:0},{duration:h,queue:!1,easing:"easeOutQuad"}),a(".materialbox-caption").velocity({opacity:0},{duration:h,queue:!1,easing:"easeOutQuad",complete:function(){b.css({height:"",width:"",position:"",top:"",left:""}),i.css({height:"",top:"",left:"",width:"","max-width":"",position:"","z-index":""}),i.removeClass("active"),f=!0,a(this).remove(),c&&c.css("overflow","")}})}if(!a(this).hasClass("initialized")){a(this).addClass("initialized");var c,d,e=!1,f=!0,g=275,h=200,i=a(this),j=a("<div></div>").addClass("material-placeholder");i.wrap(j),i.on("click",function(){var h=i.parent(".material-placeholder"),j=window.innerWidth,k=window.innerHeight,l=i.width(),m=i.height();if(f===!1)return b(),!1;if(e&&f===!0)return b(),!1;f=!1,i.addClass("active"),e=!0,h.css({width:h[0].getBoundingClientRect().width,height:h[0].getBoundingClientRect().height,position:"relative",top:0,left:0}),c=void 0,d=h[0].parentNode;for(;null!==d&&!a(d).is(document);){var n=a(d);"visible"!==n.css("overflow")&&(n.css("overflow","visible"),c=void 0===c?n:c.add(n)),d=d.parentNode}i.css({position:"absolute","z-index":1e3}).data("width",l).data("height",m);var o=a('<div id="materialbox-overlay"></div>').css({opacity:0}).click(function(){f===!0&&b()});if(i.before(o),o.velocity({opacity:1},{duration:g,queue:!1,easing:"easeOutQuad"}),""!==i.data("caption")){var p=a('<div class="materialbox-caption"></div>');p.text(i.data("caption")),a("body").append(p),p.css({display:"inline"}),p.velocity({opacity:1},{duration:g,queue:!1,easing:"easeOutQuad"})}var q=0,r=l/j,s=m/k,t=0,u=0;r>s?(q=m/l,t=.9*j,u=.9*j*q):(q=l/m,t=.9*k*q,u=.9*k),i.hasClass("responsive-img")?i.velocity({"max-width":t,width:l},{duration:0,queue:!1,complete:function(){i.css({left:0,top:0}).velocity({height:u,width:t,left:a(document).scrollLeft()+j/2-i.parent(".material-placeholder").offset().left-t/2,top:a(document).scrollTop()+k/2-i.parent(".material-placeholder").offset().top-u/2},{duration:g,queue:!1,easing:"easeOutQuad",complete:function(){f=!0}})}}):i.css("left",0).css("top",0).velocity({height:u,width:t,left:a(document).scrollLeft()+j/2-i.parent(".material-placeholder").offset().left-t/2,top:a(document).scrollTop()+k/2-i.parent(".material-placeholder").offset().top-u/2},{duration:g,queue:!1,easing:"easeOutQuad",complete:function(){f=!0}})}),a(window).scroll(function(){e&&b()}),a(document).keyup(function(a){27===a.keyCode&&f===!0&&e&&b()})}})},a(document).ready(function(){a(".materialboxed").materialbox()})}(jQuery),function(a){a.fn.parallax=function(){var b=a(window).width();return this.each(function(c){function d(c){var d;d=601>b?e.height()>0?e.height():e.children("img").height():e.height()>0?e.height():500;var f=e.children("img").first(),g=f.height(),h=g-d,i=e.offset().top+d,j=e.offset().top,k=a(window).scrollTop(),l=window.innerHeight,m=k+l,n=(m-j)/(d+l),o=Math.round(h*n);c&&f.css("display","block"),i>k&&k+l>j&&f.css("transform","translate3D(-50%,"+o+"px, 0)")}var e=a(this);e.addClass("parallax"),e.children("img").one("load",function(){d(!0)}).each(function(){this.complete&&a(this).trigger("load")}),a(window).scroll(function(){b=a(window).width(),d(!1)}),a(window).resize(function(){b=a(window).width(),d(!1)})})}}(jQuery),function(a){var b={init:function(b){var c={onShow:null};return b=a.extend(c,b),this.each(function(){var c,d,e=a(this),f=(a(window).width(),e.find("li.tab a")),g=e.width(),h=Math.max(g,e[0].scrollWidth)/f.length,i=0,j=function(a){return g-a.position().left-a.outerWidth()-e.scrollLeft()},k=function(a){return a.position().left+e.scrollLeft()};c=a(f.filter('[href="'+location.hash+'"]')),0===c.length&&(c=a(this).find("li.tab a.active").first()),0===c.length&&(c=a(this).find("li.tab a").first()),c.addClass("active"),i=f.index(c),0>i&&(i=0),void 0!==c[0]&&(d=a(c[0].hash)),e.append('<div class="indicator"></div>');var l=e.find(".indicator");e.is(":visible")&&setTimeout(function(){l.css({right:j(c)}),l.css({left:k(c)})},0),a(window).resize(function(){g=e.width(),h=Math.max(g,e[0].scrollWidth)/f.length,0>i&&(i=0),0!==h&&0!==g&&(l.css({right:j(c)}),l.css({left:k(c)}))}),f.not(c).each(function(){a(Materialize.escapeHash(this.hash)).hide()}),e.on("click","a",function(m){if(a(this).parent().hasClass("disabled"))return void m.preventDefault();if(!a(this).attr("target")){g=e.width(),h=Math.max(g,e[0].scrollWidth)/f.length,c.removeClass("active"),void 0!==d&&d.hide(),c=a(this),d=a(Materialize.escapeHash(this.hash)),f=e.find("li.tab a");c.position();c.addClass("active");var n=i;i=f.index(a(this)),0>i&&(i=0),void 0!==d&&(d.show(),"function"==typeof b.onShow&&b.onShow.call(this,d)),i-n>=0?(l.velocity({right:j(c)},{duration:300,queue:!1,easing:"easeOutQuad"}),l.velocity({left:k(c)},{duration:300,queue:!1,easing:"easeOutQuad",delay:90})):(l.velocity({left:k(c)},{duration:300,queue:!1,easing:"easeOutQuad"}),l.velocity({right:j(c)},{duration:300,queue:!1,easing:"easeOutQuad",delay:90})),m.preventDefault()}})})},select_tab:function(a){this.find('a[href="#'+a+'"]').trigger("click")}};a.fn.tabs=function(c){return b[c]?b[c].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof c&&c?void a.error("Method "+c+" does not exist on jQuery.tabs"):b.init.apply(this,arguments)},a(document).ready(function(){a("ul.tabs").tabs()})}(jQuery),function(a){a.fn.tooltip=function(c){var d=5,e={delay:350,tooltip:"",position:"bottom",html:!1};return"remove"===c?(this.each(function(){a("#"+a(this).attr("data-tooltip-id")).remove(),a(this).off("mouseenter.tooltip mouseleave.tooltip")}),!1):(c=a.extend(e,c),this.each(function(){var e=Materialize.guid(),f=a(this);f.attr("data-tooltip-id")&&a("#"+f.attr("data-tooltip-id")).remove(),f.attr("data-tooltip-id",e);var g,h,i,j,k,l,m=function(){g=f.attr("data-html")?"true"===f.attr("data-html"):c.html,h=f.attr("data-delay"),h=void 0===h||""===h?c.delay:h,i=f.attr("data-position"),i=void 0===i||""===i?c.position:i,j=f.attr("data-tooltip"),j=void 0===j||""===j?c.tooltip:j};m();var n=function(){var b=a('<div class="material-tooltip"></div>');return j=g?a("<span></span>").html(j):a("<span></span>").text(j),b.append(j).appendTo(a("body")).attr("id",e),l=a('<div class="backdrop"></div>'),l.appendTo(b),b};k=n(),f.off("mouseenter.tooltip mouseleave.tooltip");var o,p=!1;f.on({"mouseenter.tooltip":function(a){var c=function(){m(),p=!0,k.velocity("stop"),l.velocity("stop"),k.css({display:"block",left:"0px",top:"0px"});var a,c,e,g=f.outerWidth(),h=f.outerHeight(),j=k.outerHeight(),n=k.outerWidth(),o="0px",q="0px",r=8,s=8;"top"===i?(a=f.offset().top-j-d,c=f.offset().left+g/2-n/2,e=b(c,a,n,j),o="-10px",l.css({bottom:0,left:0,borderRadius:"14px 14px 0 0",transformOrigin:"50% 100%",marginTop:j,marginLeft:n/2-l.width()/2})):"left"===i?(a=f.offset().top+h/2-j/2,c=f.offset().left-n-d,e=b(c,a,n,j),q="-10px",l.css({top:"-7px",right:0,width:"14px",height:"14px",borderRadius:"14px 0 0 14px",transformOrigin:"95% 50%",marginTop:j/2,marginLeft:n})):"right"===i?(a=f.offset().top+h/2-j/2,c=f.offset().left+g+d,e=b(c,a,n,j),q="+10px",l.css({top:"-7px",left:0,width:"14px",height:"14px",borderRadius:"0 14px 14px 0",transformOrigin:"5% 50%",marginTop:j/2,marginLeft:"0px"})):(a=f.offset().top+f.outerHeight()+d,c=f.offset().left+g/2-n/2,e=b(c,a,n,j),o="+10px",l.css({top:0,left:0,marginLeft:n/2-l.width()/2})),k.css({top:e.y,left:e.x}),r=Math.SQRT2*n/parseInt(l.css("width")),s=Math.SQRT2*j/parseInt(l.css("height")),k.velocity({marginTop:o,marginLeft:q},{duration:350,queue:!1}).velocity({opacity:1},{duration:300,delay:50,queue:!1}),l.css({display:"block"}).velocity({opacity:1},{duration:55,delay:0,queue:!1}).velocity({scaleX:r,scaleY:s},{duration:300,delay:0,queue:!1,easing:"easeInOutQuad"})};o=setTimeout(c,h)},"mouseleave.tooltip":function(){p=!1,clearTimeout(o),setTimeout(function(){p!==!0&&(k.velocity({opacity:0,marginTop:0,marginLeft:0},{duration:225,queue:!1}),l.velocity({opacity:0,scaleX:1,scaleY:1},{duration:225,queue:!1,complete:function(){l.css("display","none"),k.css("display","none"),p=!1}}))},225)}})}))};var b=function(b,c,d,e){var f=b,g=c;return 0>f?f=4:f+d>window.innerWidth&&(f-=f+d-window.innerWidth),0>g?g=4:g+e>window.innerHeight+a(window).scrollTop&&(g-=g+e-window.innerHeight),{x:f,y:g}};a(document).ready(function(){a(".tooltipped").tooltip()})}(jQuery),function(a){"use strict";function b(a){return null!==a&&a===a.window}function c(a){return b(a)?a:9===a.nodeType&&a.defaultView}function d(a){var b,d,e={top:0,left:0},f=a&&a.ownerDocument;return b=f.documentElement,"undefined"!=typeof a.getBoundingClientRect&&(e=a.getBoundingClientRect()),d=c(f),{top:e.top+d.pageYOffset-b.clientTop,left:e.left+d.pageXOffset-b.clientLeft}}function e(a){var b="";for(var c in a)a.hasOwnProperty(c)&&(b+=c+":"+a[c]+";");return b}function f(a){if(k.allowEvent(a)===!1)return null;for(var b=null,c=a.target||a.srcElement;null!==c.parentElement;){if(!(c instanceof SVGElement||-1===c.className.indexOf("waves-effect"))){b=c;break}if(c.classList.contains("waves-effect")){b=c;break}c=c.parentElement}return b}function g(b){var c=f(b);null!==c&&(j.show(b,c),"ontouchstart"in a&&(c.addEventListener("touchend",j.hide,!1),c.addEventListener("touchcancel",j.hide,!1)),c.addEventListener("mouseup",j.hide,!1),c.addEventListener("mouseleave",j.hide,!1))}var h=h||{},i=document.querySelectorAll.bind(document),j={duration:750,show:function(a,b){if(2===a.button)return!1;var c=b||this,f=document.createElement("div");f.className="waves-ripple",c.appendChild(f);var g=d(c),h=a.pageY-g.top,i=a.pageX-g.left,k="scale("+c.clientWidth/100*10+")";"touches"in a&&(h=a.touches[0].pageY-g.top,i=a.touches[0].pageX-g.left),f.setAttribute("data-hold",Date.now()),f.setAttribute("data-scale",k),f.setAttribute("data-x",i),f.setAttribute("data-y",h);var l={top:h+"px",left:i+"px"};f.className=f.className+" waves-notransition",f.setAttribute("style",e(l)),f.className=f.className.replace("waves-notransition",""),l["-webkit-transform"]=k,l["-moz-transform"]=k,l["-ms-transform"]=k,l["-o-transform"]=k,l.transform=k,l.opacity="1",l["-webkit-transition-duration"]=j.duration+"ms",l["-moz-transition-duration"]=j.duration+"ms",l["-o-transition-duration"]=j.duration+"ms",l["transition-duration"]=j.duration+"ms",l["-webkit-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",l["-moz-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",l["-o-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",l["transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",f.setAttribute("style",e(l))},hide:function(a){k.touchup(a);var b=this,c=(1.4*b.clientWidth,null),d=b.getElementsByClassName("waves-ripple");if(!(d.length>0))return!1;c=d[d.length-1];var f=c.getAttribute("data-x"),g=c.getAttribute("data-y"),h=c.getAttribute("data-scale"),i=Date.now()-Number(c.getAttribute("data-hold")),l=350-i;0>l&&(l=0),setTimeout(function(){var a={top:g+"px",left:f+"px",opacity:"0","-webkit-transition-duration":j.duration+"ms","-moz-transition-duration":j.duration+"ms","-o-transition-duration":j.duration+"ms","transition-duration":j.duration+"ms","-webkit-transform":h,"-moz-transform":h,"-ms-transform":h,"-o-transform":h,transform:h};c.setAttribute("style",e(a)),setTimeout(function(){try{b.removeChild(c)}catch(a){return!1}},j.duration)},l)},wrapInput:function(a){for(var b=0;b<a.length;b++){var c=a[b];if("input"===c.tagName.toLowerCase()){var d=c.parentNode;if("i"===d.tagName.toLowerCase()&&-1!==d.className.indexOf("waves-effect"))continue;var e=document.createElement("i");e.className=c.className+" waves-input-wrapper";var f=c.getAttribute("style");f||(f=""),e.setAttribute("style",f),c.className="waves-button-input",c.removeAttribute("style"),d.replaceChild(e,c),e.appendChild(c)}}}},k={touches:0,allowEvent:function(a){var b=!0;return"touchstart"===a.type?k.touches+=1:"touchend"===a.type||"touchcancel"===a.type?setTimeout(function(){k.touches>0&&(k.touches-=1)},500):"mousedown"===a.type&&k.touches>0&&(b=!1),b},touchup:function(a){k.allowEvent(a)}};h.displayEffect=function(b){b=b||{},"duration"in b&&(j.duration=b.duration),j.wrapInput(i(".waves-effect")),"ontouchstart"in a&&document.body.addEventListener("touchstart",g,!1),document.body.addEventListener("mousedown",g,!1)},h.attach=function(b){"input"===b.tagName.toLowerCase()&&(j.wrapInput([b]),b=b.parentElement),"ontouchstart"in a&&b.addEventListener("touchstart",g,!1),b.addEventListener("mousedown",g,!1)},a.Waves=h,document.addEventListener("DOMContentLoaded",function(){h.displayEffect()},!1)}(window),Materialize.toast=function(a,b,c,d){function e(a){var b=document.createElement("div");if(b.classList.add("toast"),c)for(var e=c.split(" "),f=0,g=e.length;g>f;f++)b.classList.add(e[f]);("object"==typeof HTMLElement?a instanceof HTMLElement:a&&"object"==typeof a&&null!==a&&1===a.nodeType&&"string"==typeof a.nodeName)?b.appendChild(a):a instanceof jQuery?b.appendChild(a[0]):b.innerHTML=a;var h=new Hammer(b,{prevent_default:!1});return h.on("pan",function(a){var c=a.deltaX,d=80;b.classList.contains("panning")||b.classList.add("panning");var e=1-Math.abs(c/d);0>e&&(e=0),Vel(b,{left:c,opacity:e},{duration:50,queue:!1,easing:"easeOutQuad"})}),h.on("panend",function(a){var c=a.deltaX,e=80;Math.abs(c)>e?Vel(b,{marginTop:"-40px"},{duration:375,easing:"easeOutExpo",queue:!1,complete:function(){"function"==typeof d&&d(),b.parentNode.removeChild(b)}}):(b.classList.remove("panning"),Vel(b,{left:0,opacity:1},{duration:300,easing:"easeOutExpo",queue:!1}))}),b}c=c||"";var f=document.getElementById("toast-container");null===f&&(f=document.createElement("div"),f.id="toast-container",document.body.appendChild(f));var g=e(a);a&&f.appendChild(g),g.style.top="35px",g.style.opacity=0,Vel(g,{top:"0px",opacity:1},{duration:300,easing:"easeOutCubic",queue:!1});var h,i=b;null!=i&&(h=setInterval(function(){null===g.parentNode&&window.clearInterval(h),g.classList.contains("panning")||(i-=20),0>=i&&(Vel(g,{opacity:0,marginTop:"-40px"},{duration:375,easing:"easeOutExpo",queue:!1,complete:function(){"function"==typeof d&&d(),this[0].parentNode.removeChild(this[0])}}),window.clearInterval(h))},20))},function(a){var b={init:function(b){var c={menuWidth:300,edge:"left",closeOnClick:!1,draggable:!0};b=a.extend(c,b),a(this).each(function(){var c=a(this),d=a("#"+c.attr("data-activates"));300!=b.menuWidth&&d.css("width",b.menuWidth);var e;b.draggable?(e=a('<div class="drag-target"></div>').attr("data-sidenav",c.attr("data-activates")),a("body").append(e)):e=a(),"left"==b.edge?(d.css("transform","translateX(-100%)"),e.css({left:0})):(d.addClass("right-aligned").css("transform","translateX(100%)"),e.css({right:0})),d.hasClass("fixed")&&window.innerWidth>992&&d.css("transform","translateX(0)"),d.hasClass("fixed")&&a(window).resize(function(){window.innerWidth>992?0!==a("#sidenav-overlay").length&&h?f(!0):d.css("transform","translateX(0%)"):h===!1&&("left"===b.edge?d.css("transform","translateX(-100%)"):d.css("transform","translateX(100%)"))}),b.closeOnClick===!0&&d.on("click.itemclick","a:not(.collapsible-header)",function(){f()});var f=function(c){g=!1,h=!1,a("body").css({overflow:"",width:""}),a("#sidenav-overlay").velocity({opacity:0},{duration:200,queue:!1,easing:"easeOutQuad",complete:function(){a(this).remove()}}),"left"===b.edge?(e.css({width:"",right:"",left:"0"}),d.velocity({translateX:"-100%"},{duration:200,queue:!1,easing:"easeOutCubic",complete:function(){c===!0&&(d.removeAttr("style"),d.css("width",b.menuWidth))}})):(e.css({width:"",right:"0",left:""}),d.velocity({translateX:"100%"},{duration:200,queue:!1,easing:"easeOutCubic",complete:function(){c===!0&&(d.removeAttr("style"),d.css("width",b.menuWidth))}}))},g=!1,h=!1;b.draggable&&(e.on("click",function(){h&&f()}),e.hammer({prevent_default:!1}).bind("pan",function(c){if("touch"==c.gesture.pointerType){var e=(c.gesture.direction,c.gesture.center.x),g=(c.gesture.center.y,c.gesture.velocityX,a("body")),i=a("#sidenav-overlay"),j=g.innerWidth();if(g.css("overflow","hidden"),g.width(j),0===i.length&&(i=a('<div id="sidenav-overlay"></div>'),i.css("opacity",0).click(function(){f()}),a("body").append(i)),"left"===b.edge&&(e>b.menuWidth?e=b.menuWidth:0>e&&(e=0)),"left"===b.edge)e<b.menuWidth/2?h=!1:e>=b.menuWidth/2&&(h=!0),d.css("transform","translateX("+(e-b.menuWidth)+"px)");else{e<window.innerWidth-b.menuWidth/2?h=!0:e>=window.innerWidth-b.menuWidth/2&&(h=!1);var k=e-b.menuWidth/2;0>k&&(k=0),d.css("transform","translateX("+k+"px)")}var l;"left"===b.edge?(l=e/b.menuWidth,i.velocity({opacity:l},{duration:10,queue:!1,easing:"easeOutQuad"})):(l=Math.abs((e-window.innerWidth)/b.menuWidth),i.velocity({opacity:l},{duration:10,queue:!1,easing:"easeOutQuad"}))}}).bind("panend",function(c){if("touch"==c.gesture.pointerType){var f=a('<div id="sidenav-overlay"></div>'),i=c.gesture.velocityX,j=c.gesture.center.x,k=j-b.menuWidth,l=j-b.menuWidth/2;k>0&&(k=0),0>l&&(l=0),g=!1,"left"===b.edge?h&&.3>=i||-.5>i?(0!==k&&d.velocity({translateX:[0,k]},{duration:300,queue:!1,easing:"easeOutQuad"}),f.velocity({opacity:1},{duration:50,queue:!1,easing:"easeOutQuad"}),e.css({width:"50%",right:0,left:""}),h=!0):(!h||i>.3)&&(a("body").css({overflow:"",width:""}),d.velocity({translateX:[-1*b.menuWidth-10,k]},{duration:200,queue:!1,easing:"easeOutQuad"}),f.velocity({opacity:0},{duration:200,queue:!1,easing:"easeOutQuad",complete:function(){a(this).remove()}}),e.css({width:"10px",right:"",left:0})):h&&i>=-.3||i>.5?(0!==l&&d.velocity({translateX:[0,l]},{duration:300,queue:!1,easing:"easeOutQuad"}),f.velocity({opacity:1},{duration:50,queue:!1,easing:"easeOutQuad"}),e.css({width:"50%",right:"",left:0}),h=!0):(!h||-.3>i)&&(a("body").css({overflow:"",width:""}),d.velocity({translateX:[b.menuWidth+10,l]},{duration:200,queue:!1,easing:"easeOutQuad"}),f.velocity({opacity:0},{duration:200,queue:!1,easing:"easeOutQuad",complete:function(){a(this).remove()}}),e.css({width:"10px",right:0,left:""}))}})),c.click(function(){if(h===!0)h=!1,g=!1,f();else{var c=a("body"),i=a('<div id="sidenav-overlay"></div>'),j=c.innerWidth();c.css("overflow","hidden"),c.width(j),a("body").append(e),"left"===b.edge?(e.css({width:"50%",right:0,left:""}),d.velocity({translateX:[0,-1*b.menuWidth]},{duration:300,queue:!1,easing:"easeOutQuad"})):(e.css({width:"50%",right:"",left:0}),d.velocity({translateX:[0,b.menuWidth]},{duration:300,queue:!1,easing:"easeOutQuad"})),i.css("opacity",0).click(function(){h=!1,g=!1,f(),i.velocity({opacity:0},{duration:300,queue:!1,easing:"easeOutQuad",complete:function(){a(this).remove()}})}),a("body").append(i),i.velocity({opacity:1},{duration:300,queue:!1,easing:"easeOutQuad",complete:function(){h=!0,g=!1}})}return!1})})},destroy:function(){var b=a("#sidenav-overlay"),c=a('.drag-target[data-sidenav="'+a(this).attr("data-activates")+'"]');b.trigger("click"),c.remove(),a(this).off("click"),b.remove()},show:function(){this.trigger("click")},hide:function(){a("#sidenav-overlay").trigger("click")}};a.fn.sideNav=function(c){return b[c]?b[c].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof c&&c?void a.error("Method "+c+" does not exist on jQuery.sideNav"):b.init.apply(this,arguments)}}(jQuery),function(a){function b(b,c,d,e){var f=a();return a.each(g,function(a,g){if(g.height()>0){var h=g.offset().top,i=g.offset().left,j=i+g.width(),k=h+g.height(),l=!(i>c||e>j||h>d||b>k);l&&f.push(g)}}),f}function c(c){++j;var d=f.scrollTop(),e=f.scrollLeft(),g=e+f.width(),i=d+f.height(),l=b(d+k.top+c||200,g+k.right,i+k.bottom,e+k.left);a.each(l,function(a,b){var c=b.data("scrollSpy:ticks");"number"!=typeof c&&b.triggerHandler("scrollSpy:enter"),b.data("scrollSpy:ticks",j)}),a.each(h,function(a,b){var c=b.data("scrollSpy:ticks");"number"==typeof c&&c!==j&&(b.triggerHandler("scrollSpy:exit"),b.data("scrollSpy:ticks",null))}),h=l}function d(){f.trigger("scrollSpy:winSize")}function e(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:l(),g=null,f=a.apply(d,e),d=e=null};return function(){var j=l();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k?(clearTimeout(g),g=null,h=j,f=a.apply(d,e),d=e=null):g||c.trailing===!1||(g=setTimeout(i,k)),f}}var f=a(window),g=[],h=[],i=!1,j=0,k={top:0,right:0,bottom:0,left:0},l=Date.now||function(){return(new Date).getTime()};a.scrollSpy=function(b,d){var h={throttle:100,scrollOffset:200};d=a.extend(h,d);var j=[];b=a(b),b.each(function(b,c){g.push(a(c)),a(c).data("scrollSpy:id",b),a('a[href="#'+a(c).attr("id")+'"]').click(function(b){b.preventDefault();var c=a(Materialize.escapeHash(this.hash)).offset().top+1;a("html, body").animate({scrollTop:c-d.scrollOffset},{duration:400,queue:!1,easing:"easeOutCubic"})})}),k.top=d.offsetTop||0,k.right=d.offsetRight||0,k.bottom=d.offsetBottom||0,k.left=d.offsetLeft||0;var l=e(function(){c(d.scrollOffset)},d.throttle||100),m=function(){a(document).ready(l)};return i||(f.on("scroll",m),f.on("resize",m),i=!0),setTimeout(m,0),b.on("scrollSpy:enter",function(){j=a.grep(j,function(a){return 0!=a.height()});var b=a(this);j[0]?(a('a[href="#'+j[0].attr("id")+'"]').removeClass("active"),b.data("scrollSpy:id")<j[0].data("scrollSpy:id")?j.unshift(a(this)):j.push(a(this))):j.push(a(this)),a('a[href="#'+j[0].attr("id")+'"]').addClass("active")}),b.on("scrollSpy:exit",function(){if(j=a.grep(j,function(a){return 0!=a.height()}),j[0]){a('a[href="#'+j[0].attr("id")+'"]').removeClass("active");var b=a(this);j=a.grep(j,function(a){return a.attr("id")!=b.attr("id")}),j[0]&&a('a[href="#'+j[0].attr("id")+'"]').addClass("active")}}),b},a.winSizeSpy=function(b){return a.winSizeSpy=function(){return f},b=b||{throttle:100},f.on("resize",e(d,b.throttle||100))},a.fn.scrollSpy=function(b){return a.scrollSpy(a(this),b)}}(jQuery),function(a){a(document).ready(function(){function b(b){var c=b.css("font-family"),d=b.css("font-size"),f=b.css("line-height");d&&e.css("font-size",d),c&&e.css("font-family",c),f&&e.css("line-height",f),"off"===b.attr("wrap")&&e.css("overflow-wrap","normal").css("white-space","pre"),e.text(b.val()+"\n");var g=e.html().replace(/\n/g,"<br>");e.html(g),b.is(":visible")?e.css("width",b.width()):e.css("width",a(window).width()/2),b.css("height",e.height())}Materialize.updateTextFields=function(){var b="input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], textarea";a(b).each(function(b,c){a(c).val().length>0||c.autofocus||void 0!==a(this).attr("placeholder")||a(c)[0].validity.badInput===!0?a(this).siblings("label").addClass("active"):a(this).siblings("label").removeClass("active")})};var c="input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], textarea";a(document).on("change",c,function(){(0!==a(this).val().length||void 0!==a(this).attr("placeholder"))&&a(this).siblings("label").addClass("active"),validate_field(a(this))}),a(document).ready(function(){Materialize.updateTextFields()}),a(document).on("reset",function(b){var d=a(b.target);d.is("form")&&(d.find(c).removeClass("valid").removeClass("invalid"),d.find(c).each(function(){""===a(this).attr("value")&&a(this).siblings("label").removeClass("active")}),d.find("select.initialized").each(function(){var a=d.find("option[selected]").text();d.siblings("input.select-dropdown").val(a)}))}),a(document).on("focus",c,function(){a(this).siblings("label, .prefix").addClass("active")}),a(document).on("blur",c,function(){var b=a(this),c=".prefix";0===b.val().length&&b[0].validity.badInput!==!0&&void 0===b.attr("placeholder")&&(c+=", label"),b.siblings(c).removeClass("active"),validate_field(b)}),window.validate_field=function(a){var b=void 0!==a.attr("length"),c=parseInt(a.attr("length")),d=a.val().length;0===a.val().length&&a[0].validity.badInput===!1?a.hasClass("validate")&&(a.removeClass("valid"),a.removeClass("invalid")):a.hasClass("validate")&&(a.is(":valid")&&b&&c>=d||a.is(":valid")&&!b?(a.removeClass("invalid"),a.addClass("valid")):(a.removeClass("valid"),a.addClass("invalid")))};var d="input[type=radio], input[type=checkbox]";a(document).on("keyup.radio",d,function(b){if(9===b.which){a(this).addClass("tabbed");var c=a(this);return void c.one("blur",function(b){a(this).removeClass("tabbed")})}});var e=a(".hiddendiv").first();e.length||(e=a('<div class="hiddendiv common"></div>'),a("body").append(e));var f=".materialize-textarea";a(f).each(function(){var c=a(this);c.val().length&&b(c)}),a("body").on("keyup keydown autoresize",f,function(){b(a(this))}),a(document).on("change",'.file-field input[type="file"]',function(){for(var b=a(this).closest(".file-field"),c=b.find("input.file-path"),d=a(this)[0].files,e=[],f=0;f<d.length;f++)e.push(d[f].name);c.val(e.join(", ")),c.trigger("change")});var g,h="input[type=range]",i=!1;a(h).each(function(){var b=a('<span class="thumb"><span class="value"></span></span>');a(this).after(b)});var j=".range-field";a(document).on("change",h,function(b){var c=a(this).siblings(".thumb");c.find(".value").html(a(this).val())}),a(document).on("input mousedown touchstart",h,function(b){var c=a(this).siblings(".thumb"),d=a(this).outerWidth();c.length<=0&&(c=a('<span class="thumb"><span class="value"></span></span>'),a(this).after(c)),c.find(".value").html(a(this).val()),i=!0,a(this).addClass("active"),c.hasClass("active")||c.velocity({height:"30px",width:"30px",top:"-20px",marginLeft:"-15px"},{duration:300,easing:"easeOutExpo"}),"input"!==b.type&&(g=void 0===b.pageX||null===b.pageX?b.originalEvent.touches[0].pageX-a(this).offset().left:b.pageX-a(this).offset().left,0>g?g=0:g>d&&(g=d),c.addClass("active").css("left",g)),c.find(".value").html(a(this).val())}),a(document).on("mouseup touchend",j,function(){i=!1,a(this).removeClass("active")}),a(document).on("mousemove touchmove",j,function(b){var c,d=a(this).children(".thumb");if(i){d.hasClass("active")||d.velocity({height:"30px",width:"30px",top:"-20px",marginLeft:"-15px"},{duration:300,easing:"easeOutExpo"}),c=void 0===b.pageX||null===b.pageX?b.originalEvent.touches[0].pageX-a(this).offset().left:b.pageX-a(this).offset().left;var e=a(this).outerWidth();0>c?c=0:c>e&&(c=e),d.addClass("active").css("left",c),d.find(".value").html(d.siblings(h).val())}}),a(document).on("mouseout touchleave",j,function(){if(!i){var b=a(this).children(".thumb");b.hasClass("active")&&b.velocity({height:"0",width:"0",top:"10px",marginLeft:"-6px"},{duration:100}),b.removeClass("active")}}),a.fn.autocomplete=function(b){var c={data:{}};return b=a.extend(c,b),this.each(function(){var c=a(this),d=b.data,e=c.closest(".input-field");if(!a.isEmptyObject(d)){var f=a('<ul class="autocomplete-content dropdown-content"></ul>');e.length?e.append(f):c.after(f);var g=function(a,b){var c=b.find("img"),d=b.text().toLowerCase().indexOf(""+a.toLowerCase()),e=d+a.length-1,f=b.text().slice(0,d),g=b.text().slice(d,e+1),h=b.text().slice(e+1);b.html("<span>"+f+"<span class='highlight'>"+g+"</span>"+h+"</span>"),c.length&&b.prepend(c)};c.on("keyup",function(b){if(13===b.which)return void f.find("li").first().click();var e=c.val().toLowerCase();if(f.empty(),""!==e)for(var h in d)if(d.hasOwnProperty(h)&&-1!==h.toLowerCase().indexOf(e)&&h.toLowerCase()!==e){var i=a("<li></li>");d[h]?i.append('<img src="'+d[h]+'" class="right circle"><span>'+h+"</span>"):i.append("<span>"+h+"</span>"),f.append(i),g(e,i)}}),f.on("click","li",function(){c.val(a(this).text().trim()),c.trigger("change"),f.empty()})}})}}),a.fn.material_select=function(b){function c(a,b,c){var e=a.indexOf(b),f=-1===e;return f?a.push(b):a.splice(e,1),c.siblings("ul.dropdown-content").find("li").eq(b).toggleClass("active"),c.find("option").eq(b).prop("selected",f),d(a,c),f}function d(a,b){for(var c="",d=0,e=a.length;e>d;d++){var f=b.find("option").eq(a[d]).text();c+=0===d?f:", "+f}""===c&&(c=b.find("option:disabled").eq(0).text()),b.siblings("input.select-dropdown").val(c)}a(this).each(function(){var d=a(this);if(!d.hasClass("browser-default")){var e=d.attr("multiple")?!0:!1,f=d.data("select-id");if(f&&(d.parent().find("span.caret").remove(),d.parent().find("input").remove(),d.unwrap(),a("ul#select-options-"+f).remove()),"destroy"===b)return void d.data("select-id",null).removeClass("initialized");var g=Materialize.guid();d.data("select-id",g);var h=a('<div class="select-wrapper"></div>');h.addClass(d.attr("class"));var i=a('<ul id="select-options-'+g+'" class="dropdown-content select-dropdown '+(e?"multiple-select-dropdown":"")+'"></ul>'),j=d.children("option, optgroup"),k=[],l=!1,m=d.find("option:selected").html()||d.find("option:first").html()||"",n=function(b,c,d){var e=c.is(":disabled")?"disabled ":"",f="optgroup-option"===d?"optgroup-option ":"",g=c.data("icon"),h=c.attr("class");if(g){var j="";return h&&(j=' class="'+h+'"'),"multiple"===d?i.append(a('<li class="'+e+'"><img alt="" src="'+g+'"'+j+'><span><input type="checkbox"'+e+"/><label></label>"+c.html()+"</span></li>")):i.append(a('<li class="'+e+f+'"><img alt="" src="'+g+'"'+j+"><span>"+c.html()+"</span></li>")),!0}"multiple"===d?i.append(a('<li class="'+e+'"><span><input type="checkbox"'+e+"/><label></label>"+c.html()+"</span></li>")):i.append(a('<li class="'+e+f+'"><span>'+c.html()+"</span></li>"))};j.length&&j.each(function(){if(a(this).is("option"))e?n(d,a(this),"multiple"):n(d,a(this));else if(a(this).is("optgroup")){var b=a(this).children("option");i.append(a('<li class="optgroup"><span>'+a(this).attr("label")+"</span></li>")),b.each(function(){n(d,a(this),"optgroup-option")})}}),i.find("li:not(.optgroup)").each(function(f){a(this).click(function(g){if(!a(this).hasClass("disabled")&&!a(this).hasClass("optgroup")){
var h=!0;e?(a('input[type="checkbox"]',this).prop("checked",function(a,b){return!b}),h=c(k,a(this).index(),d),q.trigger("focus")):(i.find("li").removeClass("active"),a(this).toggleClass("active"),q.val(a(this).text())),r(i,a(this)),d.find("option").eq(f).prop("selected",h),d.trigger("change"),"undefined"!=typeof b&&b()}g.stopPropagation()})}),d.wrap(h);var o=a('<span class="caret">&#9660;</span>');d.is(":disabled")&&o.addClass("disabled");var p=m.replace(/"/g,"&quot;"),q=a('<input type="text" class="select-dropdown" readonly="true" '+(d.is(":disabled")?"disabled":"")+' data-activates="select-options-'+g+'" value="'+p+'"/>');d.before(q),q.before(o),q.after(i),d.is(":disabled")||q.dropdown({hover:!1,closeOnClick:!1}),d.attr("tabindex")&&a(q[0]).attr("tabindex",d.attr("tabindex")),d.addClass("initialized"),q.on({focus:function(){if(a("ul.select-dropdown").not(i[0]).is(":visible")&&a("input.select-dropdown").trigger("close"),!i.is(":visible")){a(this).trigger("open",["focus"]);var b=a(this).val(),c=i.find("li").filter(function(){return a(this).text().toLowerCase()===b.toLowerCase()})[0];r(i,c)}},click:function(a){a.stopPropagation()}}),q.on("blur",function(){e||a(this).trigger("close"),i.find("li.selected").removeClass("selected")}),i.hover(function(){l=!0},function(){l=!1}),a(window).on({click:function(){e&&(l||q.trigger("close"))}}),e&&d.find("option:selected:not(:disabled)").each(function(){var b=a(this).index();c(k,b,d),i.find("li").eq(b).find(":checkbox").prop("checked",!0)});var r=function(b,c){if(c){b.find("li.selected").removeClass("selected");var d=a(c);d.addClass("selected"),i.scrollTo(d)}},s=[],t=function(b){if(9==b.which)return void q.trigger("close");if(40==b.which&&!i.is(":visible"))return void q.trigger("open");if(13!=b.which||i.is(":visible")){b.preventDefault();var c=String.fromCharCode(b.which).toLowerCase(),d=[9,13,27,38,40];if(c&&-1===d.indexOf(b.which)){s.push(c);var f=s.join(""),g=i.find("li").filter(function(){return 0===a(this).text().toLowerCase().indexOf(f)})[0];g&&r(i,g)}if(13==b.which){var h=i.find("li.selected:not(.disabled)")[0];h&&(a(h).trigger("click"),e||q.trigger("close"))}40==b.which&&(g=i.find("li.selected").length?i.find("li.selected").next("li:not(.disabled)")[0]:i.find("li:not(.disabled)")[0],r(i,g)),27==b.which&&q.trigger("close"),38==b.which&&(g=i.find("li.selected").prev("li:not(.disabled)")[0],g&&r(i,g)),setTimeout(function(){s=[]},1e3)}};q.on("keydown",t)}})}}(jQuery),function(a){var b={init:function(b){var c={indicators:!0,height:400,transition:500,interval:6e3};return b=a.extend(c,b),this.each(function(){function c(a,b){a.hasClass("center-align")?a.velocity({opacity:0,translateY:-100},{duration:b,queue:!1}):a.hasClass("right-align")?a.velocity({opacity:0,translateX:100},{duration:b,queue:!1}):a.hasClass("left-align")&&a.velocity({opacity:0,translateX:-100},{duration:b,queue:!1})}function d(a){a>=j.length?a=0:0>a&&(a=j.length-1),k=i.find(".active").index(),k!=a&&(e=j.eq(k),$caption=e.find(".caption"),e.removeClass("active"),e.velocity({opacity:0},{duration:b.transition,queue:!1,easing:"easeOutQuad",complete:function(){j.not(".active").velocity({opacity:0,translateX:0,translateY:0},{duration:0,queue:!1})}}),c($caption,b.transition),b.indicators&&f.eq(k).removeClass("active"),j.eq(a).velocity({opacity:1},{duration:b.transition,queue:!1,easing:"easeOutQuad"}),j.eq(a).find(".caption").velocity({opacity:1,translateX:0,translateY:0},{duration:b.transition,delay:b.transition,queue:!1,easing:"easeOutQuad"}),j.eq(a).addClass("active"),b.indicators&&f.eq(a).addClass("active"))}var e,f,g,h=a(this),i=h.find("ul.slides").first(),j=i.find("> li"),k=i.find(".active").index();-1!=k&&(e=j.eq(k)),h.hasClass("fullscreen")||(b.indicators?h.height(b.height+40):h.height(b.height),i.height(b.height)),j.find(".caption").each(function(){c(a(this),0)}),j.find("img").each(function(){var b="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";a(this).attr("src")!==b&&(a(this).css("background-image","url("+a(this).attr("src")+")"),a(this).attr("src",b))}),b.indicators&&(f=a('<ul class="indicators"></ul>'),j.each(function(c){var e=a('<li class="indicator-item"></li>');e.click(function(){var c=i.parent(),e=c.find(a(this)).index();d(e),clearInterval(g),g=setInterval(function(){k=i.find(".active").index(),j.length==k+1?k=0:k+=1,d(k)},b.transition+b.interval)}),f.append(e)}),h.append(f),f=h.find("ul.indicators").find("li.indicator-item")),e?e.show():(j.first().addClass("active").velocity({opacity:1},{duration:b.transition,queue:!1,easing:"easeOutQuad"}),k=0,e=j.eq(k),b.indicators&&f.eq(k).addClass("active")),e.find("img").each(function(){e.find(".caption").velocity({opacity:1,translateX:0,translateY:0},{duration:b.transition,queue:!1,easing:"easeOutQuad"})}),g=setInterval(function(){k=i.find(".active").index(),d(k+1)},b.transition+b.interval);var l=!1,m=!1,n=!1;h.hammer({prevent_default:!1}).bind("pan",function(a){if("touch"===a.gesture.pointerType){clearInterval(g);var b=a.gesture.direction,c=a.gesture.deltaX,d=a.gesture.velocityX;$curr_slide=i.find(".active"),$curr_slide.velocity({translateX:c},{duration:50,queue:!1,easing:"easeOutQuad"}),4===b&&(c>h.innerWidth()/2||-.65>d)?n=!0:2===b&&(c<-1*h.innerWidth()/2||d>.65)&&(m=!0);var e;m&&(e=$curr_slide.next(),0===e.length&&(e=j.first()),e.velocity({opacity:1},{duration:300,queue:!1,easing:"easeOutQuad"})),n&&(e=$curr_slide.prev(),0===e.length&&(e=j.last()),e.velocity({opacity:1},{duration:300,queue:!1,easing:"easeOutQuad"}))}}).bind("panend",function(a){"touch"===a.gesture.pointerType&&($curr_slide=i.find(".active"),l=!1,curr_index=i.find(".active").index(),!n&&!m||j.length<=1?$curr_slide.velocity({translateX:0},{duration:300,queue:!1,easing:"easeOutQuad"}):m?(d(curr_index+1),$curr_slide.velocity({translateX:-1*h.innerWidth()},{duration:300,queue:!1,easing:"easeOutQuad",complete:function(){$curr_slide.velocity({opacity:0,translateX:0},{duration:0,queue:!1})}})):n&&(d(curr_index-1),$curr_slide.velocity({translateX:h.innerWidth()},{duration:300,queue:!1,easing:"easeOutQuad",complete:function(){$curr_slide.velocity({opacity:0,translateX:0},{duration:0,queue:!1})}})),m=!1,n=!1,clearInterval(g),g=setInterval(function(){k=i.find(".active").index(),j.length==k+1?k=0:k+=1,d(k)},b.transition+b.interval))}),h.on("sliderPause",function(){clearInterval(g)}),h.on("sliderStart",function(){clearInterval(g),g=setInterval(function(){k=i.find(".active").index(),j.length==k+1?k=0:k+=1,d(k)},b.transition+b.interval)}),h.on("sliderNext",function(){k=i.find(".active").index(),d(k+1)}),h.on("sliderPrev",function(){k=i.find(".active").index(),d(k-1)})})},pause:function(){a(this).trigger("sliderPause")},start:function(){a(this).trigger("sliderStart")},next:function(){a(this).trigger("sliderNext")},prev:function(){a(this).trigger("sliderPrev")}};a.fn.slider=function(c){return b[c]?b[c].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof c&&c?void a.error("Method "+c+" does not exist on jQuery.tooltip"):b.init.apply(this,arguments)}}(jQuery),function(a){a(document).ready(function(){a(document).on("click.card",".card",function(b){a(this).find("> .card-reveal").length&&(a(b.target).is(a(".card-reveal .card-title"))||a(b.target).is(a(".card-reveal .card-title i"))?a(this).find(".card-reveal").velocity({translateY:0},{duration:225,queue:!1,easing:"easeInOutQuad",complete:function(){a(this).css({display:"none"})}}):(a(b.target).is(a(".card .activator"))||a(b.target).is(a(".card .activator i")))&&(a(b.target).closest(".card").css("overflow","hidden"),a(this).find(".card-reveal").css({display:"block"}).velocity("stop",!1).velocity({translateY:"-100%"},{duration:300,queue:!1,easing:"easeInOutQuad"})))})})}(jQuery),function(a){var b=!1,c={data:[],placeholder:"",secondaryPlaceholder:""};a(document).ready(function(){a(document).on("click",".chip .close",function(b){var c=a(this).closest(".chips");c.attr("data-initialized")||a(this).closest(".chip").remove()})}),a.fn.material_chip=function(d){var e=this;if(this.$el=a(this),this.$document=a(document),this.SELS={CHIPS:".chips",CHIP:".chip",INPUT:"input",DELETE:".material-icons",SELECTED_CHIP:".selected"},"data"===d)return this.$el.data("chips");var f=a.extend({},c,d);this.init=function(){var b=0;e.$el.each(function(){var c=a(this),d=Materialize.guid();f.data&&f.data instanceof Array||(f.data=[]),c.data("chips",f.data),c.attr("data-index",b),c.attr("data-initialized",!0),c.hasClass(e.SELS.CHIPS)||c.addClass("chips"),e.chips(c,d),b++})},this.handleEvents=function(){var b=e.SELS;e.$document.off("click.chips-focus",b.CHIPS).on("click.chips-focus",b.CHIPS,function(c){a(c.target).find(b.INPUT).focus()}),e.$document.off("click.chips-select",b.CHIP).on("click.chips-select",b.CHIP,function(c){a(b.CHIP).removeClass("selected"),a(this).toggleClass("selected")}),e.$document.off("keydown.chips").on("keydown.chips",function(c){if(!a(c.target).is("input, textarea")){var d,f=e.$document.find(b.CHIP+b.SELECTED_CHIP),g=f.closest(b.CHIPS),h=f.siblings(b.CHIP).length;if(f.length)if(8===c.which||46===c.which){c.preventDefault(),d=f.index(),e.deleteChip(d,g);var i=null;h>d+1?i=d:(d===h||d+1===h)&&(i=h-1),0>i&&(i=null),null!==i&&e.selectChip(i,g),h||g.find("input").focus()}else if(37===c.which){if(d=f.index()-1,0>d)return;a(b.CHIP).removeClass("selected"),e.selectChip(d,g)}else if(39===c.which){if(d=f.index()+1,a(b.CHIP).removeClass("selected"),d>h)return void g.find("input").focus();e.selectChip(d,g)}}}),e.$document.off("focusin.chips",b.CHIPS+" "+b.INPUT).on("focusin.chips",b.CHIPS+" "+b.INPUT,function(c){var d=a(c.target).closest(b.CHIPS);d.addClass("focus"),d.siblings("label, .prefix").addClass("active"),a(b.CHIP).removeClass("selected")}),e.$document.off("focusout.chips",b.CHIPS+" "+b.INPUT).on("focusout.chips",b.CHIPS+" "+b.INPUT,function(c){var d=a(c.target).closest(b.CHIPS);d.removeClass("focus"),d.data("chips").length||d.siblings("label").removeClass("active"),d.siblings(".prefix").removeClass("active")}),e.$document.off("keydown.chips-add",b.CHIPS+" "+b.INPUT).on("keydown.chips-add",b.CHIPS+" "+b.INPUT,function(c){var d=a(c.target),f=d.closest(b.CHIPS),g=f.children(b.CHIP).length;return 13===c.which?(c.preventDefault(),e.addChip({tag:d.val()},f),void d.val("")):8!==c.keyCode&&37!==c.keyCode||""!==d.val()||!g?void 0:(e.selectChip(g-1,f),void d.blur())}),e.$document.off("click.chips-delete",b.CHIPS+" "+b.DELETE).on("click.chips-delete",b.CHIPS+" "+b.DELETE,function(c){var d=a(c.target),f=d.closest(b.CHIPS),g=d.closest(b.CHIP);c.stopPropagation(),e.deleteChip(g.index(),f),f.find("input").focus()})},this.chips=function(a,b){var c="";a.data("chips").forEach(function(a){c+=e.renderChip(a)}),c+='<input id="'+b+'" class="input" placeholder="">',a.html(c),e.setPlaceholder(a);var d=a.next("label");d.length&&(d.attr("for",b),a.data("chips").length&&d.addClass("active"))},this.renderChip=function(a){if(a.tag){var b='<div class="chip">'+a.tag;return a.image&&(b+=' <img src="'+a.image+'"> '),b+='<i class="material-icons close">close</i>',b+="</div>"}},this.setPlaceholder=function(a){a.data("chips").length&&f.placeholder?a.find("input").prop("placeholder",f.placeholder):!a.data("chips").length&&f.secondaryPlaceholder&&a.find("input").prop("placeholder",f.secondaryPlaceholder)},this.isValid=function(a,b){for(var c=a.data("chips"),d=!1,e=0;e<c.length;e++)if(c[e].tag===b.tag)return void(d=!0);return""!==b.tag&&!d},this.addChip=function(b,c){if(e.isValid(c,b)){for(var d=e.renderChip(b),f=[],g=c.data("chips"),h=0;h<g.length;h++)f.push(g[h]);f.push(b),c.data("chips",f),a(d).insertBefore(c.find("input")),c.trigger("chip.add",b),e.setPlaceholder(c)}},this.deleteChip=function(a,b){var c=b.data("chips")[a];b.find(".chip").eq(a).remove();for(var d=[],f=b.data("chips"),g=0;g<f.length;g++)g!==a&&d.push(f[g]);b.data("chips",d),b.trigger("chip.delete",c),e.setPlaceholder(b)},this.selectChip=function(a,b){var c=b.find(".chip").eq(a);c&&!1===c.hasClass("selected")&&(c.addClass("selected"),b.trigger("chip.select",b.data("chips")[a]))},this.getChipsElement=function(a,b){return b.eq(a)},this.init(),b||(this.handleEvents(),b=!0)}}(jQuery),function(a){a.fn.pushpin=function(b){var c={top:0,bottom:1/0,offset:0};return"remove"===b?(this.each(function(){(id=a(this).data("pushpin-id"))&&(a(window).off("scroll."+id),a(this).removeData("pushpin-id").removeClass("pin-top pinned pin-bottom").removeAttr("style"))}),!1):(b=a.extend(c,b),$index=0,this.each(function(){function c(a){a.removeClass("pin-top"),a.removeClass("pinned"),a.removeClass("pin-bottom")}function d(d,e){d.each(function(){b.top<=e&&b.bottom>=e&&!a(this).hasClass("pinned")&&(c(a(this)),a(this).css("top",b.offset),a(this).addClass("pinned")),e<b.top&&!a(this).hasClass("pin-top")&&(c(a(this)),a(this).css("top",0),a(this).addClass("pin-top")),e>b.bottom&&!a(this).hasClass("pin-bottom")&&(c(a(this)),a(this).addClass("pin-bottom"),a(this).css("top",b.bottom-g))})}var e=Materialize.guid(),f=a(this),g=a(this).offset().top;a(this).data("pushpin-id",e),d(f,a(window).scrollTop()),a(window).on("scroll."+e,function(){var c=a(window).scrollTop()+b.offset;d(f,c)})}))}}(jQuery),function(a){a(document).ready(function(){a.fn.reverse=[].reverse,a(document).on("mouseenter.fixedActionBtn",".fixed-action-btn:not(.click-to-toggle):not(.toolbar)",function(c){var d=a(this);b(d)}),a(document).on("mouseleave.fixedActionBtn",".fixed-action-btn:not(.click-to-toggle):not(.toolbar)",function(b){var d=a(this);c(d)}),a(document).on("click.fabClickToggle",".fixed-action-btn.click-to-toggle > a",function(d){var e=a(this),f=e.parent();f.hasClass("active")?c(f):b(f)}),a(document).on("click.fabToolbar",".fixed-action-btn.toolbar > a",function(b){var c=a(this),e=c.parent();d(e)})}),a.fn.extend({openFAB:function(){b(a(this))},closeFAB:function(){c(a(this))},openToolbar:function(){d(a(this))},closeToolbar:function(){e(a(this))}});var b=function(b){var c=b;if(c.hasClass("active")===!1){var d,e,f=c.hasClass("horizontal");f===!0?e=40:d=40,c.addClass("active"),c.find("ul .btn-floating").velocity({scaleY:".4",scaleX:".4",translateY:d+"px",translateX:e+"px"},{duration:0});var g=0;c.find("ul .btn-floating").reverse().each(function(){a(this).velocity({opacity:"1",scaleX:"1",scaleY:"1",translateY:"0",translateX:"0"},{duration:80,delay:g}),g+=40})}},c=function(a){var b,c,d=a,e=d.hasClass("horizontal");e===!0?c=40:b=40,d.removeClass("active");d.find("ul .btn-floating").velocity("stop",!0),d.find("ul .btn-floating").velocity({opacity:"0",scaleX:".4",scaleY:".4",translateY:b+"px",translateX:c+"px"},{duration:80})},d=function(b){if("true"!==b.attr("data-open")){var c,d,f,g=window.innerWidth,h=window.innerHeight,i=b[0].getBoundingClientRect(),j=b.find("> a").first(),k=b.find("> ul").first(),l=a('<div class="fab-backdrop"></div>'),m=j.css("background-color");j.append(l),c=i.left-g/2+i.width/2,d=h-i.bottom,f=g/l.width(),b.attr("data-origin-bottom",i.bottom),b.attr("data-origin-left",i.left),b.attr("data-origin-width",i.width),b.addClass("active"),b.attr("data-open",!0),b.css({"text-align":"center",width:"100%",bottom:0,left:0,transform:"translateX("+c+"px)",transition:"none"}),j.css({transform:"translateY("+-d+"px)",transition:"none"}),l.css({"background-color":m}),setTimeout(function(){b.css({transform:"",transition:"transform .2s cubic-bezier(0.550, 0.085, 0.680, 0.530), background-color 0s linear .2s"}),j.css({overflow:"visible",transform:"",transition:"transform .2s"}),setTimeout(function(){b.css({overflow:"hidden","background-color":m}),l.css({transform:"scale("+f+")",transition:"transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)"}),k.find("> li > a").css({opacity:1}),a(window).on("scroll.fabToolbarClose",function(){e(b),a(window).off("scroll.fabToolbarClose"),a(document).off("click.fabToolbarClose")}),a(document).on("click.fabToolbarClose",function(c){a(c.target).closest(k).length||(e(b),a(window).off("scroll.fabToolbarClose"),a(document).off("click.fabToolbarClose"))})},100)},0)}},e=function(a){if("true"===a.attr("data-open")){var b,c,d,e=window.innerWidth,f=window.innerHeight,g=a.attr("data-origin-width"),h=a.attr("data-origin-bottom"),i=a.attr("data-origin-left"),j=a.find("> .btn-floating").first(),k=a.find("> ul").first(),l=a.find(".fab-backdrop"),m=j.css("background-color");b=i-e/2+g/2,c=f-h,d=e/l.width(),a.removeClass("active"),a.attr("data-open",!1),a.css({"background-color":"transparent",transition:"none"}),j.css({transition:"none"}),l.css({transform:"scale(0)","background-color":m}),k.find("> li > a").css({opacity:""}),setTimeout(function(){l.remove(),a.css({"text-align":"",width:"",bottom:"",left:"",overflow:"","background-color":"",transform:"translate3d("+-b+"px,0,0)"}),j.css({overflow:"",transform:"translate3d(0,"+c+"px,0)"}),setTimeout(function(){a.css({transform:"translate3d(0,0,0)",transition:"transform .2s"}),j.css({transform:"translate3d(0,0,0)",transition:"transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)"})},20)},200)}}}(jQuery),function(a){Materialize.fadeInImage=function(b){var c;if("string"==typeof b)c=a(b);else{if("object"!=typeof b)return;c=b}c.css({opacity:0}),a(c).velocity({opacity:1},{duration:650,queue:!1,easing:"easeOutSine"}),a(c).velocity({opacity:1},{duration:1300,queue:!1,easing:"swing",step:function(b,c){c.start=100;var d=b/100,e=150-(100-b)/1.75;100>e&&(e=100),b>=0&&a(this).css({"-webkit-filter":"grayscale("+d+")brightness("+e+"%)",filter:"grayscale("+d+")brightness("+e+"%)"})}})},Materialize.showStaggeredList=function(b){var c;if("string"==typeof b)c=a(b);else{if("object"!=typeof b)return;c=b}var d=0;c.find("li").velocity({translateX:"-100px"},{duration:0}),c.find("li").each(function(){a(this).velocity({opacity:"1",translateX:"0"},{duration:800,delay:d,easing:[60,10]}),d+=120})},a(document).ready(function(){var b=!1,c=!1;a(".dismissable").each(function(){a(this).hammer({prevent_default:!1}).bind("pan",function(d){if("touch"===d.gesture.pointerType){var e=a(this),f=d.gesture.direction,g=d.gesture.deltaX,h=d.gesture.velocityX;e.velocity({translateX:g},{duration:50,queue:!1,easing:"easeOutQuad"}),4===f&&(g>e.innerWidth()/2||-.75>h)&&(b=!0),2===f&&(g<-1*e.innerWidth()/2||h>.75)&&(c=!0)}}).bind("panend",function(d){if(Math.abs(d.gesture.deltaX)<a(this).innerWidth()/2&&(c=!1,b=!1),"touch"===d.gesture.pointerType){var e=a(this);if(b||c){var f;f=b?e.innerWidth():-1*e.innerWidth(),e.velocity({translateX:f},{duration:100,queue:!1,easing:"easeOutQuad",complete:function(){e.css("border","none"),e.velocity({height:0,padding:0},{duration:200,queue:!1,easing:"easeOutQuad",complete:function(){e.remove()}})}})}else e.velocity({translateX:0},{duration:100,queue:!1,easing:"easeOutQuad"});b=!1,c=!1}})})})}(jQuery),function(a){Materialize.scrollFire=function(a){var b=!1;window.addEventListener("scroll",function(){b=!0}),setInterval(function(){if(b){b=!1;for(var c=window.pageYOffset+window.innerHeight,d=0;d<a.length;d++){var e=a[d],f=e.selector,g=e.offset,h=e.callback,i=document.querySelector(f);if(null!==i){var j=i.getBoundingClientRect().top+window.pageYOffset;if(c>j+g&&e.done!==!0){if("function"==typeof h)h.call(this,i);else if("string"==typeof h){var k=new Function(h);k(i)}e.done=!0}}}}},100)}}(jQuery),function(a){"function"==typeof define&&define.amd?define("picker",["jquery"],a):"object"==typeof exports?module.exports=a(require("jquery")):this.Picker=a(jQuery)}(function(a){function b(f,g,i,l){function m(){return b._.node("div",b._.node("div",b._.node("div",b._.node("div",y.component.nodes(t.open),v.box),v.wrap),v.frame),v.holder)}function n(){w.data(g,y).addClass(v.input).attr("tabindex",-1).val(w.data("value")?y.get("select",u.format):f.value),u.editable||w.on("focus."+t.id+" click."+t.id,function(a){a.preventDefault(),y.$root.eq(0).focus()}).on("keydown."+t.id,q),e(f,{haspopup:!0,expanded:!1,readonly:!1,owns:f.id+"_root"})}function o(){y.$root.on({keydown:q,focusin:function(a){y.$root.removeClass(v.focused),a.stopPropagation()},"mousedown click":function(b){var c=b.target;c!=y.$root.children()[0]&&(b.stopPropagation(),"mousedown"!=b.type||a(c).is("input, select, textarea, button, option")||(b.preventDefault(),y.$root.eq(0).focus()))}}).on({focus:function(){w.addClass(v.target)},blur:function(){w.removeClass(v.target)}}).on("focus.toOpen",r).on("click","[data-pick], [data-nav], [data-clear], [data-close]",function(){var b=a(this),c=b.data(),d=b.hasClass(v.navDisabled)||b.hasClass(v.disabled),e=h();e=e&&(e.type||e.href),(d||e&&!a.contains(y.$root[0],e))&&y.$root.eq(0).focus(),!d&&c.nav?y.set("highlight",y.component.item.highlight,{nav:c.nav}):!d&&"pick"in c?y.set("select",c.pick):c.clear?y.clear().close(!0):c.close&&y.close(!0)}),e(y.$root[0],"hidden",!0)}function p(){var b;u.hiddenName===!0?(b=f.name,f.name=""):(b=["string"==typeof u.hiddenPrefix?u.hiddenPrefix:"","string"==typeof u.hiddenSuffix?u.hiddenSuffix:"_submit"],b=b[0]+f.name+b[1]),y._hidden=a('<input type=hidden name="'+b+'"'+(w.data("value")||f.value?' value="'+y.get("select",u.formatSubmit)+'"':"")+">")[0],w.on("change."+t.id,function(){y._hidden.value=f.value?y.get("select",u.formatSubmit):""}),u.container?a(u.container).append(y._hidden):w.after(y._hidden)}function q(a){var b=a.keyCode,c=/^(8|46)$/.test(b);return 27==b?(y.close(),!1):void((32==b||c||!t.open&&y.component.key[b])&&(a.preventDefault(),a.stopPropagation(),c?y.clear().close():y.open()))}function r(a){a.stopPropagation(),"focus"==a.type&&y.$root.addClass(v.focused),y.open()}if(!f)return b;var s=!1,t={id:f.id||"P"+Math.abs(~~(Math.random()*new Date))},u=i?a.extend(!0,{},i.defaults,l):l||{},v=a.extend({},b.klasses(),u.klass),w=a(f),x=function(){return this.start()},y=x.prototype={constructor:x,$node:w,start:function(){return t&&t.start?y:(t.methods={},t.start=!0,t.open=!1,t.type=f.type,f.autofocus=f==h(),f.readOnly=!u.editable,f.id=f.id||t.id,"text"!=f.type&&(f.type="text"),y.component=new i(y,u),y.$root=a(b._.node("div",m(),v.picker,'id="'+f.id+'_root" tabindex="0"')),o(),u.formatSubmit&&p(),n(),u.container?a(u.container).append(y.$root):w.after(y.$root),y.on({start:y.component.onStart,render:y.component.onRender,stop:y.component.onStop,open:y.component.onOpen,close:y.component.onClose,set:y.component.onSet}).on({start:u.onStart,render:u.onRender,stop:u.onStop,open:u.onOpen,close:u.onClose,set:u.onSet}),s=c(y.$root.children()[0]),f.autofocus&&y.open(),y.trigger("start").trigger("render"))},render:function(a){return a?y.$root.html(m()):y.$root.find("."+v.box).html(y.component.nodes(t.open)),y.trigger("render")},stop:function(){return t.start?(y.close(),y._hidden&&y._hidden.parentNode.removeChild(y._hidden),y.$root.remove(),w.removeClass(v.input).removeData(g),setTimeout(function(){w.off("."+t.id)},0),f.type=t.type,f.readOnly=!1,y.trigger("stop"),t.methods={},t.start=!1,y):y},open:function(c){return t.open?y:(w.addClass(v.active),e(f,"expanded",!0),setTimeout(function(){y.$root.addClass(v.opened),e(y.$root[0],"hidden",!1)},0),c!==!1&&(t.open=!0,s&&k.css("overflow","hidden").css("padding-right","+="+d()),y.$root.eq(0).focus(),j.on("click."+t.id+" focusin."+t.id,function(a){var b=a.target;b!=f&&b!=document&&3!=a.which&&y.close(b===y.$root.children()[0])}).on("keydown."+t.id,function(c){var d=c.keyCode,e=y.component.key[d],f=c.target;27==d?y.close(!0):f!=y.$root[0]||!e&&13!=d?a.contains(y.$root[0],f)&&13==d&&(c.preventDefault(),f.click()):(c.preventDefault(),e?b._.trigger(y.component.key.go,y,[b._.trigger(e)]):y.$root.find("."+v.highlighted).hasClass(v.disabled)||y.set("select",y.component.item.highlight).close())})),y.trigger("open"))},close:function(a){return a&&(y.$root.off("focus.toOpen").eq(0).focus(),setTimeout(function(){y.$root.on("focus.toOpen",r)},0)),w.removeClass(v.active),e(f,"expanded",!1),setTimeout(function(){y.$root.removeClass(v.opened+" "+v.focused),e(y.$root[0],"hidden",!0)},0),t.open?(t.open=!1,s&&k.css("overflow","").css("padding-right","-="+d()),j.off("."+t.id),y.trigger("close")):y},clear:function(a){return y.set("clear",null,a)},set:function(b,c,d){var e,f,g=a.isPlainObject(b),h=g?b:{};if(d=g&&a.isPlainObject(c)?c:d||{},b){g||(h[b]=c);for(e in h)f=h[e],e in y.component.item&&(void 0===f&&(f=null),y.component.set(e,f,d)),("select"==e||"clear"==e)&&w.val("clear"==e?"":y.get(e,u.format)).trigger("change");y.render()}return d.muted?y:y.trigger("set",h)},get:function(a,c){if(a=a||"value",null!=t[a])return t[a];if("valueSubmit"==a){if(y._hidden)return y._hidden.value;a="value"}if("value"==a)return f.value;if(a in y.component.item){if("string"==typeof c){var d=y.component.get(a);return d?b._.trigger(y.component.formats.toString,y.component,[c,d]):""}return y.component.get(a)}},on:function(b,c,d){var e,f,g=a.isPlainObject(b),h=g?b:{};if(b){g||(h[b]=c);for(e in h)f=h[e],d&&(e="_"+e),t.methods[e]=t.methods[e]||[],t.methods[e].push(f)}return y},off:function(){var a,b,c=arguments;for(a=0,namesCount=c.length;a<namesCount;a+=1)b=c[a],b in t.methods&&delete t.methods[b];return y},trigger:function(a,c){var d=function(a){var d=t.methods[a];d&&d.map(function(a){b._.trigger(a,y,[c])})};return d("_"+a),d(a),y}};return new x}function c(a){var b,c="position";return a.currentStyle?b=a.currentStyle[c]:window.getComputedStyle&&(b=getComputedStyle(a)[c]),"fixed"==b}function d(){if(k.height()<=i.height())return 0;var b=a('<div style="visibility:hidden;width:100px" />').appendTo("body"),c=b[0].offsetWidth;b.css("overflow","scroll");var d=a('<div style="width:100%" />').appendTo(b),e=d[0].offsetWidth;return b.remove(),c-e}function e(b,c,d){if(a.isPlainObject(c))for(var e in c)f(b,e,c[e]);else f(b,c,d)}function f(a,b,c){a.setAttribute(("role"==b?"":"aria-")+b,c)}function g(b,c){a.isPlainObject(b)||(b={attribute:c}),c="";for(var d in b){var e=("role"==d?"":"aria-")+d,f=b[d];c+=null==f?"":e+'="'+b[d]+'"'}return c}function h(){try{return document.activeElement}catch(a){}}var i=a(window),j=a(document),k=a(document.documentElement);return b.klasses=function(a){return a=a||"picker",{picker:a,opened:a+"--opened",focused:a+"--focused",input:a+"__input",active:a+"__input--active",target:a+"__input--target",holder:a+"__holder",frame:a+"__frame",wrap:a+"__wrap",box:a+"__box"}},b._={group:function(a){for(var c,d="",e=b._.trigger(a.min,a);e<=b._.trigger(a.max,a,[e]);e+=a.i)c=b._.trigger(a.item,a,[e]),d+=b._.node(a.node,c[0],c[1],c[2]);return d},node:function(b,c,d,e){return c?(c=a.isArray(c)?c.join(""):c,d=d?' class="'+d+'"':"",e=e?" "+e:"","<"+b+d+e+">"+c+"</"+b+">"):""},lead:function(a){return(10>a?"0":"")+a},trigger:function(a,b,c){return"function"==typeof a?a.apply(b,c||[]):a},digits:function(a){return/\d/.test(a[1])?2:1},isDate:function(a){return{}.toString.call(a).indexOf("Date")>-1&&this.isInteger(a.getDate())},isInteger:function(a){return{}.toString.call(a).indexOf("Number")>-1&&a%1===0},ariaAttr:g},b.extend=function(c,d){a.fn[c]=function(e,f){var g=this.data(c);return"picker"==e?g:g&&"string"==typeof e?b._.trigger(g[e],g,[f]):this.each(function(){var f=a(this);f.data(c)||new b(this,c,d,e)})},a.fn[c].defaults=d.defaults},b}),function(a){"function"==typeof define&&define.amd?define(["picker","jquery"],a):"object"==typeof exports?module.exports=a(require("./picker.js"),require("jquery")):a(Picker,jQuery)}(function(a,b){function c(a,b){var c=this,d=a.$node[0],e=d.value,f=a.$node.data("value"),g=f||e,h=f?b.formatSubmit:b.format,i=function(){return d.currentStyle?"rtl"==d.currentStyle.direction:"rtl"==getComputedStyle(a.$root[0]).direction};c.settings=b,c.$node=a.$node,c.queue={min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"parse navigate create validate",view:"parse create validate viewset",disable:"deactivate",enable:"activate"},c.item={},c.item.clear=null,c.item.disable=(b.disable||[]).slice(0),c.item.enable=-function(a){return a[0]===!0?a.shift():-1}(c.item.disable),c.set("min",b.min).set("max",b.max).set("now"),g?c.set("select",g,{format:h}):c.set("select",null).set("highlight",c.item.now),c.key={40:7,38:-7,39:function(){return i()?-1:1},37:function(){return i()?1:-1},go:function(a){var b=c.item.highlight,d=new Date(b.year,b.month,b.date+a);c.set("highlight",d,{interval:a}),this.render()}},a.on("render",function(){a.$root.find("."+b.klass.selectMonth).on("change",function(){var c=this.value;c&&(a.set("highlight",[a.get("view").year,c,a.get("highlight").date]),a.$root.find("."+b.klass.selectMonth).trigger("focus"))}),a.$root.find("."+b.klass.selectYear).on("change",function(){var c=this.value;c&&(a.set("highlight",[c,a.get("view").month,a.get("highlight").date]),a.$root.find("."+b.klass.selectYear).trigger("focus"))})},1).on("open",function(){var d="";c.disabled(c.get("now"))&&(d=":not(."+b.klass.buttonToday+")"),a.$root.find("button"+d+", select").attr("disabled",!1)},1).on("close",function(){a.$root.find("button, select").attr("disabled",!0)},1)}var d=7,e=6,f=a._;c.prototype.set=function(a,b,c){var d=this,e=d.item;return null===b?("clear"==a&&(a="select"),e[a]=b,d):(e["enable"==a?"disable":"flip"==a?"enable":a]=d.queue[a].split(" ").map(function(e){return b=d[e](a,b,c)}).pop(),"select"==a?d.set("highlight",e.select,c):"highlight"==a?d.set("view",e.highlight,c):a.match(/^(flip|min|max|disable|enable)$/)&&(e.select&&d.disabled(e.select)&&d.set("select",e.select,c),e.highlight&&d.disabled(e.highlight)&&d.set("highlight",e.highlight,c)),d)},c.prototype.get=function(a){return this.item[a]},c.prototype.create=function(a,c,d){var e,g=this;return c=void 0===c?a:c,c==-(1/0)||c==1/0?e=c:b.isPlainObject(c)&&f.isInteger(c.pick)?c=c.obj:b.isArray(c)?(c=new Date(c[0],c[1],c[2]),c=f.isDate(c)?c:g.create().obj):c=f.isInteger(c)||f.isDate(c)?g.normalize(new Date(c),d):g.now(a,c,d),{year:e||c.getFullYear(),month:e||c.getMonth(),date:e||c.getDate(),day:e||c.getDay(),obj:e||c,pick:e||c.getTime()}},c.prototype.createRange=function(a,c){var d=this,e=function(a){return a===!0||b.isArray(a)||f.isDate(a)?d.create(a):a};return f.isInteger(a)||(a=e(a)),f.isInteger(c)||(c=e(c)),f.isInteger(a)&&b.isPlainObject(c)?a=[c.year,c.month,c.date+a]:f.isInteger(c)&&b.isPlainObject(a)&&(c=[a.year,a.month,a.date+c]),{from:e(a),to:e(c)}},c.prototype.withinRange=function(a,b){return a=this.createRange(a.from,a.to),b.pick>=a.from.pick&&b.pick<=a.to.pick},c.prototype.overlapRanges=function(a,b){var c=this;return a=c.createRange(a.from,a.to),b=c.createRange(b.from,b.to),c.withinRange(a,b.from)||c.withinRange(a,b.to)||c.withinRange(b,a.from)||c.withinRange(b,a.to)},c.prototype.now=function(a,b,c){return b=new Date,c&&c.rel&&b.setDate(b.getDate()+c.rel),this.normalize(b,c)},c.prototype.navigate=function(a,c,d){var e,f,g,h,i=b.isArray(c),j=b.isPlainObject(c),k=this.item.view;if(i||j){for(j?(f=c.year,g=c.month,h=c.date):(f=+c[0],g=+c[1],h=+c[2]),d&&d.nav&&k&&k.month!==g&&(f=k.year,g=k.month),e=new Date(f,g+(d&&d.nav?d.nav:0),1),f=e.getFullYear(),g=e.getMonth();new Date(f,g,h).getMonth()!==g;)h-=1;c=[f,g,h]}return c},c.prototype.normalize=function(a){return a.setHours(0,0,0,0),a},c.prototype.measure=function(a,b){var c=this;return b?"string"==typeof b?b=c.parse(a,b):f.isInteger(b)&&(b=c.now(a,b,{rel:b})):b="min"==a?-(1/0):1/0,b},c.prototype.viewset=function(a,b){return this.create([b.year,b.month,1])},c.prototype.validate=function(a,c,d){var e,g,h,i,j=this,k=c,l=d&&d.interval?d.interval:1,m=-1===j.item.enable,n=j.item.min,o=j.item.max,p=m&&j.item.disable.filter(function(a){if(b.isArray(a)){var d=j.create(a).pick;d<c.pick?e=!0:d>c.pick&&(g=!0)}return f.isInteger(a)}).length;if((!d||!d.nav)&&(!m&&j.disabled(c)||m&&j.disabled(c)&&(p||e||g)||!m&&(c.pick<=n.pick||c.pick>=o.pick)))for(m&&!p&&(!g&&l>0||!e&&0>l)&&(l*=-1);j.disabled(c)&&(Math.abs(l)>1&&(c.month<k.month||c.month>k.month)&&(c=k,l=l>0?1:-1),c.pick<=n.pick?(h=!0,l=1,c=j.create([n.year,n.month,n.date+(c.pick===n.pick?0:-1)])):c.pick>=o.pick&&(i=!0,l=-1,c=j.create([o.year,o.month,o.date+(c.pick===o.pick?0:1)])),!h||!i);)c=j.create([c.year,c.month,c.date+l]);return c},c.prototype.disabled=function(a){var c=this,d=c.item.disable.filter(function(d){return f.isInteger(d)?a.day===(c.settings.firstDay?d:d-1)%7:b.isArray(d)||f.isDate(d)?a.pick===c.create(d).pick:b.isPlainObject(d)?c.withinRange(d,a):void 0;
});return d=d.length&&!d.filter(function(a){return b.isArray(a)&&"inverted"==a[3]||b.isPlainObject(a)&&a.inverted}).length,-1===c.item.enable?!d:d||a.pick<c.item.min.pick||a.pick>c.item.max.pick},c.prototype.parse=function(a,b,c){var d=this,e={};return b&&"string"==typeof b?(c&&c.format||(c=c||{},c.format=d.settings.format),d.formats.toArray(c.format).map(function(a){var c=d.formats[a],g=c?f.trigger(c,d,[b,e]):a.replace(/^!/,"").length;c&&(e[a]=b.substr(0,g)),b=b.substr(g)}),[e.yyyy||e.yy,+(e.mm||e.m)-1,e.dd||e.d]):b},c.prototype.formats=function(){function a(a,b,c){var d=a.match(/\w+/)[0];return c.mm||c.m||(c.m=b.indexOf(d)+1),d.length}function b(a){return a.match(/\w+/)[0].length}return{d:function(a,b){return a?f.digits(a):b.date},dd:function(a,b){return a?2:f.lead(b.date)},ddd:function(a,c){return a?b(a):this.settings.weekdaysShort[c.day]},dddd:function(a,c){return a?b(a):this.settings.weekdaysFull[c.day]},m:function(a,b){return a?f.digits(a):b.month+1},mm:function(a,b){return a?2:f.lead(b.month+1)},mmm:function(b,c){var d=this.settings.monthsShort;return b?a(b,d,c):d[c.month]},mmmm:function(b,c){var d=this.settings.monthsFull;return b?a(b,d,c):d[c.month]},yy:function(a,b){return a?2:(""+b.year).slice(2)},yyyy:function(a,b){return a?4:b.year},toArray:function(a){return a.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g)},toString:function(a,b){var c=this;return c.formats.toArray(a).map(function(a){return f.trigger(c.formats[a],c,[0,b])||a.replace(/^!/,"")}).join("")}}}(),c.prototype.isDateExact=function(a,c){var d=this;return f.isInteger(a)&&f.isInteger(c)||"boolean"==typeof a&&"boolean"==typeof c?a===c:(f.isDate(a)||b.isArray(a))&&(f.isDate(c)||b.isArray(c))?d.create(a).pick===d.create(c).pick:b.isPlainObject(a)&&b.isPlainObject(c)?d.isDateExact(a.from,c.from)&&d.isDateExact(a.to,c.to):!1},c.prototype.isDateOverlap=function(a,c){var d=this,e=d.settings.firstDay?1:0;return f.isInteger(a)&&(f.isDate(c)||b.isArray(c))?(a=a%7+e,a===d.create(c).day+1):f.isInteger(c)&&(f.isDate(a)||b.isArray(a))?(c=c%7+e,c===d.create(a).day+1):b.isPlainObject(a)&&b.isPlainObject(c)?d.overlapRanges(a,c):!1},c.prototype.flipEnable=function(a){var b=this.item;b.enable=a||(-1==b.enable?1:-1)},c.prototype.deactivate=function(a,c){var d=this,e=d.item.disable.slice(0);return"flip"==c?d.flipEnable():c===!1?(d.flipEnable(1),e=[]):c===!0?(d.flipEnable(-1),e=[]):c.map(function(a){for(var c,g=0;g<e.length;g+=1)if(d.isDateExact(a,e[g])){c=!0;break}c||(f.isInteger(a)||f.isDate(a)||b.isArray(a)||b.isPlainObject(a)&&a.from&&a.to)&&e.push(a)}),e},c.prototype.activate=function(a,c){var d=this,e=d.item.disable,g=e.length;return"flip"==c?d.flipEnable():c===!0?(d.flipEnable(1),e=[]):c===!1?(d.flipEnable(-1),e=[]):c.map(function(a){var c,h,i,j;for(i=0;g>i;i+=1){if(h=e[i],d.isDateExact(h,a)){c=e[i]=null,j=!0;break}if(d.isDateOverlap(h,a)){b.isPlainObject(a)?(a.inverted=!0,c=a):b.isArray(a)?(c=a,c[3]||c.push("inverted")):f.isDate(a)&&(c=[a.getFullYear(),a.getMonth(),a.getDate(),"inverted"]);break}}if(c)for(i=0;g>i;i+=1)if(d.isDateExact(e[i],a)){e[i]=null;break}if(j)for(i=0;g>i;i+=1)if(d.isDateOverlap(e[i],a)){e[i]=null;break}c&&e.push(c)}),e.filter(function(a){return null!=a})},c.prototype.nodes=function(a){var b=this,c=b.settings,g=b.item,h=g.now,i=g.select,j=g.highlight,k=g.view,l=g.disable,m=g.min,n=g.max,o=function(a,b){return c.firstDay&&(a.push(a.shift()),b.push(b.shift())),f.node("thead",f.node("tr",f.group({min:0,max:d-1,i:1,node:"th",item:function(d){return[a[d],c.klass.weekdays,'scope=col title="'+b[d]+'"']}})))}((c.showWeekdaysFull?c.weekdaysFull:c.weekdaysLetter).slice(0),c.weekdaysFull.slice(0)),p=function(a){return f.node("div"," ",c.klass["nav"+(a?"Next":"Prev")]+(a&&k.year>=n.year&&k.month>=n.month||!a&&k.year<=m.year&&k.month<=m.month?" "+c.klass.navDisabled:""),"data-nav="+(a||-1)+" "+f.ariaAttr({role:"button",controls:b.$node[0].id+"_table"})+' title="'+(a?c.labelMonthNext:c.labelMonthPrev)+'"')},q=function(d){var e=c.showMonthsShort?c.monthsShort:c.monthsFull;return"short_months"==d&&(e=c.monthsShort),c.selectMonths&&void 0==d?f.node("select",f.group({min:0,max:11,i:1,node:"option",item:function(a){return[e[a],0,"value="+a+(k.month==a?" selected":"")+(k.year==m.year&&a<m.month||k.year==n.year&&a>n.month?" disabled":"")]}}),c.klass.selectMonth+" browser-default",(a?"":"disabled")+" "+f.ariaAttr({controls:b.$node[0].id+"_table"})+' title="'+c.labelMonthSelect+'"'):"short_months"==d?null!=i?f.node("div",e[i.month]):f.node("div",e[k.month]):f.node("div",e[k.month],c.klass.month)},r=function(d){var e=k.year,g=c.selectYears===!0?5:~~(c.selectYears/2);if(g){var h=m.year,i=n.year,j=e-g,l=e+g;if(h>j&&(l+=h-j,j=h),l>i){var o=j-h,p=l-i;j-=o>p?p:o,l=i}if(c.selectYears&&void 0==d)return f.node("select",f.group({min:j,max:l,i:1,node:"option",item:function(a){return[a,0,"value="+a+(e==a?" selected":"")]}}),c.klass.selectYear+" browser-default",(a?"":"disabled")+" "+f.ariaAttr({controls:b.$node[0].id+"_table"})+' title="'+c.labelYearSelect+'"')}return"raw"==d?f.node("div",e):f.node("div",e,c.klass.year)};return createDayLabel=function(){return null!=i?f.node("div",i.date):f.node("div",h.date)},createWeekdayLabel=function(){var a;a=null!=i?i.day:h.day;var b=c.weekdaysFull[a];return b},f.node("div",f.node("div",createWeekdayLabel(),"picker__weekday-display")+f.node("div",q("short_months"),c.klass.month_display)+f.node("div",createDayLabel(),c.klass.day_display)+f.node("div",r("raw"),c.klass.year_display),c.klass.date_display)+f.node("div",f.node("div",(c.selectYears?q()+r():q()+r())+p()+p(1),c.klass.header)+f.node("table",o+f.node("tbody",f.group({min:0,max:e-1,i:1,node:"tr",item:function(a){var e=c.firstDay&&0===b.create([k.year,k.month,1]).day?-7:0;return[f.group({min:d*a-k.day+e+1,max:function(){return this.min+d-1},i:1,node:"td",item:function(a){a=b.create([k.year,k.month,a+(c.firstDay?1:0)]);var d=i&&i.pick==a.pick,e=j&&j.pick==a.pick,g=l&&b.disabled(a)||a.pick<m.pick||a.pick>n.pick,o=f.trigger(b.formats.toString,b,[c.format,a]);return[f.node("div",a.date,function(b){return b.push(k.month==a.month?c.klass.infocus:c.klass.outfocus),h.pick==a.pick&&b.push(c.klass.now),d&&b.push(c.klass.selected),e&&b.push(c.klass.highlighted),g&&b.push(c.klass.disabled),b.join(" ")}([c.klass.day]),"data-pick="+a.pick+" "+f.ariaAttr({role:"gridcell",label:o,selected:d&&b.$node.val()===o?!0:null,activedescendant:e?!0:null,disabled:g?!0:null})),"",f.ariaAttr({role:"presentation"})]}})]}})),c.klass.table,'id="'+b.$node[0].id+'_table" '+f.ariaAttr({role:"grid",controls:b.$node[0].id,readonly:!0})),c.klass.calendar_container)+f.node("div",f.node("button",c.today,"btn-flat picker__today","type=button data-pick="+h.pick+(a&&!b.disabled(h)?"":" disabled")+" "+f.ariaAttr({controls:b.$node[0].id}))+f.node("button",c.clear,"btn-flat picker__clear","type=button data-clear=1"+(a?"":" disabled")+" "+f.ariaAttr({controls:b.$node[0].id}))+f.node("button",c.close,"btn-flat picker__close","type=button data-close=true "+(a?"":" disabled")+" "+f.ariaAttr({controls:b.$node[0].id})),c.klass.footer)},c.defaults=function(a){return{labelMonthNext:"Next month",labelMonthPrev:"Previous month",labelMonthSelect:"Select a month",labelYearSelect:"Select a year",monthsFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdaysFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysLetter:["S","M","T","W","T","F","S"],today:"Today",clear:"Clear",close:"Close",format:"d mmmm, yyyy",klass:{table:a+"table",header:a+"header",date_display:a+"date-display",day_display:a+"day-display",month_display:a+"month-display",year_display:a+"year-display",calendar_container:a+"calendar-container",navPrev:a+"nav--prev",navNext:a+"nav--next",navDisabled:a+"nav--disabled",month:a+"month",year:a+"year",selectMonth:a+"select--month",selectYear:a+"select--year",weekdays:a+"weekday",day:a+"day",disabled:a+"day--disabled",selected:a+"day--selected",highlighted:a+"day--highlighted",now:a+"day--today",infocus:a+"day--infocus",outfocus:a+"day--outfocus",footer:a+"footer",buttonClear:a+"button--clear",buttonToday:a+"button--today",buttonClose:a+"button--close"}}}(a.klasses().picker+"__"),a.extend("pickadate",c)}),function(a){function b(){var b=+a(this).attr("length"),c=+a(this).val().length,d=b>=c;a(this).parent().find('span[class="character-counter"]').html(c+"/"+b),e(d,a(this))}function c(b){var c=b.parent().find('span[class="character-counter"]');c.length||(c=a("<span/>").addClass("character-counter").css("float","right").css("font-size","12px").css("height",1),b.parent().append(c))}function d(){a(this).parent().find('span[class="character-counter"]').html("")}function e(a,b){var c=b.hasClass("invalid");a&&c?b.removeClass("invalid"):a||c||(b.removeClass("valid"),b.addClass("invalid"))}a.fn.characterCounter=function(){return this.each(function(){var e=a(this),f=e.parent().find('span[class="character-counter"]');if(!f.length){var g=void 0!==e.attr("length");g&&(e.on("input",b),e.on("focus",b),e.on("blur",d),c(e))}})},a(document).ready(function(){a("input, textarea").characterCounter()})}(jQuery),function(a){var b={init:function(b){var c={time_constant:200,dist:-100,shift:0,padding:0,full_width:!1,indicators:!1,no_wrap:!1};return b=a.extend(c,b),this.each(function(){function c(){"undefined"!=typeof window.ontouchstart&&(H[0].addEventListener("touchstart",l),H[0].addEventListener("touchmove",m),H[0].addEventListener("touchend",n)),H[0].addEventListener("mousedown",l),H[0].addEventListener("mousemove",m),H[0].addEventListener("mouseup",n),H[0].addEventListener("mouseleave",n),H[0].addEventListener("click",j)}function d(a){return a.targetTouches&&a.targetTouches.length>=1?a.targetTouches[0].clientX:a.clientX}function e(a){return a.targetTouches&&a.targetTouches.length>=1?a.targetTouches[0].clientY:a.clientY}function f(a){return a>=t?a%t:0>a?f(t+a%t):a}function g(a){var c,d,e,g,h,i,j;if(p="number"==typeof a?a:p,q=Math.floor((p+s/2)/s),e=p-q*s,g=0>e?1:-1,h=-g*e*2/s,d=t>>1,b.full_width?j="translateX(0)":(j="translateX("+(H[0].clientWidth-item_width)/2+"px) ",j+="translateY("+(H[0].clientHeight-item_width)/2+"px)"),I){var k=q%t,l=G.find(".indicator-item.active");l.index()!==k&&(l.removeClass("active"),G.find(".indicator-item").eq(k).addClass("active"))}for((!b.no_wrap||q>=0&&t>q)&&(i=o[f(q)],i.style[A]=j+" translateX("+-e/2+"px) translateX("+g*b.shift*h*c+"px) translateZ("+b.dist*h+"px)",i.style.zIndex=0,b.full_width?tweenedOpacity=1:tweenedOpacity=1-.2*h,i.style.opacity=tweenedOpacity,i.style.display="block"),c=1;d>=c;++c)b.full_width?(zTranslation=b.dist,tweenedOpacity=c===d&&0>e?1-h:1):(zTranslation=b.dist*(2*c+h*g),tweenedOpacity=1-.2*(2*c+h*g)),(!b.no_wrap||t>q+c)&&(i=o[f(q+c)],i.style[A]=j+" translateX("+(b.shift+(s*c-e)/2)+"px) translateZ("+zTranslation+"px)",i.style.zIndex=-c,i.style.opacity=tweenedOpacity,i.style.display="block"),b.full_width?(zTranslation=b.dist,tweenedOpacity=c===d&&e>0?1-h:1):(zTranslation=b.dist*(2*c-h*g),tweenedOpacity=1-.2*(2*c-h*g)),(!b.no_wrap||q-c>=0)&&(i=o[f(q-c)],i.style[A]=j+" translateX("+(-b.shift+(-s*c-e)/2)+"px) translateZ("+zTranslation+"px)",i.style.zIndex=-c,i.style.opacity=tweenedOpacity,i.style.display="block");(!b.no_wrap||q>=0&&t>q)&&(i=o[f(q)],i.style[A]=j+" translateX("+-e/2+"px) translateX("+g*b.shift*h+"px) translateZ("+b.dist*h+"px)",i.style.zIndex=0,b.full_width?tweenedOpacity=1:tweenedOpacity=1-.2*h,i.style.opacity=tweenedOpacity,i.style.display="block")}function h(){var a,b,c,d;a=Date.now(),b=a-C,C=a,c=p-B,B=p,d=1e3*c/(1+b),z=.8*d+.2*z}function i(){var a,c;w&&(a=Date.now()-C,c=w*Math.exp(-a/b.time_constant),c>2||-2>c?(g(x-c),requestAnimationFrame(i)):g(x))}function j(c){if(E)return c.preventDefault(),c.stopPropagation(),!1;if(!b.full_width){var d=a(c.target).closest(".carousel-item").index(),e=q%t-d;0!==e&&(c.preventDefault(),c.stopPropagation()),k(d)}}function k(a){var c=q%t-a;b.no_wrap||(0>c?Math.abs(c+t)<Math.abs(c)&&(c+=t):c>0&&Math.abs(c-t)<c&&(c-=t)),0>c?H.trigger("carouselNext",[Math.abs(c)]):c>0&&H.trigger("carouselPrev",[c])}function l(a){r=!0,E=!1,F=!1,u=d(a),v=e(a),z=w=0,B=p,C=Date.now(),clearInterval(D),D=setInterval(h,100)}function m(a){var b,c,f;if(r)if(b=d(a),y=e(a),c=u-b,f=Math.abs(v-y),30>f&&!F)(c>2||-2>c)&&(E=!0,u=b,g(p+c));else{if(E)return a.preventDefault(),a.stopPropagation(),!1;F=!0}return E?(a.preventDefault(),a.stopPropagation(),!1):void 0}function n(a){return r?(r=!1,clearInterval(D),x=p,(z>10||-10>z)&&(w=.9*z,x=p+w),x=Math.round(x/s)*s,b.no_wrap&&(x>=s*(t-1)?x=s*(t-1):0>x&&(x=0)),w=x-p,C=Date.now(),requestAnimationFrame(i),E&&(a.preventDefault(),a.stopPropagation()),!1):void 0}var o,p,q,r,s,t,u,v,w,x,z,A,B,C,D,E,F,G=a('<ul class="indicators"></ul>'),H=a(this),I=H.attr("data-indicators")||b.indicators;if(H.hasClass("initialized"))return a(this).trigger("carouselNext",[1e-6]),!0;if(b.full_width){b.dist=0;var J=H.find(".carousel-item img").first();J.length?imageHeight=J.on("load",function(){H.css("height",a(this).height())}):(imageHeight=H.find(".carousel-item").first().height(),H.css("height",imageHeight)),I&&H.find(".carousel-fixed-item").addClass("with-indicators")}H.addClass("initialized"),r=!1,p=x=0,o=[],item_width=H.find(".carousel-item").first().innerWidth(),s=2*item_width+b.padding,H.find(".carousel-item").each(function(b){if(o.push(a(this)[0]),I){var c=a('<li class="indicator-item"></li>');0===b&&c.addClass("active"),c.click(function(){var b=a(this).index();k(b)}),G.append(c)}}),I&&H.append(G),t=o.length,A="transform",["webkit","Moz","O","ms"].every(function(a){var b=a+"Transform";return"undefined"!=typeof document.body.style[b]?(A=b,!1):!0}),window.onresize=g,c(),g(p),a(this).on("carouselNext",function(a,b){void 0===b&&(b=1),x=p+s*b,p!==x&&(w=x-p,C=Date.now(),requestAnimationFrame(i))}),a(this).on("carouselPrev",function(a,b){void 0===b&&(b=1),x=p-s*b,p!==x&&(w=x-p,C=Date.now(),requestAnimationFrame(i))}),a(this).on("carouselSet",function(a,b){void 0===b&&(b=0),k(b)})})},next:function(b){a(this).trigger("carouselNext",[b])},prev:function(b){a(this).trigger("carouselPrev",[b])},set:function(b){a(this).trigger("carouselSet",[b])}};a.fn.carousel=function(c){return b[c]?b[c].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof c&&c?void a.error("Method "+c+" does not exist on jQuery.carousel"):b.init.apply(this,arguments)}}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluaXQuanMiLCJtYXRlcmlhbGl6ZS5qcyIsIm1hdGVyaWFsaXplLm1pbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2ptUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiY3VyaW91em1pbmQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oJCl7XG4gICQoZnVuY3Rpb24oKXtcblxuICAgICQoJy5idXR0b24tY29sbGFwc2UnKS5zaWRlTmF2KCk7XG4gICAgJCgnLnBhcmFsbGF4JykucGFyYWxsYXgoKTtcblxuICB9KTsgLy8gZW5kIG9mIGRvY3VtZW50IHJlYWR5XG59KShqUXVlcnkpOyAvLyBlbmQgb2YgalF1ZXJ5IG5hbWUgc3BhY2UiLCIvKiFcbiAqIE1hdGVyaWFsaXplIHYwLjk3LjggKGh0dHA6Ly9tYXRlcmlhbGl6ZWNzcy5jb20pXG4gKiBDb3B5cmlnaHQgMjAxNC0yMDE1IE1hdGVyaWFsaXplXG4gKiBNSVQgTGljZW5zZSAoaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL0RvZ2ZhbG8vbWF0ZXJpYWxpemUvbWFzdGVyL0xJQ0VOU0UpXG4gKi9cbi8vIENoZWNrIGZvciBqUXVlcnkuXG5pZiAodHlwZW9mKGpRdWVyeSkgPT09ICd1bmRlZmluZWQnKSB7XG4gIHZhciBqUXVlcnk7XG4gIC8vIENoZWNrIGlmIHJlcXVpcmUgaXMgYSBkZWZpbmVkIGZ1bmN0aW9uLlxuICBpZiAodHlwZW9mKHJlcXVpcmUpID09PSAnZnVuY3Rpb24nKSB7XG4gICAgalF1ZXJ5ID0gJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xuICAvLyBFbHNlIHVzZSB0aGUgZG9sbGFyIHNpZ24gYWxpYXMuXG4gIH0gZWxzZSB7XG4gICAgalF1ZXJ5ID0gJDtcbiAgfVxufVxuOy8qXG4gKiBqUXVlcnkgRWFzaW5nIHYxLjMgLSBodHRwOi8vZ3NnZC5jby51ay9zYW5kYm94L2pxdWVyeS9lYXNpbmcvXG4gKlxuICogVXNlcyB0aGUgYnVpbHQgaW4gZWFzaW5nIGNhcGFiaWxpdGllcyBhZGRlZCBJbiBqUXVlcnkgMS4xXG4gKiB0byBvZmZlciBtdWx0aXBsZSBlYXNpbmcgb3B0aW9uc1xuICpcbiAqIFRFUk1TIE9GIFVTRSAtIGpRdWVyeSBFYXNpbmdcbiAqXG4gKiBPcGVuIHNvdXJjZSB1bmRlciB0aGUgQlNEIExpY2Vuc2UuXG4gKlxuICogQ29weXJpZ2h0IMKpIDIwMDggR2VvcmdlIE1jR2lubGV5IFNtaXRoXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFJlZGlzdHJpYnV0aW9uIGFuZCB1c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dCBtb2RpZmljYXRpb24sXG4gKiBhcmUgcGVybWl0dGVkIHByb3ZpZGVkIHRoYXQgdGhlIGZvbGxvd2luZyBjb25kaXRpb25zIGFyZSBtZXQ6XG4gKlxuICogUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLCB0aGlzIGxpc3Qgb2ZcbiAqIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lci5cbiAqIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSwgdGhpcyBsaXN0XG4gKiBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIgaW4gdGhlIGRvY3VtZW50YXRpb24gYW5kL29yIG90aGVyIG1hdGVyaWFsc1xuICogcHJvdmlkZWQgd2l0aCB0aGUgZGlzdHJpYnV0aW9uLlxuICpcbiAqIE5laXRoZXIgdGhlIG5hbWUgb2YgdGhlIGF1dGhvciBub3IgdGhlIG5hbWVzIG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgdXNlZCB0byBlbmRvcnNlXG4gKiBvciBwcm9tb3RlIHByb2R1Y3RzIGRlcml2ZWQgZnJvbSB0aGlzIHNvZnR3YXJlIHdpdGhvdXQgc3BlY2lmaWMgcHJpb3Igd3JpdHRlbiBwZXJtaXNzaW9uLlxuICpcbiAqIFRISVMgU09GVFdBUkUgSVMgUFJPVklERUQgQlkgVEhFIENPUFlSSUdIVCBIT0xERVJTIEFORCBDT05UUklCVVRPUlMgXCJBUyBJU1wiIEFORCBBTllcbiAqIEVYUFJFU1MgT1IgSU1QTElFRCBXQVJSQU5USUVTLCBJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgVEhFIElNUExJRUQgV0FSUkFOVElFUyBPRlxuICogTUVSQ0hBTlRBQklMSVRZIEFORCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBUkUgRElTQ0xBSU1FRC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG4gKiAgQ09QWVJJR0hUIE9XTkVSIE9SIENPTlRSSUJVVE9SUyBCRSBMSUFCTEUgRk9SIEFOWSBESVJFQ1QsIElORElSRUNULCBJTkNJREVOVEFMLCBTUEVDSUFMLFxuICogIEVYRU1QTEFSWSwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIChJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgUFJPQ1VSRU1FTlQgT0YgU1VCU1RJVFVURVxuICogIEdPT0RTIE9SIFNFUlZJQ0VTOyBMT1NTIE9GIFVTRSwgREFUQSwgT1IgUFJPRklUUzsgT1IgQlVTSU5FU1MgSU5URVJSVVBUSU9OKSBIT1dFVkVSIENBVVNFRFxuICogQU5EIE9OIEFOWSBUSEVPUlkgT0YgTElBQklMSVRZLCBXSEVUSEVSIElOIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLCBPUiBUT1JUIChJTkNMVURJTkdcbiAqICBORUdMSUdFTkNFIE9SIE9USEVSV0lTRSkgQVJJU0lORyBJTiBBTlkgV0FZIE9VVCBPRiBUSEUgVVNFIE9GIFRISVMgU09GVFdBUkUsIEVWRU4gSUYgQURWSVNFRFxuICogT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLlxuICpcbiovXG5cbi8vIHQ6IGN1cnJlbnQgdGltZSwgYjogYmVnSW5uSW5nIHZhbHVlLCBjOiBjaGFuZ2UgSW4gdmFsdWUsIGQ6IGR1cmF0aW9uXG5qUXVlcnkuZWFzaW5nWydqc3dpbmcnXSA9IGpRdWVyeS5lYXNpbmdbJ3N3aW5nJ107XG5cbmpRdWVyeS5leHRlbmQoIGpRdWVyeS5lYXNpbmcsXG57XG5cdGRlZjogJ2Vhc2VPdXRRdWFkJyxcblx0c3dpbmc6IGZ1bmN0aW9uICh4LCB0LCBiLCBjLCBkKSB7XG5cdFx0Ly9hbGVydChqUXVlcnkuZWFzaW5nLmRlZmF1bHQpO1xuXHRcdHJldHVybiBqUXVlcnkuZWFzaW5nW2pRdWVyeS5lYXNpbmcuZGVmXSh4LCB0LCBiLCBjLCBkKTtcblx0fSxcblx0ZWFzZUluUXVhZDogZnVuY3Rpb24gKHgsIHQsIGIsIGMsIGQpIHtcblx0XHRyZXR1cm4gYyoodC89ZCkqdCArIGI7XG5cdH0sXG5cdGVhc2VPdXRRdWFkOiBmdW5jdGlvbiAoeCwgdCwgYiwgYywgZCkge1xuXHRcdHJldHVybiAtYyAqKHQvPWQpKih0LTIpICsgYjtcblx0fSxcblx0ZWFzZUluT3V0UXVhZDogZnVuY3Rpb24gKHgsIHQsIGIsIGMsIGQpIHtcblx0XHRpZiAoKHQvPWQvMikgPCAxKSByZXR1cm4gYy8yKnQqdCArIGI7XG5cdFx0cmV0dXJuIC1jLzIgKiAoKC0tdCkqKHQtMikgLSAxKSArIGI7XG5cdH0sXG5cdGVhc2VJbkN1YmljOiBmdW5jdGlvbiAoeCwgdCwgYiwgYywgZCkge1xuXHRcdHJldHVybiBjKih0Lz1kKSp0KnQgKyBiO1xuXHR9LFxuXHRlYXNlT3V0Q3ViaWM6IGZ1bmN0aW9uICh4LCB0LCBiLCBjLCBkKSB7XG5cdFx0cmV0dXJuIGMqKCh0PXQvZC0xKSp0KnQgKyAxKSArIGI7XG5cdH0sXG5cdGVhc2VJbk91dEN1YmljOiBmdW5jdGlvbiAoeCwgdCwgYiwgYywgZCkge1xuXHRcdGlmICgodC89ZC8yKSA8IDEpIHJldHVybiBjLzIqdCp0KnQgKyBiO1xuXHRcdHJldHVybiBjLzIqKCh0LT0yKSp0KnQgKyAyKSArIGI7XG5cdH0sXG5cdGVhc2VJblF1YXJ0OiBmdW5jdGlvbiAoeCwgdCwgYiwgYywgZCkge1xuXHRcdHJldHVybiBjKih0Lz1kKSp0KnQqdCArIGI7XG5cdH0sXG5cdGVhc2VPdXRRdWFydDogZnVuY3Rpb24gKHgsIHQsIGIsIGMsIGQpIHtcblx0XHRyZXR1cm4gLWMgKiAoKHQ9dC9kLTEpKnQqdCp0IC0gMSkgKyBiO1xuXHR9LFxuXHRlYXNlSW5PdXRRdWFydDogZnVuY3Rpb24gKHgsIHQsIGIsIGMsIGQpIHtcblx0XHRpZiAoKHQvPWQvMikgPCAxKSByZXR1cm4gYy8yKnQqdCp0KnQgKyBiO1xuXHRcdHJldHVybiAtYy8yICogKCh0LT0yKSp0KnQqdCAtIDIpICsgYjtcblx0fSxcblx0ZWFzZUluUXVpbnQ6IGZ1bmN0aW9uICh4LCB0LCBiLCBjLCBkKSB7XG5cdFx0cmV0dXJuIGMqKHQvPWQpKnQqdCp0KnQgKyBiO1xuXHR9LFxuXHRlYXNlT3V0UXVpbnQ6IGZ1bmN0aW9uICh4LCB0LCBiLCBjLCBkKSB7XG5cdFx0cmV0dXJuIGMqKCh0PXQvZC0xKSp0KnQqdCp0ICsgMSkgKyBiO1xuXHR9LFxuXHRlYXNlSW5PdXRRdWludDogZnVuY3Rpb24gKHgsIHQsIGIsIGMsIGQpIHtcblx0XHRpZiAoKHQvPWQvMikgPCAxKSByZXR1cm4gYy8yKnQqdCp0KnQqdCArIGI7XG5cdFx0cmV0dXJuIGMvMiooKHQtPTIpKnQqdCp0KnQgKyAyKSArIGI7XG5cdH0sXG5cdGVhc2VJblNpbmU6IGZ1bmN0aW9uICh4LCB0LCBiLCBjLCBkKSB7XG5cdFx0cmV0dXJuIC1jICogTWF0aC5jb3ModC9kICogKE1hdGguUEkvMikpICsgYyArIGI7XG5cdH0sXG5cdGVhc2VPdXRTaW5lOiBmdW5jdGlvbiAoeCwgdCwgYiwgYywgZCkge1xuXHRcdHJldHVybiBjICogTWF0aC5zaW4odC9kICogKE1hdGguUEkvMikpICsgYjtcblx0fSxcblx0ZWFzZUluT3V0U2luZTogZnVuY3Rpb24gKHgsIHQsIGIsIGMsIGQpIHtcblx0XHRyZXR1cm4gLWMvMiAqIChNYXRoLmNvcyhNYXRoLlBJKnQvZCkgLSAxKSArIGI7XG5cdH0sXG5cdGVhc2VJbkV4cG86IGZ1bmN0aW9uICh4LCB0LCBiLCBjLCBkKSB7XG5cdFx0cmV0dXJuICh0PT0wKSA/IGIgOiBjICogTWF0aC5wb3coMiwgMTAgKiAodC9kIC0gMSkpICsgYjtcblx0fSxcblx0ZWFzZU91dEV4cG86IGZ1bmN0aW9uICh4LCB0LCBiLCBjLCBkKSB7XG5cdFx0cmV0dXJuICh0PT1kKSA/IGIrYyA6IGMgKiAoLU1hdGgucG93KDIsIC0xMCAqIHQvZCkgKyAxKSArIGI7XG5cdH0sXG5cdGVhc2VJbk91dEV4cG86IGZ1bmN0aW9uICh4LCB0LCBiLCBjLCBkKSB7XG5cdFx0aWYgKHQ9PTApIHJldHVybiBiO1xuXHRcdGlmICh0PT1kKSByZXR1cm4gYitjO1xuXHRcdGlmICgodC89ZC8yKSA8IDEpIHJldHVybiBjLzIgKiBNYXRoLnBvdygyLCAxMCAqICh0IC0gMSkpICsgYjtcblx0XHRyZXR1cm4gYy8yICogKC1NYXRoLnBvdygyLCAtMTAgKiAtLXQpICsgMikgKyBiO1xuXHR9LFxuXHRlYXNlSW5DaXJjOiBmdW5jdGlvbiAoeCwgdCwgYiwgYywgZCkge1xuXHRcdHJldHVybiAtYyAqIChNYXRoLnNxcnQoMSAtICh0Lz1kKSp0KSAtIDEpICsgYjtcblx0fSxcblx0ZWFzZU91dENpcmM6IGZ1bmN0aW9uICh4LCB0LCBiLCBjLCBkKSB7XG5cdFx0cmV0dXJuIGMgKiBNYXRoLnNxcnQoMSAtICh0PXQvZC0xKSp0KSArIGI7XG5cdH0sXG5cdGVhc2VJbk91dENpcmM6IGZ1bmN0aW9uICh4LCB0LCBiLCBjLCBkKSB7XG5cdFx0aWYgKCh0Lz1kLzIpIDwgMSkgcmV0dXJuIC1jLzIgKiAoTWF0aC5zcXJ0KDEgLSB0KnQpIC0gMSkgKyBiO1xuXHRcdHJldHVybiBjLzIgKiAoTWF0aC5zcXJ0KDEgLSAodC09MikqdCkgKyAxKSArIGI7XG5cdH0sXG5cdGVhc2VJbkVsYXN0aWM6IGZ1bmN0aW9uICh4LCB0LCBiLCBjLCBkKSB7XG5cdFx0dmFyIHM9MS43MDE1ODt2YXIgcD0wO3ZhciBhPWM7XG5cdFx0aWYgKHQ9PTApIHJldHVybiBiOyAgaWYgKCh0Lz1kKT09MSkgcmV0dXJuIGIrYzsgIGlmICghcCkgcD1kKi4zO1xuXHRcdGlmIChhIDwgTWF0aC5hYnMoYykpIHsgYT1jOyB2YXIgcz1wLzQ7IH1cblx0XHRlbHNlIHZhciBzID0gcC8oMipNYXRoLlBJKSAqIE1hdGguYXNpbiAoYy9hKTtcblx0XHRyZXR1cm4gLShhKk1hdGgucG93KDIsMTAqKHQtPTEpKSAqIE1hdGguc2luKCAodCpkLXMpKigyKk1hdGguUEkpL3AgKSkgKyBiO1xuXHR9LFxuXHRlYXNlT3V0RWxhc3RpYzogZnVuY3Rpb24gKHgsIHQsIGIsIGMsIGQpIHtcblx0XHR2YXIgcz0xLjcwMTU4O3ZhciBwPTA7dmFyIGE9Yztcblx0XHRpZiAodD09MCkgcmV0dXJuIGI7ICBpZiAoKHQvPWQpPT0xKSByZXR1cm4gYitjOyAgaWYgKCFwKSBwPWQqLjM7XG5cdFx0aWYgKGEgPCBNYXRoLmFicyhjKSkgeyBhPWM7IHZhciBzPXAvNDsgfVxuXHRcdGVsc2UgdmFyIHMgPSBwLygyKk1hdGguUEkpICogTWF0aC5hc2luIChjL2EpO1xuXHRcdHJldHVybiBhKk1hdGgucG93KDIsLTEwKnQpICogTWF0aC5zaW4oICh0KmQtcykqKDIqTWF0aC5QSSkvcCApICsgYyArIGI7XG5cdH0sXG5cdGVhc2VJbk91dEVsYXN0aWM6IGZ1bmN0aW9uICh4LCB0LCBiLCBjLCBkKSB7XG5cdFx0dmFyIHM9MS43MDE1ODt2YXIgcD0wO3ZhciBhPWM7XG5cdFx0aWYgKHQ9PTApIHJldHVybiBiOyAgaWYgKCh0Lz1kLzIpPT0yKSByZXR1cm4gYitjOyAgaWYgKCFwKSBwPWQqKC4zKjEuNSk7XG5cdFx0aWYgKGEgPCBNYXRoLmFicyhjKSkgeyBhPWM7IHZhciBzPXAvNDsgfVxuXHRcdGVsc2UgdmFyIHMgPSBwLygyKk1hdGguUEkpICogTWF0aC5hc2luIChjL2EpO1xuXHRcdGlmICh0IDwgMSkgcmV0dXJuIC0uNSooYSpNYXRoLnBvdygyLDEwKih0LT0xKSkgKiBNYXRoLnNpbiggKHQqZC1zKSooMipNYXRoLlBJKS9wICkpICsgYjtcblx0XHRyZXR1cm4gYSpNYXRoLnBvdygyLC0xMCoodC09MSkpICogTWF0aC5zaW4oICh0KmQtcykqKDIqTWF0aC5QSSkvcCApKi41ICsgYyArIGI7XG5cdH0sXG5cdGVhc2VJbkJhY2s6IGZ1bmN0aW9uICh4LCB0LCBiLCBjLCBkLCBzKSB7XG5cdFx0aWYgKHMgPT0gdW5kZWZpbmVkKSBzID0gMS43MDE1ODtcblx0XHRyZXR1cm4gYyoodC89ZCkqdCooKHMrMSkqdCAtIHMpICsgYjtcblx0fSxcblx0ZWFzZU91dEJhY2s6IGZ1bmN0aW9uICh4LCB0LCBiLCBjLCBkLCBzKSB7XG5cdFx0aWYgKHMgPT0gdW5kZWZpbmVkKSBzID0gMS43MDE1ODtcblx0XHRyZXR1cm4gYyooKHQ9dC9kLTEpKnQqKChzKzEpKnQgKyBzKSArIDEpICsgYjtcblx0fSxcblx0ZWFzZUluT3V0QmFjazogZnVuY3Rpb24gKHgsIHQsIGIsIGMsIGQsIHMpIHtcblx0XHRpZiAocyA9PSB1bmRlZmluZWQpIHMgPSAxLjcwMTU4O1xuXHRcdGlmICgodC89ZC8yKSA8IDEpIHJldHVybiBjLzIqKHQqdCooKChzKj0oMS41MjUpKSsxKSp0IC0gcykpICsgYjtcblx0XHRyZXR1cm4gYy8yKigodC09MikqdCooKChzKj0oMS41MjUpKSsxKSp0ICsgcykgKyAyKSArIGI7XG5cdH0sXG5cdGVhc2VJbkJvdW5jZTogZnVuY3Rpb24gKHgsIHQsIGIsIGMsIGQpIHtcblx0XHRyZXR1cm4gYyAtIGpRdWVyeS5lYXNpbmcuZWFzZU91dEJvdW5jZSAoeCwgZC10LCAwLCBjLCBkKSArIGI7XG5cdH0sXG5cdGVhc2VPdXRCb3VuY2U6IGZ1bmN0aW9uICh4LCB0LCBiLCBjLCBkKSB7XG5cdFx0aWYgKCh0Lz1kKSA8ICgxLzIuNzUpKSB7XG5cdFx0XHRyZXR1cm4gYyooNy41NjI1KnQqdCkgKyBiO1xuXHRcdH0gZWxzZSBpZiAodCA8ICgyLzIuNzUpKSB7XG5cdFx0XHRyZXR1cm4gYyooNy41NjI1Kih0LT0oMS41LzIuNzUpKSp0ICsgLjc1KSArIGI7XG5cdFx0fSBlbHNlIGlmICh0IDwgKDIuNS8yLjc1KSkge1xuXHRcdFx0cmV0dXJuIGMqKDcuNTYyNSoodC09KDIuMjUvMi43NSkpKnQgKyAuOTM3NSkgKyBiO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4gYyooNy41NjI1Kih0LT0oMi42MjUvMi43NSkpKnQgKyAuOTg0Mzc1KSArIGI7XG5cdFx0fVxuXHR9LFxuXHRlYXNlSW5PdXRCb3VuY2U6IGZ1bmN0aW9uICh4LCB0LCBiLCBjLCBkKSB7XG5cdFx0aWYgKHQgPCBkLzIpIHJldHVybiBqUXVlcnkuZWFzaW5nLmVhc2VJbkJvdW5jZSAoeCwgdCoyLCAwLCBjLCBkKSAqIC41ICsgYjtcblx0XHRyZXR1cm4galF1ZXJ5LmVhc2luZy5lYXNlT3V0Qm91bmNlICh4LCB0KjItZCwgMCwgYywgZCkgKiAuNSArIGMqLjUgKyBiO1xuXHR9XG59KTtcblxuLypcbiAqXG4gKiBURVJNUyBPRiBVU0UgLSBFQVNJTkcgRVFVQVRJT05TXG4gKlxuICogT3BlbiBzb3VyY2UgdW5kZXIgdGhlIEJTRCBMaWNlbnNlLlxuICpcbiAqIENvcHlyaWdodCDCqSAyMDAxIFJvYmVydCBQZW5uZXJcbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogUmVkaXN0cmlidXRpb24gYW5kIHVzZSBpbiBzb3VyY2UgYW5kIGJpbmFyeSBmb3Jtcywgd2l0aCBvciB3aXRob3V0IG1vZGlmaWNhdGlvbixcbiAqIGFyZSBwZXJtaXR0ZWQgcHJvdmlkZWQgdGhhdCB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnMgYXJlIG1ldDpcbiAqXG4gKiBSZWRpc3RyaWJ1dGlvbnMgb2Ygc291cmNlIGNvZGUgbXVzdCByZXRhaW4gdGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UsIHRoaXMgbGlzdCBvZlxuICogY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyLlxuICogUmVkaXN0cmlidXRpb25zIGluIGJpbmFyeSBmb3JtIG11c3QgcmVwcm9kdWNlIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLCB0aGlzIGxpc3RcbiAqIG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lciBpbiB0aGUgZG9jdW1lbnRhdGlvbiBhbmQvb3Igb3RoZXIgbWF0ZXJpYWxzXG4gKiBwcm92aWRlZCB3aXRoIHRoZSBkaXN0cmlidXRpb24uXG4gKlxuICogTmVpdGhlciB0aGUgbmFtZSBvZiB0aGUgYXV0aG9yIG5vciB0aGUgbmFtZXMgb2YgY29udHJpYnV0b3JzIG1heSBiZSB1c2VkIHRvIGVuZG9yc2VcbiAqIG9yIHByb21vdGUgcHJvZHVjdHMgZGVyaXZlZCBmcm9tIHRoaXMgc29mdHdhcmUgd2l0aG91dCBzcGVjaWZpYyBwcmlvciB3cml0dGVuIHBlcm1pc3Npb24uXG4gKlxuICogVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SUyBcIkFTIElTXCIgQU5EIEFOWVxuICogRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBUSEUgSU1QTElFRCBXQVJSQU5USUVTIE9GXG4gKiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFSRSBESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcbiAqICBDT1BZUklHSFQgT1dORVIgT1IgQ09OVFJJQlVUT1JTIEJFIExJQUJMRSBGT1IgQU5ZIERJUkVDVCwgSU5ESVJFQ1QsIElOQ0lERU5UQUwsIFNQRUNJQUwsXG4gKiAgRVhFTVBMQVJZLCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgKElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRiBTVUJTVElUVVRFXG4gKiAgR09PRFMgT1IgU0VSVklDRVM7IExPU1MgT0YgVVNFLCBEQVRBLCBPUiBQUk9GSVRTOyBPUiBCVVNJTkVTUyBJTlRFUlJVUFRJT04pIEhPV0VWRVIgQ0FVU0VEXG4gKiBBTkQgT04gQU5ZIFRIRU9SWSBPRiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQ09OVFJBQ1QsIFNUUklDVCBMSUFCSUxJVFksIE9SIFRPUlQgKElOQ0xVRElOR1xuICogIE5FR0xJR0VOQ0UgT1IgT1RIRVJXSVNFKSBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0UgT0YgVEhJUyBTT0ZUV0FSRSwgRVZFTiBJRiBBRFZJU0VEXG4gKiBPRiBUSEUgUE9TU0lCSUxJVFkgT0YgU1VDSCBEQU1BR0UuXG4gKlxuICovOyAgICAvLyBDdXN0b20gRWFzaW5nXG4gICAgalF1ZXJ5LmV4dGVuZCggalF1ZXJ5LmVhc2luZyxcbiAgICB7XG4gICAgICBlYXNlSW5PdXRNYXRlcmlhbDogZnVuY3Rpb24gKHgsIHQsIGIsIGMsIGQpIHtcbiAgICAgICAgaWYgKCh0Lz1kLzIpIDwgMSkgcmV0dXJuIGMvMip0KnQgKyBiO1xuICAgICAgICByZXR1cm4gYy80KigodC09MikqdCp0ICsgMikgKyBiO1xuICAgICAgfVxuICAgIH0pO1xuXG47LyohIFZlbG9jaXR5SlMub3JnICgxLjIuMykuIChDKSAyMDE0IEp1bGlhbiBTaGFwaXJvLiBNSVQgQGxpY2Vuc2U6IGVuLndpa2lwZWRpYS5vcmcvd2lraS9NSVRfTGljZW5zZSAqL1xuLyohIFZlbG9jaXR5SlMub3JnIGpRdWVyeSBTaGltICgxLjAuMSkuIChDKSAyMDE0IFRoZSBqUXVlcnkgRm91bmRhdGlvbi4gTUlUIEBsaWNlbnNlOiBlbi53aWtpcGVkaWEub3JnL3dpa2kvTUlUX0xpY2Vuc2UuICovXG4vKiEgTm90ZSB0aGF0IHRoaXMgaGFzIGJlZW4gbW9kaWZpZWQgYnkgTWF0ZXJpYWxpemUgdG8gY29uZmlybSB0aGF0IFZlbG9jaXR5IGlzIG5vdCBhbHJlYWR5IGJlaW5nIGltcG9ydGVkLiAqL1xualF1ZXJ5LlZlbG9jaXR5P2NvbnNvbGUubG9nKFwiVmVsb2NpdHkgaXMgYWxyZWFkeSBsb2FkZWQuIFlvdSBtYXkgYmUgbmVlZGxlc3NseSBpbXBvcnRpbmcgVmVsb2NpdHkgYWdhaW47IG5vdGUgdGhhdCBNYXRlcmlhbGl6ZSBpbmNsdWRlcyBWZWxvY2l0eS5cIik6KCFmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUpe3ZhciB0PWUubGVuZ3RoLGE9ci50eXBlKGUpO3JldHVyblwiZnVuY3Rpb25cIj09PWF8fHIuaXNXaW5kb3coZSk/ITE6MT09PWUubm9kZVR5cGUmJnQ/ITA6XCJhcnJheVwiPT09YXx8MD09PXR8fFwibnVtYmVyXCI9PXR5cGVvZiB0JiZ0PjAmJnQtMSBpbiBlfWlmKCFlLmpRdWVyeSl7dmFyIHI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbmV3IHIuZm4uaW5pdChlLHQpfTtyLmlzV2luZG93PWZ1bmN0aW9uKGUpe3JldHVybiBudWxsIT1lJiZlPT1lLndpbmRvd30sci50eXBlPWZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lP2UrXCJcIjpcIm9iamVjdFwiPT10eXBlb2YgZXx8XCJmdW5jdGlvblwiPT10eXBlb2YgZT9uW2kuY2FsbChlKV18fFwib2JqZWN0XCI6dHlwZW9mIGV9LHIuaXNBcnJheT1BcnJheS5pc0FycmF5fHxmdW5jdGlvbihlKXtyZXR1cm5cImFycmF5XCI9PT1yLnR5cGUoZSl9LHIuaXNQbGFpbk9iamVjdD1mdW5jdGlvbihlKXt2YXIgdDtpZighZXx8XCJvYmplY3RcIiE9PXIudHlwZShlKXx8ZS5ub2RlVHlwZXx8ci5pc1dpbmRvdyhlKSlyZXR1cm4hMTt0cnl7aWYoZS5jb25zdHJ1Y3RvciYmIW8uY2FsbChlLFwiY29uc3RydWN0b3JcIikmJiFvLmNhbGwoZS5jb25zdHJ1Y3Rvci5wcm90b3R5cGUsXCJpc1Byb3RvdHlwZU9mXCIpKXJldHVybiExfWNhdGNoKGEpe3JldHVybiExfWZvcih0IGluIGUpO3JldHVybiB2b2lkIDA9PT10fHxvLmNhbGwoZSx0KX0sci5lYWNoPWZ1bmN0aW9uKGUscixhKXt2YXIgbixvPTAsaT1lLmxlbmd0aCxzPXQoZSk7aWYoYSl7aWYocylmb3IoO2k+byYmKG49ci5hcHBseShlW29dLGEpLG4hPT0hMSk7bysrKTtlbHNlIGZvcihvIGluIGUpaWYobj1yLmFwcGx5KGVbb10sYSksbj09PSExKWJyZWFrfWVsc2UgaWYocylmb3IoO2k+byYmKG49ci5jYWxsKGVbb10sbyxlW29dKSxuIT09ITEpO28rKyk7ZWxzZSBmb3IobyBpbiBlKWlmKG49ci5jYWxsKGVbb10sbyxlW29dKSxuPT09ITEpYnJlYWs7cmV0dXJuIGV9LHIuZGF0YT1mdW5jdGlvbihlLHQsbil7aWYodm9pZCAwPT09bil7dmFyIG89ZVtyLmV4cGFuZG9dLGk9byYmYVtvXTtpZih2b2lkIDA9PT10KXJldHVybiBpO2lmKGkmJnQgaW4gaSlyZXR1cm4gaVt0XX1lbHNlIGlmKHZvaWQgMCE9PXQpe3ZhciBvPWVbci5leHBhbmRvXXx8KGVbci5leHBhbmRvXT0rK3IudXVpZCk7cmV0dXJuIGFbb109YVtvXXx8e30sYVtvXVt0XT1uLG59fSxyLnJlbW92ZURhdGE9ZnVuY3Rpb24oZSx0KXt2YXIgbj1lW3IuZXhwYW5kb10sbz1uJiZhW25dO28mJnIuZWFjaCh0LGZ1bmN0aW9uKGUsdCl7ZGVsZXRlIG9bdF19KX0sci5leHRlbmQ9ZnVuY3Rpb24oKXt2YXIgZSx0LGEsbixvLGkscz1hcmd1bWVudHNbMF18fHt9LGw9MSx1PWFyZ3VtZW50cy5sZW5ndGgsYz0hMTtmb3IoXCJib29sZWFuXCI9PXR5cGVvZiBzJiYoYz1zLHM9YXJndW1lbnRzW2xdfHx7fSxsKyspLFwib2JqZWN0XCIhPXR5cGVvZiBzJiZcImZ1bmN0aW9uXCIhPT1yLnR5cGUocykmJihzPXt9KSxsPT09dSYmKHM9dGhpcyxsLS0pO3U+bDtsKyspaWYobnVsbCE9KG89YXJndW1lbnRzW2xdKSlmb3IobiBpbiBvKWU9c1tuXSxhPW9bbl0scyE9PWEmJihjJiZhJiYoci5pc1BsYWluT2JqZWN0KGEpfHwodD1yLmlzQXJyYXkoYSkpKT8odD8odD0hMSxpPWUmJnIuaXNBcnJheShlKT9lOltdKTppPWUmJnIuaXNQbGFpbk9iamVjdChlKT9lOnt9LHNbbl09ci5leHRlbmQoYyxpLGEpKTp2b2lkIDAhPT1hJiYoc1tuXT1hKSk7cmV0dXJuIHN9LHIucXVldWU9ZnVuY3Rpb24oZSxhLG4pe2Z1bmN0aW9uIG8oZSxyKXt2YXIgYT1yfHxbXTtyZXR1cm4gbnVsbCE9ZSYmKHQoT2JqZWN0KGUpKT8hZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9K3QubGVuZ3RoLGE9MCxuPWUubGVuZ3RoO3I+YTspZVtuKytdPXRbYSsrXTtpZihyIT09cilmb3IoO3ZvaWQgMCE9PXRbYV07KWVbbisrXT10W2ErK107cmV0dXJuIGUubGVuZ3RoPW4sZX0oYSxcInN0cmluZ1wiPT10eXBlb2YgZT9bZV06ZSk6W10ucHVzaC5jYWxsKGEsZSkpLGF9aWYoZSl7YT0oYXx8XCJmeFwiKStcInF1ZXVlXCI7dmFyIGk9ci5kYXRhKGUsYSk7cmV0dXJuIG4/KCFpfHxyLmlzQXJyYXkobik/aT1yLmRhdGEoZSxhLG8obikpOmkucHVzaChuKSxpKTppfHxbXX19LHIuZGVxdWV1ZT1mdW5jdGlvbihlLHQpe3IuZWFjaChlLm5vZGVUeXBlP1tlXTplLGZ1bmN0aW9uKGUsYSl7dD10fHxcImZ4XCI7dmFyIG49ci5xdWV1ZShhLHQpLG89bi5zaGlmdCgpO1wiaW5wcm9ncmVzc1wiPT09byYmKG89bi5zaGlmdCgpKSxvJiYoXCJmeFwiPT09dCYmbi51bnNoaWZ0KFwiaW5wcm9ncmVzc1wiKSxvLmNhbGwoYSxmdW5jdGlvbigpe3IuZGVxdWV1ZShhLHQpfSkpfSl9LHIuZm49ci5wcm90b3R5cGU9e2luaXQ6ZnVuY3Rpb24oZSl7aWYoZS5ub2RlVHlwZSlyZXR1cm4gdGhpc1swXT1lLHRoaXM7dGhyb3cgbmV3IEVycm9yKFwiTm90IGEgRE9NIG5vZGUuXCIpfSxvZmZzZXQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzWzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdD90aGlzWzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOnt0b3A6MCxsZWZ0OjB9O3JldHVybnt0b3A6dC50b3ArKGUucGFnZVlPZmZzZXR8fGRvY3VtZW50LnNjcm9sbFRvcHx8MCktKGRvY3VtZW50LmNsaWVudFRvcHx8MCksbGVmdDp0LmxlZnQrKGUucGFnZVhPZmZzZXR8fGRvY3VtZW50LnNjcm9sbExlZnR8fDApLShkb2N1bWVudC5jbGllbnRMZWZ0fHwwKX19LHBvc2l0aW9uOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe2Zvcih2YXIgZT10aGlzLm9mZnNldFBhcmVudHx8ZG9jdW1lbnQ7ZSYmXCJodG1sXCI9PT0hZS5ub2RlVHlwZS50b0xvd2VyQ2FzZSYmXCJzdGF0aWNcIj09PWUuc3R5bGUucG9zaXRpb247KWU9ZS5vZmZzZXRQYXJlbnQ7cmV0dXJuIGV8fGRvY3VtZW50fXZhciB0PXRoaXNbMF0sZT1lLmFwcGx5KHQpLGE9dGhpcy5vZmZzZXQoKSxuPS9eKD86Ym9keXxodG1sKSQvaS50ZXN0KGUubm9kZU5hbWUpP3t0b3A6MCxsZWZ0OjB9OnIoZSkub2Zmc2V0KCk7cmV0dXJuIGEudG9wLT1wYXJzZUZsb2F0KHQuc3R5bGUubWFyZ2luVG9wKXx8MCxhLmxlZnQtPXBhcnNlRmxvYXQodC5zdHlsZS5tYXJnaW5MZWZ0KXx8MCxlLnN0eWxlJiYobi50b3ArPXBhcnNlRmxvYXQoZS5zdHlsZS5ib3JkZXJUb3BXaWR0aCl8fDAsbi5sZWZ0Kz1wYXJzZUZsb2F0KGUuc3R5bGUuYm9yZGVyTGVmdFdpZHRoKXx8MCkse3RvcDphLnRvcC1uLnRvcCxsZWZ0OmEubGVmdC1uLmxlZnR9fX07dmFyIGE9e307ci5leHBhbmRvPVwidmVsb2NpdHlcIisobmV3IERhdGUpLmdldFRpbWUoKSxyLnV1aWQ9MDtmb3IodmFyIG49e30sbz1uLmhhc093blByb3BlcnR5LGk9bi50b1N0cmluZyxzPVwiQm9vbGVhbiBOdW1iZXIgU3RyaW5nIEZ1bmN0aW9uIEFycmF5IERhdGUgUmVnRXhwIE9iamVjdCBFcnJvclwiLnNwbGl0KFwiIFwiKSxsPTA7bDxzLmxlbmd0aDtsKyspbltcIltvYmplY3QgXCIrc1tsXStcIl1cIl09c1tsXS50b0xvd2VyQ2FzZSgpO3IuZm4uaW5pdC5wcm90b3R5cGU9ci5mbixlLlZlbG9jaXR5PXtVdGlsaXRpZXM6cn19fSh3aW5kb3cpLGZ1bmN0aW9uKGUpe1wib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUmJlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1lKCk6XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShlKTplKCl9KGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGUsdCxyLGEpe2Z1bmN0aW9uIG4oZSl7Zm9yKHZhciB0PS0xLHI9ZT9lLmxlbmd0aDowLGE9W107Kyt0PHI7KXt2YXIgbj1lW3RdO24mJmEucHVzaChuKX1yZXR1cm4gYX1mdW5jdGlvbiBvKGUpe3JldHVybiBtLmlzV3JhcHBlZChlKT9lPVtdLnNsaWNlLmNhbGwoZSk6bS5pc05vZGUoZSkmJihlPVtlXSksZX1mdW5jdGlvbiBpKGUpe3ZhciB0PWYuZGF0YShlLFwidmVsb2NpdHlcIik7cmV0dXJuIG51bGw9PT10P2E6dH1mdW5jdGlvbiBzKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gTWF0aC5yb3VuZCh0KmUpKigxL2UpfX1mdW5jdGlvbiBsKGUscixhLG4pe2Z1bmN0aW9uIG8oZSx0KXtyZXR1cm4gMS0zKnQrMyplfWZ1bmN0aW9uIGkoZSx0KXtyZXR1cm4gMyp0LTYqZX1mdW5jdGlvbiBzKGUpe3JldHVybiAzKmV9ZnVuY3Rpb24gbChlLHQscil7cmV0dXJuKChvKHQscikqZStpKHQscikpKmUrcyh0KSkqZX1mdW5jdGlvbiB1KGUsdCxyKXtyZXR1cm4gMypvKHQscikqZSplKzIqaSh0LHIpKmUrcyh0KX1mdW5jdGlvbiBjKHQscil7Zm9yKHZhciBuPTA7bT5uOysrbil7dmFyIG89dShyLGUsYSk7aWYoMD09PW8pcmV0dXJuIHI7dmFyIGk9bChyLGUsYSktdDtyLT1pL299cmV0dXJuIHJ9ZnVuY3Rpb24gcCgpe2Zvcih2YXIgdD0wO2I+dDsrK3Qpd1t0XT1sKHQqeCxlLGEpfWZ1bmN0aW9uIGYodCxyLG4pe3ZhciBvLGkscz0wO2RvIGk9cisobi1yKS8yLG89bChpLGUsYSktdCxvPjA/bj1pOnI9aTt3aGlsZShNYXRoLmFicyhvKT5oJiYrK3M8dik7cmV0dXJuIGl9ZnVuY3Rpb24gZCh0KXtmb3IodmFyIHI9MCxuPTEsbz1iLTE7biE9byYmd1tuXTw9dDsrK24pcis9eDstLW47dmFyIGk9KHQtd1tuXSkvKHdbbisxXS13W25dKSxzPXIraSp4LGw9dShzLGUsYSk7cmV0dXJuIGw+PXk/Yyh0LHMpOjA9PWw/czpmKHQscixyK3gpfWZ1bmN0aW9uIGcoKXtWPSEwLChlIT1yfHxhIT1uKSYmcCgpfXZhciBtPTQseT0uMDAxLGg9MWUtNyx2PTEwLGI9MTEseD0xLyhiLTEpLFM9XCJGbG9hdDMyQXJyYXlcImluIHQ7aWYoNCE9PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciBQPTA7ND5QOysrUClpZihcIm51bWJlclwiIT10eXBlb2YgYXJndW1lbnRzW1BdfHxpc05hTihhcmd1bWVudHNbUF0pfHwhaXNGaW5pdGUoYXJndW1lbnRzW1BdKSlyZXR1cm4hMTtlPU1hdGgubWluKGUsMSksYT1NYXRoLm1pbihhLDEpLGU9TWF0aC5tYXgoZSwwKSxhPU1hdGgubWF4KGEsMCk7dmFyIHc9Uz9uZXcgRmxvYXQzMkFycmF5KGIpOm5ldyBBcnJheShiKSxWPSExLEM9ZnVuY3Rpb24odCl7cmV0dXJuIFZ8fGcoKSxlPT09ciYmYT09PW4/dDowPT09dD8wOjE9PT10PzE6bChkKHQpLHIsbil9O0MuZ2V0Q29udHJvbFBvaW50cz1mdW5jdGlvbigpe3JldHVyblt7eDplLHk6cn0se3g6YSx5Om59XX07dmFyIFQ9XCJnZW5lcmF0ZUJlemllcihcIitbZSxyLGEsbl0rXCIpXCI7cmV0dXJuIEMudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gVH0sQ31mdW5jdGlvbiB1KGUsdCl7dmFyIHI9ZTtyZXR1cm4gbS5pc1N0cmluZyhlKT9iLkVhc2luZ3NbZV18fChyPSExKTpyPW0uaXNBcnJheShlKSYmMT09PWUubGVuZ3RoP3MuYXBwbHkobnVsbCxlKTptLmlzQXJyYXkoZSkmJjI9PT1lLmxlbmd0aD94LmFwcGx5KG51bGwsZS5jb25jYXQoW3RdKSk6bS5pc0FycmF5KGUpJiY0PT09ZS5sZW5ndGg/bC5hcHBseShudWxsLGUpOiExLHI9PT0hMSYmKHI9Yi5FYXNpbmdzW2IuZGVmYXVsdHMuZWFzaW5nXT9iLmRlZmF1bHRzLmVhc2luZzp2KSxyfWZ1bmN0aW9uIGMoZSl7aWYoZSl7dmFyIHQ9KG5ldyBEYXRlKS5nZXRUaW1lKCkscj1iLlN0YXRlLmNhbGxzLmxlbmd0aDtyPjFlNCYmKGIuU3RhdGUuY2FsbHM9bihiLlN0YXRlLmNhbGxzKSk7Zm9yKHZhciBvPTA7cj5vO28rKylpZihiLlN0YXRlLmNhbGxzW29dKXt2YXIgcz1iLlN0YXRlLmNhbGxzW29dLGw9c1swXSx1PXNbMl0sZD1zWzNdLGc9ISFkLHk9bnVsbDtkfHwoZD1iLlN0YXRlLmNhbGxzW29dWzNdPXQtMTYpO2Zvcih2YXIgaD1NYXRoLm1pbigodC1kKS91LmR1cmF0aW9uLDEpLHY9MCx4PWwubGVuZ3RoO3g+djt2Kyspe3ZhciBQPWxbdl0sVj1QLmVsZW1lbnQ7aWYoaShWKSl7dmFyIEM9ITE7aWYodS5kaXNwbGF5IT09YSYmbnVsbCE9PXUuZGlzcGxheSYmXCJub25lXCIhPT11LmRpc3BsYXkpe2lmKFwiZmxleFwiPT09dS5kaXNwbGF5KXt2YXIgVD1bXCItd2Via2l0LWJveFwiLFwiLW1vei1ib3hcIixcIi1tcy1mbGV4Ym94XCIsXCItd2Via2l0LWZsZXhcIl07Zi5lYWNoKFQsZnVuY3Rpb24oZSx0KXtTLnNldFByb3BlcnR5VmFsdWUoVixcImRpc3BsYXlcIix0KX0pfVMuc2V0UHJvcGVydHlWYWx1ZShWLFwiZGlzcGxheVwiLHUuZGlzcGxheSl9dS52aXNpYmlsaXR5IT09YSYmXCJoaWRkZW5cIiE9PXUudmlzaWJpbGl0eSYmUy5zZXRQcm9wZXJ0eVZhbHVlKFYsXCJ2aXNpYmlsaXR5XCIsdS52aXNpYmlsaXR5KTtmb3IodmFyIGsgaW4gUClpZihcImVsZW1lbnRcIiE9PWspe3ZhciBBLEY9UFtrXSxqPW0uaXNTdHJpbmcoRi5lYXNpbmcpP2IuRWFzaW5nc1tGLmVhc2luZ106Ri5lYXNpbmc7aWYoMT09PWgpQT1GLmVuZFZhbHVlO2Vsc2V7dmFyIEU9Ri5lbmRWYWx1ZS1GLnN0YXJ0VmFsdWU7aWYoQT1GLnN0YXJ0VmFsdWUrRSpqKGgsdSxFKSwhZyYmQT09PUYuY3VycmVudFZhbHVlKWNvbnRpbnVlfWlmKEYuY3VycmVudFZhbHVlPUEsXCJ0d2VlblwiPT09ayl5PUE7ZWxzZXtpZihTLkhvb2tzLnJlZ2lzdGVyZWRba10pe3ZhciBIPVMuSG9va3MuZ2V0Um9vdChrKSxOPWkoVikucm9vdFByb3BlcnR5VmFsdWVDYWNoZVtIXTtOJiYoRi5yb290UHJvcGVydHlWYWx1ZT1OKX12YXIgTD1TLnNldFByb3BlcnR5VmFsdWUoVixrLEYuY3VycmVudFZhbHVlKygwPT09cGFyc2VGbG9hdChBKT9cIlwiOkYudW5pdFR5cGUpLEYucm9vdFByb3BlcnR5VmFsdWUsRi5zY3JvbGxEYXRhKTtTLkhvb2tzLnJlZ2lzdGVyZWRba10mJihpKFYpLnJvb3RQcm9wZXJ0eVZhbHVlQ2FjaGVbSF09Uy5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW0hdP1MuTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZFtIXShcImV4dHJhY3RcIixudWxsLExbMV0pOkxbMV0pLFwidHJhbnNmb3JtXCI9PT1MWzBdJiYoQz0hMCl9fXUubW9iaWxlSEEmJmkoVikudHJhbnNmb3JtQ2FjaGUudHJhbnNsYXRlM2Q9PT1hJiYoaShWKS50cmFuc2Zvcm1DYWNoZS50cmFuc2xhdGUzZD1cIigwcHgsIDBweCwgMHB4KVwiLEM9ITApLEMmJlMuZmx1c2hUcmFuc2Zvcm1DYWNoZShWKX19dS5kaXNwbGF5IT09YSYmXCJub25lXCIhPT11LmRpc3BsYXkmJihiLlN0YXRlLmNhbGxzW29dWzJdLmRpc3BsYXk9ITEpLHUudmlzaWJpbGl0eSE9PWEmJlwiaGlkZGVuXCIhPT11LnZpc2liaWxpdHkmJihiLlN0YXRlLmNhbGxzW29dWzJdLnZpc2liaWxpdHk9ITEpLHUucHJvZ3Jlc3MmJnUucHJvZ3Jlc3MuY2FsbChzWzFdLHNbMV0saCxNYXRoLm1heCgwLGQrdS5kdXJhdGlvbi10KSxkLHkpLDE9PT1oJiZwKG8pfX1iLlN0YXRlLmlzVGlja2luZyYmdyhjKX1mdW5jdGlvbiBwKGUsdCl7aWYoIWIuU3RhdGUuY2FsbHNbZV0pcmV0dXJuITE7Zm9yKHZhciByPWIuU3RhdGUuY2FsbHNbZV1bMF0sbj1iLlN0YXRlLmNhbGxzW2VdWzFdLG89Yi5TdGF0ZS5jYWxsc1tlXVsyXSxzPWIuU3RhdGUuY2FsbHNbZV1bNF0sbD0hMSx1PTAsYz1yLmxlbmd0aDtjPnU7dSsrKXt2YXIgcD1yW3VdLmVsZW1lbnQ7aWYodHx8by5sb29wfHwoXCJub25lXCI9PT1vLmRpc3BsYXkmJlMuc2V0UHJvcGVydHlWYWx1ZShwLFwiZGlzcGxheVwiLG8uZGlzcGxheSksXCJoaWRkZW5cIj09PW8udmlzaWJpbGl0eSYmUy5zZXRQcm9wZXJ0eVZhbHVlKHAsXCJ2aXNpYmlsaXR5XCIsby52aXNpYmlsaXR5KSksby5sb29wIT09ITAmJihmLnF1ZXVlKHApWzFdPT09YXx8IS9cXC52ZWxvY2l0eVF1ZXVlRW50cnlGbGFnL2kudGVzdChmLnF1ZXVlKHApWzFdKSkmJmkocCkpe2kocCkuaXNBbmltYXRpbmc9ITEsaShwKS5yb290UHJvcGVydHlWYWx1ZUNhY2hlPXt9O3ZhciBkPSExO2YuZWFjaChTLkxpc3RzLnRyYW5zZm9ybXMzRCxmdW5jdGlvbihlLHQpe3ZhciByPS9ec2NhbGUvLnRlc3QodCk/MTowLG49aShwKS50cmFuc2Zvcm1DYWNoZVt0XTtpKHApLnRyYW5zZm9ybUNhY2hlW3RdIT09YSYmbmV3IFJlZ0V4cChcIl5cXFxcKFwiK3IrXCJbXi5dXCIpLnRlc3QobikmJihkPSEwLGRlbGV0ZSBpKHApLnRyYW5zZm9ybUNhY2hlW3RdKX0pLG8ubW9iaWxlSEEmJihkPSEwLGRlbGV0ZSBpKHApLnRyYW5zZm9ybUNhY2hlLnRyYW5zbGF0ZTNkKSxkJiZTLmZsdXNoVHJhbnNmb3JtQ2FjaGUocCksUy5WYWx1ZXMucmVtb3ZlQ2xhc3MocCxcInZlbG9jaXR5LWFuaW1hdGluZ1wiKX1pZighdCYmby5jb21wbGV0ZSYmIW8ubG9vcCYmdT09PWMtMSl0cnl7by5jb21wbGV0ZS5jYWxsKG4sbil9Y2F0Y2goZyl7c2V0VGltZW91dChmdW5jdGlvbigpe3Rocm93IGd9LDEpfXMmJm8ubG9vcCE9PSEwJiZzKG4pLGkocCkmJm8ubG9vcD09PSEwJiYhdCYmKGYuZWFjaChpKHApLnR3ZWVuc0NvbnRhaW5lcixmdW5jdGlvbihlLHQpey9ecm90YXRlLy50ZXN0KGUpJiYzNjA9PT1wYXJzZUZsb2F0KHQuZW5kVmFsdWUpJiYodC5lbmRWYWx1ZT0wLHQuc3RhcnRWYWx1ZT0zNjApLC9eYmFja2dyb3VuZFBvc2l0aW9uLy50ZXN0KGUpJiYxMDA9PT1wYXJzZUZsb2F0KHQuZW5kVmFsdWUpJiZcIiVcIj09PXQudW5pdFR5cGUmJih0LmVuZFZhbHVlPTAsdC5zdGFydFZhbHVlPTEwMCl9KSxiKHAsXCJyZXZlcnNlXCIse2xvb3A6ITAsZGVsYXk6by5kZWxheX0pKSxvLnF1ZXVlIT09ITEmJmYuZGVxdWV1ZShwLG8ucXVldWUpfWIuU3RhdGUuY2FsbHNbZV09ITE7Zm9yKHZhciBtPTAseT1iLlN0YXRlLmNhbGxzLmxlbmd0aDt5Pm07bSsrKWlmKGIuU3RhdGUuY2FsbHNbbV0hPT0hMSl7bD0hMDticmVha31sPT09ITEmJihiLlN0YXRlLmlzVGlja2luZz0hMSxkZWxldGUgYi5TdGF0ZS5jYWxscyxiLlN0YXRlLmNhbGxzPVtdKX12YXIgZixkPWZ1bmN0aW9uKCl7aWYoci5kb2N1bWVudE1vZGUpcmV0dXJuIHIuZG9jdW1lbnRNb2RlO2Zvcih2YXIgZT03O2U+NDtlLS0pe3ZhciB0PXIuY3JlYXRlRWxlbWVudChcImRpdlwiKTtpZih0LmlubmVySFRNTD1cIjwhLS1baWYgSUUgXCIrZStcIl0+PHNwYW4+PC9zcGFuPjwhW2VuZGlmXS0tPlwiLHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzcGFuXCIpLmxlbmd0aClyZXR1cm4gdD1udWxsLGV9cmV0dXJuIGF9KCksZz1mdW5jdGlvbigpe3ZhciBlPTA7cmV0dXJuIHQud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx0Lm1velJlcXVlc3RBbmltYXRpb25GcmFtZXx8ZnVuY3Rpb24odCl7dmFyIHIsYT0obmV3IERhdGUpLmdldFRpbWUoKTtyZXR1cm4gcj1NYXRoLm1heCgwLDE2LShhLWUpKSxlPWErcixzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dChhK3IpfSxyKX19KCksbT17aXNTdHJpbmc6ZnVuY3Rpb24oZSl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGV9LGlzQXJyYXk6QXJyYXkuaXNBcnJheXx8ZnVuY3Rpb24oZSl7cmV0dXJuXCJbb2JqZWN0IEFycmF5XVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpfSxpc0Z1bmN0aW9uOmZ1bmN0aW9uKGUpe3JldHVyblwiW29iamVjdCBGdW5jdGlvbl1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKX0saXNOb2RlOmZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLm5vZGVUeXBlfSxpc05vZGVMaXN0OmZ1bmN0aW9uKGUpe3JldHVyblwib2JqZWN0XCI9PXR5cGVvZiBlJiYvXlxcW29iamVjdCAoSFRNTENvbGxlY3Rpb258Tm9kZUxpc3R8T2JqZWN0KVxcXSQvLnRlc3QoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpKSYmZS5sZW5ndGghPT1hJiYoMD09PWUubGVuZ3RofHxcIm9iamVjdFwiPT10eXBlb2YgZVswXSYmZVswXS5ub2RlVHlwZT4wKX0saXNXcmFwcGVkOmZ1bmN0aW9uKGUpe3JldHVybiBlJiYoZS5qcXVlcnl8fHQuWmVwdG8mJnQuWmVwdG8uemVwdG8uaXNaKGUpKX0saXNTVkc6ZnVuY3Rpb24oZSl7cmV0dXJuIHQuU1ZHRWxlbWVudCYmZSBpbnN0YW5jZW9mIHQuU1ZHRWxlbWVudH0saXNFbXB0eU9iamVjdDpmdW5jdGlvbihlKXtmb3IodmFyIHQgaW4gZSlyZXR1cm4hMTtyZXR1cm4hMH19LHk9ITE7aWYoZS5mbiYmZS5mbi5qcXVlcnk/KGY9ZSx5PSEwKTpmPXQuVmVsb2NpdHkuVXRpbGl0aWVzLDg+PWQmJiF5KXRocm93IG5ldyBFcnJvcihcIlZlbG9jaXR5OiBJRTggYW5kIGJlbG93IHJlcXVpcmUgalF1ZXJ5IHRvIGJlIGxvYWRlZCBiZWZvcmUgVmVsb2NpdHkuXCIpO2lmKDc+PWQpcmV0dXJuIHZvaWQoalF1ZXJ5LmZuLnZlbG9jaXR5PWpRdWVyeS5mbi5hbmltYXRlKTt2YXIgaD00MDAsdj1cInN3aW5nXCIsYj17U3RhdGU6e2lzTW9iaWxlOi9BbmRyb2lkfHdlYk9TfGlQaG9uZXxpUGFkfGlQb2R8QmxhY2tCZXJyeXxJRU1vYmlsZXxPcGVyYSBNaW5pL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxpc0FuZHJvaWQ6L0FuZHJvaWQvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLGlzR2luZ2VyYnJlYWQ6L0FuZHJvaWQgMlxcLjNcXC5bMy03XS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksaXNDaHJvbWU6dC5jaHJvbWUsaXNGaXJlZm94Oi9GaXJlZm94L2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxwcmVmaXhFbGVtZW50OnIuY3JlYXRlRWxlbWVudChcImRpdlwiKSxwcmVmaXhNYXRjaGVzOnt9LHNjcm9sbEFuY2hvcjpudWxsLHNjcm9sbFByb3BlcnR5TGVmdDpudWxsLHNjcm9sbFByb3BlcnR5VG9wOm51bGwsaXNUaWNraW5nOiExLGNhbGxzOltdfSxDU1M6e30sVXRpbGl0aWVzOmYsUmVkaXJlY3RzOnt9LEVhc2luZ3M6e30sUHJvbWlzZTp0LlByb21pc2UsZGVmYXVsdHM6e3F1ZXVlOlwiXCIsZHVyYXRpb246aCxlYXNpbmc6dixiZWdpbjphLGNvbXBsZXRlOmEscHJvZ3Jlc3M6YSxkaXNwbGF5OmEsdmlzaWJpbGl0eTphLGxvb3A6ITEsZGVsYXk6ITEsbW9iaWxlSEE6ITAsX2NhY2hlVmFsdWVzOiEwfSxpbml0OmZ1bmN0aW9uKGUpe2YuZGF0YShlLFwidmVsb2NpdHlcIix7aXNTVkc6bS5pc1NWRyhlKSxpc0FuaW1hdGluZzohMSxjb21wdXRlZFN0eWxlOm51bGwsdHdlZW5zQ29udGFpbmVyOm51bGwscm9vdFByb3BlcnR5VmFsdWVDYWNoZTp7fSx0cmFuc2Zvcm1DYWNoZTp7fX0pfSxob29rOm51bGwsbW9jazohMSx2ZXJzaW9uOnttYWpvcjoxLG1pbm9yOjIscGF0Y2g6Mn0sZGVidWc6ITF9O3QucGFnZVlPZmZzZXQhPT1hPyhiLlN0YXRlLnNjcm9sbEFuY2hvcj10LGIuU3RhdGUuc2Nyb2xsUHJvcGVydHlMZWZ0PVwicGFnZVhPZmZzZXRcIixiLlN0YXRlLnNjcm9sbFByb3BlcnR5VG9wPVwicGFnZVlPZmZzZXRcIik6KGIuU3RhdGUuc2Nyb2xsQW5jaG9yPXIuZG9jdW1lbnRFbGVtZW50fHxyLmJvZHkucGFyZW50Tm9kZXx8ci5ib2R5LGIuU3RhdGUuc2Nyb2xsUHJvcGVydHlMZWZ0PVwic2Nyb2xsTGVmdFwiLGIuU3RhdGUuc2Nyb2xsUHJvcGVydHlUb3A9XCJzY3JvbGxUb3BcIik7dmFyIHg9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3JldHVybi1lLnRlbnNpb24qZS54LWUuZnJpY3Rpb24qZS52fWZ1bmN0aW9uIHQodCxyLGEpe3ZhciBuPXt4OnQueCthLmR4KnIsdjp0LnYrYS5kdipyLHRlbnNpb246dC50ZW5zaW9uLGZyaWN0aW9uOnQuZnJpY3Rpb259O3JldHVybntkeDpuLnYsZHY6ZShuKX19ZnVuY3Rpb24gcihyLGEpe3ZhciBuPXtkeDpyLnYsZHY6ZShyKX0sbz10KHIsLjUqYSxuKSxpPXQociwuNSphLG8pLHM9dChyLGEsaSksbD0xLzYqKG4uZHgrMiooby5keCtpLmR4KStzLmR4KSx1PTEvNioobi5kdisyKihvLmR2K2kuZHYpK3MuZHYpO3JldHVybiByLng9ci54K2wqYSxyLnY9ci52K3UqYSxyfXJldHVybiBmdW5jdGlvbiBhKGUsdCxuKXt2YXIgbyxpLHMsbD17eDotMSx2OjAsdGVuc2lvbjpudWxsLGZyaWN0aW9uOm51bGx9LHU9WzBdLGM9MCxwPTFlLTQsZj0uMDE2O2ZvcihlPXBhcnNlRmxvYXQoZSl8fDUwMCx0PXBhcnNlRmxvYXQodCl8fDIwLG49bnx8bnVsbCxsLnRlbnNpb249ZSxsLmZyaWN0aW9uPXQsbz1udWxsIT09bixvPyhjPWEoZSx0KSxpPWMvbipmKTppPWY7cz1yKHN8fGwsaSksdS5wdXNoKDErcy54KSxjKz0xNixNYXRoLmFicyhzLngpPnAmJk1hdGguYWJzKHMudik+cDspO3JldHVybiBvP2Z1bmN0aW9uKGUpe3JldHVybiB1W2UqKHUubGVuZ3RoLTEpfDBdfTpjfX0oKTtiLkVhc2luZ3M9e2xpbmVhcjpmdW5jdGlvbihlKXtyZXR1cm4gZX0sc3dpbmc6ZnVuY3Rpb24oZSl7cmV0dXJuLjUtTWF0aC5jb3MoZSpNYXRoLlBJKS8yfSxzcHJpbmc6ZnVuY3Rpb24oZSl7cmV0dXJuIDEtTWF0aC5jb3MoNC41KmUqTWF0aC5QSSkqTWF0aC5leHAoNiotZSl9fSxmLmVhY2goW1tcImVhc2VcIixbLjI1LC4xLC4yNSwxXV0sW1wiZWFzZS1pblwiLFsuNDIsMCwxLDFdXSxbXCJlYXNlLW91dFwiLFswLDAsLjU4LDFdXSxbXCJlYXNlLWluLW91dFwiLFsuNDIsMCwuNTgsMV1dLFtcImVhc2VJblNpbmVcIixbLjQ3LDAsLjc0NSwuNzE1XV0sW1wiZWFzZU91dFNpbmVcIixbLjM5LC41NzUsLjU2NSwxXV0sW1wiZWFzZUluT3V0U2luZVwiLFsuNDQ1LC4wNSwuNTUsLjk1XV0sW1wiZWFzZUluUXVhZFwiLFsuNTUsLjA4NSwuNjgsLjUzXV0sW1wiZWFzZU91dFF1YWRcIixbLjI1LC40NiwuNDUsLjk0XV0sW1wiZWFzZUluT3V0UXVhZFwiLFsuNDU1LC4wMywuNTE1LC45NTVdXSxbXCJlYXNlSW5DdWJpY1wiLFsuNTUsLjA1NSwuNjc1LC4xOV1dLFtcImVhc2VPdXRDdWJpY1wiLFsuMjE1LC42MSwuMzU1LDFdXSxbXCJlYXNlSW5PdXRDdWJpY1wiLFsuNjQ1LC4wNDUsLjM1NSwxXV0sW1wiZWFzZUluUXVhcnRcIixbLjg5NSwuMDMsLjY4NSwuMjJdXSxbXCJlYXNlT3V0UXVhcnRcIixbLjE2NSwuODQsLjQ0LDFdXSxbXCJlYXNlSW5PdXRRdWFydFwiLFsuNzcsMCwuMTc1LDFdXSxbXCJlYXNlSW5RdWludFwiLFsuNzU1LC4wNSwuODU1LC4wNl1dLFtcImVhc2VPdXRRdWludFwiLFsuMjMsMSwuMzIsMV1dLFtcImVhc2VJbk91dFF1aW50XCIsWy44NiwwLC4wNywxXV0sW1wiZWFzZUluRXhwb1wiLFsuOTUsLjA1LC43OTUsLjAzNV1dLFtcImVhc2VPdXRFeHBvXCIsWy4xOSwxLC4yMiwxXV0sW1wiZWFzZUluT3V0RXhwb1wiLFsxLDAsMCwxXV0sW1wiZWFzZUluQ2lyY1wiLFsuNiwuMDQsLjk4LC4zMzVdXSxbXCJlYXNlT3V0Q2lyY1wiLFsuMDc1LC44MiwuMTY1LDFdXSxbXCJlYXNlSW5PdXRDaXJjXCIsWy43ODUsLjEzNSwuMTUsLjg2XV1dLGZ1bmN0aW9uKGUsdCl7Yi5FYXNpbmdzW3RbMF1dPWwuYXBwbHkobnVsbCx0WzFdKX0pO3ZhciBTPWIuQ1NTPXtSZWdFeDp7aXNIZXg6L14jKFtBLWZcXGRdezN9KXsxLDJ9JC9pLHZhbHVlVW53cmFwOi9eW0Etel0rXFwoKC4qKVxcKSQvaSx3cmFwcGVkVmFsdWVBbHJlYWR5RXh0cmFjdGVkOi9bMC05Ll0rIFswLTkuXSsgWzAtOS5dKyggWzAtOS5dKyk/Lyx2YWx1ZVNwbGl0Oi8oW0Etel0rXFwoLitcXCkpfCgoW0EtejAtOSMtLl0rPykoPz1cXHN8JCkpL2dpfSxMaXN0czp7Y29sb3JzOltcImZpbGxcIixcInN0cm9rZVwiLFwic3RvcENvbG9yXCIsXCJjb2xvclwiLFwiYmFja2dyb3VuZENvbG9yXCIsXCJib3JkZXJDb2xvclwiLFwiYm9yZGVyVG9wQ29sb3JcIixcImJvcmRlclJpZ2h0Q29sb3JcIixcImJvcmRlckJvdHRvbUNvbG9yXCIsXCJib3JkZXJMZWZ0Q29sb3JcIixcIm91dGxpbmVDb2xvclwiXSx0cmFuc2Zvcm1zQmFzZTpbXCJ0cmFuc2xhdGVYXCIsXCJ0cmFuc2xhdGVZXCIsXCJzY2FsZVwiLFwic2NhbGVYXCIsXCJzY2FsZVlcIixcInNrZXdYXCIsXCJza2V3WVwiLFwicm90YXRlWlwiXSx0cmFuc2Zvcm1zM0Q6W1widHJhbnNmb3JtUGVyc3BlY3RpdmVcIixcInRyYW5zbGF0ZVpcIixcInNjYWxlWlwiLFwicm90YXRlWFwiLFwicm90YXRlWVwiXX0sSG9va3M6e3RlbXBsYXRlczp7dGV4dFNoYWRvdzpbXCJDb2xvciBYIFkgQmx1clwiLFwiYmxhY2sgMHB4IDBweCAwcHhcIl0sYm94U2hhZG93OltcIkNvbG9yIFggWSBCbHVyIFNwcmVhZFwiLFwiYmxhY2sgMHB4IDBweCAwcHggMHB4XCJdLGNsaXA6W1wiVG9wIFJpZ2h0IEJvdHRvbSBMZWZ0XCIsXCIwcHggMHB4IDBweCAwcHhcIl0sYmFja2dyb3VuZFBvc2l0aW9uOltcIlggWVwiLFwiMCUgMCVcIl0sdHJhbnNmb3JtT3JpZ2luOltcIlggWSBaXCIsXCI1MCUgNTAlIDBweFwiXSxwZXJzcGVjdGl2ZU9yaWdpbjpbXCJYIFlcIixcIjUwJSA1MCVcIl19LHJlZ2lzdGVyZWQ6e30scmVnaXN0ZXI6ZnVuY3Rpb24oKXtmb3IodmFyIGU9MDtlPFMuTGlzdHMuY29sb3JzLmxlbmd0aDtlKyspe3ZhciB0PVwiY29sb3JcIj09PVMuTGlzdHMuY29sb3JzW2VdP1wiMCAwIDAgMVwiOlwiMjU1IDI1NSAyNTUgMVwiO1MuSG9va3MudGVtcGxhdGVzW1MuTGlzdHMuY29sb3JzW2VdXT1bXCJSZWQgR3JlZW4gQmx1ZSBBbHBoYVwiLHRdfXZhciByLGEsbjtpZihkKWZvcihyIGluIFMuSG9va3MudGVtcGxhdGVzKXthPVMuSG9va3MudGVtcGxhdGVzW3JdLG49YVswXS5zcGxpdChcIiBcIik7dmFyIG89YVsxXS5tYXRjaChTLlJlZ0V4LnZhbHVlU3BsaXQpO1wiQ29sb3JcIj09PW5bMF0mJihuLnB1c2gobi5zaGlmdCgpKSxvLnB1c2goby5zaGlmdCgpKSxTLkhvb2tzLnRlbXBsYXRlc1tyXT1bbi5qb2luKFwiIFwiKSxvLmpvaW4oXCIgXCIpXSl9Zm9yKHIgaW4gUy5Ib29rcy50ZW1wbGF0ZXMpe2E9Uy5Ib29rcy50ZW1wbGF0ZXNbcl0sbj1hWzBdLnNwbGl0KFwiIFwiKTtmb3IodmFyIGUgaW4gbil7dmFyIGk9cituW2VdLHM9ZTtTLkhvb2tzLnJlZ2lzdGVyZWRbaV09W3Isc119fX0sZ2V0Um9vdDpmdW5jdGlvbihlKXt2YXIgdD1TLkhvb2tzLnJlZ2lzdGVyZWRbZV07cmV0dXJuIHQ/dFswXTplfSxjbGVhblJvb3RQcm9wZXJ0eVZhbHVlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIFMuUmVnRXgudmFsdWVVbndyYXAudGVzdCh0KSYmKHQ9dC5tYXRjaChTLlJlZ0V4LnZhbHVlVW53cmFwKVsxXSksUy5WYWx1ZXMuaXNDU1NOdWxsVmFsdWUodCkmJih0PVMuSG9va3MudGVtcGxhdGVzW2VdWzFdKSx0fSxleHRyYWN0VmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgcj1TLkhvb2tzLnJlZ2lzdGVyZWRbZV07aWYocil7dmFyIGE9clswXSxuPXJbMV07cmV0dXJuIHQ9Uy5Ib29rcy5jbGVhblJvb3RQcm9wZXJ0eVZhbHVlKGEsdCksdC50b1N0cmluZygpLm1hdGNoKFMuUmVnRXgudmFsdWVTcGxpdClbbl19cmV0dXJuIHR9LGluamVjdFZhbHVlOmZ1bmN0aW9uKGUsdCxyKXt2YXIgYT1TLkhvb2tzLnJlZ2lzdGVyZWRbZV07aWYoYSl7dmFyIG4sbyxpPWFbMF0scz1hWzFdO3JldHVybiByPVMuSG9va3MuY2xlYW5Sb290UHJvcGVydHlWYWx1ZShpLHIpLG49ci50b1N0cmluZygpLm1hdGNoKFMuUmVnRXgudmFsdWVTcGxpdCksbltzXT10LG89bi5qb2luKFwiIFwiKX1yZXR1cm4gcn19LE5vcm1hbGl6YXRpb25zOntyZWdpc3RlcmVkOntjbGlwOmZ1bmN0aW9uKGUsdCxyKXtzd2l0Y2goZSl7Y2FzZVwibmFtZVwiOnJldHVyblwiY2xpcFwiO2Nhc2VcImV4dHJhY3RcIjp2YXIgYTtyZXR1cm4gUy5SZWdFeC53cmFwcGVkVmFsdWVBbHJlYWR5RXh0cmFjdGVkLnRlc3Qocik/YT1yOihhPXIudG9TdHJpbmcoKS5tYXRjaChTLlJlZ0V4LnZhbHVlVW53cmFwKSxhPWE/YVsxXS5yZXBsYWNlKC8sKFxccyspPy9nLFwiIFwiKTpyKSxhO2Nhc2VcImluamVjdFwiOnJldHVyblwicmVjdChcIityK1wiKVwifX0sYmx1cjpmdW5jdGlvbihlLHQscil7c3dpdGNoKGUpe2Nhc2VcIm5hbWVcIjpyZXR1cm4gYi5TdGF0ZS5pc0ZpcmVmb3g/XCJmaWx0ZXJcIjpcIi13ZWJraXQtZmlsdGVyXCI7Y2FzZVwiZXh0cmFjdFwiOnZhciBhPXBhcnNlRmxvYXQocik7aWYoIWEmJjAhPT1hKXt2YXIgbj1yLnRvU3RyaW5nKCkubWF0Y2goL2JsdXJcXCgoWzAtOV0rW0Etel0rKVxcKS9pKTthPW4/blsxXTowfXJldHVybiBhO2Nhc2VcImluamVjdFwiOnJldHVybiBwYXJzZUZsb2F0KHIpP1wiYmx1cihcIityK1wiKVwiOlwibm9uZVwifX0sb3BhY2l0eTpmdW5jdGlvbihlLHQscil7aWYoOD49ZClzd2l0Y2goZSl7Y2FzZVwibmFtZVwiOnJldHVyblwiZmlsdGVyXCI7Y2FzZVwiZXh0cmFjdFwiOnZhciBhPXIudG9TdHJpbmcoKS5tYXRjaCgvYWxwaGFcXChvcGFjaXR5PSguKilcXCkvaSk7cmV0dXJuIHI9YT9hWzFdLzEwMDoxO2Nhc2VcImluamVjdFwiOnJldHVybiB0LnN0eWxlLnpvb209MSxwYXJzZUZsb2F0KHIpPj0xP1wiXCI6XCJhbHBoYShvcGFjaXR5PVwiK3BhcnNlSW50KDEwMCpwYXJzZUZsb2F0KHIpLDEwKStcIilcIn1lbHNlIHN3aXRjaChlKXtjYXNlXCJuYW1lXCI6cmV0dXJuXCJvcGFjaXR5XCI7Y2FzZVwiZXh0cmFjdFwiOnJldHVybiByO2Nhc2VcImluamVjdFwiOnJldHVybiByfX19LHJlZ2lzdGVyOmZ1bmN0aW9uKCl7OT49ZHx8Yi5TdGF0ZS5pc0dpbmdlcmJyZWFkfHwoUy5MaXN0cy50cmFuc2Zvcm1zQmFzZT1TLkxpc3RzLnRyYW5zZm9ybXNCYXNlLmNvbmNhdChTLkxpc3RzLnRyYW5zZm9ybXMzRCkpO2Zvcih2YXIgZT0wO2U8Uy5MaXN0cy50cmFuc2Zvcm1zQmFzZS5sZW5ndGg7ZSsrKSFmdW5jdGlvbigpe3ZhciB0PVMuTGlzdHMudHJhbnNmb3Jtc0Jhc2VbZV07Uy5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW3RdPWZ1bmN0aW9uKGUscixuKXtzd2l0Y2goZSl7Y2FzZVwibmFtZVwiOnJldHVyblwidHJhbnNmb3JtXCI7Y2FzZVwiZXh0cmFjdFwiOnJldHVybiBpKHIpPT09YXx8aShyKS50cmFuc2Zvcm1DYWNoZVt0XT09PWE/L15zY2FsZS9pLnRlc3QodCk/MTowOmkocikudHJhbnNmb3JtQ2FjaGVbdF0ucmVwbGFjZSgvWygpXS9nLFwiXCIpO2Nhc2VcImluamVjdFwiOnZhciBvPSExO3N3aXRjaCh0LnN1YnN0cigwLHQubGVuZ3RoLTEpKXtjYXNlXCJ0cmFuc2xhdGVcIjpvPSEvKCV8cHh8ZW18cmVtfHZ3fHZofFxcZCkkL2kudGVzdChuKTticmVhaztjYXNlXCJzY2FsXCI6Y2FzZVwic2NhbGVcIjpiLlN0YXRlLmlzQW5kcm9pZCYmaShyKS50cmFuc2Zvcm1DYWNoZVt0XT09PWEmJjE+biYmKG49MSksbz0hLyhcXGQpJC9pLnRlc3Qobik7YnJlYWs7Y2FzZVwic2tld1wiOm89IS8oZGVnfFxcZCkkL2kudGVzdChuKTticmVhaztjYXNlXCJyb3RhdGVcIjpvPSEvKGRlZ3xcXGQpJC9pLnRlc3Qobil9cmV0dXJuIG98fChpKHIpLnRyYW5zZm9ybUNhY2hlW3RdPVwiKFwiK24rXCIpXCIpLGkocikudHJhbnNmb3JtQ2FjaGVbdF19fX0oKTtmb3IodmFyIGU9MDtlPFMuTGlzdHMuY29sb3JzLmxlbmd0aDtlKyspIWZ1bmN0aW9uKCl7dmFyIHQ9Uy5MaXN0cy5jb2xvcnNbZV07Uy5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW3RdPWZ1bmN0aW9uKGUscixuKXtzd2l0Y2goZSl7Y2FzZVwibmFtZVwiOnJldHVybiB0O2Nhc2VcImV4dHJhY3RcIjp2YXIgbztpZihTLlJlZ0V4LndyYXBwZWRWYWx1ZUFscmVhZHlFeHRyYWN0ZWQudGVzdChuKSlvPW47ZWxzZXt2YXIgaSxzPXtibGFjazpcInJnYigwLCAwLCAwKVwiLGJsdWU6XCJyZ2IoMCwgMCwgMjU1KVwiLGdyYXk6XCJyZ2IoMTI4LCAxMjgsIDEyOClcIixncmVlbjpcInJnYigwLCAxMjgsIDApXCIscmVkOlwicmdiKDI1NSwgMCwgMClcIix3aGl0ZTpcInJnYigyNTUsIDI1NSwgMjU1KVwifTsvXltBLXpdKyQvaS50ZXN0KG4pP2k9c1tuXSE9PWE/c1tuXTpzLmJsYWNrOlMuUmVnRXguaXNIZXgudGVzdChuKT9pPVwicmdiKFwiK1MuVmFsdWVzLmhleFRvUmdiKG4pLmpvaW4oXCIgXCIpK1wiKVwiOi9ecmdiYT9cXCgvaS50ZXN0KG4pfHwoaT1zLmJsYWNrKSxvPShpfHxuKS50b1N0cmluZygpLm1hdGNoKFMuUmVnRXgudmFsdWVVbndyYXApWzFdLnJlcGxhY2UoLywoXFxzKyk/L2csXCIgXCIpfXJldHVybiA4Pj1kfHwzIT09by5zcGxpdChcIiBcIikubGVuZ3RofHwobys9XCIgMVwiKSxvO2Nhc2VcImluamVjdFwiOnJldHVybiA4Pj1kPzQ9PT1uLnNwbGl0KFwiIFwiKS5sZW5ndGgmJihuPW4uc3BsaXQoL1xccysvKS5zbGljZSgwLDMpLmpvaW4oXCIgXCIpKTozPT09bi5zcGxpdChcIiBcIikubGVuZ3RoJiYobis9XCIgMVwiKSwoOD49ZD9cInJnYlwiOlwicmdiYVwiKStcIihcIituLnJlcGxhY2UoL1xccysvZyxcIixcIikucmVwbGFjZSgvXFwuKFxcZCkrKD89LCkvZyxcIlwiKStcIilcIn19fSgpfX0sTmFtZXM6e2NhbWVsQ2FzZTpmdW5jdGlvbihlKXtyZXR1cm4gZS5yZXBsYWNlKC8tKFxcdykvZyxmdW5jdGlvbihlLHQpe3JldHVybiB0LnRvVXBwZXJDYXNlKCl9KX0sU1ZHQXR0cmlidXRlOmZ1bmN0aW9uKGUpe3ZhciB0PVwid2lkdGh8aGVpZ2h0fHh8eXxjeHxjeXxyfHJ4fHJ5fHgxfHgyfHkxfHkyXCI7cmV0dXJuKGR8fGIuU3RhdGUuaXNBbmRyb2lkJiYhYi5TdGF0ZS5pc0Nocm9tZSkmJih0Kz1cInx0cmFuc2Zvcm1cIiksbmV3IFJlZ0V4cChcIl4oXCIrdCtcIikkXCIsXCJpXCIpLnRlc3QoZSl9LHByZWZpeENoZWNrOmZ1bmN0aW9uKGUpe2lmKGIuU3RhdGUucHJlZml4TWF0Y2hlc1tlXSlyZXR1cm5bYi5TdGF0ZS5wcmVmaXhNYXRjaGVzW2VdLCEwXTtmb3IodmFyIHQ9W1wiXCIsXCJXZWJraXRcIixcIk1velwiLFwibXNcIixcIk9cIl0scj0wLGE9dC5sZW5ndGg7YT5yO3IrKyl7dmFyIG47aWYobj0wPT09cj9lOnRbcl0rZS5yZXBsYWNlKC9eXFx3LyxmdW5jdGlvbihlKXtyZXR1cm4gZS50b1VwcGVyQ2FzZSgpfSksbS5pc1N0cmluZyhiLlN0YXRlLnByZWZpeEVsZW1lbnQuc3R5bGVbbl0pKXJldHVybiBiLlN0YXRlLnByZWZpeE1hdGNoZXNbZV09bixbbiwhMF19cmV0dXJuW2UsITFdfX0sVmFsdWVzOntoZXhUb1JnYjpmdW5jdGlvbihlKXt2YXIgdCxyPS9eIz8oW2EtZlxcZF0pKFthLWZcXGRdKShbYS1mXFxkXSkkL2ksYT0vXiM/KFthLWZcXGRdezJ9KShbYS1mXFxkXXsyfSkoW2EtZlxcZF17Mn0pJC9pO3JldHVybiBlPWUucmVwbGFjZShyLGZ1bmN0aW9uKGUsdCxyLGEpe3JldHVybiB0K3QrcityK2ErYX0pLHQ9YS5leGVjKGUpLHQ/W3BhcnNlSW50KHRbMV0sMTYpLHBhcnNlSW50KHRbMl0sMTYpLHBhcnNlSW50KHRbM10sMTYpXTpbMCwwLDBdfSxpc0NTU051bGxWYWx1ZTpmdW5jdGlvbihlKXtyZXR1cm4gMD09ZXx8L14obm9uZXxhdXRvfHRyYW5zcGFyZW50fChyZ2JhXFwoMCwgPzAsID8wLCA/MFxcKSkpJC9pLnRlc3QoZSl9LGdldFVuaXRUeXBlOmZ1bmN0aW9uKGUpe3JldHVybi9eKHJvdGF0ZXxza2V3KS9pLnRlc3QoZSk/XCJkZWdcIjovKF4oc2NhbGV8c2NhbGVYfHNjYWxlWXxzY2FsZVp8YWxwaGF8ZmxleEdyb3d8ZmxleEhlaWdodHx6SW5kZXh8Zm9udFdlaWdodCkkKXwoKG9wYWNpdHl8cmVkfGdyZWVufGJsdWV8YWxwaGEpJCkvaS50ZXN0KGUpP1wiXCI6XCJweFwifSxnZXREaXNwbGF5VHlwZTpmdW5jdGlvbihlKXt2YXIgdD1lJiZlLnRhZ05hbWUudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpO3JldHVybi9eKGJ8YmlnfGl8c21hbGx8dHR8YWJicnxhY3JvbnltfGNpdGV8Y29kZXxkZm58ZW18a2JkfHN0cm9uZ3xzYW1wfHZhcnxhfGJkb3xicnxpbWd8bWFwfG9iamVjdHxxfHNjcmlwdHxzcGFufHN1YnxzdXB8YnV0dG9ufGlucHV0fGxhYmVsfHNlbGVjdHx0ZXh0YXJlYSkkL2kudGVzdCh0KT9cImlubGluZVwiOi9eKGxpKSQvaS50ZXN0KHQpP1wibGlzdC1pdGVtXCI6L14odHIpJC9pLnRlc3QodCk/XCJ0YWJsZS1yb3dcIjovXih0YWJsZSkkL2kudGVzdCh0KT9cInRhYmxlXCI6L14odGJvZHkpJC9pLnRlc3QodCk/XCJ0YWJsZS1yb3ctZ3JvdXBcIjpcImJsb2NrXCJ9LGFkZENsYXNzOmZ1bmN0aW9uKGUsdCl7ZS5jbGFzc0xpc3Q/ZS5jbGFzc0xpc3QuYWRkKHQpOmUuY2xhc3NOYW1lKz0oZS5jbGFzc05hbWUubGVuZ3RoP1wiIFwiOlwiXCIpK3R9LHJlbW92ZUNsYXNzOmZ1bmN0aW9uKGUsdCl7ZS5jbGFzc0xpc3Q/ZS5jbGFzc0xpc3QucmVtb3ZlKHQpOmUuY2xhc3NOYW1lPWUuY2xhc3NOYW1lLnRvU3RyaW5nKCkucmVwbGFjZShuZXcgUmVnRXhwKFwiKF58XFxcXHMpXCIrdC5zcGxpdChcIiBcIikuam9pbihcInxcIikrXCIoXFxcXHN8JClcIixcImdpXCIpLFwiIFwiKX19LGdldFByb3BlcnR5VmFsdWU6ZnVuY3Rpb24oZSxyLG4sbyl7ZnVuY3Rpb24gcyhlLHIpe2Z1bmN0aW9uIG4oKXt1JiZTLnNldFByb3BlcnR5VmFsdWUoZSxcImRpc3BsYXlcIixcIm5vbmVcIil9dmFyIGw9MDtpZig4Pj1kKWw9Zi5jc3MoZSxyKTtlbHNle3ZhciB1PSExO2lmKC9eKHdpZHRofGhlaWdodCkkLy50ZXN0KHIpJiYwPT09Uy5nZXRQcm9wZXJ0eVZhbHVlKGUsXCJkaXNwbGF5XCIpJiYodT0hMCxTLnNldFByb3BlcnR5VmFsdWUoZSxcImRpc3BsYXlcIixTLlZhbHVlcy5nZXREaXNwbGF5VHlwZShlKSkpLCFvKXtpZihcImhlaWdodFwiPT09ciYmXCJib3JkZXItYm94XCIhPT1TLmdldFByb3BlcnR5VmFsdWUoZSxcImJveFNpemluZ1wiKS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkpe3ZhciBjPWUub2Zmc2V0SGVpZ2h0LShwYXJzZUZsb2F0KFMuZ2V0UHJvcGVydHlWYWx1ZShlLFwiYm9yZGVyVG9wV2lkdGhcIikpfHwwKS0ocGFyc2VGbG9hdChTLmdldFByb3BlcnR5VmFsdWUoZSxcImJvcmRlckJvdHRvbVdpZHRoXCIpKXx8MCktKHBhcnNlRmxvYXQoUy5nZXRQcm9wZXJ0eVZhbHVlKGUsXCJwYWRkaW5nVG9wXCIpKXx8MCktKHBhcnNlRmxvYXQoUy5nZXRQcm9wZXJ0eVZhbHVlKGUsXCJwYWRkaW5nQm90dG9tXCIpKXx8MCk7cmV0dXJuIG4oKSxjfWlmKFwid2lkdGhcIj09PXImJlwiYm9yZGVyLWJveFwiIT09Uy5nZXRQcm9wZXJ0eVZhbHVlKGUsXCJib3hTaXppbmdcIikudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpKXt2YXIgcD1lLm9mZnNldFdpZHRoLShwYXJzZUZsb2F0KFMuZ2V0UHJvcGVydHlWYWx1ZShlLFwiYm9yZGVyTGVmdFdpZHRoXCIpKXx8MCktKHBhcnNlRmxvYXQoUy5nZXRQcm9wZXJ0eVZhbHVlKGUsXCJib3JkZXJSaWdodFdpZHRoXCIpKXx8MCktKHBhcnNlRmxvYXQoUy5nZXRQcm9wZXJ0eVZhbHVlKGUsXCJwYWRkaW5nTGVmdFwiKSl8fDApLShwYXJzZUZsb2F0KFMuZ2V0UHJvcGVydHlWYWx1ZShlLFwicGFkZGluZ1JpZ2h0XCIpKXx8MCk7cmV0dXJuIG4oKSxwfX12YXIgZztnPWkoZSk9PT1hP3QuZ2V0Q29tcHV0ZWRTdHlsZShlLG51bGwpOmkoZSkuY29tcHV0ZWRTdHlsZT9pKGUpLmNvbXB1dGVkU3R5bGU6aShlKS5jb21wdXRlZFN0eWxlPXQuZ2V0Q29tcHV0ZWRTdHlsZShlLG51bGwpLFwiYm9yZGVyQ29sb3JcIj09PXImJihyPVwiYm9yZGVyVG9wQ29sb3JcIiksbD05PT09ZCYmXCJmaWx0ZXJcIj09PXI/Zy5nZXRQcm9wZXJ0eVZhbHVlKHIpOmdbcl0sKFwiXCI9PT1sfHxudWxsPT09bCkmJihsPWUuc3R5bGVbcl0pLG4oKX1pZihcImF1dG9cIj09PWwmJi9eKHRvcHxyaWdodHxib3R0b218bGVmdCkkL2kudGVzdChyKSl7dmFyIG09cyhlLFwicG9zaXRpb25cIik7KFwiZml4ZWRcIj09PW18fFwiYWJzb2x1dGVcIj09PW0mJi90b3B8bGVmdC9pLnRlc3QocikpJiYobD1mKGUpLnBvc2l0aW9uKClbcl0rXCJweFwiKX1yZXR1cm4gbH12YXIgbDtpZihTLkhvb2tzLnJlZ2lzdGVyZWRbcl0pe3ZhciB1PXIsYz1TLkhvb2tzLmdldFJvb3QodSk7bj09PWEmJihuPVMuZ2V0UHJvcGVydHlWYWx1ZShlLFMuTmFtZXMucHJlZml4Q2hlY2soYylbMF0pKSxTLk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbY10mJihuPVMuTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZFtjXShcImV4dHJhY3RcIixlLG4pKSxsPVMuSG9va3MuZXh0cmFjdFZhbHVlKHUsbil9ZWxzZSBpZihTLk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbcl0pe3ZhciBwLGc7cD1TLk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbcl0oXCJuYW1lXCIsZSksXCJ0cmFuc2Zvcm1cIiE9PXAmJihnPXMoZSxTLk5hbWVzLnByZWZpeENoZWNrKHApWzBdKSxTLlZhbHVlcy5pc0NTU051bGxWYWx1ZShnKSYmUy5Ib29rcy50ZW1wbGF0ZXNbcl0mJihnPVMuSG9va3MudGVtcGxhdGVzW3JdWzFdKSksbD1TLk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbcl0oXCJleHRyYWN0XCIsZSxnKX1pZighL15bXFxkLV0vLnRlc3QobCkpaWYoaShlKSYmaShlKS5pc1NWRyYmUy5OYW1lcy5TVkdBdHRyaWJ1dGUocikpaWYoL14oaGVpZ2h0fHdpZHRoKSQvaS50ZXN0KHIpKXRyeXtsPWUuZ2V0QkJveCgpW3JdfWNhdGNoKG0pe2w9MH1lbHNlIGw9ZS5nZXRBdHRyaWJ1dGUocik7ZWxzZSBsPXMoZSxTLk5hbWVzLnByZWZpeENoZWNrKHIpWzBdKTtyZXR1cm4gUy5WYWx1ZXMuaXNDU1NOdWxsVmFsdWUobCkmJihsPTApLGIuZGVidWc+PTImJmNvbnNvbGUubG9nKFwiR2V0IFwiK3IrXCI6IFwiK2wpLGx9LHNldFByb3BlcnR5VmFsdWU6ZnVuY3Rpb24oZSxyLGEsbixvKXt2YXIgcz1yO2lmKFwic2Nyb2xsXCI9PT1yKW8uY29udGFpbmVyP28uY29udGFpbmVyW1wic2Nyb2xsXCIrby5kaXJlY3Rpb25dPWE6XCJMZWZ0XCI9PT1vLmRpcmVjdGlvbj90LnNjcm9sbFRvKGEsby5hbHRlcm5hdGVWYWx1ZSk6dC5zY3JvbGxUbyhvLmFsdGVybmF0ZVZhbHVlLGEpO2Vsc2UgaWYoUy5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW3JdJiZcInRyYW5zZm9ybVwiPT09Uy5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW3JdKFwibmFtZVwiLGUpKVMuTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZFtyXShcImluamVjdFwiLGUsYSkscz1cInRyYW5zZm9ybVwiLGE9aShlKS50cmFuc2Zvcm1DYWNoZVtyXTtlbHNle2lmKFMuSG9va3MucmVnaXN0ZXJlZFtyXSl7dmFyIGw9cix1PVMuSG9va3MuZ2V0Um9vdChyKTtuPW58fFMuZ2V0UHJvcGVydHlWYWx1ZShlLHUpLGE9Uy5Ib29rcy5pbmplY3RWYWx1ZShsLGEsbikscj11fWlmKFMuTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZFtyXSYmKGE9Uy5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW3JdKFwiaW5qZWN0XCIsZSxhKSxyPVMuTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZFtyXShcIm5hbWVcIixlKSkscz1TLk5hbWVzLnByZWZpeENoZWNrKHIpWzBdLDg+PWQpdHJ5e2Uuc3R5bGVbc109YX1jYXRjaChjKXtiLmRlYnVnJiZjb25zb2xlLmxvZyhcIkJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCBbXCIrYStcIl0gZm9yIFtcIitzK1wiXVwiKX1lbHNlIGkoZSkmJmkoZSkuaXNTVkcmJlMuTmFtZXMuU1ZHQXR0cmlidXRlKHIpP2Uuc2V0QXR0cmlidXRlKHIsYSk6ZS5zdHlsZVtzXT1hO2IuZGVidWc+PTImJmNvbnNvbGUubG9nKFwiU2V0IFwiK3IrXCIgKFwiK3MrXCIpOiBcIithKX1yZXR1cm5bcyxhXX0sZmx1c2hUcmFuc2Zvcm1DYWNoZTpmdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQpe3JldHVybiBwYXJzZUZsb2F0KFMuZ2V0UHJvcGVydHlWYWx1ZShlLHQpKX12YXIgcj1cIlwiO2lmKChkfHxiLlN0YXRlLmlzQW5kcm9pZCYmIWIuU3RhdGUuaXNDaHJvbWUpJiZpKGUpLmlzU1ZHKXt2YXIgYT17dHJhbnNsYXRlOlt0KFwidHJhbnNsYXRlWFwiKSx0KFwidHJhbnNsYXRlWVwiKV0sc2tld1g6W3QoXCJza2V3WFwiKV0sc2tld1k6W3QoXCJza2V3WVwiKV0sc2NhbGU6MSE9PXQoXCJzY2FsZVwiKT9bdChcInNjYWxlXCIpLHQoXCJzY2FsZVwiKV06W3QoXCJzY2FsZVhcIiksdChcInNjYWxlWVwiKV0scm90YXRlOlt0KFwicm90YXRlWlwiKSwwLDBdfTtmLmVhY2goaShlKS50cmFuc2Zvcm1DYWNoZSxmdW5jdGlvbihlKXsvXnRyYW5zbGF0ZS9pLnRlc3QoZSk/ZT1cInRyYW5zbGF0ZVwiOi9ec2NhbGUvaS50ZXN0KGUpP2U9XCJzY2FsZVwiOi9ecm90YXRlL2kudGVzdChlKSYmKGU9XCJyb3RhdGVcIiksYVtlXSYmKHIrPWUrXCIoXCIrYVtlXS5qb2luKFwiIFwiKStcIikgXCIsZGVsZXRlIGFbZV0pfSl9ZWxzZXt2YXIgbixvO2YuZWFjaChpKGUpLnRyYW5zZm9ybUNhY2hlLGZ1bmN0aW9uKHQpe3JldHVybiBuPWkoZSkudHJhbnNmb3JtQ2FjaGVbdF0sXCJ0cmFuc2Zvcm1QZXJzcGVjdGl2ZVwiPT09dD8obz1uLCEwKTooOT09PWQmJlwicm90YXRlWlwiPT09dCYmKHQ9XCJyb3RhdGVcIiksdm9pZChyKz10K24rXCIgXCIpKX0pLG8mJihyPVwicGVyc3BlY3RpdmVcIitvK1wiIFwiK3IpfVMuc2V0UHJvcGVydHlWYWx1ZShlLFwidHJhbnNmb3JtXCIscil9fTtTLkhvb2tzLnJlZ2lzdGVyKCksUy5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcigpLGIuaG9vaz1mdW5jdGlvbihlLHQscil7dmFyIG49YTtyZXR1cm4gZT1vKGUpLGYuZWFjaChlLGZ1bmN0aW9uKGUsbyl7aWYoaShvKT09PWEmJmIuaW5pdChvKSxyPT09YSluPT09YSYmKG49Yi5DU1MuZ2V0UHJvcGVydHlWYWx1ZShvLHQpKTtlbHNle3ZhciBzPWIuQ1NTLnNldFByb3BlcnR5VmFsdWUobyx0LHIpO1widHJhbnNmb3JtXCI9PT1zWzBdJiZiLkNTUy5mbHVzaFRyYW5zZm9ybUNhY2hlKG8pLG49c319KSxufTt2YXIgUD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gcz9rLnByb21pc2V8fG51bGw6bH1mdW5jdGlvbiBuKCl7ZnVuY3Rpb24gZShlKXtmdW5jdGlvbiBwKGUsdCl7dmFyIHI9YSxuPWEsaT1hO3JldHVybiBtLmlzQXJyYXkoZSk/KHI9ZVswXSwhbS5pc0FycmF5KGVbMV0pJiYvXltcXGQtXS8udGVzdChlWzFdKXx8bS5pc0Z1bmN0aW9uKGVbMV0pfHxTLlJlZ0V4LmlzSGV4LnRlc3QoZVsxXSk/aT1lWzFdOihtLmlzU3RyaW5nKGVbMV0pJiYhUy5SZWdFeC5pc0hleC50ZXN0KGVbMV0pfHxtLmlzQXJyYXkoZVsxXSkpJiYobj10P2VbMV06dShlWzFdLHMuZHVyYXRpb24pLGVbMl0hPT1hJiYoaT1lWzJdKSkpOnI9ZSx0fHwobj1ufHxzLmVhc2luZyksbS5pc0Z1bmN0aW9uKHIpJiYocj1yLmNhbGwobyxWLHcpKSxtLmlzRnVuY3Rpb24oaSkmJihpPWkuY2FsbChvLFYsdykpLFtyfHwwLG4saV19ZnVuY3Rpb24gZChlLHQpe3ZhciByLGE7cmV0dXJuIGE9KHR8fFwiMFwiKS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvWyVBLXpdKyQvLGZ1bmN0aW9uKGUpe3JldHVybiByPWUsXCJcIn0pLHJ8fChyPVMuVmFsdWVzLmdldFVuaXRUeXBlKGUpKSxbYSxyXX1mdW5jdGlvbiBoKCl7dmFyIGU9e215UGFyZW50Om8ucGFyZW50Tm9kZXx8ci5ib2R5LHBvc2l0aW9uOlMuZ2V0UHJvcGVydHlWYWx1ZShvLFwicG9zaXRpb25cIiksZm9udFNpemU6Uy5nZXRQcm9wZXJ0eVZhbHVlKG8sXCJmb250U2l6ZVwiKX0sYT1lLnBvc2l0aW9uPT09TC5sYXN0UG9zaXRpb24mJmUubXlQYXJlbnQ9PT1MLmxhc3RQYXJlbnQsbj1lLmZvbnRTaXplPT09TC5sYXN0Rm9udFNpemU7TC5sYXN0UGFyZW50PWUubXlQYXJlbnQsTC5sYXN0UG9zaXRpb249ZS5wb3NpdGlvbixMLmxhc3RGb250U2l6ZT1lLmZvbnRTaXplO3ZhciBzPTEwMCxsPXt9O2lmKG4mJmEpbC5lbVRvUHg9TC5sYXN0RW1Ub1B4LGwucGVyY2VudFRvUHhXaWR0aD1MLmxhc3RQZXJjZW50VG9QeFdpZHRoLGwucGVyY2VudFRvUHhIZWlnaHQ9TC5sYXN0UGVyY2VudFRvUHhIZWlnaHQ7ZWxzZXt2YXIgdT1pKG8pLmlzU1ZHP3IuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIixcInJlY3RcIik6ci5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2IuaW5pdCh1KSxlLm15UGFyZW50LmFwcGVuZENoaWxkKHUpLGYuZWFjaChbXCJvdmVyZmxvd1wiLFwib3ZlcmZsb3dYXCIsXCJvdmVyZmxvd1lcIl0sZnVuY3Rpb24oZSx0KXtiLkNTUy5zZXRQcm9wZXJ0eVZhbHVlKHUsdCxcImhpZGRlblwiKX0pLGIuQ1NTLnNldFByb3BlcnR5VmFsdWUodSxcInBvc2l0aW9uXCIsZS5wb3NpdGlvbiksYi5DU1Muc2V0UHJvcGVydHlWYWx1ZSh1LFwiZm9udFNpemVcIixlLmZvbnRTaXplKSxiLkNTUy5zZXRQcm9wZXJ0eVZhbHVlKHUsXCJib3hTaXppbmdcIixcImNvbnRlbnQtYm94XCIpLGYuZWFjaChbXCJtaW5XaWR0aFwiLFwibWF4V2lkdGhcIixcIndpZHRoXCIsXCJtaW5IZWlnaHRcIixcIm1heEhlaWdodFwiLFwiaGVpZ2h0XCJdLGZ1bmN0aW9uKGUsdCl7Yi5DU1Muc2V0UHJvcGVydHlWYWx1ZSh1LHQscytcIiVcIil9KSxiLkNTUy5zZXRQcm9wZXJ0eVZhbHVlKHUsXCJwYWRkaW5nTGVmdFwiLHMrXCJlbVwiKSxsLnBlcmNlbnRUb1B4V2lkdGg9TC5sYXN0UGVyY2VudFRvUHhXaWR0aD0ocGFyc2VGbG9hdChTLmdldFByb3BlcnR5VmFsdWUodSxcIndpZHRoXCIsbnVsbCwhMCkpfHwxKS9zLGwucGVyY2VudFRvUHhIZWlnaHQ9TC5sYXN0UGVyY2VudFRvUHhIZWlnaHQ9KHBhcnNlRmxvYXQoUy5nZXRQcm9wZXJ0eVZhbHVlKHUsXCJoZWlnaHRcIixudWxsLCEwKSl8fDEpL3MsbC5lbVRvUHg9TC5sYXN0RW1Ub1B4PShwYXJzZUZsb2F0KFMuZ2V0UHJvcGVydHlWYWx1ZSh1LFwicGFkZGluZ0xlZnRcIikpfHwxKS9zLGUubXlQYXJlbnQucmVtb3ZlQ2hpbGQodSl9cmV0dXJuIG51bGw9PT1MLnJlbVRvUHgmJihMLnJlbVRvUHg9cGFyc2VGbG9hdChTLmdldFByb3BlcnR5VmFsdWUoci5ib2R5LFwiZm9udFNpemVcIikpfHwxNiksbnVsbD09PUwudndUb1B4JiYoTC52d1RvUHg9cGFyc2VGbG9hdCh0LmlubmVyV2lkdGgpLzEwMCxMLnZoVG9QeD1wYXJzZUZsb2F0KHQuaW5uZXJIZWlnaHQpLzEwMCksbC5yZW1Ub1B4PUwucmVtVG9QeCxsLnZ3VG9QeD1MLnZ3VG9QeCxsLnZoVG9QeD1MLnZoVG9QeCxiLmRlYnVnPj0xJiZjb25zb2xlLmxvZyhcIlVuaXQgcmF0aW9zOiBcIitKU09OLnN0cmluZ2lmeShsKSxvKSxsfWlmKHMuYmVnaW4mJjA9PT1WKXRyeXtzLmJlZ2luLmNhbGwoZyxnKX1jYXRjaCh4KXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dGhyb3cgeH0sMSl9aWYoXCJzY3JvbGxcIj09PUEpe3ZhciBQLEMsVCxGPS9eeCQvaS50ZXN0KHMuYXhpcyk/XCJMZWZ0XCI6XCJUb3BcIixqPXBhcnNlRmxvYXQocy5vZmZzZXQpfHwwO3MuY29udGFpbmVyP20uaXNXcmFwcGVkKHMuY29udGFpbmVyKXx8bS5pc05vZGUocy5jb250YWluZXIpPyhzLmNvbnRhaW5lcj1zLmNvbnRhaW5lclswXXx8cy5jb250YWluZXIsUD1zLmNvbnRhaW5lcltcInNjcm9sbFwiK0ZdLFQ9UCtmKG8pLnBvc2l0aW9uKClbRi50b0xvd2VyQ2FzZSgpXStqKTpzLmNvbnRhaW5lcj1udWxsOihQPWIuU3RhdGUuc2Nyb2xsQW5jaG9yW2IuU3RhdGVbXCJzY3JvbGxQcm9wZXJ0eVwiK0ZdXSxDPWIuU3RhdGUuc2Nyb2xsQW5jaG9yW2IuU3RhdGVbXCJzY3JvbGxQcm9wZXJ0eVwiKyhcIkxlZnRcIj09PUY/XCJUb3BcIjpcIkxlZnRcIildXSxUPWYobykub2Zmc2V0KClbRi50b0xvd2VyQ2FzZSgpXStqKSxsPXtzY3JvbGw6e3Jvb3RQcm9wZXJ0eVZhbHVlOiExLHN0YXJ0VmFsdWU6UCxjdXJyZW50VmFsdWU6UCxlbmRWYWx1ZTpULHVuaXRUeXBlOlwiXCIsZWFzaW5nOnMuZWFzaW5nLHNjcm9sbERhdGE6e2NvbnRhaW5lcjpzLmNvbnRhaW5lcixkaXJlY3Rpb246RixhbHRlcm5hdGVWYWx1ZTpDfX0sZWxlbWVudDpvfSxiLmRlYnVnJiZjb25zb2xlLmxvZyhcInR3ZWVuc0NvbnRhaW5lciAoc2Nyb2xsKTogXCIsbC5zY3JvbGwsbyl9ZWxzZSBpZihcInJldmVyc2VcIj09PUEpe2lmKCFpKG8pLnR3ZWVuc0NvbnRhaW5lcilyZXR1cm4gdm9pZCBmLmRlcXVldWUobyxzLnF1ZXVlKTtcIm5vbmVcIj09PWkobykub3B0cy5kaXNwbGF5JiYoaShvKS5vcHRzLmRpc3BsYXk9XCJhdXRvXCIpLFwiaGlkZGVuXCI9PT1pKG8pLm9wdHMudmlzaWJpbGl0eSYmKGkobykub3B0cy52aXNpYmlsaXR5PVwidmlzaWJsZVwiKSxpKG8pLm9wdHMubG9vcD0hMSxpKG8pLm9wdHMuYmVnaW49bnVsbCxpKG8pLm9wdHMuY29tcGxldGU9bnVsbCx2LmVhc2luZ3x8ZGVsZXRlIHMuZWFzaW5nLHYuZHVyYXRpb258fGRlbGV0ZSBzLmR1cmF0aW9uLHM9Zi5leHRlbmQoe30saShvKS5vcHRzLHMpO3ZhciBFPWYuZXh0ZW5kKCEwLHt9LGkobykudHdlZW5zQ29udGFpbmVyKTtmb3IodmFyIEggaW4gRSlpZihcImVsZW1lbnRcIiE9PUgpe3ZhciBOPUVbSF0uc3RhcnRWYWx1ZTtFW0hdLnN0YXJ0VmFsdWU9RVtIXS5jdXJyZW50VmFsdWU9RVtIXS5lbmRWYWx1ZSxFW0hdLmVuZFZhbHVlPU4sbS5pc0VtcHR5T2JqZWN0KHYpfHwoRVtIXS5lYXNpbmc9cy5lYXNpbmcpLGIuZGVidWcmJmNvbnNvbGUubG9nKFwicmV2ZXJzZSB0d2VlbnNDb250YWluZXIgKFwiK0grXCIpOiBcIitKU09OLnN0cmluZ2lmeShFW0hdKSxvKX1sPUV9ZWxzZSBpZihcInN0YXJ0XCI9PT1BKXt2YXIgRTtpKG8pLnR3ZWVuc0NvbnRhaW5lciYmaShvKS5pc0FuaW1hdGluZz09PSEwJiYoRT1pKG8pLnR3ZWVuc0NvbnRhaW5lciksZi5lYWNoKHksZnVuY3Rpb24oZSx0KXtpZihSZWdFeHAoXCJeXCIrUy5MaXN0cy5jb2xvcnMuam9pbihcIiR8XlwiKStcIiRcIikudGVzdChlKSl7dmFyIHI9cCh0LCEwKSxuPXJbMF0sbz1yWzFdLGk9clsyXTtpZihTLlJlZ0V4LmlzSGV4LnRlc3Qobikpe2Zvcih2YXIgcz1bXCJSZWRcIixcIkdyZWVuXCIsXCJCbHVlXCJdLGw9Uy5WYWx1ZXMuaGV4VG9SZ2IobiksdT1pP1MuVmFsdWVzLmhleFRvUmdiKGkpOmEsYz0wO2M8cy5sZW5ndGg7YysrKXt2YXIgZj1bbFtjXV07byYmZi5wdXNoKG8pLHUhPT1hJiZmLnB1c2godVtjXSkseVtlK3NbY11dPWZ9ZGVsZXRlIHlbZV19fX0pO2Zvcih2YXIgeiBpbiB5KXt2YXIgTz1wKHlbel0pLHE9T1swXSwkPU9bMV0sTT1PWzJdO3o9Uy5OYW1lcy5jYW1lbENhc2Uoeik7dmFyIEk9Uy5Ib29rcy5nZXRSb290KHopLEI9ITE7aWYoaShvKS5pc1NWR3x8XCJ0d2VlblwiPT09SXx8Uy5OYW1lcy5wcmVmaXhDaGVjayhJKVsxXSE9PSExfHxTLk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbSV0hPT1hKXsocy5kaXNwbGF5IT09YSYmbnVsbCE9PXMuZGlzcGxheSYmXCJub25lXCIhPT1zLmRpc3BsYXl8fHMudmlzaWJpbGl0eSE9PWEmJlwiaGlkZGVuXCIhPT1zLnZpc2liaWxpdHkpJiYvb3BhY2l0eXxmaWx0ZXIvLnRlc3QoeikmJiFNJiYwIT09cSYmKE09MCkscy5fY2FjaGVWYWx1ZXMmJkUmJkVbel0/KE09PT1hJiYoTT1FW3pdLmVuZFZhbHVlK0Vbel0udW5pdFR5cGUpLEI9aShvKS5yb290UHJvcGVydHlWYWx1ZUNhY2hlW0ldKTpTLkhvb2tzLnJlZ2lzdGVyZWRbel0/TT09PWE/KEI9Uy5nZXRQcm9wZXJ0eVZhbHVlKG8sSSksTT1TLmdldFByb3BlcnR5VmFsdWUobyx6LEIpKTpCPVMuSG9va3MudGVtcGxhdGVzW0ldWzFdOk09PT1hJiYoTT1TLmdldFByb3BlcnR5VmFsdWUobyx6KSk7dmFyIFcsRyxZLEQ9ITE7aWYoVz1kKHosTSksTT1XWzBdLFk9V1sxXSxXPWQoeixxKSxxPVdbMF0ucmVwbGFjZSgvXihbKy1cXC8qXSk9LyxmdW5jdGlvbihlLHQpe3JldHVybiBEPXQsXCJcIn0pLEc9V1sxXSxNPXBhcnNlRmxvYXQoTSl8fDAscT1wYXJzZUZsb2F0KHEpfHwwLFwiJVwiPT09RyYmKC9eKGZvbnRTaXplfGxpbmVIZWlnaHQpJC8udGVzdCh6KT8ocS89MTAwLEc9XCJlbVwiKTovXnNjYWxlLy50ZXN0KHopPyhxLz0xMDAsRz1cIlwiKTovKFJlZHxHcmVlbnxCbHVlKSQvaS50ZXN0KHopJiYocT1xLzEwMCoyNTUsRz1cIlwiKSksL1tcXC8qXS8udGVzdChEKSlHPVk7ZWxzZSBpZihZIT09RyYmMCE9PU0paWYoMD09PXEpRz1ZO2Vsc2V7bj1ufHxoKCk7dmFyIFE9L21hcmdpbnxwYWRkaW5nfGxlZnR8cmlnaHR8d2lkdGh8dGV4dHx3b3JkfGxldHRlci9pLnRlc3Qoeil8fC9YJC8udGVzdCh6KXx8XCJ4XCI9PT16P1wieFwiOlwieVwiO3N3aXRjaChZKXtjYXNlXCIlXCI6TSo9XCJ4XCI9PT1RP24ucGVyY2VudFRvUHhXaWR0aDpuLnBlcmNlbnRUb1B4SGVpZ2h0O2JyZWFrO2Nhc2VcInB4XCI6YnJlYWs7ZGVmYXVsdDpNKj1uW1krXCJUb1B4XCJdfXN3aXRjaChHKXtjYXNlXCIlXCI6TSo9MS8oXCJ4XCI9PT1RP24ucGVyY2VudFRvUHhXaWR0aDpuLnBlcmNlbnRUb1B4SGVpZ2h0KTticmVhaztjYXNlXCJweFwiOmJyZWFrO2RlZmF1bHQ6TSo9MS9uW0crXCJUb1B4XCJdfX1zd2l0Y2goRCl7Y2FzZVwiK1wiOnE9TStxO2JyZWFrO2Nhc2VcIi1cIjpxPU0tcTticmVhaztjYXNlXCIqXCI6cT1NKnE7YnJlYWs7Y2FzZVwiL1wiOnE9TS9xfWxbel09e3Jvb3RQcm9wZXJ0eVZhbHVlOkIsc3RhcnRWYWx1ZTpNLGN1cnJlbnRWYWx1ZTpNLGVuZFZhbHVlOnEsdW5pdFR5cGU6RyxlYXNpbmc6JH0sYi5kZWJ1ZyYmY29uc29sZS5sb2coXCJ0d2VlbnNDb250YWluZXIgKFwiK3orXCIpOiBcIitKU09OLnN0cmluZ2lmeShsW3pdKSxvKX1lbHNlIGIuZGVidWcmJmNvbnNvbGUubG9nKFwiU2tpcHBpbmcgW1wiK0krXCJdIGR1ZSB0byBhIGxhY2sgb2YgYnJvd3NlciBzdXBwb3J0LlwiKX1sLmVsZW1lbnQ9b31sLmVsZW1lbnQmJihTLlZhbHVlcy5hZGRDbGFzcyhvLFwidmVsb2NpdHktYW5pbWF0aW5nXCIpLFIucHVzaChsKSxcIlwiPT09cy5xdWV1ZSYmKGkobykudHdlZW5zQ29udGFpbmVyPWwsaShvKS5vcHRzPXMpLGkobykuaXNBbmltYXRpbmc9ITAsVj09PXctMT8oYi5TdGF0ZS5jYWxscy5wdXNoKFtSLGcscyxudWxsLGsucmVzb2x2ZXJdKSxiLlN0YXRlLmlzVGlja2luZz09PSExJiYoYi5TdGF0ZS5pc1RpY2tpbmc9ITAsYygpKSk6VisrKX12YXIgbixvPXRoaXMscz1mLmV4dGVuZCh7fSxiLmRlZmF1bHRzLHYpLGw9e307c3dpdGNoKGkobyk9PT1hJiZiLmluaXQobykscGFyc2VGbG9hdChzLmRlbGF5KSYmcy5xdWV1ZSE9PSExJiZmLnF1ZXVlKG8scy5xdWV1ZSxmdW5jdGlvbihlKXtiLnZlbG9jaXR5UXVldWVFbnRyeUZsYWc9ITAsaShvKS5kZWxheVRpbWVyPXtzZXRUaW1lb3V0OnNldFRpbWVvdXQoZSxwYXJzZUZsb2F0KHMuZGVsYXkpKSxuZXh0OmV9fSkscy5kdXJhdGlvbi50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkpe2Nhc2VcImZhc3RcIjpzLmR1cmF0aW9uPTIwMDticmVhaztjYXNlXCJub3JtYWxcIjpzLmR1cmF0aW9uPWg7YnJlYWs7Y2FzZVwic2xvd1wiOnMuZHVyYXRpb249NjAwO2JyZWFrO2RlZmF1bHQ6cy5kdXJhdGlvbj1wYXJzZUZsb2F0KHMuZHVyYXRpb24pfHwxfWIubW9jayE9PSExJiYoYi5tb2NrPT09ITA/cy5kdXJhdGlvbj1zLmRlbGF5PTE6KHMuZHVyYXRpb24qPXBhcnNlRmxvYXQoYi5tb2NrKXx8MSxzLmRlbGF5Kj1wYXJzZUZsb2F0KGIubW9jayl8fDEpKSxzLmVhc2luZz11KHMuZWFzaW5nLHMuZHVyYXRpb24pLHMuYmVnaW4mJiFtLmlzRnVuY3Rpb24ocy5iZWdpbikmJihzLmJlZ2luPW51bGwpLHMucHJvZ3Jlc3MmJiFtLmlzRnVuY3Rpb24ocy5wcm9ncmVzcykmJihzLnByb2dyZXNzPW51bGwpLHMuY29tcGxldGUmJiFtLmlzRnVuY3Rpb24ocy5jb21wbGV0ZSkmJihzLmNvbXBsZXRlPW51bGwpLHMuZGlzcGxheSE9PWEmJm51bGwhPT1zLmRpc3BsYXkmJihzLmRpc3BsYXk9cy5kaXNwbGF5LnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKSxcImF1dG9cIj09PXMuZGlzcGxheSYmKHMuZGlzcGxheT1iLkNTUy5WYWx1ZXMuZ2V0RGlzcGxheVR5cGUobykpKSxzLnZpc2liaWxpdHkhPT1hJiZudWxsIT09cy52aXNpYmlsaXR5JiYocy52aXNpYmlsaXR5PXMudmlzaWJpbGl0eS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkpLHMubW9iaWxlSEE9cy5tb2JpbGVIQSYmYi5TdGF0ZS5pc01vYmlsZSYmIWIuU3RhdGUuaXNHaW5nZXJicmVhZCxzLnF1ZXVlPT09ITE/cy5kZWxheT9zZXRUaW1lb3V0KGUscy5kZWxheSk6ZSgpOmYucXVldWUobyxzLnF1ZXVlLGZ1bmN0aW9uKHQscil7cmV0dXJuIHI9PT0hMD8oay5wcm9taXNlJiZrLnJlc29sdmVyKGcpLCEwKTooYi52ZWxvY2l0eVF1ZXVlRW50cnlGbGFnPSEwLHZvaWQgZSh0KSl9KSxcIlwiIT09cy5xdWV1ZSYmXCJmeFwiIT09cy5xdWV1ZXx8XCJpbnByb2dyZXNzXCI9PT1mLnF1ZXVlKG8pWzBdfHxmLmRlcXVldWUobyl9dmFyIHMsbCxkLGcseSx2LHg9YXJndW1lbnRzWzBdJiYoYXJndW1lbnRzWzBdLnB8fGYuaXNQbGFpbk9iamVjdChhcmd1bWVudHNbMF0ucHJvcGVydGllcykmJiFhcmd1bWVudHNbMF0ucHJvcGVydGllcy5uYW1lc3x8bS5pc1N0cmluZyhhcmd1bWVudHNbMF0ucHJvcGVydGllcykpO2lmKG0uaXNXcmFwcGVkKHRoaXMpPyhzPSExLGQ9MCxnPXRoaXMsbD10aGlzKToocz0hMCxkPTEsZz14P2FyZ3VtZW50c1swXS5lbGVtZW50c3x8YXJndW1lbnRzWzBdLmU6YXJndW1lbnRzWzBdKSxnPW8oZykpe3g/KHk9YXJndW1lbnRzWzBdLnByb3BlcnRpZXN8fGFyZ3VtZW50c1swXS5wLHY9YXJndW1lbnRzWzBdLm9wdGlvbnN8fGFyZ3VtZW50c1swXS5vKTooeT1hcmd1bWVudHNbZF0sdj1hcmd1bWVudHNbZCsxXSk7dmFyIHc9Zy5sZW5ndGgsVj0wO2lmKCEvXihzdG9wfGZpbmlzaCkkL2kudGVzdCh5KSYmIWYuaXNQbGFpbk9iamVjdCh2KSl7dmFyIEM9ZCsxO3Y9e307Zm9yKHZhciBUPUM7VDxhcmd1bWVudHMubGVuZ3RoO1QrKyltLmlzQXJyYXkoYXJndW1lbnRzW1RdKXx8IS9eKGZhc3R8bm9ybWFsfHNsb3cpJC9pLnRlc3QoYXJndW1lbnRzW1RdKSYmIS9eXFxkLy50ZXN0KGFyZ3VtZW50c1tUXSk/bS5pc1N0cmluZyhhcmd1bWVudHNbVF0pfHxtLmlzQXJyYXkoYXJndW1lbnRzW1RdKT92LmVhc2luZz1hcmd1bWVudHNbVF06bS5pc0Z1bmN0aW9uKGFyZ3VtZW50c1tUXSkmJih2LmNvbXBsZXRlPWFyZ3VtZW50c1tUXSk6di5kdXJhdGlvbj1hcmd1bWVudHNbVF19dmFyIGs9e3Byb21pc2U6bnVsbCxyZXNvbHZlcjpudWxsLHJlamVjdGVyOm51bGx9O3MmJmIuUHJvbWlzZSYmKGsucHJvbWlzZT1uZXcgYi5Qcm9taXNlKGZ1bmN0aW9uKGUsdCl7ay5yZXNvbHZlcj1lLGsucmVqZWN0ZXI9dH0pKTt2YXIgQTtzd2l0Y2goeSl7Y2FzZVwic2Nyb2xsXCI6QT1cInNjcm9sbFwiO2JyZWFrO2Nhc2VcInJldmVyc2VcIjpBPVwicmV2ZXJzZVwiO2JyZWFrO2Nhc2VcImZpbmlzaFwiOmNhc2VcInN0b3BcIjpmLmVhY2goZyxmdW5jdGlvbihlLHQpe2kodCkmJmkodCkuZGVsYXlUaW1lciYmKGNsZWFyVGltZW91dChpKHQpLmRlbGF5VGltZXIuc2V0VGltZW91dCksaSh0KS5kZWxheVRpbWVyLm5leHQmJmkodCkuZGVsYXlUaW1lci5uZXh0KCksZGVsZXRlIGkodCkuZGVsYXlUaW1lcil9KTt2YXIgRj1bXTtyZXR1cm4gZi5lYWNoKGIuU3RhdGUuY2FsbHMsZnVuY3Rpb24oZSx0KXt0JiZmLmVhY2godFsxXSxmdW5jdGlvbihyLG4pe3ZhciBvPXY9PT1hP1wiXCI6djtyZXR1cm4gbz09PSEwfHx0WzJdLnF1ZXVlPT09b3x8dj09PWEmJnRbMl0ucXVldWU9PT0hMT92b2lkIGYuZWFjaChnLGZ1bmN0aW9uKHIsYSl7YT09PW4mJigodj09PSEwfHxtLmlzU3RyaW5nKHYpKSYmKGYuZWFjaChmLnF1ZXVlKGEsbS5pc1N0cmluZyh2KT92OlwiXCIpLGZ1bmN0aW9uKGUsdCl7XG5tLmlzRnVuY3Rpb24odCkmJnQobnVsbCwhMCl9KSxmLnF1ZXVlKGEsbS5pc1N0cmluZyh2KT92OlwiXCIsW10pKSxcInN0b3BcIj09PXk/KGkoYSkmJmkoYSkudHdlZW5zQ29udGFpbmVyJiZvIT09ITEmJmYuZWFjaChpKGEpLnR3ZWVuc0NvbnRhaW5lcixmdW5jdGlvbihlLHQpe3QuZW5kVmFsdWU9dC5jdXJyZW50VmFsdWV9KSxGLnB1c2goZSkpOlwiZmluaXNoXCI9PT15JiYodFsyXS5kdXJhdGlvbj0xKSl9KTohMH0pfSksXCJzdG9wXCI9PT15JiYoZi5lYWNoKEYsZnVuY3Rpb24oZSx0KXtwKHQsITApfSksay5wcm9taXNlJiZrLnJlc29sdmVyKGcpKSxlKCk7ZGVmYXVsdDppZighZi5pc1BsYWluT2JqZWN0KHkpfHxtLmlzRW1wdHlPYmplY3QoeSkpe2lmKG0uaXNTdHJpbmcoeSkmJmIuUmVkaXJlY3RzW3ldKXt2YXIgaj1mLmV4dGVuZCh7fSx2KSxFPWouZHVyYXRpb24sSD1qLmRlbGF5fHwwO3JldHVybiBqLmJhY2t3YXJkcz09PSEwJiYoZz1mLmV4dGVuZCghMCxbXSxnKS5yZXZlcnNlKCkpLGYuZWFjaChnLGZ1bmN0aW9uKGUsdCl7cGFyc2VGbG9hdChqLnN0YWdnZXIpP2ouZGVsYXk9SCtwYXJzZUZsb2F0KGouc3RhZ2dlcikqZTptLmlzRnVuY3Rpb24oai5zdGFnZ2VyKSYmKGouZGVsYXk9SCtqLnN0YWdnZXIuY2FsbCh0LGUsdykpLGouZHJhZyYmKGouZHVyYXRpb249cGFyc2VGbG9hdChFKXx8KC9eKGNhbGxvdXR8dHJhbnNpdGlvbikvLnRlc3QoeSk/MWUzOmgpLGouZHVyYXRpb249TWF0aC5tYXgoai5kdXJhdGlvbiooai5iYWNrd2FyZHM/MS1lL3c6KGUrMSkvdyksLjc1KmouZHVyYXRpb24sMjAwKSksYi5SZWRpcmVjdHNbeV0uY2FsbCh0LHQsanx8e30sZSx3LGcsay5wcm9taXNlP2s6YSl9KSxlKCl9dmFyIE49XCJWZWxvY2l0eTogRmlyc3QgYXJndW1lbnQgKFwiK3krXCIpIHdhcyBub3QgYSBwcm9wZXJ0eSBtYXAsIGEga25vd24gYWN0aW9uLCBvciBhIHJlZ2lzdGVyZWQgcmVkaXJlY3QuIEFib3J0aW5nLlwiO3JldHVybiBrLnByb21pc2U/ay5yZWplY3RlcihuZXcgRXJyb3IoTikpOmNvbnNvbGUubG9nKE4pLGUoKX1BPVwic3RhcnRcIn12YXIgTD17bGFzdFBhcmVudDpudWxsLGxhc3RQb3NpdGlvbjpudWxsLGxhc3RGb250U2l6ZTpudWxsLGxhc3RQZXJjZW50VG9QeFdpZHRoOm51bGwsbGFzdFBlcmNlbnRUb1B4SGVpZ2h0Om51bGwsbGFzdEVtVG9QeDpudWxsLHJlbVRvUHg6bnVsbCx2d1RvUHg6bnVsbCx2aFRvUHg6bnVsbH0sUj1bXTtmLmVhY2goZyxmdW5jdGlvbihlLHQpe20uaXNOb2RlKHQpJiZuLmNhbGwodCl9KTt2YXIgeixqPWYuZXh0ZW5kKHt9LGIuZGVmYXVsdHMsdik7aWYoai5sb29wPXBhcnNlSW50KGoubG9vcCksej0yKmoubG9vcC0xLGoubG9vcClmb3IodmFyIE89MDt6Pk87TysrKXt2YXIgcT17ZGVsYXk6ai5kZWxheSxwcm9ncmVzczpqLnByb2dyZXNzfTtPPT09ei0xJiYocS5kaXNwbGF5PWouZGlzcGxheSxxLnZpc2liaWxpdHk9ai52aXNpYmlsaXR5LHEuY29tcGxldGU9ai5jb21wbGV0ZSksUChnLFwicmV2ZXJzZVwiLHEpfXJldHVybiBlKCl9fTtiPWYuZXh0ZW5kKFAsYiksYi5hbmltYXRlPVA7dmFyIHc9dC5yZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fGc7cmV0dXJuIGIuU3RhdGUuaXNNb2JpbGV8fHIuaGlkZGVuPT09YXx8ci5hZGRFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLGZ1bmN0aW9uKCl7ci5oaWRkZW4/KHc9ZnVuY3Rpb24oZSl7cmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtlKCEwKX0sMTYpfSxjKCkpOnc9dC5yZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fGd9KSxlLlZlbG9jaXR5PWIsZSE9PXQmJihlLmZuLnZlbG9jaXR5PVAsZS5mbi52ZWxvY2l0eS5kZWZhdWx0cz1iLmRlZmF1bHRzKSxmLmVhY2goW1wiRG93blwiLFwiVXBcIl0sZnVuY3Rpb24oZSx0KXtiLlJlZGlyZWN0c1tcInNsaWRlXCIrdF09ZnVuY3Rpb24oZSxyLG4sbyxpLHMpe3ZhciBsPWYuZXh0ZW5kKHt9LHIpLHU9bC5iZWdpbixjPWwuY29tcGxldGUscD17aGVpZ2h0OlwiXCIsbWFyZ2luVG9wOlwiXCIsbWFyZ2luQm90dG9tOlwiXCIscGFkZGluZ1RvcDpcIlwiLHBhZGRpbmdCb3R0b206XCJcIn0sZD17fTtsLmRpc3BsYXk9PT1hJiYobC5kaXNwbGF5PVwiRG93blwiPT09dD9cImlubGluZVwiPT09Yi5DU1MuVmFsdWVzLmdldERpc3BsYXlUeXBlKGUpP1wiaW5saW5lLWJsb2NrXCI6XCJibG9ja1wiOlwibm9uZVwiKSxsLmJlZ2luPWZ1bmN0aW9uKCl7dSYmdS5jYWxsKGksaSk7Zm9yKHZhciByIGluIHApe2Rbcl09ZS5zdHlsZVtyXTt2YXIgYT1iLkNTUy5nZXRQcm9wZXJ0eVZhbHVlKGUscik7cFtyXT1cIkRvd25cIj09PXQ/W2EsMF06WzAsYV19ZC5vdmVyZmxvdz1lLnN0eWxlLm92ZXJmbG93LGUuc3R5bGUub3ZlcmZsb3c9XCJoaWRkZW5cIn0sbC5jb21wbGV0ZT1mdW5jdGlvbigpe2Zvcih2YXIgdCBpbiBkKWUuc3R5bGVbdF09ZFt0XTtjJiZjLmNhbGwoaSxpKSxzJiZzLnJlc29sdmVyKGkpfSxiKGUscCxsKX19KSxmLmVhY2goW1wiSW5cIixcIk91dFwiXSxmdW5jdGlvbihlLHQpe2IuUmVkaXJlY3RzW1wiZmFkZVwiK3RdPWZ1bmN0aW9uKGUscixuLG8saSxzKXt2YXIgbD1mLmV4dGVuZCh7fSxyKSx1PXtvcGFjaXR5OlwiSW5cIj09PXQ/MTowfSxjPWwuY29tcGxldGU7bC5jb21wbGV0ZT1uIT09by0xP2wuYmVnaW49bnVsbDpmdW5jdGlvbigpe2MmJmMuY2FsbChpLGkpLHMmJnMucmVzb2x2ZXIoaSl9LGwuZGlzcGxheT09PWEmJihsLmRpc3BsYXk9XCJJblwiPT09dD9cImF1dG9cIjpcIm5vbmVcIiksYih0aGlzLHUsbCl9fSksYn0od2luZG93LmpRdWVyeXx8d2luZG93LlplcHRvfHx3aW5kb3csd2luZG93LGRvY3VtZW50KX0pKTtcbjshZnVuY3Rpb24oYSxiLGMsZCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gayhhLGIsYyl7cmV0dXJuIHNldFRpbWVvdXQocShhLGMpLGIpfWZ1bmN0aW9uIGwoYSxiLGMpe3JldHVybiBBcnJheS5pc0FycmF5KGEpPyhtKGEsY1tiXSxjKSwhMCk6ITF9ZnVuY3Rpb24gbShhLGIsYyl7dmFyIGU7aWYoYSlpZihhLmZvckVhY2gpYS5mb3JFYWNoKGIsYyk7ZWxzZSBpZihhLmxlbmd0aCE9PWQpZm9yKGU9MDtlPGEubGVuZ3RoOyliLmNhbGwoYyxhW2VdLGUsYSksZSsrO2Vsc2UgZm9yKGUgaW4gYSlhLmhhc093blByb3BlcnR5KGUpJiZiLmNhbGwoYyxhW2VdLGUsYSl9ZnVuY3Rpb24gbihhLGIsYyl7Zm9yKHZhciBlPU9iamVjdC5rZXlzKGIpLGY9MDtmPGUubGVuZ3RoOykoIWN8fGMmJmFbZVtmXV09PT1kKSYmKGFbZVtmXV09YltlW2ZdXSksZisrO3JldHVybiBhfWZ1bmN0aW9uIG8oYSxiKXtyZXR1cm4gbihhLGIsITApfWZ1bmN0aW9uIHAoYSxiLGMpe3ZhciBlLGQ9Yi5wcm90b3R5cGU7ZT1hLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGQpLGUuY29uc3RydWN0b3I9YSxlLl9zdXBlcj1kLGMmJm4oZSxjKX1mdW5jdGlvbiBxKGEsYil7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGEuYXBwbHkoYixhcmd1bWVudHMpfX1mdW5jdGlvbiByKGEsYil7cmV0dXJuIHR5cGVvZiBhPT1nP2EuYXBwbHkoYj9iWzBdfHxkOmQsYik6YX1mdW5jdGlvbiBzKGEsYil7cmV0dXJuIGE9PT1kP2I6YX1mdW5jdGlvbiB0KGEsYixjKXttKHgoYiksZnVuY3Rpb24oYil7YS5hZGRFdmVudExpc3RlbmVyKGIsYywhMSl9KX1mdW5jdGlvbiB1KGEsYixjKXttKHgoYiksZnVuY3Rpb24oYil7YS5yZW1vdmVFdmVudExpc3RlbmVyKGIsYywhMSl9KX1mdW5jdGlvbiB2KGEsYil7Zm9yKDthOyl7aWYoYT09YilyZXR1cm4hMDthPWEucGFyZW50Tm9kZX1yZXR1cm4hMX1mdW5jdGlvbiB3KGEsYil7cmV0dXJuIGEuaW5kZXhPZihiKT4tMX1mdW5jdGlvbiB4KGEpe3JldHVybiBhLnRyaW0oKS5zcGxpdCgvXFxzKy9nKX1mdW5jdGlvbiB5KGEsYixjKXtpZihhLmluZGV4T2YmJiFjKXJldHVybiBhLmluZGV4T2YoYik7Zm9yKHZhciBkPTA7ZDxhLmxlbmd0aDspe2lmKGMmJmFbZF1bY109PWJ8fCFjJiZhW2RdPT09YilyZXR1cm4gZDtkKyt9cmV0dXJuLTF9ZnVuY3Rpb24geihhKXtyZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYSwwKX1mdW5jdGlvbiBBKGEsYixjKXtmb3IodmFyIGQ9W10sZT1bXSxmPTA7ZjxhLmxlbmd0aDspe3ZhciBnPWI/YVtmXVtiXTphW2ZdO3koZSxnKTwwJiZkLnB1c2goYVtmXSksZVtmXT1nLGYrK31yZXR1cm4gYyYmKGQ9Yj9kLnNvcnQoZnVuY3Rpb24oYSxjKXtyZXR1cm4gYVtiXT5jW2JdfSk6ZC5zb3J0KCkpLGR9ZnVuY3Rpb24gQihhLGIpe2Zvcih2YXIgYyxmLGc9YlswXS50b1VwcGVyQ2FzZSgpK2Iuc2xpY2UoMSksaD0wO2g8ZS5sZW5ndGg7KXtpZihjPWVbaF0sZj1jP2MrZzpiLGYgaW4gYSlyZXR1cm4gZjtoKyt9cmV0dXJuIGR9ZnVuY3Rpb24gRCgpe3JldHVybiBDKyt9ZnVuY3Rpb24gRShhKXt2YXIgYj1hLm93bmVyRG9jdW1lbnQ7cmV0dXJuIGIuZGVmYXVsdFZpZXd8fGIucGFyZW50V2luZG93fWZ1bmN0aW9uIGFiKGEsYil7dmFyIGM9dGhpczt0aGlzLm1hbmFnZXI9YSx0aGlzLmNhbGxiYWNrPWIsdGhpcy5lbGVtZW50PWEuZWxlbWVudCx0aGlzLnRhcmdldD1hLm9wdGlvbnMuaW5wdXRUYXJnZXQsdGhpcy5kb21IYW5kbGVyPWZ1bmN0aW9uKGIpe3IoYS5vcHRpb25zLmVuYWJsZSxbYV0pJiZjLmhhbmRsZXIoYil9LHRoaXMuaW5pdCgpfWZ1bmN0aW9uIGJiKGEpe3ZhciBiLGM9YS5vcHRpb25zLmlucHV0Q2xhc3M7cmV0dXJuIGI9Yz9jOkg/d2I6ST9FYjpHP0diOnJiLG5ldyBiKGEsY2IpfWZ1bmN0aW9uIGNiKGEsYixjKXt2YXIgZD1jLnBvaW50ZXJzLmxlbmd0aCxlPWMuY2hhbmdlZFBvaW50ZXJzLmxlbmd0aCxmPWImTyYmMD09PWQtZSxnPWImKFF8UikmJjA9PT1kLWU7Yy5pc0ZpcnN0PSEhZixjLmlzRmluYWw9ISFnLGYmJihhLnNlc3Npb249e30pLGMuZXZlbnRUeXBlPWIsZGIoYSxjKSxhLmVtaXQoXCJoYW1tZXIuaW5wdXRcIixjKSxhLnJlY29nbml6ZShjKSxhLnNlc3Npb24ucHJldklucHV0PWN9ZnVuY3Rpb24gZGIoYSxiKXt2YXIgYz1hLnNlc3Npb24sZD1iLnBvaW50ZXJzLGU9ZC5sZW5ndGg7Yy5maXJzdElucHV0fHwoYy5maXJzdElucHV0PWdiKGIpKSxlPjEmJiFjLmZpcnN0TXVsdGlwbGU/Yy5maXJzdE11bHRpcGxlPWdiKGIpOjE9PT1lJiYoYy5maXJzdE11bHRpcGxlPSExKTt2YXIgZj1jLmZpcnN0SW5wdXQsZz1jLmZpcnN0TXVsdGlwbGUsaD1nP2cuY2VudGVyOmYuY2VudGVyLGk9Yi5jZW50ZXI9aGIoZCk7Yi50aW1lU3RhbXA9aigpLGIuZGVsdGFUaW1lPWIudGltZVN0YW1wLWYudGltZVN0YW1wLGIuYW5nbGU9bGIoaCxpKSxiLmRpc3RhbmNlPWtiKGgsaSksZWIoYyxiKSxiLm9mZnNldERpcmVjdGlvbj1qYihiLmRlbHRhWCxiLmRlbHRhWSksYi5zY2FsZT1nP25iKGcucG9pbnRlcnMsZCk6MSxiLnJvdGF0aW9uPWc/bWIoZy5wb2ludGVycyxkKTowLGZiKGMsYik7dmFyIGs9YS5lbGVtZW50O3YoYi5zcmNFdmVudC50YXJnZXQsaykmJihrPWIuc3JjRXZlbnQudGFyZ2V0KSxiLnRhcmdldD1rfWZ1bmN0aW9uIGViKGEsYil7dmFyIGM9Yi5jZW50ZXIsZD1hLm9mZnNldERlbHRhfHx7fSxlPWEucHJldkRlbHRhfHx7fSxmPWEucHJldklucHV0fHx7fTsoYi5ldmVudFR5cGU9PT1PfHxmLmV2ZW50VHlwZT09PVEpJiYoZT1hLnByZXZEZWx0YT17eDpmLmRlbHRhWHx8MCx5OmYuZGVsdGFZfHwwfSxkPWEub2Zmc2V0RGVsdGE9e3g6Yy54LHk6Yy55fSksYi5kZWx0YVg9ZS54KyhjLngtZC54KSxiLmRlbHRhWT1lLnkrKGMueS1kLnkpfWZ1bmN0aW9uIGZiKGEsYil7dmFyIGYsZyxoLGosYz1hLmxhc3RJbnRlcnZhbHx8YixlPWIudGltZVN0YW1wLWMudGltZVN0YW1wO2lmKGIuZXZlbnRUeXBlIT1SJiYoZT5OfHxjLnZlbG9jaXR5PT09ZCkpe3ZhciBrPWMuZGVsdGFYLWIuZGVsdGFYLGw9Yy5kZWx0YVktYi5kZWx0YVksbT1pYihlLGssbCk7Zz1tLngsaD1tLnksZj1pKG0ueCk+aShtLnkpP20ueDptLnksaj1qYihrLGwpLGEubGFzdEludGVydmFsPWJ9ZWxzZSBmPWMudmVsb2NpdHksZz1jLnZlbG9jaXR5WCxoPWMudmVsb2NpdHlZLGo9Yy5kaXJlY3Rpb247Yi52ZWxvY2l0eT1mLGIudmVsb2NpdHlYPWcsYi52ZWxvY2l0eVk9aCxiLmRpcmVjdGlvbj1qfWZ1bmN0aW9uIGdiKGEpe2Zvcih2YXIgYj1bXSxjPTA7YzxhLnBvaW50ZXJzLmxlbmd0aDspYltjXT17Y2xpZW50WDpoKGEucG9pbnRlcnNbY10uY2xpZW50WCksY2xpZW50WTpoKGEucG9pbnRlcnNbY10uY2xpZW50WSl9LGMrKztyZXR1cm57dGltZVN0YW1wOmooKSxwb2ludGVyczpiLGNlbnRlcjpoYihiKSxkZWx0YVg6YS5kZWx0YVgsZGVsdGFZOmEuZGVsdGFZfX1mdW5jdGlvbiBoYihhKXt2YXIgYj1hLmxlbmd0aDtpZigxPT09YilyZXR1cm57eDpoKGFbMF0uY2xpZW50WCkseTpoKGFbMF0uY2xpZW50WSl9O2Zvcih2YXIgYz0wLGQ9MCxlPTA7Yj5lOyljKz1hW2VdLmNsaWVudFgsZCs9YVtlXS5jbGllbnRZLGUrKztyZXR1cm57eDpoKGMvYikseTpoKGQvYil9fWZ1bmN0aW9uIGliKGEsYixjKXtyZXR1cm57eDpiL2F8fDAseTpjL2F8fDB9fWZ1bmN0aW9uIGpiKGEsYil7cmV0dXJuIGE9PT1iP1M6aShhKT49aShiKT9hPjA/VDpVOmI+MD9WOld9ZnVuY3Rpb24ga2IoYSxiLGMpe2N8fChjPSQpO3ZhciBkPWJbY1swXV0tYVtjWzBdXSxlPWJbY1sxXV0tYVtjWzFdXTtyZXR1cm4gTWF0aC5zcXJ0KGQqZCtlKmUpfWZ1bmN0aW9uIGxiKGEsYixjKXtjfHwoYz0kKTt2YXIgZD1iW2NbMF1dLWFbY1swXV0sZT1iW2NbMV1dLWFbY1sxXV07cmV0dXJuIDE4MCpNYXRoLmF0YW4yKGUsZCkvTWF0aC5QSX1mdW5jdGlvbiBtYihhLGIpe3JldHVybiBsYihiWzFdLGJbMF0sXyktbGIoYVsxXSxhWzBdLF8pfWZ1bmN0aW9uIG5iKGEsYil7cmV0dXJuIGtiKGJbMF0sYlsxXSxfKS9rYihhWzBdLGFbMV0sXyl9ZnVuY3Rpb24gcmIoKXt0aGlzLmV2RWw9cGIsdGhpcy5ldldpbj1xYix0aGlzLmFsbG93PSEwLHRoaXMucHJlc3NlZD0hMSxhYi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9ZnVuY3Rpb24gd2IoKXt0aGlzLmV2RWw9dWIsdGhpcy5ldldpbj12YixhYi5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5zdG9yZT10aGlzLm1hbmFnZXIuc2Vzc2lvbi5wb2ludGVyRXZlbnRzPVtdfWZ1bmN0aW9uIEFiKCl7dGhpcy5ldlRhcmdldD15Yix0aGlzLmV2V2luPXpiLHRoaXMuc3RhcnRlZD0hMSxhYi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9ZnVuY3Rpb24gQmIoYSxiKXt2YXIgYz16KGEudG91Y2hlcyksZD16KGEuY2hhbmdlZFRvdWNoZXMpO3JldHVybiBiJihRfFIpJiYoYz1BKGMuY29uY2F0KGQpLFwiaWRlbnRpZmllclwiLCEwKSksW2MsZF19ZnVuY3Rpb24gRWIoKXt0aGlzLmV2VGFyZ2V0PURiLHRoaXMudGFyZ2V0SWRzPXt9LGFiLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1mdW5jdGlvbiBGYihhLGIpe3ZhciBjPXooYS50b3VjaGVzKSxkPXRoaXMudGFyZ2V0SWRzO2lmKGImKE98UCkmJjE9PT1jLmxlbmd0aClyZXR1cm4gZFtjWzBdLmlkZW50aWZpZXJdPSEwLFtjLGNdO3ZhciBlLGYsZz16KGEuY2hhbmdlZFRvdWNoZXMpLGg9W10saT10aGlzLnRhcmdldDtpZihmPWMuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiB2KGEudGFyZ2V0LGkpfSksYj09PU8pZm9yKGU9MDtlPGYubGVuZ3RoOylkW2ZbZV0uaWRlbnRpZmllcl09ITAsZSsrO2ZvcihlPTA7ZTxnLmxlbmd0aDspZFtnW2VdLmlkZW50aWZpZXJdJiZoLnB1c2goZ1tlXSksYiYoUXxSKSYmZGVsZXRlIGRbZ1tlXS5pZGVudGlmaWVyXSxlKys7cmV0dXJuIGgubGVuZ3RoP1tBKGYuY29uY2F0KGgpLFwiaWRlbnRpZmllclwiLCEwKSxoXTp2b2lkIDB9ZnVuY3Rpb24gR2IoKXthYi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIGE9cSh0aGlzLmhhbmRsZXIsdGhpcyk7dGhpcy50b3VjaD1uZXcgRWIodGhpcy5tYW5hZ2VyLGEpLHRoaXMubW91c2U9bmV3IHJiKHRoaXMubWFuYWdlcixhKX1mdW5jdGlvbiBQYihhLGIpe3RoaXMubWFuYWdlcj1hLHRoaXMuc2V0KGIpfWZ1bmN0aW9uIFFiKGEpe2lmKHcoYSxNYikpcmV0dXJuIE1iO3ZhciBiPXcoYSxOYiksYz13KGEsT2IpO3JldHVybiBiJiZjP05iK1wiIFwiK09iOmJ8fGM/Yj9OYjpPYjp3KGEsTGIpP0xiOktifWZ1bmN0aW9uIFliKGEpe3RoaXMuaWQ9RCgpLHRoaXMubWFuYWdlcj1udWxsLHRoaXMub3B0aW9ucz1vKGF8fHt9LHRoaXMuZGVmYXVsdHMpLHRoaXMub3B0aW9ucy5lbmFibGU9cyh0aGlzLm9wdGlvbnMuZW5hYmxlLCEwKSx0aGlzLnN0YXRlPVJiLHRoaXMuc2ltdWx0YW5lb3VzPXt9LHRoaXMucmVxdWlyZUZhaWw9W119ZnVuY3Rpb24gWmIoYSl7cmV0dXJuIGEmV2I/XCJjYW5jZWxcIjphJlViP1wiZW5kXCI6YSZUYj9cIm1vdmVcIjphJlNiP1wic3RhcnRcIjpcIlwifWZ1bmN0aW9uICRiKGEpe3JldHVybiBhPT1XP1wiZG93blwiOmE9PVY/XCJ1cFwiOmE9PVQ/XCJsZWZ0XCI6YT09VT9cInJpZ2h0XCI6XCJcIn1mdW5jdGlvbiBfYihhLGIpe3ZhciBjPWIubWFuYWdlcjtyZXR1cm4gYz9jLmdldChhKTphfWZ1bmN0aW9uIGFjKCl7WWIuYXBwbHkodGhpcyxhcmd1bWVudHMpfWZ1bmN0aW9uIGJjKCl7YWMuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMucFg9bnVsbCx0aGlzLnBZPW51bGx9ZnVuY3Rpb24gY2MoKXthYy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9ZnVuY3Rpb24gZGMoKXtZYi5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5fdGltZXI9bnVsbCx0aGlzLl9pbnB1dD1udWxsfWZ1bmN0aW9uIGVjKCl7YWMuYXBwbHkodGhpcyxhcmd1bWVudHMpfWZ1bmN0aW9uIGZjKCl7YWMuYXBwbHkodGhpcyxhcmd1bWVudHMpfWZ1bmN0aW9uIGdjKCl7WWIuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMucFRpbWU9ITEsdGhpcy5wQ2VudGVyPSExLHRoaXMuX3RpbWVyPW51bGwsdGhpcy5faW5wdXQ9bnVsbCx0aGlzLmNvdW50PTB9ZnVuY3Rpb24gaGMoYSxiKXtyZXR1cm4gYj1ifHx7fSxiLnJlY29nbml6ZXJzPXMoYi5yZWNvZ25pemVycyxoYy5kZWZhdWx0cy5wcmVzZXQpLG5ldyBrYyhhLGIpfWZ1bmN0aW9uIGtjKGEsYil7Yj1ifHx7fSx0aGlzLm9wdGlvbnM9byhiLGhjLmRlZmF1bHRzKSx0aGlzLm9wdGlvbnMuaW5wdXRUYXJnZXQ9dGhpcy5vcHRpb25zLmlucHV0VGFyZ2V0fHxhLHRoaXMuaGFuZGxlcnM9e30sdGhpcy5zZXNzaW9uPXt9LHRoaXMucmVjb2duaXplcnM9W10sdGhpcy5lbGVtZW50PWEsdGhpcy5pbnB1dD1iYih0aGlzKSx0aGlzLnRvdWNoQWN0aW9uPW5ldyBQYih0aGlzLHRoaXMub3B0aW9ucy50b3VjaEFjdGlvbiksbGModGhpcywhMCksbShiLnJlY29nbml6ZXJzLGZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuYWRkKG5ldyBhWzBdKGFbMV0pKTthWzJdJiZiLnJlY29nbml6ZVdpdGgoYVsyXSksYVszXSYmYi5yZXF1aXJlRmFpbHVyZShhWzNdKX0sdGhpcyl9ZnVuY3Rpb24gbGMoYSxiKXt2YXIgYz1hLmVsZW1lbnQ7bShhLm9wdGlvbnMuY3NzUHJvcHMsZnVuY3Rpb24oYSxkKXtjLnN0eWxlW0IoYy5zdHlsZSxkKV09Yj9hOlwiXCJ9KX1mdW5jdGlvbiBtYyhhLGMpe3ZhciBkPWIuY3JlYXRlRXZlbnQoXCJFdmVudFwiKTtkLmluaXRFdmVudChhLCEwLCEwKSxkLmdlc3R1cmU9YyxjLnRhcmdldC5kaXNwYXRjaEV2ZW50KGQpfXZhciBlPVtcIlwiLFwid2Via2l0XCIsXCJtb3pcIixcIk1TXCIsXCJtc1wiLFwib1wiXSxmPWIuY3JlYXRlRWxlbWVudChcImRpdlwiKSxnPVwiZnVuY3Rpb25cIixoPU1hdGgucm91bmQsaT1NYXRoLmFicyxqPURhdGUubm93LEM9MSxGPS9tb2JpbGV8dGFibGV0fGlwKGFkfGhvbmV8b2QpfGFuZHJvaWQvaSxHPVwib250b3VjaHN0YXJ0XCJpbiBhLEg9QihhLFwiUG9pbnRlckV2ZW50XCIpIT09ZCxJPUcmJkYudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxKPVwidG91Y2hcIixLPVwicGVuXCIsTD1cIm1vdXNlXCIsTT1cImtpbmVjdFwiLE49MjUsTz0xLFA9MixRPTQsUj04LFM9MSxUPTIsVT00LFY9OCxXPTE2LFg9VHxVLFk9VnxXLFo9WHxZLCQ9W1wieFwiLFwieVwiXSxfPVtcImNsaWVudFhcIixcImNsaWVudFlcIl07YWIucHJvdG90eXBlPXtoYW5kbGVyOmZ1bmN0aW9uKCl7fSxpbml0OmZ1bmN0aW9uKCl7dGhpcy5ldkVsJiZ0KHRoaXMuZWxlbWVudCx0aGlzLmV2RWwsdGhpcy5kb21IYW5kbGVyKSx0aGlzLmV2VGFyZ2V0JiZ0KHRoaXMudGFyZ2V0LHRoaXMuZXZUYXJnZXQsdGhpcy5kb21IYW5kbGVyKSx0aGlzLmV2V2luJiZ0KEUodGhpcy5lbGVtZW50KSx0aGlzLmV2V2luLHRoaXMuZG9tSGFuZGxlcil9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmV2RWwmJnUodGhpcy5lbGVtZW50LHRoaXMuZXZFbCx0aGlzLmRvbUhhbmRsZXIpLHRoaXMuZXZUYXJnZXQmJnUodGhpcy50YXJnZXQsdGhpcy5ldlRhcmdldCx0aGlzLmRvbUhhbmRsZXIpLHRoaXMuZXZXaW4mJnUoRSh0aGlzLmVsZW1lbnQpLHRoaXMuZXZXaW4sdGhpcy5kb21IYW5kbGVyKX19O3ZhciBvYj17bW91c2Vkb3duOk8sbW91c2Vtb3ZlOlAsbW91c2V1cDpRfSxwYj1cIm1vdXNlZG93blwiLHFiPVwibW91c2Vtb3ZlIG1vdXNldXBcIjtwKHJiLGFiLHtoYW5kbGVyOmZ1bmN0aW9uKGEpe3ZhciBiPW9iW2EudHlwZV07YiZPJiYwPT09YS5idXR0b24mJih0aGlzLnByZXNzZWQ9ITApLGImUCYmMSE9PWEud2hpY2gmJihiPVEpLHRoaXMucHJlc3NlZCYmdGhpcy5hbGxvdyYmKGImUSYmKHRoaXMucHJlc3NlZD0hMSksdGhpcy5jYWxsYmFjayh0aGlzLm1hbmFnZXIsYix7cG9pbnRlcnM6W2FdLGNoYW5nZWRQb2ludGVyczpbYV0scG9pbnRlclR5cGU6TCxzcmNFdmVudDphfSkpfX0pO3ZhciBzYj17cG9pbnRlcmRvd246Tyxwb2ludGVybW92ZTpQLHBvaW50ZXJ1cDpRLHBvaW50ZXJjYW5jZWw6Uixwb2ludGVyb3V0OlJ9LHRiPXsyOkosMzpLLDQ6TCw1Ok19LHViPVwicG9pbnRlcmRvd25cIix2Yj1cInBvaW50ZXJtb3ZlIHBvaW50ZXJ1cCBwb2ludGVyY2FuY2VsXCI7YS5NU1BvaW50ZXJFdmVudCYmKHViPVwiTVNQb2ludGVyRG93blwiLHZiPVwiTVNQb2ludGVyTW92ZSBNU1BvaW50ZXJVcCBNU1BvaW50ZXJDYW5jZWxcIikscCh3YixhYix7aGFuZGxlcjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnN0b3JlLGM9ITEsZD1hLnR5cGUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKFwibXNcIixcIlwiKSxlPXNiW2RdLGY9dGJbYS5wb2ludGVyVHlwZV18fGEucG9pbnRlclR5cGUsZz1mPT1KLGg9eShiLGEucG9pbnRlcklkLFwicG9pbnRlcklkXCIpO2UmTyYmKDA9PT1hLmJ1dHRvbnx8Zyk/MD5oJiYoYi5wdXNoKGEpLGg9Yi5sZW5ndGgtMSk6ZSYoUXxSKSYmKGM9ITApLDA+aHx8KGJbaF09YSx0aGlzLmNhbGxiYWNrKHRoaXMubWFuYWdlcixlLHtwb2ludGVyczpiLGNoYW5nZWRQb2ludGVyczpbYV0scG9pbnRlclR5cGU6ZixzcmNFdmVudDphfSksYyYmYi5zcGxpY2UoaCwxKSl9fSk7dmFyIHhiPXt0b3VjaHN0YXJ0Ok8sdG91Y2htb3ZlOlAsdG91Y2hlbmQ6USx0b3VjaGNhbmNlbDpSfSx5Yj1cInRvdWNoc3RhcnRcIix6Yj1cInRvdWNoc3RhcnQgdG91Y2htb3ZlIHRvdWNoZW5kIHRvdWNoY2FuY2VsXCI7cChBYixhYix7aGFuZGxlcjpmdW5jdGlvbihhKXt2YXIgYj14YlthLnR5cGVdO2lmKGI9PT1PJiYodGhpcy5zdGFydGVkPSEwKSx0aGlzLnN0YXJ0ZWQpe3ZhciBjPUJiLmNhbGwodGhpcyxhLGIpO2ImKFF8UikmJjA9PT1jWzBdLmxlbmd0aC1jWzFdLmxlbmd0aCYmKHRoaXMuc3RhcnRlZD0hMSksdGhpcy5jYWxsYmFjayh0aGlzLm1hbmFnZXIsYix7cG9pbnRlcnM6Y1swXSxjaGFuZ2VkUG9pbnRlcnM6Y1sxXSxwb2ludGVyVHlwZTpKLHNyY0V2ZW50OmF9KX19fSk7dmFyIENiPXt0b3VjaHN0YXJ0Ok8sdG91Y2htb3ZlOlAsdG91Y2hlbmQ6USx0b3VjaGNhbmNlbDpSfSxEYj1cInRvdWNoc3RhcnQgdG91Y2htb3ZlIHRvdWNoZW5kIHRvdWNoY2FuY2VsXCI7cChFYixhYix7aGFuZGxlcjpmdW5jdGlvbihhKXt2YXIgYj1DYlthLnR5cGVdLGM9RmIuY2FsbCh0aGlzLGEsYik7YyYmdGhpcy5jYWxsYmFjayh0aGlzLm1hbmFnZXIsYix7cG9pbnRlcnM6Y1swXSxjaGFuZ2VkUG9pbnRlcnM6Y1sxXSxwb2ludGVyVHlwZTpKLHNyY0V2ZW50OmF9KX19KSxwKEdiLGFiLHtoYW5kbGVyOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1jLnBvaW50ZXJUeXBlPT1KLGU9Yy5wb2ludGVyVHlwZT09TDtpZihkKXRoaXMubW91c2UuYWxsb3c9ITE7ZWxzZSBpZihlJiYhdGhpcy5tb3VzZS5hbGxvdylyZXR1cm47YiYoUXxSKSYmKHRoaXMubW91c2UuYWxsb3c9ITApLHRoaXMuY2FsbGJhY2soYSxiLGMpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy50b3VjaC5kZXN0cm95KCksdGhpcy5tb3VzZS5kZXN0cm95KCl9fSk7dmFyIEhiPUIoZi5zdHlsZSxcInRvdWNoQWN0aW9uXCIpLEliPUhiIT09ZCxKYj1cImNvbXB1dGVcIixLYj1cImF1dG9cIixMYj1cIm1hbmlwdWxhdGlvblwiLE1iPVwibm9uZVwiLE5iPVwicGFuLXhcIixPYj1cInBhbi15XCI7UGIucHJvdG90eXBlPXtzZXQ6ZnVuY3Rpb24oYSl7YT09SmImJihhPXRoaXMuY29tcHV0ZSgpKSxJYiYmKHRoaXMubWFuYWdlci5lbGVtZW50LnN0eWxlW0hiXT1hKSx0aGlzLmFjdGlvbnM9YS50b0xvd2VyQ2FzZSgpLnRyaW0oKX0sdXBkYXRlOmZ1bmN0aW9uKCl7dGhpcy5zZXQodGhpcy5tYW5hZ2VyLm9wdGlvbnMudG91Y2hBY3Rpb24pfSxjb21wdXRlOmZ1bmN0aW9uKCl7dmFyIGE9W107cmV0dXJuIG0odGhpcy5tYW5hZ2VyLnJlY29nbml6ZXJzLGZ1bmN0aW9uKGIpe3IoYi5vcHRpb25zLmVuYWJsZSxbYl0pJiYoYT1hLmNvbmNhdChiLmdldFRvdWNoQWN0aW9uKCkpKX0pLFFiKGEuam9pbihcIiBcIikpfSxwcmV2ZW50RGVmYXVsdHM6ZnVuY3Rpb24oYSl7aWYoIUliKXt2YXIgYj1hLnNyY0V2ZW50LGM9YS5vZmZzZXREaXJlY3Rpb247aWYodGhpcy5tYW5hZ2VyLnNlc3Npb24ucHJldmVudGVkKXJldHVybiBiLnByZXZlbnREZWZhdWx0KCksdm9pZCAwO3ZhciBkPXRoaXMuYWN0aW9ucyxlPXcoZCxNYiksZj13KGQsT2IpLGc9dyhkLE5iKTtyZXR1cm4gZXx8ZiYmYyZYfHxnJiZjJlk/dGhpcy5wcmV2ZW50U3JjKGIpOnZvaWQgMH19LHByZXZlbnRTcmM6ZnVuY3Rpb24oYSl7dGhpcy5tYW5hZ2VyLnNlc3Npb24ucHJldmVudGVkPSEwLGEucHJldmVudERlZmF1bHQoKX19O3ZhciBSYj0xLFNiPTIsVGI9NCxVYj04LFZiPVViLFdiPTE2LFhiPTMyO1liLnByb3RvdHlwZT17ZGVmYXVsdHM6e30sc2V0OmZ1bmN0aW9uKGEpe3JldHVybiBuKHRoaXMub3B0aW9ucyxhKSx0aGlzLm1hbmFnZXImJnRoaXMubWFuYWdlci50b3VjaEFjdGlvbi51cGRhdGUoKSx0aGlzfSxyZWNvZ25pemVXaXRoOmZ1bmN0aW9uKGEpe2lmKGwoYSxcInJlY29nbml6ZVdpdGhcIix0aGlzKSlyZXR1cm4gdGhpczt2YXIgYj10aGlzLnNpbXVsdGFuZW91cztyZXR1cm4gYT1fYihhLHRoaXMpLGJbYS5pZF18fChiW2EuaWRdPWEsYS5yZWNvZ25pemVXaXRoKHRoaXMpKSx0aGlzfSxkcm9wUmVjb2duaXplV2l0aDpmdW5jdGlvbihhKXtyZXR1cm4gbChhLFwiZHJvcFJlY29nbml6ZVdpdGhcIix0aGlzKT90aGlzOihhPV9iKGEsdGhpcyksZGVsZXRlIHRoaXMuc2ltdWx0YW5lb3VzW2EuaWRdLHRoaXMpfSxyZXF1aXJlRmFpbHVyZTpmdW5jdGlvbihhKXtpZihsKGEsXCJyZXF1aXJlRmFpbHVyZVwiLHRoaXMpKXJldHVybiB0aGlzO3ZhciBiPXRoaXMucmVxdWlyZUZhaWw7cmV0dXJuIGE9X2IoYSx0aGlzKSwtMT09PXkoYixhKSYmKGIucHVzaChhKSxhLnJlcXVpcmVGYWlsdXJlKHRoaXMpKSx0aGlzfSxkcm9wUmVxdWlyZUZhaWx1cmU6ZnVuY3Rpb24oYSl7aWYobChhLFwiZHJvcFJlcXVpcmVGYWlsdXJlXCIsdGhpcykpcmV0dXJuIHRoaXM7YT1fYihhLHRoaXMpO3ZhciBiPXkodGhpcy5yZXF1aXJlRmFpbCxhKTtyZXR1cm4gYj4tMSYmdGhpcy5yZXF1aXJlRmFpbC5zcGxpY2UoYiwxKSx0aGlzfSxoYXNSZXF1aXJlRmFpbHVyZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZXF1aXJlRmFpbC5sZW5ndGg+MH0sY2FuUmVjb2duaXplV2l0aDpmdW5jdGlvbihhKXtyZXR1cm4hIXRoaXMuc2ltdWx0YW5lb3VzW2EuaWRdfSxlbWl0OmZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGQoZCl7Yi5tYW5hZ2VyLmVtaXQoYi5vcHRpb25zLmV2ZW50KyhkP1piKGMpOlwiXCIpLGEpfXZhciBiPXRoaXMsYz10aGlzLnN0YXRlO1ViPmMmJmQoITApLGQoKSxjPj1VYiYmZCghMCl9LHRyeUVtaXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY2FuRW1pdCgpP3RoaXMuZW1pdChhKToodGhpcy5zdGF0ZT1YYix2b2lkIDApfSxjYW5FbWl0OmZ1bmN0aW9uKCl7Zm9yKHZhciBhPTA7YTx0aGlzLnJlcXVpcmVGYWlsLmxlbmd0aDspe2lmKCEodGhpcy5yZXF1aXJlRmFpbFthXS5zdGF0ZSYoWGJ8UmIpKSlyZXR1cm4hMTthKyt9cmV0dXJuITB9LHJlY29nbml6ZTpmdW5jdGlvbihhKXt2YXIgYj1uKHt9LGEpO3JldHVybiByKHRoaXMub3B0aW9ucy5lbmFibGUsW3RoaXMsYl0pPyh0aGlzLnN0YXRlJihWYnxXYnxYYikmJih0aGlzLnN0YXRlPVJiKSx0aGlzLnN0YXRlPXRoaXMucHJvY2VzcyhiKSx0aGlzLnN0YXRlJihTYnxUYnxVYnxXYikmJnRoaXMudHJ5RW1pdChiKSx2b2lkIDApOih0aGlzLnJlc2V0KCksdGhpcy5zdGF0ZT1YYix2b2lkIDApfSxwcm9jZXNzOmZ1bmN0aW9uKCl7fSxnZXRUb3VjaEFjdGlvbjpmdW5jdGlvbigpe30scmVzZXQ6ZnVuY3Rpb24oKXt9fSxwKGFjLFliLHtkZWZhdWx0czp7cG9pbnRlcnM6MX0sYXR0clRlc3Q6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5vcHRpb25zLnBvaW50ZXJzO3JldHVybiAwPT09Ynx8YS5wb2ludGVycy5sZW5ndGg9PT1ifSxwcm9jZXNzOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuc3RhdGUsYz1hLmV2ZW50VHlwZSxkPWImKFNifFRiKSxlPXRoaXMuYXR0clRlc3QoYSk7cmV0dXJuIGQmJihjJlJ8fCFlKT9ifFdiOmR8fGU/YyZRP2J8VWI6YiZTYj9ifFRiOlNiOlhifX0pLHAoYmMsYWMse2RlZmF1bHRzOntldmVudDpcInBhblwiLHRocmVzaG9sZDoxMCxwb2ludGVyczoxLGRpcmVjdGlvbjpafSxnZXRUb3VjaEFjdGlvbjpmdW5jdGlvbigpe3ZhciBhPXRoaXMub3B0aW9ucy5kaXJlY3Rpb24sYj1bXTtyZXR1cm4gYSZYJiZiLnB1c2goT2IpLGEmWSYmYi5wdXNoKE5iKSxifSxkaXJlY3Rpb25UZXN0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMub3B0aW9ucyxjPSEwLGQ9YS5kaXN0YW5jZSxlPWEuZGlyZWN0aW9uLGY9YS5kZWx0YVgsZz1hLmRlbHRhWTtyZXR1cm4gZSZiLmRpcmVjdGlvbnx8KGIuZGlyZWN0aW9uJlg/KGU9MD09PWY/UzowPmY/VDpVLGM9ZiE9dGhpcy5wWCxkPU1hdGguYWJzKGEuZGVsdGFYKSk6KGU9MD09PWc/UzowPmc/VjpXLGM9ZyE9dGhpcy5wWSxkPU1hdGguYWJzKGEuZGVsdGFZKSkpLGEuZGlyZWN0aW9uPWUsYyYmZD5iLnRocmVzaG9sZCYmZSZiLmRpcmVjdGlvbn0sYXR0clRlc3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIGFjLnByb3RvdHlwZS5hdHRyVGVzdC5jYWxsKHRoaXMsYSkmJih0aGlzLnN0YXRlJlNifHwhKHRoaXMuc3RhdGUmU2IpJiZ0aGlzLmRpcmVjdGlvblRlc3QoYSkpfSxlbWl0OmZ1bmN0aW9uKGEpe3RoaXMucFg9YS5kZWx0YVgsdGhpcy5wWT1hLmRlbHRhWTt2YXIgYj0kYihhLmRpcmVjdGlvbik7YiYmdGhpcy5tYW5hZ2VyLmVtaXQodGhpcy5vcHRpb25zLmV2ZW50K2IsYSksdGhpcy5fc3VwZXIuZW1pdC5jYWxsKHRoaXMsYSl9fSkscChjYyxhYyx7ZGVmYXVsdHM6e2V2ZW50OlwicGluY2hcIix0aHJlc2hvbGQ6MCxwb2ludGVyczoyfSxnZXRUb3VjaEFjdGlvbjpmdW5jdGlvbigpe3JldHVybltNYl19LGF0dHJUZXN0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLl9zdXBlci5hdHRyVGVzdC5jYWxsKHRoaXMsYSkmJihNYXRoLmFicyhhLnNjYWxlLTEpPnRoaXMub3B0aW9ucy50aHJlc2hvbGR8fHRoaXMuc3RhdGUmU2IpfSxlbWl0OmZ1bmN0aW9uKGEpe2lmKHRoaXMuX3N1cGVyLmVtaXQuY2FsbCh0aGlzLGEpLDEhPT1hLnNjYWxlKXt2YXIgYj1hLnNjYWxlPDE/XCJpblwiOlwib3V0XCI7dGhpcy5tYW5hZ2VyLmVtaXQodGhpcy5vcHRpb25zLmV2ZW50K2IsYSl9fX0pLHAoZGMsWWIse2RlZmF1bHRzOntldmVudDpcInByZXNzXCIscG9pbnRlcnM6MSx0aW1lOjUwMCx0aHJlc2hvbGQ6NX0sZ2V0VG91Y2hBY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm5bS2JdfSxwcm9jZXNzOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMub3B0aW9ucyxjPWEucG9pbnRlcnMubGVuZ3RoPT09Yi5wb2ludGVycyxkPWEuZGlzdGFuY2U8Yi50aHJlc2hvbGQsZT1hLmRlbHRhVGltZT5iLnRpbWU7aWYodGhpcy5faW5wdXQ9YSwhZHx8IWN8fGEuZXZlbnRUeXBlJihRfFIpJiYhZSl0aGlzLnJlc2V0KCk7ZWxzZSBpZihhLmV2ZW50VHlwZSZPKXRoaXMucmVzZXQoKSx0aGlzLl90aW1lcj1rKGZ1bmN0aW9uKCl7dGhpcy5zdGF0ZT1WYix0aGlzLnRyeUVtaXQoKX0sYi50aW1lLHRoaXMpO2Vsc2UgaWYoYS5ldmVudFR5cGUmUSlyZXR1cm4gVmI7cmV0dXJuIFhifSxyZXNldDpmdW5jdGlvbigpe2NsZWFyVGltZW91dCh0aGlzLl90aW1lcil9LGVtaXQ6ZnVuY3Rpb24oYSl7dGhpcy5zdGF0ZT09PVZiJiYoYSYmYS5ldmVudFR5cGUmUT90aGlzLm1hbmFnZXIuZW1pdCh0aGlzLm9wdGlvbnMuZXZlbnQrXCJ1cFwiLGEpOih0aGlzLl9pbnB1dC50aW1lU3RhbXA9aigpLHRoaXMubWFuYWdlci5lbWl0KHRoaXMub3B0aW9ucy5ldmVudCx0aGlzLl9pbnB1dCkpKX19KSxwKGVjLGFjLHtkZWZhdWx0czp7ZXZlbnQ6XCJyb3RhdGVcIix0aHJlc2hvbGQ6MCxwb2ludGVyczoyfSxnZXRUb3VjaEFjdGlvbjpmdW5jdGlvbigpe3JldHVybltNYl19LGF0dHJUZXN0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLl9zdXBlci5hdHRyVGVzdC5jYWxsKHRoaXMsYSkmJihNYXRoLmFicyhhLnJvdGF0aW9uKT50aGlzLm9wdGlvbnMudGhyZXNob2xkfHx0aGlzLnN0YXRlJlNiKX19KSxwKGZjLGFjLHtkZWZhdWx0czp7ZXZlbnQ6XCJzd2lwZVwiLHRocmVzaG9sZDoxMCx2ZWxvY2l0eTouNjUsZGlyZWN0aW9uOlh8WSxwb2ludGVyczoxfSxnZXRUb3VjaEFjdGlvbjpmdW5jdGlvbigpe3JldHVybiBiYy5wcm90b3R5cGUuZ2V0VG91Y2hBY3Rpb24uY2FsbCh0aGlzKX0sYXR0clRlc3Q6ZnVuY3Rpb24oYSl7dmFyIGMsYj10aGlzLm9wdGlvbnMuZGlyZWN0aW9uO3JldHVybiBiJihYfFkpP2M9YS52ZWxvY2l0eTpiJlg/Yz1hLnZlbG9jaXR5WDpiJlkmJihjPWEudmVsb2NpdHlZKSx0aGlzLl9zdXBlci5hdHRyVGVzdC5jYWxsKHRoaXMsYSkmJmImYS5kaXJlY3Rpb24mJmEuZGlzdGFuY2U+dGhpcy5vcHRpb25zLnRocmVzaG9sZCYmaShjKT50aGlzLm9wdGlvbnMudmVsb2NpdHkmJmEuZXZlbnRUeXBlJlF9LGVtaXQ6ZnVuY3Rpb24oYSl7dmFyIGI9JGIoYS5kaXJlY3Rpb24pO2ImJnRoaXMubWFuYWdlci5lbWl0KHRoaXMub3B0aW9ucy5ldmVudCtiLGEpLHRoaXMubWFuYWdlci5lbWl0KHRoaXMub3B0aW9ucy5ldmVudCxhKX19KSxwKGdjLFliLHtkZWZhdWx0czp7ZXZlbnQ6XCJ0YXBcIixwb2ludGVyczoxLHRhcHM6MSxpbnRlcnZhbDozMDAsdGltZToyNTAsdGhyZXNob2xkOjIscG9zVGhyZXNob2xkOjEwfSxnZXRUb3VjaEFjdGlvbjpmdW5jdGlvbigpe3JldHVybltMYl19LHByb2Nlc3M6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5vcHRpb25zLGM9YS5wb2ludGVycy5sZW5ndGg9PT1iLnBvaW50ZXJzLGQ9YS5kaXN0YW5jZTxiLnRocmVzaG9sZCxlPWEuZGVsdGFUaW1lPGIudGltZTtpZih0aGlzLnJlc2V0KCksYS5ldmVudFR5cGUmTyYmMD09PXRoaXMuY291bnQpcmV0dXJuIHRoaXMuZmFpbFRpbWVvdXQoKTtpZihkJiZlJiZjKXtpZihhLmV2ZW50VHlwZSE9USlyZXR1cm4gdGhpcy5mYWlsVGltZW91dCgpO3ZhciBmPXRoaXMucFRpbWU/YS50aW1lU3RhbXAtdGhpcy5wVGltZTxiLmludGVydmFsOiEwLGc9IXRoaXMucENlbnRlcnx8a2IodGhpcy5wQ2VudGVyLGEuY2VudGVyKTxiLnBvc1RocmVzaG9sZDt0aGlzLnBUaW1lPWEudGltZVN0YW1wLHRoaXMucENlbnRlcj1hLmNlbnRlcixnJiZmP3RoaXMuY291bnQrPTE6dGhpcy5jb3VudD0xLHRoaXMuX2lucHV0PWE7dmFyIGg9dGhpcy5jb3VudCViLnRhcHM7aWYoMD09PWgpcmV0dXJuIHRoaXMuaGFzUmVxdWlyZUZhaWx1cmVzKCk/KHRoaXMuX3RpbWVyPWsoZnVuY3Rpb24oKXt0aGlzLnN0YXRlPVZiLHRoaXMudHJ5RW1pdCgpfSxiLmludGVydmFsLHRoaXMpLFNiKTpWYn1yZXR1cm4gWGJ9LGZhaWxUaW1lb3V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RpbWVyPWsoZnVuY3Rpb24oKXt0aGlzLnN0YXRlPVhifSx0aGlzLm9wdGlvbnMuaW50ZXJ2YWwsdGhpcyksWGJ9LHJlc2V0OmZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVyKX0sZW1pdDpmdW5jdGlvbigpe3RoaXMuc3RhdGU9PVZiJiYodGhpcy5faW5wdXQudGFwQ291bnQ9dGhpcy5jb3VudCx0aGlzLm1hbmFnZXIuZW1pdCh0aGlzLm9wdGlvbnMuZXZlbnQsdGhpcy5faW5wdXQpKX19KSxoYy5WRVJTSU9OPVwiMi4wLjRcIixoYy5kZWZhdWx0cz17ZG9tRXZlbnRzOiExLHRvdWNoQWN0aW9uOkpiLGVuYWJsZTohMCxpbnB1dFRhcmdldDpudWxsLGlucHV0Q2xhc3M6bnVsbCxwcmVzZXQ6W1tlYyx7ZW5hYmxlOiExfV0sW2NjLHtlbmFibGU6ITF9LFtcInJvdGF0ZVwiXV0sW2ZjLHtkaXJlY3Rpb246WH1dLFtiYyx7ZGlyZWN0aW9uOlh9LFtcInN3aXBlXCJdXSxbZ2NdLFtnYyx7ZXZlbnQ6XCJkb3VibGV0YXBcIix0YXBzOjJ9LFtcInRhcFwiXV0sW2RjXV0sY3NzUHJvcHM6e3VzZXJTZWxlY3Q6XCJkZWZhdWx0XCIsdG91Y2hTZWxlY3Q6XCJub25lXCIsdG91Y2hDYWxsb3V0Olwibm9uZVwiLGNvbnRlbnRab29taW5nOlwibm9uZVwiLHVzZXJEcmFnOlwibm9uZVwiLHRhcEhpZ2hsaWdodENvbG9yOlwicmdiYSgwLDAsMCwwKVwifX07dmFyIGljPTEsamM9MjtrYy5wcm90b3R5cGU9e3NldDpmdW5jdGlvbihhKXtyZXR1cm4gbih0aGlzLm9wdGlvbnMsYSksYS50b3VjaEFjdGlvbiYmdGhpcy50b3VjaEFjdGlvbi51cGRhdGUoKSxhLmlucHV0VGFyZ2V0JiYodGhpcy5pbnB1dC5kZXN0cm95KCksdGhpcy5pbnB1dC50YXJnZXQ9YS5pbnB1dFRhcmdldCx0aGlzLmlucHV0LmluaXQoKSksdGhpc30sc3RvcDpmdW5jdGlvbihhKXt0aGlzLnNlc3Npb24uc3RvcHBlZD1hP2pjOmljfSxyZWNvZ25pemU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5zZXNzaW9uO2lmKCFiLnN0b3BwZWQpe3RoaXMudG91Y2hBY3Rpb24ucHJldmVudERlZmF1bHRzKGEpO3ZhciBjLGQ9dGhpcy5yZWNvZ25pemVycyxlPWIuY3VyUmVjb2duaXplcjsoIWV8fGUmJmUuc3RhdGUmVmIpJiYoZT1iLmN1clJlY29nbml6ZXI9bnVsbCk7Zm9yKHZhciBmPTA7ZjxkLmxlbmd0aDspYz1kW2ZdLGIuc3RvcHBlZD09PWpjfHxlJiZjIT1lJiYhYy5jYW5SZWNvZ25pemVXaXRoKGUpP2MucmVzZXQoKTpjLnJlY29nbml6ZShhKSwhZSYmYy5zdGF0ZSYoU2J8VGJ8VWIpJiYoZT1iLmN1clJlY29nbml6ZXI9YyksZisrfX0sZ2V0OmZ1bmN0aW9uKGEpe2lmKGEgaW5zdGFuY2VvZiBZYilyZXR1cm4gYTtmb3IodmFyIGI9dGhpcy5yZWNvZ25pemVycyxjPTA7YzxiLmxlbmd0aDtjKyspaWYoYltjXS5vcHRpb25zLmV2ZW50PT1hKXJldHVybiBiW2NdO3JldHVybiBudWxsfSxhZGQ6ZnVuY3Rpb24oYSl7aWYobChhLFwiYWRkXCIsdGhpcykpcmV0dXJuIHRoaXM7dmFyIGI9dGhpcy5nZXQoYS5vcHRpb25zLmV2ZW50KTtyZXR1cm4gYiYmdGhpcy5yZW1vdmUoYiksdGhpcy5yZWNvZ25pemVycy5wdXNoKGEpLGEubWFuYWdlcj10aGlzLHRoaXMudG91Y2hBY3Rpb24udXBkYXRlKCksYX0scmVtb3ZlOmZ1bmN0aW9uKGEpe2lmKGwoYSxcInJlbW92ZVwiLHRoaXMpKXJldHVybiB0aGlzO3ZhciBiPXRoaXMucmVjb2duaXplcnM7cmV0dXJuIGE9dGhpcy5nZXQoYSksYi5zcGxpY2UoeShiLGEpLDEpLHRoaXMudG91Y2hBY3Rpb24udXBkYXRlKCksdGhpc30sb246ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmhhbmRsZXJzO3JldHVybiBtKHgoYSksZnVuY3Rpb24oYSl7Y1thXT1jW2FdfHxbXSxjW2FdLnB1c2goYil9KSx0aGlzfSxvZmY6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmhhbmRsZXJzO3JldHVybiBtKHgoYSksZnVuY3Rpb24oYSl7Yj9jW2FdLnNwbGljZSh5KGNbYV0sYiksMSk6ZGVsZXRlIGNbYV19KSx0aGlzfSxlbWl0OmZ1bmN0aW9uKGEsYil7dGhpcy5vcHRpb25zLmRvbUV2ZW50cyYmbWMoYSxiKTt2YXIgYz10aGlzLmhhbmRsZXJzW2FdJiZ0aGlzLmhhbmRsZXJzW2FdLnNsaWNlKCk7aWYoYyYmYy5sZW5ndGgpe2IudHlwZT1hLGIucHJldmVudERlZmF1bHQ9ZnVuY3Rpb24oKXtiLnNyY0V2ZW50LnByZXZlbnREZWZhdWx0KCl9O2Zvcih2YXIgZD0wO2Q8Yy5sZW5ndGg7KWNbZF0oYiksZCsrfX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuZWxlbWVudCYmbGModGhpcywhMSksdGhpcy5oYW5kbGVycz17fSx0aGlzLnNlc3Npb249e30sdGhpcy5pbnB1dC5kZXN0cm95KCksdGhpcy5lbGVtZW50PW51bGx9fSxuKGhjLHtJTlBVVF9TVEFSVDpPLElOUFVUX01PVkU6UCxJTlBVVF9FTkQ6USxJTlBVVF9DQU5DRUw6UixTVEFURV9QT1NTSUJMRTpSYixTVEFURV9CRUdBTjpTYixTVEFURV9DSEFOR0VEOlRiLFNUQVRFX0VOREVEOlViLFNUQVRFX1JFQ09HTklaRUQ6VmIsU1RBVEVfQ0FOQ0VMTEVEOldiLFNUQVRFX0ZBSUxFRDpYYixESVJFQ1RJT05fTk9ORTpTLERJUkVDVElPTl9MRUZUOlQsRElSRUNUSU9OX1JJR0hUOlUsRElSRUNUSU9OX1VQOlYsRElSRUNUSU9OX0RPV046VyxESVJFQ1RJT05fSE9SSVpPTlRBTDpYLERJUkVDVElPTl9WRVJUSUNBTDpZLERJUkVDVElPTl9BTEw6WixNYW5hZ2VyOmtjLElucHV0OmFiLFRvdWNoQWN0aW9uOlBiLFRvdWNoSW5wdXQ6RWIsTW91c2VJbnB1dDpyYixQb2ludGVyRXZlbnRJbnB1dDp3YixUb3VjaE1vdXNlSW5wdXQ6R2IsU2luZ2xlVG91Y2hJbnB1dDpBYixSZWNvZ25pemVyOlliLEF0dHJSZWNvZ25pemVyOmFjLFRhcDpnYyxQYW46YmMsU3dpcGU6ZmMsUGluY2g6Y2MsUm90YXRlOmVjLFByZXNzOmRjLG9uOnQsb2ZmOnUsZWFjaDptLG1lcmdlOm8sZXh0ZW5kOm4saW5oZXJpdDpwLGJpbmRGbjpxLHByZWZpeGVkOkJ9KSx0eXBlb2YgZGVmaW5lPT1nJiZkZWZpbmUuYW1kP2RlZmluZShmdW5jdGlvbigpe3JldHVybiBoY30pOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGUmJm1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPWhjOmFbY109aGN9KHdpbmRvdyxkb2N1bWVudCxcIkhhbW1lclwiKTs7KGZ1bmN0aW9uKGZhY3RvcnkpIHtcbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAgIGRlZmluZShbJ2pxdWVyeScsICdoYW1tZXJqcyddLCBmYWN0b3J5KTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jykge1xuICAgICAgICBmYWN0b3J5KHJlcXVpcmUoJ2pxdWVyeScpLCByZXF1aXJlKCdoYW1tZXJqcycpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBmYWN0b3J5KGpRdWVyeSwgSGFtbWVyKTtcbiAgICB9XG59KGZ1bmN0aW9uKCQsIEhhbW1lcikge1xuICAgIGZ1bmN0aW9uIGhhbW1lcmlmeShlbCwgb3B0aW9ucykge1xuICAgICAgICB2YXIgJGVsID0gJChlbCk7XG4gICAgICAgIGlmKCEkZWwuZGF0YShcImhhbW1lclwiKSkge1xuICAgICAgICAgICAgJGVsLmRhdGEoXCJoYW1tZXJcIiwgbmV3IEhhbW1lcigkZWxbMF0sIG9wdGlvbnMpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgICQuZm4uaGFtbWVyID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaGFtbWVyaWZ5KHRoaXMsIG9wdGlvbnMpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgLy8gZXh0ZW5kIHRoZSBlbWl0IG1ldGhvZCB0byBhbHNvIHRyaWdnZXIgalF1ZXJ5IGV2ZW50c1xuICAgIEhhbW1lci5NYW5hZ2VyLnByb3RvdHlwZS5lbWl0ID0gKGZ1bmN0aW9uKG9yaWdpbmFsRW1pdCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odHlwZSwgZGF0YSkge1xuICAgICAgICAgICAgb3JpZ2luYWxFbWl0LmNhbGwodGhpcywgdHlwZSwgZGF0YSk7XG4gICAgICAgICAgICAkKHRoaXMuZWxlbWVudCkudHJpZ2dlcih7XG4gICAgICAgICAgICAgICAgdHlwZTogdHlwZSxcbiAgICAgICAgICAgICAgICBnZXN0dXJlOiBkYXRhXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICB9KShIYW1tZXIuTWFuYWdlci5wcm90b3R5cGUuZW1pdCk7XG59KSk7XG47Ly8gUmVxdWlyZWQgZm9yIE1ldGVvciBwYWNrYWdlLCB0aGUgdXNlIG9mIHdpbmRvdyBwcmV2ZW50cyBleHBvcnQgYnkgTWV0ZW9yXG4oZnVuY3Rpb24od2luZG93KXtcbiAgaWYod2luZG93LlBhY2thZ2Upe1xuICAgIE1hdGVyaWFsaXplID0ge307XG4gIH0gZWxzZSB7XG4gICAgd2luZG93Lk1hdGVyaWFsaXplID0ge307XG4gIH1cbn0pKHdpbmRvdyk7XG5cblxuLypcbiAqIHJhZi5qc1xuICogaHR0cHM6Ly9naXRodWIuY29tL25ncnltYW4vcmFmLmpzXG4gKlxuICogb3JpZ2luYWwgcmVxdWVzdEFuaW1hdGlvbkZyYW1lIHBvbHlmaWxsIGJ5IEVyaWsgTcO2bGxlclxuICogaW5zcGlyZWQgZnJvbSBwYXVsX2lyaXNoIGdpc3QgYW5kIHBvc3RcbiAqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMgbmdyeW1hblxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuICovXG4oZnVuY3Rpb24od2luZG93KSB7XG4gIHZhciBsYXN0VGltZSA9IDAsXG4gICAgdmVuZG9ycyA9IFsnd2Via2l0JywgJ21veiddLFxuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUsXG4gICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUgPSB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUsXG4gICAgaSA9IHZlbmRvcnMubGVuZ3RoO1xuXG4gIC8vIHRyeSB0byB1bi1wcmVmaXggZXhpc3RpbmcgcmFmXG4gIHdoaWxlICgtLWkgPj0gMCAmJiAhcmVxdWVzdEFuaW1hdGlvbkZyYW1lKSB7XG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gd2luZG93W3ZlbmRvcnNbaV0gKyAnUmVxdWVzdEFuaW1hdGlvbkZyYW1lJ107XG4gICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUgPSB3aW5kb3dbdmVuZG9yc1tpXSArICdDYW5jZWxSZXF1ZXN0QW5pbWF0aW9uRnJhbWUnXTtcbiAgfVxuXG4gIC8vIHBvbHlmaWxsIHdpdGggc2V0VGltZW91dCBmYWxsYmFja1xuICAvLyBoZWF2aWx5IGluc3BpcmVkIGZyb20gQGRhcml1cyBnaXN0IG1vZDogaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vcGF1bGlyaXNoLzE1Nzk2NzEjY29tbWVudC04Mzc5NDVcbiAgaWYgKCFyZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgIWNhbmNlbEFuaW1hdGlvbkZyYW1lKSB7XG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgIHZhciBub3cgPSArRGF0ZS5ub3coKSxcbiAgICAgICAgbmV4dFRpbWUgPSBNYXRoLm1heChsYXN0VGltZSArIDE2LCBub3cpO1xuICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIGNhbGxiYWNrKGxhc3RUaW1lID0gbmV4dFRpbWUpO1xuICAgICAgfSwgbmV4dFRpbWUgLSBub3cpO1xuICAgIH07XG5cbiAgICBjYW5jZWxBbmltYXRpb25GcmFtZSA9IGNsZWFyVGltZW91dDtcbiAgfVxuXG4gIC8vIGV4cG9ydCB0byB3aW5kb3dcbiAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSA9IHJlcXVlc3RBbmltYXRpb25GcmFtZTtcbiAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lID0gY2FuY2VsQW5pbWF0aW9uRnJhbWU7XG59KHdpbmRvdykpO1xuXG5cbi8vIFVuaXF1ZSBJRFxuTWF0ZXJpYWxpemUuZ3VpZCA9IChmdW5jdGlvbigpIHtcbiAgZnVuY3Rpb24gczQoKSB7XG4gICAgcmV0dXJuIE1hdGguZmxvb3IoKDEgKyBNYXRoLnJhbmRvbSgpKSAqIDB4MTAwMDApXG4gICAgICAudG9TdHJpbmcoMTYpXG4gICAgICAuc3Vic3RyaW5nKDEpO1xuICB9XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gczQoKSArIHM0KCkgKyAnLScgKyBzNCgpICsgJy0nICsgczQoKSArICctJyArXG4gICAgICAgICAgIHM0KCkgKyAnLScgKyBzNCgpICsgczQoKSArIHM0KCk7XG4gIH07XG59KSgpO1xuXG4vKipcbiAqIEVzY2FwZXMgaGFzaCBmcm9tIHNwZWNpYWwgY2hhcmFjdGVyc1xuICogQHBhcmFtIHtzdHJpbmd9IGhhc2ggIFN0cmluZyByZXR1cm5lZCBmcm9tIHRoaXMuaGFzaFxuICogQHJldHVybnMge3N0cmluZ31cbiAqL1xuTWF0ZXJpYWxpemUuZXNjYXBlSGFzaCA9IGZ1bmN0aW9uKGhhc2gpIHtcbiAgcmV0dXJuIGhhc2gucmVwbGFjZSggLyg6fFxcLnxcXFt8XFxdfCx8PSkvZywgXCJcXFxcJDFcIiApO1xufTtcblxuTWF0ZXJpYWxpemUuZWxlbWVudE9yUGFyZW50SXNGaXhlZCA9IGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICB2YXIgJGVsZW1lbnQgPSAkKGVsZW1lbnQpO1xuICAgIHZhciAkY2hlY2tFbGVtZW50cyA9ICRlbGVtZW50LmFkZCgkZWxlbWVudC5wYXJlbnRzKCkpO1xuICAgIHZhciBpc0ZpeGVkID0gZmFsc2U7XG4gICAgJGNoZWNrRWxlbWVudHMuZWFjaChmdW5jdGlvbigpe1xuICAgICAgICBpZiAoJCh0aGlzKS5jc3MoXCJwb3NpdGlvblwiKSA9PT0gXCJmaXhlZFwiKSB7XG4gICAgICAgICAgICBpc0ZpeGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBpc0ZpeGVkO1xufTtcblxuLy8gVmVsb2NpdHkgaGFzIGNvbmZsaWN0cyB3aGVuIGxvYWRlZCB3aXRoIGpRdWVyeSwgdGhpcyB3aWxsIGNoZWNrIGZvciBpdFxuLy8gRmlyc3QsIGNoZWNrIGlmIGluIG5vQ29uZmxpY3QgbW9kZVxudmFyIFZlbDtcbmlmIChqUXVlcnkpIHtcbiAgVmVsID0galF1ZXJ5LlZlbG9jaXR5O1xufSBlbHNlIGlmICgkKSB7XG4gIFZlbCA9ICQuVmVsb2NpdHk7XG59IGVsc2Uge1xuICBWZWwgPSBWZWxvY2l0eTtcbn1cbjsoZnVuY3Rpb24gKCQpIHtcbiAgJC5mbi5jb2xsYXBzaWJsZSA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICB2YXIgZGVmYXVsdHMgPSB7XG4gICAgICBhY2NvcmRpb246IHVuZGVmaW5lZCxcbiAgICAgIG9uT3BlbjogdW5kZWZpbmVkLFxuICAgICAgb25DbG9zZTogdW5kZWZpbmVkXG4gICAgfTtcblxuICAgIG9wdGlvbnMgPSAkLmV4dGVuZChkZWZhdWx0cywgb3B0aW9ucyk7XG5cblxuICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG5cbiAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XG5cbiAgICAgIHZhciAkcGFuZWxfaGVhZGVycyA9ICQodGhpcykuZmluZCgnPiBsaSA+IC5jb2xsYXBzaWJsZS1oZWFkZXInKTtcblxuICAgICAgdmFyIGNvbGxhcHNpYmxlX3R5cGUgPSAkdGhpcy5kYXRhKFwiY29sbGFwc2libGVcIik7XG5cbiAgICAgIC8vIFR1cm4gb2ZmIGFueSBleGlzdGluZyBldmVudCBoYW5kbGVyc1xuICAgICAgJHRoaXMub2ZmKCdjbGljay5jb2xsYXBzZScsICc+IGxpID4gLmNvbGxhcHNpYmxlLWhlYWRlcicpO1xuICAgICAgJHBhbmVsX2hlYWRlcnMub2ZmKCdjbGljay5jb2xsYXBzZScpO1xuXG5cbiAgICAgIC8qKioqKioqKioqKioqKioqXG4gICAgICBIZWxwZXIgRnVuY3Rpb25zXG4gICAgICAqKioqKioqKioqKioqKioqL1xuXG4gICAgICAvLyBBY2NvcmRpb24gT3BlblxuICAgICAgZnVuY3Rpb24gYWNjb3JkaW9uT3BlbihvYmplY3QpIHtcbiAgICAgICAgJHBhbmVsX2hlYWRlcnMgPSAkdGhpcy5maW5kKCc+IGxpID4gLmNvbGxhcHNpYmxlLWhlYWRlcicpO1xuICAgICAgICBpZiAob2JqZWN0Lmhhc0NsYXNzKCdhY3RpdmUnKSkge1xuICAgICAgICAgIG9iamVjdC5wYXJlbnQoKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgb2JqZWN0LnBhcmVudCgpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob2JqZWN0LnBhcmVudCgpLmhhc0NsYXNzKCdhY3RpdmUnKSl7XG4gICAgICAgICAgb2JqZWN0LnNpYmxpbmdzKCcuY29sbGFwc2libGUtYm9keScpLnN0b3AodHJ1ZSxmYWxzZSkuc2xpZGVEb3duKHsgZHVyYXRpb246IDM1MCwgZWFzaW5nOiBcImVhc2VPdXRRdWFydFwiLCBxdWV1ZTogZmFsc2UsIGNvbXBsZXRlOiBmdW5jdGlvbigpIHskKHRoaXMpLmNzcygnaGVpZ2h0JywgJycpO319KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNle1xuICAgICAgICAgIG9iamVjdC5zaWJsaW5ncygnLmNvbGxhcHNpYmxlLWJvZHknKS5zdG9wKHRydWUsZmFsc2UpLnNsaWRlVXAoeyBkdXJhdGlvbjogMzUwLCBlYXNpbmc6IFwiZWFzZU91dFF1YXJ0XCIsIHF1ZXVlOiBmYWxzZSwgY29tcGxldGU6IGZ1bmN0aW9uKCkgeyQodGhpcykuY3NzKCdoZWlnaHQnLCAnJyk7fX0pO1xuICAgICAgICB9XG5cbiAgICAgICAgJHBhbmVsX2hlYWRlcnMubm90KG9iamVjdCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpLnBhcmVudCgpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcblxuICAgICAgICAvLyBDbG9zZSBwcmV2aW91c2x5IG9wZW4gYWNjb3JkaW9uIGVsZW1lbnRzLlxuICAgICAgICAkcGFuZWxfaGVhZGVycy5ub3Qob2JqZWN0KS5wYXJlbnQoKS5jaGlsZHJlbignLmNvbGxhcHNpYmxlLWJvZHknKS5zdG9wKHRydWUsZmFsc2UpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaWYgKCQodGhpcykuaXMoJzp2aXNpYmxlJykpIHtcbiAgICAgICAgICAgICQodGhpcykuc2xpZGVVcCh7XG4gICAgICAgICAgICAgIGR1cmF0aW9uOiAzNTAsXG4gICAgICAgICAgICAgIGVhc2luZzogXCJlYXNlT3V0UXVhcnRcIixcbiAgICAgICAgICAgICAgcXVldWU6IGZhbHNlLFxuICAgICAgICAgICAgICBjb21wbGV0ZTpcbiAgICAgICAgICAgICAgICBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICQodGhpcykuY3NzKCdoZWlnaHQnLCAnJyk7XG4gICAgICAgICAgICAgICAgICBleGVjQ2FsbGJhY2tzKCQodGhpcykuc2libGluZ3MoJy5jb2xsYXBzaWJsZS1oZWFkZXInKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gRXhwYW5kYWJsZSBPcGVuXG4gICAgICBmdW5jdGlvbiBleHBhbmRhYmxlT3BlbihvYmplY3QpIHtcbiAgICAgICAgaWYgKG9iamVjdC5oYXNDbGFzcygnYWN0aXZlJykpIHtcbiAgICAgICAgICBvYmplY3QucGFyZW50KCkuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIG9iamVjdC5wYXJlbnQoKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9iamVjdC5wYXJlbnQoKS5oYXNDbGFzcygnYWN0aXZlJykpe1xuICAgICAgICAgIG9iamVjdC5zaWJsaW5ncygnLmNvbGxhcHNpYmxlLWJvZHknKS5zdG9wKHRydWUsZmFsc2UpLnNsaWRlRG93bih7IGR1cmF0aW9uOiAzNTAsIGVhc2luZzogXCJlYXNlT3V0UXVhcnRcIiwgcXVldWU6IGZhbHNlLCBjb21wbGV0ZTogZnVuY3Rpb24oKSB7JCh0aGlzKS5jc3MoJ2hlaWdodCcsICcnKTt9fSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgb2JqZWN0LnNpYmxpbmdzKCcuY29sbGFwc2libGUtYm9keScpLnN0b3AodHJ1ZSxmYWxzZSkuc2xpZGVVcCh7IGR1cmF0aW9uOiAzNTAsIGVhc2luZzogXCJlYXNlT3V0UXVhcnRcIiwgcXVldWU6IGZhbHNlLCBjb21wbGV0ZTogZnVuY3Rpb24oKSB7JCh0aGlzKS5jc3MoJ2hlaWdodCcsICcnKTt9fSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gT3BlbiBjb2xsYXBzaWJsZS4gb2JqZWN0OiAuY29sbGFwc2libGUtaGVhZGVyXG4gICAgICBmdW5jdGlvbiBjb2xsYXBzaWJsZU9wZW4ob2JqZWN0KSB7XG4gICAgICAgIGlmIChvcHRpb25zLmFjY29yZGlvbiB8fCBjb2xsYXBzaWJsZV90eXBlID09PSBcImFjY29yZGlvblwiIHx8IGNvbGxhcHNpYmxlX3R5cGUgPT09IHVuZGVmaW5lZCkgeyAvLyBIYW5kbGUgQWNjb3JkaW9uXG4gICAgICAgICAgYWNjb3JkaW9uT3BlbihvYmplY3QpO1xuICAgICAgICB9IGVsc2UgeyAvLyBIYW5kbGUgRXhwYW5kYWJsZXNcbiAgICAgICAgICBleHBhbmRhYmxlT3BlbihvYmplY3QpO1xuICAgICAgICB9XG5cbiAgICAgICAgZXhlY0NhbGxiYWNrcyhvYmplY3QpO1xuICAgICAgfVxuXG4gICAgICAvLyBIYW5kbGUgY2FsbGJhY2tzXG4gICAgICBmdW5jdGlvbiBleGVjQ2FsbGJhY2tzKG9iamVjdCkge1xuICAgICAgICBpZiAob2JqZWN0Lmhhc0NsYXNzKCdhY3RpdmUnKSkge1xuICAgICAgICAgIGlmICh0eXBlb2Yob3B0aW9ucy5vbk9wZW4pID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIG9wdGlvbnMub25PcGVuLmNhbGwodGhpcywgb2JqZWN0LnBhcmVudCgpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKHR5cGVvZihvcHRpb25zLm9uQ2xvc2UpID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIG9wdGlvbnMub25DbG9zZS5jYWxsKHRoaXMsIG9iamVjdC5wYXJlbnQoKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogQ2hlY2sgaWYgb2JqZWN0IGlzIGNoaWxkcmVuIG9mIHBhbmVsIGhlYWRlclxuICAgICAgICogQHBhcmFtICB7T2JqZWN0fSAgb2JqZWN0IEpxdWVyeSBvYmplY3RcbiAgICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IHRydWUgaWYgaXQgaXMgY2hpbGRyZW5cbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24gaXNDaGlsZHJlbk9mUGFuZWxIZWFkZXIob2JqZWN0KSB7XG5cbiAgICAgICAgdmFyIHBhbmVsSGVhZGVyID0gZ2V0UGFuZWxIZWFkZXIob2JqZWN0KTtcblxuICAgICAgICByZXR1cm4gcGFuZWxIZWFkZXIubGVuZ3RoID4gMDtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBHZXQgcGFuZWwgaGVhZGVyIGZyb20gYSBjaGlsZHJlbiBlbGVtZW50XG4gICAgICAgKiBAcGFyYW0gIHtPYmplY3R9IG9iamVjdCBKcXVlcnkgb2JqZWN0XG4gICAgICAgKiBAcmV0dXJuIHtPYmplY3R9IHBhbmVsIGhlYWRlciBvYmplY3RcbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24gZ2V0UGFuZWxIZWFkZXIob2JqZWN0KSB7XG5cbiAgICAgICAgcmV0dXJuIG9iamVjdC5jbG9zZXN0KCdsaSA+IC5jb2xsYXBzaWJsZS1oZWFkZXInKTtcbiAgICAgIH1cblxuICAgICAgLyoqKioqICBFbmQgSGVscGVyIEZ1bmN0aW9ucyAgKioqKiovXG5cblxuXG4gICAgICAvLyBBZGQgY2xpY2sgaGFuZGxlciB0byBvbmx5IGRpcmVjdCBjb2xsYXBzaWJsZSBoZWFkZXIgY2hpbGRyZW5cbiAgICAgICR0aGlzLm9uKCdjbGljay5jb2xsYXBzZScsICc+IGxpID4gLmNvbGxhcHNpYmxlLWhlYWRlcicsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdmFyIGVsZW1lbnQgPSAkKGUudGFyZ2V0KTtcblxuICAgICAgICBpZiAoaXNDaGlsZHJlbk9mUGFuZWxIZWFkZXIoZWxlbWVudCkpIHtcbiAgICAgICAgICBlbGVtZW50ID0gZ2V0UGFuZWxIZWFkZXIoZWxlbWVudCk7XG4gICAgICAgIH1cblxuICAgICAgICBlbGVtZW50LnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcblxuICAgICAgICBjb2xsYXBzaWJsZU9wZW4oZWxlbWVudCk7XG4gICAgICB9KTtcblxuXG4gICAgICAvLyBPcGVuIGZpcnN0IGFjdGl2ZVxuICAgICAgaWYgKG9wdGlvbnMuYWNjb3JkaW9uIHx8IGNvbGxhcHNpYmxlX3R5cGUgPT09IFwiYWNjb3JkaW9uXCIgfHwgY29sbGFwc2libGVfdHlwZSA9PT0gdW5kZWZpbmVkKSB7IC8vIEhhbmRsZSBBY2NvcmRpb25cbiAgICAgICAgY29sbGFwc2libGVPcGVuKCRwYW5lbF9oZWFkZXJzLmZpbHRlcignLmFjdGl2ZScpLmZpcnN0KCkpO1xuXG4gICAgICB9IGVsc2UgeyAvLyBIYW5kbGUgRXhwYW5kYWJsZXNcbiAgICAgICAgJHBhbmVsX2hlYWRlcnMuZmlsdGVyKCcuYWN0aXZlJykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICBjb2xsYXBzaWJsZU9wZW4oJCh0aGlzKSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgfSk7XG4gIH07XG5cbiAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXtcbiAgICAkKCcuY29sbGFwc2libGUnKS5jb2xsYXBzaWJsZSgpO1xuICB9KTtcbn0oIGpRdWVyeSApKTs7KGZ1bmN0aW9uICgkKSB7XG5cbiAgLy8gQWRkIHBvc2liaWxpdHkgdG8gc2Nyb2xsIHRvIHNlbGVjdGVkIG9wdGlvblxuICAvLyB1c2VmdWxsIGZvciBzZWxlY3QgZm9yIGV4YW1wbGVcbiAgJC5mbi5zY3JvbGxUbyA9IGZ1bmN0aW9uKGVsZW0pIHtcbiAgICAkKHRoaXMpLnNjcm9sbFRvcCgkKHRoaXMpLnNjcm9sbFRvcCgpIC0gJCh0aGlzKS5vZmZzZXQoKS50b3AgKyAkKGVsZW0pLm9mZnNldCgpLnRvcCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgJC5mbi5kcm9wZG93biA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgdmFyIGRlZmF1bHRzID0ge1xuICAgICAgaW5EdXJhdGlvbjogMzAwLFxuICAgICAgb3V0RHVyYXRpb246IDIyNSxcbiAgICAgIGNvbnN0cmFpbl93aWR0aDogdHJ1ZSwgLy8gQ29uc3RyYWlucyB3aWR0aCBvZiBkcm9wZG93biB0byB0aGUgYWN0aXZhdG9yXG4gICAgICBob3ZlcjogZmFsc2UsXG4gICAgICBndXR0ZXI6IDAsIC8vIFNwYWNpbmcgZnJvbSBlZGdlXG4gICAgICBiZWxvd09yaWdpbjogZmFsc2UsXG4gICAgICBhbGlnbm1lbnQ6ICdsZWZ0JyxcbiAgICAgIHN0b3BQcm9wYWdhdGlvbjogZmFsc2VcbiAgICB9O1xuXG4gICAgLy8gT3BlbiBkcm9wZG93bi5cbiAgICBpZiAob3B0aW9ucyA9PT0gXCJvcGVuXCIpIHtcbiAgICAgIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgJCh0aGlzKS50cmlnZ2VyKCdvcGVuJyk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBDbG9zZSBkcm9wZG93bi5cbiAgICBpZiAob3B0aW9ucyA9PT0gXCJjbG9zZVwiKSB7XG4gICAgICB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICQodGhpcykudHJpZ2dlcignY2xvc2UnKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHRoaXMuZWFjaChmdW5jdGlvbigpe1xuICAgICAgdmFyIG9yaWdpbiA9ICQodGhpcyk7XG4gICAgICB2YXIgY3Vycl9vcHRpb25zID0gJC5leHRlbmQoe30sIGRlZmF1bHRzLCBvcHRpb25zKTtcbiAgICAgIHZhciBpc0ZvY3VzZWQgPSBmYWxzZTtcblxuICAgICAgLy8gRHJvcGRvd24gbWVudVxuICAgICAgdmFyIGFjdGl2YXRlcyA9ICQoXCIjXCIrIG9yaWdpbi5hdHRyKCdkYXRhLWFjdGl2YXRlcycpKTtcblxuICAgICAgZnVuY3Rpb24gdXBkYXRlT3B0aW9ucygpIHtcbiAgICAgICAgaWYgKG9yaWdpbi5kYXRhKCdpbmR1cmF0aW9uJykgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICBjdXJyX29wdGlvbnMuaW5EdXJhdGlvbiA9IG9yaWdpbi5kYXRhKCdpbmR1cmF0aW9uJyk7XG4gICAgICAgIGlmIChvcmlnaW4uZGF0YSgnb3V0ZHVyYXRpb24nKSAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgIGN1cnJfb3B0aW9ucy5vdXREdXJhdGlvbiA9IG9yaWdpbi5kYXRhKCdvdXRkdXJhdGlvbicpO1xuICAgICAgICBpZiAob3JpZ2luLmRhdGEoJ2NvbnN0cmFpbndpZHRoJykgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICBjdXJyX29wdGlvbnMuY29uc3RyYWluX3dpZHRoID0gb3JpZ2luLmRhdGEoJ2NvbnN0cmFpbndpZHRoJyk7XG4gICAgICAgIGlmIChvcmlnaW4uZGF0YSgnaG92ZXInKSAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgIGN1cnJfb3B0aW9ucy5ob3ZlciA9IG9yaWdpbi5kYXRhKCdob3ZlcicpO1xuICAgICAgICBpZiAob3JpZ2luLmRhdGEoJ2d1dHRlcicpICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgY3Vycl9vcHRpb25zLmd1dHRlciA9IG9yaWdpbi5kYXRhKCdndXR0ZXInKTtcbiAgICAgICAgaWYgKG9yaWdpbi5kYXRhKCdiZWxvd29yaWdpbicpICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgY3Vycl9vcHRpb25zLmJlbG93T3JpZ2luID0gb3JpZ2luLmRhdGEoJ2JlbG93b3JpZ2luJyk7XG4gICAgICAgIGlmIChvcmlnaW4uZGF0YSgnYWxpZ25tZW50JykgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICBjdXJyX29wdGlvbnMuYWxpZ25tZW50ID0gb3JpZ2luLmRhdGEoJ2FsaWdubWVudCcpO1xuICAgICAgICBpZiAob3JpZ2luLmRhdGEoJ3N0b3Bwcm9wYWdhdGlvbicpICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgY3Vycl9vcHRpb25zLnN0b3BQcm9wYWdhdGlvbiA9IG9yaWdpbi5kYXRhKCdzdG9wcHJvcGFnYXRpb24nKTtcbiAgICAgIH1cblxuICAgICAgdXBkYXRlT3B0aW9ucygpO1xuXG4gICAgICAvLyBBdHRhY2ggZHJvcGRvd24gdG8gaXRzIGFjdGl2YXRvclxuICAgICAgb3JpZ2luLmFmdGVyKGFjdGl2YXRlcyk7XG5cbiAgICAgIC8qXG4gICAgICAgIEhlbHBlciBmdW5jdGlvbiB0byBwb3NpdGlvbiBhbmQgcmVzaXplIGRyb3Bkb3duLlxuICAgICAgICBVc2VkIGluIGhvdmVyIGFuZCBjbGljayBoYW5kbGVyLlxuICAgICAgKi9cbiAgICAgIGZ1bmN0aW9uIHBsYWNlRHJvcGRvd24oZXZlbnRUeXBlKSB7XG4gICAgICAgIC8vIENoZWNrIGZvciBzaW11bHRhbmVvdXMgZm9jdXMgYW5kIGNsaWNrIGV2ZW50cy5cbiAgICAgICAgaWYgKGV2ZW50VHlwZSA9PT0gJ2ZvY3VzJykge1xuICAgICAgICAgIGlzRm9jdXNlZCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDaGVjayBodG1sIGRhdGEgYXR0cmlidXRlc1xuICAgICAgICB1cGRhdGVPcHRpb25zKCk7XG5cbiAgICAgICAgLy8gU2V0IERyb3Bkb3duIHN0YXRlXG4gICAgICAgIGFjdGl2YXRlcy5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgIG9yaWdpbi5hZGRDbGFzcygnYWN0aXZlJyk7XG5cbiAgICAgICAgLy8gQ29uc3RyYWluIHdpZHRoXG4gICAgICAgIGlmIChjdXJyX29wdGlvbnMuY29uc3RyYWluX3dpZHRoID09PSB0cnVlKSB7XG4gICAgICAgICAgYWN0aXZhdGVzLmNzcygnd2lkdGgnLCBvcmlnaW4ub3V0ZXJXaWR0aCgpKTtcblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFjdGl2YXRlcy5jc3MoJ3doaXRlLXNwYWNlJywgJ25vd3JhcCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gT2Zmc2NyZWVuIGRldGVjdGlvblxuICAgICAgICB2YXIgd2luZG93SGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xuICAgICAgICB2YXIgb3JpZ2luSGVpZ2h0ID0gb3JpZ2luLmlubmVySGVpZ2h0KCk7XG4gICAgICAgIHZhciBvZmZzZXRMZWZ0ID0gb3JpZ2luLm9mZnNldCgpLmxlZnQ7XG4gICAgICAgIHZhciBvZmZzZXRUb3AgPSBvcmlnaW4ub2Zmc2V0KCkudG9wIC0gJCh3aW5kb3cpLnNjcm9sbFRvcCgpO1xuICAgICAgICB2YXIgY3VyckFsaWdubWVudCA9IGN1cnJfb3B0aW9ucy5hbGlnbm1lbnQ7XG4gICAgICAgIHZhciBndXR0ZXJTcGFjaW5nID0gMDtcbiAgICAgICAgdmFyIGxlZnRQb3NpdGlvbiA9IDA7XG5cbiAgICAgICAgLy8gQmVsb3cgT3JpZ2luXG4gICAgICAgIHZhciB2ZXJ0aWNhbE9mZnNldCA9IDA7XG4gICAgICAgIGlmIChjdXJyX29wdGlvbnMuYmVsb3dPcmlnaW4gPT09IHRydWUpIHtcbiAgICAgICAgICB2ZXJ0aWNhbE9mZnNldCA9IG9yaWdpbkhlaWdodDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENoZWNrIGZvciBzY3JvbGxpbmcgcG9zaXRpb25lZCBjb250YWluZXIuXG4gICAgICAgIHZhciBzY3JvbGxZT2Zmc2V0ID0gMDtcbiAgICAgICAgdmFyIHNjcm9sbFhPZmZzZXQgPSAwO1xuICAgICAgICB2YXIgd3JhcHBlciA9IG9yaWdpbi5wYXJlbnQoKTtcbiAgICAgICAgaWYgKCF3cmFwcGVyLmlzKCdib2R5JykpIHtcbiAgICAgICAgICBpZiAod3JhcHBlclswXS5zY3JvbGxIZWlnaHQgPiB3cmFwcGVyWzBdLmNsaWVudEhlaWdodCkge1xuICAgICAgICAgICAgc2Nyb2xsWU9mZnNldCA9IHdyYXBwZXJbMF0uc2Nyb2xsVG9wO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAod3JhcHBlclswXS5zY3JvbGxXaWR0aCA+IHdyYXBwZXJbMF0uY2xpZW50V2lkdGgpIHtcbiAgICAgICAgICAgIHNjcm9sbFhPZmZzZXQgPSB3cmFwcGVyWzBdLnNjcm9sbExlZnQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cblxuICAgICAgICBpZiAob2Zmc2V0TGVmdCArIGFjdGl2YXRlcy5pbm5lcldpZHRoKCkgPiAkKHdpbmRvdykud2lkdGgoKSkge1xuICAgICAgICAgIC8vIERyb3Bkb3duIGdvZXMgcGFzdCBzY3JlZW4gb24gcmlnaHQsIGZvcmNlIHJpZ2h0IGFsaWdubWVudFxuICAgICAgICAgIGN1cnJBbGlnbm1lbnQgPSAncmlnaHQnO1xuXG4gICAgICAgIH0gZWxzZSBpZiAob2Zmc2V0TGVmdCAtIGFjdGl2YXRlcy5pbm5lcldpZHRoKCkgKyBvcmlnaW4uaW5uZXJXaWR0aCgpIDwgMCkge1xuICAgICAgICAgIC8vIERyb3Bkb3duIGdvZXMgcGFzdCBzY3JlZW4gb24gbGVmdCwgZm9yY2UgbGVmdCBhbGlnbm1lbnRcbiAgICAgICAgICBjdXJyQWxpZ25tZW50ID0gJ2xlZnQnO1xuICAgICAgICB9XG4gICAgICAgIC8vIFZlcnRpY2FsIGJvdHRvbSBvZmZzY3JlZW4gZGV0ZWN0aW9uXG4gICAgICAgIGlmIChvZmZzZXRUb3AgKyBhY3RpdmF0ZXMuaW5uZXJIZWlnaHQoKSA+IHdpbmRvd0hlaWdodCkge1xuICAgICAgICAgIC8vIElmIGdvaW5nIHVwd2FyZHMgc3RpbGwgZ29lcyBvZmZzY3JlZW4sIGp1c3QgY3JvcCBoZWlnaHQgb2YgZHJvcGRvd24uXG4gICAgICAgICAgaWYgKG9mZnNldFRvcCArIG9yaWdpbkhlaWdodCAtIGFjdGl2YXRlcy5pbm5lckhlaWdodCgpIDwgMCkge1xuICAgICAgICAgICAgdmFyIGFkanVzdGVkSGVpZ2h0ID0gd2luZG93SGVpZ2h0IC0gb2Zmc2V0VG9wIC0gdmVydGljYWxPZmZzZXQ7XG4gICAgICAgICAgICBhY3RpdmF0ZXMuY3NzKCdtYXgtaGVpZ2h0JywgYWRqdXN0ZWRIZWlnaHQpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBGbG93IHVwd2FyZHMuXG4gICAgICAgICAgICBpZiAoIXZlcnRpY2FsT2Zmc2V0KSB7XG4gICAgICAgICAgICAgIHZlcnRpY2FsT2Zmc2V0ICs9IG9yaWdpbkhlaWdodDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZlcnRpY2FsT2Zmc2V0IC09IGFjdGl2YXRlcy5pbm5lckhlaWdodCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEhhbmRsZSBlZGdlIGFsaWdubWVudFxuICAgICAgICBpZiAoY3VyckFsaWdubWVudCA9PT0gJ2xlZnQnKSB7XG4gICAgICAgICAgZ3V0dGVyU3BhY2luZyA9IGN1cnJfb3B0aW9ucy5ndXR0ZXI7XG4gICAgICAgICAgbGVmdFBvc2l0aW9uID0gb3JpZ2luLnBvc2l0aW9uKCkubGVmdCArIGd1dHRlclNwYWNpbmc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY3VyckFsaWdubWVudCA9PT0gJ3JpZ2h0Jykge1xuICAgICAgICAgIHZhciBvZmZzZXRSaWdodCA9IG9yaWdpbi5wb3NpdGlvbigpLmxlZnQgKyBvcmlnaW4ub3V0ZXJXaWR0aCgpIC0gYWN0aXZhdGVzLm91dGVyV2lkdGgoKTtcbiAgICAgICAgICBndXR0ZXJTcGFjaW5nID0gLWN1cnJfb3B0aW9ucy5ndXR0ZXI7XG4gICAgICAgICAgbGVmdFBvc2l0aW9uID0gIG9mZnNldFJpZ2h0ICsgZ3V0dGVyU3BhY2luZztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFBvc2l0aW9uIGRyb3Bkb3duXG4gICAgICAgIGFjdGl2YXRlcy5jc3Moe1xuICAgICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgICAgIHRvcDogb3JpZ2luLnBvc2l0aW9uKCkudG9wICsgdmVydGljYWxPZmZzZXQgKyBzY3JvbGxZT2Zmc2V0LFxuICAgICAgICAgIGxlZnQ6IGxlZnRQb3NpdGlvbiArIHNjcm9sbFhPZmZzZXRcbiAgICAgICAgfSk7XG5cblxuICAgICAgICAvLyBTaG93IGRyb3Bkb3duXG4gICAgICAgIGFjdGl2YXRlcy5zdG9wKHRydWUsIHRydWUpLmNzcygnb3BhY2l0eScsIDApXG4gICAgICAgICAgLnNsaWRlRG93bih7XG4gICAgICAgICAgICBxdWV1ZTogZmFsc2UsXG4gICAgICAgICAgICBkdXJhdGlvbjogY3Vycl9vcHRpb25zLmluRHVyYXRpb24sXG4gICAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0Q3ViaWMnLFxuICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAkKHRoaXMpLmNzcygnaGVpZ2h0JywgJycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgICAgLmFuaW1hdGUoIHtvcGFjaXR5OiAxfSwge3F1ZXVlOiBmYWxzZSwgZHVyYXRpb246IGN1cnJfb3B0aW9ucy5pbkR1cmF0aW9uLCBlYXNpbmc6ICdlYXNlT3V0U2luZSd9KTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gaGlkZURyb3Bkb3duKCkge1xuICAgICAgICAvLyBDaGVjayBmb3Igc2ltdWx0YW5lb3VzIGZvY3VzIGFuZCBjbGljayBldmVudHMuXG4gICAgICAgIGlzRm9jdXNlZCA9IGZhbHNlO1xuICAgICAgICBhY3RpdmF0ZXMuZmFkZU91dChjdXJyX29wdGlvbnMub3V0RHVyYXRpb24pO1xuICAgICAgICBhY3RpdmF0ZXMucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICBvcmlnaW4ucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyBhY3RpdmF0ZXMuY3NzKCdtYXgtaGVpZ2h0JywgJycpOyB9LCBjdXJyX29wdGlvbnMub3V0RHVyYXRpb24pO1xuICAgICAgfVxuXG4gICAgICAvLyBIb3ZlclxuICAgICAgaWYgKGN1cnJfb3B0aW9ucy5ob3Zlcikge1xuICAgICAgICB2YXIgb3BlbiA9IGZhbHNlO1xuICAgICAgICBvcmlnaW4udW5iaW5kKCdjbGljay4nICsgb3JpZ2luLmF0dHIoJ2lkJykpO1xuICAgICAgICAvLyBIb3ZlciBoYW5kbGVyIHRvIHNob3cgZHJvcGRvd25cbiAgICAgICAgb3JpZ2luLm9uKCdtb3VzZWVudGVyJywgZnVuY3Rpb24oZSl7IC8vIE1vdXNlIG92ZXJcbiAgICAgICAgICBpZiAob3BlbiA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHBsYWNlRHJvcGRvd24oKTtcbiAgICAgICAgICAgIG9wZW4gPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIG9yaWdpbi5vbignbW91c2VsZWF2ZScsIGZ1bmN0aW9uKGUpe1xuICAgICAgICAgIC8vIElmIGhvdmVyIG9uIG9yaWdpbiB0aGVuIHRvIHNvbWV0aGluZyBvdGhlciB0aGFuIGRyb3Bkb3duIGNvbnRlbnQsIHRoZW4gY2xvc2VcbiAgICAgICAgICB2YXIgdG9FbCA9IGUudG9FbGVtZW50IHx8IGUucmVsYXRlZFRhcmdldDsgLy8gYWRkZWQgYnJvd3NlciBjb21wYXRpYmlsaXR5IGZvciB0YXJnZXQgZWxlbWVudFxuICAgICAgICAgIGlmKCEkKHRvRWwpLmNsb3Nlc3QoJy5kcm9wZG93bi1jb250ZW50JykuaXMoYWN0aXZhdGVzKSkge1xuICAgICAgICAgICAgYWN0aXZhdGVzLnN0b3AodHJ1ZSwgdHJ1ZSk7XG4gICAgICAgICAgICBoaWRlRHJvcGRvd24oKTtcbiAgICAgICAgICAgIG9wZW4gPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGFjdGl2YXRlcy5vbignbW91c2VsZWF2ZScsIGZ1bmN0aW9uKGUpeyAvLyBNb3VzZSBvdXRcbiAgICAgICAgICB2YXIgdG9FbCA9IGUudG9FbGVtZW50IHx8IGUucmVsYXRlZFRhcmdldDtcbiAgICAgICAgICBpZighJCh0b0VsKS5jbG9zZXN0KCcuZHJvcGRvd24tYnV0dG9uJykuaXMob3JpZ2luKSkge1xuICAgICAgICAgICAgYWN0aXZhdGVzLnN0b3AodHJ1ZSwgdHJ1ZSk7XG4gICAgICAgICAgICBoaWRlRHJvcGRvd24oKTtcbiAgICAgICAgICAgIG9wZW4gPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIENsaWNrXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBDbGljayBoYW5kbGVyIHRvIHNob3cgZHJvcGRvd25cbiAgICAgICAgb3JpZ2luLnVuYmluZCgnY2xpY2suJyArIG9yaWdpbi5hdHRyKCdpZCcpKTtcbiAgICAgICAgb3JpZ2luLmJpbmQoJ2NsaWNrLicrb3JpZ2luLmF0dHIoJ2lkJyksIGZ1bmN0aW9uKGUpe1xuICAgICAgICAgIGlmICghaXNGb2N1c2VkKSB7XG4gICAgICAgICAgICBpZiAoIG9yaWdpblswXSA9PSBlLmN1cnJlbnRUYXJnZXQgJiZcbiAgICAgICAgICAgICAgICAgIW9yaWdpbi5oYXNDbGFzcygnYWN0aXZlJykgJiZcbiAgICAgICAgICAgICAgICAgKCQoZS50YXJnZXQpLmNsb3Nlc3QoJy5kcm9wZG93bi1jb250ZW50JykubGVuZ3RoID09PSAwKSkge1xuICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7IC8vIFByZXZlbnRzIGJ1dHRvbiBjbGljayBmcm9tIG1vdmluZyB3aW5kb3dcbiAgICAgICAgICAgICAgaWYgKGN1cnJfb3B0aW9ucy5zdG9wUHJvcGFnYXRpb24pIHtcbiAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHBsYWNlRHJvcGRvd24oJ2NsaWNrJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBJZiBvcmlnaW4gaXMgY2xpY2tlZCBhbmQgbWVudSBpcyBvcGVuLCBjbG9zZSBtZW51XG4gICAgICAgICAgICBlbHNlIGlmIChvcmlnaW4uaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XG4gICAgICAgICAgICAgIGhpZGVEcm9wZG93bigpO1xuICAgICAgICAgICAgICAkKGRvY3VtZW50KS51bmJpbmQoJ2NsaWNrLicrIGFjdGl2YXRlcy5hdHRyKCdpZCcpICsgJyB0b3VjaHN0YXJ0LicgKyBhY3RpdmF0ZXMuYXR0cignaWQnKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBJZiBtZW51IG9wZW4sIGFkZCBjbGljayBjbG9zZSBoYW5kbGVyIHRvIGRvY3VtZW50XG4gICAgICAgICAgICBpZiAoYWN0aXZhdGVzLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xuICAgICAgICAgICAgICAkKGRvY3VtZW50KS5iaW5kKCdjbGljay4nKyBhY3RpdmF0ZXMuYXR0cignaWQnKSArICcgdG91Y2hzdGFydC4nICsgYWN0aXZhdGVzLmF0dHIoJ2lkJyksIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFhY3RpdmF0ZXMuaXMoZS50YXJnZXQpICYmICFvcmlnaW4uaXMoZS50YXJnZXQpICYmICghb3JpZ2luLmZpbmQoZS50YXJnZXQpLmxlbmd0aCkgKSB7XG4gICAgICAgICAgICAgICAgICBoaWRlRHJvcGRvd24oKTtcbiAgICAgICAgICAgICAgICAgICQoZG9jdW1lbnQpLnVuYmluZCgnY2xpY2suJysgYWN0aXZhdGVzLmF0dHIoJ2lkJykgKyAnIHRvdWNoc3RhcnQuJyArIGFjdGl2YXRlcy5hdHRyKCdpZCcpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgIH0gLy8gRW5kIGVsc2VcblxuICAgICAgLy8gTGlzdGVuIHRvIG9wZW4gYW5kIGNsb3NlIGV2ZW50IC0gdXNlZnVsIGZvciBzZWxlY3QgY29tcG9uZW50XG4gICAgICBvcmlnaW4ub24oJ29wZW4nLCBmdW5jdGlvbihlLCBldmVudFR5cGUpIHtcbiAgICAgICAgcGxhY2VEcm9wZG93bihldmVudFR5cGUpO1xuICAgICAgfSk7XG4gICAgICBvcmlnaW4ub24oJ2Nsb3NlJywgaGlkZURyb3Bkb3duKTtcblxuXG4gICAgfSk7XG4gIH07IC8vIEVuZCBkcm9wZG93biBwbHVnaW5cblxuICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe1xuICAgICQoJy5kcm9wZG93bi1idXR0b24nKS5kcm9wZG93bigpO1xuICB9KTtcbn0oIGpRdWVyeSApKTtcbjsoZnVuY3Rpb24oJCkge1xuICB2YXIgX3N0YWNrID0gMCxcbiAgX2xhc3RJRCA9IDAsXG4gIF9nZW5lcmF0ZUlEID0gZnVuY3Rpb24oKSB7XG4gICAgX2xhc3RJRCsrO1xuICAgIHJldHVybiAnbWF0ZXJpYWxpemUtbW9kYWwtb3ZlcmxheS0nICsgX2xhc3RJRDtcbiAgfTtcblxuICB2YXIgbWV0aG9kcyA9IHtcbiAgICBpbml0IDogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgdmFyIGRlZmF1bHRzID0ge1xuICAgICAgICBvcGFjaXR5OiAwLjUsXG4gICAgICAgIGluX2R1cmF0aW9uOiAzNTAsXG4gICAgICAgIG91dF9kdXJhdGlvbjogMjUwLFxuICAgICAgICByZWFkeTogdW5kZWZpbmVkLFxuICAgICAgICBjb21wbGV0ZTogdW5kZWZpbmVkLFxuICAgICAgICBkaXNtaXNzaWJsZTogdHJ1ZSxcbiAgICAgICAgc3RhcnRpbmdfdG9wOiAnNCUnLFxuICAgICAgICBlbmRpbmdfdG9wOiAnMTAlJ1xuICAgICAgfTtcblxuICAgICAgLy8gT3ZlcnJpZGUgZGVmYXVsdHNcbiAgICAgIG9wdGlvbnMgPSAkLmV4dGVuZChkZWZhdWx0cywgb3B0aW9ucyk7XG5cbiAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciAkbW9kYWwgPSAkKHRoaXMpO1xuICAgICAgICB2YXIgbW9kYWxfaWQgPSAkKHRoaXMpLmF0dHIoXCJpZFwiKSB8fCAnIycgKyAkKHRoaXMpLmRhdGEoJ3RhcmdldCcpO1xuXG4gICAgICAgIHZhciBjbG9zZU1vZGFsID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIG92ZXJsYXlJRCA9ICRtb2RhbC5kYXRhKCdvdmVybGF5LWlkJyk7XG4gICAgICAgICAgdmFyICRvdmVybGF5ID0gJCgnIycgKyBvdmVybGF5SUQpO1xuICAgICAgICAgICRtb2RhbC5yZW1vdmVDbGFzcygnb3BlbicpO1xuXG4gICAgICAgICAgLy8gRW5hYmxlIHNjcm9sbGluZ1xuICAgICAgICAgICQoJ2JvZHknKS5jc3Moe1xuICAgICAgICAgICAgb3ZlcmZsb3c6ICcnLFxuICAgICAgICAgICAgd2lkdGg6ICcnXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICAkbW9kYWwuZmluZCgnLm1vZGFsLWNsb3NlJykub2ZmKCdjbGljay5jbG9zZScpO1xuICAgICAgICAgICQoZG9jdW1lbnQpLm9mZigna2V5dXAubW9kYWwnICsgb3ZlcmxheUlEKTtcblxuICAgICAgICAgICRvdmVybGF5LnZlbG9jaXR5KCB7IG9wYWNpdHk6IDB9LCB7ZHVyYXRpb246IG9wdGlvbnMub3V0X2R1cmF0aW9uLCBxdWV1ZTogZmFsc2UsIGVhc2U6IFwiZWFzZU91dFF1YXJ0XCJ9KTtcblxuXG4gICAgICAgICAgLy8gRGVmaW5lIEJvdHRvbSBTaGVldCBhbmltYXRpb25cbiAgICAgICAgICB2YXIgZXhpdFZlbG9jaXR5T3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGR1cmF0aW9uOiBvcHRpb25zLm91dF9kdXJhdGlvbixcbiAgICAgICAgICAgIHF1ZXVlOiBmYWxzZSxcbiAgICAgICAgICAgIGVhc2U6IFwiZWFzZU91dEN1YmljXCIsXG4gICAgICAgICAgICAvLyBIYW5kbGUgbW9kYWwgcmVhZHkgY2FsbGJhY2tcbiAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgJCh0aGlzKS5jc3Moe2Rpc3BsYXk6XCJub25lXCJ9KTtcblxuICAgICAgICAgICAgICAvLyBDYWxsIGNvbXBsZXRlIGNhbGxiYWNrXG4gICAgICAgICAgICAgIGlmICh0eXBlb2Yob3B0aW9ucy5jb21wbGV0ZSkgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuY29tcGxldGUuY2FsbCh0aGlzLCAkbW9kYWwpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICRvdmVybGF5LnJlbW92ZSgpO1xuICAgICAgICAgICAgICBfc3RhY2stLTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICAgIGlmICgkbW9kYWwuaGFzQ2xhc3MoJ2JvdHRvbS1zaGVldCcpKSB7XG4gICAgICAgICAgICAkbW9kYWwudmVsb2NpdHkoe2JvdHRvbTogXCItMTAwJVwiLCBvcGFjaXR5OiAwfSwgZXhpdFZlbG9jaXR5T3B0aW9ucyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgJG1vZGFsLnZlbG9jaXR5KFxuICAgICAgICAgICAgICB7IHRvcDogb3B0aW9ucy5zdGFydGluZ190b3AsIG9wYWNpdHk6IDAsIHNjYWxlWDogMC43fSxcbiAgICAgICAgICAgICAgZXhpdFZlbG9jaXR5T3B0aW9uc1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIG9wZW5Nb2RhbCA9IGZ1bmN0aW9uKCR0cmlnZ2VyKSB7XG4gICAgICAgICAgdmFyICRib2R5ID0gJCgnYm9keScpO1xuICAgICAgICAgIHZhciBvbGRXaWR0aCA9ICRib2R5LmlubmVyV2lkdGgoKTtcbiAgICAgICAgICAkYm9keS5jc3MoJ292ZXJmbG93JywgJ2hpZGRlbicpO1xuICAgICAgICAgICRib2R5LndpZHRoKG9sZFdpZHRoKTtcblxuICAgICAgICAgIGlmICgkbW9kYWwuaGFzQ2xhc3MoJ29wZW4nKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhciBvdmVybGF5SUQgPSBfZ2VuZXJhdGVJRCgpO1xuICAgICAgICAgIHZhciAkb3ZlcmxheSA9ICQoJzxkaXYgY2xhc3M9XCJtb2RhbC1vdmVybGF5XCI+PC9kaXY+Jyk7XG4gICAgICAgICAgbFN0YWNrID0gKCsrX3N0YWNrKTtcblxuICAgICAgICAgIC8vIFN0b3JlIGEgcmVmZXJlbmNlIG9mIHRoZSBvdmVybGF5XG4gICAgICAgICAgJG92ZXJsYXkuYXR0cignaWQnLCBvdmVybGF5SUQpLmNzcygnei1pbmRleCcsIDEwMDAgKyBsU3RhY2sgKiAyKTtcbiAgICAgICAgICAkbW9kYWwuZGF0YSgnb3ZlcmxheS1pZCcsIG92ZXJsYXlJRCkuY3NzKCd6LWluZGV4JywgMTAwMCArIGxTdGFjayAqIDIgKyAxKTtcbiAgICAgICAgICAkbW9kYWwuYWRkQ2xhc3MoJ29wZW4nKTtcblxuICAgICAgICAgICQoXCJib2R5XCIpLmFwcGVuZCgkb3ZlcmxheSk7XG5cbiAgICAgICAgICBpZiAob3B0aW9ucy5kaXNtaXNzaWJsZSkge1xuICAgICAgICAgICAgJG92ZXJsYXkuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIGNsb3NlTW9kYWwoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gUmV0dXJuIG9uIEVTQ1xuICAgICAgICAgICAgJChkb2N1bWVudCkub24oJ2tleXVwLm1vZGFsJyArIG92ZXJsYXlJRCwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICBpZiAoZS5rZXlDb2RlID09PSAyNykgeyAgIC8vIEVTQyBrZXlcbiAgICAgICAgICAgICAgICBjbG9zZU1vZGFsKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgICRtb2RhbC5maW5kKFwiLm1vZGFsLWNsb3NlXCIpLm9uKCdjbGljay5jbG9zZScsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGNsb3NlTW9kYWwoKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgICRvdmVybGF5LmNzcyh7IGRpc3BsYXkgOiBcImJsb2NrXCIsIG9wYWNpdHkgOiAwIH0pO1xuXG4gICAgICAgICAgJG1vZGFsLmNzcyh7XG4gICAgICAgICAgICBkaXNwbGF5IDogXCJibG9ja1wiLFxuICAgICAgICAgICAgb3BhY2l0eTogMFxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgJG92ZXJsYXkudmVsb2NpdHkoe29wYWNpdHk6IG9wdGlvbnMub3BhY2l0eX0sIHtkdXJhdGlvbjogb3B0aW9ucy5pbl9kdXJhdGlvbiwgcXVldWU6IGZhbHNlLCBlYXNlOiBcImVhc2VPdXRDdWJpY1wifSk7XG4gICAgICAgICAgJG1vZGFsLmRhdGEoJ2Fzc29jaWF0ZWQtb3ZlcmxheScsICRvdmVybGF5WzBdKTtcblxuICAgICAgICAgIC8vIERlZmluZSBCb3R0b20gU2hlZXQgYW5pbWF0aW9uXG4gICAgICAgICAgdmFyIGVudGVyVmVsb2NpdHlPcHRpb25zID0ge1xuICAgICAgICAgICAgZHVyYXRpb246IG9wdGlvbnMuaW5fZHVyYXRpb24sXG4gICAgICAgICAgICBxdWV1ZTogZmFsc2UsXG4gICAgICAgICAgICBlYXNlOiBcImVhc2VPdXRDdWJpY1wiLFxuICAgICAgICAgICAgLy8gSGFuZGxlIG1vZGFsIHJlYWR5IGNhbGxiYWNrXG4gICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIGlmICh0eXBlb2Yob3B0aW9ucy5yZWFkeSkgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMucmVhZHkuY2FsbCh0aGlzLCAkbW9kYWwsICR0cmlnZ2VyKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgICAgaWYgKCRtb2RhbC5oYXNDbGFzcygnYm90dG9tLXNoZWV0JykpIHtcbiAgICAgICAgICAgICRtb2RhbC52ZWxvY2l0eSh7Ym90dG9tOiBcIjBcIiwgb3BhY2l0eTogMX0sIGVudGVyVmVsb2NpdHlPcHRpb25zKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAkLlZlbG9jaXR5Lmhvb2soJG1vZGFsLCBcInNjYWxlWFwiLCAwLjcpO1xuICAgICAgICAgICAgJG1vZGFsLmNzcyh7IHRvcDogb3B0aW9ucy5zdGFydGluZ190b3AgfSk7XG4gICAgICAgICAgICAkbW9kYWwudmVsb2NpdHkoe3RvcDogb3B0aW9ucy5lbmRpbmdfdG9wLCBvcGFjaXR5OiAxLCBzY2FsZVg6ICcxJ30sIGVudGVyVmVsb2NpdHlPcHRpb25zKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgfTtcblxuICAgICAgICAvLyBSZXNldCBoYW5kbGVyc1xuICAgICAgICAkKGRvY3VtZW50KS5vZmYoJ2NsaWNrLm1vZGFsVHJpZ2dlcicsICdhW2hyZWY9XCIjJyArIG1vZGFsX2lkICsgJ1wiXSwgW2RhdGEtdGFyZ2V0PVwiJyArIG1vZGFsX2lkICsgJ1wiXScpO1xuICAgICAgICAkKHRoaXMpLm9mZignb3Blbk1vZGFsJyk7XG4gICAgICAgICQodGhpcykub2ZmKCdjbG9zZU1vZGFsJyk7XG5cbiAgICAgICAgLy8gQ2xvc2UgSGFuZGxlcnNcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrLm1vZGFsVHJpZ2dlcicsICdhW2hyZWY9XCIjJyArIG1vZGFsX2lkICsgJ1wiXSwgW2RhdGEtdGFyZ2V0PVwiJyArIG1vZGFsX2lkICsgJ1wiXScsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICBvcHRpb25zLnN0YXJ0aW5nX3RvcCA9ICgkKHRoaXMpLm9mZnNldCgpLnRvcCAtICQod2luZG93KS5zY3JvbGxUb3AoKSkgLzEuMTU7XG4gICAgICAgICAgb3Blbk1vZGFsKCQodGhpcykpO1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfSk7IC8vIGRvbmUgc2V0IG9uIGNsaWNrXG5cbiAgICAgICAgJCh0aGlzKS5vbignb3Blbk1vZGFsJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIG1vZGFsX2lkID0gJCh0aGlzKS5hdHRyKFwiaHJlZlwiKSB8fCAnIycgKyAkKHRoaXMpLmRhdGEoJ3RhcmdldCcpO1xuICAgICAgICAgIG9wZW5Nb2RhbCgpO1xuICAgICAgICB9KTtcblxuICAgICAgICAkKHRoaXMpLm9uKCdjbG9zZU1vZGFsJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgY2xvc2VNb2RhbCgpO1xuICAgICAgICB9KTtcbiAgICAgIH0pOyAvLyBkb25lIHJldHVyblxuICAgIH0sXG4gICAgb3BlbiA6IGZ1bmN0aW9uKCkge1xuICAgICAgJCh0aGlzKS50cmlnZ2VyKCdvcGVuTW9kYWwnKTtcbiAgICB9LFxuICAgIGNsb3NlIDogZnVuY3Rpb24oKSB7XG4gICAgICAkKHRoaXMpLnRyaWdnZXIoJ2Nsb3NlTW9kYWwnKTtcbiAgICB9XG4gIH07XG5cbiAgJC5mbi5tb2RhbCA9IGZ1bmN0aW9uKG1ldGhvZE9yT3B0aW9ucykge1xuICAgIGlmICggbWV0aG9kc1ttZXRob2RPck9wdGlvbnNdICkge1xuICAgICAgcmV0dXJuIG1ldGhvZHNbIG1ldGhvZE9yT3B0aW9ucyBdLmFwcGx5KCB0aGlzLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCggYXJndW1lbnRzLCAxICkpO1xuICAgIH0gZWxzZSBpZiAoIHR5cGVvZiBtZXRob2RPck9wdGlvbnMgPT09ICdvYmplY3QnIHx8ICEgbWV0aG9kT3JPcHRpb25zICkge1xuICAgICAgLy8gRGVmYXVsdCB0byBcImluaXRcIlxuICAgICAgcmV0dXJuIG1ldGhvZHMuaW5pdC5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG4gICAgfSBlbHNlIHtcbiAgICAgICQuZXJyb3IoICdNZXRob2QgJyArICBtZXRob2RPck9wdGlvbnMgKyAnIGRvZXMgbm90IGV4aXN0IG9uIGpRdWVyeS5tb2RhbCcgKTtcbiAgICB9XG4gIH07XG59KShqUXVlcnkpO1xuOyhmdW5jdGlvbiAoJCkge1xuXG4gICQuZm4ubWF0ZXJpYWxib3ggPSBmdW5jdGlvbiAoKSB7XG5cbiAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuXG4gICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcygnaW5pdGlhbGl6ZWQnKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2luaXRpYWxpemVkJyk7XG5cbiAgICAgIHZhciBvdmVybGF5QWN0aXZlID0gZmFsc2U7XG4gICAgICB2YXIgZG9uZUFuaW1hdGluZyA9IHRydWU7XG4gICAgICB2YXIgaW5EdXJhdGlvbiA9IDI3NTtcbiAgICAgIHZhciBvdXREdXJhdGlvbiA9IDIwMDtcbiAgICAgIHZhciBvcmlnaW4gPSAkKHRoaXMpO1xuICAgICAgdmFyIHBsYWNlaG9sZGVyID0gJCgnPGRpdj48L2Rpdj4nKS5hZGRDbGFzcygnbWF0ZXJpYWwtcGxhY2Vob2xkZXInKTtcbiAgICAgIHZhciBvcmlnaW5hbFdpZHRoID0gMDtcbiAgICAgIHZhciBvcmlnaW5hbEhlaWdodCA9IDA7XG4gICAgICB2YXIgYW5jZXN0b3JzQ2hhbmdlZDtcbiAgICAgIHZhciBhbmNlc3RvcjtcbiAgICAgIG9yaWdpbi53cmFwKHBsYWNlaG9sZGVyKTtcblxuXG4gICAgICBvcmlnaW4ub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIHBsYWNlaG9sZGVyID0gb3JpZ2luLnBhcmVudCgnLm1hdGVyaWFsLXBsYWNlaG9sZGVyJyk7XG4gICAgICAgIHZhciB3aW5kb3dXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgICAgICB2YXIgd2luZG93SGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xuICAgICAgICB2YXIgb3JpZ2luYWxXaWR0aCA9IG9yaWdpbi53aWR0aCgpO1xuICAgICAgICB2YXIgb3JpZ2luYWxIZWlnaHQgPSBvcmlnaW4uaGVpZ2h0KCk7XG5cblxuICAgICAgICAvLyBJZiBhbHJlYWR5IG1vZGFsLCByZXR1cm4gdG8gb3JpZ2luYWxcbiAgICAgICAgaWYgKGRvbmVBbmltYXRpbmcgPT09IGZhbHNlKSB7XG4gICAgICAgICAgcmV0dXJuVG9PcmlnaW5hbCgpO1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvdmVybGF5QWN0aXZlICYmIGRvbmVBbmltYXRpbmc9PT10cnVlKSB7XG4gICAgICAgICAgcmV0dXJuVG9PcmlnaW5hbCgpO1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gU2V0IHN0YXRlc1xuICAgICAgICBkb25lQW5pbWF0aW5nID0gZmFsc2U7XG4gICAgICAgIG9yaWdpbi5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgIG92ZXJsYXlBY3RpdmUgPSB0cnVlO1xuXG4gICAgICAgIC8vIFNldCBwb3NpdGlvbmluZyBmb3IgcGxhY2Vob2xkZXJcbiAgICAgICAgcGxhY2Vob2xkZXIuY3NzKHtcbiAgICAgICAgICB3aWR0aDogcGxhY2Vob2xkZXJbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGgsXG4gICAgICAgICAgaGVpZ2h0OiBwbGFjZWhvbGRlclswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQsXG4gICAgICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gICAgICAgICAgdG9wOiAwLFxuICAgICAgICAgIGxlZnQ6IDBcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gRmluZCBhbmNlc3RvciB3aXRoIG92ZXJmbG93OiBoaWRkZW47IGFuZCByZW1vdmUgaXRcbiAgICAgICAgYW5jZXN0b3JzQ2hhbmdlZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgYW5jZXN0b3IgPSBwbGFjZWhvbGRlclswXS5wYXJlbnROb2RlO1xuICAgICAgICB2YXIgY291bnQgPSAwO1xuICAgICAgICB3aGlsZSAoYW5jZXN0b3IgIT09IG51bGwgJiYgISQoYW5jZXN0b3IpLmlzKGRvY3VtZW50KSkge1xuICAgICAgICAgIHZhciBjdXJyID0gJChhbmNlc3Rvcik7XG4gICAgICAgICAgaWYgKGN1cnIuY3NzKCdvdmVyZmxvdycpICE9PSAndmlzaWJsZScpIHtcbiAgICAgICAgICAgIGN1cnIuY3NzKCdvdmVyZmxvdycsICd2aXNpYmxlJyk7XG4gICAgICAgICAgICBpZiAoYW5jZXN0b3JzQ2hhbmdlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIGFuY2VzdG9yc0NoYW5nZWQgPSBjdXJyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIGFuY2VzdG9yc0NoYW5nZWQgPSBhbmNlc3RvcnNDaGFuZ2VkLmFkZChjdXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYW5jZXN0b3IgPSBhbmNlc3Rvci5wYXJlbnROb2RlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2V0IGNzcyBvbiBvcmlnaW5cbiAgICAgICAgb3JpZ2luLmNzcyh7cG9zaXRpb246ICdhYnNvbHV0ZScsICd6LWluZGV4JzogMTAwMH0pXG4gICAgICAgIC5kYXRhKCd3aWR0aCcsIG9yaWdpbmFsV2lkdGgpXG4gICAgICAgIC5kYXRhKCdoZWlnaHQnLCBvcmlnaW5hbEhlaWdodCk7XG5cbiAgICAgICAgLy8gQWRkIG92ZXJsYXlcbiAgICAgICAgdmFyIG92ZXJsYXkgPSAkKCc8ZGl2IGlkPVwibWF0ZXJpYWxib3gtb3ZlcmxheVwiPjwvZGl2PicpXG4gICAgICAgICAgLmNzcyh7XG4gICAgICAgICAgICBvcGFjaXR5OiAwXG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2xpY2soZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGlmIChkb25lQW5pbWF0aW5nID09PSB0cnVlKVxuICAgICAgICAgICAgcmV0dXJuVG9PcmlnaW5hbCgpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIC8vIEFuaW1hdGUgT3ZlcmxheVxuICAgICAgICAgIC8vIFB1dCBiZWZvcmUgaW4gb3JpZ2luIGltYWdlIHRvIHByZXNlcnZlIHotaW5kZXggbGF5ZXJpbmcuXG4gICAgICAgICAgb3JpZ2luLmJlZm9yZShvdmVybGF5KTtcbiAgICAgICAgICBvdmVybGF5LnZlbG9jaXR5KHtvcGFjaXR5OiAxfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHtkdXJhdGlvbjogaW5EdXJhdGlvbiwgcXVldWU6IGZhbHNlLCBlYXNpbmc6ICdlYXNlT3V0UXVhZCd9ICk7XG5cbiAgICAgICAgLy8gQWRkIGFuZCBhbmltYXRlIGNhcHRpb24gaWYgaXQgZXhpc3RzXG4gICAgICAgIGlmIChvcmlnaW4uZGF0YSgnY2FwdGlvbicpICE9PSBcIlwiKSB7XG4gICAgICAgICAgdmFyICRwaG90b19jYXB0aW9uID0gJCgnPGRpdiBjbGFzcz1cIm1hdGVyaWFsYm94LWNhcHRpb25cIj48L2Rpdj4nKTtcbiAgICAgICAgICAkcGhvdG9fY2FwdGlvbi50ZXh0KG9yaWdpbi5kYXRhKCdjYXB0aW9uJykpO1xuICAgICAgICAgICQoJ2JvZHknKS5hcHBlbmQoJHBob3RvX2NhcHRpb24pO1xuICAgICAgICAgICRwaG90b19jYXB0aW9uLmNzcyh7IFwiZGlzcGxheVwiOiBcImlubGluZVwiIH0pO1xuICAgICAgICAgICRwaG90b19jYXB0aW9uLnZlbG9jaXR5KHtvcGFjaXR5OiAxfSwge2R1cmF0aW9uOiBpbkR1cmF0aW9uLCBxdWV1ZTogZmFsc2UsIGVhc2luZzogJ2Vhc2VPdXRRdWFkJ30pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUmVzaXplIEltYWdlXG4gICAgICAgIHZhciByYXRpbyA9IDA7XG4gICAgICAgIHZhciB3aWR0aFBlcmNlbnQgPSBvcmlnaW5hbFdpZHRoIC8gd2luZG93V2lkdGg7XG4gICAgICAgIHZhciBoZWlnaHRQZXJjZW50ID0gb3JpZ2luYWxIZWlnaHQgLyB3aW5kb3dIZWlnaHQ7XG4gICAgICAgIHZhciBuZXdXaWR0aCA9IDA7XG4gICAgICAgIHZhciBuZXdIZWlnaHQgPSAwO1xuXG4gICAgICAgIGlmICh3aWR0aFBlcmNlbnQgPiBoZWlnaHRQZXJjZW50KSB7XG4gICAgICAgICAgcmF0aW8gPSBvcmlnaW5hbEhlaWdodCAvIG9yaWdpbmFsV2lkdGg7XG4gICAgICAgICAgbmV3V2lkdGggPSB3aW5kb3dXaWR0aCAqIDAuOTtcbiAgICAgICAgICBuZXdIZWlnaHQgPSB3aW5kb3dXaWR0aCAqIDAuOSAqIHJhdGlvO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIHJhdGlvID0gb3JpZ2luYWxXaWR0aCAvIG9yaWdpbmFsSGVpZ2h0O1xuICAgICAgICAgIG5ld1dpZHRoID0gKHdpbmRvd0hlaWdodCAqIDAuOSkgKiByYXRpbztcbiAgICAgICAgICBuZXdIZWlnaHQgPSB3aW5kb3dIZWlnaHQgKiAwLjk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBbmltYXRlIGltYWdlICsgc2V0IHotaW5kZXhcbiAgICAgICAgaWYob3JpZ2luLmhhc0NsYXNzKCdyZXNwb25zaXZlLWltZycpKSB7XG4gICAgICAgICAgb3JpZ2luLnZlbG9jaXR5KHsnbWF4LXdpZHRoJzogbmV3V2lkdGgsICd3aWR0aCc6IG9yaWdpbmFsV2lkdGh9LCB7ZHVyYXRpb246IDAsIHF1ZXVlOiBmYWxzZSxcbiAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICBvcmlnaW4uY3NzKHtsZWZ0OiAwLCB0b3A6IDB9KVxuICAgICAgICAgICAgICAudmVsb2NpdHkoXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBuZXdIZWlnaHQsXG4gICAgICAgICAgICAgICAgICB3aWR0aDogbmV3V2lkdGgsXG4gICAgICAgICAgICAgICAgICBsZWZ0OiAkKGRvY3VtZW50KS5zY3JvbGxMZWZ0KCkgKyB3aW5kb3dXaWR0aC8yIC0gb3JpZ2luLnBhcmVudCgnLm1hdGVyaWFsLXBsYWNlaG9sZGVyJykub2Zmc2V0KCkubGVmdCAtIG5ld1dpZHRoLzIsXG4gICAgICAgICAgICAgICAgICB0b3A6ICQoZG9jdW1lbnQpLnNjcm9sbFRvcCgpICsgd2luZG93SGVpZ2h0LzIgLSBvcmlnaW4ucGFyZW50KCcubWF0ZXJpYWwtcGxhY2Vob2xkZXInKS5vZmZzZXQoKS50b3AgLSBuZXdIZWlnaHQvIDJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBpbkR1cmF0aW9uLFxuICAgICAgICAgICAgICAgICAgcXVldWU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgZWFzaW5nOiAnZWFzZU91dFF1YWQnLFxuICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uKCl7ZG9uZUFuaW1hdGluZyA9IHRydWU7fVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gLy8gRW5kIENvbXBsZXRlXG4gICAgICAgICAgfSk7IC8vIEVuZCBWZWxvY2l0eVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIG9yaWdpbi5jc3MoJ2xlZnQnLCAwKVxuICAgICAgICAgIC5jc3MoJ3RvcCcsIDApXG4gICAgICAgICAgLnZlbG9jaXR5KFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBoZWlnaHQ6IG5ld0hlaWdodCxcbiAgICAgICAgICAgICAgd2lkdGg6IG5ld1dpZHRoLFxuICAgICAgICAgICAgICBsZWZ0OiAkKGRvY3VtZW50KS5zY3JvbGxMZWZ0KCkgKyB3aW5kb3dXaWR0aC8yIC0gb3JpZ2luLnBhcmVudCgnLm1hdGVyaWFsLXBsYWNlaG9sZGVyJykub2Zmc2V0KCkubGVmdCAtIG5ld1dpZHRoLzIsXG4gICAgICAgICAgICAgIHRvcDogJChkb2N1bWVudCkuc2Nyb2xsVG9wKCkgKyB3aW5kb3dIZWlnaHQvMiAtIG9yaWdpbi5wYXJlbnQoJy5tYXRlcmlhbC1wbGFjZWhvbGRlcicpLm9mZnNldCgpLnRvcCAtIG5ld0hlaWdodC8gMlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgZHVyYXRpb246IGluRHVyYXRpb24sXG4gICAgICAgICAgICAgIHF1ZXVlOiBmYWxzZSxcbiAgICAgICAgICAgICAgZWFzaW5nOiAnZWFzZU91dFF1YWQnLFxuICAgICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24oKXtkb25lQW5pbWF0aW5nID0gdHJ1ZTt9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICApOyAvLyBFbmQgVmVsb2NpdHlcbiAgICAgICAgfVxuXG4gICAgfSk7IC8vIEVuZCBvcmlnaW4gb24gY2xpY2tcblxuXG4gICAgICAvLyBSZXR1cm4gb24gc2Nyb2xsXG4gICAgICAkKHdpbmRvdykuc2Nyb2xsKGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAob3ZlcmxheUFjdGl2ZSkge1xuICAgICAgICAgIHJldHVyblRvT3JpZ2luYWwoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIFJldHVybiBvbiBFU0NcbiAgICAgICQoZG9jdW1lbnQpLmtleXVwKGZ1bmN0aW9uKGUpIHtcblxuICAgICAgICBpZiAoZS5rZXlDb2RlID09PSAyNyAmJiBkb25lQW5pbWF0aW5nID09PSB0cnVlKSB7ICAgLy8gRVNDIGtleVxuICAgICAgICAgIGlmIChvdmVybGF5QWN0aXZlKSB7XG4gICAgICAgICAgICByZXR1cm5Ub09yaWdpbmFsKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcblxuXG4gICAgICAvLyBUaGlzIGZ1bmN0aW9uIHJldHVybnMgdGhlIG1vZGFsZWQgaW1hZ2UgdG8gdGhlIG9yaWdpbmFsIHNwb3RcbiAgICAgIGZ1bmN0aW9uIHJldHVyblRvT3JpZ2luYWwoKSB7XG5cbiAgICAgICAgICBkb25lQW5pbWF0aW5nID0gZmFsc2U7XG5cbiAgICAgICAgICB2YXIgcGxhY2Vob2xkZXIgPSBvcmlnaW4ucGFyZW50KCcubWF0ZXJpYWwtcGxhY2Vob2xkZXInKTtcbiAgICAgICAgICB2YXIgd2luZG93V2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgICAgICB2YXIgd2luZG93SGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xuICAgICAgICAgIHZhciBvcmlnaW5hbFdpZHRoID0gb3JpZ2luLmRhdGEoJ3dpZHRoJyk7XG4gICAgICAgICAgdmFyIG9yaWdpbmFsSGVpZ2h0ID0gb3JpZ2luLmRhdGEoJ2hlaWdodCcpO1xuXG4gICAgICAgICAgb3JpZ2luLnZlbG9jaXR5KFwic3RvcFwiLCB0cnVlKTtcbiAgICAgICAgICAkKCcjbWF0ZXJpYWxib3gtb3ZlcmxheScpLnZlbG9jaXR5KFwic3RvcFwiLCB0cnVlKTtcbiAgICAgICAgICAkKCcubWF0ZXJpYWxib3gtY2FwdGlvbicpLnZlbG9jaXR5KFwic3RvcFwiLCB0cnVlKTtcblxuXG4gICAgICAgICAgJCgnI21hdGVyaWFsYm94LW92ZXJsYXknKS52ZWxvY2l0eSh7b3BhY2l0eTogMH0sIHtcbiAgICAgICAgICAgIGR1cmF0aW9uOiBvdXREdXJhdGlvbiwgLy8gRGVsYXkgcHJldmVudHMgYW5pbWF0aW9uIG92ZXJsYXBwaW5nXG4gICAgICAgICAgICBxdWV1ZTogZmFsc2UsIGVhc2luZzogJ2Vhc2VPdXRRdWFkJyxcbiAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAvLyBSZW1vdmUgT3ZlcmxheVxuICAgICAgICAgICAgICBvdmVybGF5QWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICAgICQodGhpcykucmVtb3ZlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICAvLyBSZXNpemUgSW1hZ2VcbiAgICAgICAgICBvcmlnaW4udmVsb2NpdHkoXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHdpZHRoOiBvcmlnaW5hbFdpZHRoLFxuICAgICAgICAgICAgICBoZWlnaHQ6IG9yaWdpbmFsSGVpZ2h0LFxuICAgICAgICAgICAgICBsZWZ0OiAwLFxuICAgICAgICAgICAgICB0b3A6IDBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGR1cmF0aW9uOiBvdXREdXJhdGlvbixcbiAgICAgICAgICAgICAgcXVldWU6IGZhbHNlLCBlYXNpbmc6ICdlYXNlT3V0UXVhZCdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICApO1xuXG4gICAgICAgICAgLy8gUmVtb3ZlIENhcHRpb24gKyByZXNldCBjc3Mgc2V0dGluZ3Mgb24gaW1hZ2VcbiAgICAgICAgICAkKCcubWF0ZXJpYWxib3gtY2FwdGlvbicpLnZlbG9jaXR5KHtvcGFjaXR5OiAwfSwge1xuICAgICAgICAgICAgZHVyYXRpb246IG91dER1cmF0aW9uLCAvLyBEZWxheSBwcmV2ZW50cyBhbmltYXRpb24gb3ZlcmxhcHBpbmdcbiAgICAgICAgICAgIHF1ZXVlOiBmYWxzZSwgZWFzaW5nOiAnZWFzZU91dFF1YWQnLFxuICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyLmNzcyh7XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAnJyxcbiAgICAgICAgICAgICAgICB3aWR0aDogJycsXG4gICAgICAgICAgICAgICAgcG9zaXRpb246ICcnLFxuICAgICAgICAgICAgICAgIHRvcDogJycsXG4gICAgICAgICAgICAgICAgbGVmdDogJydcbiAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgb3JpZ2luLmNzcyh7XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAnJyxcbiAgICAgICAgICAgICAgICB0b3A6ICcnLFxuICAgICAgICAgICAgICAgIGxlZnQ6ICcnLFxuICAgICAgICAgICAgICAgIHdpZHRoOiAnJyxcbiAgICAgICAgICAgICAgICAnbWF4LXdpZHRoJzogJycsXG4gICAgICAgICAgICAgICAgcG9zaXRpb246ICcnLFxuICAgICAgICAgICAgICAgICd6LWluZGV4JzogJydcbiAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgLy8gUmVtb3ZlIGNsYXNzXG4gICAgICAgICAgICAgIG9yaWdpbi5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgIGRvbmVBbmltYXRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZSgpO1xuXG4gICAgICAgICAgICAgIC8vIFJlbW92ZSBvdmVyZmxvdyBvdmVycmlkZXMgb24gYW5jZXN0b3JzXG4gICAgICAgICAgICAgIGlmIChhbmNlc3RvcnNDaGFuZ2VkKSB7XG4gICAgICAgICAgICAgICAgYW5jZXN0b3JzQ2hhbmdlZC5jc3MoJ292ZXJmbG93JywgJycpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgfVxuICAgICAgICB9KTtcbn07XG5cbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCl7XG4gICQoJy5tYXRlcmlhbGJveGVkJykubWF0ZXJpYWxib3goKTtcbn0pO1xuXG59KCBqUXVlcnkgKSk7XG47KGZ1bmN0aW9uICgkKSB7XG5cbiAgICAkLmZuLnBhcmFsbGF4ID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHdpbmRvd193aWR0aCA9ICQod2luZG93KS53aWR0aCgpO1xuICAgICAgLy8gUGFyYWxsYXggU2NyaXB0c1xuICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihpKSB7XG4gICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XG4gICAgICAgICR0aGlzLmFkZENsYXNzKCdwYXJhbGxheCcpO1xuXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVBhcmFsbGF4KGluaXRpYWwpIHtcbiAgICAgICAgICB2YXIgY29udGFpbmVyX2hlaWdodDtcbiAgICAgICAgICBpZiAod2luZG93X3dpZHRoIDwgNjAxKSB7XG4gICAgICAgICAgICBjb250YWluZXJfaGVpZ2h0ID0gKCR0aGlzLmhlaWdodCgpID4gMCkgPyAkdGhpcy5oZWlnaHQoKSA6ICR0aGlzLmNoaWxkcmVuKFwiaW1nXCIpLmhlaWdodCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnRhaW5lcl9oZWlnaHQgPSAoJHRoaXMuaGVpZ2h0KCkgPiAwKSA/ICR0aGlzLmhlaWdodCgpIDogNTAwO1xuICAgICAgICAgIH1cbiAgICAgICAgICB2YXIgJGltZyA9ICR0aGlzLmNoaWxkcmVuKFwiaW1nXCIpLmZpcnN0KCk7XG4gICAgICAgICAgdmFyIGltZ19oZWlnaHQgPSAkaW1nLmhlaWdodCgpO1xuICAgICAgICAgIHZhciBwYXJhbGxheF9kaXN0ID0gaW1nX2hlaWdodCAtIGNvbnRhaW5lcl9oZWlnaHQ7XG4gICAgICAgICAgdmFyIGJvdHRvbSA9ICR0aGlzLm9mZnNldCgpLnRvcCArIGNvbnRhaW5lcl9oZWlnaHQ7XG4gICAgICAgICAgdmFyIHRvcCA9ICR0aGlzLm9mZnNldCgpLnRvcDtcbiAgICAgICAgICB2YXIgc2Nyb2xsVG9wID0gJCh3aW5kb3cpLnNjcm9sbFRvcCgpO1xuICAgICAgICAgIHZhciB3aW5kb3dIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgICAgICAgdmFyIHdpbmRvd0JvdHRvbSA9IHNjcm9sbFRvcCArIHdpbmRvd0hlaWdodDtcbiAgICAgICAgICB2YXIgcGVyY2VudFNjcm9sbGVkID0gKHdpbmRvd0JvdHRvbSAtIHRvcCkgLyAoY29udGFpbmVyX2hlaWdodCArIHdpbmRvd0hlaWdodCk7XG4gICAgICAgICAgdmFyIHBhcmFsbGF4ID0gTWF0aC5yb3VuZCgocGFyYWxsYXhfZGlzdCAqIHBlcmNlbnRTY3JvbGxlZCkpO1xuXG4gICAgICAgICAgaWYgKGluaXRpYWwpIHtcbiAgICAgICAgICAgICRpbWcuY3NzKCdkaXNwbGF5JywgJ2Jsb2NrJyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICgoYm90dG9tID4gc2Nyb2xsVG9wKSAmJiAodG9wIDwgKHNjcm9sbFRvcCArIHdpbmRvd0hlaWdodCkpKSB7XG4gICAgICAgICAgICAkaW1nLmNzcygndHJhbnNmb3JtJywgXCJ0cmFuc2xhdGUzRCgtNTAlLFwiICsgcGFyYWxsYXggKyBcInB4LCAwKVwiKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFdhaXQgZm9yIGltYWdlIGxvYWRcbiAgICAgICAgJHRoaXMuY2hpbGRyZW4oXCJpbWdcIikub25lKFwibG9hZFwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICB1cGRhdGVQYXJhbGxheCh0cnVlKTtcbiAgICAgICAgfSkuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZiAodGhpcy5jb21wbGV0ZSkgJCh0aGlzKS50cmlnZ2VyKFwibG9hZFwiKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbigpIHtcbiAgICAgICAgICB3aW5kb3dfd2lkdGggPSAkKHdpbmRvdykud2lkdGgoKTtcbiAgICAgICAgICB1cGRhdGVQYXJhbGxheChmYWxzZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQod2luZG93KS5yZXNpemUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgd2luZG93X3dpZHRoID0gJCh3aW5kb3cpLndpZHRoKCk7XG4gICAgICAgICAgdXBkYXRlUGFyYWxsYXgoZmFsc2UpO1xuICAgICAgICB9KTtcblxuICAgICAgfSk7XG5cbiAgICB9O1xufSggalF1ZXJ5ICkpO1xuOyhmdW5jdGlvbiAoJCkge1xuXG4gIHZhciBtZXRob2RzID0ge1xuICAgIGluaXQgOiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICB2YXIgZGVmYXVsdHMgPSB7XG4gICAgICAgIG9uU2hvdzogbnVsbFxuICAgICAgfTtcbiAgICAgIG9wdGlvbnMgPSAkLmV4dGVuZChkZWZhdWx0cywgb3B0aW9ucyk7XG5cbiAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG5cbiAgICAgIC8vIEZvciBlYWNoIHNldCBvZiB0YWJzLCB3ZSB3YW50IHRvIGtlZXAgdHJhY2sgb2ZcbiAgICAgIC8vIHdoaWNoIHRhYiBpcyBhY3RpdmUgYW5kIGl0cyBhc3NvY2lhdGVkIGNvbnRlbnRcbiAgICAgIHZhciAkdGhpcyA9ICQodGhpcyksXG4gICAgICAgICAgd2luZG93X3dpZHRoID0gJCh3aW5kb3cpLndpZHRoKCk7XG5cbiAgICAgIHZhciAkYWN0aXZlLCAkY29udGVudCwgJGxpbmtzID0gJHRoaXMuZmluZCgnbGkudGFiIGEnKSxcbiAgICAgICAgICAkdGFic193aWR0aCA9ICR0aGlzLndpZHRoKCksXG4gICAgICAgICAgJHRhYl93aWR0aCA9IE1hdGgubWF4KCR0YWJzX3dpZHRoLCAkdGhpc1swXS5zY3JvbGxXaWR0aCkgLyAkbGlua3MubGVuZ3RoLFxuICAgICAgICAgICRpbmRleCA9IDA7XG5cbiAgICAgIC8vIEZpbmRzIHJpZ2h0IGF0dHJpYnV0ZSBmb3IgaW5kaWNhdG9yIGJhc2VkIG9uIGFjdGl2ZSB0YWIuXG4gICAgICAvLyBlbDogalF1ZXJ5IE9iamVjdFxuICAgICAgdmFyIGNhbGNSaWdodFBvcyA9IGZ1bmN0aW9uKGVsKSB7XG4gICAgICAgIHJldHVybiAkdGFic193aWR0aCAtIGVsLnBvc2l0aW9uKCkubGVmdCAtIGVsLm91dGVyV2lkdGgoKSAtICR0aGlzLnNjcm9sbExlZnQoKTtcbiAgICAgIH07XG5cbiAgICAgIC8vIEZpbmRzIGxlZnQgYXR0cmlidXRlIGZvciBpbmRpY2F0b3IgYmFzZWQgb24gYWN0aXZlIHRhYi5cbiAgICAgIC8vIGVsOiBqUXVlcnkgT2JqZWN0XG4gICAgICB2YXIgY2FsY0xlZnRQb3MgPSBmdW5jdGlvbihlbCkge1xuICAgICAgICByZXR1cm4gZWwucG9zaXRpb24oKS5sZWZ0ICsgJHRoaXMuc2Nyb2xsTGVmdCgpO1xuICAgICAgfTtcblxuICAgICAgLy8gSWYgdGhlIGxvY2F0aW9uLmhhc2ggbWF0Y2hlcyBvbmUgb2YgdGhlIGxpbmtzLCB1c2UgdGhhdCBhcyB0aGUgYWN0aXZlIHRhYi5cbiAgICAgICRhY3RpdmUgPSAkKCRsaW5rcy5maWx0ZXIoJ1tocmVmPVwiJytsb2NhdGlvbi5oYXNoKydcIl0nKSk7XG5cbiAgICAgIC8vIElmIG5vIG1hdGNoIGlzIGZvdW5kLCB1c2UgdGhlIGZpcnN0IGxpbmsgb3IgYW55IHdpdGggY2xhc3MgJ2FjdGl2ZScgYXMgdGhlIGluaXRpYWwgYWN0aXZlIHRhYi5cbiAgICAgIGlmICgkYWN0aXZlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAkYWN0aXZlID0gJCh0aGlzKS5maW5kKCdsaS50YWIgYS5hY3RpdmUnKS5maXJzdCgpO1xuICAgICAgfVxuICAgICAgaWYgKCRhY3RpdmUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICRhY3RpdmUgPSAkKHRoaXMpLmZpbmQoJ2xpLnRhYiBhJykuZmlyc3QoKTtcbiAgICAgIH1cblxuICAgICAgJGFjdGl2ZS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAkaW5kZXggPSAkbGlua3MuaW5kZXgoJGFjdGl2ZSk7XG4gICAgICBpZiAoJGluZGV4IDwgMCkge1xuICAgICAgICAkaW5kZXggPSAwO1xuICAgICAgfVxuXG4gICAgICBpZiAoJGFjdGl2ZVswXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICRjb250ZW50ID0gJCgkYWN0aXZlWzBdLmhhc2gpO1xuICAgICAgfVxuXG4gICAgICAvLyBhcHBlbmQgaW5kaWNhdG9yIHRoZW4gc2V0IGluZGljYXRvciB3aWR0aCB0byB0YWIgd2lkdGhcbiAgICAgICR0aGlzLmFwcGVuZCgnPGRpdiBjbGFzcz1cImluZGljYXRvclwiPjwvZGl2PicpO1xuICAgICAgdmFyICRpbmRpY2F0b3IgPSAkdGhpcy5maW5kKCcuaW5kaWNhdG9yJyk7XG4gICAgICBpZiAoJHRoaXMuaXMoXCI6dmlzaWJsZVwiKSkge1xuICAgICAgICAvLyAkaW5kaWNhdG9yLmNzcyh7XCJyaWdodFwiOiAkdGFic193aWR0aCAtICgoJGluZGV4ICsgMSkgKiAkdGFiX3dpZHRoKX0pO1xuICAgICAgICAvLyAkaW5kaWNhdG9yLmNzcyh7XCJsZWZ0XCI6ICRpbmRleCAqICR0YWJfd2lkdGh9KTtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAkaW5kaWNhdG9yLmNzcyh7XCJyaWdodFwiOiBjYWxjUmlnaHRQb3MoJGFjdGl2ZSkgfSk7XG4gICAgICAgICAgJGluZGljYXRvci5jc3Moe1wibGVmdFwiOiBjYWxjTGVmdFBvcygkYWN0aXZlKSB9KTtcbiAgICAgICAgfSwgMCk7XG4gICAgICB9XG4gICAgICAkKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJHRhYnNfd2lkdGggPSAkdGhpcy53aWR0aCgpO1xuICAgICAgICAkdGFiX3dpZHRoID0gTWF0aC5tYXgoJHRhYnNfd2lkdGgsICR0aGlzWzBdLnNjcm9sbFdpZHRoKSAvICRsaW5rcy5sZW5ndGg7XG4gICAgICAgIGlmICgkaW5kZXggPCAwKSB7XG4gICAgICAgICAgJGluZGV4ID0gMDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoJHRhYl93aWR0aCAhPT0gMCAmJiAkdGFic193aWR0aCAhPT0gMCkge1xuICAgICAgICAgICRpbmRpY2F0b3IuY3NzKHtcInJpZ2h0XCI6IGNhbGNSaWdodFBvcygkYWN0aXZlKSB9KTtcbiAgICAgICAgICAkaW5kaWNhdG9yLmNzcyh7XCJsZWZ0XCI6IGNhbGNMZWZ0UG9zKCRhY3RpdmUpIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gSGlkZSB0aGUgcmVtYWluaW5nIGNvbnRlbnRcbiAgICAgICRsaW5rcy5ub3QoJGFjdGl2ZSkuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoTWF0ZXJpYWxpemUuZXNjYXBlSGFzaCh0aGlzLmhhc2gpKS5oaWRlKCk7XG4gICAgICB9KTtcblxuXG4gICAgICAvLyBCaW5kIHRoZSBjbGljayBldmVudCBoYW5kbGVyXG4gICAgICAkdGhpcy5vbignY2xpY2snLCAnYScsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKCQodGhpcykucGFyZW50KCkuaGFzQ2xhc3MoJ2Rpc2FibGVkJykpIHtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQWN0IGFzIHJlZ3VsYXIgbGluayBpZiB0YXJnZXQgYXR0cmlidXRlIGlzIHNwZWNpZmllZC5cbiAgICAgICAgaWYgKCEhJCh0aGlzKS5hdHRyKFwidGFyZ2V0XCIpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgJHRhYnNfd2lkdGggPSAkdGhpcy53aWR0aCgpO1xuICAgICAgICAkdGFiX3dpZHRoID0gTWF0aC5tYXgoJHRhYnNfd2lkdGgsICR0aGlzWzBdLnNjcm9sbFdpZHRoKSAvICRsaW5rcy5sZW5ndGg7XG5cbiAgICAgICAgLy8gTWFrZSB0aGUgb2xkIHRhYiBpbmFjdGl2ZS5cbiAgICAgICAgJGFjdGl2ZS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgIGlmICgkY29udGVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgJGNvbnRlbnQuaGlkZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVXBkYXRlIHRoZSB2YXJpYWJsZXMgd2l0aCB0aGUgbmV3IGxpbmsgYW5kIGNvbnRlbnRcbiAgICAgICAgJGFjdGl2ZSA9ICQodGhpcyk7XG4gICAgICAgICRjb250ZW50ID0gJChNYXRlcmlhbGl6ZS5lc2NhcGVIYXNoKHRoaXMuaGFzaCkpO1xuICAgICAgICAkbGlua3MgPSAkdGhpcy5maW5kKCdsaS50YWIgYScpO1xuICAgICAgICB2YXIgYWN0aXZlUmVjdCA9ICRhY3RpdmUucG9zaXRpb24oKTtcblxuICAgICAgICAvLyBNYWtlIHRoZSB0YWIgYWN0aXZlLlxuICAgICAgICAkYWN0aXZlLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgdmFyICRwcmV2X2luZGV4ID0gJGluZGV4O1xuICAgICAgICAkaW5kZXggPSAkbGlua3MuaW5kZXgoJCh0aGlzKSk7XG4gICAgICAgIGlmICgkaW5kZXggPCAwKSB7XG4gICAgICAgICAgJGluZGV4ID0gMDtcbiAgICAgICAgfVxuICAgICAgICAvLyBDaGFuZ2UgdXJsIHRvIGN1cnJlbnQgdGFiXG4gICAgICAgIC8vIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gJGFjdGl2ZS5hdHRyKCdocmVmJyk7XG5cbiAgICAgICAgaWYgKCRjb250ZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAkY29udGVudC5zaG93KCk7XG4gICAgICAgICAgaWYgKHR5cGVvZihvcHRpb25zLm9uU2hvdykgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgb3B0aW9ucy5vblNob3cuY2FsbCh0aGlzLCAkY29udGVudCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gVXBkYXRlIGluZGljYXRvclxuXG4gICAgICAgIGlmICgoJGluZGV4IC0gJHByZXZfaW5kZXgpID49IDApIHtcbiAgICAgICAgICAkaW5kaWNhdG9yLnZlbG9jaXR5KHtcInJpZ2h0XCI6IGNhbGNSaWdodFBvcygkYWN0aXZlKSB9LCB7IGR1cmF0aW9uOiAzMDAsIHF1ZXVlOiBmYWxzZSwgZWFzaW5nOiAnZWFzZU91dFF1YWQnfSk7XG4gICAgICAgICAgJGluZGljYXRvci52ZWxvY2l0eSh7XCJsZWZ0XCI6IGNhbGNMZWZ0UG9zKCRhY3RpdmUpIH0sIHtkdXJhdGlvbjogMzAwLCBxdWV1ZTogZmFsc2UsIGVhc2luZzogJ2Vhc2VPdXRRdWFkJywgZGVsYXk6IDkwfSk7XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkaW5kaWNhdG9yLnZlbG9jaXR5KHtcImxlZnRcIjogY2FsY0xlZnRQb3MoJGFjdGl2ZSkgfSwgeyBkdXJhdGlvbjogMzAwLCBxdWV1ZTogZmFsc2UsIGVhc2luZzogJ2Vhc2VPdXRRdWFkJ30pO1xuICAgICAgICAgICRpbmRpY2F0b3IudmVsb2NpdHkoe1wicmlnaHRcIjogY2FsY1JpZ2h0UG9zKCRhY3RpdmUpIH0sIHtkdXJhdGlvbjogMzAwLCBxdWV1ZTogZmFsc2UsIGVhc2luZzogJ2Vhc2VPdXRRdWFkJywgZGVsYXk6IDkwfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBQcmV2ZW50IHRoZSBhbmNob3IncyBkZWZhdWx0IGNsaWNrIGFjdGlvblxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIH0sXG4gICAgc2VsZWN0X3RhYiA6IGZ1bmN0aW9uKCBpZCApIHtcbiAgICAgIHRoaXMuZmluZCgnYVtocmVmPVwiIycgKyBpZCArICdcIl0nKS50cmlnZ2VyKCdjbGljaycpO1xuICAgIH1cbiAgfTtcblxuICAkLmZuLnRhYnMgPSBmdW5jdGlvbihtZXRob2RPck9wdGlvbnMpIHtcbiAgICBpZiAoIG1ldGhvZHNbbWV0aG9kT3JPcHRpb25zXSApIHtcbiAgICAgIHJldHVybiBtZXRob2RzWyBtZXRob2RPck9wdGlvbnMgXS5hcHBseSggdGhpcywgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoIGFyZ3VtZW50cywgMSApKTtcbiAgICB9IGVsc2UgaWYgKCB0eXBlb2YgbWV0aG9kT3JPcHRpb25zID09PSAnb2JqZWN0JyB8fCAhIG1ldGhvZE9yT3B0aW9ucyApIHtcbiAgICAgIC8vIERlZmF1bHQgdG8gXCJpbml0XCJcbiAgICAgIHJldHVybiBtZXRob2RzLmluaXQuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuICAgIH0gZWxzZSB7XG4gICAgICAkLmVycm9yKCAnTWV0aG9kICcgKyAgbWV0aG9kT3JPcHRpb25zICsgJyBkb2VzIG5vdCBleGlzdCBvbiBqUXVlcnkudGFicycgKTtcbiAgICB9XG4gIH07XG5cbiAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXtcbiAgICAkKCd1bC50YWJzJykudGFicygpO1xuICB9KTtcbn0oIGpRdWVyeSApKTtcbjsoZnVuY3Rpb24gKCQpIHtcbiAgICAkLmZuLnRvb2x0aXAgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgdmFyIHRpbWVvdXQgPSBudWxsLFxuICAgICAgbWFyZ2luID0gNTtcblxuICAgICAgLy8gRGVmYXVsdHNcbiAgICAgIHZhciBkZWZhdWx0cyA9IHtcbiAgICAgICAgZGVsYXk6IDM1MCxcbiAgICAgICAgdG9vbHRpcDogJycsXG4gICAgICAgIHBvc2l0aW9uOiAnYm90dG9tJyxcbiAgICAgICAgaHRtbDogZmFsc2VcbiAgICAgIH07XG5cbiAgICAgIC8vIFJlbW92ZSB0b29sdGlwIGZyb20gdGhlIGFjdGl2YXRvclxuICAgICAgaWYgKG9wdGlvbnMgPT09IFwicmVtb3ZlXCIpIHtcbiAgICAgICAgdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICQoJyMnICsgJCh0aGlzKS5hdHRyKCdkYXRhLXRvb2x0aXAtaWQnKSkucmVtb3ZlKCk7XG4gICAgICAgICAgJCh0aGlzKS5vZmYoJ21vdXNlZW50ZXIudG9vbHRpcCBtb3VzZWxlYXZlLnRvb2x0aXAnKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgb3B0aW9ucyA9ICQuZXh0ZW5kKGRlZmF1bHRzLCBvcHRpb25zKTtcblxuICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHRvb2x0aXBJZCA9IE1hdGVyaWFsaXplLmd1aWQoKTtcbiAgICAgICAgdmFyIG9yaWdpbiA9ICQodGhpcyk7XG5cbiAgICAgICAgLy8gRGVzdHJveSBvbGQgdG9vbHRpcFxuICAgICAgICBpZiAob3JpZ2luLmF0dHIoJ2RhdGEtdG9vbHRpcC1pZCcpKSB7XG4gICAgICAgICAgJCgnIycgKyBvcmlnaW4uYXR0cignZGF0YS10b29sdGlwLWlkJykpLnJlbW92ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgb3JpZ2luLmF0dHIoJ2RhdGEtdG9vbHRpcC1pZCcsIHRvb2x0aXBJZCk7XG5cbiAgICAgICAgLy8gR2V0IGF0dHJpYnV0ZXMuXG4gICAgICAgIHZhciBhbGxvd0h0bWwsXG4gICAgICAgICAgICB0b29sdGlwRGVsYXksXG4gICAgICAgICAgICB0b29sdGlwUG9zaXRpb24sXG4gICAgICAgICAgICB0b29sdGlwVGV4dCxcbiAgICAgICAgICAgIHRvb2x0aXBFbCxcbiAgICAgICAgICAgIGJhY2tkcm9wO1xuICAgICAgICB2YXIgc2V0QXR0cmlidXRlcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGFsbG93SHRtbCA9IG9yaWdpbi5hdHRyKCdkYXRhLWh0bWwnKSA/IG9yaWdpbi5hdHRyKCdkYXRhLWh0bWwnKSA9PT0gJ3RydWUnIDogb3B0aW9ucy5odG1sO1xuICAgICAgICAgIHRvb2x0aXBEZWxheSA9IG9yaWdpbi5hdHRyKCdkYXRhLWRlbGF5Jyk7XG4gICAgICAgICAgdG9vbHRpcERlbGF5ID0gKHRvb2x0aXBEZWxheSA9PT0gdW5kZWZpbmVkIHx8IHRvb2x0aXBEZWxheSA9PT0gJycpID9cbiAgICAgICAgICAgICAgb3B0aW9ucy5kZWxheSA6IHRvb2x0aXBEZWxheTtcbiAgICAgICAgICB0b29sdGlwUG9zaXRpb24gPSBvcmlnaW4uYXR0cignZGF0YS1wb3NpdGlvbicpO1xuICAgICAgICAgIHRvb2x0aXBQb3NpdGlvbiA9ICh0b29sdGlwUG9zaXRpb24gPT09IHVuZGVmaW5lZCB8fCB0b29sdGlwUG9zaXRpb24gPT09ICcnKSA/XG4gICAgICAgICAgICAgIG9wdGlvbnMucG9zaXRpb24gOiB0b29sdGlwUG9zaXRpb247XG4gICAgICAgICAgdG9vbHRpcFRleHQgPSBvcmlnaW4uYXR0cignZGF0YS10b29sdGlwJyk7XG4gICAgICAgICAgdG9vbHRpcFRleHQgPSAodG9vbHRpcFRleHQgPT09IHVuZGVmaW5lZCB8fCB0b29sdGlwVGV4dCA9PT0gJycpID9cbiAgICAgICAgICAgICAgb3B0aW9ucy50b29sdGlwIDogdG9vbHRpcFRleHQ7XG4gICAgICAgIH07XG4gICAgICAgIHNldEF0dHJpYnV0ZXMoKTtcblxuICAgICAgICB2YXIgcmVuZGVyVG9vbHRpcEVsID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIHRvb2x0aXAgPSAkKCc8ZGl2IGNsYXNzPVwibWF0ZXJpYWwtdG9vbHRpcFwiPjwvZGl2PicpO1xuXG4gICAgICAgICAgLy8gQ3JlYXRlIFRleHQgc3BhblxuICAgICAgICAgIGlmIChhbGxvd0h0bWwpIHtcbiAgICAgICAgICAgIHRvb2x0aXBUZXh0ID0gJCgnPHNwYW4+PC9zcGFuPicpLmh0bWwodG9vbHRpcFRleHQpO1xuICAgICAgICAgIH0gZWxzZXtcbiAgICAgICAgICAgIHRvb2x0aXBUZXh0ID0gJCgnPHNwYW4+PC9zcGFuPicpLnRleHQodG9vbHRpcFRleHQpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIENyZWF0ZSB0b29sdGlwXG4gICAgICAgICAgdG9vbHRpcC5hcHBlbmQodG9vbHRpcFRleHQpXG4gICAgICAgICAgICAuYXBwZW5kVG8oJCgnYm9keScpKVxuICAgICAgICAgICAgLmF0dHIoJ2lkJywgdG9vbHRpcElkKTtcblxuICAgICAgICAgIC8vIENyZWF0ZSBiYWNrZHJvcFxuICAgICAgICAgIGJhY2tkcm9wID0gJCgnPGRpdiBjbGFzcz1cImJhY2tkcm9wXCI+PC9kaXY+Jyk7XG4gICAgICAgICAgYmFja2Ryb3AuYXBwZW5kVG8odG9vbHRpcCk7XG4gICAgICAgICAgcmV0dXJuIHRvb2x0aXA7XG4gICAgICAgIH07XG4gICAgICAgIHRvb2x0aXBFbCA9IHJlbmRlclRvb2x0aXBFbCgpO1xuXG4gICAgICAgIC8vIERlc3Ryb3kgcHJldmlvdXNseSBiaW5kZWQgZXZlbnRzXG4gICAgICAgIG9yaWdpbi5vZmYoJ21vdXNlZW50ZXIudG9vbHRpcCBtb3VzZWxlYXZlLnRvb2x0aXAnKTtcbiAgICAgICAgLy8gTW91c2UgSW5cbiAgICAgICAgdmFyIHN0YXJ0ZWQgPSBmYWxzZSwgdGltZW91dFJlZjtcbiAgICAgICAgb3JpZ2luLm9uKHsnbW91c2VlbnRlci50b29sdGlwJzogZnVuY3Rpb24oZSkge1xuICAgICAgICAgIHZhciBzaG93VG9vbHRpcCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2V0QXR0cmlidXRlcygpO1xuICAgICAgICAgICAgc3RhcnRlZCA9IHRydWU7XG4gICAgICAgICAgICB0b29sdGlwRWwudmVsb2NpdHkoJ3N0b3AnKTtcbiAgICAgICAgICAgIGJhY2tkcm9wLnZlbG9jaXR5KCdzdG9wJyk7XG4gICAgICAgICAgICB0b29sdGlwRWwuY3NzKHsgZGlzcGxheTogJ2Jsb2NrJywgbGVmdDogJzBweCcsIHRvcDogJzBweCcgfSk7XG5cbiAgICAgICAgICAgIC8vIFRvb2x0aXAgcG9zaXRpb25pbmdcbiAgICAgICAgICAgIHZhciBvcmlnaW5XaWR0aCA9IG9yaWdpbi5vdXRlcldpZHRoKCk7XG4gICAgICAgICAgICB2YXIgb3JpZ2luSGVpZ2h0ID0gb3JpZ2luLm91dGVySGVpZ2h0KCk7XG5cbiAgICAgICAgICAgIHZhciB0b29sdGlwSGVpZ2h0ID0gdG9vbHRpcEVsLm91dGVySGVpZ2h0KCk7XG4gICAgICAgICAgICB2YXIgdG9vbHRpcFdpZHRoID0gdG9vbHRpcEVsLm91dGVyV2lkdGgoKTtcbiAgICAgICAgICAgIHZhciB0b29sdGlwVmVydGljYWxNb3ZlbWVudCA9ICcwcHgnO1xuICAgICAgICAgICAgdmFyIHRvb2x0aXBIb3Jpem9udGFsTW92ZW1lbnQgPSAnMHB4JztcbiAgICAgICAgICAgIHZhciBzY2FsZVhGYWN0b3IgPSA4O1xuICAgICAgICAgICAgdmFyIHNjYWxlWUZhY3RvciA9IDg7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0VG9wLCB0YXJnZXRMZWZ0LCBuZXdDb29yZGluYXRlcztcblxuICAgICAgICAgICAgaWYgKHRvb2x0aXBQb3NpdGlvbiA9PT0gXCJ0b3BcIikge1xuICAgICAgICAgICAgICAvLyBUb3AgUG9zaXRpb25cbiAgICAgICAgICAgICAgdGFyZ2V0VG9wID0gb3JpZ2luLm9mZnNldCgpLnRvcCAtIHRvb2x0aXBIZWlnaHQgLSBtYXJnaW47XG4gICAgICAgICAgICAgIHRhcmdldExlZnQgPSBvcmlnaW4ub2Zmc2V0KCkubGVmdCArIG9yaWdpbldpZHRoLzIgLSB0b29sdGlwV2lkdGgvMjtcbiAgICAgICAgICAgICAgbmV3Q29vcmRpbmF0ZXMgPSByZXBvc2l0aW9uV2l0aGluU2NyZWVuKHRhcmdldExlZnQsIHRhcmdldFRvcCwgdG9vbHRpcFdpZHRoLCB0b29sdGlwSGVpZ2h0KTtcblxuICAgICAgICAgICAgICB0b29sdGlwVmVydGljYWxNb3ZlbWVudCA9ICctMTBweCc7XG4gICAgICAgICAgICAgIGJhY2tkcm9wLmNzcyh7XG4gICAgICAgICAgICAgICAgYm90dG9tOiAwLFxuICAgICAgICAgICAgICAgIGxlZnQ6IDAsXG4gICAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiAnMTRweCAxNHB4IDAgMCcsXG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtT3JpZ2luOiAnNTAlIDEwMCUnLFxuICAgICAgICAgICAgICAgIG1hcmdpblRvcDogdG9vbHRpcEhlaWdodCxcbiAgICAgICAgICAgICAgICBtYXJnaW5MZWZ0OiAodG9vbHRpcFdpZHRoLzIpIC0gKGJhY2tkcm9wLndpZHRoKCkvMilcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBMZWZ0IFBvc2l0aW9uXG4gICAgICAgICAgICBlbHNlIGlmICh0b29sdGlwUG9zaXRpb24gPT09IFwibGVmdFwiKSB7XG4gICAgICAgICAgICAgIHRhcmdldFRvcCA9IG9yaWdpbi5vZmZzZXQoKS50b3AgKyBvcmlnaW5IZWlnaHQvMiAtIHRvb2x0aXBIZWlnaHQvMjtcbiAgICAgICAgICAgICAgdGFyZ2V0TGVmdCA9ICBvcmlnaW4ub2Zmc2V0KCkubGVmdCAtIHRvb2x0aXBXaWR0aCAtIG1hcmdpbjtcbiAgICAgICAgICAgICAgbmV3Q29vcmRpbmF0ZXMgPSByZXBvc2l0aW9uV2l0aGluU2NyZWVuKHRhcmdldExlZnQsIHRhcmdldFRvcCwgdG9vbHRpcFdpZHRoLCB0b29sdGlwSGVpZ2h0KTtcblxuICAgICAgICAgICAgICB0b29sdGlwSG9yaXpvbnRhbE1vdmVtZW50ID0gJy0xMHB4JztcbiAgICAgICAgICAgICAgYmFja2Ryb3AuY3NzKHtcbiAgICAgICAgICAgICAgICB0b3A6ICctN3B4JyxcbiAgICAgICAgICAgICAgICByaWdodDogMCxcbiAgICAgICAgICAgICAgICB3aWR0aDogJzE0cHgnLFxuICAgICAgICAgICAgICAgIGhlaWdodDogJzE0cHgnLFxuICAgICAgICAgICAgICAgIGJvcmRlclJhZGl1czogJzE0cHggMCAwIDE0cHgnLFxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybU9yaWdpbjogJzk1JSA1MCUnLFxuICAgICAgICAgICAgICAgIG1hcmdpblRvcDogdG9vbHRpcEhlaWdodC8yLFxuICAgICAgICAgICAgICAgIG1hcmdpbkxlZnQ6IHRvb2x0aXBXaWR0aFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFJpZ2h0IFBvc2l0aW9uXG4gICAgICAgICAgICBlbHNlIGlmICh0b29sdGlwUG9zaXRpb24gPT09IFwicmlnaHRcIikge1xuICAgICAgICAgICAgICB0YXJnZXRUb3AgPSBvcmlnaW4ub2Zmc2V0KCkudG9wICsgb3JpZ2luSGVpZ2h0LzIgLSB0b29sdGlwSGVpZ2h0LzI7XG4gICAgICAgICAgICAgIHRhcmdldExlZnQgPSBvcmlnaW4ub2Zmc2V0KCkubGVmdCArIG9yaWdpbldpZHRoICsgbWFyZ2luO1xuICAgICAgICAgICAgICBuZXdDb29yZGluYXRlcyA9IHJlcG9zaXRpb25XaXRoaW5TY3JlZW4odGFyZ2V0TGVmdCwgdGFyZ2V0VG9wLCB0b29sdGlwV2lkdGgsIHRvb2x0aXBIZWlnaHQpO1xuXG4gICAgICAgICAgICAgIHRvb2x0aXBIb3Jpem9udGFsTW92ZW1lbnQgPSAnKzEwcHgnO1xuICAgICAgICAgICAgICBiYWNrZHJvcC5jc3Moe1xuICAgICAgICAgICAgICAgIHRvcDogJy03cHgnLFxuICAgICAgICAgICAgICAgIGxlZnQ6IDAsXG4gICAgICAgICAgICAgICAgd2lkdGg6ICcxNHB4JyxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6ICcxNHB4JyxcbiAgICAgICAgICAgICAgICBib3JkZXJSYWRpdXM6ICcwIDE0cHggMTRweCAwJyxcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm1PcmlnaW46ICc1JSA1MCUnLFxuICAgICAgICAgICAgICAgIG1hcmdpblRvcDogdG9vbHRpcEhlaWdodC8yLFxuICAgICAgICAgICAgICAgIG1hcmdpbkxlZnQ6ICcwcHgnXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIC8vIEJvdHRvbSBQb3NpdGlvblxuICAgICAgICAgICAgICB0YXJnZXRUb3AgPSBvcmlnaW4ub2Zmc2V0KCkudG9wICsgb3JpZ2luLm91dGVySGVpZ2h0KCkgKyBtYXJnaW47XG4gICAgICAgICAgICAgIHRhcmdldExlZnQgPSBvcmlnaW4ub2Zmc2V0KCkubGVmdCArIG9yaWdpbldpZHRoLzIgLSB0b29sdGlwV2lkdGgvMjtcbiAgICAgICAgICAgICAgbmV3Q29vcmRpbmF0ZXMgPSByZXBvc2l0aW9uV2l0aGluU2NyZWVuKHRhcmdldExlZnQsIHRhcmdldFRvcCwgdG9vbHRpcFdpZHRoLCB0b29sdGlwSGVpZ2h0KTtcbiAgICAgICAgICAgICAgdG9vbHRpcFZlcnRpY2FsTW92ZW1lbnQgPSAnKzEwcHgnO1xuICAgICAgICAgICAgICBiYWNrZHJvcC5jc3Moe1xuICAgICAgICAgICAgICAgIHRvcDogMCxcbiAgICAgICAgICAgICAgICBsZWZ0OiAwLFxuICAgICAgICAgICAgICAgIG1hcmdpbkxlZnQ6ICh0b29sdGlwV2lkdGgvMikgLSAoYmFja2Ryb3Aud2lkdGgoKS8yKVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gU2V0IHRvb3B0aXAgY3NzIHBsYWNlbWVudFxuICAgICAgICAgICAgdG9vbHRpcEVsLmNzcyh7XG4gICAgICAgICAgICAgIHRvcDogbmV3Q29vcmRpbmF0ZXMueSxcbiAgICAgICAgICAgICAgbGVmdDogbmV3Q29vcmRpbmF0ZXMueFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIENhbGN1bGF0ZSBTY2FsZSB0byBmaWxsXG4gICAgICAgICAgICBzY2FsZVhGYWN0b3IgPSBNYXRoLlNRUlQyICogdG9vbHRpcFdpZHRoIC8gcGFyc2VJbnQoYmFja2Ryb3AuY3NzKCd3aWR0aCcpKTtcbiAgICAgICAgICAgIHNjYWxlWUZhY3RvciA9IE1hdGguU1FSVDIgKiB0b29sdGlwSGVpZ2h0IC8gcGFyc2VJbnQoYmFja2Ryb3AuY3NzKCdoZWlnaHQnKSk7XG5cbiAgICAgICAgICAgIHRvb2x0aXBFbC52ZWxvY2l0eSh7IG1hcmdpblRvcDogdG9vbHRpcFZlcnRpY2FsTW92ZW1lbnQsIG1hcmdpbkxlZnQ6IHRvb2x0aXBIb3Jpem9udGFsTW92ZW1lbnR9LCB7IGR1cmF0aW9uOiAzNTAsIHF1ZXVlOiBmYWxzZSB9KVxuICAgICAgICAgICAgICAudmVsb2NpdHkoe29wYWNpdHk6IDF9LCB7ZHVyYXRpb246IDMwMCwgZGVsYXk6IDUwLCBxdWV1ZTogZmFsc2V9KTtcbiAgICAgICAgICAgIGJhY2tkcm9wLmNzcyh7IGRpc3BsYXk6ICdibG9jaycgfSlcbiAgICAgICAgICAgICAgLnZlbG9jaXR5KHtvcGFjaXR5OjF9LHtkdXJhdGlvbjogNTUsIGRlbGF5OiAwLCBxdWV1ZTogZmFsc2V9KVxuICAgICAgICAgICAgICAudmVsb2NpdHkoe3NjYWxlWDogc2NhbGVYRmFjdG9yLCBzY2FsZVk6IHNjYWxlWUZhY3Rvcn0sIHtkdXJhdGlvbjogMzAwLCBkZWxheTogMCwgcXVldWU6IGZhbHNlLCBlYXNpbmc6ICdlYXNlSW5PdXRRdWFkJ30pO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICB0aW1lb3V0UmVmID0gc2V0VGltZW91dChzaG93VG9vbHRpcCwgdG9vbHRpcERlbGF5KTsgLy8gRW5kIEludGVydmFsXG5cbiAgICAgICAgLy8gTW91c2UgT3V0XG4gICAgICAgIH0sXG4gICAgICAgICdtb3VzZWxlYXZlLnRvb2x0aXAnOiBmdW5jdGlvbigpe1xuICAgICAgICAgIC8vIFJlc2V0IFN0YXRlXG4gICAgICAgICAgc3RhcnRlZCA9IGZhbHNlO1xuICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0UmVmKTtcblxuICAgICAgICAgIC8vIEFuaW1hdGUgYmFja1xuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoc3RhcnRlZCAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICB0b29sdGlwRWwudmVsb2NpdHkoe1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAsIG1hcmdpblRvcDogMCwgbWFyZ2luTGVmdDogMH0sIHsgZHVyYXRpb246IDIyNSwgcXVldWU6IGZhbHNlfSk7XG4gICAgICAgICAgICAgIGJhY2tkcm9wLnZlbG9jaXR5KHtvcGFjaXR5OiAwLCBzY2FsZVg6IDEsIHNjYWxlWTogMX0sIHtcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjoyMjUsXG4gICAgICAgICAgICAgICAgcXVldWU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgYmFja2Ryb3AuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTtcbiAgICAgICAgICAgICAgICAgIHRvb2x0aXBFbC5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgICAgICAgICAgICAgICAgc3RhcnRlZCA9IGZhbHNlO31cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSwyMjUpO1xuICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIHZhciByZXBvc2l0aW9uV2l0aGluU2NyZWVuID0gZnVuY3Rpb24oeCwgeSwgd2lkdGgsIGhlaWdodCkge1xuICAgIHZhciBuZXdYID0geDtcbiAgICB2YXIgbmV3WSA9IHk7XG5cbiAgICBpZiAobmV3WCA8IDApIHtcbiAgICAgIG5ld1ggPSA0O1xuICAgIH0gZWxzZSBpZiAobmV3WCArIHdpZHRoID4gd2luZG93LmlubmVyV2lkdGgpIHtcbiAgICAgIG5ld1ggLT0gbmV3WCArIHdpZHRoIC0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgfVxuXG4gICAgaWYgKG5ld1kgPCAwKSB7XG4gICAgICBuZXdZID0gNDtcbiAgICB9IGVsc2UgaWYgKG5ld1kgKyBoZWlnaHQgPiB3aW5kb3cuaW5uZXJIZWlnaHQgKyAkKHdpbmRvdykuc2Nyb2xsVG9wKSB7XG4gICAgICBuZXdZIC09IG5ld1kgKyBoZWlnaHQgLSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIHt4OiBuZXdYLCB5OiBuZXdZfTtcbiAgfTtcblxuICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe1xuICAgICAkKCcudG9vbHRpcHBlZCcpLnRvb2x0aXAoKTtcbiAgIH0pO1xufSggalF1ZXJ5ICkpO1xuOy8qIVxuICogV2F2ZXMgdjAuNi40XG4gKiBodHRwOi8vZmlhbi5teS5pZC9XYXZlc1xuICpcbiAqIENvcHlyaWdodCAyMDE0IEFsZmlhbmEgRS4gU2lidWVhIGFuZCBvdGhlciBjb250cmlidXRvcnNcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxuICogaHR0cHM6Ly9naXRodWIuY29tL2ZpYW5zL1dhdmVzL2Jsb2IvbWFzdGVyL0xJQ0VOU0VcbiAqL1xuXG47KGZ1bmN0aW9uKHdpbmRvdykge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBXYXZlcyA9IFdhdmVzIHx8IHt9O1xuICAgIHZhciAkJCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwuYmluZChkb2N1bWVudCk7XG5cbiAgICAvLyBGaW5kIGV4YWN0IHBvc2l0aW9uIG9mIGVsZW1lbnRcbiAgICBmdW5jdGlvbiBpc1dpbmRvdyhvYmopIHtcbiAgICAgICAgcmV0dXJuIG9iaiAhPT0gbnVsbCAmJiBvYmogPT09IG9iai53aW5kb3c7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0V2luZG93KGVsZW0pIHtcbiAgICAgICAgcmV0dXJuIGlzV2luZG93KGVsZW0pID8gZWxlbSA6IGVsZW0ubm9kZVR5cGUgPT09IDkgJiYgZWxlbS5kZWZhdWx0VmlldztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvZmZzZXQoZWxlbSkge1xuICAgICAgICB2YXIgZG9jRWxlbSwgd2luLFxuICAgICAgICAgICAgYm94ID0ge3RvcDogMCwgbGVmdDogMH0sXG4gICAgICAgICAgICBkb2MgPSBlbGVtICYmIGVsZW0ub3duZXJEb2N1bWVudDtcblxuICAgICAgICBkb2NFbGVtID0gZG9jLmRvY3VtZW50RWxlbWVudDtcblxuICAgICAgICBpZiAodHlwZW9mIGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0ICE9PSB0eXBlb2YgdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBib3ggPSBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICB9XG4gICAgICAgIHdpbiA9IGdldFdpbmRvdyhkb2MpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdG9wOiBib3gudG9wICsgd2luLnBhZ2VZT2Zmc2V0IC0gZG9jRWxlbS5jbGllbnRUb3AsXG4gICAgICAgICAgICBsZWZ0OiBib3gubGVmdCArIHdpbi5wYWdlWE9mZnNldCAtIGRvY0VsZW0uY2xpZW50TGVmdFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNvbnZlcnRTdHlsZShvYmopIHtcbiAgICAgICAgdmFyIHN0eWxlID0gJyc7XG5cbiAgICAgICAgZm9yICh2YXIgYSBpbiBvYmopIHtcbiAgICAgICAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkoYSkpIHtcbiAgICAgICAgICAgICAgICBzdHlsZSArPSAoYSArICc6JyArIG9ialthXSArICc7Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc3R5bGU7XG4gICAgfVxuXG4gICAgdmFyIEVmZmVjdCA9IHtcblxuICAgICAgICAvLyBFZmZlY3QgZGVsYXlcbiAgICAgICAgZHVyYXRpb246IDc1MCxcblxuICAgICAgICBzaG93OiBmdW5jdGlvbihlLCBlbGVtZW50KSB7XG5cbiAgICAgICAgICAgIC8vIERpc2FibGUgcmlnaHQgY2xpY2tcbiAgICAgICAgICAgIGlmIChlLmJ1dHRvbiA9PT0gMikge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGVsID0gZWxlbWVudCB8fCB0aGlzO1xuXG4gICAgICAgICAgICAvLyBDcmVhdGUgcmlwcGxlXG4gICAgICAgICAgICB2YXIgcmlwcGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICByaXBwbGUuY2xhc3NOYW1lID0gJ3dhdmVzLXJpcHBsZSc7XG4gICAgICAgICAgICBlbC5hcHBlbmRDaGlsZChyaXBwbGUpO1xuXG4gICAgICAgICAgICAvLyBHZXQgY2xpY2sgY29vcmRpbmF0ZSBhbmQgZWxlbWVudCB3aXRkaFxuICAgICAgICAgICAgdmFyIHBvcyAgICAgICAgID0gb2Zmc2V0KGVsKTtcbiAgICAgICAgICAgIHZhciByZWxhdGl2ZVkgICA9IChlLnBhZ2VZIC0gcG9zLnRvcCk7XG4gICAgICAgICAgICB2YXIgcmVsYXRpdmVYICAgPSAoZS5wYWdlWCAtIHBvcy5sZWZ0KTtcbiAgICAgICAgICAgIHZhciBzY2FsZSAgICAgICA9ICdzY2FsZSgnKygoZWwuY2xpZW50V2lkdGggLyAxMDApICogMTApKycpJztcblxuICAgICAgICAgICAgLy8gU3VwcG9ydCBmb3IgdG91Y2ggZGV2aWNlc1xuICAgICAgICAgICAgaWYgKCd0b3VjaGVzJyBpbiBlKSB7XG4gICAgICAgICAgICAgIHJlbGF0aXZlWSAgID0gKGUudG91Y2hlc1swXS5wYWdlWSAtIHBvcy50b3ApO1xuICAgICAgICAgICAgICByZWxhdGl2ZVggICA9IChlLnRvdWNoZXNbMF0ucGFnZVggLSBwb3MubGVmdCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEF0dGFjaCBkYXRhIHRvIGVsZW1lbnRcbiAgICAgICAgICAgIHJpcHBsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtaG9sZCcsIERhdGUubm93KCkpO1xuICAgICAgICAgICAgcmlwcGxlLnNldEF0dHJpYnV0ZSgnZGF0YS1zY2FsZScsIHNjYWxlKTtcbiAgICAgICAgICAgIHJpcHBsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEteCcsIHJlbGF0aXZlWCk7XG4gICAgICAgICAgICByaXBwbGUuc2V0QXR0cmlidXRlKCdkYXRhLXknLCByZWxhdGl2ZVkpO1xuXG4gICAgICAgICAgICAvLyBTZXQgcmlwcGxlIHBvc2l0aW9uXG4gICAgICAgICAgICB2YXIgcmlwcGxlU3R5bGUgPSB7XG4gICAgICAgICAgICAgICAgJ3RvcCc6IHJlbGF0aXZlWSsncHgnLFxuICAgICAgICAgICAgICAgICdsZWZ0JzogcmVsYXRpdmVYKydweCdcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJpcHBsZS5jbGFzc05hbWUgPSByaXBwbGUuY2xhc3NOYW1lICsgJyB3YXZlcy1ub3RyYW5zaXRpb24nO1xuICAgICAgICAgICAgcmlwcGxlLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBjb252ZXJ0U3R5bGUocmlwcGxlU3R5bGUpKTtcbiAgICAgICAgICAgIHJpcHBsZS5jbGFzc05hbWUgPSByaXBwbGUuY2xhc3NOYW1lLnJlcGxhY2UoJ3dhdmVzLW5vdHJhbnNpdGlvbicsICcnKTtcblxuICAgICAgICAgICAgLy8gU2NhbGUgdGhlIHJpcHBsZVxuICAgICAgICAgICAgcmlwcGxlU3R5bGVbJy13ZWJraXQtdHJhbnNmb3JtJ10gPSBzY2FsZTtcbiAgICAgICAgICAgIHJpcHBsZVN0eWxlWyctbW96LXRyYW5zZm9ybSddID0gc2NhbGU7XG4gICAgICAgICAgICByaXBwbGVTdHlsZVsnLW1zLXRyYW5zZm9ybSddID0gc2NhbGU7XG4gICAgICAgICAgICByaXBwbGVTdHlsZVsnLW8tdHJhbnNmb3JtJ10gPSBzY2FsZTtcbiAgICAgICAgICAgIHJpcHBsZVN0eWxlLnRyYW5zZm9ybSA9IHNjYWxlO1xuICAgICAgICAgICAgcmlwcGxlU3R5bGUub3BhY2l0eSAgID0gJzEnO1xuXG4gICAgICAgICAgICByaXBwbGVTdHlsZVsnLXdlYmtpdC10cmFuc2l0aW9uLWR1cmF0aW9uJ10gPSBFZmZlY3QuZHVyYXRpb24gKyAnbXMnO1xuICAgICAgICAgICAgcmlwcGxlU3R5bGVbJy1tb3otdHJhbnNpdGlvbi1kdXJhdGlvbiddICAgID0gRWZmZWN0LmR1cmF0aW9uICsgJ21zJztcbiAgICAgICAgICAgIHJpcHBsZVN0eWxlWyctby10cmFuc2l0aW9uLWR1cmF0aW9uJ10gICAgICA9IEVmZmVjdC5kdXJhdGlvbiArICdtcyc7XG4gICAgICAgICAgICByaXBwbGVTdHlsZVsndHJhbnNpdGlvbi1kdXJhdGlvbiddICAgICAgICAgPSBFZmZlY3QuZHVyYXRpb24gKyAnbXMnO1xuXG4gICAgICAgICAgICByaXBwbGVTdHlsZVsnLXdlYmtpdC10cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbiddID0gJ2N1YmljLWJlemllcigwLjI1MCwgMC40NjAsIDAuNDUwLCAwLjk0MCknO1xuICAgICAgICAgICAgcmlwcGxlU3R5bGVbJy1tb3otdHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb24nXSAgICA9ICdjdWJpYy1iZXppZXIoMC4yNTAsIDAuNDYwLCAwLjQ1MCwgMC45NDApJztcbiAgICAgICAgICAgIHJpcHBsZVN0eWxlWyctby10cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbiddICAgICAgPSAnY3ViaWMtYmV6aWVyKDAuMjUwLCAwLjQ2MCwgMC40NTAsIDAuOTQwKSc7XG4gICAgICAgICAgICByaXBwbGVTdHlsZVsndHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb24nXSAgICAgICAgID0gJ2N1YmljLWJlemllcigwLjI1MCwgMC40NjAsIDAuNDUwLCAwLjk0MCknO1xuXG4gICAgICAgICAgICByaXBwbGUuc2V0QXR0cmlidXRlKCdzdHlsZScsIGNvbnZlcnRTdHlsZShyaXBwbGVTdHlsZSkpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGhpZGU6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIFRvdWNoSGFuZGxlci50b3VjaHVwKGUpO1xuXG4gICAgICAgICAgICB2YXIgZWwgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHdpZHRoID0gZWwuY2xpZW50V2lkdGggKiAxLjQ7XG5cbiAgICAgICAgICAgIC8vIEdldCBmaXJzdCByaXBwbGVcbiAgICAgICAgICAgIHZhciByaXBwbGUgPSBudWxsO1xuICAgICAgICAgICAgdmFyIHJpcHBsZXMgPSBlbC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCd3YXZlcy1yaXBwbGUnKTtcbiAgICAgICAgICAgIGlmIChyaXBwbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICByaXBwbGUgPSByaXBwbGVzW3JpcHBsZXMubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHJlbGF0aXZlWCAgID0gcmlwcGxlLmdldEF0dHJpYnV0ZSgnZGF0YS14Jyk7XG4gICAgICAgICAgICB2YXIgcmVsYXRpdmVZICAgPSByaXBwbGUuZ2V0QXR0cmlidXRlKCdkYXRhLXknKTtcbiAgICAgICAgICAgIHZhciBzY2FsZSAgICAgICA9IHJpcHBsZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2NhbGUnKTtcblxuICAgICAgICAgICAgLy8gR2V0IGRlbGF5IGJlZXR3ZWVuIG1vdXNlZG93biBhbmQgbW91c2UgbGVhdmVcbiAgICAgICAgICAgIHZhciBkaWZmID0gRGF0ZS5ub3coKSAtIE51bWJlcihyaXBwbGUuZ2V0QXR0cmlidXRlKCdkYXRhLWhvbGQnKSk7XG4gICAgICAgICAgICB2YXIgZGVsYXkgPSAzNTAgLSBkaWZmO1xuXG4gICAgICAgICAgICBpZiAoZGVsYXkgPCAwKSB7XG4gICAgICAgICAgICAgICAgZGVsYXkgPSAwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBGYWRlIG91dCByaXBwbGUgYWZ0ZXIgZGVsYXlcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIHN0eWxlID0ge1xuICAgICAgICAgICAgICAgICAgICAndG9wJzogcmVsYXRpdmVZKydweCcsXG4gICAgICAgICAgICAgICAgICAgICdsZWZ0JzogcmVsYXRpdmVYKydweCcsXG4gICAgICAgICAgICAgICAgICAgICdvcGFjaXR5JzogJzAnLFxuXG4gICAgICAgICAgICAgICAgICAgIC8vIER1cmF0aW9uXG4gICAgICAgICAgICAgICAgICAgICctd2Via2l0LXRyYW5zaXRpb24tZHVyYXRpb24nOiBFZmZlY3QuZHVyYXRpb24gKyAnbXMnLFxuICAgICAgICAgICAgICAgICAgICAnLW1vei10cmFuc2l0aW9uLWR1cmF0aW9uJzogRWZmZWN0LmR1cmF0aW9uICsgJ21zJyxcbiAgICAgICAgICAgICAgICAgICAgJy1vLXRyYW5zaXRpb24tZHVyYXRpb24nOiBFZmZlY3QuZHVyYXRpb24gKyAnbXMnLFxuICAgICAgICAgICAgICAgICAgICAndHJhbnNpdGlvbi1kdXJhdGlvbic6IEVmZmVjdC5kdXJhdGlvbiArICdtcycsXG4gICAgICAgICAgICAgICAgICAgICctd2Via2l0LXRyYW5zZm9ybSc6IHNjYWxlLFxuICAgICAgICAgICAgICAgICAgICAnLW1vei10cmFuc2Zvcm0nOiBzY2FsZSxcbiAgICAgICAgICAgICAgICAgICAgJy1tcy10cmFuc2Zvcm0nOiBzY2FsZSxcbiAgICAgICAgICAgICAgICAgICAgJy1vLXRyYW5zZm9ybSc6IHNjYWxlLFxuICAgICAgICAgICAgICAgICAgICAndHJhbnNmb3JtJzogc2NhbGUsXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHJpcHBsZS5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgY29udmVydFN0eWxlKHN0eWxlKSk7XG5cbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWwucmVtb3ZlQ2hpbGQocmlwcGxlKTtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCBFZmZlY3QuZHVyYXRpb24pO1xuICAgICAgICAgICAgfSwgZGVsYXkpO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8vIExpdHRsZSBoYWNrIHRvIG1ha2UgPGlucHV0PiBjYW4gcGVyZm9ybSB3YXZlcyBlZmZlY3RcbiAgICAgICAgd3JhcElucHV0OiBmdW5jdGlvbihlbGVtZW50cykge1xuICAgICAgICAgICAgZm9yICh2YXIgYSA9IDA7IGEgPCBlbGVtZW50cy5sZW5ndGg7IGErKykge1xuICAgICAgICAgICAgICAgIHZhciBlbCA9IGVsZW1lbnRzW2FdO1xuXG4gICAgICAgICAgICAgICAgaWYgKGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2lucHV0Jykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcGFyZW50ID0gZWwucGFyZW50Tm9kZTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBJZiBpbnB1dCBhbHJlYWR5IGhhdmUgcGFyZW50IGp1c3QgcGFzcyB0aHJvdWdoXG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJlbnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnaScgJiYgcGFyZW50LmNsYXNzTmFtZS5pbmRleE9mKCd3YXZlcy1lZmZlY3QnKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gUHV0IGVsZW1lbnQgY2xhc3MgYW5kIHN0eWxlIHRvIHRoZSBzcGVjaWZpZWQgcGFyZW50XG4gICAgICAgICAgICAgICAgICAgIHZhciB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaScpO1xuICAgICAgICAgICAgICAgICAgICB3cmFwcGVyLmNsYXNzTmFtZSA9IGVsLmNsYXNzTmFtZSArICcgd2F2ZXMtaW5wdXQtd3JhcHBlcic7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnRTdHlsZSA9IGVsLmdldEF0dHJpYnV0ZSgnc3R5bGUnKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoIWVsZW1lbnRTdHlsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudFN0eWxlID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB3cmFwcGVyLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBlbGVtZW50U3R5bGUpO1xuXG4gICAgICAgICAgICAgICAgICAgIGVsLmNsYXNzTmFtZSA9ICd3YXZlcy1idXR0b24taW5wdXQnO1xuICAgICAgICAgICAgICAgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gUHV0IGVsZW1lbnQgYXMgY2hpbGRcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50LnJlcGxhY2VDaGlsZCh3cmFwcGVyLCBlbCk7XG4gICAgICAgICAgICAgICAgICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoZWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cblxuICAgIC8qKlxuICAgICAqIERpc2FibGUgbW91c2Vkb3duIGV2ZW50IGZvciA1MDBtcyBkdXJpbmcgYW5kIGFmdGVyIHRvdWNoXG4gICAgICovXG4gICAgdmFyIFRvdWNoSGFuZGxlciA9IHtcbiAgICAgICAgLyogdXNlcyBhbiBpbnRlZ2VyIHJhdGhlciB0aGFuIGJvb2wgc28gdGhlcmUncyBubyBpc3N1ZXMgd2l0aFxuICAgICAgICAgKiBuZWVkaW5nIHRvIGNsZWFyIHRpbWVvdXRzIGlmIGFub3RoZXIgdG91Y2ggZXZlbnQgb2NjdXJyZWRcbiAgICAgICAgICogd2l0aGluIHRoZSA1MDBtcy4gQ2Fubm90IG1vdXNldXAgYmV0d2VlbiB0b3VjaHN0YXJ0IGFuZFxuICAgICAgICAgKiB0b3VjaGVuZCwgbm9yIGluIHRoZSA1MDBtcyBhZnRlciB0b3VjaGVuZC4gKi9cbiAgICAgICAgdG91Y2hlczogMCxcbiAgICAgICAgYWxsb3dFdmVudDogZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgdmFyIGFsbG93ID0gdHJ1ZTtcblxuICAgICAgICAgICAgaWYgKGUudHlwZSA9PT0gJ3RvdWNoc3RhcnQnKSB7XG4gICAgICAgICAgICAgICAgVG91Y2hIYW5kbGVyLnRvdWNoZXMgKz0gMTsgLy9wdXNoXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUudHlwZSA9PT0gJ3RvdWNoZW5kJyB8fCBlLnR5cGUgPT09ICd0b3VjaGNhbmNlbCcpIHtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoVG91Y2hIYW5kbGVyLnRvdWNoZXMgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBUb3VjaEhhbmRsZXIudG91Y2hlcyAtPSAxOyAvL3BvcCBhZnRlciA1MDBtc1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgNTAwKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZS50eXBlID09PSAnbW91c2Vkb3duJyAmJiBUb3VjaEhhbmRsZXIudG91Y2hlcyA+IDApIHtcbiAgICAgICAgICAgICAgICBhbGxvdyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gYWxsb3c7XG4gICAgICAgIH0sXG4gICAgICAgIHRvdWNodXA6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIFRvdWNoSGFuZGxlci5hbGxvd0V2ZW50KGUpO1xuICAgICAgICB9XG4gICAgfTtcblxuXG4gICAgLyoqXG4gICAgICogRGVsZWdhdGVkIGNsaWNrIGhhbmRsZXIgZm9yIC53YXZlcy1lZmZlY3QgZWxlbWVudC5cbiAgICAgKiByZXR1cm5zIG51bGwgd2hlbiAud2F2ZXMtZWZmZWN0IGVsZW1lbnQgbm90IGluIFwiY2xpY2sgdHJlZVwiXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0V2F2ZXNFZmZlY3RFbGVtZW50KGUpIHtcbiAgICAgICAgaWYgKFRvdWNoSGFuZGxlci5hbGxvd0V2ZW50KGUpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZWxlbWVudCA9IG51bGw7XG4gICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldCB8fCBlLnNyY0VsZW1lbnQ7XG5cbiAgICAgICAgd2hpbGUgKHRhcmdldC5wYXJlbnRFbGVtZW50ICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoISh0YXJnZXQgaW5zdGFuY2VvZiBTVkdFbGVtZW50KSAmJiB0YXJnZXQuY2xhc3NOYW1lLmluZGV4T2YoJ3dhdmVzLWVmZmVjdCcpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQgPSB0YXJnZXQ7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3dhdmVzLWVmZmVjdCcpKSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudCA9IHRhcmdldDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRhcmdldCA9IHRhcmdldC5wYXJlbnRFbGVtZW50O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQnViYmxlIHRoZSBjbGljayBhbmQgc2hvdyBlZmZlY3QgaWYgLndhdmVzLWVmZmVjdCBlbGVtIHdhcyBmb3VuZFxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHNob3dFZmZlY3QoZSkge1xuICAgICAgICB2YXIgZWxlbWVudCA9IGdldFdhdmVzRWZmZWN0RWxlbWVudChlKTtcblxuICAgICAgICBpZiAoZWxlbWVudCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgRWZmZWN0LnNob3coZSwgZWxlbWVudCk7XG5cbiAgICAgICAgICAgIGlmICgnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3cpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgRWZmZWN0LmhpZGUsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoY2FuY2VsJywgRWZmZWN0LmhpZGUsIGZhbHNlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgRWZmZWN0LmhpZGUsIGZhbHNlKTtcbiAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIEVmZmVjdC5oaWRlLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBXYXZlcy5kaXNwbGF5RWZmZWN0ID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICAgICAgICBpZiAoJ2R1cmF0aW9uJyBpbiBvcHRpb25zKSB7XG4gICAgICAgICAgICBFZmZlY3QuZHVyYXRpb24gPSBvcHRpb25zLmR1cmF0aW9uO1xuICAgICAgICB9XG5cbiAgICAgICAgLy9XcmFwIGlucHV0IGluc2lkZSA8aT4gdGFnXG4gICAgICAgIEVmZmVjdC53cmFwSW5wdXQoJCQoJy53YXZlcy1lZmZlY3QnKSk7XG5cbiAgICAgICAgaWYgKCdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdykge1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0Jywgc2hvd0VmZmVjdCwgZmFsc2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBzaG93RWZmZWN0LCBmYWxzZSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEF0dGFjaCBXYXZlcyB0byBhbiBpbnB1dCBlbGVtZW50IChvciBhbnkgZWxlbWVudCB3aGljaCBkb2Vzbid0XG4gICAgICogYnViYmxlIG1vdXNldXAvbW91c2Vkb3duIGV2ZW50cykuXG4gICAgICogICBJbnRlbmRlZCB0byBiZSB1c2VkIHdpdGggZHluYW1pY2FsbHkgbG9hZGVkIGZvcm1zL2lucHV0cywgb3JcbiAgICAgKiB3aGVyZSB0aGUgdXNlciBkb2Vzbid0IHdhbnQgYSBkZWxlZ2F0ZWQgY2xpY2sgaGFuZGxlci5cbiAgICAgKi9cbiAgICBXYXZlcy5hdHRhY2ggPSBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgICAgIC8vRlVUVVJFOiBhdXRvbWF0aWNhbGx5IGFkZCB3YXZlcyBjbGFzc2VzIGFuZCBhbGxvdyB1c2Vyc1xuICAgICAgICAvLyB0byBzcGVjaWZ5IHRoZW0gd2l0aCBhbiBvcHRpb25zIHBhcmFtPyBFZy4gbGlnaHQvY2xhc3NpYy9idXR0b25cbiAgICAgICAgaWYgKGVsZW1lbnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnaW5wdXQnKSB7XG4gICAgICAgICAgICBFZmZlY3Qud3JhcElucHV0KFtlbGVtZW50XSk7XG4gICAgICAgICAgICBlbGVtZW50ID0gZWxlbWVudC5wYXJlbnRFbGVtZW50O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdykge1xuICAgICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0Jywgc2hvd0VmZmVjdCwgZmFsc2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBzaG93RWZmZWN0LCBmYWxzZSk7XG4gICAgfTtcblxuICAgIHdpbmRvdy5XYXZlcyA9IFdhdmVzO1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICBXYXZlcy5kaXNwbGF5RWZmZWN0KCk7XG4gICAgfSwgZmFsc2UpO1xuXG59KSh3aW5kb3cpO1xuO01hdGVyaWFsaXplLnRvYXN0ID0gZnVuY3Rpb24gKG1lc3NhZ2UsIGRpc3BsYXlMZW5ndGgsIGNsYXNzTmFtZSwgY29tcGxldGVDYWxsYmFjaykge1xuICAgIGNsYXNzTmFtZSA9IGNsYXNzTmFtZSB8fCBcIlwiO1xuXG4gICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b2FzdC1jb250YWluZXInKTtcblxuICAgIC8vIENyZWF0ZSB0b2FzdCBjb250YWluZXIgaWYgaXQgZG9lcyBub3QgZXhpc3RcbiAgICBpZiAoY29udGFpbmVyID09PSBudWxsKSB7XG4gICAgICAgIC8vIGNyZWF0ZSBub3RpZmljYXRpb24gY29udGFpbmVyXG4gICAgICAgIGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBjb250YWluZXIuaWQgPSAndG9hc3QtY29udGFpbmVyJztcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjb250YWluZXIpO1xuICAgIH1cblxuICAgIC8vIFNlbGVjdCBhbmQgYXBwZW5kIHRvYXN0XG4gICAgdmFyIG5ld1RvYXN0ID0gY3JlYXRlVG9hc3QobWVzc2FnZSk7XG5cbiAgICAvLyBvbmx5IGFwcGVuZCB0b2FzdCBpZiBtZXNzYWdlIGlzIG5vdCB1bmRlZmluZWRcbiAgICBpZihtZXNzYWdlKXtcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKG5ld1RvYXN0KTtcbiAgICB9XG5cbiAgICBuZXdUb2FzdC5zdHlsZS50b3AgPSAnMzVweCc7XG4gICAgbmV3VG9hc3Quc3R5bGUub3BhY2l0eSA9IDA7XG5cbiAgICAvLyBBbmltYXRlIHRvYXN0IGluXG4gICAgVmVsKG5ld1RvYXN0LCB7IFwidG9wXCIgOiBcIjBweFwiLCBvcGFjaXR5OiAxIH0sIHtkdXJhdGlvbjogMzAwLFxuICAgICAgZWFzaW5nOiAnZWFzZU91dEN1YmljJyxcbiAgICAgIHF1ZXVlOiBmYWxzZX0pO1xuXG4gICAgLy8gQWxsb3dzIHRpbWVyIHRvIGJlIHBhdXNlIHdoaWxlIGJlaW5nIHBhbm5lZFxuICAgIHZhciB0aW1lTGVmdCA9IGRpc3BsYXlMZW5ndGg7XG4gICAgdmFyIGNvdW50ZXJJbnRlcnZhbDtcbiAgICBpZiAodGltZUxlZnQgIT0gbnVsbCkgIHtcbiAgICAgIGNvdW50ZXJJbnRlcnZhbCA9IHNldEludGVydmFsIChmdW5jdGlvbigpe1xuICAgICAgICBpZiAobmV3VG9hc3QucGFyZW50Tm9kZSA9PT0gbnVsbClcbiAgICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbChjb3VudGVySW50ZXJ2YWwpO1xuXG4gICAgICAgIC8vIElmIHRvYXN0IGlzIG5vdCBiZWluZyBkcmFnZ2VkLCBkZWNyZWFzZSBpdHMgdGltZSByZW1haW5pbmdcbiAgICAgICAgaWYgKCFuZXdUb2FzdC5jbGFzc0xpc3QuY29udGFpbnMoJ3Bhbm5pbmcnKSkge1xuICAgICAgICAgIHRpbWVMZWZ0IC09IDIwO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRpbWVMZWZ0IDw9IDApIHtcbiAgICAgICAgICAvLyBBbmltYXRlIHRvYXN0IG91dFxuICAgICAgICAgIFZlbChuZXdUb2FzdCwge1wib3BhY2l0eVwiOiAwLCBtYXJnaW5Ub3A6ICctNDBweCd9LCB7IGR1cmF0aW9uOiAzNzUsXG4gICAgICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRFeHBvJyxcbiAgICAgICAgICAgICAgcXVldWU6IGZhbHNlLFxuICAgICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAvLyBDYWxsIHRoZSBvcHRpb25hbCBjYWxsYmFja1xuICAgICAgICAgICAgICAgIGlmKHR5cGVvZihjb21wbGV0ZUNhbGxiYWNrKSA9PT0gXCJmdW5jdGlvblwiKVxuICAgICAgICAgICAgICAgICAgY29tcGxldGVDYWxsYmFjaygpO1xuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSB0b2FzdCBhZnRlciBpdCB0aW1lcyBvdXRcbiAgICAgICAgICAgICAgICB0aGlzWzBdLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpc1swXSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKGNvdW50ZXJJbnRlcnZhbCk7XG4gICAgICAgIH1cbiAgICAgIH0sIDIwKTtcbiAgICB9XG5cblxuXG4gICAgZnVuY3Rpb24gY3JlYXRlVG9hc3QoaHRtbCkge1xuXG4gICAgICAgIC8vIENyZWF0ZSB0b2FzdFxuICAgICAgICB2YXIgdG9hc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdG9hc3QuY2xhc3NMaXN0LmFkZCgndG9hc3QnKTtcbiAgICAgICAgaWYgKGNsYXNzTmFtZSkge1xuICAgICAgICAgICAgdmFyIGNsYXNzZXMgPSBjbGFzc05hbWUuc3BsaXQoJyAnKTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGNvdW50ID0gY2xhc3Nlcy5sZW5ndGg7IGkgPCBjb3VudDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdG9hc3QuY2xhc3NMaXN0LmFkZChjbGFzc2VzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBJZiB0eXBlIG9mIHBhcmFtZXRlciBpcyBIVE1MIEVsZW1lbnRcbiAgICAgICAgaWYgKCB0eXBlb2YgSFRNTEVsZW1lbnQgPT09IFwib2JqZWN0XCIgPyBodG1sIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQgOiBodG1sICYmIHR5cGVvZiBodG1sID09PSBcIm9iamVjdFwiICYmIGh0bWwgIT09IG51bGwgJiYgaHRtbC5ub2RlVHlwZSA9PT0gMSAmJiB0eXBlb2YgaHRtbC5ub2RlTmFtZT09PVwic3RyaW5nXCJcbikge1xuICAgICAgICAgIHRvYXN0LmFwcGVuZENoaWxkKGh0bWwpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGh0bWwgaW5zdGFuY2VvZiBqUXVlcnkpIHtcbiAgICAgICAgICAvLyBDaGVjayBpZiBpdCBpcyBqUXVlcnkgb2JqZWN0XG4gICAgICAgICAgdG9hc3QuYXBwZW5kQ2hpbGQoaHRtbFswXSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgLy8gSW5zZXJ0IGFzIHRleHQ7XG4gICAgICAgICAgdG9hc3QuaW5uZXJIVE1MID0gaHRtbDtcbiAgICAgICAgfVxuICAgICAgICAvLyBCaW5kIGhhbW1lclxuICAgICAgICB2YXIgaGFtbWVySGFuZGxlciA9IG5ldyBIYW1tZXIodG9hc3QsIHtwcmV2ZW50X2RlZmF1bHQ6IGZhbHNlfSk7XG4gICAgICAgIGhhbW1lckhhbmRsZXIub24oJ3BhbicsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICB2YXIgZGVsdGFYID0gZS5kZWx0YVg7XG4gICAgICAgICAgdmFyIGFjdGl2YXRpb25EaXN0YW5jZSA9IDgwO1xuXG4gICAgICAgICAgLy8gQ2hhbmdlIHRvYXN0IHN0YXRlXG4gICAgICAgICAgaWYgKCF0b2FzdC5jbGFzc0xpc3QuY29udGFpbnMoJ3Bhbm5pbmcnKSl7XG4gICAgICAgICAgICB0b2FzdC5jbGFzc0xpc3QuYWRkKCdwYW5uaW5nJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdmFyIG9wYWNpdHlQZXJjZW50ID0gMS1NYXRoLmFicyhkZWx0YVggLyBhY3RpdmF0aW9uRGlzdGFuY2UpO1xuICAgICAgICAgIGlmIChvcGFjaXR5UGVyY2VudCA8IDApXG4gICAgICAgICAgICBvcGFjaXR5UGVyY2VudCA9IDA7XG5cbiAgICAgICAgICBWZWwodG9hc3QsIHtsZWZ0OiBkZWx0YVgsIG9wYWNpdHk6IG9wYWNpdHlQZXJjZW50IH0sIHtkdXJhdGlvbjogNTAsIHF1ZXVlOiBmYWxzZSwgZWFzaW5nOiAnZWFzZU91dFF1YWQnfSk7XG5cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaGFtbWVySGFuZGxlci5vbigncGFuZW5kJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgIHZhciBkZWx0YVggPSBlLmRlbHRhWDtcbiAgICAgICAgICB2YXIgYWN0aXZhdGlvbkRpc3RhbmNlID0gODA7XG5cbiAgICAgICAgICAvLyBJZiB0b2FzdCBkcmFnZ2VkIHBhc3QgYWN0aXZhdGlvbiBwb2ludFxuICAgICAgICAgIGlmIChNYXRoLmFicyhkZWx0YVgpID4gYWN0aXZhdGlvbkRpc3RhbmNlKSB7XG4gICAgICAgICAgICBWZWwodG9hc3QsIHttYXJnaW5Ub3A6ICctNDBweCd9LCB7IGR1cmF0aW9uOiAzNzUsXG4gICAgICAgICAgICAgICAgZWFzaW5nOiAnZWFzZU91dEV4cG8nLFxuICAgICAgICAgICAgICAgIHF1ZXVlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgIGlmKHR5cGVvZihjb21wbGV0ZUNhbGxiYWNrKSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlQ2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIHRvYXN0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodG9hc3QpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRvYXN0LmNsYXNzTGlzdC5yZW1vdmUoJ3Bhbm5pbmcnKTtcbiAgICAgICAgICAgIC8vIFB1dCB0b2FzdCBiYWNrIGludG8gb3JpZ2luYWwgcG9zaXRpb25cbiAgICAgICAgICAgIFZlbCh0b2FzdCwgeyBsZWZ0OiAwLCBvcGFjaXR5OiAxIH0sIHsgZHVyYXRpb246IDMwMCxcbiAgICAgICAgICAgICAgZWFzaW5nOiAnZWFzZU91dEV4cG8nLFxuICAgICAgICAgICAgICBxdWV1ZTogZmFsc2VcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gdG9hc3Q7XG4gICAgfVxufTtcbjsoZnVuY3Rpb24gKCQpIHtcblxuICB2YXIgbWV0aG9kcyA9IHtcbiAgICBpbml0IDogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgdmFyIGRlZmF1bHRzID0ge1xuICAgICAgICBtZW51V2lkdGg6IDMwMCxcbiAgICAgICAgZWRnZTogJ2xlZnQnLFxuICAgICAgICBjbG9zZU9uQ2xpY2s6IGZhbHNlLFxuICAgICAgICBkcmFnZ2FibGU6IHRydWVcbiAgICAgIH07XG4gICAgICBvcHRpb25zID0gJC5leHRlbmQoZGVmYXVsdHMsIG9wdGlvbnMpO1xuXG4gICAgICAkKHRoaXMpLmVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcbiAgICAgICAgdmFyIG1lbnVfaWQgPSAkKFwiI1wiKyAkdGhpcy5hdHRyKCdkYXRhLWFjdGl2YXRlcycpKTtcblxuICAgICAgICAvLyBTZXQgdG8gd2lkdGhcbiAgICAgICAgaWYgKG9wdGlvbnMubWVudVdpZHRoICE9IDMwMCkge1xuICAgICAgICAgIG1lbnVfaWQuY3NzKCd3aWR0aCcsIG9wdGlvbnMubWVudVdpZHRoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFkZCBUb3VjaCBBcmVhXG4gICAgICAgIHZhciAkZHJhZ1RhcmdldDtcbiAgICAgICAgaWYgKG9wdGlvbnMuZHJhZ2dhYmxlKSB7XG4gICAgICAgICAgJGRyYWdUYXJnZXQgPSAkKCc8ZGl2IGNsYXNzPVwiZHJhZy10YXJnZXRcIj48L2Rpdj4nKS5hdHRyKCdkYXRhLXNpZGVuYXYnLCAkdGhpcy5hdHRyKCdkYXRhLWFjdGl2YXRlcycpKTtcbiAgICAgICAgICAkKCdib2R5JykuYXBwZW5kKCRkcmFnVGFyZ2V0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkZHJhZ1RhcmdldCA9ICQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcHRpb25zLmVkZ2UgPT0gJ2xlZnQnKSB7XG4gICAgICAgICAgbWVudV9pZC5jc3MoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGVYKC0xMDAlKScpO1xuICAgICAgICAgICRkcmFnVGFyZ2V0LmNzcyh7J2xlZnQnOiAwfSk7IC8vIEFkZCBUb3VjaCBBcmVhXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgbWVudV9pZC5hZGRDbGFzcygncmlnaHQtYWxpZ25lZCcpIC8vIENoYW5nZSB0ZXh0LWFsaWdubWVudCB0byByaWdodFxuICAgICAgICAgICAgLmNzcygndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZVgoMTAwJSknKTtcbiAgICAgICAgICAkZHJhZ1RhcmdldC5jc3MoeydyaWdodCc6IDB9KTsgLy8gQWRkIFRvdWNoIEFyZWFcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIGZpeGVkIHNpZGVuYXYsIGJyaW5nIG1lbnUgb3V0XG4gICAgICAgIGlmIChtZW51X2lkLmhhc0NsYXNzKCdmaXhlZCcpKSB7XG4gICAgICAgICAgICBpZiAod2luZG93LmlubmVyV2lkdGggPiA5OTIpIHtcbiAgICAgICAgICAgICAgbWVudV9pZC5jc3MoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGVYKDApJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgIC8vIFdpbmRvdyByZXNpemUgdG8gcmVzZXQgb24gbGFyZ2Ugc2NyZWVucyBmaXhlZFxuICAgICAgICBpZiAobWVudV9pZC5oYXNDbGFzcygnZml4ZWQnKSkge1xuICAgICAgICAgICQod2luZG93KS5yZXNpemUoIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoID4gOTkyKSB7XG4gICAgICAgICAgICAgIC8vIENsb3NlIG1lbnUgaWYgd2luZG93IGlzIHJlc2l6ZWQgYmlnZ2VyIHRoYW4gOTkyIGFuZCB1c2VyIGhhcyBmaXhlZCBzaWRlbmF2XG4gICAgICAgICAgICAgIGlmICgkKCcjc2lkZW5hdi1vdmVybGF5JykubGVuZ3RoICE9PSAwICYmIG1lbnVPdXQpIHtcbiAgICAgICAgICAgICAgICByZW1vdmVNZW51KHRydWUpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIG1lbnVfaWQucmVtb3ZlQXR0cignc3R5bGUnKTtcbiAgICAgICAgICAgICAgICBtZW51X2lkLmNzcygndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZVgoMCUpJyk7XG4gICAgICAgICAgICAgICAgLy8gbWVudV9pZC5jc3MoJ3dpZHRoJywgb3B0aW9ucy5tZW51V2lkdGgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChtZW51T3V0ID09PSBmYWxzZSl7XG4gICAgICAgICAgICAgIGlmIChvcHRpb25zLmVkZ2UgPT09ICdsZWZ0Jykge1xuICAgICAgICAgICAgICAgIG1lbnVfaWQuY3NzKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlWCgtMTAwJSknKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBtZW51X2lkLmNzcygndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZVgoMTAwJSknKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGlmIGNsb3NlT25DbGljaywgdGhlbiBhZGQgY2xvc2UgZXZlbnQgZm9yIGFsbCBhIHRhZ3MgaW4gc2lkZSBzaWRlTmF2XG4gICAgICAgIGlmIChvcHRpb25zLmNsb3NlT25DbGljayA9PT0gdHJ1ZSkge1xuICAgICAgICAgIG1lbnVfaWQub24oXCJjbGljay5pdGVtY2xpY2tcIiwgXCJhOm5vdCguY29sbGFwc2libGUtaGVhZGVyKVwiLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgcmVtb3ZlTWVudSgpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHJlbW92ZU1lbnUgPSBmdW5jdGlvbihyZXN0b3JlTmF2KSB7XG4gICAgICAgICAgcGFubmluZyA9IGZhbHNlO1xuICAgICAgICAgIG1lbnVPdXQgPSBmYWxzZTtcbiAgICAgICAgICAvLyBSZWVuYWJsZSBzY3JvbGxpbmdcbiAgICAgICAgICAkKCdib2R5JykuY3NzKHtcbiAgICAgICAgICAgIG92ZXJmbG93OiAnJyxcbiAgICAgICAgICAgIHdpZHRoOiAnJ1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgJCgnI3NpZGVuYXYtb3ZlcmxheScpLnZlbG9jaXR5KHtvcGFjaXR5OiAwfSwge2R1cmF0aW9uOiAyMDAsXG4gICAgICAgICAgICAgIHF1ZXVlOiBmYWxzZSwgZWFzaW5nOiAnZWFzZU91dFF1YWQnLFxuICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZSgpO1xuICAgICAgICAgICAgfSB9KTtcbiAgICAgICAgICBpZiAob3B0aW9ucy5lZGdlID09PSAnbGVmdCcpIHtcbiAgICAgICAgICAgIC8vIFJlc2V0IHBoYW50b20gZGl2XG4gICAgICAgICAgICAkZHJhZ1RhcmdldC5jc3Moe3dpZHRoOiAnJywgcmlnaHQ6ICcnLCBsZWZ0OiAnMCd9KTtcbiAgICAgICAgICAgIG1lbnVfaWQudmVsb2NpdHkoXG4gICAgICAgICAgICAgIHsndHJhbnNsYXRlWCc6ICctMTAwJSd9LFxuICAgICAgICAgICAgICB7IGR1cmF0aW9uOiAyMDAsXG4gICAgICAgICAgICAgICAgcXVldWU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRDdWJpYycsXG4gICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgaWYgKHJlc3RvcmVOYXYgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVzdG9yZSBGaXhlZCBzaWRlbmF2XG4gICAgICAgICAgICAgICAgICAgIG1lbnVfaWQucmVtb3ZlQXR0cignc3R5bGUnKTtcbiAgICAgICAgICAgICAgICAgICAgbWVudV9pZC5jc3MoJ3dpZHRoJywgb3B0aW9ucy5tZW51V2lkdGgpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gUmVzZXQgcGhhbnRvbSBkaXZcbiAgICAgICAgICAgICRkcmFnVGFyZ2V0LmNzcyh7d2lkdGg6ICcnLCByaWdodDogJzAnLCBsZWZ0OiAnJ30pO1xuICAgICAgICAgICAgbWVudV9pZC52ZWxvY2l0eShcbiAgICAgICAgICAgICAgeyd0cmFuc2xhdGVYJzogJzEwMCUnfSxcbiAgICAgICAgICAgICAgeyBkdXJhdGlvbjogMjAwLFxuICAgICAgICAgICAgICAgIHF1ZXVlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0Q3ViaWMnLFxuICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgIGlmIChyZXN0b3JlTmF2ID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFJlc3RvcmUgRml4ZWQgc2lkZW5hdlxuICAgICAgICAgICAgICAgICAgICBtZW51X2lkLnJlbW92ZUF0dHIoJ3N0eWxlJyk7XG4gICAgICAgICAgICAgICAgICAgIG1lbnVfaWQuY3NzKCd3aWR0aCcsIG9wdGlvbnMubWVudVdpZHRoKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuXG5cbiAgICAgICAgLy8gVG91Y2ggRXZlbnRcbiAgICAgICAgdmFyIHBhbm5pbmcgPSBmYWxzZTtcbiAgICAgICAgdmFyIG1lbnVPdXQgPSBmYWxzZTtcblxuICAgICAgICBpZiAob3B0aW9ucy5kcmFnZ2FibGUpIHtcbiAgICAgICAgICAkZHJhZ1RhcmdldC5vbignY2xpY2snLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgaWYgKG1lbnVPdXQpIHtcbiAgICAgICAgICAgICAgcmVtb3ZlTWVudSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgJGRyYWdUYXJnZXQuaGFtbWVyKHtcbiAgICAgICAgICAgIHByZXZlbnRfZGVmYXVsdDogZmFsc2VcbiAgICAgICAgICB9KS5iaW5kKCdwYW4nLCBmdW5jdGlvbihlKSB7XG5cbiAgICAgICAgICAgIGlmIChlLmdlc3R1cmUucG9pbnRlclR5cGUgPT0gXCJ0b3VjaFwiKSB7XG5cbiAgICAgICAgICAgICAgdmFyIGRpcmVjdGlvbiA9IGUuZ2VzdHVyZS5kaXJlY3Rpb247XG4gICAgICAgICAgICAgIHZhciB4ID0gZS5nZXN0dXJlLmNlbnRlci54O1xuICAgICAgICAgICAgICB2YXIgeSA9IGUuZ2VzdHVyZS5jZW50ZXIueTtcbiAgICAgICAgICAgICAgdmFyIHZlbG9jaXR5WCA9IGUuZ2VzdHVyZS52ZWxvY2l0eVg7XG5cbiAgICAgICAgICAgICAgLy8gRGlzYWJsZSBTY3JvbGxpbmdcbiAgICAgICAgICAgICAgdmFyICRib2R5ID0gJCgnYm9keScpO1xuICAgICAgICAgICAgICB2YXIgJG92ZXJsYXkgPSAkKCcjc2lkZW5hdi1vdmVybGF5Jyk7XG4gICAgICAgICAgICAgIHZhciBvbGRXaWR0aCA9ICRib2R5LmlubmVyV2lkdGgoKTtcbiAgICAgICAgICAgICAgJGJvZHkuY3NzKCdvdmVyZmxvdycsICdoaWRkZW4nKTtcbiAgICAgICAgICAgICAgJGJvZHkud2lkdGgob2xkV2lkdGgpO1xuXG4gICAgICAgICAgICAgIC8vIElmIG92ZXJsYXkgZG9lcyBub3QgZXhpc3QsIGNyZWF0ZSBvbmUgYW5kIGlmIGl0IGlzIGNsaWNrZWQsIGNsb3NlIG1lbnVcbiAgICAgICAgICAgICAgaWYgKCRvdmVybGF5Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICRvdmVybGF5ID0gJCgnPGRpdiBpZD1cInNpZGVuYXYtb3ZlcmxheVwiPjwvZGl2PicpO1xuICAgICAgICAgICAgICAgICRvdmVybGF5LmNzcygnb3BhY2l0eScsIDApLmNsaWNrKCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgcmVtb3ZlTWVudSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICQoJ2JvZHknKS5hcHBlbmQoJG92ZXJsYXkpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgLy8gS2VlcCB3aXRoaW4gYm91bmRhcmllc1xuICAgICAgICAgICAgICBpZiAob3B0aW9ucy5lZGdlID09PSAnbGVmdCcpIHtcbiAgICAgICAgICAgICAgICBpZiAoeCA+IG9wdGlvbnMubWVudVdpZHRoKSB7IHggPSBvcHRpb25zLm1lbnVXaWR0aDsgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHggPCAwKSB7IHggPSAwOyB9XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAob3B0aW9ucy5lZGdlID09PSAnbGVmdCcpIHtcbiAgICAgICAgICAgICAgICAvLyBMZWZ0IERpcmVjdGlvblxuICAgICAgICAgICAgICAgIGlmICh4IDwgKG9wdGlvbnMubWVudVdpZHRoIC8gMikpIHsgbWVudU91dCA9IGZhbHNlOyB9XG4gICAgICAgICAgICAgICAgLy8gUmlnaHQgRGlyZWN0aW9uXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoeCA+PSAob3B0aW9ucy5tZW51V2lkdGggLyAyKSkgeyBtZW51T3V0ID0gdHJ1ZTsgfVxuICAgICAgICAgICAgICAgIG1lbnVfaWQuY3NzKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlWCgnICsgKHggLSBvcHRpb25zLm1lbnVXaWR0aCkgKyAncHgpJyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gTGVmdCBEaXJlY3Rpb25cbiAgICAgICAgICAgICAgICBpZiAoeCA8ICh3aW5kb3cuaW5uZXJXaWR0aCAtIG9wdGlvbnMubWVudVdpZHRoIC8gMikpIHtcbiAgICAgICAgICAgICAgICAgIG1lbnVPdXQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBSaWdodCBEaXJlY3Rpb25cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh4ID49ICh3aW5kb3cuaW5uZXJXaWR0aCAtIG9wdGlvbnMubWVudVdpZHRoIC8gMikpIHtcbiAgICAgICAgICAgICAgICAgbWVudU91dCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciByaWdodFBvcyA9ICh4IC0gb3B0aW9ucy5tZW51V2lkdGggLyAyKTtcbiAgICAgICAgICAgICAgICBpZiAocmlnaHRQb3MgPCAwKSB7XG4gICAgICAgICAgICAgICAgICByaWdodFBvcyA9IDA7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgbWVudV9pZC5jc3MoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGVYKCcgKyByaWdodFBvcyArICdweCknKTtcbiAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgLy8gUGVyY2VudGFnZSBvdmVybGF5XG4gICAgICAgICAgICAgIHZhciBvdmVybGF5UGVyYztcbiAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZWRnZSA9PT0gJ2xlZnQnKSB7XG4gICAgICAgICAgICAgICAgb3ZlcmxheVBlcmMgPSB4IC8gb3B0aW9ucy5tZW51V2lkdGg7XG4gICAgICAgICAgICAgICAgJG92ZXJsYXkudmVsb2NpdHkoe29wYWNpdHk6IG92ZXJsYXlQZXJjIH0sIHtkdXJhdGlvbjogMTAsIHF1ZXVlOiBmYWxzZSwgZWFzaW5nOiAnZWFzZU91dFF1YWQnfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgb3ZlcmxheVBlcmMgPSBNYXRoLmFicygoeCAtIHdpbmRvdy5pbm5lcldpZHRoKSAvIG9wdGlvbnMubWVudVdpZHRoKTtcbiAgICAgICAgICAgICAgICAkb3ZlcmxheS52ZWxvY2l0eSh7b3BhY2l0eTogb3ZlcmxheVBlcmMgfSwge2R1cmF0aW9uOiAxMCwgcXVldWU6IGZhbHNlLCBlYXNpbmc6ICdlYXNlT3V0UXVhZCd9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgfSkuYmluZCgncGFuZW5kJywgZnVuY3Rpb24oZSkge1xuXG4gICAgICAgICAgICBpZiAoZS5nZXN0dXJlLnBvaW50ZXJUeXBlID09IFwidG91Y2hcIikge1xuICAgICAgICAgICAgICB2YXIgJG92ZXJsYXkgPSAkKCc8ZGl2IGlkPVwic2lkZW5hdi1vdmVybGF5XCI+PC9kaXY+Jyk7XG4gICAgICAgICAgICAgIHZhciB2ZWxvY2l0eVggPSBlLmdlc3R1cmUudmVsb2NpdHlYO1xuICAgICAgICAgICAgICB2YXIgeCA9IGUuZ2VzdHVyZS5jZW50ZXIueDtcbiAgICAgICAgICAgICAgdmFyIGxlZnRQb3MgPSB4IC0gb3B0aW9ucy5tZW51V2lkdGg7XG4gICAgICAgICAgICAgIHZhciByaWdodFBvcyA9IHggLSBvcHRpb25zLm1lbnVXaWR0aCAvIDI7XG4gICAgICAgICAgICAgIGlmIChsZWZ0UG9zID4gMCApIHtcbiAgICAgICAgICAgICAgICBsZWZ0UG9zID0gMDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAocmlnaHRQb3MgPCAwKSB7XG4gICAgICAgICAgICAgICAgcmlnaHRQb3MgPSAwO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHBhbm5pbmcgPSBmYWxzZTtcblxuICAgICAgICAgICAgICBpZiAob3B0aW9ucy5lZGdlID09PSAnbGVmdCcpIHtcbiAgICAgICAgICAgICAgICAvLyBJZiB2ZWxvY2l0eVggPD0gMC4zIHRoZW4gdGhlIHVzZXIgaXMgZmxpbmdpbmcgdGhlIG1lbnUgY2xvc2VkIHNvIGlnbm9yZSBtZW51T3V0XG4gICAgICAgICAgICAgICAgaWYgKChtZW51T3V0ICYmIHZlbG9jaXR5WCA8PSAwLjMpIHx8IHZlbG9jaXR5WCA8IC0wLjUpIHtcbiAgICAgICAgICAgICAgICAgIC8vIFJldHVybiBtZW51IHRvIG9wZW5cbiAgICAgICAgICAgICAgICAgIGlmIChsZWZ0UG9zICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lbnVfaWQudmVsb2NpdHkoeyd0cmFuc2xhdGVYJzogWzAsIGxlZnRQb3NdfSwge2R1cmF0aW9uOiAzMDAsIHF1ZXVlOiBmYWxzZSwgZWFzaW5nOiAnZWFzZU91dFF1YWQnfSk7XG4gICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICRvdmVybGF5LnZlbG9jaXR5KHtvcGFjaXR5OiAxIH0sIHtkdXJhdGlvbjogNTAsIHF1ZXVlOiBmYWxzZSwgZWFzaW5nOiAnZWFzZU91dFF1YWQnfSk7XG4gICAgICAgICAgICAgICAgICAkZHJhZ1RhcmdldC5jc3Moe3dpZHRoOiAnNTAlJywgcmlnaHQ6IDAsIGxlZnQ6ICcnfSk7XG4gICAgICAgICAgICAgICAgICBtZW51T3V0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoIW1lbnVPdXQgfHwgdmVsb2NpdHlYID4gMC4zKSB7XG4gICAgICAgICAgICAgICAgICAvLyBFbmFibGUgU2Nyb2xsaW5nXG4gICAgICAgICAgICAgICAgICAkKCdib2R5JykuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3c6ICcnLFxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogJydcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgLy8gU2xpZGUgbWVudSBjbG9zZWRcbiAgICAgICAgICAgICAgICAgIG1lbnVfaWQudmVsb2NpdHkoeyd0cmFuc2xhdGVYJzogWy0xICogb3B0aW9ucy5tZW51V2lkdGggLSAxMCwgbGVmdFBvc119LCB7ZHVyYXRpb246IDIwMCwgcXVldWU6IGZhbHNlLCBlYXNpbmc6ICdlYXNlT3V0UXVhZCd9KTtcbiAgICAgICAgICAgICAgICAgICRvdmVybGF5LnZlbG9jaXR5KHtvcGFjaXR5OiAwIH0sIHtkdXJhdGlvbjogMjAwLCBxdWV1ZTogZmFsc2UsIGVhc2luZzogJ2Vhc2VPdXRRdWFkJyxcbiAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9fSk7XG4gICAgICAgICAgICAgICAgICAkZHJhZ1RhcmdldC5jc3Moe3dpZHRoOiAnMTBweCcsIHJpZ2h0OiAnJywgbGVmdDogMH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoKG1lbnVPdXQgJiYgdmVsb2NpdHlYID49IC0wLjMpIHx8IHZlbG9jaXR5WCA+IDAuNSkge1xuICAgICAgICAgICAgICAgICAgLy8gUmV0dXJuIG1lbnUgdG8gb3BlblxuICAgICAgICAgICAgICAgICAgaWYgKHJpZ2h0UG9zICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lbnVfaWQudmVsb2NpdHkoeyd0cmFuc2xhdGVYJzogWzAsIHJpZ2h0UG9zXX0sIHtkdXJhdGlvbjogMzAwLCBxdWV1ZTogZmFsc2UsIGVhc2luZzogJ2Vhc2VPdXRRdWFkJ30pO1xuICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAkb3ZlcmxheS52ZWxvY2l0eSh7b3BhY2l0eTogMSB9LCB7ZHVyYXRpb246IDUwLCBxdWV1ZTogZmFsc2UsIGVhc2luZzogJ2Vhc2VPdXRRdWFkJ30pO1xuICAgICAgICAgICAgICAgICAgJGRyYWdUYXJnZXQuY3NzKHt3aWR0aDogJzUwJScsIHJpZ2h0OiAnJywgbGVmdDogMH0pO1xuICAgICAgICAgICAgICAgICAgbWVudU91dCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFtZW51T3V0IHx8IHZlbG9jaXR5WCA8IC0wLjMpIHtcbiAgICAgICAgICAgICAgICAgIC8vIEVuYWJsZSBTY3JvbGxpbmdcbiAgICAgICAgICAgICAgICAgICQoJ2JvZHknKS5jc3Moe1xuICAgICAgICAgICAgICAgICAgICBvdmVyZmxvdzogJycsXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiAnJ1xuICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgIC8vIFNsaWRlIG1lbnUgY2xvc2VkXG4gICAgICAgICAgICAgICAgICBtZW51X2lkLnZlbG9jaXR5KHsndHJhbnNsYXRlWCc6IFtvcHRpb25zLm1lbnVXaWR0aCArIDEwLCByaWdodFBvc119LCB7ZHVyYXRpb246IDIwMCwgcXVldWU6IGZhbHNlLCBlYXNpbmc6ICdlYXNlT3V0UXVhZCd9KTtcbiAgICAgICAgICAgICAgICAgICRvdmVybGF5LnZlbG9jaXR5KHtvcGFjaXR5OiAwIH0sIHtkdXJhdGlvbjogMjAwLCBxdWV1ZTogZmFsc2UsIGVhc2luZzogJ2Vhc2VPdXRRdWFkJyxcbiAgICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9fSk7XG4gICAgICAgICAgICAgICAgICAkZHJhZ1RhcmdldC5jc3Moe3dpZHRoOiAnMTBweCcsIHJpZ2h0OiAwLCBsZWZ0OiAnJ30pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAkdGhpcy5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZiAobWVudU91dCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgbWVudU91dCA9IGZhbHNlO1xuICAgICAgICAgICAgcGFubmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgcmVtb3ZlTWVudSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcblxuICAgICAgICAgICAgLy8gRGlzYWJsZSBTY3JvbGxpbmdcbiAgICAgICAgICAgIHZhciAkYm9keSA9ICQoJ2JvZHknKTtcbiAgICAgICAgICAgIHZhciAkb3ZlcmxheSA9ICQoJzxkaXYgaWQ9XCJzaWRlbmF2LW92ZXJsYXlcIj48L2Rpdj4nKTtcbiAgICAgICAgICAgIHZhciBvbGRXaWR0aCA9ICRib2R5LmlubmVyV2lkdGgoKTtcbiAgICAgICAgICAgICRib2R5LmNzcygnb3ZlcmZsb3cnLCAnaGlkZGVuJyk7XG4gICAgICAgICAgICAkYm9keS53aWR0aChvbGRXaWR0aCk7XG5cbiAgICAgICAgICAgIC8vIFB1c2ggY3VycmVudCBkcmFnIHRhcmdldCBvbiB0b3Agb2YgRE9NIHRyZWVcbiAgICAgICAgICAgICQoJ2JvZHknKS5hcHBlbmQoJGRyYWdUYXJnZXQpO1xuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5lZGdlID09PSAnbGVmdCcpIHtcbiAgICAgICAgICAgICAgJGRyYWdUYXJnZXQuY3NzKHt3aWR0aDogJzUwJScsIHJpZ2h0OiAwLCBsZWZ0OiAnJ30pO1xuICAgICAgICAgICAgICBtZW51X2lkLnZlbG9jaXR5KHsndHJhbnNsYXRlWCc6IFswLCAtMSAqIG9wdGlvbnMubWVudVdpZHRoXX0sIHtkdXJhdGlvbjogMzAwLCBxdWV1ZTogZmFsc2UsIGVhc2luZzogJ2Vhc2VPdXRRdWFkJ30pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICRkcmFnVGFyZ2V0LmNzcyh7d2lkdGg6ICc1MCUnLCByaWdodDogJycsIGxlZnQ6IDB9KTtcbiAgICAgICAgICAgICAgbWVudV9pZC52ZWxvY2l0eSh7J3RyYW5zbGF0ZVgnOiBbMCwgb3B0aW9ucy5tZW51V2lkdGhdfSwge2R1cmF0aW9uOiAzMDAsIHF1ZXVlOiBmYWxzZSwgZWFzaW5nOiAnZWFzZU91dFF1YWQnfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICRvdmVybGF5LmNzcygnb3BhY2l0eScsIDApXG4gICAgICAgICAgICAuY2xpY2soZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgbWVudU91dCA9IGZhbHNlO1xuICAgICAgICAgICAgICBwYW5uaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgIHJlbW92ZU1lbnUoKTtcbiAgICAgICAgICAgICAgJG92ZXJsYXkudmVsb2NpdHkoe29wYWNpdHk6IDB9LCB7ZHVyYXRpb246IDMwMCwgcXVldWU6IGZhbHNlLCBlYXNpbmc6ICdlYXNlT3V0UXVhZCcsXG4gICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICB9IH0pO1xuXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICQoJ2JvZHknKS5hcHBlbmQoJG92ZXJsYXkpO1xuICAgICAgICAgICAgJG92ZXJsYXkudmVsb2NpdHkoe29wYWNpdHk6IDF9LCB7ZHVyYXRpb246IDMwMCwgcXVldWU6IGZhbHNlLCBlYXNpbmc6ICdlYXNlT3V0UXVhZCcsXG4gICAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgbWVudU91dCA9IHRydWU7XG4gICAgICAgICAgICAgICAgcGFubmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cblxuICAgIH0sXG4gICAgZGVzdHJveTogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyICRvdmVybGF5ID0gJCgnI3NpZGVuYXYtb3ZlcmxheScpO1xuICAgICAgdmFyICRkcmFnVGFyZ2V0ID0gJCgnLmRyYWctdGFyZ2V0W2RhdGEtc2lkZW5hdj1cIicgKyAkKHRoaXMpLmF0dHIoJ2RhdGEtYWN0aXZhdGVzJykgKyAnXCJdJyk7XG4gICAgICAkb3ZlcmxheS50cmlnZ2VyKCdjbGljaycpO1xuICAgICAgJGRyYWdUYXJnZXQucmVtb3ZlKCk7XG4gICAgICAkKHRoaXMpLm9mZignY2xpY2snKTtcbiAgICAgICRvdmVybGF5LnJlbW92ZSgpO1xuICAgIH0sXG4gICAgc2hvdyA6IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy50cmlnZ2VyKCdjbGljaycpO1xuICAgIH0sXG4gICAgaGlkZSA6IGZ1bmN0aW9uKCkge1xuICAgICAgJCgnI3NpZGVuYXYtb3ZlcmxheScpLnRyaWdnZXIoJ2NsaWNrJyk7XG4gICAgfVxuICB9O1xuXG5cbiAgICAkLmZuLnNpZGVOYXYgPSBmdW5jdGlvbihtZXRob2RPck9wdGlvbnMpIHtcbiAgICAgIGlmICggbWV0aG9kc1ttZXRob2RPck9wdGlvbnNdICkge1xuICAgICAgICByZXR1cm4gbWV0aG9kc1sgbWV0aG9kT3JPcHRpb25zIF0uYXBwbHkoIHRoaXMsIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKCBhcmd1bWVudHMsIDEgKSk7XG4gICAgICB9IGVsc2UgaWYgKCB0eXBlb2YgbWV0aG9kT3JPcHRpb25zID09PSAnb2JqZWN0JyB8fCAhIG1ldGhvZE9yT3B0aW9ucyApIHtcbiAgICAgICAgLy8gRGVmYXVsdCB0byBcImluaXRcIlxuICAgICAgICByZXR1cm4gbWV0aG9kcy5pbml0LmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICQuZXJyb3IoICdNZXRob2QgJyArICBtZXRob2RPck9wdGlvbnMgKyAnIGRvZXMgbm90IGV4aXN0IG9uIGpRdWVyeS5zaWRlTmF2JyApO1xuICAgICAgfVxuICAgIH07IC8vIFBsdWdpbiBlbmRcbn0oIGpRdWVyeSApKTtcbjsvKipcbiAqIEV4dGVuZCBqcXVlcnkgd2l0aCBhIHNjcm9sbHNweSBwbHVnaW4uXG4gKiBUaGlzIHdhdGNoZXMgdGhlIHdpbmRvdyBzY3JvbGwgYW5kIGZpcmVzIGV2ZW50cyB3aGVuIGVsZW1lbnRzIGFyZSBzY3JvbGxlZCBpbnRvIHZpZXdwb3J0LlxuICpcbiAqIHRocm90dGxlKCkgYW5kIGdldFRpbWUoKSB0YWtlbiBmcm9tIFVuZGVyc2NvcmUuanNcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9qYXNoa2VuYXMvdW5kZXJzY29yZVxuICpcbiAqIEBhdXRob3IgQ29weXJpZ2h0IDIwMTMgSm9obiBTbWFydFxuICogQGxpY2Vuc2UgaHR0cHM6Ly9yYXcuZ2l0aHViLmNvbS90aGVzbWFydC9qcXVlcnktc2Nyb2xsc3B5L21hc3Rlci9MSUNFTlNFXG4gKiBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS90aGVzbWFydFxuICogQHZlcnNpb24gMC4xLjJcbiAqL1xuKGZ1bmN0aW9uKCQpIHtcblxuXHR2YXIgaldpbmRvdyA9ICQod2luZG93KTtcblx0dmFyIGVsZW1lbnRzID0gW107XG5cdHZhciBlbGVtZW50c0luVmlldyA9IFtdO1xuXHR2YXIgaXNTcHlpbmcgPSBmYWxzZTtcblx0dmFyIHRpY2tzID0gMDtcblx0dmFyIHVuaXF1ZV9pZCA9IDE7XG5cdHZhciBvZmZzZXQgPSB7XG5cdFx0dG9wIDogMCxcblx0XHRyaWdodCA6IDAsXG5cdFx0Ym90dG9tIDogMCxcblx0XHRsZWZ0IDogMCxcblx0fVxuXG5cdC8qKlxuXHQgKiBGaW5kIGVsZW1lbnRzIHRoYXQgYXJlIHdpdGhpbiB0aGUgYm91bmRhcnlcblx0ICogQHBhcmFtIHtudW1iZXJ9IHRvcFxuXHQgKiBAcGFyYW0ge251bWJlcn0gcmlnaHRcblx0ICogQHBhcmFtIHtudW1iZXJ9IGJvdHRvbVxuXHQgKiBAcGFyYW0ge251bWJlcn0gbGVmdFxuXHQgKiBAcmV0dXJuIHtqUXVlcnl9XHRcdEEgY29sbGVjdGlvbiBvZiBlbGVtZW50c1xuXHQgKi9cblx0ZnVuY3Rpb24gZmluZEVsZW1lbnRzKHRvcCwgcmlnaHQsIGJvdHRvbSwgbGVmdCkge1xuXHRcdHZhciBoaXRzID0gJCgpO1xuXHRcdCQuZWFjaChlbGVtZW50cywgZnVuY3Rpb24oaSwgZWxlbWVudCkge1xuXHRcdFx0aWYgKGVsZW1lbnQuaGVpZ2h0KCkgPiAwKSB7XG5cdFx0XHRcdHZhciBlbFRvcCA9IGVsZW1lbnQub2Zmc2V0KCkudG9wLFxuXHRcdFx0XHRcdGVsTGVmdCA9IGVsZW1lbnQub2Zmc2V0KCkubGVmdCxcblx0XHRcdFx0XHRlbFJpZ2h0ID0gZWxMZWZ0ICsgZWxlbWVudC53aWR0aCgpLFxuXHRcdFx0XHRcdGVsQm90dG9tID0gZWxUb3AgKyBlbGVtZW50LmhlaWdodCgpO1xuXG5cdFx0XHRcdHZhciBpc0ludGVyc2VjdCA9ICEoZWxMZWZ0ID4gcmlnaHQgfHxcblx0XHRcdFx0XHRlbFJpZ2h0IDwgbGVmdCB8fFxuXHRcdFx0XHRcdGVsVG9wID4gYm90dG9tIHx8XG5cdFx0XHRcdFx0ZWxCb3R0b20gPCB0b3ApO1xuXG5cdFx0XHRcdGlmIChpc0ludGVyc2VjdCkge1xuXHRcdFx0XHRcdGhpdHMucHVzaChlbGVtZW50KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIGhpdHM7XG5cdH1cblxuXG5cdC8qKlxuXHQgKiBDYWxsZWQgd2hlbiB0aGUgdXNlciBzY3JvbGxzIHRoZSB3aW5kb3dcblx0ICovXG5cdGZ1bmN0aW9uIG9uU2Nyb2xsKHNjcm9sbE9mZnNldCkge1xuXHRcdC8vIHVuaXF1ZSB0aWNrIGlkXG5cdFx0Kyt0aWNrcztcblxuXHRcdC8vIHZpZXdwb3J0IHJlY3RhbmdsZVxuXHRcdHZhciB0b3AgPSBqV2luZG93LnNjcm9sbFRvcCgpLFxuXHRcdFx0bGVmdCA9IGpXaW5kb3cuc2Nyb2xsTGVmdCgpLFxuXHRcdFx0cmlnaHQgPSBsZWZ0ICsgaldpbmRvdy53aWR0aCgpLFxuXHRcdFx0Ym90dG9tID0gdG9wICsgaldpbmRvdy5oZWlnaHQoKTtcblxuXHRcdC8vIGRldGVybWluZSB3aGljaCBlbGVtZW50cyBhcmUgaW4gdmlld1xuXHRcdHZhciBpbnRlcnNlY3Rpb25zID0gZmluZEVsZW1lbnRzKHRvcCtvZmZzZXQudG9wICsgc2Nyb2xsT2Zmc2V0IHx8IDIwMCwgcmlnaHQrb2Zmc2V0LnJpZ2h0LCBib3R0b20rb2Zmc2V0LmJvdHRvbSwgbGVmdCtvZmZzZXQubGVmdCk7XG5cdFx0JC5lYWNoKGludGVyc2VjdGlvbnMsIGZ1bmN0aW9uKGksIGVsZW1lbnQpIHtcblxuXHRcdFx0dmFyIGxhc3RUaWNrID0gZWxlbWVudC5kYXRhKCdzY3JvbGxTcHk6dGlja3MnKTtcblx0XHRcdGlmICh0eXBlb2YgbGFzdFRpY2sgIT0gJ251bWJlcicpIHtcblx0XHRcdFx0Ly8gZW50ZXJlZCBpbnRvIHZpZXdcblx0XHRcdFx0ZWxlbWVudC50cmlnZ2VySGFuZGxlcignc2Nyb2xsU3B5OmVudGVyJyk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIHVwZGF0ZSB0aWNrIGlkXG5cdFx0XHRlbGVtZW50LmRhdGEoJ3Njcm9sbFNweTp0aWNrcycsIHRpY2tzKTtcblx0XHR9KTtcblxuXHRcdC8vIGRldGVybWluZSB3aGljaCBlbGVtZW50cyBhcmUgbm8gbG9uZ2VyIGluIHZpZXdcblx0XHQkLmVhY2goZWxlbWVudHNJblZpZXcsIGZ1bmN0aW9uKGksIGVsZW1lbnQpIHtcblx0XHRcdHZhciBsYXN0VGljayA9IGVsZW1lbnQuZGF0YSgnc2Nyb2xsU3B5OnRpY2tzJyk7XG5cdFx0XHRpZiAodHlwZW9mIGxhc3RUaWNrID09ICdudW1iZXInICYmIGxhc3RUaWNrICE9PSB0aWNrcykge1xuXHRcdFx0XHQvLyBleGl0ZWQgZnJvbSB2aWV3XG5cdFx0XHRcdGVsZW1lbnQudHJpZ2dlckhhbmRsZXIoJ3Njcm9sbFNweTpleGl0Jyk7XG5cdFx0XHRcdGVsZW1lbnQuZGF0YSgnc2Nyb2xsU3B5OnRpY2tzJywgbnVsbCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQvLyByZW1lbWJlciBlbGVtZW50cyBpbiB2aWV3IGZvciBuZXh0IHRpY2tcblx0XHRlbGVtZW50c0luVmlldyA9IGludGVyc2VjdGlvbnM7XG5cdH1cblxuXHQvKipcblx0ICogQ2FsbGVkIHdoZW4gd2luZG93IGlzIHJlc2l6ZWRcblx0Ki9cblx0ZnVuY3Rpb24gb25XaW5TaXplKCkge1xuXHRcdGpXaW5kb3cudHJpZ2dlcignc2Nyb2xsU3B5OndpblNpemUnKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBHZXQgdGltZSBpbiBtc1xuICAgKiBAbGljZW5zZSBodHRwczovL3Jhdy5naXRodWIuY29tL2phc2hrZW5hcy91bmRlcnNjb3JlL21hc3Rlci9MSUNFTlNFXG5cdCAqIEB0eXBlIHtmdW5jdGlvbn1cblx0ICogQHJldHVybiB7bnVtYmVyfVxuXHQgKi9cblx0dmFyIGdldFRpbWUgPSAoRGF0ZS5ub3cgfHwgZnVuY3Rpb24gKCkge1xuXHRcdHJldHVybiBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblx0fSk7XG5cblx0LyoqXG5cdCAqIFJldHVybnMgYSBmdW5jdGlvbiwgdGhhdCwgd2hlbiBpbnZva2VkLCB3aWxsIG9ubHkgYmUgdHJpZ2dlcmVkIGF0IG1vc3Qgb25jZVxuXHQgKiBkdXJpbmcgYSBnaXZlbiB3aW5kb3cgb2YgdGltZS4gTm9ybWFsbHksIHRoZSB0aHJvdHRsZWQgZnVuY3Rpb24gd2lsbCBydW5cblx0ICogYXMgbXVjaCBhcyBpdCBjYW4sIHdpdGhvdXQgZXZlciBnb2luZyBtb3JlIHRoYW4gb25jZSBwZXIgYHdhaXRgIGR1cmF0aW9uO1xuXHQgKiBidXQgaWYgeW91J2QgbGlrZSB0byBkaXNhYmxlIHRoZSBleGVjdXRpb24gb24gdGhlIGxlYWRpbmcgZWRnZSwgcGFzc1xuXHQgKiBge2xlYWRpbmc6IGZhbHNlfWAuIFRvIGRpc2FibGUgZXhlY3V0aW9uIG9uIHRoZSB0cmFpbGluZyBlZGdlLCBkaXR0by5cblx0ICogQGxpY2Vuc2UgaHR0cHM6Ly9yYXcuZ2l0aHViLmNvbS9qYXNoa2VuYXMvdW5kZXJzY29yZS9tYXN0ZXIvTElDRU5TRVxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9ufSBmdW5jXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSB3YWl0XG5cdCAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0aW9uc1xuXHQgKiBAcmV0dXJucyB7RnVuY3Rpb259XG5cdCAqL1xuXHRmdW5jdGlvbiB0aHJvdHRsZShmdW5jLCB3YWl0LCBvcHRpb25zKSB7XG5cdFx0dmFyIGNvbnRleHQsIGFyZ3MsIHJlc3VsdDtcblx0XHR2YXIgdGltZW91dCA9IG51bGw7XG5cdFx0dmFyIHByZXZpb3VzID0gMDtcblx0XHRvcHRpb25zIHx8IChvcHRpb25zID0ge30pO1xuXHRcdHZhciBsYXRlciA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdHByZXZpb3VzID0gb3B0aW9ucy5sZWFkaW5nID09PSBmYWxzZSA/IDAgOiBnZXRUaW1lKCk7XG5cdFx0XHR0aW1lb3V0ID0gbnVsbDtcblx0XHRcdHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG5cdFx0XHRjb250ZXh0ID0gYXJncyA9IG51bGw7XG5cdFx0fTtcblx0XHRyZXR1cm4gZnVuY3Rpb24gKCkge1xuXHRcdFx0dmFyIG5vdyA9IGdldFRpbWUoKTtcblx0XHRcdGlmICghcHJldmlvdXMgJiYgb3B0aW9ucy5sZWFkaW5nID09PSBmYWxzZSkgcHJldmlvdXMgPSBub3c7XG5cdFx0XHR2YXIgcmVtYWluaW5nID0gd2FpdCAtIChub3cgLSBwcmV2aW91cyk7XG5cdFx0XHRjb250ZXh0ID0gdGhpcztcblx0XHRcdGFyZ3MgPSBhcmd1bWVudHM7XG5cdFx0XHRpZiAocmVtYWluaW5nIDw9IDApIHtcblx0XHRcdFx0Y2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuXHRcdFx0XHR0aW1lb3V0ID0gbnVsbDtcblx0XHRcdFx0cHJldmlvdXMgPSBub3c7XG5cdFx0XHRcdHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG5cdFx0XHRcdGNvbnRleHQgPSBhcmdzID0gbnVsbDtcblx0XHRcdH0gZWxzZSBpZiAoIXRpbWVvdXQgJiYgb3B0aW9ucy50cmFpbGluZyAhPT0gZmFsc2UpIHtcblx0XHRcdFx0dGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHJlbWFpbmluZyk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdH07XG5cdH07XG5cblx0LyoqXG5cdCAqIEVuYWJsZXMgU2Nyb2xsU3B5IHVzaW5nIGEgc2VsZWN0b3Jcblx0ICogQHBhcmFtIHtqUXVlcnl8c3RyaW5nfSBzZWxlY3RvciAgVGhlIGVsZW1lbnRzIGNvbGxlY3Rpb24sIG9yIGEgc2VsZWN0b3Jcblx0ICogQHBhcmFtIHtPYmplY3Q9fSBvcHRpb25zXHRPcHRpb25hbC5cbiAgICAgICAgdGhyb3R0bGUgOiBudW1iZXIgLT4gc2Nyb2xsc3B5IHRocm90dGxpbmcuIERlZmF1bHQ6IDEwMCBtc1xuICAgICAgICBvZmZzZXRUb3AgOiBudW1iZXIgLT4gb2Zmc2V0IGZyb20gdG9wLiBEZWZhdWx0OiAwXG4gICAgICAgIG9mZnNldFJpZ2h0IDogbnVtYmVyIC0+IG9mZnNldCBmcm9tIHJpZ2h0LiBEZWZhdWx0OiAwXG4gICAgICAgIG9mZnNldEJvdHRvbSA6IG51bWJlciAtPiBvZmZzZXQgZnJvbSBib3R0b20uIERlZmF1bHQ6IDBcbiAgICAgICAgb2Zmc2V0TGVmdCA6IG51bWJlciAtPiBvZmZzZXQgZnJvbSBsZWZ0LiBEZWZhdWx0OiAwXG5cdCAqIEByZXR1cm5zIHtqUXVlcnl9XG5cdCAqL1xuXHQkLnNjcm9sbFNweSA9IGZ1bmN0aW9uKHNlbGVjdG9yLCBvcHRpb25zKSB7XG5cdCAgdmFyIGRlZmF1bHRzID0ge1xuXHRcdFx0dGhyb3R0bGU6IDEwMCxcblx0XHRcdHNjcm9sbE9mZnNldDogMjAwIC8vIG9mZnNldCAtIDIwMCBhbGxvd3MgZWxlbWVudHMgbmVhciBib3R0b20gb2YgcGFnZSB0byBzY3JvbGxcbiAgICB9O1xuICAgIG9wdGlvbnMgPSAkLmV4dGVuZChkZWZhdWx0cywgb3B0aW9ucyk7XG5cblx0XHR2YXIgdmlzaWJsZSA9IFtdO1xuXHRcdHNlbGVjdG9yID0gJChzZWxlY3Rvcik7XG5cdFx0c2VsZWN0b3IuZWFjaChmdW5jdGlvbihpLCBlbGVtZW50KSB7XG5cdFx0XHRlbGVtZW50cy5wdXNoKCQoZWxlbWVudCkpO1xuXHRcdFx0JChlbGVtZW50KS5kYXRhKFwic2Nyb2xsU3B5OmlkXCIsIGkpO1xuXHRcdFx0Ly8gU21vb3RoIHNjcm9sbCB0byBzZWN0aW9uXG5cdFx0ICAkKCdhW2hyZWY9XCIjJyArICQoZWxlbWVudCkuYXR0cignaWQnKSArICdcIl0nKS5jbGljayhmdW5jdGlvbihlKSB7XG5cdFx0ICAgIGUucHJldmVudERlZmF1bHQoKTtcblx0XHQgICAgdmFyIG9mZnNldCA9ICQoTWF0ZXJpYWxpemUuZXNjYXBlSGFzaCh0aGlzLmhhc2gpKS5vZmZzZXQoKS50b3AgKyAxO1xuXHQgICAgXHQkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7IHNjcm9sbFRvcDogb2Zmc2V0IC0gb3B0aW9ucy5zY3JvbGxPZmZzZXQgfSwge2R1cmF0aW9uOiA0MDAsIHF1ZXVlOiBmYWxzZSwgZWFzaW5nOiAnZWFzZU91dEN1YmljJ30pO1xuXHRcdCAgfSk7XG5cdFx0fSk7XG5cblx0XHRvZmZzZXQudG9wID0gb3B0aW9ucy5vZmZzZXRUb3AgfHwgMDtcblx0XHRvZmZzZXQucmlnaHQgPSBvcHRpb25zLm9mZnNldFJpZ2h0IHx8IDA7XG5cdFx0b2Zmc2V0LmJvdHRvbSA9IG9wdGlvbnMub2Zmc2V0Qm90dG9tIHx8IDA7XG5cdFx0b2Zmc2V0LmxlZnQgPSBvcHRpb25zLm9mZnNldExlZnQgfHwgMDtcblxuXHRcdHZhciB0aHJvdHRsZWRTY3JvbGwgPSB0aHJvdHRsZShmdW5jdGlvbigpIHtcblx0XHRcdG9uU2Nyb2xsKG9wdGlvbnMuc2Nyb2xsT2Zmc2V0KTtcblx0XHR9LCBvcHRpb25zLnRocm90dGxlIHx8IDEwMCk7XG5cdFx0dmFyIHJlYWR5U2Nyb2xsID0gZnVuY3Rpb24oKXtcblx0XHRcdCQoZG9jdW1lbnQpLnJlYWR5KHRocm90dGxlZFNjcm9sbCk7XG5cdFx0fTtcblxuXHRcdGlmICghaXNTcHlpbmcpIHtcblx0XHRcdGpXaW5kb3cub24oJ3Njcm9sbCcsIHJlYWR5U2Nyb2xsKTtcblx0XHRcdGpXaW5kb3cub24oJ3Jlc2l6ZScsIHJlYWR5U2Nyb2xsKTtcblx0XHRcdGlzU3B5aW5nID0gdHJ1ZTtcblx0XHR9XG5cblx0XHQvLyBwZXJmb3JtIGEgc2NhbiBvbmNlLCBhZnRlciBjdXJyZW50IGV4ZWN1dGlvbiBjb250ZXh0LCBhbmQgYWZ0ZXIgZG9tIGlzIHJlYWR5XG5cdFx0c2V0VGltZW91dChyZWFkeVNjcm9sbCwgMCk7XG5cblxuXHRcdHNlbGVjdG9yLm9uKCdzY3JvbGxTcHk6ZW50ZXInLCBmdW5jdGlvbigpIHtcblx0XHRcdHZpc2libGUgPSAkLmdyZXAodmlzaWJsZSwgZnVuY3Rpb24odmFsdWUpIHtcblx0ICAgICAgcmV0dXJuIHZhbHVlLmhlaWdodCgpICE9IDA7XG5cdCAgICB9KTtcblxuXHRcdFx0dmFyICR0aGlzID0gJCh0aGlzKTtcblxuXHRcdFx0aWYgKHZpc2libGVbMF0pIHtcblx0XHRcdFx0JCgnYVtocmVmPVwiIycgKyB2aXNpYmxlWzBdLmF0dHIoJ2lkJykgKyAnXCJdJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuXHRcdFx0XHRpZiAoJHRoaXMuZGF0YSgnc2Nyb2xsU3B5OmlkJykgPCB2aXNpYmxlWzBdLmRhdGEoJ3Njcm9sbFNweTppZCcpKSB7XG5cdFx0XHRcdFx0dmlzaWJsZS51bnNoaWZ0KCQodGhpcykpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdHZpc2libGUucHVzaCgkKHRoaXMpKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdHZpc2libGUucHVzaCgkKHRoaXMpKTtcblx0XHRcdH1cblxuXG5cdFx0XHQkKCdhW2hyZWY9XCIjJyArIHZpc2libGVbMF0uYXR0cignaWQnKSArICdcIl0nKS5hZGRDbGFzcygnYWN0aXZlJyk7XG5cdFx0fSk7XG5cdFx0c2VsZWN0b3Iub24oJ3Njcm9sbFNweTpleGl0JywgZnVuY3Rpb24oKSB7XG5cdFx0XHR2aXNpYmxlID0gJC5ncmVwKHZpc2libGUsIGZ1bmN0aW9uKHZhbHVlKSB7XG5cdCAgICAgIHJldHVybiB2YWx1ZS5oZWlnaHQoKSAhPSAwO1xuXHQgICAgfSk7XG5cblx0XHRcdGlmICh2aXNpYmxlWzBdKSB7XG5cdFx0XHRcdCQoJ2FbaHJlZj1cIiMnICsgdmlzaWJsZVswXS5hdHRyKCdpZCcpICsgJ1wiXScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcblx0XHRcdFx0dmFyICR0aGlzID0gJCh0aGlzKTtcblx0XHRcdFx0dmlzaWJsZSA9ICQuZ3JlcCh2aXNpYmxlLCBmdW5jdGlvbih2YWx1ZSkge1xuXHQgICAgICAgIHJldHVybiB2YWx1ZS5hdHRyKCdpZCcpICE9ICR0aGlzLmF0dHIoJ2lkJyk7XG5cdCAgICAgIH0pO1xuXHQgICAgICBpZiAodmlzaWJsZVswXSkgeyAvLyBDaGVjayBpZiBlbXB0eVxuXHRcdFx0XHRcdCQoJ2FbaHJlZj1cIiMnICsgdmlzaWJsZVswXS5hdHRyKCdpZCcpICsgJ1wiXScpLmFkZENsYXNzKCdhY3RpdmUnKTtcblx0ICAgICAgfVxuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIHNlbGVjdG9yO1xuXHR9O1xuXG5cdC8qKlxuXHQgKiBMaXN0ZW4gZm9yIHdpbmRvdyByZXNpemUgZXZlbnRzXG5cdCAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0aW9uc1x0XHRcdFx0XHRcdE9wdGlvbmFsLiBTZXQgeyB0aHJvdHRsZTogbnVtYmVyIH0gdG8gY2hhbmdlIHRocm90dGxpbmcuIERlZmF1bHQ6IDEwMCBtc1xuXHQgKiBAcmV0dXJucyB7alF1ZXJ5fVx0XHQkKHdpbmRvdylcblx0ICovXG5cdCQud2luU2l6ZVNweSA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblx0XHQkLndpblNpemVTcHkgPSBmdW5jdGlvbigpIHsgcmV0dXJuIGpXaW5kb3c7IH07IC8vIGxvY2sgZnJvbSBtdWx0aXBsZSBjYWxsc1xuXHRcdG9wdGlvbnMgPSBvcHRpb25zIHx8IHtcblx0XHRcdHRocm90dGxlOiAxMDBcblx0XHR9O1xuXHRcdHJldHVybiBqV2luZG93Lm9uKCdyZXNpemUnLCB0aHJvdHRsZShvbldpblNpemUsIG9wdGlvbnMudGhyb3R0bGUgfHwgMTAwKSk7XG5cdH07XG5cblx0LyoqXG5cdCAqIEVuYWJsZXMgU2Nyb2xsU3B5IG9uIGEgY29sbGVjdGlvbiBvZiBlbGVtZW50c1xuXHQgKiBlLmcuICQoJy5zY3JvbGxTcHknKS5zY3JvbGxTcHkoKVxuXHQgKiBAcGFyYW0ge09iamVjdD19IG9wdGlvbnNcdE9wdGlvbmFsLlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRocm90dGxlIDogbnVtYmVyIC0+IHNjcm9sbHNweSB0aHJvdHRsaW5nLiBEZWZhdWx0OiAxMDAgbXNcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRvZmZzZXRUb3AgOiBudW1iZXIgLT4gb2Zmc2V0IGZyb20gdG9wLiBEZWZhdWx0OiAwXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0b2Zmc2V0UmlnaHQgOiBudW1iZXIgLT4gb2Zmc2V0IGZyb20gcmlnaHQuIERlZmF1bHQ6IDBcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRvZmZzZXRCb3R0b20gOiBudW1iZXIgLT4gb2Zmc2V0IGZyb20gYm90dG9tLiBEZWZhdWx0OiAwXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0b2Zmc2V0TGVmdCA6IG51bWJlciAtPiBvZmZzZXQgZnJvbSBsZWZ0LiBEZWZhdWx0OiAwXG5cdCAqIEByZXR1cm5zIHtqUXVlcnl9XG5cdCAqL1xuXHQkLmZuLnNjcm9sbFNweSA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblx0XHRyZXR1cm4gJC5zY3JvbGxTcHkoJCh0aGlzKSwgb3B0aW9ucyk7XG5cdH07XG5cbn0pKGpRdWVyeSk7XG47KGZ1bmN0aW9uICgkKSB7XG4gICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuXG4gICAgLy8gRnVuY3Rpb24gdG8gdXBkYXRlIGxhYmVscyBvZiB0ZXh0IGZpZWxkc1xuICAgIE1hdGVyaWFsaXplLnVwZGF0ZVRleHRGaWVsZHMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBpbnB1dF9zZWxlY3RvciA9ICdpbnB1dFt0eXBlPXRleHRdLCBpbnB1dFt0eXBlPXBhc3N3b3JkXSwgaW5wdXRbdHlwZT1lbWFpbF0sIGlucHV0W3R5cGU9dXJsXSwgaW5wdXRbdHlwZT10ZWxdLCBpbnB1dFt0eXBlPW51bWJlcl0sIGlucHV0W3R5cGU9c2VhcmNoXSwgdGV4dGFyZWEnO1xuICAgICAgJChpbnB1dF9zZWxlY3RvcikuZWFjaChmdW5jdGlvbihpbmRleCwgZWxlbWVudCkge1xuICAgICAgICBpZiAoJChlbGVtZW50KS52YWwoKS5sZW5ndGggPiAwIHx8IGVsZW1lbnQuYXV0b2ZvY3VzIHx8JCh0aGlzKS5hdHRyKCdwbGFjZWhvbGRlcicpICE9PSB1bmRlZmluZWQgfHwgJChlbGVtZW50KVswXS52YWxpZGl0eS5iYWRJbnB1dCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICQodGhpcykuc2libGluZ3MoJ2xhYmVsJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICQodGhpcykuc2libGluZ3MoJ2xhYmVsJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgLy8gVGV4dCBiYXNlZCBpbnB1dHNcbiAgICB2YXIgaW5wdXRfc2VsZWN0b3IgPSAnaW5wdXRbdHlwZT10ZXh0XSwgaW5wdXRbdHlwZT1wYXNzd29yZF0sIGlucHV0W3R5cGU9ZW1haWxdLCBpbnB1dFt0eXBlPXVybF0sIGlucHV0W3R5cGU9dGVsXSwgaW5wdXRbdHlwZT1udW1iZXJdLCBpbnB1dFt0eXBlPXNlYXJjaF0sIHRleHRhcmVhJztcblxuICAgIC8vIEFkZCBhY3RpdmUgaWYgZm9ybSBhdXRvIGNvbXBsZXRlXG4gICAgJChkb2N1bWVudCkub24oJ2NoYW5nZScsIGlucHV0X3NlbGVjdG9yLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpZigkKHRoaXMpLnZhbCgpLmxlbmd0aCAhPT0gMCB8fCAkKHRoaXMpLmF0dHIoJ3BsYWNlaG9sZGVyJykgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAkKHRoaXMpLnNpYmxpbmdzKCdsYWJlbCcpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgIH1cbiAgICAgIHZhbGlkYXRlX2ZpZWxkKCQodGhpcykpO1xuICAgIH0pO1xuXG4gICAgLy8gQWRkIGFjdGl2ZSBpZiBpbnB1dCBlbGVtZW50IGhhcyBiZWVuIHByZS1wb3B1bGF0ZWQgb24gZG9jdW1lbnQgcmVhZHlcbiAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICAgIE1hdGVyaWFsaXplLnVwZGF0ZVRleHRGaWVsZHMoKTtcbiAgICB9KTtcblxuICAgIC8vIEhUTUwgRE9NIEZPUk0gUkVTRVQgaGFuZGxpbmdcbiAgICAkKGRvY3VtZW50KS5vbigncmVzZXQnLCBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgZm9ybVJlc2V0ID0gJChlLnRhcmdldCk7XG4gICAgICBpZiAoZm9ybVJlc2V0LmlzKCdmb3JtJykpIHtcbiAgICAgICAgZm9ybVJlc2V0LmZpbmQoaW5wdXRfc2VsZWN0b3IpLnJlbW92ZUNsYXNzKCd2YWxpZCcpLnJlbW92ZUNsYXNzKCdpbnZhbGlkJyk7XG4gICAgICAgIGZvcm1SZXNldC5maW5kKGlucHV0X3NlbGVjdG9yKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAoJCh0aGlzKS5hdHRyKCd2YWx1ZScpID09PSAnJykge1xuICAgICAgICAgICAgJCh0aGlzKS5zaWJsaW5ncygnbGFiZWwnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBSZXNldCBzZWxlY3RcbiAgICAgICAgZm9ybVJlc2V0LmZpbmQoJ3NlbGVjdC5pbml0aWFsaXplZCcpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciByZXNldF90ZXh0ID0gZm9ybVJlc2V0LmZpbmQoJ29wdGlvbltzZWxlY3RlZF0nKS50ZXh0KCk7XG4gICAgICAgICAgZm9ybVJlc2V0LnNpYmxpbmdzKCdpbnB1dC5zZWxlY3QtZHJvcGRvd24nKS52YWwocmVzZXRfdGV4dCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gQWRkIGFjdGl2ZSB3aGVuIGVsZW1lbnQgaGFzIGZvY3VzXG4gICAgJChkb2N1bWVudCkub24oJ2ZvY3VzJywgaW5wdXRfc2VsZWN0b3IsIGZ1bmN0aW9uICgpIHtcbiAgICAgICQodGhpcykuc2libGluZ3MoJ2xhYmVsLCAucHJlZml4JykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgIH0pO1xuXG4gICAgJChkb2N1bWVudCkub24oJ2JsdXInLCBpbnB1dF9zZWxlY3RvciwgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyICRpbnB1dEVsZW1lbnQgPSAkKHRoaXMpO1xuICAgICAgdmFyIHNlbGVjdG9yID0gXCIucHJlZml4XCI7XG5cbiAgICAgIGlmICgkaW5wdXRFbGVtZW50LnZhbCgpLmxlbmd0aCA9PT0gMCAmJiAkaW5wdXRFbGVtZW50WzBdLnZhbGlkaXR5LmJhZElucHV0ICE9PSB0cnVlICYmICRpbnB1dEVsZW1lbnQuYXR0cigncGxhY2Vob2xkZXInKSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHNlbGVjdG9yICs9IFwiLCBsYWJlbFwiO1xuICAgICAgfVxuXG4gICAgICAkaW5wdXRFbGVtZW50LnNpYmxpbmdzKHNlbGVjdG9yKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG5cbiAgICAgIHZhbGlkYXRlX2ZpZWxkKCRpbnB1dEVsZW1lbnQpO1xuICAgIH0pO1xuXG4gICAgd2luZG93LnZhbGlkYXRlX2ZpZWxkID0gZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgICB2YXIgaGFzTGVuZ3RoID0gb2JqZWN0LmF0dHIoJ2xlbmd0aCcpICE9PSB1bmRlZmluZWQ7XG4gICAgICB2YXIgbGVuQXR0ciA9IHBhcnNlSW50KG9iamVjdC5hdHRyKCdsZW5ndGgnKSk7XG4gICAgICB2YXIgbGVuID0gb2JqZWN0LnZhbCgpLmxlbmd0aDtcblxuICAgICAgaWYgKG9iamVjdC52YWwoKS5sZW5ndGggPT09IDAgJiYgb2JqZWN0WzBdLnZhbGlkaXR5LmJhZElucHV0ID09PSBmYWxzZSkge1xuICAgICAgICBpZiAob2JqZWN0Lmhhc0NsYXNzKCd2YWxpZGF0ZScpKSB7XG4gICAgICAgICAgb2JqZWN0LnJlbW92ZUNsYXNzKCd2YWxpZCcpO1xuICAgICAgICAgIG9iamVjdC5yZW1vdmVDbGFzcygnaW52YWxpZCcpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgaWYgKG9iamVjdC5oYXNDbGFzcygndmFsaWRhdGUnKSkge1xuICAgICAgICAgIC8vIENoZWNrIGZvciBjaGFyYWN0ZXIgY291bnRlciBhdHRyaWJ1dGVzXG4gICAgICAgICAgaWYgKChvYmplY3QuaXMoJzp2YWxpZCcpICYmIGhhc0xlbmd0aCAmJiAobGVuIDw9IGxlbkF0dHIpKSB8fCAob2JqZWN0LmlzKCc6dmFsaWQnKSAmJiAhaGFzTGVuZ3RoKSkge1xuICAgICAgICAgICAgb2JqZWN0LnJlbW92ZUNsYXNzKCdpbnZhbGlkJyk7XG4gICAgICAgICAgICBvYmplY3QuYWRkQ2xhc3MoJ3ZhbGlkJyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb2JqZWN0LnJlbW92ZUNsYXNzKCd2YWxpZCcpO1xuICAgICAgICAgICAgb2JqZWN0LmFkZENsYXNzKCdpbnZhbGlkJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8vIFJhZGlvIGFuZCBDaGVja2JveCBmb2N1cyBjbGFzc1xuICAgIHZhciByYWRpb19jaGVja2JveCA9ICdpbnB1dFt0eXBlPXJhZGlvXSwgaW5wdXRbdHlwZT1jaGVja2JveF0nO1xuICAgICQoZG9jdW1lbnQpLm9uKCdrZXl1cC5yYWRpbycsIHJhZGlvX2NoZWNrYm94LCBmdW5jdGlvbihlKSB7XG4gICAgICAvLyBUQUIsIGNoZWNrIGlmIHRhYmJpbmcgdG8gcmFkaW8gb3IgY2hlY2tib3guXG4gICAgICBpZiAoZS53aGljaCA9PT0gOSkge1xuICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCd0YWJiZWQnKTtcbiAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcbiAgICAgICAgJHRoaXMub25lKCdibHVyJywgZnVuY3Rpb24oZSkge1xuXG4gICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygndGFiYmVkJyk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBUZXh0YXJlYSBBdXRvIFJlc2l6ZVxuICAgIHZhciBoaWRkZW5EaXYgPSAkKCcuaGlkZGVuZGl2JykuZmlyc3QoKTtcbiAgICBpZiAoIWhpZGRlbkRpdi5sZW5ndGgpIHtcbiAgICAgIGhpZGRlbkRpdiA9ICQoJzxkaXYgY2xhc3M9XCJoaWRkZW5kaXYgY29tbW9uXCI+PC9kaXY+Jyk7XG4gICAgICAkKCdib2R5JykuYXBwZW5kKGhpZGRlbkRpdik7XG4gICAgfVxuICAgIHZhciB0ZXh0X2FyZWFfc2VsZWN0b3IgPSAnLm1hdGVyaWFsaXplLXRleHRhcmVhJztcblxuICAgIGZ1bmN0aW9uIHRleHRhcmVhQXV0b1Jlc2l6ZSgkdGV4dGFyZWEpIHtcbiAgICAgIC8vIFNldCBmb250IHByb3BlcnRpZXMgb2YgaGlkZGVuRGl2XG5cbiAgICAgIHZhciBmb250RmFtaWx5ID0gJHRleHRhcmVhLmNzcygnZm9udC1mYW1pbHknKTtcbiAgICAgIHZhciBmb250U2l6ZSA9ICR0ZXh0YXJlYS5jc3MoJ2ZvbnQtc2l6ZScpO1xuICAgICAgdmFyIGxpbmVIZWlnaHQgPSAkdGV4dGFyZWEuY3NzKCdsaW5lLWhlaWdodCcpO1xuXG4gICAgICBpZiAoZm9udFNpemUpIHsgaGlkZGVuRGl2LmNzcygnZm9udC1zaXplJywgZm9udFNpemUpOyB9XG4gICAgICBpZiAoZm9udEZhbWlseSkgeyBoaWRkZW5EaXYuY3NzKCdmb250LWZhbWlseScsIGZvbnRGYW1pbHkpOyB9XG4gICAgICBpZiAobGluZUhlaWdodCkgeyBoaWRkZW5EaXYuY3NzKCdsaW5lLWhlaWdodCcsIGxpbmVIZWlnaHQpOyB9XG5cbiAgICAgIGlmICgkdGV4dGFyZWEuYXR0cignd3JhcCcpID09PSBcIm9mZlwiKSB7XG4gICAgICAgIGhpZGRlbkRpdi5jc3MoJ292ZXJmbG93LXdyYXAnLCBcIm5vcm1hbFwiKVxuICAgICAgICAgICAgICAgICAuY3NzKCd3aGl0ZS1zcGFjZScsIFwicHJlXCIpO1xuICAgICAgfVxuXG4gICAgICBoaWRkZW5EaXYudGV4dCgkdGV4dGFyZWEudmFsKCkgKyAnXFxuJyk7XG4gICAgICB2YXIgY29udGVudCA9IGhpZGRlbkRpdi5odG1sKCkucmVwbGFjZSgvXFxuL2csICc8YnI+Jyk7XG4gICAgICBoaWRkZW5EaXYuaHRtbChjb250ZW50KTtcblxuXG4gICAgICAvLyBXaGVuIHRleHRhcmVhIGlzIGhpZGRlbiwgd2lkdGggZ29lcyBjcmF6eS5cbiAgICAgIC8vIEFwcHJveGltYXRlIHdpdGggaGFsZiBvZiB3aW5kb3cgc2l6ZVxuXG4gICAgICBpZiAoJHRleHRhcmVhLmlzKCc6dmlzaWJsZScpKSB7XG4gICAgICAgIGhpZGRlbkRpdi5jc3MoJ3dpZHRoJywgJHRleHRhcmVhLndpZHRoKCkpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGhpZGRlbkRpdi5jc3MoJ3dpZHRoJywgJCh3aW5kb3cpLndpZHRoKCkvMik7XG4gICAgICB9XG5cbiAgICAgICR0ZXh0YXJlYS5jc3MoJ2hlaWdodCcsIGhpZGRlbkRpdi5oZWlnaHQoKSk7XG4gICAgfVxuXG4gICAgJCh0ZXh0X2FyZWFfc2VsZWN0b3IpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgdmFyICR0ZXh0YXJlYSA9ICQodGhpcyk7XG4gICAgICBpZiAoJHRleHRhcmVhLnZhbCgpLmxlbmd0aCkge1xuICAgICAgICB0ZXh0YXJlYUF1dG9SZXNpemUoJHRleHRhcmVhKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgICQoJ2JvZHknKS5vbigna2V5dXAga2V5ZG93biBhdXRvcmVzaXplJywgdGV4dF9hcmVhX3NlbGVjdG9yLCBmdW5jdGlvbiAoKSB7XG4gICAgICB0ZXh0YXJlYUF1dG9SZXNpemUoJCh0aGlzKSk7XG4gICAgfSk7XG5cbiAgICAvLyBGaWxlIElucHV0IFBhdGhcbiAgICAkKGRvY3VtZW50KS5vbignY2hhbmdlJywgJy5maWxlLWZpZWxkIGlucHV0W3R5cGU9XCJmaWxlXCJdJywgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGZpbGVfZmllbGQgPSAkKHRoaXMpLmNsb3Nlc3QoJy5maWxlLWZpZWxkJyk7XG4gICAgICB2YXIgcGF0aF9pbnB1dCA9IGZpbGVfZmllbGQuZmluZCgnaW5wdXQuZmlsZS1wYXRoJyk7XG4gICAgICB2YXIgZmlsZXMgICAgICA9ICQodGhpcylbMF0uZmlsZXM7XG4gICAgICB2YXIgZmlsZV9uYW1lcyA9IFtdO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmaWxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBmaWxlX25hbWVzLnB1c2goZmlsZXNbaV0ubmFtZSk7XG4gICAgICB9XG4gICAgICBwYXRoX2lucHV0LnZhbChmaWxlX25hbWVzLmpvaW4oXCIsIFwiKSk7XG4gICAgICBwYXRoX2lucHV0LnRyaWdnZXIoJ2NoYW5nZScpO1xuICAgIH0pO1xuXG4gICAgLyoqKioqKioqKioqKioqKipcbiAgICAqICBSYW5nZSBJbnB1dCAgKlxuICAgICoqKioqKioqKioqKioqKiovXG5cbiAgICB2YXIgcmFuZ2VfdHlwZSA9ICdpbnB1dFt0eXBlPXJhbmdlXSc7XG4gICAgdmFyIHJhbmdlX21vdXNlZG93biA9IGZhbHNlO1xuICAgIHZhciBsZWZ0O1xuXG4gICAgJChyYW5nZV90eXBlKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciB0aHVtYiA9ICQoJzxzcGFuIGNsYXNzPVwidGh1bWJcIj48c3BhbiBjbGFzcz1cInZhbHVlXCI+PC9zcGFuPjwvc3Bhbj4nKTtcbiAgICAgICQodGhpcykuYWZ0ZXIodGh1bWIpO1xuICAgIH0pO1xuXG4gICAgdmFyIHJhbmdlX3dyYXBwZXIgPSAnLnJhbmdlLWZpZWxkJztcbiAgICAkKGRvY3VtZW50KS5vbignY2hhbmdlJywgcmFuZ2VfdHlwZSwgZnVuY3Rpb24oZSkge1xuICAgICAgdmFyIHRodW1iID0gJCh0aGlzKS5zaWJsaW5ncygnLnRodW1iJyk7XG4gICAgICB0aHVtYi5maW5kKCcudmFsdWUnKS5odG1sKCQodGhpcykudmFsKCkpO1xuICAgIH0pO1xuXG4gICAgJChkb2N1bWVudCkub24oJ2lucHV0IG1vdXNlZG93biB0b3VjaHN0YXJ0JywgcmFuZ2VfdHlwZSwgZnVuY3Rpb24oZSkge1xuICAgICAgdmFyIHRodW1iID0gJCh0aGlzKS5zaWJsaW5ncygnLnRodW1iJyk7XG4gICAgICB2YXIgd2lkdGggPSAkKHRoaXMpLm91dGVyV2lkdGgoKTtcblxuICAgICAgLy8gSWYgdGh1bWIgaW5kaWNhdG9yIGRvZXMgbm90IGV4aXN0IHlldCwgY3JlYXRlIGl0XG4gICAgICBpZiAodGh1bWIubGVuZ3RoIDw9IDApIHtcbiAgICAgICAgdGh1bWIgPSAkKCc8c3BhbiBjbGFzcz1cInRodW1iXCI+PHNwYW4gY2xhc3M9XCJ2YWx1ZVwiPjwvc3Bhbj48L3NwYW4+Jyk7XG4gICAgICAgICQodGhpcykuYWZ0ZXIodGh1bWIpO1xuICAgICAgfVxuXG4gICAgICAvLyBTZXQgaW5kaWNhdG9yIHZhbHVlXG4gICAgICB0aHVtYi5maW5kKCcudmFsdWUnKS5odG1sKCQodGhpcykudmFsKCkpO1xuXG4gICAgICByYW5nZV9tb3VzZWRvd24gPSB0cnVlO1xuICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlJyk7XG5cbiAgICAgIGlmICghdGh1bWIuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XG4gICAgICAgIHRodW1iLnZlbG9jaXR5KHsgaGVpZ2h0OiBcIjMwcHhcIiwgd2lkdGg6IFwiMzBweFwiLCB0b3A6IFwiLTIwcHhcIiwgbWFyZ2luTGVmdDogXCItMTVweFwifSwgeyBkdXJhdGlvbjogMzAwLCBlYXNpbmc6ICdlYXNlT3V0RXhwbycgfSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChlLnR5cGUgIT09ICdpbnB1dCcpIHtcbiAgICAgICAgaWYoZS5wYWdlWCA9PT0gdW5kZWZpbmVkIHx8IGUucGFnZVggPT09IG51bGwpey8vbW9iaWxlXG4gICAgICAgICAgIGxlZnQgPSBlLm9yaWdpbmFsRXZlbnQudG91Y2hlc1swXS5wYWdlWCAtICQodGhpcykub2Zmc2V0KCkubGVmdDtcbiAgICAgICAgfVxuICAgICAgICBlbHNleyAvLyBkZXNrdG9wXG4gICAgICAgICAgIGxlZnQgPSBlLnBhZ2VYIC0gJCh0aGlzKS5vZmZzZXQoKS5sZWZ0O1xuICAgICAgICB9XG4gICAgICAgIGlmIChsZWZ0IDwgMCkge1xuICAgICAgICAgIGxlZnQgPSAwO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGxlZnQgPiB3aWR0aCkge1xuICAgICAgICAgIGxlZnQgPSB3aWR0aDtcbiAgICAgICAgfVxuICAgICAgICB0aHVtYi5hZGRDbGFzcygnYWN0aXZlJykuY3NzKCdsZWZ0JywgbGVmdCk7XG4gICAgICB9XG5cbiAgICAgIHRodW1iLmZpbmQoJy52YWx1ZScpLmh0bWwoJCh0aGlzKS52YWwoKSk7XG4gICAgfSk7XG5cbiAgICAkKGRvY3VtZW50KS5vbignbW91c2V1cCB0b3VjaGVuZCcsIHJhbmdlX3dyYXBwZXIsIGZ1bmN0aW9uKCkge1xuICAgICAgcmFuZ2VfbW91c2Vkb3duID0gZmFsc2U7XG4gICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICB9KTtcblxuICAgICQoZG9jdW1lbnQpLm9uKCdtb3VzZW1vdmUgdG91Y2htb3ZlJywgcmFuZ2Vfd3JhcHBlciwgZnVuY3Rpb24oZSkge1xuICAgICAgdmFyIHRodW1iID0gJCh0aGlzKS5jaGlsZHJlbignLnRodW1iJyk7XG4gICAgICB2YXIgbGVmdDtcbiAgICAgIGlmIChyYW5nZV9tb3VzZWRvd24pIHtcbiAgICAgICAgaWYgKCF0aHVtYi5oYXNDbGFzcygnYWN0aXZlJykpIHtcbiAgICAgICAgICB0aHVtYi52ZWxvY2l0eSh7IGhlaWdodDogJzMwcHgnLCB3aWR0aDogJzMwcHgnLCB0b3A6ICctMjBweCcsIG1hcmdpbkxlZnQ6ICctMTVweCd9LCB7IGR1cmF0aW9uOiAzMDAsIGVhc2luZzogJ2Vhc2VPdXRFeHBvJyB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZS5wYWdlWCA9PT0gdW5kZWZpbmVkIHx8IGUucGFnZVggPT09IG51bGwpIHsgLy9tb2JpbGVcbiAgICAgICAgICBsZWZ0ID0gZS5vcmlnaW5hbEV2ZW50LnRvdWNoZXNbMF0ucGFnZVggLSAkKHRoaXMpLm9mZnNldCgpLmxlZnQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZXsgLy8gZGVza3RvcFxuICAgICAgICAgIGxlZnQgPSBlLnBhZ2VYIC0gJCh0aGlzKS5vZmZzZXQoKS5sZWZ0O1xuICAgICAgICB9XG4gICAgICAgIHZhciB3aWR0aCA9ICQodGhpcykub3V0ZXJXaWR0aCgpO1xuXG4gICAgICAgIGlmIChsZWZ0IDwgMCkge1xuICAgICAgICAgIGxlZnQgPSAwO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGxlZnQgPiB3aWR0aCkge1xuICAgICAgICAgIGxlZnQgPSB3aWR0aDtcbiAgICAgICAgfVxuICAgICAgICB0aHVtYi5hZGRDbGFzcygnYWN0aXZlJykuY3NzKCdsZWZ0JywgbGVmdCk7XG4gICAgICAgIHRodW1iLmZpbmQoJy52YWx1ZScpLmh0bWwodGh1bWIuc2libGluZ3MocmFuZ2VfdHlwZSkudmFsKCkpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgJChkb2N1bWVudCkub24oJ21vdXNlb3V0IHRvdWNobGVhdmUnLCByYW5nZV93cmFwcGVyLCBmdW5jdGlvbigpIHtcbiAgICAgIGlmICghcmFuZ2VfbW91c2Vkb3duKSB7XG5cbiAgICAgICAgdmFyIHRodW1iID0gJCh0aGlzKS5jaGlsZHJlbignLnRodW1iJyk7XG5cbiAgICAgICAgaWYgKHRodW1iLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xuICAgICAgICAgIHRodW1iLnZlbG9jaXR5KHsgaGVpZ2h0OiAnMCcsIHdpZHRoOiAnMCcsIHRvcDogJzEwcHgnLCBtYXJnaW5MZWZ0OiAnLTZweCd9LCB7IGR1cmF0aW9uOiAxMDAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdGh1bWIucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgICogQXV0byBjb21wbGV0ZSBwbHVnaW4gICpcbiAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKi9cbiAgICAkLmZuLmF1dG9jb21wbGV0ZSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAvLyBEZWZhdWx0c1xuICAgICAgdmFyIGRlZmF1bHRzID0ge1xuICAgICAgICBkYXRhOiB7fVxuICAgICAgfTtcblxuICAgICAgb3B0aW9ucyA9ICQuZXh0ZW5kKGRlZmF1bHRzLCBvcHRpb25zKTtcblxuICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyICRpbnB1dCA9ICQodGhpcyk7XG4gICAgICAgIHZhciBkYXRhID0gb3B0aW9ucy5kYXRhLFxuICAgICAgICAgICAgJGlucHV0RGl2ID0gJGlucHV0LmNsb3Nlc3QoJy5pbnB1dC1maWVsZCcpOyAvLyBEaXYgdG8gYXBwZW5kIG9uXG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgZGF0YSBpc24ndCBlbXB0eVxuICAgICAgICBpZiAoISQuaXNFbXB0eU9iamVjdChkYXRhKSkge1xuICAgICAgICAgIC8vIENyZWF0ZSBhdXRvY29tcGxldGUgZWxlbWVudFxuICAgICAgICAgIHZhciAkYXV0b2NvbXBsZXRlID0gJCgnPHVsIGNsYXNzPVwiYXV0b2NvbXBsZXRlLWNvbnRlbnQgZHJvcGRvd24tY29udGVudFwiPjwvdWw+Jyk7XG5cbiAgICAgICAgICAvLyBBcHBlbmQgYXV0b2NvbXBsZXRlIGVsZW1lbnRcbiAgICAgICAgICBpZiAoJGlucHV0RGl2Lmxlbmd0aCkge1xuICAgICAgICAgICAgJGlucHV0RGl2LmFwcGVuZCgkYXV0b2NvbXBsZXRlKTsgLy8gU2V0IHVsIGluIGJvZHlcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJGlucHV0LmFmdGVyKCRhdXRvY29tcGxldGUpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhciBoaWdobGlnaHQgPSBmdW5jdGlvbihzdHJpbmcsICRlbCkge1xuICAgICAgICAgICAgdmFyIGltZyA9ICRlbC5maW5kKCdpbWcnKTtcbiAgICAgICAgICAgIHZhciBtYXRjaFN0YXJ0ID0gJGVsLnRleHQoKS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXCJcIiArIHN0cmluZy50b0xvd2VyQ2FzZSgpICsgXCJcIiksXG4gICAgICAgICAgICAgICAgbWF0Y2hFbmQgPSBtYXRjaFN0YXJ0ICsgc3RyaW5nLmxlbmd0aCAtIDEsXG4gICAgICAgICAgICAgICAgYmVmb3JlTWF0Y2ggPSAkZWwudGV4dCgpLnNsaWNlKDAsIG1hdGNoU3RhcnQpLFxuICAgICAgICAgICAgICAgIG1hdGNoVGV4dCA9ICRlbC50ZXh0KCkuc2xpY2UobWF0Y2hTdGFydCwgbWF0Y2hFbmQgKyAxKSxcbiAgICAgICAgICAgICAgICBhZnRlck1hdGNoID0gJGVsLnRleHQoKS5zbGljZShtYXRjaEVuZCArIDEpO1xuICAgICAgICAgICAgJGVsLmh0bWwoXCI8c3Bhbj5cIiArIGJlZm9yZU1hdGNoICsgXCI8c3BhbiBjbGFzcz0naGlnaGxpZ2h0Jz5cIiArIG1hdGNoVGV4dCArIFwiPC9zcGFuPlwiICsgYWZ0ZXJNYXRjaCArIFwiPC9zcGFuPlwiKTtcbiAgICAgICAgICAgIGlmIChpbWcubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICRlbC5wcmVwZW5kKGltZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIC8vIFBlcmZvcm0gc2VhcmNoXG4gICAgICAgICAgJGlucHV0Lm9uKCdrZXl1cCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAvLyBDYXB0dXJlIEVudGVyXG4gICAgICAgICAgICBpZiAoZS53aGljaCA9PT0gMTMpIHtcbiAgICAgICAgICAgICAgJGF1dG9jb21wbGV0ZS5maW5kKCdsaScpLmZpcnN0KCkuY2xpY2soKTtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgdmFsID0gJGlucHV0LnZhbCgpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAkYXV0b2NvbXBsZXRlLmVtcHR5KCk7XG5cbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBpbnB1dCBpc24ndCBlbXB0eVxuICAgICAgICAgICAgaWYgKHZhbCAhPT0gJycpIHtcbiAgICAgICAgICAgICAgZm9yKHZhciBrZXkgaW4gZGF0YSkge1xuICAgICAgICAgICAgICAgIGlmIChkYXRhLmhhc093blByb3BlcnR5KGtleSkgJiZcbiAgICAgICAgICAgICAgICAgICAga2V5LnRvTG93ZXJDYXNlKCkuaW5kZXhPZih2YWwpICE9PSAtMSAmJlxuICAgICAgICAgICAgICAgICAgICBrZXkudG9Mb3dlckNhc2UoKSAhPT0gdmFsKSB7XG4gICAgICAgICAgICAgICAgICB2YXIgYXV0b2NvbXBsZXRlT3B0aW9uID0gJCgnPGxpPjwvbGk+Jyk7XG4gICAgICAgICAgICAgICAgICBpZighIWRhdGFba2V5XSkge1xuICAgICAgICAgICAgICAgICAgICBhdXRvY29tcGxldGVPcHRpb24uYXBwZW5kKCc8aW1nIHNyYz1cIicrIGRhdGFba2V5XSArJ1wiIGNsYXNzPVwicmlnaHQgY2lyY2xlXCI+PHNwYW4+Jysga2V5ICsnPC9zcGFuPicpO1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYXV0b2NvbXBsZXRlT3B0aW9uLmFwcGVuZCgnPHNwYW4+Jysga2V5ICsnPC9zcGFuPicpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgJGF1dG9jb21wbGV0ZS5hcHBlbmQoYXV0b2NvbXBsZXRlT3B0aW9uKTtcblxuICAgICAgICAgICAgICAgICAgaGlnaGxpZ2h0KHZhbCwgYXV0b2NvbXBsZXRlT3B0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIC8vIFNldCBpbnB1dCB2YWx1ZVxuICAgICAgICAgICRhdXRvY29tcGxldGUub24oJ2NsaWNrJywgJ2xpJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJGlucHV0LnZhbCgkKHRoaXMpLnRleHQoKS50cmltKCkpO1xuICAgICAgICAgICAgJGlucHV0LnRyaWdnZXIoJ2NoYW5nZScpO1xuICAgICAgICAgICAgJGF1dG9jb21wbGV0ZS5lbXB0eSgpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG4gIH0pOyAvLyBFbmQgb2YgJChkb2N1bWVudCkucmVhZHlcblxuICAvKioqKioqKioqKioqKioqKioqKlxuICAgKiAgU2VsZWN0IFBsdWdpbiAgKlxuICAgKioqKioqKioqKioqKioqKioqL1xuICAkLmZuLm1hdGVyaWFsX3NlbGVjdCA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICQodGhpcykuZWFjaChmdW5jdGlvbigpe1xuICAgICAgdmFyICRzZWxlY3QgPSAkKHRoaXMpO1xuXG4gICAgICBpZiAoJHNlbGVjdC5oYXNDbGFzcygnYnJvd3Nlci1kZWZhdWx0JykpIHtcbiAgICAgICAgcmV0dXJuOyAvLyBDb250aW51ZSB0byBuZXh0IChyZXR1cm4gZmFsc2UgYnJlYWtzIG91dCBvZiBlbnRpcmUgbG9vcClcbiAgICAgIH1cblxuICAgICAgdmFyIG11bHRpcGxlID0gJHNlbGVjdC5hdHRyKCdtdWx0aXBsZScpID8gdHJ1ZSA6IGZhbHNlLFxuICAgICAgICAgIGxhc3RJRCA9ICRzZWxlY3QuZGF0YSgnc2VsZWN0LWlkJyk7IC8vIFRlYXIgZG93biBzdHJ1Y3R1cmUgaWYgU2VsZWN0IG5lZWRzIHRvIGJlIHJlYnVpbHRcblxuICAgICAgaWYgKGxhc3RJRCkge1xuICAgICAgICAkc2VsZWN0LnBhcmVudCgpLmZpbmQoJ3NwYW4uY2FyZXQnKS5yZW1vdmUoKTtcbiAgICAgICAgJHNlbGVjdC5wYXJlbnQoKS5maW5kKCdpbnB1dCcpLnJlbW92ZSgpO1xuXG4gICAgICAgICRzZWxlY3QudW53cmFwKCk7XG4gICAgICAgICQoJ3VsI3NlbGVjdC1vcHRpb25zLScrbGFzdElEKS5yZW1vdmUoKTtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgZGVzdHJveWluZyB0aGUgc2VsZWN0LCByZW1vdmUgdGhlIHNlbGVsY3QtaWQgYW5kIHJlc2V0IGl0IHRvIGl0J3MgdW5pbml0aWFsaXplZCBzdGF0ZS5cbiAgICAgIGlmKGNhbGxiYWNrID09PSAnZGVzdHJveScpIHtcbiAgICAgICAgJHNlbGVjdC5kYXRhKCdzZWxlY3QtaWQnLCBudWxsKS5yZW1vdmVDbGFzcygnaW5pdGlhbGl6ZWQnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgdW5pcXVlSUQgPSBNYXRlcmlhbGl6ZS5ndWlkKCk7XG4gICAgICAkc2VsZWN0LmRhdGEoJ3NlbGVjdC1pZCcsIHVuaXF1ZUlEKTtcbiAgICAgIHZhciB3cmFwcGVyID0gJCgnPGRpdiBjbGFzcz1cInNlbGVjdC13cmFwcGVyXCI+PC9kaXY+Jyk7XG4gICAgICB3cmFwcGVyLmFkZENsYXNzKCRzZWxlY3QuYXR0cignY2xhc3MnKSk7XG4gICAgICB2YXIgb3B0aW9ucyA9ICQoJzx1bCBpZD1cInNlbGVjdC1vcHRpb25zLScgKyB1bmlxdWVJRCArJ1wiIGNsYXNzPVwiZHJvcGRvd24tY29udGVudCBzZWxlY3QtZHJvcGRvd24gJyArIChtdWx0aXBsZSA/ICdtdWx0aXBsZS1zZWxlY3QtZHJvcGRvd24nIDogJycpICsgJ1wiPjwvdWw+JyksXG4gICAgICAgICAgc2VsZWN0Q2hpbGRyZW4gPSAkc2VsZWN0LmNoaWxkcmVuKCdvcHRpb24sIG9wdGdyb3VwJyksXG4gICAgICAgICAgdmFsdWVzU2VsZWN0ZWQgPSBbXSxcbiAgICAgICAgICBvcHRpb25zSG92ZXIgPSBmYWxzZTtcblxuICAgICAgdmFyIGxhYmVsID0gJHNlbGVjdC5maW5kKCdvcHRpb246c2VsZWN0ZWQnKS5odG1sKCkgfHwgJHNlbGVjdC5maW5kKCdvcHRpb246Zmlyc3QnKS5odG1sKCkgfHwgXCJcIjtcblxuICAgICAgLy8gRnVuY3Rpb24gdGhhdCByZW5kZXJzIGFuZCBhcHBlbmRzIHRoZSBvcHRpb24gdGFraW5nIGludG9cbiAgICAgIC8vIGFjY291bnQgdHlwZSBhbmQgcG9zc2libGUgaW1hZ2UgaWNvbi5cbiAgICAgIHZhciBhcHBlbmRPcHRpb25XaXRoSWNvbiA9IGZ1bmN0aW9uKHNlbGVjdCwgb3B0aW9uLCB0eXBlKSB7XG4gICAgICAgIC8vIEFkZCBkaXNhYmxlZCBhdHRyIGlmIGRpc2FibGVkXG4gICAgICAgIHZhciBkaXNhYmxlZENsYXNzID0gKG9wdGlvbi5pcygnOmRpc2FibGVkJykpID8gJ2Rpc2FibGVkICcgOiAnJztcbiAgICAgICAgdmFyIG9wdGdyb3VwQ2xhc3MgPSAodHlwZSA9PT0gJ29wdGdyb3VwLW9wdGlvbicpID8gJ29wdGdyb3VwLW9wdGlvbiAnIDogJyc7XG5cbiAgICAgICAgLy8gYWRkIGljb25zXG4gICAgICAgIHZhciBpY29uX3VybCA9IG9wdGlvbi5kYXRhKCdpY29uJyk7XG4gICAgICAgIHZhciBjbGFzc2VzID0gb3B0aW9uLmF0dHIoJ2NsYXNzJyk7XG4gICAgICAgIGlmICghIWljb25fdXJsKSB7XG4gICAgICAgICAgdmFyIGNsYXNzU3RyaW5nID0gJyc7XG4gICAgICAgICAgaWYgKCEhY2xhc3NlcykgY2xhc3NTdHJpbmcgPSAnIGNsYXNzPVwiJyArIGNsYXNzZXMgKyAnXCInO1xuXG4gICAgICAgICAgLy8gQ2hlY2sgZm9yIG11bHRpcGxlIHR5cGUuXG4gICAgICAgICAgaWYgKHR5cGUgPT09ICdtdWx0aXBsZScpIHtcbiAgICAgICAgICAgIG9wdGlvbnMuYXBwZW5kKCQoJzxsaSBjbGFzcz1cIicgKyBkaXNhYmxlZENsYXNzICsgJ1wiPjxpbWcgYWx0PVwiXCIgc3JjPVwiJyArIGljb25fdXJsICsgJ1wiJyArIGNsYXNzU3RyaW5nICsgJz48c3Bhbj48aW5wdXQgdHlwZT1cImNoZWNrYm94XCInICsgZGlzYWJsZWRDbGFzcyArICcvPjxsYWJlbD48L2xhYmVsPicgKyBvcHRpb24uaHRtbCgpICsgJzwvc3Bhbj48L2xpPicpKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgb3B0aW9ucy5hcHBlbmQoJCgnPGxpIGNsYXNzPVwiJyArIGRpc2FibGVkQ2xhc3MgKyBvcHRncm91cENsYXNzICsgJ1wiPjxpbWcgYWx0PVwiXCIgc3JjPVwiJyArIGljb25fdXJsICsgJ1wiJyArIGNsYXNzU3RyaW5nICsgJz48c3Bhbj4nICsgb3B0aW9uLmh0bWwoKSArICc8L3NwYW4+PC9saT4nKSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2hlY2sgZm9yIG11bHRpcGxlIHR5cGUuXG4gICAgICAgIGlmICh0eXBlID09PSAnbXVsdGlwbGUnKSB7XG4gICAgICAgICAgb3B0aW9ucy5hcHBlbmQoJCgnPGxpIGNsYXNzPVwiJyArIGRpc2FibGVkQ2xhc3MgKyAnXCI+PHNwYW4+PGlucHV0IHR5cGU9XCJjaGVja2JveFwiJyArIGRpc2FibGVkQ2xhc3MgKyAnLz48bGFiZWw+PC9sYWJlbD4nICsgb3B0aW9uLmh0bWwoKSArICc8L3NwYW4+PC9saT4nKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb3B0aW9ucy5hcHBlbmQoJCgnPGxpIGNsYXNzPVwiJyArIGRpc2FibGVkQ2xhc3MgKyBvcHRncm91cENsYXNzICsgJ1wiPjxzcGFuPicgKyBvcHRpb24uaHRtbCgpICsgJzwvc3Bhbj48L2xpPicpKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgLyogQ3JlYXRlIGRyb3Bkb3duIHN0cnVjdHVyZS4gKi9cbiAgICAgIGlmIChzZWxlY3RDaGlsZHJlbi5sZW5ndGgpIHtcbiAgICAgICAgc2VsZWN0Q2hpbGRyZW4uZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZiAoJCh0aGlzKS5pcygnb3B0aW9uJykpIHtcbiAgICAgICAgICAgIC8vIERpcmVjdCBkZXNjZW5kYW50IG9wdGlvbi5cbiAgICAgICAgICAgIGlmIChtdWx0aXBsZSkge1xuICAgICAgICAgICAgICBhcHBlbmRPcHRpb25XaXRoSWNvbigkc2VsZWN0LCAkKHRoaXMpLCAnbXVsdGlwbGUnKTtcblxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgYXBwZW5kT3B0aW9uV2l0aEljb24oJHNlbGVjdCwgJCh0aGlzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmICgkKHRoaXMpLmlzKCdvcHRncm91cCcpKSB7XG4gICAgICAgICAgICAvLyBPcHRncm91cC5cbiAgICAgICAgICAgIHZhciBzZWxlY3RPcHRpb25zID0gJCh0aGlzKS5jaGlsZHJlbignb3B0aW9uJyk7XG4gICAgICAgICAgICBvcHRpb25zLmFwcGVuZCgkKCc8bGkgY2xhc3M9XCJvcHRncm91cFwiPjxzcGFuPicgKyAkKHRoaXMpLmF0dHIoJ2xhYmVsJykgKyAnPC9zcGFuPjwvbGk+JykpO1xuXG4gICAgICAgICAgICBzZWxlY3RPcHRpb25zLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIGFwcGVuZE9wdGlvbldpdGhJY29uKCRzZWxlY3QsICQodGhpcyksICdvcHRncm91cC1vcHRpb24nKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIG9wdGlvbnMuZmluZCgnbGk6bm90KC5vcHRncm91cCknKS5lYWNoKGZ1bmN0aW9uIChpKSB7XG4gICAgICAgICQodGhpcykuY2xpY2soZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAvLyBDaGVjayBpZiBvcHRpb24gZWxlbWVudCBpcyBkaXNhYmxlZFxuICAgICAgICAgIGlmICghJCh0aGlzKS5oYXNDbGFzcygnZGlzYWJsZWQnKSAmJiAhJCh0aGlzKS5oYXNDbGFzcygnb3B0Z3JvdXAnKSkge1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkID0gdHJ1ZTtcblxuICAgICAgICAgICAgaWYgKG11bHRpcGxlKSB7XG4gICAgICAgICAgICAgICQoJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXScsIHRoaXMpLnByb3AoJ2NoZWNrZWQnLCBmdW5jdGlvbihpLCB2KSB7IHJldHVybiAhdjsgfSk7XG4gICAgICAgICAgICAgIHNlbGVjdGVkID0gdG9nZ2xlRW50cnlGcm9tQXJyYXkodmFsdWVzU2VsZWN0ZWQsICQodGhpcykuaW5kZXgoKSwgJHNlbGVjdCk7XG4gICAgICAgICAgICAgICRuZXdTZWxlY3QudHJpZ2dlcignZm9jdXMnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIG9wdGlvbnMuZmluZCgnbGknKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICQodGhpcykudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAkbmV3U2VsZWN0LnZhbCgkKHRoaXMpLnRleHQoKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGFjdGl2YXRlT3B0aW9uKG9wdGlvbnMsICQodGhpcykpO1xuICAgICAgICAgICAgJHNlbGVjdC5maW5kKCdvcHRpb24nKS5lcShpKS5wcm9wKCdzZWxlY3RlZCcsIHNlbGVjdGVkKTtcbiAgICAgICAgICAgIC8vIFRyaWdnZXIgb25jaGFuZ2UoKSBldmVudFxuICAgICAgICAgICAgJHNlbGVjdC50cmlnZ2VyKCdjaGFuZ2UnKTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09ICd1bmRlZmluZWQnKSBjYWxsYmFjaygpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFdyYXAgRWxlbWVudHNcbiAgICAgICRzZWxlY3Qud3JhcCh3cmFwcGVyKTtcbiAgICAgIC8vIEFkZCBTZWxlY3QgRGlzcGxheSBFbGVtZW50XG4gICAgICB2YXIgZHJvcGRvd25JY29uID0gJCgnPHNwYW4gY2xhc3M9XCJjYXJldFwiPiYjOTY2MDs8L3NwYW4+Jyk7XG4gICAgICBpZiAoJHNlbGVjdC5pcygnOmRpc2FibGVkJykpXG4gICAgICAgIGRyb3Bkb3duSWNvbi5hZGRDbGFzcygnZGlzYWJsZWQnKTtcblxuICAgICAgLy8gZXNjYXBlIGRvdWJsZSBxdW90ZXNcbiAgICAgIHZhciBzYW5pdGl6ZWRMYWJlbEh0bWwgPSBsYWJlbC5yZXBsYWNlKC9cIi9nLCAnJnF1b3Q7Jyk7XG5cbiAgICAgIHZhciAkbmV3U2VsZWN0ID0gJCgnPGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJzZWxlY3QtZHJvcGRvd25cIiByZWFkb25seT1cInRydWVcIiAnICsgKCgkc2VsZWN0LmlzKCc6ZGlzYWJsZWQnKSkgPyAnZGlzYWJsZWQnIDogJycpICsgJyBkYXRhLWFjdGl2YXRlcz1cInNlbGVjdC1vcHRpb25zLScgKyB1bmlxdWVJRCArJ1wiIHZhbHVlPVwiJysgc2FuaXRpemVkTGFiZWxIdG1sICsnXCIvPicpO1xuICAgICAgJHNlbGVjdC5iZWZvcmUoJG5ld1NlbGVjdCk7XG4gICAgICAkbmV3U2VsZWN0LmJlZm9yZShkcm9wZG93bkljb24pO1xuXG4gICAgICAkbmV3U2VsZWN0LmFmdGVyKG9wdGlvbnMpO1xuICAgICAgLy8gQ2hlY2sgaWYgc2VjdGlvbiBlbGVtZW50IGlzIGRpc2FibGVkXG4gICAgICBpZiAoISRzZWxlY3QuaXMoJzpkaXNhYmxlZCcpKSB7XG4gICAgICAgICRuZXdTZWxlY3QuZHJvcGRvd24oeydob3Zlcic6IGZhbHNlLCAnY2xvc2VPbkNsaWNrJzogZmFsc2V9KTtcbiAgICAgIH1cblxuICAgICAgLy8gQ29weSB0YWJpbmRleFxuICAgICAgaWYgKCRzZWxlY3QuYXR0cigndGFiaW5kZXgnKSkge1xuICAgICAgICAkKCRuZXdTZWxlY3RbMF0pLmF0dHIoJ3RhYmluZGV4JywgJHNlbGVjdC5hdHRyKCd0YWJpbmRleCcpKTtcbiAgICAgIH1cblxuICAgICAgJHNlbGVjdC5hZGRDbGFzcygnaW5pdGlhbGl6ZWQnKTtcblxuICAgICAgJG5ld1NlbGVjdC5vbih7XG4gICAgICAgICdmb2N1cyc6IGZ1bmN0aW9uICgpe1xuICAgICAgICAgIGlmICgkKCd1bC5zZWxlY3QtZHJvcGRvd24nKS5ub3Qob3B0aW9uc1swXSkuaXMoJzp2aXNpYmxlJykpIHtcbiAgICAgICAgICAgICQoJ2lucHV0LnNlbGVjdC1kcm9wZG93bicpLnRyaWdnZXIoJ2Nsb3NlJyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghb3B0aW9ucy5pcygnOnZpc2libGUnKSkge1xuICAgICAgICAgICAgJCh0aGlzKS50cmlnZ2VyKCdvcGVuJywgWydmb2N1cyddKTtcbiAgICAgICAgICAgIHZhciBsYWJlbCA9ICQodGhpcykudmFsKCk7XG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRPcHRpb24gPSBvcHRpb25zLmZpbmQoJ2xpJykuZmlsdGVyKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICByZXR1cm4gJCh0aGlzKS50ZXh0KCkudG9Mb3dlckNhc2UoKSA9PT0gbGFiZWwudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIH0pWzBdO1xuICAgICAgICAgICAgYWN0aXZhdGVPcHRpb24ob3B0aW9ucywgc2VsZWN0ZWRPcHRpb24pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgJ2NsaWNrJzogZnVuY3Rpb24gKGUpe1xuICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAkbmV3U2VsZWN0Lm9uKCdibHVyJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICghbXVsdGlwbGUpIHtcbiAgICAgICAgICAkKHRoaXMpLnRyaWdnZXIoJ2Nsb3NlJyk7XG4gICAgICAgIH1cbiAgICAgICAgb3B0aW9ucy5maW5kKCdsaS5zZWxlY3RlZCcpLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xuICAgICAgfSk7XG5cbiAgICAgIG9wdGlvbnMuaG92ZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgIG9wdGlvbnNIb3ZlciA9IHRydWU7XG4gICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIG9wdGlvbnNIb3ZlciA9IGZhbHNlO1xuICAgICAgfSk7XG5cbiAgICAgICQod2luZG93KS5vbih7XG4gICAgICAgICdjbGljayc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBtdWx0aXBsZSAmJiAob3B0aW9uc0hvdmVyIHx8ICRuZXdTZWxlY3QudHJpZ2dlcignY2xvc2UnKSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBBZGQgaW5pdGlhbCBtdWx0aXBsZSBzZWxlY3Rpb25zLlxuICAgICAgaWYgKG11bHRpcGxlKSB7XG4gICAgICAgICRzZWxlY3QuZmluZChcIm9wdGlvbjpzZWxlY3RlZDpub3QoOmRpc2FibGVkKVwiKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgaW5kZXggPSAkKHRoaXMpLmluZGV4KCk7XG5cbiAgICAgICAgICB0b2dnbGVFbnRyeUZyb21BcnJheSh2YWx1ZXNTZWxlY3RlZCwgaW5kZXgsICRzZWxlY3QpO1xuICAgICAgICAgIG9wdGlvbnMuZmluZChcImxpXCIpLmVxKGluZGV4KS5maW5kKFwiOmNoZWNrYm94XCIpLnByb3AoXCJjaGVja2VkXCIsIHRydWUpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gTWFrZSBvcHRpb24gYXMgc2VsZWN0ZWQgYW5kIHNjcm9sbCB0byBzZWxlY3RlZCBwb3NpdGlvblxuICAgICAgdmFyIGFjdGl2YXRlT3B0aW9uID0gZnVuY3Rpb24oY29sbGVjdGlvbiwgbmV3T3B0aW9uKSB7XG4gICAgICAgIGlmIChuZXdPcHRpb24pIHtcbiAgICAgICAgICBjb2xsZWN0aW9uLmZpbmQoJ2xpLnNlbGVjdGVkJykucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgICAgICAgdmFyIG9wdGlvbiA9ICQobmV3T3B0aW9uKTtcbiAgICAgICAgICBvcHRpb24uYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgICAgICAgb3B0aW9ucy5zY3JvbGxUbyhvcHRpb24pO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICAvLyBBbGxvdyB1c2VyIHRvIHNlYXJjaCBieSB0eXBpbmdcbiAgICAgIC8vIHRoaXMgYXJyYXkgaXMgY2xlYXJlZCBhZnRlciAxIHNlY29uZFxuICAgICAgdmFyIGZpbHRlclF1ZXJ5ID0gW10sXG4gICAgICAgICAgb25LZXlEb3duID0gZnVuY3Rpb24oZSl7XG4gICAgICAgICAgICAvLyBUQUIgLSBzd2l0Y2ggdG8gYW5vdGhlciBpbnB1dFxuICAgICAgICAgICAgaWYoZS53aGljaCA9PSA5KXtcbiAgICAgICAgICAgICAgJG5ld1NlbGVjdC50cmlnZ2VyKCdjbG9zZScpO1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEFSUk9XIERPV04gV0hFTiBTRUxFQ1QgSVMgQ0xPU0VEIC0gb3BlbiBzZWxlY3Qgb3B0aW9uc1xuICAgICAgICAgICAgaWYoZS53aGljaCA9PSA0MCAmJiAhb3B0aW9ucy5pcygnOnZpc2libGUnKSl7XG4gICAgICAgICAgICAgICRuZXdTZWxlY3QudHJpZ2dlcignb3BlbicpO1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEVOVEVSIFdIRU4gU0VMRUNUIElTIENMT1NFRCAtIHN1Ym1pdCBmb3JtXG4gICAgICAgICAgICBpZihlLndoaWNoID09IDEzICYmICFvcHRpb25zLmlzKCc6dmlzaWJsZScpKXtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIC8vIENBU0UgV0hFTiBVU0VSIFRZUEUgTEVUVEVSU1xuICAgICAgICAgICAgdmFyIGxldHRlciA9IFN0cmluZy5mcm9tQ2hhckNvZGUoZS53aGljaCkudG9Mb3dlckNhc2UoKSxcbiAgICAgICAgICAgICAgICBub25MZXR0ZXJzID0gWzksMTMsMjcsMzgsNDBdO1xuICAgICAgICAgICAgaWYgKGxldHRlciAmJiAobm9uTGV0dGVycy5pbmRleE9mKGUud2hpY2gpID09PSAtMSkpIHtcbiAgICAgICAgICAgICAgZmlsdGVyUXVlcnkucHVzaChsZXR0ZXIpO1xuXG4gICAgICAgICAgICAgIHZhciBzdHJpbmcgPSBmaWx0ZXJRdWVyeS5qb2luKCcnKSxcbiAgICAgICAgICAgICAgICAgIG5ld09wdGlvbiA9IG9wdGlvbnMuZmluZCgnbGknKS5maWx0ZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkKHRoaXMpLnRleHQoKS50b0xvd2VyQ2FzZSgpLmluZGV4T2Yoc3RyaW5nKSA9PT0gMDtcbiAgICAgICAgICAgICAgICAgIH0pWzBdO1xuXG4gICAgICAgICAgICAgIGlmIChuZXdPcHRpb24pIHtcbiAgICAgICAgICAgICAgICBhY3RpdmF0ZU9wdGlvbihvcHRpb25zLCBuZXdPcHRpb24pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEVOVEVSIC0gc2VsZWN0IG9wdGlvbiBhbmQgY2xvc2Ugd2hlbiBzZWxlY3Qgb3B0aW9ucyBhcmUgb3BlbmVkXG4gICAgICAgICAgICBpZiAoZS53aGljaCA9PSAxMykge1xuICAgICAgICAgICAgICB2YXIgYWN0aXZlT3B0aW9uID0gb3B0aW9ucy5maW5kKCdsaS5zZWxlY3RlZDpub3QoLmRpc2FibGVkKScpWzBdO1xuICAgICAgICAgICAgICBpZihhY3RpdmVPcHRpb24pe1xuICAgICAgICAgICAgICAgICQoYWN0aXZlT3B0aW9uKS50cmlnZ2VyKCdjbGljaycpO1xuICAgICAgICAgICAgICAgIGlmICghbXVsdGlwbGUpIHtcbiAgICAgICAgICAgICAgICAgICRuZXdTZWxlY3QudHJpZ2dlcignY2xvc2UnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQVJST1cgRE9XTiAtIG1vdmUgdG8gbmV4dCBub3QgZGlzYWJsZWQgb3B0aW9uXG4gICAgICAgICAgICBpZiAoZS53aGljaCA9PSA0MCkge1xuICAgICAgICAgICAgICBpZiAob3B0aW9ucy5maW5kKCdsaS5zZWxlY3RlZCcpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIG5ld09wdGlvbiA9IG9wdGlvbnMuZmluZCgnbGkuc2VsZWN0ZWQnKS5uZXh0KCdsaTpub3QoLmRpc2FibGVkKScpWzBdO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ld09wdGlvbiA9IG9wdGlvbnMuZmluZCgnbGk6bm90KC5kaXNhYmxlZCknKVswXTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBhY3RpdmF0ZU9wdGlvbihvcHRpb25zLCBuZXdPcHRpb24pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBFU0MgLSBjbG9zZSBvcHRpb25zXG4gICAgICAgICAgICBpZiAoZS53aGljaCA9PSAyNykge1xuICAgICAgICAgICAgICAkbmV3U2VsZWN0LnRyaWdnZXIoJ2Nsb3NlJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEFSUk9XIFVQIC0gbW92ZSB0byBwcmV2aW91cyBub3QgZGlzYWJsZWQgb3B0aW9uXG4gICAgICAgICAgICBpZiAoZS53aGljaCA9PSAzOCkge1xuICAgICAgICAgICAgICBuZXdPcHRpb24gPSBvcHRpb25zLmZpbmQoJ2xpLnNlbGVjdGVkJykucHJldignbGk6bm90KC5kaXNhYmxlZCknKVswXTtcbiAgICAgICAgICAgICAgaWYobmV3T3B0aW9uKVxuICAgICAgICAgICAgICAgIGFjdGl2YXRlT3B0aW9uKG9wdGlvbnMsIG5ld09wdGlvbik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEF1dG9tYXRpY2FseSBjbGVhbiBmaWx0ZXIgcXVlcnkgc28gdXNlciBjYW4gc2VhcmNoIGFnYWluIGJ5IHN0YXJ0aW5nIGxldHRlcnNcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsgZmlsdGVyUXVlcnkgPSBbXTsgfSwgMTAwMCk7XG4gICAgICAgICAgfTtcblxuICAgICAgJG5ld1NlbGVjdC5vbigna2V5ZG93bicsIG9uS2V5RG93bik7XG4gICAgfSk7XG5cbiAgICBmdW5jdGlvbiB0b2dnbGVFbnRyeUZyb21BcnJheShlbnRyaWVzQXJyYXksIGVudHJ5SW5kZXgsIHNlbGVjdCkge1xuICAgICAgdmFyIGluZGV4ID0gZW50cmllc0FycmF5LmluZGV4T2YoZW50cnlJbmRleCksXG4gICAgICAgICAgbm90QWRkZWQgPSBpbmRleCA9PT0gLTE7XG5cbiAgICAgIGlmIChub3RBZGRlZCkge1xuICAgICAgICBlbnRyaWVzQXJyYXkucHVzaChlbnRyeUluZGV4KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVudHJpZXNBcnJheS5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgfVxuXG4gICAgICBzZWxlY3Quc2libGluZ3MoJ3VsLmRyb3Bkb3duLWNvbnRlbnQnKS5maW5kKCdsaScpLmVxKGVudHJ5SW5kZXgpLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcblxuICAgICAgLy8gdXNlIG5vdEFkZGVkIGluc3RlYWQgb2YgdHJ1ZSAodG8gZGV0ZWN0IGlmIHRoZSBvcHRpb24gaXMgc2VsZWN0ZWQgb3Igbm90KVxuICAgICAgc2VsZWN0LmZpbmQoJ29wdGlvbicpLmVxKGVudHJ5SW5kZXgpLnByb3AoJ3NlbGVjdGVkJywgbm90QWRkZWQpO1xuICAgICAgc2V0VmFsdWVUb0lucHV0KGVudHJpZXNBcnJheSwgc2VsZWN0KTtcblxuICAgICAgcmV0dXJuIG5vdEFkZGVkO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldFZhbHVlVG9JbnB1dChlbnRyaWVzQXJyYXksIHNlbGVjdCkge1xuICAgICAgdmFyIHZhbHVlID0gJyc7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwLCBjb3VudCA9IGVudHJpZXNBcnJheS5sZW5ndGg7IGkgPCBjb3VudDsgaSsrKSB7XG4gICAgICAgIHZhciB0ZXh0ID0gc2VsZWN0LmZpbmQoJ29wdGlvbicpLmVxKGVudHJpZXNBcnJheVtpXSkudGV4dCgpO1xuXG4gICAgICAgIGkgPT09IDAgPyB2YWx1ZSArPSB0ZXh0IDogdmFsdWUgKz0gJywgJyArIHRleHQ7XG4gICAgICB9XG5cbiAgICAgIGlmICh2YWx1ZSA9PT0gJycpIHtcbiAgICAgICAgdmFsdWUgPSBzZWxlY3QuZmluZCgnb3B0aW9uOmRpc2FibGVkJykuZXEoMCkudGV4dCgpO1xuICAgICAgfVxuXG4gICAgICBzZWxlY3Quc2libGluZ3MoJ2lucHV0LnNlbGVjdC1kcm9wZG93bicpLnZhbCh2YWx1ZSk7XG4gICAgfVxuICB9O1xuXG59KCBqUXVlcnkgKSk7XG47KGZ1bmN0aW9uICgkKSB7XG5cbiAgdmFyIG1ldGhvZHMgPSB7XG5cbiAgICBpbml0IDogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgdmFyIGRlZmF1bHRzID0ge1xuICAgICAgICBpbmRpY2F0b3JzOiB0cnVlLFxuICAgICAgICBoZWlnaHQ6IDQwMCxcbiAgICAgICAgdHJhbnNpdGlvbjogNTAwLFxuICAgICAgICBpbnRlcnZhbDogNjAwMFxuICAgICAgfTtcbiAgICAgIG9wdGlvbnMgPSAkLmV4dGVuZChkZWZhdWx0cywgb3B0aW9ucyk7XG5cbiAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgLy8gRm9yIGVhY2ggc2xpZGVyLCB3ZSB3YW50IHRvIGtlZXAgdHJhY2sgb2ZcbiAgICAgICAgLy8gd2hpY2ggc2xpZGUgaXMgYWN0aXZlIGFuZCBpdHMgYXNzb2NpYXRlZCBjb250ZW50XG4gICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XG4gICAgICAgIHZhciAkc2xpZGVyID0gJHRoaXMuZmluZCgndWwuc2xpZGVzJykuZmlyc3QoKTtcbiAgICAgICAgdmFyICRzbGlkZXMgPSAkc2xpZGVyLmZpbmQoJz4gbGknKTtcbiAgICAgICAgdmFyICRhY3RpdmVfaW5kZXggPSAkc2xpZGVyLmZpbmQoJy5hY3RpdmUnKS5pbmRleCgpO1xuICAgICAgICB2YXIgJGFjdGl2ZSwgJGluZGljYXRvcnMsICRpbnRlcnZhbDtcbiAgICAgICAgaWYgKCRhY3RpdmVfaW5kZXggIT0gLTEpIHsgJGFjdGl2ZSA9ICRzbGlkZXMuZXEoJGFjdGl2ZV9pbmRleCk7IH1cblxuICAgICAgICAvLyBUcmFuc2l0aW9ucyB0aGUgY2FwdGlvbiBkZXBlbmRpbmcgb24gYWxpZ25tZW50XG4gICAgICAgIGZ1bmN0aW9uIGNhcHRpb25UcmFuc2l0aW9uKGNhcHRpb24sIGR1cmF0aW9uKSB7XG4gICAgICAgICAgaWYgKGNhcHRpb24uaGFzQ2xhc3MoXCJjZW50ZXItYWxpZ25cIikpIHtcbiAgICAgICAgICAgIGNhcHRpb24udmVsb2NpdHkoe29wYWNpdHk6IDAsIHRyYW5zbGF0ZVk6IC0xMDB9LCB7ZHVyYXRpb246IGR1cmF0aW9uLCBxdWV1ZTogZmFsc2V9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSBpZiAoY2FwdGlvbi5oYXNDbGFzcyhcInJpZ2h0LWFsaWduXCIpKSB7XG4gICAgICAgICAgICBjYXB0aW9uLnZlbG9jaXR5KHtvcGFjaXR5OiAwLCB0cmFuc2xhdGVYOiAxMDB9LCB7ZHVyYXRpb246IGR1cmF0aW9uLCBxdWV1ZTogZmFsc2V9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSBpZiAoY2FwdGlvbi5oYXNDbGFzcyhcImxlZnQtYWxpZ25cIikpIHtcbiAgICAgICAgICAgIGNhcHRpb24udmVsb2NpdHkoe29wYWNpdHk6IDAsIHRyYW5zbGF0ZVg6IC0xMDB9LCB7ZHVyYXRpb246IGR1cmF0aW9uLCBxdWV1ZTogZmFsc2V9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUaGlzIGZ1bmN0aW9uIHdpbGwgdHJhbnNpdGlvbiB0aGUgc2xpZGUgdG8gYW55IGluZGV4IG9mIHRoZSBuZXh0IHNsaWRlXG4gICAgICAgIGZ1bmN0aW9uIG1vdmVUb1NsaWRlKGluZGV4KSB7XG4gICAgICAgICAgLy8gV3JhcCBhcm91bmQgaW5kaWNlcy5cbiAgICAgICAgICBpZiAoaW5kZXggPj0gJHNsaWRlcy5sZW5ndGgpIGluZGV4ID0gMDtcbiAgICAgICAgICBlbHNlIGlmIChpbmRleCA8IDApIGluZGV4ID0gJHNsaWRlcy5sZW5ndGggLTE7XG5cbiAgICAgICAgICAkYWN0aXZlX2luZGV4ID0gJHNsaWRlci5maW5kKCcuYWN0aXZlJykuaW5kZXgoKTtcblxuICAgICAgICAgIC8vIE9ubHkgZG8gaWYgaW5kZXggY2hhbmdlc1xuICAgICAgICAgIGlmICgkYWN0aXZlX2luZGV4ICE9IGluZGV4KSB7XG4gICAgICAgICAgICAkYWN0aXZlID0gJHNsaWRlcy5lcSgkYWN0aXZlX2luZGV4KTtcbiAgICAgICAgICAgICRjYXB0aW9uID0gJGFjdGl2ZS5maW5kKCcuY2FwdGlvbicpO1xuXG4gICAgICAgICAgICAkYWN0aXZlLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICRhY3RpdmUudmVsb2NpdHkoe29wYWNpdHk6IDB9LCB7ZHVyYXRpb246IG9wdGlvbnMudHJhbnNpdGlvbiwgcXVldWU6IGZhbHNlLCBlYXNpbmc6ICdlYXNlT3V0UXVhZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzbGlkZXMubm90KCcuYWN0aXZlJykudmVsb2NpdHkoe29wYWNpdHk6IDAsIHRyYW5zbGF0ZVg6IDAsIHRyYW5zbGF0ZVk6IDB9LCB7ZHVyYXRpb246IDAsIHF1ZXVlOiBmYWxzZX0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSB9KTtcbiAgICAgICAgICAgIGNhcHRpb25UcmFuc2l0aW9uKCRjYXB0aW9uLCBvcHRpb25zLnRyYW5zaXRpb24pO1xuXG5cbiAgICAgICAgICAgIC8vIFVwZGF0ZSBpbmRpY2F0b3JzXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5pbmRpY2F0b3JzKSB7XG4gICAgICAgICAgICAgICRpbmRpY2F0b3JzLmVxKCRhY3RpdmVfaW5kZXgpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJHNsaWRlcy5lcShpbmRleCkudmVsb2NpdHkoe29wYWNpdHk6IDF9LCB7ZHVyYXRpb246IG9wdGlvbnMudHJhbnNpdGlvbiwgcXVldWU6IGZhbHNlLCBlYXNpbmc6ICdlYXNlT3V0UXVhZCd9KTtcbiAgICAgICAgICAgICRzbGlkZXMuZXEoaW5kZXgpLmZpbmQoJy5jYXB0aW9uJykudmVsb2NpdHkoe29wYWNpdHk6IDEsIHRyYW5zbGF0ZVg6IDAsIHRyYW5zbGF0ZVk6IDB9LCB7ZHVyYXRpb246IG9wdGlvbnMudHJhbnNpdGlvbiwgZGVsYXk6IG9wdGlvbnMudHJhbnNpdGlvbiwgcXVldWU6IGZhbHNlLCBlYXNpbmc6ICdlYXNlT3V0UXVhZCd9KTtcbiAgICAgICAgICAgICRzbGlkZXMuZXEoaW5kZXgpLmFkZENsYXNzKCdhY3RpdmUnKTtcblxuXG4gICAgICAgICAgICAvLyBVcGRhdGUgaW5kaWNhdG9yc1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuaW5kaWNhdG9ycykge1xuICAgICAgICAgICAgICAkaW5kaWNhdG9ycy5lcShpbmRleCkuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNldCBoZWlnaHQgb2Ygc2xpZGVyXG4gICAgICAgIC8vIElmIGZ1bGxzY3JlZW4sIGRvIG5vdGhpbmdcbiAgICAgICAgaWYgKCEkdGhpcy5oYXNDbGFzcygnZnVsbHNjcmVlbicpKSB7XG4gICAgICAgICAgaWYgKG9wdGlvbnMuaW5kaWNhdG9ycykge1xuICAgICAgICAgICAgLy8gQWRkIGhlaWdodCBpZiBpbmRpY2F0b3JzIGFyZSBwcmVzZW50XG4gICAgICAgICAgICAkdGhpcy5oZWlnaHQob3B0aW9ucy5oZWlnaHQgKyA0MCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgJHRoaXMuaGVpZ2h0KG9wdGlvbnMuaGVpZ2h0KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgJHNsaWRlci5oZWlnaHQob3B0aW9ucy5oZWlnaHQpO1xuICAgICAgICB9XG5cblxuICAgICAgICAvLyBTZXQgaW5pdGlhbCBwb3NpdGlvbnMgb2YgY2FwdGlvbnNcbiAgICAgICAgJHNsaWRlcy5maW5kKCcuY2FwdGlvbicpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGNhcHRpb25UcmFuc2l0aW9uKCQodGhpcyksIDApO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBNb3ZlIGltZyBzcmMgaW50byBiYWNrZ3JvdW5kLWltYWdlXG4gICAgICAgICRzbGlkZXMuZmluZCgnaW1nJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIHBsYWNlaG9sZGVyQmFzZTY0ID0gJ2RhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEFRQUJBSUFCQVAvLy93QUFBQ0g1QkFFS0FBRUFMQUFBQUFBQkFBRUFBQUlDVEFFQU93PT0nO1xuICAgICAgICAgIGlmICgkKHRoaXMpLmF0dHIoJ3NyYycpICE9PSBwbGFjZWhvbGRlckJhc2U2NCkge1xuICAgICAgICAgICAgJCh0aGlzKS5jc3MoJ2JhY2tncm91bmQtaW1hZ2UnLCAndXJsKCcgKyAkKHRoaXMpLmF0dHIoJ3NyYycpICsgJyknICk7XG4gICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ3NyYycsIHBsYWNlaG9sZGVyQmFzZTY0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGR5bmFtaWNhbGx5IGFkZCBpbmRpY2F0b3JzXG4gICAgICAgIGlmIChvcHRpb25zLmluZGljYXRvcnMpIHtcbiAgICAgICAgICAkaW5kaWNhdG9ycyA9ICQoJzx1bCBjbGFzcz1cImluZGljYXRvcnNcIj48L3VsPicpO1xuICAgICAgICAgICRzbGlkZXMuZWFjaChmdW5jdGlvbiggaW5kZXggKSB7XG4gICAgICAgICAgICB2YXIgJGluZGljYXRvciA9ICQoJzxsaSBjbGFzcz1cImluZGljYXRvci1pdGVtXCI+PC9saT4nKTtcblxuICAgICAgICAgICAgLy8gSGFuZGxlIGNsaWNrcyBvbiBpbmRpY2F0b3JzXG4gICAgICAgICAgICAkaW5kaWNhdG9yLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgdmFyICRwYXJlbnQgPSAkc2xpZGVyLnBhcmVudCgpO1xuICAgICAgICAgICAgICB2YXIgY3Vycl9pbmRleCA9ICRwYXJlbnQuZmluZCgkKHRoaXMpKS5pbmRleCgpO1xuICAgICAgICAgICAgICBtb3ZlVG9TbGlkZShjdXJyX2luZGV4KTtcblxuICAgICAgICAgICAgICAvLyByZXNldCBpbnRlcnZhbFxuICAgICAgICAgICAgICBjbGVhckludGVydmFsKCRpbnRlcnZhbCk7XG4gICAgICAgICAgICAgICRpbnRlcnZhbCA9IHNldEludGVydmFsKFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAkYWN0aXZlX2luZGV4ID0gJHNsaWRlci5maW5kKCcuYWN0aXZlJykuaW5kZXgoKTtcbiAgICAgICAgICAgICAgICAgIGlmICgkc2xpZGVzLmxlbmd0aCA9PSAkYWN0aXZlX2luZGV4ICsgMSkgJGFjdGl2ZV9pbmRleCA9IDA7IC8vIGxvb3AgdG8gc3RhcnRcbiAgICAgICAgICAgICAgICAgIGVsc2UgJGFjdGl2ZV9pbmRleCArPSAxO1xuXG4gICAgICAgICAgICAgICAgICBtb3ZlVG9TbGlkZSgkYWN0aXZlX2luZGV4KTtcblxuICAgICAgICAgICAgICAgIH0sIG9wdGlvbnMudHJhbnNpdGlvbiArIG9wdGlvbnMuaW50ZXJ2YWxcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJGluZGljYXRvcnMuYXBwZW5kKCRpbmRpY2F0b3IpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgICR0aGlzLmFwcGVuZCgkaW5kaWNhdG9ycyk7XG4gICAgICAgICAgJGluZGljYXRvcnMgPSAkdGhpcy5maW5kKCd1bC5pbmRpY2F0b3JzJykuZmluZCgnbGkuaW5kaWNhdG9yLWl0ZW0nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICgkYWN0aXZlKSB7XG4gICAgICAgICAgJGFjdGl2ZS5zaG93KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgJHNsaWRlcy5maXJzdCgpLmFkZENsYXNzKCdhY3RpdmUnKS52ZWxvY2l0eSh7b3BhY2l0eTogMX0sIHtkdXJhdGlvbjogb3B0aW9ucy50cmFuc2l0aW9uLCBxdWV1ZTogZmFsc2UsIGVhc2luZzogJ2Vhc2VPdXRRdWFkJ30pO1xuXG4gICAgICAgICAgJGFjdGl2ZV9pbmRleCA9IDA7XG4gICAgICAgICAgJGFjdGl2ZSA9ICRzbGlkZXMuZXEoJGFjdGl2ZV9pbmRleCk7XG5cbiAgICAgICAgICAvLyBVcGRhdGUgaW5kaWNhdG9yc1xuICAgICAgICAgIGlmIChvcHRpb25zLmluZGljYXRvcnMpIHtcbiAgICAgICAgICAgICRpbmRpY2F0b3JzLmVxKCRhY3RpdmVfaW5kZXgpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBZGp1c3QgaGVpZ2h0IHRvIGN1cnJlbnQgc2xpZGVcbiAgICAgICAgJGFjdGl2ZS5maW5kKCdpbWcnKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICRhY3RpdmUuZmluZCgnLmNhcHRpb24nKS52ZWxvY2l0eSh7b3BhY2l0eTogMSwgdHJhbnNsYXRlWDogMCwgdHJhbnNsYXRlWTogMH0sIHtkdXJhdGlvbjogb3B0aW9ucy50cmFuc2l0aW9uLCBxdWV1ZTogZmFsc2UsIGVhc2luZzogJ2Vhc2VPdXRRdWFkJ30pO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBhdXRvIHNjcm9sbFxuICAgICAgICAkaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChcbiAgICAgICAgICBmdW5jdGlvbigpe1xuICAgICAgICAgICAgJGFjdGl2ZV9pbmRleCA9ICRzbGlkZXIuZmluZCgnLmFjdGl2ZScpLmluZGV4KCk7XG4gICAgICAgICAgICBtb3ZlVG9TbGlkZSgkYWN0aXZlX2luZGV4ICsgMSk7XG5cbiAgICAgICAgICB9LCBvcHRpb25zLnRyYW5zaXRpb24gKyBvcHRpb25zLmludGVydmFsXG4gICAgICAgICk7XG5cblxuICAgICAgICAvLyBIYW1tZXJKUywgU3dpcGUgbmF2aWdhdGlvblxuXG4gICAgICAgIC8vIFRvdWNoIEV2ZW50XG4gICAgICAgIHZhciBwYW5uaW5nID0gZmFsc2U7XG4gICAgICAgIHZhciBzd2lwZUxlZnQgPSBmYWxzZTtcbiAgICAgICAgdmFyIHN3aXBlUmlnaHQgPSBmYWxzZTtcblxuICAgICAgICAkdGhpcy5oYW1tZXIoe1xuICAgICAgICAgICAgcHJldmVudF9kZWZhdWx0OiBmYWxzZVxuICAgICAgICB9KS5iaW5kKCdwYW4nLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgaWYgKGUuZ2VzdHVyZS5wb2ludGVyVHlwZSA9PT0gXCJ0b3VjaFwiKSB7XG5cbiAgICAgICAgICAgIC8vIHJlc2V0IGludGVydmFsXG4gICAgICAgICAgICBjbGVhckludGVydmFsKCRpbnRlcnZhbCk7XG5cbiAgICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSBlLmdlc3R1cmUuZGlyZWN0aW9uO1xuICAgICAgICAgICAgdmFyIHggPSBlLmdlc3R1cmUuZGVsdGFYO1xuICAgICAgICAgICAgdmFyIHZlbG9jaXR5WCA9IGUuZ2VzdHVyZS52ZWxvY2l0eVg7XG5cbiAgICAgICAgICAgICRjdXJyX3NsaWRlID0gJHNsaWRlci5maW5kKCcuYWN0aXZlJyk7XG4gICAgICAgICAgICAkY3Vycl9zbGlkZS52ZWxvY2l0eSh7IHRyYW5zbGF0ZVg6IHhcbiAgICAgICAgICAgICAgICB9LCB7ZHVyYXRpb246IDUwLCBxdWV1ZTogZmFsc2UsIGVhc2luZzogJ2Vhc2VPdXRRdWFkJ30pO1xuXG4gICAgICAgICAgICAvLyBTd2lwZSBMZWZ0XG4gICAgICAgICAgICBpZiAoZGlyZWN0aW9uID09PSA0ICYmICh4ID4gKCR0aGlzLmlubmVyV2lkdGgoKSAvIDIpIHx8IHZlbG9jaXR5WCA8IC0wLjY1KSkge1xuICAgICAgICAgICAgICBzd2lwZVJpZ2h0ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFN3aXBlIFJpZ2h0XG4gICAgICAgICAgICBlbHNlIGlmIChkaXJlY3Rpb24gPT09IDIgJiYgKHggPCAoLTEgKiAkdGhpcy5pbm5lcldpZHRoKCkgLyAyKSB8fCB2ZWxvY2l0eVggPiAwLjY1KSkge1xuICAgICAgICAgICAgICBzd2lwZUxlZnQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBNYWtlIFNsaWRlIEJlaGluZCBhY3RpdmUgc2xpZGUgdmlzaWJsZVxuICAgICAgICAgICAgdmFyIG5leHRfc2xpZGU7XG4gICAgICAgICAgICBpZiAoc3dpcGVMZWZ0KSB7XG4gICAgICAgICAgICAgIG5leHRfc2xpZGUgPSAkY3Vycl9zbGlkZS5uZXh0KCk7XG4gICAgICAgICAgICAgIGlmIChuZXh0X3NsaWRlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIG5leHRfc2xpZGUgPSAkc2xpZGVzLmZpcnN0KCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgbmV4dF9zbGlkZS52ZWxvY2l0eSh7IG9wYWNpdHk6IDFcbiAgICAgICAgICAgICAgICAgIH0sIHtkdXJhdGlvbjogMzAwLCBxdWV1ZTogZmFsc2UsIGVhc2luZzogJ2Vhc2VPdXRRdWFkJ30pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN3aXBlUmlnaHQpIHtcbiAgICAgICAgICAgICAgbmV4dF9zbGlkZSA9ICRjdXJyX3NsaWRlLnByZXYoKTtcbiAgICAgICAgICAgICAgaWYgKG5leHRfc2xpZGUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgbmV4dF9zbGlkZSA9ICRzbGlkZXMubGFzdCgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIG5leHRfc2xpZGUudmVsb2NpdHkoeyBvcGFjaXR5OiAxXG4gICAgICAgICAgICAgICAgICB9LCB7ZHVyYXRpb246IDMwMCwgcXVldWU6IGZhbHNlLCBlYXNpbmc6ICdlYXNlT3V0UXVhZCd9KTtcbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgfVxuXG4gICAgICAgIH0pLmJpbmQoJ3BhbmVuZCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICBpZiAoZS5nZXN0dXJlLnBvaW50ZXJUeXBlID09PSBcInRvdWNoXCIpIHtcblxuICAgICAgICAgICAgJGN1cnJfc2xpZGUgPSAkc2xpZGVyLmZpbmQoJy5hY3RpdmUnKTtcbiAgICAgICAgICAgIHBhbm5pbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIGN1cnJfaW5kZXggPSAkc2xpZGVyLmZpbmQoJy5hY3RpdmUnKS5pbmRleCgpO1xuXG4gICAgICAgICAgICBpZiAoIXN3aXBlUmlnaHQgJiYgIXN3aXBlTGVmdCB8fCAkc2xpZGVzLmxlbmd0aCA8PTEpIHtcbiAgICAgICAgICAgICAgLy8gUmV0dXJuIHRvIG9yaWdpbmFsIHNwb3RcbiAgICAgICAgICAgICAgJGN1cnJfc2xpZGUudmVsb2NpdHkoeyB0cmFuc2xhdGVYOiAwXG4gICAgICAgICAgICAgICAgICB9LCB7ZHVyYXRpb246IDMwMCwgcXVldWU6IGZhbHNlLCBlYXNpbmc6ICdlYXNlT3V0UXVhZCd9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHN3aXBlTGVmdCkge1xuICAgICAgICAgICAgICBtb3ZlVG9TbGlkZShjdXJyX2luZGV4ICsgMSk7XG4gICAgICAgICAgICAgICRjdXJyX3NsaWRlLnZlbG9jaXR5KHt0cmFuc2xhdGVYOiAtMSAqICR0aGlzLmlubmVyV2lkdGgoKSB9LCB7ZHVyYXRpb246IDMwMCwgcXVldWU6IGZhbHNlLCBlYXNpbmc6ICdlYXNlT3V0UXVhZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRjdXJyX3NsaWRlLnZlbG9jaXR5KHtvcGFjaXR5OiAwLCB0cmFuc2xhdGVYOiAwfSwge2R1cmF0aW9uOiAwLCBxdWV1ZTogZmFsc2V9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChzd2lwZVJpZ2h0KSB7XG4gICAgICAgICAgICAgIG1vdmVUb1NsaWRlKGN1cnJfaW5kZXggLSAxKTtcbiAgICAgICAgICAgICAgJGN1cnJfc2xpZGUudmVsb2NpdHkoe3RyYW5zbGF0ZVg6ICR0aGlzLmlubmVyV2lkdGgoKSB9LCB7ZHVyYXRpb246IDMwMCwgcXVldWU6IGZhbHNlLCBlYXNpbmc6ICdlYXNlT3V0UXVhZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRjdXJyX3NsaWRlLnZlbG9jaXR5KHtvcGFjaXR5OiAwLCB0cmFuc2xhdGVYOiAwfSwge2R1cmF0aW9uOiAwLCBxdWV1ZTogZmFsc2V9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzd2lwZUxlZnQgPSBmYWxzZTtcbiAgICAgICAgICAgIHN3aXBlUmlnaHQgPSBmYWxzZTtcblxuICAgICAgICAgICAgLy8gUmVzdGFydCBpbnRlcnZhbFxuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCgkaW50ZXJ2YWwpO1xuICAgICAgICAgICAgJGludGVydmFsID0gc2V0SW50ZXJ2YWwoXG4gICAgICAgICAgICAgIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgJGFjdGl2ZV9pbmRleCA9ICRzbGlkZXIuZmluZCgnLmFjdGl2ZScpLmluZGV4KCk7XG4gICAgICAgICAgICAgICAgaWYgKCRzbGlkZXMubGVuZ3RoID09ICRhY3RpdmVfaW5kZXggKyAxKSAkYWN0aXZlX2luZGV4ID0gMDsgLy8gbG9vcCB0byBzdGFydFxuICAgICAgICAgICAgICAgIGVsc2UgJGFjdGl2ZV9pbmRleCArPSAxO1xuXG4gICAgICAgICAgICAgICAgbW92ZVRvU2xpZGUoJGFjdGl2ZV9pbmRleCk7XG5cbiAgICAgICAgICAgICAgfSwgb3B0aW9ucy50cmFuc2l0aW9uICsgb3B0aW9ucy5pbnRlcnZhbFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgICR0aGlzLm9uKCdzbGlkZXJQYXVzZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGNsZWFySW50ZXJ2YWwoJGludGVydmFsKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJHRoaXMub24oJ3NsaWRlclN0YXJ0JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgY2xlYXJJbnRlcnZhbCgkaW50ZXJ2YWwpO1xuICAgICAgICAgICRpbnRlcnZhbCA9IHNldEludGVydmFsKFxuICAgICAgICAgICAgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgJGFjdGl2ZV9pbmRleCA9ICRzbGlkZXIuZmluZCgnLmFjdGl2ZScpLmluZGV4KCk7XG4gICAgICAgICAgICAgIGlmICgkc2xpZGVzLmxlbmd0aCA9PSAkYWN0aXZlX2luZGV4ICsgMSkgJGFjdGl2ZV9pbmRleCA9IDA7IC8vIGxvb3AgdG8gc3RhcnRcbiAgICAgICAgICAgICAgZWxzZSAkYWN0aXZlX2luZGV4ICs9IDE7XG5cbiAgICAgICAgICAgICAgbW92ZVRvU2xpZGUoJGFjdGl2ZV9pbmRleCk7XG5cbiAgICAgICAgICAgIH0sIG9wdGlvbnMudHJhbnNpdGlvbiArIG9wdGlvbnMuaW50ZXJ2YWxcbiAgICAgICAgICApO1xuICAgICAgICB9KTtcblxuICAgICAgICAkdGhpcy5vbignc2xpZGVyTmV4dCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICRhY3RpdmVfaW5kZXggPSAkc2xpZGVyLmZpbmQoJy5hY3RpdmUnKS5pbmRleCgpO1xuICAgICAgICAgIG1vdmVUb1NsaWRlKCRhY3RpdmVfaW5kZXggKyAxKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJHRoaXMub24oJ3NsaWRlclByZXYnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAkYWN0aXZlX2luZGV4ID0gJHNsaWRlci5maW5kKCcuYWN0aXZlJykuaW5kZXgoKTtcbiAgICAgICAgICBtb3ZlVG9TbGlkZSgkYWN0aXZlX2luZGV4IC0gMSk7XG4gICAgICAgIH0pO1xuXG4gICAgICB9KTtcblxuXG5cbiAgICB9LFxuICAgIHBhdXNlIDogZnVuY3Rpb24oKSB7XG4gICAgICAkKHRoaXMpLnRyaWdnZXIoJ3NsaWRlclBhdXNlJyk7XG4gICAgfSxcbiAgICBzdGFydCA6IGZ1bmN0aW9uKCkge1xuICAgICAgJCh0aGlzKS50cmlnZ2VyKCdzbGlkZXJTdGFydCcpO1xuICAgIH0sXG4gICAgbmV4dCA6IGZ1bmN0aW9uKCkge1xuICAgICAgJCh0aGlzKS50cmlnZ2VyKCdzbGlkZXJOZXh0Jyk7XG4gICAgfSxcbiAgICBwcmV2IDogZnVuY3Rpb24oKSB7XG4gICAgICAkKHRoaXMpLnRyaWdnZXIoJ3NsaWRlclByZXYnKTtcbiAgICB9XG4gIH07XG5cblxuICAgICQuZm4uc2xpZGVyID0gZnVuY3Rpb24obWV0aG9kT3JPcHRpb25zKSB7XG4gICAgICBpZiAoIG1ldGhvZHNbbWV0aG9kT3JPcHRpb25zXSApIHtcbiAgICAgICAgcmV0dXJuIG1ldGhvZHNbIG1ldGhvZE9yT3B0aW9ucyBdLmFwcGx5KCB0aGlzLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCggYXJndW1lbnRzLCAxICkpO1xuICAgICAgfSBlbHNlIGlmICggdHlwZW9mIG1ldGhvZE9yT3B0aW9ucyA9PT0gJ29iamVjdCcgfHwgISBtZXRob2RPck9wdGlvbnMgKSB7XG4gICAgICAgIC8vIERlZmF1bHQgdG8gXCJpbml0XCJcbiAgICAgICAgcmV0dXJuIG1ldGhvZHMuaW5pdC5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkLmVycm9yKCAnTWV0aG9kICcgKyAgbWV0aG9kT3JPcHRpb25zICsgJyBkb2VzIG5vdCBleGlzdCBvbiBqUXVlcnkudG9vbHRpcCcgKTtcbiAgICAgIH1cbiAgICB9OyAvLyBQbHVnaW4gZW5kXG59KCBqUXVlcnkgKSk7XG47KGZ1bmN0aW9uICgkKSB7XG4gICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrLmNhcmQnLCAnLmNhcmQnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgaWYgKCQodGhpcykuZmluZCgnPiAuY2FyZC1yZXZlYWwnKS5sZW5ndGgpIHtcbiAgICAgICAgaWYgKCQoZS50YXJnZXQpLmlzKCQoJy5jYXJkLXJldmVhbCAuY2FyZC10aXRsZScpKSB8fCAkKGUudGFyZ2V0KS5pcygkKCcuY2FyZC1yZXZlYWwgLmNhcmQtdGl0bGUgaScpKSkge1xuICAgICAgICAgIC8vIE1ha2UgUmV2ZWFsIGFuaW1hdGUgZG93biBhbmQgZGlzcGxheSBub25lXG4gICAgICAgICAgJCh0aGlzKS5maW5kKCcuY2FyZC1yZXZlYWwnKS52ZWxvY2l0eShcbiAgICAgICAgICAgIHt0cmFuc2xhdGVZOiAwfSwge1xuICAgICAgICAgICAgICBkdXJhdGlvbjogMjI1LFxuICAgICAgICAgICAgICBxdWV1ZTogZmFsc2UsXG4gICAgICAgICAgICAgIGVhc2luZzogJ2Vhc2VJbk91dFF1YWQnLFxuICAgICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24oKSB7ICQodGhpcykuY3NzKHsgZGlzcGxheTogJ25vbmUnfSk7IH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCQoZS50YXJnZXQpLmlzKCQoJy5jYXJkIC5hY3RpdmF0b3InKSkgfHxcbiAgICAgICAgICAgICAgICAgJChlLnRhcmdldCkuaXMoJCgnLmNhcmQgLmFjdGl2YXRvciBpJykpICkge1xuICAgICAgICAgICQoZS50YXJnZXQpLmNsb3Nlc3QoJy5jYXJkJykuY3NzKCdvdmVyZmxvdycsICdoaWRkZW4nKTtcbiAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5jYXJkLXJldmVhbCcpLmNzcyh7IGRpc3BsYXk6ICdibG9jayd9KS52ZWxvY2l0eShcInN0b3BcIiwgZmFsc2UpLnZlbG9jaXR5KHt0cmFuc2xhdGVZOiAnLTEwMCUnfSwge2R1cmF0aW9uOiAzMDAsIHF1ZXVlOiBmYWxzZSwgZWFzaW5nOiAnZWFzZUluT3V0UXVhZCd9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gIH0pO1xufSggalF1ZXJ5ICkpOzsoZnVuY3Rpb24gKCQpIHtcbiAgdmFyIGNoaXBzSGFuZGxlRXZlbnRzID0gZmFsc2U7XG4gIHZhciBtYXRlcmlhbENoaXBzRGVmYXVsdHMgPSB7XG4gICAgZGF0YTogW10sXG4gICAgcGxhY2Vob2xkZXI6ICcnLFxuICAgIHNlY29uZGFyeVBsYWNlaG9sZGVyOiAnJyxcbiAgfTtcblxuICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICAvLyBIYW5kbGUgcmVtb3ZhbCBvZiBzdGF0aWMgY2hpcHMuXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5jaGlwIC5jbG9zZScsIGZ1bmN0aW9uKGUpe1xuICAgICAgdmFyICRjaGlwcyA9ICQodGhpcykuY2xvc2VzdCgnLmNoaXBzJyk7XG4gICAgICBpZiAoJGNoaXBzLmF0dHIoJ2RhdGEtaW5pdGlhbGl6ZWQnKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5jaGlwJykucmVtb3ZlKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gICQuZm4ubWF0ZXJpYWxfY2hpcCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHRoaXMuJGVsID0gJCh0aGlzKTtcbiAgICB0aGlzLiRkb2N1bWVudCA9ICQoZG9jdW1lbnQpO1xuICAgIHRoaXMuU0VMUyA9IHtcbiAgICAgIENISVBTOiAnLmNoaXBzJyxcbiAgICAgIENISVA6ICcuY2hpcCcsXG4gICAgICBJTlBVVDogJ2lucHV0JyxcbiAgICAgIERFTEVURTogJy5tYXRlcmlhbC1pY29ucycsXG4gICAgICBTRUxFQ1RFRF9DSElQOiAnLnNlbGVjdGVkJyxcbiAgICB9O1xuXG4gICAgaWYgKCdkYXRhJyA9PT0gb3B0aW9ucykge1xuICAgICAgcmV0dXJuIHRoaXMuJGVsLmRhdGEoJ2NoaXBzJyk7XG4gICAgfVxuXG4gICAgdmFyIGN1cnJfb3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBtYXRlcmlhbENoaXBzRGVmYXVsdHMsIG9wdGlvbnMpO1xuXG5cbiAgICAvLyBJbml0aWFsaXplXG4gICAgdGhpcy5pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgaSA9IDA7XG4gICAgICB2YXIgY2hpcHM7XG4gICAgICBzZWxmLiRlbC5lYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciAkY2hpcHMgPSAkKHRoaXMpO1xuICAgICAgICB2YXIgY2hpcElkID0gTWF0ZXJpYWxpemUuZ3VpZCgpO1xuXG4gICAgICAgIGlmICghY3Vycl9vcHRpb25zLmRhdGEgfHwgIShjdXJyX29wdGlvbnMuZGF0YSBpbnN0YW5jZW9mIEFycmF5KSkge1xuICAgICAgICAgIGN1cnJfb3B0aW9ucy5kYXRhID0gW107XG4gICAgICAgIH1cbiAgICAgICAgJGNoaXBzLmRhdGEoJ2NoaXBzJywgY3Vycl9vcHRpb25zLmRhdGEpO1xuICAgICAgICAkY2hpcHMuYXR0cignZGF0YS1pbmRleCcsIGkpO1xuICAgICAgICAkY2hpcHMuYXR0cignZGF0YS1pbml0aWFsaXplZCcsIHRydWUpO1xuXG4gICAgICAgIGlmICghJGNoaXBzLmhhc0NsYXNzKHNlbGYuU0VMUy5DSElQUykpIHtcbiAgICAgICAgICAkY2hpcHMuYWRkQ2xhc3MoJ2NoaXBzJyk7XG4gICAgICAgIH1cblxuICAgICAgICBzZWxmLmNoaXBzKCRjaGlwcywgY2hpcElkKTtcbiAgICAgICAgaSsrO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIHRoaXMuaGFuZGxlRXZlbnRzID0gZnVuY3Rpb24oKXtcbiAgICAgIHZhciBTRUxTID0gc2VsZi5TRUxTO1xuXG4gICAgICBzZWxmLiRkb2N1bWVudC5vZmYoJ2NsaWNrLmNoaXBzLWZvY3VzJywgU0VMUy5DSElQUykub24oJ2NsaWNrLmNoaXBzLWZvY3VzJywgU0VMUy5DSElQUywgZnVuY3Rpb24oZSl7XG4gICAgICAgICQoZS50YXJnZXQpLmZpbmQoU0VMUy5JTlBVVCkuZm9jdXMoKTtcbiAgICAgIH0pO1xuXG4gICAgICBzZWxmLiRkb2N1bWVudC5vZmYoJ2NsaWNrLmNoaXBzLXNlbGVjdCcsIFNFTFMuQ0hJUCkub24oJ2NsaWNrLmNoaXBzLXNlbGVjdCcsIFNFTFMuQ0hJUCwgZnVuY3Rpb24oZSl7XG4gICAgICAgICQoU0VMUy5DSElQKS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICAgIH0pO1xuXG4gICAgICBzZWxmLiRkb2N1bWVudC5vZmYoJ2tleWRvd24uY2hpcHMnKS5vbigna2V5ZG93bi5jaGlwcycsIGZ1bmN0aW9uKGUpe1xuICAgICAgICBpZiAoJChlLnRhcmdldCkuaXMoJ2lucHV0LCB0ZXh0YXJlYScpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZGVsZXRlXG4gICAgICAgIHZhciAkY2hpcCA9IHNlbGYuJGRvY3VtZW50LmZpbmQoU0VMUy5DSElQICsgU0VMUy5TRUxFQ1RFRF9DSElQKTtcbiAgICAgICAgdmFyICRjaGlwcyA9ICRjaGlwLmNsb3Nlc3QoU0VMUy5DSElQUyk7XG4gICAgICAgIHZhciBsZW5ndGggPSAkY2hpcC5zaWJsaW5ncyhTRUxTLkNISVApLmxlbmd0aDtcbiAgICAgICAgdmFyIGluZGV4O1xuXG4gICAgICAgIGlmICghJGNoaXAubGVuZ3RoKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGUud2hpY2ggPT09IDggfHwgZS53aGljaCA9PT0gNDYpIHtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICBpbmRleCA9ICRjaGlwLmluZGV4KCk7XG4gICAgICAgICAgc2VsZi5kZWxldGVDaGlwKGluZGV4LCAkY2hpcHMpO1xuXG4gICAgICAgICAgdmFyIHNlbGVjdEluZGV4ID0gbnVsbDtcbiAgICAgICAgICBpZiAoKGluZGV4ICsgMSkgPCBsZW5ndGgpIHtcbiAgICAgICAgICAgIHNlbGVjdEluZGV4ID0gaW5kZXg7XG4gICAgICAgICAgfSBlbHNlIGlmIChpbmRleCA9PT0gbGVuZ3RoIHx8IChpbmRleCArIDEpID09PSBsZW5ndGgpIHtcbiAgICAgICAgICAgIHNlbGVjdEluZGV4ID0gbGVuZ3RoIC0gMTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoc2VsZWN0SW5kZXggPCAwKSBzZWxlY3RJbmRleCA9IG51bGw7XG5cbiAgICAgICAgICBpZiAobnVsbCAhPT0gc2VsZWN0SW5kZXgpIHtcbiAgICAgICAgICAgIHNlbGYuc2VsZWN0Q2hpcChzZWxlY3RJbmRleCwgJGNoaXBzKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCFsZW5ndGgpICRjaGlwcy5maW5kKCdpbnB1dCcpLmZvY3VzKCk7XG5cbiAgICAgICAgLy8gbGVmdFxuICAgICAgICB9IGVsc2UgaWYgKGUud2hpY2ggPT09IDM3KSB7XG4gICAgICAgICAgaW5kZXggPSAkY2hpcC5pbmRleCgpIC0gMTtcbiAgICAgICAgICBpZiAoaW5kZXggPCAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgICQoU0VMUy5DSElQKS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICAgICAgICBzZWxmLnNlbGVjdENoaXAoaW5kZXgsICRjaGlwcyk7XG5cbiAgICAgICAgLy8gcmlnaHRcbiAgICAgICAgfSBlbHNlIGlmIChlLndoaWNoID09PSAzOSkge1xuICAgICAgICAgIGluZGV4ID0gJGNoaXAuaW5kZXgoKSArIDE7XG4gICAgICAgICAgJChTRUxTLkNISVApLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xuICAgICAgICAgIGlmIChpbmRleCA+IGxlbmd0aCkge1xuICAgICAgICAgICAgJGNoaXBzLmZpbmQoJ2lucHV0JykuZm9jdXMoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgc2VsZi5zZWxlY3RDaGlwKGluZGV4LCAkY2hpcHMpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgc2VsZi4kZG9jdW1lbnQub2ZmKCdmb2N1c2luLmNoaXBzJywgU0VMUy5DSElQUyArICcgJyArIFNFTFMuSU5QVVQpLm9uKCdmb2N1c2luLmNoaXBzJywgU0VMUy5DSElQUyArICcgJyArIFNFTFMuSU5QVVQsIGZ1bmN0aW9uKGUpe1xuICAgICAgICB2YXIgJGN1cnJDaGlwcyA9ICQoZS50YXJnZXQpLmNsb3Nlc3QoU0VMUy5DSElQUyk7XG4gICAgICAgICRjdXJyQ2hpcHMuYWRkQ2xhc3MoJ2ZvY3VzJyk7XG4gICAgICAgICRjdXJyQ2hpcHMuc2libGluZ3MoJ2xhYmVsLCAucHJlZml4JykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAkKFNFTFMuQ0hJUCkucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgICB9KTtcblxuICAgICAgc2VsZi4kZG9jdW1lbnQub2ZmKCdmb2N1c291dC5jaGlwcycsIFNFTFMuQ0hJUFMgKyAnICcgKyBTRUxTLklOUFVUKS5vbignZm9jdXNvdXQuY2hpcHMnLCBTRUxTLkNISVBTICsgJyAnICsgU0VMUy5JTlBVVCwgZnVuY3Rpb24oZSl7XG4gICAgICAgIHZhciAkY3VyckNoaXBzID0gJChlLnRhcmdldCkuY2xvc2VzdChTRUxTLkNISVBTKTtcbiAgICAgICAgJGN1cnJDaGlwcy5yZW1vdmVDbGFzcygnZm9jdXMnKTtcblxuICAgICAgICAvLyBSZW1vdmUgYWN0aXZlIGlmIGVtcHR5XG4gICAgICAgIGlmICghJGN1cnJDaGlwcy5kYXRhKCdjaGlwcycpLmxlbmd0aCkge1xuICAgICAgICAgICRjdXJyQ2hpcHMuc2libGluZ3MoJ2xhYmVsJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICB9XG4gICAgICAgICRjdXJyQ2hpcHMuc2libGluZ3MoJy5wcmVmaXgnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICB9KTtcblxuICAgICAgc2VsZi4kZG9jdW1lbnQub2ZmKCdrZXlkb3duLmNoaXBzLWFkZCcsIFNFTFMuQ0hJUFMgKyAnICcgKyBTRUxTLklOUFVUKS5vbigna2V5ZG93bi5jaGlwcy1hZGQnLCBTRUxTLkNISVBTICsgJyAnICsgU0VMUy5JTlBVVCwgZnVuY3Rpb24oZSl7XG4gICAgICAgIHZhciAkdGFyZ2V0ID0gJChlLnRhcmdldCk7XG4gICAgICAgIHZhciAkY2hpcHMgPSAkdGFyZ2V0LmNsb3Nlc3QoU0VMUy5DSElQUyk7XG4gICAgICAgIHZhciBjaGlwc0xlbmd0aCA9ICRjaGlwcy5jaGlsZHJlbihTRUxTLkNISVApLmxlbmd0aDtcblxuICAgICAgICAvLyBlbnRlclxuICAgICAgICBpZiAoMTMgPT09IGUud2hpY2gpIHtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgc2VsZi5hZGRDaGlwKHt0YWc6ICR0YXJnZXQudmFsKCl9LCAkY2hpcHMpO1xuICAgICAgICAgICR0YXJnZXQudmFsKCcnKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBkZWxldGUgb3IgbGVmdFxuICAgICAgICAgaWYgKCg4ID09PSBlLmtleUNvZGUgfHwgMzcgPT09IGUua2V5Q29kZSkgJiYgJycgPT09ICR0YXJnZXQudmFsKCkgJiYgY2hpcHNMZW5ndGgpIHtcbiAgICAgICAgICBzZWxmLnNlbGVjdENoaXAoY2hpcHNMZW5ndGggLSAxLCAkY2hpcHMpO1xuICAgICAgICAgICR0YXJnZXQuYmx1cigpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIENsaWNrIG9uIGRlbGV0ZSBpY29uIGluIGNoaXAuXG4gICAgICBzZWxmLiRkb2N1bWVudC5vZmYoJ2NsaWNrLmNoaXBzLWRlbGV0ZScsIFNFTFMuQ0hJUFMgKyAnICcgKyBTRUxTLkRFTEVURSkub24oJ2NsaWNrLmNoaXBzLWRlbGV0ZScsIFNFTFMuQ0hJUFMgKyAnICcgKyBTRUxTLkRFTEVURSwgZnVuY3Rpb24oZSkge1xuICAgICAgICB2YXIgJHRhcmdldCA9ICQoZS50YXJnZXQpO1xuICAgICAgICB2YXIgJGNoaXBzID0gJHRhcmdldC5jbG9zZXN0KFNFTFMuQ0hJUFMpO1xuICAgICAgICB2YXIgJGNoaXAgPSAkdGFyZ2V0LmNsb3Nlc3QoU0VMUy5DSElQKTtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgc2VsZi5kZWxldGVDaGlwKCRjaGlwLmluZGV4KCksICRjaGlwcyk7XG4gICAgICAgICRjaGlwcy5maW5kKCdpbnB1dCcpLmZvY3VzKCk7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgdGhpcy5jaGlwcyA9IGZ1bmN0aW9uKCRjaGlwcywgY2hpcElkKSB7XG4gICAgICB2YXIgaHRtbCA9ICcnO1xuICAgICAgJGNoaXBzLmRhdGEoJ2NoaXBzJykuZm9yRWFjaChmdW5jdGlvbihlbGVtKXtcbiAgICAgICAgaHRtbCArPSBzZWxmLnJlbmRlckNoaXAoZWxlbSk7XG4gICAgICB9KTtcbiAgICAgIGh0bWwgKz0gJzxpbnB1dCBpZD1cIicgKyBjaGlwSWQgKydcIiBjbGFzcz1cImlucHV0XCIgcGxhY2Vob2xkZXI9XCJcIj4nO1xuICAgICAgJGNoaXBzLmh0bWwoaHRtbCk7XG4gICAgICBzZWxmLnNldFBsYWNlaG9sZGVyKCRjaGlwcyk7XG5cbiAgICAgIC8vIFNldCBmb3IgYXR0cmlidXRlIGZvciBsYWJlbFxuICAgICAgdmFyIGxhYmVsID0gJGNoaXBzLm5leHQoJ2xhYmVsJyk7XG4gICAgICBpZiAobGFiZWwubGVuZ3RoKSB7XG4gICAgICAgIGxhYmVsLmF0dHIoJ2ZvcicsIGNoaXBJZCk7XG5cbiAgICAgICAgaWYgKCRjaGlwcy5kYXRhKCdjaGlwcycpLmxlbmd0aCkge1xuICAgICAgICAgIGxhYmVsLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLnJlbmRlckNoaXAgPSBmdW5jdGlvbihlbGVtKSB7XG4gICAgICBpZiAoIWVsZW0udGFnKSByZXR1cm47XG5cbiAgICAgIHZhciBodG1sID0gJzxkaXYgY2xhc3M9XCJjaGlwXCI+JyArIGVsZW0udGFnO1xuICAgICAgaWYgKGVsZW0uaW1hZ2UpIHtcbiAgICAgICAgaHRtbCArPSAnIDxpbWcgc3JjPVwiJyArIGVsZW0uaW1hZ2UgKyAnXCI+ICc7XG4gICAgICB9XG4gICAgICBodG1sICs9ICc8aSBjbGFzcz1cIm1hdGVyaWFsLWljb25zIGNsb3NlXCI+Y2xvc2U8L2k+JztcbiAgICAgIGh0bWwgKz0gJzwvZGl2Pic7XG4gICAgICByZXR1cm4gaHRtbDtcbiAgICB9O1xuXG4gICAgdGhpcy5zZXRQbGFjZWhvbGRlciA9IGZ1bmN0aW9uKCRjaGlwcykge1xuICAgICAgaWYgKCRjaGlwcy5kYXRhKCdjaGlwcycpLmxlbmd0aCAmJiBjdXJyX29wdGlvbnMucGxhY2Vob2xkZXIpIHtcbiAgICAgICAgJGNoaXBzLmZpbmQoJ2lucHV0JykucHJvcCgncGxhY2Vob2xkZXInLCBjdXJyX29wdGlvbnMucGxhY2Vob2xkZXIpO1xuXG4gICAgICB9IGVsc2UgaWYgKCEkY2hpcHMuZGF0YSgnY2hpcHMnKS5sZW5ndGggJiYgY3Vycl9vcHRpb25zLnNlY29uZGFyeVBsYWNlaG9sZGVyKSB7XG4gICAgICAgICRjaGlwcy5maW5kKCdpbnB1dCcpLnByb3AoJ3BsYWNlaG9sZGVyJywgY3Vycl9vcHRpb25zLnNlY29uZGFyeVBsYWNlaG9sZGVyKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5pc1ZhbGlkID0gZnVuY3Rpb24oJGNoaXBzLCBlbGVtKSB7XG4gICAgICB2YXIgY2hpcHMgPSAkY2hpcHMuZGF0YSgnY2hpcHMnKTtcbiAgICAgIHZhciBleGlzdHMgPSBmYWxzZTtcbiAgICAgIGZvciAodmFyIGk9MDsgaSA8IGNoaXBzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChjaGlwc1tpXS50YWcgPT09IGVsZW0udGFnKSB7XG4gICAgICAgICAgICBleGlzdHMgPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gJycgIT09IGVsZW0udGFnICYmICFleGlzdHM7XG4gICAgfTtcblxuICAgIHRoaXMuYWRkQ2hpcCA9IGZ1bmN0aW9uKGVsZW0sICRjaGlwcykge1xuICAgICAgaWYgKCFzZWxmLmlzVmFsaWQoJGNoaXBzLCBlbGVtKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB2YXIgY2hpcEh0bWwgPSBzZWxmLnJlbmRlckNoaXAoZWxlbSk7XG4gICAgICB2YXIgbmV3RGF0YSA9IFtdO1xuICAgICAgdmFyIG9sZERhdGEgPSAkY2hpcHMuZGF0YSgnY2hpcHMnKTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2xkRGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgICBuZXdEYXRhLnB1c2gob2xkRGF0YVtpXSk7XG4gICAgICB9XG4gICAgICBuZXdEYXRhLnB1c2goZWxlbSk7XG5cbiAgICAgICRjaGlwcy5kYXRhKCdjaGlwcycsIG5ld0RhdGEpO1xuICAgICAgJChjaGlwSHRtbCkuaW5zZXJ0QmVmb3JlKCRjaGlwcy5maW5kKCdpbnB1dCcpKTtcbiAgICAgICRjaGlwcy50cmlnZ2VyKCdjaGlwLmFkZCcsIGVsZW0pO1xuICAgICAgc2VsZi5zZXRQbGFjZWhvbGRlcigkY2hpcHMpO1xuICAgIH07XG5cbiAgICB0aGlzLmRlbGV0ZUNoaXAgPSBmdW5jdGlvbihjaGlwSW5kZXgsICRjaGlwcykge1xuICAgICAgdmFyIGNoaXAgPSAkY2hpcHMuZGF0YSgnY2hpcHMnKVtjaGlwSW5kZXhdO1xuICAgICAgJGNoaXBzLmZpbmQoJy5jaGlwJykuZXEoY2hpcEluZGV4KS5yZW1vdmUoKTtcblxuICAgICAgdmFyIG5ld0RhdGEgPSBbXTtcbiAgICAgIHZhciBvbGREYXRhID0gJGNoaXBzLmRhdGEoJ2NoaXBzJyk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9sZERhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGkgIT09IGNoaXBJbmRleCkge1xuICAgICAgICAgIG5ld0RhdGEucHVzaChvbGREYXRhW2ldKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAkY2hpcHMuZGF0YSgnY2hpcHMnLCBuZXdEYXRhKTtcbiAgICAgICRjaGlwcy50cmlnZ2VyKCdjaGlwLmRlbGV0ZScsIGNoaXApO1xuICAgICAgc2VsZi5zZXRQbGFjZWhvbGRlcigkY2hpcHMpO1xuICAgIH07XG5cbiAgICB0aGlzLnNlbGVjdENoaXAgPSBmdW5jdGlvbihjaGlwSW5kZXgsICRjaGlwcykge1xuICAgICAgdmFyICRjaGlwID0gJGNoaXBzLmZpbmQoJy5jaGlwJykuZXEoY2hpcEluZGV4KTtcbiAgICAgIGlmICgkY2hpcCAmJiBmYWxzZSA9PT0gJGNoaXAuaGFzQ2xhc3MoJ3NlbGVjdGVkJykpIHtcbiAgICAgICAgJGNoaXAuYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgICAgICRjaGlwcy50cmlnZ2VyKCdjaGlwLnNlbGVjdCcsICRjaGlwcy5kYXRhKCdjaGlwcycpW2NoaXBJbmRleF0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmdldENoaXBzRWxlbWVudCA9IGZ1bmN0aW9uKGluZGV4LCAkY2hpcHMpIHtcbiAgICAgIHJldHVybiAkY2hpcHMuZXEoaW5kZXgpO1xuICAgIH07XG5cbiAgICAvLyBpbml0XG4gICAgdGhpcy5pbml0KCk7XG5cbiAgICBpZiAoIWNoaXBzSGFuZGxlRXZlbnRzKSB7XG4gICAgICB0aGlzLmhhbmRsZUV2ZW50cygpO1xuICAgICAgY2hpcHNIYW5kbGVFdmVudHMgPSB0cnVlO1xuICAgIH1cbiAgfTtcbn0oIGpRdWVyeSApKTs7KGZ1bmN0aW9uICgkKSB7XG4gICQuZm4ucHVzaHBpbiA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgLy8gRGVmYXVsdHNcbiAgICB2YXIgZGVmYXVsdHMgPSB7XG4gICAgICB0b3A6IDAsXG4gICAgICBib3R0b206IEluZmluaXR5LFxuICAgICAgb2Zmc2V0OiAwXG4gICAgfTtcblxuICAgIC8vIFJlbW92ZSBwdXNocGluIGV2ZW50IGFuZCBjbGFzc2VzXG4gICAgaWYgKG9wdGlvbnMgPT09IFwicmVtb3ZlXCIpIHtcbiAgICAgIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChpZCA9ICQodGhpcykuZGF0YSgncHVzaHBpbi1pZCcpKSB7XG4gICAgICAgICAgJCh3aW5kb3cpLm9mZignc2Nyb2xsLicgKyBpZCk7XG4gICAgICAgICAgJCh0aGlzKS5yZW1vdmVEYXRhKCdwdXNocGluLWlkJykucmVtb3ZlQ2xhc3MoJ3Bpbi10b3AgcGlubmVkIHBpbi1ib3R0b20nKS5yZW1vdmVBdHRyKCdzdHlsZScpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBvcHRpb25zID0gJC5leHRlbmQoZGVmYXVsdHMsIG9wdGlvbnMpO1xuXG5cbiAgICAkaW5kZXggPSAwO1xuICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgJHVuaXF1ZUlkID0gTWF0ZXJpYWxpemUuZ3VpZCgpLFxuICAgICAgICAgICR0aGlzID0gJCh0aGlzKSxcbiAgICAgICAgICAkb3JpZ2luYWxfb2Zmc2V0ID0gJCh0aGlzKS5vZmZzZXQoKS50b3A7XG5cbiAgICAgIGZ1bmN0aW9uIHJlbW92ZVBpbkNsYXNzZXMob2JqZWN0KSB7XG4gICAgICAgIG9iamVjdC5yZW1vdmVDbGFzcygncGluLXRvcCcpO1xuICAgICAgICBvYmplY3QucmVtb3ZlQ2xhc3MoJ3Bpbm5lZCcpO1xuICAgICAgICBvYmplY3QucmVtb3ZlQ2xhc3MoJ3Bpbi1ib3R0b20nKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gdXBkYXRlRWxlbWVudHMob2JqZWN0cywgc2Nyb2xsZWQpIHtcbiAgICAgICAgb2JqZWN0cy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAvLyBBZGQgcG9zaXRpb24gZml4ZWQgKGJlY2F1c2UgaXRzIGJldHdlZW4gdG9wIGFuZCBib3R0b20pXG4gICAgICAgICAgaWYgKG9wdGlvbnMudG9wIDw9IHNjcm9sbGVkICYmIG9wdGlvbnMuYm90dG9tID49IHNjcm9sbGVkICYmICEkKHRoaXMpLmhhc0NsYXNzKCdwaW5uZWQnKSkge1xuICAgICAgICAgICAgcmVtb3ZlUGluQ2xhc3NlcygkKHRoaXMpKTtcbiAgICAgICAgICAgICQodGhpcykuY3NzKCd0b3AnLCBvcHRpb25zLm9mZnNldCk7XG4gICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdwaW5uZWQnKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBBZGQgcGluLXRvcCAod2hlbiBzY3JvbGxlZCBwb3NpdGlvbiBpcyBhYm92ZSB0b3ApXG4gICAgICAgICAgaWYgKHNjcm9sbGVkIDwgb3B0aW9ucy50b3AgJiYgISQodGhpcykuaGFzQ2xhc3MoJ3Bpbi10b3AnKSkge1xuICAgICAgICAgICAgcmVtb3ZlUGluQ2xhc3NlcygkKHRoaXMpKTtcbiAgICAgICAgICAgICQodGhpcykuY3NzKCd0b3AnLCAwKTtcbiAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ3Bpbi10b3AnKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBBZGQgcGluLWJvdHRvbSAod2hlbiBzY3JvbGxlZCBwb3NpdGlvbiBpcyBiZWxvdyBib3R0b20pXG4gICAgICAgICAgaWYgKHNjcm9sbGVkID4gb3B0aW9ucy5ib3R0b20gJiYgISQodGhpcykuaGFzQ2xhc3MoJ3Bpbi1ib3R0b20nKSkge1xuICAgICAgICAgICAgcmVtb3ZlUGluQ2xhc3NlcygkKHRoaXMpKTtcbiAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ3Bpbi1ib3R0b20nKTtcbiAgICAgICAgICAgICQodGhpcykuY3NzKCd0b3AnLCBvcHRpb25zLmJvdHRvbSAtICRvcmlnaW5hbF9vZmZzZXQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgICQodGhpcykuZGF0YSgncHVzaHBpbi1pZCcsICR1bmlxdWVJZCk7XG4gICAgICB1cGRhdGVFbGVtZW50cygkdGhpcywgJCh3aW5kb3cpLnNjcm9sbFRvcCgpKTtcbiAgICAgICQod2luZG93KS5vbignc2Nyb2xsLicgKyAkdW5pcXVlSWQsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyICRzY3JvbGxlZCA9ICQod2luZG93KS5zY3JvbGxUb3AoKSArIG9wdGlvbnMub2Zmc2V0O1xuICAgICAgICB1cGRhdGVFbGVtZW50cygkdGhpcywgJHNjcm9sbGVkKTtcbiAgICAgIH0pO1xuXG4gICAgfSk7XG5cbiAgfTtcbn0oIGpRdWVyeSApKTs7KGZ1bmN0aW9uICgkKSB7XG4gICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuXG4gICAgLy8galF1ZXJ5IHJldmVyc2VcbiAgICAkLmZuLnJldmVyc2UgPSBbXS5yZXZlcnNlO1xuXG4gICAgLy8gSG92ZXIgYmVoYXZpb3VyOiBtYWtlIHN1cmUgdGhpcyBkb2Vzbid0IHdvcmsgb24gLmNsaWNrLXRvLXRvZ2dsZSBGQUJzIVxuICAgICQoZG9jdW1lbnQpLm9uKCdtb3VzZWVudGVyLmZpeGVkQWN0aW9uQnRuJywgJy5maXhlZC1hY3Rpb24tYnRuOm5vdCguY2xpY2stdG8tdG9nZ2xlKTpub3QoLnRvb2xiYXIpJywgZnVuY3Rpb24oZSkge1xuICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcbiAgICAgIG9wZW5GQUJNZW51KCR0aGlzKTtcbiAgICB9KTtcbiAgICAkKGRvY3VtZW50KS5vbignbW91c2VsZWF2ZS5maXhlZEFjdGlvbkJ0bicsICcuZml4ZWQtYWN0aW9uLWJ0bjpub3QoLmNsaWNrLXRvLXRvZ2dsZSk6bm90KC50b29sYmFyKScsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XG4gICAgICBjbG9zZUZBQk1lbnUoJHRoaXMpO1xuICAgIH0pO1xuXG4gICAgLy8gVG9nZ2xlLW9uLWNsaWNrIGJlaGF2aW91ci5cbiAgICAkKGRvY3VtZW50KS5vbignY2xpY2suZmFiQ2xpY2tUb2dnbGUnLCAnLmZpeGVkLWFjdGlvbi1idG4uY2xpY2stdG8tdG9nZ2xlID4gYScsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XG4gICAgICB2YXIgJG1lbnUgPSAkdGhpcy5wYXJlbnQoKTtcbiAgICAgIGlmICgkbWVudS5oYXNDbGFzcygnYWN0aXZlJykpIHtcbiAgICAgICAgY2xvc2VGQUJNZW51KCRtZW51KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9wZW5GQUJNZW51KCRtZW51KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIFRvb2xiYXIgdHJhbnNpdGlvbiBiZWhhdmlvdXIuXG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrLmZhYlRvb2xiYXInLCAnLmZpeGVkLWFjdGlvbi1idG4udG9vbGJhciA+IGEnLCBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xuICAgICAgdmFyICRtZW51ID0gJHRoaXMucGFyZW50KCk7XG4gICAgICBGQUJ0b1Rvb2xiYXIoJG1lbnUpO1xuICAgIH0pO1xuXG4gIH0pO1xuXG4gICQuZm4uZXh0ZW5kKHtcbiAgICBvcGVuRkFCOiBmdW5jdGlvbigpIHtcbiAgICAgIG9wZW5GQUJNZW51KCQodGhpcykpO1xuICAgIH0sXG4gICAgY2xvc2VGQUI6IGZ1bmN0aW9uKCkge1xuICAgICAgY2xvc2VGQUJNZW51KCQodGhpcykpO1xuICAgIH0sXG4gICAgb3BlblRvb2xiYXI6IGZ1bmN0aW9uKCkge1xuICAgICAgRkFCdG9Ub29sYmFyKCQodGhpcykpO1xuICAgIH0sXG4gICAgY2xvc2VUb29sYmFyOiBmdW5jdGlvbigpIHtcbiAgICAgIHRvb2xiYXJUb0ZBQigkKHRoaXMpKTtcbiAgICB9XG4gIH0pO1xuXG5cbiAgdmFyIG9wZW5GQUJNZW51ID0gZnVuY3Rpb24gKGJ0bikge1xuICAgIHZhciAkdGhpcyA9IGJ0bjtcbiAgICBpZiAoJHRoaXMuaGFzQ2xhc3MoJ2FjdGl2ZScpID09PSBmYWxzZSkge1xuXG4gICAgICAvLyBHZXQgZGlyZWN0aW9uIG9wdGlvblxuICAgICAgdmFyIGhvcml6b250YWwgPSAkdGhpcy5oYXNDbGFzcygnaG9yaXpvbnRhbCcpO1xuICAgICAgdmFyIG9mZnNldFksIG9mZnNldFg7XG5cbiAgICAgIGlmIChob3Jpem9udGFsID09PSB0cnVlKSB7XG4gICAgICAgIG9mZnNldFggPSA0MDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9mZnNldFkgPSA0MDtcbiAgICAgIH1cblxuICAgICAgJHRoaXMuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgJHRoaXMuZmluZCgndWwgLmJ0bi1mbG9hdGluZycpLnZlbG9jaXR5KFxuICAgICAgICB7IHNjYWxlWTogXCIuNFwiLCBzY2FsZVg6IFwiLjRcIiwgdHJhbnNsYXRlWTogb2Zmc2V0WSArICdweCcsIHRyYW5zbGF0ZVg6IG9mZnNldFggKyAncHgnfSxcbiAgICAgICAgeyBkdXJhdGlvbjogMCB9KTtcblxuICAgICAgdmFyIHRpbWUgPSAwO1xuICAgICAgJHRoaXMuZmluZCgndWwgLmJ0bi1mbG9hdGluZycpLnJldmVyc2UoKS5lYWNoKCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQodGhpcykudmVsb2NpdHkoXG4gICAgICAgICAgeyBvcGFjaXR5OiBcIjFcIiwgc2NhbGVYOiBcIjFcIiwgc2NhbGVZOiBcIjFcIiwgdHJhbnNsYXRlWTogXCIwXCIsIHRyYW5zbGF0ZVg6ICcwJ30sXG4gICAgICAgICAgeyBkdXJhdGlvbjogODAsIGRlbGF5OiB0aW1lIH0pO1xuICAgICAgICB0aW1lICs9IDQwO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBjbG9zZUZBQk1lbnUgPSBmdW5jdGlvbiAoYnRuKSB7XG4gICAgdmFyICR0aGlzID0gYnRuO1xuICAgIC8vIEdldCBkaXJlY3Rpb24gb3B0aW9uXG4gICAgdmFyIGhvcml6b250YWwgPSAkdGhpcy5oYXNDbGFzcygnaG9yaXpvbnRhbCcpO1xuICAgIHZhciBvZmZzZXRZLCBvZmZzZXRYO1xuXG4gICAgaWYgKGhvcml6b250YWwgPT09IHRydWUpIHtcbiAgICAgIG9mZnNldFggPSA0MDtcbiAgICB9IGVsc2Uge1xuICAgICAgb2Zmc2V0WSA9IDQwO1xuICAgIH1cblxuICAgICR0aGlzLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICB2YXIgdGltZSA9IDA7XG4gICAgJHRoaXMuZmluZCgndWwgLmJ0bi1mbG9hdGluZycpLnZlbG9jaXR5KFwic3RvcFwiLCB0cnVlKTtcbiAgICAkdGhpcy5maW5kKCd1bCAuYnRuLWZsb2F0aW5nJykudmVsb2NpdHkoXG4gICAgICB7IG9wYWNpdHk6IFwiMFwiLCBzY2FsZVg6IFwiLjRcIiwgc2NhbGVZOiBcIi40XCIsIHRyYW5zbGF0ZVk6IG9mZnNldFkgKyAncHgnLCB0cmFuc2xhdGVYOiBvZmZzZXRYICsgJ3B4J30sXG4gICAgICB7IGR1cmF0aW9uOiA4MCB9XG4gICAgKTtcbiAgfTtcblxuXG4gIC8qKlxuICAgKiBUcmFuc2Zvcm0gRkFCIGludG8gdG9vbGJhclxuICAgKiBAcGFyYW0gIHtPYmplY3R9ICBvYmplY3QgalF1ZXJ5IG9iamVjdFxuICAgKi9cbiAgdmFyIEZBQnRvVG9vbGJhciA9IGZ1bmN0aW9uKGJ0bikge1xuICAgIGlmIChidG4uYXR0cignZGF0YS1vcGVuJykgPT09IFwidHJ1ZVwiKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIG9mZnNldFgsIG9mZnNldFksIHNjYWxlRmFjdG9yO1xuICAgIHZhciB3aW5kb3dXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgIHZhciB3aW5kb3dIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgdmFyIGJ0blJlY3QgPSBidG5bMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgdmFyIGFuY2hvciA9IGJ0bi5maW5kKCc+IGEnKS5maXJzdCgpO1xuICAgIHZhciBtZW51ID0gYnRuLmZpbmQoJz4gdWwnKS5maXJzdCgpO1xuICAgIHZhciBiYWNrZHJvcCA9ICQoJzxkaXYgY2xhc3M9XCJmYWItYmFja2Ryb3BcIj48L2Rpdj4nKTtcbiAgICB2YXIgZmFiQ29sb3IgPSBhbmNob3IuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJyk7XG4gICAgYW5jaG9yLmFwcGVuZChiYWNrZHJvcCk7XG5cbiAgICBvZmZzZXRYID0gYnRuUmVjdC5sZWZ0IC0gKHdpbmRvd1dpZHRoIC8gMikgKyAoYnRuUmVjdC53aWR0aCAvIDIpO1xuICAgIG9mZnNldFkgPSB3aW5kb3dIZWlnaHQgLSBidG5SZWN0LmJvdHRvbTtcbiAgICBzY2FsZUZhY3RvciA9IHdpbmRvd1dpZHRoIC8gYmFja2Ryb3Aud2lkdGgoKTtcbiAgICBidG4uYXR0cignZGF0YS1vcmlnaW4tYm90dG9tJywgYnRuUmVjdC5ib3R0b20pO1xuICAgIGJ0bi5hdHRyKCdkYXRhLW9yaWdpbi1sZWZ0JywgYnRuUmVjdC5sZWZ0KTtcbiAgICBidG4uYXR0cignZGF0YS1vcmlnaW4td2lkdGgnLCBidG5SZWN0LndpZHRoKTtcblxuICAgIC8vIFNldCBpbml0aWFsIHN0YXRlXG4gICAgYnRuLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICBidG4uYXR0cignZGF0YS1vcGVuJywgdHJ1ZSk7XG4gICAgYnRuLmNzcyh7XG4gICAgICAndGV4dC1hbGlnbic6ICdjZW50ZXInLFxuICAgICAgd2lkdGg6ICcxMDAlJyxcbiAgICAgIGJvdHRvbTogMCxcbiAgICAgIGxlZnQ6IDAsXG4gICAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGVYKCcgKyBvZmZzZXRYICsgJ3B4KScsXG4gICAgICB0cmFuc2l0aW9uOiAnbm9uZSdcbiAgICB9KTtcbiAgICBhbmNob3IuY3NzKHtcbiAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVkoJyArIC1vZmZzZXRZICsgJ3B4KScsXG4gICAgICB0cmFuc2l0aW9uOiAnbm9uZSdcbiAgICB9KTtcbiAgICBiYWNrZHJvcC5jc3Moe1xuICAgICAgJ2JhY2tncm91bmQtY29sb3InOiBmYWJDb2xvclxuICAgIH0pO1xuXG5cbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgYnRuLmNzcyh7XG4gICAgICAgIHRyYW5zZm9ybTogJycsXG4gICAgICAgIHRyYW5zaXRpb246ICd0cmFuc2Zvcm0gLjJzIGN1YmljLWJlemllcigwLjU1MCwgMC4wODUsIDAuNjgwLCAwLjUzMCksIGJhY2tncm91bmQtY29sb3IgMHMgbGluZWFyIC4ycydcbiAgICAgIH0pO1xuICAgICAgYW5jaG9yLmNzcyh7XG4gICAgICAgIG92ZXJmbG93OiAndmlzaWJsZScsXG4gICAgICAgIHRyYW5zZm9ybTogJycsXG4gICAgICAgIHRyYW5zaXRpb246ICd0cmFuc2Zvcm0gLjJzJ1xuICAgICAgfSk7XG5cbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIGJ0bi5jc3Moe1xuICAgICAgICAgIG92ZXJmbG93OiAnaGlkZGVuJyxcbiAgICAgICAgICAnYmFja2dyb3VuZC1jb2xvcic6IGZhYkNvbG9yXG4gICAgICAgIH0pO1xuICAgICAgICBiYWNrZHJvcC5jc3Moe1xuICAgICAgICAgIHRyYW5zZm9ybTogJ3NjYWxlKCcgKyBzY2FsZUZhY3RvciArICcpJyxcbiAgICAgICAgICB0cmFuc2l0aW9uOiAndHJhbnNmb3JtIC4ycyBjdWJpYy1iZXppZXIoMC41NTAsIDAuMDU1LCAwLjY3NSwgMC4xOTApJ1xuICAgICAgICB9KTtcbiAgICAgICAgbWVudS5maW5kKCc+IGxpID4gYScpLmNzcyh7XG4gICAgICAgICAgb3BhY2l0eTogMVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBTY3JvbGwgdG8gY2xvc2UuXG4gICAgICAgICQod2luZG93KS5vbignc2Nyb2xsLmZhYlRvb2xiYXJDbG9zZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHRvb2xiYXJUb0ZBQihidG4pO1xuICAgICAgICAgICQod2luZG93KS5vZmYoJ3Njcm9sbC5mYWJUb29sYmFyQ2xvc2UnKTtcbiAgICAgICAgICAkKGRvY3VtZW50KS5vZmYoJ2NsaWNrLmZhYlRvb2xiYXJDbG9zZScpO1xuICAgICAgICB9KTtcblxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2suZmFiVG9vbGJhckNsb3NlJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgIGlmICghJChlLnRhcmdldCkuY2xvc2VzdChtZW51KS5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRvb2xiYXJUb0ZBQihidG4pO1xuICAgICAgICAgICAgJCh3aW5kb3cpLm9mZignc2Nyb2xsLmZhYlRvb2xiYXJDbG9zZScpO1xuICAgICAgICAgICAgJChkb2N1bWVudCkub2ZmKCdjbGljay5mYWJUb29sYmFyQ2xvc2UnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSwgMTAwKTtcbiAgICB9LCAwKTtcbiAgfTtcblxuICAvKipcbiAgICogVHJhbnNmb3JtIHRvb2xiYXIgYmFjayBpbnRvIEZBQlxuICAgKiBAcGFyYW0gIHtPYmplY3R9ICBvYmplY3QgalF1ZXJ5IG9iamVjdFxuICAgKi9cbiAgdmFyIHRvb2xiYXJUb0ZBQiA9IGZ1bmN0aW9uKGJ0bikge1xuICAgIGlmIChidG4uYXR0cignZGF0YS1vcGVuJykgIT09IFwidHJ1ZVwiKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIG9mZnNldFgsIG9mZnNldFksIHNjYWxlRmFjdG9yO1xuICAgIHZhciB3aW5kb3dXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgIHZhciB3aW5kb3dIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgdmFyIGJ0bldpZHRoID0gYnRuLmF0dHIoJ2RhdGEtb3JpZ2luLXdpZHRoJyk7XG4gICAgdmFyIGJ0bkJvdHRvbSA9IGJ0bi5hdHRyKCdkYXRhLW9yaWdpbi1ib3R0b20nKTtcbiAgICB2YXIgYnRuTGVmdCA9IGJ0bi5hdHRyKCdkYXRhLW9yaWdpbi1sZWZ0Jyk7XG4gICAgdmFyIGFuY2hvciA9IGJ0bi5maW5kKCc+IC5idG4tZmxvYXRpbmcnKS5maXJzdCgpO1xuICAgIHZhciBtZW51ID0gYnRuLmZpbmQoJz4gdWwnKS5maXJzdCgpO1xuICAgIHZhciBiYWNrZHJvcCA9IGJ0bi5maW5kKCcuZmFiLWJhY2tkcm9wJyk7XG4gICAgdmFyIGZhYkNvbG9yID0gYW5jaG9yLmNzcygnYmFja2dyb3VuZC1jb2xvcicpO1xuXG4gICAgb2Zmc2V0WCA9IGJ0bkxlZnQgLSAod2luZG93V2lkdGggLyAyKSArIChidG5XaWR0aCAvIDIpO1xuICAgIG9mZnNldFkgPSB3aW5kb3dIZWlnaHQgLSBidG5Cb3R0b207XG4gICAgc2NhbGVGYWN0b3IgPSB3aW5kb3dXaWR0aCAvIGJhY2tkcm9wLndpZHRoKCk7XG5cblxuICAgIC8vIEhpZGUgYmFja2Ryb3BcbiAgICBidG4ucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgIGJ0bi5hdHRyKCdkYXRhLW9wZW4nLCBmYWxzZSk7XG4gICAgYnRuLmNzcyh7XG4gICAgICAnYmFja2dyb3VuZC1jb2xvcic6ICd0cmFuc3BhcmVudCcsXG4gICAgICB0cmFuc2l0aW9uOiAnbm9uZSdcbiAgICB9KTtcbiAgICBhbmNob3IuY3NzKHtcbiAgICAgIHRyYW5zaXRpb246ICdub25lJ1xuICAgIH0pO1xuICAgIGJhY2tkcm9wLmNzcyh7XG4gICAgICB0cmFuc2Zvcm06ICdzY2FsZSgwKScsXG4gICAgICAnYmFja2dyb3VuZC1jb2xvcic6IGZhYkNvbG9yXG4gICAgfSk7XG4gICAgbWVudS5maW5kKCc+IGxpID4gYScpLmNzcyh7XG4gICAgICBvcGFjaXR5OiAnJ1xuICAgIH0pO1xuXG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIGJhY2tkcm9wLnJlbW92ZSgpO1xuXG4gICAgICAvLyBTZXQgaW5pdGlhbCBzdGF0ZS5cbiAgICAgIGJ0bi5jc3Moe1xuICAgICAgICAndGV4dC1hbGlnbic6ICcnLFxuICAgICAgICB3aWR0aDogJycsXG4gICAgICAgIGJvdHRvbTogJycsXG4gICAgICAgIGxlZnQ6ICcnLFxuICAgICAgICBvdmVyZmxvdzogJycsXG4gICAgICAgICdiYWNrZ3JvdW5kLWNvbG9yJzogJycsXG4gICAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZTNkKCcgKyAtb2Zmc2V0WCArICdweCwwLDApJ1xuICAgICAgfSk7XG4gICAgICBhbmNob3IuY3NzKHtcbiAgICAgICAgb3ZlcmZsb3c6ICcnLFxuICAgICAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGUzZCgwLCcgKyBvZmZzZXRZICsgJ3B4LDApJ1xuICAgICAgfSk7XG5cbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIGJ0bi5jc3Moe1xuICAgICAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZTNkKDAsMCwwKScsXG4gICAgICAgICAgdHJhbnNpdGlvbjogJ3RyYW5zZm9ybSAuMnMnXG4gICAgICAgIH0pO1xuICAgICAgICBhbmNob3IuY3NzKHtcbiAgICAgICAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGUzZCgwLDAsMCknLFxuICAgICAgICAgIHRyYW5zaXRpb246ICd0cmFuc2Zvcm0gLjJzIGN1YmljLWJlemllcigwLjU1MCwgMC4wNTUsIDAuNjc1LCAwLjE5MCknXG4gICAgICAgIH0pO1xuICAgICAgfSwgMjApO1xuICAgIH0sIDIwMCk7XG4gIH07XG5cblxufSggalF1ZXJ5ICkpO1xuOyhmdW5jdGlvbiAoJCkge1xuICAvLyBJbWFnZSB0cmFuc2l0aW9uIGZ1bmN0aW9uXG4gIE1hdGVyaWFsaXplLmZhZGVJbkltYWdlID0gIGZ1bmN0aW9uKHNlbGVjdG9yT3JFbCkge1xuICAgIHZhciBlbGVtZW50O1xuICAgIGlmICh0eXBlb2Yoc2VsZWN0b3JPckVsKSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGVsZW1lbnQgPSAkKHNlbGVjdG9yT3JFbCk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2Yoc2VsZWN0b3JPckVsKSA9PT0gJ29iamVjdCcpIHtcbiAgICAgIGVsZW1lbnQgPSBzZWxlY3Rvck9yRWw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZWxlbWVudC5jc3Moe29wYWNpdHk6IDB9KTtcbiAgICAkKGVsZW1lbnQpLnZlbG9jaXR5KHtvcGFjaXR5OiAxfSwge1xuICAgICAgICBkdXJhdGlvbjogNjUwLFxuICAgICAgICBxdWV1ZTogZmFsc2UsXG4gICAgICAgIGVhc2luZzogJ2Vhc2VPdXRTaW5lJ1xuICAgICAgfSk7XG4gICAgJChlbGVtZW50KS52ZWxvY2l0eSh7b3BhY2l0eTogMX0sIHtcbiAgICAgICAgICBkdXJhdGlvbjogMTMwMCxcbiAgICAgICAgICBxdWV1ZTogZmFsc2UsXG4gICAgICAgICAgZWFzaW5nOiAnc3dpbmcnLFxuICAgICAgICAgIHN0ZXA6IGZ1bmN0aW9uKG5vdywgZngpIHtcbiAgICAgICAgICAgICAgZnguc3RhcnQgPSAxMDA7XG4gICAgICAgICAgICAgIHZhciBncmF5c2NhbGVfc2V0dGluZyA9IG5vdy8xMDA7XG4gICAgICAgICAgICAgIHZhciBicmlnaHRuZXNzX3NldHRpbmcgPSAxNTAgLSAoMTAwIC0gbm93KS8xLjc1O1xuXG4gICAgICAgICAgICAgIGlmIChicmlnaHRuZXNzX3NldHRpbmcgPCAxMDApIHtcbiAgICAgICAgICAgICAgICBicmlnaHRuZXNzX3NldHRpbmcgPSAxMDA7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKG5vdyA+PSAwKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jc3Moe1xuICAgICAgICAgICAgICAgICAgICBcIi13ZWJraXQtZmlsdGVyXCI6IFwiZ3JheXNjYWxlKFwiK2dyYXlzY2FsZV9zZXR0aW5nK1wiKVwiICsgXCJicmlnaHRuZXNzKFwiK2JyaWdodG5lc3Nfc2V0dGluZytcIiUpXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiZmlsdGVyXCI6IFwiZ3JheXNjYWxlKFwiK2dyYXlzY2FsZV9zZXR0aW5nK1wiKVwiICsgXCJicmlnaHRuZXNzKFwiK2JyaWdodG5lc3Nfc2V0dGluZytcIiUpXCJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgIH0pO1xuICB9O1xuXG4gIC8vIEhvcml6b250YWwgc3RhZ2dlcmVkIGxpc3RcbiAgTWF0ZXJpYWxpemUuc2hvd1N0YWdnZXJlZExpc3QgPSBmdW5jdGlvbihzZWxlY3Rvck9yRWwpIHtcbiAgICB2YXIgZWxlbWVudDtcbiAgICBpZiAodHlwZW9mKHNlbGVjdG9yT3JFbCkgPT09ICdzdHJpbmcnKSB7XG4gICAgICBlbGVtZW50ID0gJChzZWxlY3Rvck9yRWwpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mKHNlbGVjdG9yT3JFbCkgPT09ICdvYmplY3QnKSB7XG4gICAgICBlbGVtZW50ID0gc2VsZWN0b3JPckVsO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB0aW1lID0gMDtcbiAgICBlbGVtZW50LmZpbmQoJ2xpJykudmVsb2NpdHkoXG4gICAgICAgIHsgdHJhbnNsYXRlWDogXCItMTAwcHhcIn0sXG4gICAgICAgIHsgZHVyYXRpb246IDAgfSk7XG5cbiAgICBlbGVtZW50LmZpbmQoJ2xpJykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICQodGhpcykudmVsb2NpdHkoXG4gICAgICAgIHsgb3BhY2l0eTogXCIxXCIsIHRyYW5zbGF0ZVg6IFwiMFwifSxcbiAgICAgICAgeyBkdXJhdGlvbjogODAwLCBkZWxheTogdGltZSwgZWFzaW5nOiBbNjAsIDEwXSB9KTtcbiAgICAgIHRpbWUgKz0gMTIwO1xuICAgIH0pO1xuICB9O1xuXG5cbiAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG4gICAgLy8gSGFyZGNvZGVkIC5zdGFnZ2VyZWQtbGlzdCBzY3JvbGxGaXJlXG4gICAgLy8gdmFyIHN0YWdnZXJlZExpc3RPcHRpb25zID0gW107XG4gICAgLy8gJCgndWwuc3RhZ2dlcmVkLWxpc3QnKS5lYWNoKGZ1bmN0aW9uIChpKSB7XG5cbiAgICAvLyAgIHZhciBsYWJlbCA9ICdzY3JvbGxGaXJlLScgKyBpO1xuICAgIC8vICAgJCh0aGlzKS5hZGRDbGFzcyhsYWJlbCk7XG4gICAgLy8gICBzdGFnZ2VyZWRMaXN0T3B0aW9ucy5wdXNoKFxuICAgIC8vICAgICB7c2VsZWN0b3I6ICd1bC5zdGFnZ2VyZWQtbGlzdC4nICsgbGFiZWwsXG4gICAgLy8gICAgICBvZmZzZXQ6IDIwMCxcbiAgICAvLyAgICAgIGNhbGxiYWNrOiAnc2hvd1N0YWdnZXJlZExpc3QoXCJ1bC5zdGFnZ2VyZWQtbGlzdC4nICsgbGFiZWwgKyAnXCIpJ30pO1xuICAgIC8vIH0pO1xuICAgIC8vIHNjcm9sbEZpcmUoc3RhZ2dlcmVkTGlzdE9wdGlvbnMpO1xuXG4gICAgLy8gSGFtbWVySlMsIFN3aXBlIG5hdmlnYXRpb25cblxuICAgIC8vIFRvdWNoIEV2ZW50XG4gICAgdmFyIHN3aXBlTGVmdCA9IGZhbHNlO1xuICAgIHZhciBzd2lwZVJpZ2h0ID0gZmFsc2U7XG5cblxuICAgIC8vIERpc21pc3NpYmxlIENvbGxlY3Rpb25zXG4gICAgJCgnLmRpc21pc3NhYmxlJykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICQodGhpcykuaGFtbWVyKHtcbiAgICAgICAgcHJldmVudF9kZWZhdWx0OiBmYWxzZVxuICAgICAgfSkuYmluZCgncGFuJywgZnVuY3Rpb24oZSkge1xuICAgICAgICBpZiAoZS5nZXN0dXJlLnBvaW50ZXJUeXBlID09PSBcInRvdWNoXCIpIHtcbiAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xuICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSBlLmdlc3R1cmUuZGlyZWN0aW9uO1xuICAgICAgICAgIHZhciB4ID0gZS5nZXN0dXJlLmRlbHRhWDtcbiAgICAgICAgICB2YXIgdmVsb2NpdHlYID0gZS5nZXN0dXJlLnZlbG9jaXR5WDtcblxuICAgICAgICAgICR0aGlzLnZlbG9jaXR5KHsgdHJhbnNsYXRlWDogeFxuICAgICAgICAgICAgICB9LCB7ZHVyYXRpb246IDUwLCBxdWV1ZTogZmFsc2UsIGVhc2luZzogJ2Vhc2VPdXRRdWFkJ30pO1xuXG4gICAgICAgICAgLy8gU3dpcGUgTGVmdFxuICAgICAgICAgIGlmIChkaXJlY3Rpb24gPT09IDQgJiYgKHggPiAoJHRoaXMuaW5uZXJXaWR0aCgpIC8gMikgfHwgdmVsb2NpdHlYIDwgLTAuNzUpKSB7XG4gICAgICAgICAgICBzd2lwZUxlZnQgPSB0cnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFN3aXBlIFJpZ2h0XG4gICAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gMiAmJiAoeCA8ICgtMSAqICR0aGlzLmlubmVyV2lkdGgoKSAvIDIpIHx8IHZlbG9jaXR5WCA+IDAuNzUpKSB7XG4gICAgICAgICAgICBzd2lwZVJpZ2h0ID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pLmJpbmQoJ3BhbmVuZCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgLy8gUmVzZXQgaWYgY29sbGVjdGlvbiBpcyBtb3ZlZCBiYWNrIGludG8gb3JpZ2luYWwgcG9zaXRpb25cbiAgICAgICAgaWYgKE1hdGguYWJzKGUuZ2VzdHVyZS5kZWx0YVgpIDwgKCQodGhpcykuaW5uZXJXaWR0aCgpIC8gMikpIHtcbiAgICAgICAgICBzd2lwZVJpZ2h0ID0gZmFsc2U7XG4gICAgICAgICAgc3dpcGVMZWZ0ID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZS5nZXN0dXJlLnBvaW50ZXJUeXBlID09PSBcInRvdWNoXCIpIHtcbiAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xuICAgICAgICAgIGlmIChzd2lwZUxlZnQgfHwgc3dpcGVSaWdodCkge1xuICAgICAgICAgICAgdmFyIGZ1bGxXaWR0aDtcbiAgICAgICAgICAgIGlmIChzd2lwZUxlZnQpIHsgZnVsbFdpZHRoID0gJHRoaXMuaW5uZXJXaWR0aCgpOyB9XG4gICAgICAgICAgICBlbHNlIHsgZnVsbFdpZHRoID0gLTEgKiAkdGhpcy5pbm5lcldpZHRoKCk7IH1cblxuICAgICAgICAgICAgJHRoaXMudmVsb2NpdHkoeyB0cmFuc2xhdGVYOiBmdWxsV2lkdGgsXG4gICAgICAgICAgICAgIH0sIHtkdXJhdGlvbjogMTAwLCBxdWV1ZTogZmFsc2UsIGVhc2luZzogJ2Vhc2VPdXRRdWFkJywgY29tcGxldGU6XG4gICAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICR0aGlzLmNzcygnYm9yZGVyJywgJ25vbmUnKTtcbiAgICAgICAgICAgICAgICAkdGhpcy52ZWxvY2l0eSh7IGhlaWdodDogMCwgcGFkZGluZzogMCxcbiAgICAgICAgICAgICAgICAgIH0sIHtkdXJhdGlvbjogMjAwLCBxdWV1ZTogZmFsc2UsIGVhc2luZzogJ2Vhc2VPdXRRdWFkJywgY29tcGxldGU6XG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCkgeyAkdGhpcy5yZW1vdmUoKTsgfVxuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICR0aGlzLnZlbG9jaXR5KHsgdHJhbnNsYXRlWDogMCxcbiAgICAgICAgICAgICAgfSwge2R1cmF0aW9uOiAxMDAsIHF1ZXVlOiBmYWxzZSwgZWFzaW5nOiAnZWFzZU91dFF1YWQnfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHN3aXBlTGVmdCA9IGZhbHNlO1xuICAgICAgICAgIHN3aXBlUmlnaHQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICB9KTtcblxuXG4gICAgLy8gdGltZSA9IDBcbiAgICAvLyAvLyBWZXJ0aWNhbCBTdGFnZ2VyZWQgbGlzdFxuICAgIC8vICQoJ3VsLnN0YWdnZXJlZC1saXN0LnZlcnRpY2FsIGxpJykudmVsb2NpdHkoXG4gICAgLy8gICAgIHsgdHJhbnNsYXRlWTogXCIxMDBweFwifSxcbiAgICAvLyAgICAgeyBkdXJhdGlvbjogMCB9KTtcblxuICAgIC8vICQoJ3VsLnN0YWdnZXJlZC1saXN0LnZlcnRpY2FsIGxpJykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAvLyAgICQodGhpcykudmVsb2NpdHkoXG4gICAgLy8gICAgIHsgb3BhY2l0eTogXCIxXCIsIHRyYW5zbGF0ZVk6IFwiMFwifSxcbiAgICAvLyAgICAgeyBkdXJhdGlvbjogODAwLCBkZWxheTogdGltZSwgZWFzaW5nOiBbNjAsIDI1XSB9KTtcbiAgICAvLyAgIHRpbWUgKz0gMTIwO1xuICAgIC8vIH0pO1xuXG4gICAgLy8gLy8gRmFkZSBpbiBhbmQgU2NhbGVcbiAgICAvLyAkKCcuZmFkZS1pbi5zY2FsZScpLnZlbG9jaXR5KFxuICAgIC8vICAgICB7IHNjYWxlWDogLjQsIHNjYWxlWTogLjQsIHRyYW5zbGF0ZVg6IC02MDB9LFxuICAgIC8vICAgICB7IGR1cmF0aW9uOiAwfSk7XG4gICAgLy8gJCgnLmZhZGUtaW4nKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgIC8vICAgJCh0aGlzKS52ZWxvY2l0eShcbiAgICAvLyAgICAgeyBvcGFjaXR5OiBcIjFcIiwgc2NhbGVYOiAxLCBzY2FsZVk6IDEsIHRyYW5zbGF0ZVg6IDB9LFxuICAgIC8vICAgICB7IGR1cmF0aW9uOiA4MDAsIGVhc2luZzogWzYwLCAxMF0gfSk7XG4gICAgLy8gfSk7XG4gIH0pO1xufSggalF1ZXJ5ICkpO1xuOyhmdW5jdGlvbigkKSB7XG5cbiAgLy8gSW5wdXQ6IEFycmF5IG9mIEpTT04gb2JqZWN0cyB7c2VsZWN0b3IsIG9mZnNldCwgY2FsbGJhY2t9XG5cbiAgTWF0ZXJpYWxpemUuc2Nyb2xsRmlyZSA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblxuICAgIHZhciBkaWRTY3JvbGwgPSBmYWxzZTtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgZGlkU2Nyb2xsID0gdHJ1ZTtcbiAgICB9KTtcblxuICAgIC8vIFJhdGUgbGltaXQgdG8gMTAwbXNcbiAgICBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcbiAgICAgIGlmKGRpZFNjcm9sbCkge1xuICAgICAgICAgIGRpZFNjcm9sbCA9IGZhbHNlO1xuXG4gICAgICAgICAgdmFyIHdpbmRvd1Njcm9sbCA9IHdpbmRvdy5wYWdlWU9mZnNldCArIHdpbmRvdy5pbm5lckhlaWdodDtcblxuICAgICAgICAgIGZvciAodmFyIGkgPSAwIDsgaSA8IG9wdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIC8vIEdldCBvcHRpb25zIGZyb20gZWFjaCBsaW5lXG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBvcHRpb25zW2ldO1xuICAgICAgICAgICAgdmFyIHNlbGVjdG9yID0gdmFsdWUuc2VsZWN0b3IsXG4gICAgICAgICAgICAgICAgb2Zmc2V0ID0gdmFsdWUub2Zmc2V0LFxuICAgICAgICAgICAgICAgIGNhbGxiYWNrID0gdmFsdWUuY2FsbGJhY2s7XG5cbiAgICAgICAgICAgIHZhciBjdXJyZW50RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICAgICAgICAgICAgaWYgKCBjdXJyZW50RWxlbWVudCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICB2YXIgZWxlbWVudE9mZnNldCA9IGN1cnJlbnRFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCArIHdpbmRvdy5wYWdlWU9mZnNldDtcblxuICAgICAgICAgICAgICBpZiAod2luZG93U2Nyb2xsID4gKGVsZW1lbnRPZmZzZXQgKyBvZmZzZXQpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlLmRvbmUgIT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YoY2FsbGJhY2spID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwodGhpcywgY3VycmVudEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YoY2FsbGJhY2spID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2FsbGJhY2tGdW5jID0gbmV3IEZ1bmN0aW9uKGNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tGdW5jKGN1cnJlbnRFbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIHZhbHVlLmRvbmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCAxMDApO1xuICB9O1xuXG59KShqUXVlcnkpO1xuOy8qIVxuICogcGlja2FkYXRlLmpzIHYzLjUuMCwgMjAxNC8wNC8xM1xuICogQnkgQW1zdWwsIGh0dHA6Ly9hbXN1bC5jYVxuICogSG9zdGVkIG9uIGh0dHA6Ly9hbXN1bC5naXRodWIuaW8vcGlja2FkYXRlLmpzXG4gKiBMaWNlbnNlZCB1bmRlciBNSVRcbiAqL1xuXG4oZnVuY3Rpb24gKCBmYWN0b3J5ICkge1xuXG4gICAgLy8gQU1ELlxuICAgIGlmICggdHlwZW9mIGRlZmluZSA9PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgKVxuICAgICAgICBkZWZpbmUoICdwaWNrZXInLCBbJ2pxdWVyeSddLCBmYWN0b3J5IClcblxuICAgIC8vIE5vZGUuanMvYnJvd3NlcmlmeS5cbiAgICBlbHNlIGlmICggdHlwZW9mIGV4cG9ydHMgPT0gJ29iamVjdCcgKVxuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoIHJlcXVpcmUoJ2pxdWVyeScpIClcblxuICAgIC8vIEJyb3dzZXIgZ2xvYmFscy5cbiAgICBlbHNlIHRoaXMuUGlja2VyID0gZmFjdG9yeSggalF1ZXJ5IClcblxufShmdW5jdGlvbiggJCApIHtcblxudmFyICR3aW5kb3cgPSAkKCB3aW5kb3cgKVxudmFyICRkb2N1bWVudCA9ICQoIGRvY3VtZW50IClcbnZhciAkaHRtbCA9ICQoIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCApXG5cblxuLyoqXG4gKiBUaGUgcGlja2VyIGNvbnN0cnVjdG9yIHRoYXQgY3JlYXRlcyBhIGJsYW5rIHBpY2tlci5cbiAqL1xuZnVuY3Rpb24gUGlja2VyQ29uc3RydWN0b3IoIEVMRU1FTlQsIE5BTUUsIENPTVBPTkVOVCwgT1BUSU9OUyApIHtcblxuICAgIC8vIElmIHRoZXJl4oCZcyBubyBlbGVtZW50LCByZXR1cm4gdGhlIHBpY2tlciBjb25zdHJ1Y3Rvci5cbiAgICBpZiAoICFFTEVNRU5UICkgcmV0dXJuIFBpY2tlckNvbnN0cnVjdG9yXG5cblxuICAgIHZhclxuICAgICAgICBJU19ERUZBVUxUX1RIRU1FID0gZmFsc2UsXG5cblxuICAgICAgICAvLyBUaGUgc3RhdGUgb2YgdGhlIHBpY2tlci5cbiAgICAgICAgU1RBVEUgPSB7XG4gICAgICAgICAgICBpZDogRUxFTUVOVC5pZCB8fCAnUCcgKyBNYXRoLmFicyggfn4oTWF0aC5yYW5kb20oKSAqIG5ldyBEYXRlKCkpIClcbiAgICAgICAgfSxcblxuXG4gICAgICAgIC8vIE1lcmdlIHRoZSBkZWZhdWx0cyBhbmQgb3B0aW9ucyBwYXNzZWQuXG4gICAgICAgIFNFVFRJTkdTID0gQ09NUE9ORU5UID8gJC5leHRlbmQoIHRydWUsIHt9LCBDT01QT05FTlQuZGVmYXVsdHMsIE9QVElPTlMgKSA6IE9QVElPTlMgfHwge30sXG5cblxuICAgICAgICAvLyBNZXJnZSB0aGUgZGVmYXVsdCBjbGFzc2VzIHdpdGggdGhlIHNldHRpbmdzIGNsYXNzZXMuXG4gICAgICAgIENMQVNTRVMgPSAkLmV4dGVuZCgge30sIFBpY2tlckNvbnN0cnVjdG9yLmtsYXNzZXMoKSwgU0VUVElOR1Mua2xhc3MgKSxcblxuXG4gICAgICAgIC8vIFRoZSBlbGVtZW50IG5vZGUgd3JhcHBlciBpbnRvIGEgalF1ZXJ5IG9iamVjdC5cbiAgICAgICAgJEVMRU1FTlQgPSAkKCBFTEVNRU5UICksXG5cblxuICAgICAgICAvLyBQc2V1ZG8gcGlja2VyIGNvbnN0cnVjdG9yLlxuICAgICAgICBQaWNrZXJJbnN0YW5jZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhcnQoKVxuICAgICAgICB9LFxuXG5cbiAgICAgICAgLy8gVGhlIHBpY2tlciBwcm90b3R5cGUuXG4gICAgICAgIFAgPSBQaWNrZXJJbnN0YW5jZS5wcm90b3R5cGUgPSB7XG5cbiAgICAgICAgICAgIGNvbnN0cnVjdG9yOiBQaWNrZXJJbnN0YW5jZSxcblxuICAgICAgICAgICAgJG5vZGU6ICRFTEVNRU5ULFxuXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogSW5pdGlhbGl6ZSBldmVyeXRoaW5nXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHN0YXJ0OiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIC8vIElmIGl04oCZcyBhbHJlYWR5IHN0YXJ0ZWQsIGRvIG5vdGhpbmcuXG4gICAgICAgICAgICAgICAgaWYgKCBTVEFURSAmJiBTVEFURS5zdGFydCApIHJldHVybiBQXG5cblxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgcGlja2VyIHN0YXRlcy5cbiAgICAgICAgICAgICAgICBTVEFURS5tZXRob2RzID0ge31cbiAgICAgICAgICAgICAgICBTVEFURS5zdGFydCA9IHRydWVcbiAgICAgICAgICAgICAgICBTVEFURS5vcGVuID0gZmFsc2VcbiAgICAgICAgICAgICAgICBTVEFURS50eXBlID0gRUxFTUVOVC50eXBlXG5cblxuICAgICAgICAgICAgICAgIC8vIENvbmZpcm0gZm9jdXMgc3RhdGUsIGNvbnZlcnQgaW50byB0ZXh0IGlucHV0IHRvIHJlbW92ZSBVQSBzdHlsaW5ncyxcbiAgICAgICAgICAgICAgICAvLyBhbmQgc2V0IGFzIHJlYWRvbmx5IHRvIHByZXZlbnQga2V5Ym9hcmQgcG9wdXAuXG4gICAgICAgICAgICAgICAgRUxFTUVOVC5hdXRvZm9jdXMgPSBFTEVNRU5UID09IGdldEFjdGl2ZUVsZW1lbnQoKVxuICAgICAgICAgICAgICAgIEVMRU1FTlQucmVhZE9ubHkgPSAhU0VUVElOR1MuZWRpdGFibGVcbiAgICAgICAgICAgICAgICBFTEVNRU5ULmlkID0gRUxFTUVOVC5pZCB8fCBTVEFURS5pZFxuICAgICAgICAgICAgICAgIGlmICggRUxFTUVOVC50eXBlICE9ICd0ZXh0JyApIHtcbiAgICAgICAgICAgICAgICAgICAgRUxFTUVOVC50eXBlID0gJ3RleHQnXG4gICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgYSBuZXcgcGlja2VyIGNvbXBvbmVudCB3aXRoIHRoZSBzZXR0aW5ncy5cbiAgICAgICAgICAgICAgICBQLmNvbXBvbmVudCA9IG5ldyBDT01QT05FTlQoUCwgU0VUVElOR1MpXG5cblxuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgcGlja2VyIHJvb3Qgd2l0aCBhIGhvbGRlciBhbmQgdGhlbiBwcmVwYXJlIGl0LlxuICAgICAgICAgICAgICAgIFAuJHJvb3QgPSAkKCBQaWNrZXJDb25zdHJ1Y3Rvci5fLm5vZGUoJ2RpdicsIGNyZWF0ZVdyYXBwZWRDb21wb25lbnQoKSwgQ0xBU1NFUy5waWNrZXIsICdpZD1cIicgKyBFTEVNRU5ULmlkICsgJ19yb290XCIgdGFiaW5kZXg9XCIwXCInKSApXG4gICAgICAgICAgICAgICAgcHJlcGFyZUVsZW1lbnRSb290KClcblxuXG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlcmXigJlzIGEgZm9ybWF0IGZvciB0aGUgaGlkZGVuIGlucHV0IGVsZW1lbnQsIGNyZWF0ZSB0aGUgZWxlbWVudC5cbiAgICAgICAgICAgICAgICBpZiAoIFNFVFRJTkdTLmZvcm1hdFN1Ym1pdCApIHtcbiAgICAgICAgICAgICAgICAgICAgcHJlcGFyZUVsZW1lbnRIaWRkZW4oKVxuICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgLy8gUHJlcGFyZSB0aGUgaW5wdXQgZWxlbWVudC5cbiAgICAgICAgICAgICAgICBwcmVwYXJlRWxlbWVudCgpXG5cblxuICAgICAgICAgICAgICAgIC8vIEluc2VydCB0aGUgcm9vdCBhcyBzcGVjaWZpZWQgaW4gdGhlIHNldHRpbmdzLlxuICAgICAgICAgICAgICAgIGlmICggU0VUVElOR1MuY29udGFpbmVyICkgJCggU0VUVElOR1MuY29udGFpbmVyICkuYXBwZW5kKCBQLiRyb290IClcbiAgICAgICAgICAgICAgICBlbHNlICRFTEVNRU5ULmFmdGVyKCBQLiRyb290IClcblxuXG4gICAgICAgICAgICAgICAgLy8gQmluZCB0aGUgZGVmYXVsdCBjb21wb25lbnQgYW5kIHNldHRpbmdzIGV2ZW50cy5cbiAgICAgICAgICAgICAgICBQLm9uKHtcbiAgICAgICAgICAgICAgICAgICAgc3RhcnQ6IFAuY29tcG9uZW50Lm9uU3RhcnQsXG4gICAgICAgICAgICAgICAgICAgIHJlbmRlcjogUC5jb21wb25lbnQub25SZW5kZXIsXG4gICAgICAgICAgICAgICAgICAgIHN0b3A6IFAuY29tcG9uZW50Lm9uU3RvcCxcbiAgICAgICAgICAgICAgICAgICAgb3BlbjogUC5jb21wb25lbnQub25PcGVuLFxuICAgICAgICAgICAgICAgICAgICBjbG9zZTogUC5jb21wb25lbnQub25DbG9zZSxcbiAgICAgICAgICAgICAgICAgICAgc2V0OiBQLmNvbXBvbmVudC5vblNldFxuICAgICAgICAgICAgICAgIH0pLm9uKHtcbiAgICAgICAgICAgICAgICAgICAgc3RhcnQ6IFNFVFRJTkdTLm9uU3RhcnQsXG4gICAgICAgICAgICAgICAgICAgIHJlbmRlcjogU0VUVElOR1Mub25SZW5kZXIsXG4gICAgICAgICAgICAgICAgICAgIHN0b3A6IFNFVFRJTkdTLm9uU3RvcCxcbiAgICAgICAgICAgICAgICAgICAgb3BlbjogU0VUVElOR1Mub25PcGVuLFxuICAgICAgICAgICAgICAgICAgICBjbG9zZTogU0VUVElOR1Mub25DbG9zZSxcbiAgICAgICAgICAgICAgICAgICAgc2V0OiBTRVRUSU5HUy5vblNldFxuICAgICAgICAgICAgICAgIH0pXG5cblxuICAgICAgICAgICAgICAgIC8vIE9uY2Ugd2XigJlyZSBhbGwgc2V0LCBjaGVjayB0aGUgdGhlbWUgaW4gdXNlLlxuICAgICAgICAgICAgICAgIElTX0RFRkFVTFRfVEhFTUUgPSBpc1VzaW5nRGVmYXVsdFRoZW1lKCBQLiRyb290LmNoaWxkcmVuKClbIDAgXSApXG5cblxuICAgICAgICAgICAgICAgIC8vIElmIHRoZSBlbGVtZW50IGhhcyBhdXRvZm9jdXMsIG9wZW4gdGhlIHBpY2tlci5cbiAgICAgICAgICAgICAgICBpZiAoIEVMRU1FTlQuYXV0b2ZvY3VzICkge1xuICAgICAgICAgICAgICAgICAgICBQLm9wZW4oKVxuICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgLy8gVHJpZ2dlciBxdWV1ZWQgdGhlIOKAnHN0YXJ04oCdIGFuZCDigJxyZW5kZXLigJ0gZXZlbnRzLlxuICAgICAgICAgICAgICAgIHJldHVybiBQLnRyaWdnZXIoICdzdGFydCcgKS50cmlnZ2VyKCAncmVuZGVyJyApXG4gICAgICAgICAgICB9LCAvL3N0YXJ0XG5cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBSZW5kZXIgYSBuZXcgcGlja2VyXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHJlbmRlcjogZnVuY3Rpb24oIGVudGlyZUNvbXBvbmVudCApIHtcblxuICAgICAgICAgICAgICAgIC8vIEluc2VydCBhIG5ldyBjb21wb25lbnQgaG9sZGVyIGluIHRoZSByb290IG9yIGJveC5cbiAgICAgICAgICAgICAgICBpZiAoIGVudGlyZUNvbXBvbmVudCApIFAuJHJvb3QuaHRtbCggY3JlYXRlV3JhcHBlZENvbXBvbmVudCgpIClcbiAgICAgICAgICAgICAgICBlbHNlIFAuJHJvb3QuZmluZCggJy4nICsgQ0xBU1NFUy5ib3ggKS5odG1sKCBQLmNvbXBvbmVudC5ub2RlcyggU1RBVEUub3BlbiApIClcblxuICAgICAgICAgICAgICAgIC8vIFRyaWdnZXIgdGhlIHF1ZXVlZCDigJxyZW5kZXLigJ0gZXZlbnRzLlxuICAgICAgICAgICAgICAgIHJldHVybiBQLnRyaWdnZXIoICdyZW5kZXInIClcbiAgICAgICAgICAgIH0sIC8vcmVuZGVyXG5cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBEZXN0cm95IGV2ZXJ5dGhpbmdcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgc3RvcDogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAvLyBJZiBpdOKAmXMgYWxyZWFkeSBzdG9wcGVkLCBkbyBub3RoaW5nLlxuICAgICAgICAgICAgICAgIGlmICggIVNUQVRFLnN0YXJ0ICkgcmV0dXJuIFBcblxuICAgICAgICAgICAgICAgIC8vIFRoZW4gY2xvc2UgdGhlIHBpY2tlci5cbiAgICAgICAgICAgICAgICBQLmNsb3NlKClcblxuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgaGlkZGVuIGZpZWxkLlxuICAgICAgICAgICAgICAgIGlmICggUC5faGlkZGVuICkge1xuICAgICAgICAgICAgICAgICAgICBQLl9oaWRkZW4ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCggUC5faGlkZGVuIClcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgdGhlIHJvb3QuXG4gICAgICAgICAgICAgICAgUC4kcm9vdC5yZW1vdmUoKVxuXG4gICAgICAgICAgICAgICAgLy8gUmVtb3ZlIHRoZSBpbnB1dCBjbGFzcywgcmVtb3ZlIHRoZSBzdG9yZWQgZGF0YSwgYW5kIHVuYmluZFxuICAgICAgICAgICAgICAgIC8vIHRoZSBldmVudHMgKGFmdGVyIGEgdGljayBmb3IgSUUgLSBzZWUgYFAuY2xvc2VgKS5cbiAgICAgICAgICAgICAgICAkRUxFTUVOVC5yZW1vdmVDbGFzcyggQ0xBU1NFUy5pbnB1dCApLnJlbW92ZURhdGEoIE5BTUUgKVxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAkRUxFTUVOVC5vZmYoICcuJyArIFNUQVRFLmlkIClcbiAgICAgICAgICAgICAgICB9LCAwKVxuXG4gICAgICAgICAgICAgICAgLy8gUmVzdG9yZSB0aGUgZWxlbWVudCBzdGF0ZVxuICAgICAgICAgICAgICAgIEVMRU1FTlQudHlwZSA9IFNUQVRFLnR5cGVcbiAgICAgICAgICAgICAgICBFTEVNRU5ULnJlYWRPbmx5ID0gZmFsc2VcblxuICAgICAgICAgICAgICAgIC8vIFRyaWdnZXIgdGhlIHF1ZXVlZCDigJxzdG9w4oCdIGV2ZW50cy5cbiAgICAgICAgICAgICAgICBQLnRyaWdnZXIoICdzdG9wJyApXG5cbiAgICAgICAgICAgICAgICAvLyBSZXNldCB0aGUgcGlja2VyIHN0YXRlcy5cbiAgICAgICAgICAgICAgICBTVEFURS5tZXRob2RzID0ge31cbiAgICAgICAgICAgICAgICBTVEFURS5zdGFydCA9IGZhbHNlXG5cbiAgICAgICAgICAgICAgICByZXR1cm4gUFxuICAgICAgICAgICAgfSwgLy9zdG9wXG5cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBPcGVuIHVwIHRoZSBwaWNrZXJcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgb3BlbjogZnVuY3Rpb24oIGRvbnRHaXZlRm9jdXMgKSB7XG5cbiAgICAgICAgICAgICAgICAvLyBJZiBpdOKAmXMgYWxyZWFkeSBvcGVuLCBkbyBub3RoaW5nLlxuICAgICAgICAgICAgICAgIGlmICggU1RBVEUub3BlbiApIHJldHVybiBQXG5cbiAgICAgICAgICAgICAgICAvLyBBZGQgdGhlIOKAnGFjdGl2ZeKAnSBjbGFzcy5cbiAgICAgICAgICAgICAgICAkRUxFTUVOVC5hZGRDbGFzcyggQ0xBU1NFUy5hY3RpdmUgKVxuICAgICAgICAgICAgICAgIGFyaWEoIEVMRU1FTlQsICdleHBhbmRlZCcsIHRydWUgKVxuXG4gICAgICAgICAgICAgICAgLy8gKiBBIEZpcmVmb3ggYnVnLCB3aGVuIGBodG1sYCBoYXMgYG92ZXJmbG93OmhpZGRlbmAsIHJlc3VsdHMgaW5cbiAgICAgICAgICAgICAgICAvLyAgIGtpbGxpbmcgdHJhbnNpdGlvbnMgOiguIFNvIGFkZCB0aGUg4oCcb3BlbmVk4oCdIHN0YXRlIG9uIHRoZSBuZXh0IHRpY2suXG4gICAgICAgICAgICAgICAgLy8gICBCdWc6IGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTYyNTI4OVxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUg4oCcb3BlbmVk4oCdIGNsYXNzIHRvIHRoZSBwaWNrZXIgcm9vdC5cbiAgICAgICAgICAgICAgICAgICAgUC4kcm9vdC5hZGRDbGFzcyggQ0xBU1NFUy5vcGVuZWQgKVxuICAgICAgICAgICAgICAgICAgICBhcmlhKCBQLiRyb290WzBdLCAnaGlkZGVuJywgZmFsc2UgKVxuXG4gICAgICAgICAgICAgICAgfSwgMCApXG5cbiAgICAgICAgICAgICAgICAvLyBJZiB3ZSBoYXZlIHRvIGdpdmUgZm9jdXMsIGJpbmQgdGhlIGVsZW1lbnQgYW5kIGRvYyBldmVudHMuXG4gICAgICAgICAgICAgICAgaWYgKCBkb250R2l2ZUZvY3VzICE9PSBmYWxzZSApIHtcblxuICAgICAgICAgICAgICAgICAgICAvLyBTZXQgaXQgYXMgb3Blbi5cbiAgICAgICAgICAgICAgICAgICAgU1RBVEUub3BlbiA9IHRydWVcblxuICAgICAgICAgICAgICAgICAgICAvLyBQcmV2ZW50IHRoZSBwYWdlIGZyb20gc2Nyb2xsaW5nLlxuICAgICAgICAgICAgICAgICAgICBpZiAoIElTX0RFRkFVTFRfVEhFTUUgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkaHRtbC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjc3MoICdvdmVyZmxvdycsICdoaWRkZW4nICkuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3NzKCAncGFkZGluZy1yaWdodCcsICcrPScgKyBnZXRTY3JvbGxiYXJXaWR0aCgpIClcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIFBhc3MgZm9jdXMgdG8gdGhlIHJvb3QgZWxlbWVudOKAmXMgalF1ZXJ5IG9iamVjdC5cbiAgICAgICAgICAgICAgICAgICAgLy8gKiBXb3JrYXJvdW5kIGZvciBpT1M4IHRvIGJyaW5nIHRoZSBwaWNrZXLigJlzIHJvb3QgaW50byB2aWV3LlxuICAgICAgICAgICAgICAgICAgICBQLiRyb290LmVxKDApLmZvY3VzKClcblxuICAgICAgICAgICAgICAgICAgICAvLyBCaW5kIHRoZSBkb2N1bWVudCBldmVudHMuXG4gICAgICAgICAgICAgICAgICAgICRkb2N1bWVudC5vbiggJ2NsaWNrLicgKyBTVEFURS5pZCArICcgZm9jdXNpbi4nICsgU1RBVEUuaWQsIGZ1bmN0aW9uKCBldmVudCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldFxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgdGFyZ2V0IG9mIHRoZSBldmVudCBpcyBub3QgdGhlIGVsZW1lbnQsIGNsb3NlIHRoZSBwaWNrZXIgcGlja2VyLlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gKiBEb27igJl0IHdvcnJ5IGFib3V0IGNsaWNrcyBvciBmb2N1c2lucyBvbiB0aGUgcm9vdCBiZWNhdXNlIHRob3NlIGRvbuKAmXQgYnViYmxlIHVwLlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBBbHNvLCBmb3IgRmlyZWZveCwgYSBjbGljayBvbiBhbiBgb3B0aW9uYCBlbGVtZW50IGJ1YmJsZXMgdXAgZGlyZWN0bHlcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgdG8gdGhlIGRvYy4gU28gbWFrZSBzdXJlIHRoZSB0YXJnZXQgd2Fzbid0IHRoZSBkb2MuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAqIEluIEZpcmVmb3ggc3RvcFByb3BhZ2F0aW9uKCkgZG9lc27igJl0IHByZXZlbnQgcmlnaHQtY2xpY2sgZXZlbnRzIGZyb20gYnViYmxpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgIHdoaWNoIGNhdXNlcyB0aGUgcGlja2VyIHRvIHVuZXhwZWN0ZWRseSBjbG9zZSB3aGVuIHJpZ2h0LWNsaWNraW5nIGl0LiBTbyBtYWtlXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgIHN1cmUgdGhlIGV2ZW50IHdhc27igJl0IGEgcmlnaHQtY2xpY2suXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHRhcmdldCAhPSBFTEVNRU5UICYmIHRhcmdldCAhPSBkb2N1bWVudCAmJiBldmVudC53aGljaCAhPSAzICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIHRhcmdldCB3YXMgdGhlIGhvbGRlciB0aGF0IGNvdmVycyB0aGUgc2NyZWVuLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGtlZXAgdGhlIGVsZW1lbnQgZm9jdXNlZCB0byBtYWludGFpbiB0YWJpbmRleC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQLmNsb3NlKCB0YXJnZXQgPT09IFAuJHJvb3QuY2hpbGRyZW4oKVswXSApXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfSkub24oICdrZXlkb3duLicgKyBTVEFURS5pZCwgZnVuY3Rpb24oIGV2ZW50ICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBHZXQgdGhlIGtleWNvZGUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5Y29kZSA9IGV2ZW50LmtleUNvZGUsXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUcmFuc2xhdGUgdGhhdCB0byBhIHNlbGVjdGlvbiBjaGFuZ2UuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5Y29kZVRvTW92ZSA9IFAuY29tcG9uZW50LmtleVsga2V5Y29kZSBdLFxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gR3JhYiB0aGUgdGFyZ2V0LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldCA9IGV2ZW50LnRhcmdldFxuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9uIGVzY2FwZSwgY2xvc2UgdGhlIHBpY2tlciBhbmQgZ2l2ZSBmb2N1cy5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgga2V5Y29kZSA9PSAyNyApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQLmNsb3NlKCB0cnVlIClcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGVyZSBpcyBhIGtleSBtb3ZlbWVudCBvciDigJxlbnRlcuKAnSBrZXlwcmVzcyBvbiB0aGUgZWxlbWVudC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCB0YXJnZXQgPT0gUC4kcm9vdFswXSAmJiAoIGtleWNvZGVUb01vdmUgfHwga2V5Y29kZSA9PSAxMyApICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUHJldmVudCB0aGUgZGVmYXVsdCBhY3Rpb24gdG8gc3RvcCBwYWdlIG1vdmVtZW50LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRyaWdnZXIgdGhlIGtleSBtb3ZlbWVudCBhY3Rpb24uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBrZXljb2RlVG9Nb3ZlICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQaWNrZXJDb25zdHJ1Y3Rvci5fLnRyaWdnZXIoIFAuY29tcG9uZW50LmtleS5nbywgUCwgWyBQaWNrZXJDb25zdHJ1Y3Rvci5fLnRyaWdnZXIoIGtleWNvZGVUb01vdmUgKSBdIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBPbiDigJxlbnRlcuKAnSwgaWYgdGhlIGhpZ2hsaWdodGVkIGl0ZW0gaXNu4oCZdCBkaXNhYmxlZCwgc2V0IHRoZSB2YWx1ZSBhbmQgY2xvc2UuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoICFQLiRyb290LmZpbmQoICcuJyArIENMQVNTRVMuaGlnaGxpZ2h0ZWQgKS5oYXNDbGFzcyggQ0xBU1NFUy5kaXNhYmxlZCApICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQLnNldCggJ3NlbGVjdCcsIFAuY29tcG9uZW50Lml0ZW0uaGlnaGxpZ2h0ICkuY2xvc2UoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgdGFyZ2V0IGlzIHdpdGhpbiB0aGUgcm9vdCBhbmQg4oCcZW50ZXLigJ0gaXMgcHJlc3NlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHByZXZlbnQgdGhlIGRlZmF1bHQgYWN0aW9uIGFuZCB0cmlnZ2VyIGEgY2xpY2sgb24gdGhlIHRhcmdldCBpbnN0ZWFkLlxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoICQuY29udGFpbnMoIFAuJHJvb3RbMF0sIHRhcmdldCApICYmIGtleWNvZGUgPT0gMTMgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5jbGljaygpXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gVHJpZ2dlciB0aGUgcXVldWVkIOKAnG9wZW7igJ0gZXZlbnRzLlxuICAgICAgICAgICAgICAgIHJldHVybiBQLnRyaWdnZXIoICdvcGVuJyApXG4gICAgICAgICAgICB9LCAvL29wZW5cblxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENsb3NlIHRoZSBwaWNrZXJcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgY2xvc2U6IGZ1bmN0aW9uKCBnaXZlRm9jdXMgKSB7XG5cbiAgICAgICAgICAgICAgICAvLyBJZiB3ZSBuZWVkIHRvIGdpdmUgZm9jdXMsIGRvIGl0IGJlZm9yZSBjaGFuZ2luZyBzdGF0ZXMuXG4gICAgICAgICAgICAgICAgaWYgKCBnaXZlRm9jdXMgKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIC4uLi5haCB5ZXMhIEl0IHdvdWxk4oCZdmUgYmVlbiBpbmNvbXBsZXRlIHdpdGhvdXQgYSBjcmF6eSB3b3JrYXJvdW5kIGZvciBJRSA6fFxuICAgICAgICAgICAgICAgICAgICAvLyBUaGUgZm9jdXMgaXMgdHJpZ2dlcmVkICphZnRlciogdGhlIGNsb3NlIGhhcyBjb21wbGV0ZWQgLSBjYXVzaW5nIGl0XG4gICAgICAgICAgICAgICAgICAgIC8vIHRvIG9wZW4gYWdhaW4uIFNvIHVuYmluZCBhbmQgcmViaW5kIHRoZSBldmVudCBhdCB0aGUgbmV4dCB0aWNrLlxuICAgICAgICAgICAgICAgICAgICBQLiRyb290Lm9mZiggJ2ZvY3VzLnRvT3BlbicgKS5lcSgwKS5mb2N1cygpXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgUC4kcm9vdC5vbiggJ2ZvY3VzLnRvT3BlbicsIGhhbmRsZUZvY3VzVG9PcGVuRXZlbnQgKVxuICAgICAgICAgICAgICAgICAgICB9LCAwIClcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgdGhlIOKAnGFjdGl2ZeKAnSBjbGFzcy5cbiAgICAgICAgICAgICAgICAkRUxFTUVOVC5yZW1vdmVDbGFzcyggQ0xBU1NFUy5hY3RpdmUgKVxuICAgICAgICAgICAgICAgIGFyaWEoIEVMRU1FTlQsICdleHBhbmRlZCcsIGZhbHNlIClcblxuICAgICAgICAgICAgICAgIC8vICogQSBGaXJlZm94IGJ1Zywgd2hlbiBgaHRtbGAgaGFzIGBvdmVyZmxvdzpoaWRkZW5gLCByZXN1bHRzIGluXG4gICAgICAgICAgICAgICAgLy8gICBraWxsaW5nIHRyYW5zaXRpb25zIDooLiBTbyByZW1vdmUgdGhlIOKAnG9wZW5lZOKAnSBzdGF0ZSBvbiB0aGUgbmV4dCB0aWNrLlxuICAgICAgICAgICAgICAgIC8vICAgQnVnOiBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD02MjUyODlcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdmUgdGhlIOKAnG9wZW5lZOKAnSBhbmQg4oCcZm9jdXNlZOKAnSBjbGFzcyBmcm9tIHRoZSBwaWNrZXIgcm9vdC5cbiAgICAgICAgICAgICAgICAgICAgUC4kcm9vdC5yZW1vdmVDbGFzcyggQ0xBU1NFUy5vcGVuZWQgKyAnICcgKyBDTEFTU0VTLmZvY3VzZWQgKVxuICAgICAgICAgICAgICAgICAgICBhcmlhKCBQLiRyb290WzBdLCAnaGlkZGVuJywgdHJ1ZSApXG5cbiAgICAgICAgICAgICAgICB9LCAwIClcblxuICAgICAgICAgICAgICAgIC8vIElmIGl04oCZcyBhbHJlYWR5IGNsb3NlZCwgZG8gbm90aGluZyBtb3JlLlxuICAgICAgICAgICAgICAgIGlmICggIVNUQVRFLm9wZW4gKSByZXR1cm4gUFxuXG4gICAgICAgICAgICAgICAgLy8gU2V0IGl0IGFzIGNsb3NlZC5cbiAgICAgICAgICAgICAgICBTVEFURS5vcGVuID0gZmFsc2VcblxuICAgICAgICAgICAgICAgIC8vIEFsbG93IHRoZSBwYWdlIHRvIHNjcm9sbC5cbiAgICAgICAgICAgICAgICBpZiAoIElTX0RFRkFVTFRfVEhFTUUgKSB7XG4gICAgICAgICAgICAgICAgICAgICRodG1sLlxuICAgICAgICAgICAgICAgICAgICAgICAgY3NzKCAnb3ZlcmZsb3cnLCAnJyApLlxuICAgICAgICAgICAgICAgICAgICAgICAgY3NzKCAncGFkZGluZy1yaWdodCcsICctPScgKyBnZXRTY3JvbGxiYXJXaWR0aCgpIClcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBVbmJpbmQgdGhlIGRvY3VtZW50IGV2ZW50cy5cbiAgICAgICAgICAgICAgICAkZG9jdW1lbnQub2ZmKCAnLicgKyBTVEFURS5pZCApXG5cbiAgICAgICAgICAgICAgICAvLyBUcmlnZ2VyIHRoZSBxdWV1ZWQg4oCcY2xvc2XigJ0gZXZlbnRzLlxuICAgICAgICAgICAgICAgIHJldHVybiBQLnRyaWdnZXIoICdjbG9zZScgKVxuICAgICAgICAgICAgfSwgLy9jbG9zZVxuXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ2xlYXIgdGhlIHZhbHVlc1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBjbGVhcjogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFAuc2V0KCAnY2xlYXInLCBudWxsLCBvcHRpb25zIClcbiAgICAgICAgICAgIH0sIC8vY2xlYXJcblxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFNldCBzb21ldGhpbmdcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiggdGhpbmcsIHZhbHVlLCBvcHRpb25zICkge1xuXG4gICAgICAgICAgICAgICAgdmFyIHRoaW5nSXRlbSwgdGhpbmdWYWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgdGhpbmdJc09iamVjdCA9ICQuaXNQbGFpbk9iamVjdCggdGhpbmcgKSxcbiAgICAgICAgICAgICAgICAgICAgdGhpbmdPYmplY3QgPSB0aGluZ0lzT2JqZWN0ID8gdGhpbmcgOiB7fVxuXG4gICAgICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHdlIGhhdmUgdXNhYmxlIG9wdGlvbnMuXG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IHRoaW5nSXNPYmplY3QgJiYgJC5pc1BsYWluT2JqZWN0KCB2YWx1ZSApID8gdmFsdWUgOiBvcHRpb25zIHx8IHt9XG5cbiAgICAgICAgICAgICAgICBpZiAoIHRoaW5nICkge1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSB0aGluZyBpc27igJl0IGFuIG9iamVjdCwgbWFrZSBpdCBvbmUuXG4gICAgICAgICAgICAgICAgICAgIGlmICggIXRoaW5nSXNPYmplY3QgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGluZ09iamVjdFsgdGhpbmcgXSA9IHZhbHVlXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyBHbyB0aHJvdWdoIHRoZSB0aGluZ3Mgb2YgaXRlbXMgdG8gc2V0LlxuICAgICAgICAgICAgICAgICAgICBmb3IgKCB0aGluZ0l0ZW0gaW4gdGhpbmdPYmplY3QgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdyYWIgdGhlIHZhbHVlIG9mIHRoZSB0aGluZy5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaW5nVmFsdWUgPSB0aGluZ09iamVjdFsgdGhpbmdJdGVtIF1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmlyc3QsIGlmIHRoZSBpdGVtIGV4aXN0cyBhbmQgdGhlcmXigJlzIGEgdmFsdWUsIHNldCBpdC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggdGhpbmdJdGVtIGluIFAuY29tcG9uZW50Lml0ZW0gKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCB0aGluZ1ZhbHVlID09PSB1bmRlZmluZWQgKSB0aGluZ1ZhbHVlID0gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFAuY29tcG9uZW50LnNldCggdGhpbmdJdGVtLCB0aGluZ1ZhbHVlLCBvcHRpb25zIClcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlbiwgY2hlY2sgdG8gdXBkYXRlIHRoZSBlbGVtZW50IHZhbHVlIGFuZCBicm9hZGNhc3QgYSBjaGFuZ2UuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHRoaW5nSXRlbSA9PSAnc2VsZWN0JyB8fCB0aGluZ0l0ZW0gPT0gJ2NsZWFyJyApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkRUxFTUVOVC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsKCB0aGluZ0l0ZW0gPT0gJ2NsZWFyJyA/ICcnIDogUC5nZXQoIHRoaW5nSXRlbSwgU0VUVElOR1MuZm9ybWF0ICkgKS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJpZ2dlciggJ2NoYW5nZScgKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gUmVuZGVyIGEgbmV3IHBpY2tlci5cbiAgICAgICAgICAgICAgICAgICAgUC5yZW5kZXIoKVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFdoZW4gdGhlIG1ldGhvZCBpc27igJl0IG11dGVkLCB0cmlnZ2VyIHF1ZXVlZCDigJxzZXTigJ0gZXZlbnRzIGFuZCBwYXNzIHRoZSBgdGhpbmdPYmplY3RgLlxuICAgICAgICAgICAgICAgIHJldHVybiBvcHRpb25zLm11dGVkID8gUCA6IFAudHJpZ2dlciggJ3NldCcsIHRoaW5nT2JqZWN0IClcbiAgICAgICAgICAgIH0sIC8vc2V0XG5cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBHZXQgc29tZXRoaW5nXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24oIHRoaW5nLCBmb3JtYXQgKSB7XG5cbiAgICAgICAgICAgICAgICAvLyBNYWtlIHN1cmUgdGhlcmXigJlzIHNvbWV0aGluZyB0byBnZXQuXG4gICAgICAgICAgICAgICAgdGhpbmcgPSB0aGluZyB8fCAndmFsdWUnXG5cbiAgICAgICAgICAgICAgICAvLyBJZiBhIHBpY2tlciBzdGF0ZSBleGlzdHMsIHJldHVybiB0aGF0LlxuICAgICAgICAgICAgICAgIGlmICggU1RBVEVbIHRoaW5nIF0gIT0gbnVsbCApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFNUQVRFWyB0aGluZyBdXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gUmV0dXJuIHRoZSBzdWJtaXNzaW9uIHZhbHVlLCBpZiB0aGF0LlxuICAgICAgICAgICAgICAgIGlmICggdGhpbmcgPT0gJ3ZhbHVlU3VibWl0JyApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBQLl9oaWRkZW4gKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUC5faGlkZGVuLnZhbHVlXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpbmcgPSAndmFsdWUnXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gUmV0dXJuIHRoZSB2YWx1ZSwgaWYgdGhhdC5cbiAgICAgICAgICAgICAgICBpZiAoIHRoaW5nID09ICd2YWx1ZScgKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBFTEVNRU5ULnZhbHVlXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgYSBjb21wb25lbnQgaXRlbSBleGlzdHMsIHJldHVybiB0aGF0LlxuICAgICAgICAgICAgICAgIGlmICggdGhpbmcgaW4gUC5jb21wb25lbnQuaXRlbSApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCB0eXBlb2YgZm9ybWF0ID09ICdzdHJpbmcnICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRoaW5nVmFsdWUgPSBQLmNvbXBvbmVudC5nZXQoIHRoaW5nIClcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGluZ1ZhbHVlID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQaWNrZXJDb25zdHJ1Y3Rvci5fLnRyaWdnZXIoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFAuY29tcG9uZW50LmZvcm1hdHMudG9TdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFAuY29tcG9uZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbIGZvcm1hdCwgdGhpbmdWYWx1ZSBdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6ICcnXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFAuY29tcG9uZW50LmdldCggdGhpbmcgKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIC8vZ2V0XG5cblxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEJpbmQgZXZlbnRzIG9uIHRoZSB0aGluZ3MuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIG9uOiBmdW5jdGlvbiggdGhpbmcsIG1ldGhvZCwgaW50ZXJuYWwgKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgdGhpbmdOYW1lLCB0aGluZ01ldGhvZCxcbiAgICAgICAgICAgICAgICAgICAgdGhpbmdJc09iamVjdCA9ICQuaXNQbGFpbk9iamVjdCggdGhpbmcgKSxcbiAgICAgICAgICAgICAgICAgICAgdGhpbmdPYmplY3QgPSB0aGluZ0lzT2JqZWN0ID8gdGhpbmcgOiB7fVxuXG4gICAgICAgICAgICAgICAgaWYgKCB0aGluZyApIHtcblxuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgdGhpbmcgaXNu4oCZdCBhbiBvYmplY3QsIG1ha2UgaXQgb25lLlxuICAgICAgICAgICAgICAgICAgICBpZiAoICF0aGluZ0lzT2JqZWN0ICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpbmdPYmplY3RbIHRoaW5nIF0gPSBtZXRob2RcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIEdvIHRocm91Z2ggdGhlIHRoaW5ncyB0byBiaW5kIHRvLlxuICAgICAgICAgICAgICAgICAgICBmb3IgKCB0aGluZ05hbWUgaW4gdGhpbmdPYmplY3QgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdyYWIgdGhlIG1ldGhvZCBvZiB0aGUgdGhpbmcuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGluZ01ldGhvZCA9IHRoaW5nT2JqZWN0WyB0aGluZ05hbWUgXVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBpdCB3YXMgYW4gaW50ZXJuYWwgYmluZGluZywgcHJlZml4IGl0LlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBpbnRlcm5hbCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGluZ05hbWUgPSAnXycgKyB0aGluZ05hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRoZSB0aGluZyBtZXRob2RzIGNvbGxlY3Rpb24gZXhpc3RzLlxuICAgICAgICAgICAgICAgICAgICAgICAgU1RBVEUubWV0aG9kc1sgdGhpbmdOYW1lIF0gPSBTVEFURS5tZXRob2RzWyB0aGluZ05hbWUgXSB8fCBbXVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdGhlIG1ldGhvZCB0byB0aGUgcmVsYXRpdmUgbWV0aG9kIGNvbGxlY3Rpb24uXG4gICAgICAgICAgICAgICAgICAgICAgICBTVEFURS5tZXRob2RzWyB0aGluZ05hbWUgXS5wdXNoKCB0aGluZ01ldGhvZCApXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gUFxuICAgICAgICAgICAgfSwgLy9vblxuXG5cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBVbmJpbmQgZXZlbnRzIG9uIHRoZSB0aGluZ3MuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIG9mZjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIGksIHRoaW5nTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgbmFtZXMgPSBhcmd1bWVudHM7XG4gICAgICAgICAgICAgICAgZm9yICggaSA9IDAsIG5hbWVzQ291bnQgPSBuYW1lcy5sZW5ndGg7IGkgPCBuYW1lc0NvdW50OyBpICs9IDEgKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaW5nTmFtZSA9IG5hbWVzW2ldXG4gICAgICAgICAgICAgICAgICAgIGlmICggdGhpbmdOYW1lIGluIFNUQVRFLm1ldGhvZHMgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgU1RBVEUubWV0aG9kc1t0aGluZ05hbWVdXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIFBcbiAgICAgICAgICAgIH0sXG5cblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBGaXJlIG9mZiBtZXRob2QgZXZlbnRzLlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICB0cmlnZ2VyOiBmdW5jdGlvbiggbmFtZSwgZGF0YSApIHtcbiAgICAgICAgICAgICAgICB2YXIgX3RyaWdnZXIgPSBmdW5jdGlvbiggbmFtZSApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1ldGhvZExpc3QgPSBTVEFURS5tZXRob2RzWyBuYW1lIF1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCBtZXRob2RMaXN0ICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kTGlzdC5tYXAoIGZ1bmN0aW9uKCBtZXRob2QgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUGlja2VyQ29uc3RydWN0b3IuXy50cmlnZ2VyKCBtZXRob2QsIFAsIFsgZGF0YSBdIClcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgX3RyaWdnZXIoICdfJyArIG5hbWUgKVxuICAgICAgICAgICAgICAgIF90cmlnZ2VyKCBuYW1lIClcbiAgICAgICAgICAgICAgICByZXR1cm4gUFxuICAgICAgICAgICAgfSAvL3RyaWdnZXJcbiAgICAgICAgfSAvL1BpY2tlckluc3RhbmNlLnByb3RvdHlwZVxuXG5cbiAgICAvKipcbiAgICAgKiBXcmFwIHRoZSBwaWNrZXIgaG9sZGVyIGNvbXBvbmVudHMgdG9nZXRoZXIuXG4gICAgICovXG4gICAgZnVuY3Rpb24gY3JlYXRlV3JhcHBlZENvbXBvbmVudCgpIHtcblxuICAgICAgICAvLyBDcmVhdGUgYSBwaWNrZXIgd3JhcHBlciBob2xkZXJcbiAgICAgICAgcmV0dXJuIFBpY2tlckNvbnN0cnVjdG9yLl8ubm9kZSggJ2RpdicsXG5cbiAgICAgICAgICAgIC8vIENyZWF0ZSBhIHBpY2tlciB3cmFwcGVyIG5vZGVcbiAgICAgICAgICAgIFBpY2tlckNvbnN0cnVjdG9yLl8ubm9kZSggJ2RpdicsXG5cbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgYSBwaWNrZXIgZnJhbWVcbiAgICAgICAgICAgICAgICBQaWNrZXJDb25zdHJ1Y3Rvci5fLm5vZGUoICdkaXYnLFxuXG4gICAgICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBhIHBpY2tlciBib3ggbm9kZVxuICAgICAgICAgICAgICAgICAgICBQaWNrZXJDb25zdHJ1Y3Rvci5fLm5vZGUoICdkaXYnLFxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDcmVhdGUgdGhlIGNvbXBvbmVudHMgbm9kZXMuXG4gICAgICAgICAgICAgICAgICAgICAgICBQLmNvbXBvbmVudC5ub2RlcyggU1RBVEUub3BlbiApLFxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgcGlja2VyIGJveCBjbGFzc1xuICAgICAgICAgICAgICAgICAgICAgICAgQ0xBU1NFUy5ib3hcbiAgICAgICAgICAgICAgICAgICAgKSxcblxuICAgICAgICAgICAgICAgICAgICAvLyBQaWNrZXIgd3JhcCBjbGFzc1xuICAgICAgICAgICAgICAgICAgICBDTEFTU0VTLndyYXBcbiAgICAgICAgICAgICAgICApLFxuXG4gICAgICAgICAgICAgICAgLy8gUGlja2VyIGZyYW1lIGNsYXNzXG4gICAgICAgICAgICAgICAgQ0xBU1NFUy5mcmFtZVxuICAgICAgICAgICAgKSxcblxuICAgICAgICAgICAgLy8gUGlja2VyIGhvbGRlciBjbGFzc1xuICAgICAgICAgICAgQ0xBU1NFUy5ob2xkZXJcbiAgICAgICAgKSAvL2VuZHJldHVyblxuICAgIH0gLy9jcmVhdGVXcmFwcGVkQ29tcG9uZW50XG5cblxuXG4gICAgLyoqXG4gICAgICogUHJlcGFyZSB0aGUgaW5wdXQgZWxlbWVudCB3aXRoIGFsbCBiaW5kaW5ncy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBwcmVwYXJlRWxlbWVudCgpIHtcblxuICAgICAgICAkRUxFTUVOVC5cblxuICAgICAgICAgICAgLy8gU3RvcmUgdGhlIHBpY2tlciBkYXRhIGJ5IGNvbXBvbmVudCBuYW1lLlxuICAgICAgICAgICAgZGF0YShOQU1FLCBQKS5cblxuICAgICAgICAgICAgLy8gQWRkIHRoZSDigJxpbnB1dOKAnSBjbGFzcyBuYW1lLlxuICAgICAgICAgICAgYWRkQ2xhc3MoQ0xBU1NFUy5pbnB1dCkuXG5cbiAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgdGFiaW5kZXguXG4gICAgICAgICAgICBhdHRyKCd0YWJpbmRleCcsIC0xKS5cblxuICAgICAgICAgICAgLy8gSWYgdGhlcmXigJlzIGEgYGRhdGEtdmFsdWVgLCB1cGRhdGUgdGhlIHZhbHVlIG9mIHRoZSBlbGVtZW50LlxuICAgICAgICAgICAgdmFsKCAkRUxFTUVOVC5kYXRhKCd2YWx1ZScpID9cbiAgICAgICAgICAgICAgICBQLmdldCgnc2VsZWN0JywgU0VUVElOR1MuZm9ybWF0KSA6XG4gICAgICAgICAgICAgICAgRUxFTUVOVC52YWx1ZVxuICAgICAgICAgICAgKVxuXG5cbiAgICAgICAgLy8gT25seSBiaW5kIGtleWRvd24gZXZlbnRzIGlmIHRoZSBlbGVtZW50IGlzbuKAmXQgZWRpdGFibGUuXG4gICAgICAgIGlmICggIVNFVFRJTkdTLmVkaXRhYmxlICkge1xuXG4gICAgICAgICAgICAkRUxFTUVOVC5cblxuICAgICAgICAgICAgICAgIC8vIE9uIGZvY3VzL2NsaWNrLCBmb2N1cyBvbnRvIHRoZSByb290IHRvIG9wZW4gaXQgdXAuXG4gICAgICAgICAgICAgICAgb24oICdmb2N1cy4nICsgU1RBVEUuaWQgKyAnIGNsaWNrLicgKyBTVEFURS5pZCwgZnVuY3Rpb24oIGV2ZW50ICkge1xuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgICAgICAgICAgICAgIFAuJHJvb3QuZXEoMCkuZm9jdXMoKVxuICAgICAgICAgICAgICAgIH0pLlxuXG4gICAgICAgICAgICAgICAgLy8gSGFuZGxlIGtleWJvYXJkIGV2ZW50IGJhc2VkIG9uIHRoZSBwaWNrZXIgYmVpbmcgb3BlbmVkIG9yIG5vdC5cbiAgICAgICAgICAgICAgICBvbiggJ2tleWRvd24uJyArIFNUQVRFLmlkLCBoYW5kbGVLZXlkb3duRXZlbnQgKVxuICAgICAgICB9XG5cblxuICAgICAgICAvLyBVcGRhdGUgdGhlIGFyaWEgYXR0cmlidXRlcy5cbiAgICAgICAgYXJpYShFTEVNRU5ULCB7XG4gICAgICAgICAgICBoYXNwb3B1cDogdHJ1ZSxcbiAgICAgICAgICAgIGV4cGFuZGVkOiBmYWxzZSxcbiAgICAgICAgICAgIHJlYWRvbmx5OiBmYWxzZSxcbiAgICAgICAgICAgIG93bnM6IEVMRU1FTlQuaWQgKyAnX3Jvb3QnXG4gICAgICAgIH0pXG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBQcmVwYXJlIHRoZSByb290IHBpY2tlciBlbGVtZW50IHdpdGggYWxsIGJpbmRpbmdzLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHByZXBhcmVFbGVtZW50Um9vdCgpIHtcblxuICAgICAgICBQLiRyb290LlxuXG4gICAgICAgICAgICBvbih7XG5cbiAgICAgICAgICAgICAgICAvLyBGb3IgaU9TOC5cbiAgICAgICAgICAgICAgICBrZXlkb3duOiBoYW5kbGVLZXlkb3duRXZlbnQsXG5cbiAgICAgICAgICAgICAgICAvLyBXaGVuIHNvbWV0aGluZyB3aXRoaW4gdGhlIHJvb3QgaXMgZm9jdXNlZCwgc3RvcCBmcm9tIGJ1YmJsaW5nXG4gICAgICAgICAgICAgICAgLy8gdG8gdGhlIGRvYyBhbmQgcmVtb3ZlIHRoZSDigJxmb2N1c2Vk4oCdIHN0YXRlIGZyb20gdGhlIHJvb3QuXG4gICAgICAgICAgICAgICAgZm9jdXNpbjogZnVuY3Rpb24oIGV2ZW50ICkge1xuICAgICAgICAgICAgICAgICAgICBQLiRyb290LnJlbW92ZUNsYXNzKCBDTEFTU0VTLmZvY3VzZWQgKVxuICAgICAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICAvLyBXaGVuIHNvbWV0aGluZyB3aXRoaW4gdGhlIHJvb3QgaG9sZGVyIGlzIGNsaWNrZWQsIHN0b3AgaXRcbiAgICAgICAgICAgICAgICAvLyBmcm9tIGJ1YmJsaW5nIHRvIHRoZSBkb2MuXG4gICAgICAgICAgICAgICAgJ21vdXNlZG93biBjbGljayc6IGZ1bmN0aW9uKCBldmVudCApIHtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRoZSB0YXJnZXQgaXNu4oCZdCB0aGUgcm9vdCBob2xkZXIgc28gaXQgY2FuIGJ1YmJsZSB1cC5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCB0YXJnZXQgIT0gUC4kcm9vdC5jaGlsZHJlbigpWyAwIF0gKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICogRm9yIG1vdXNlZG93biBldmVudHMsIGNhbmNlbCB0aGUgZGVmYXVsdCBhY3Rpb24gaW4gb3JkZXIgdG9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgcHJldmVudCBjYXNlcyB3aGVyZSBmb2N1cyBpcyBzaGlmdGVkIG9udG8gZXh0ZXJuYWwgZWxlbWVudHNcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgd2hlbiB1c2luZyB0aGluZ3MgbGlrZSBqUXVlcnkgbW9iaWxlIG9yIE1hZ25pZmljUG9wdXAgKHJlZjogIzI0OSAmICMxMjApLlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBBbHNvLCBmb3IgRmlyZWZveCwgZG9u4oCZdCBwcmV2ZW50IGFjdGlvbiBvbiB0aGUgYG9wdGlvbmAgZWxlbWVudC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggZXZlbnQudHlwZSA9PSAnbW91c2Vkb3duJyAmJiAhJCggdGFyZ2V0ICkuaXMoICdpbnB1dCwgc2VsZWN0LCB0ZXh0YXJlYSwgYnV0dG9uLCBvcHRpb24nICkpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlLWZvY3VzIG9udG8gdGhlIHJvb3Qgc28gdGhhdCB1c2VycyBjYW4gY2xpY2sgYXdheVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZyb20gZWxlbWVudHMgZm9jdXNlZCB3aXRoaW4gdGhlIHBpY2tlci5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQLiRyb290LmVxKDApLmZvY3VzKClcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pLlxuXG4gICAgICAgICAgICAvLyBBZGQvcmVtb3ZlIHRoZSDigJx0YXJnZXTigJ0gY2xhc3Mgb24gZm9jdXMgYW5kIGJsdXIuXG4gICAgICAgICAgICBvbih7XG4gICAgICAgICAgICAgICAgZm9jdXM6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAkRUxFTUVOVC5hZGRDbGFzcyggQ0xBU1NFUy50YXJnZXQgKVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYmx1cjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICRFTEVNRU5ULnJlbW92ZUNsYXNzKCBDTEFTU0VTLnRhcmdldCApXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkuXG5cbiAgICAgICAgICAgIC8vIE9wZW4gdGhlIHBpY2tlciBhbmQgYWRqdXN0IHRoZSByb290IOKAnGZvY3VzZWTigJ0gc3RhdGVcbiAgICAgICAgICAgIG9uKCAnZm9jdXMudG9PcGVuJywgaGFuZGxlRm9jdXNUb09wZW5FdmVudCApLlxuXG4gICAgICAgICAgICAvLyBJZiB0aGVyZeKAmXMgYSBjbGljayBvbiBhbiBhY3Rpb25hYmxlIGVsZW1lbnQsIGNhcnJ5IG91dCB0aGUgYWN0aW9ucy5cbiAgICAgICAgICAgIG9uKCAnY2xpY2snLCAnW2RhdGEtcGlja10sIFtkYXRhLW5hdl0sIFtkYXRhLWNsZWFyXSwgW2RhdGEtY2xvc2VdJywgZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgJHRhcmdldCA9ICQoIHRoaXMgKSxcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RGF0YSA9ICR0YXJnZXQuZGF0YSgpLFxuICAgICAgICAgICAgICAgICAgICB0YXJnZXREaXNhYmxlZCA9ICR0YXJnZXQuaGFzQ2xhc3MoIENMQVNTRVMubmF2RGlzYWJsZWQgKSB8fCAkdGFyZ2V0Lmhhc0NsYXNzKCBDTEFTU0VTLmRpc2FibGVkICksXG5cbiAgICAgICAgICAgICAgICAgICAgLy8gKiBGb3IgSUUsIG5vbi1mb2N1c2FibGUgZWxlbWVudHMgY2FuIGJlIGFjdGl2ZSBlbGVtZW50cyBhcyB3ZWxsXG4gICAgICAgICAgICAgICAgICAgIC8vICAgKGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzI2ODQ1NjEpLlxuICAgICAgICAgICAgICAgICAgICBhY3RpdmVFbGVtZW50ID0gZ2V0QWN0aXZlRWxlbWVudCgpXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZUVsZW1lbnQgPSBhY3RpdmVFbGVtZW50ICYmICggYWN0aXZlRWxlbWVudC50eXBlIHx8IGFjdGl2ZUVsZW1lbnQuaHJlZiApXG5cbiAgICAgICAgICAgICAgICAvLyBJZiBpdOKAmXMgZGlzYWJsZWQgb3Igbm90aGluZyBpbnNpZGUgaXMgYWN0aXZlbHkgZm9jdXNlZCwgcmUtZm9jdXMgdGhlIGVsZW1lbnQuXG4gICAgICAgICAgICAgICAgaWYgKCB0YXJnZXREaXNhYmxlZCB8fCBhY3RpdmVFbGVtZW50ICYmICEkLmNvbnRhaW5zKCBQLiRyb290WzBdLCBhY3RpdmVFbGVtZW50ICkgKSB7XG4gICAgICAgICAgICAgICAgICAgIFAuJHJvb3QuZXEoMCkuZm9jdXMoKVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIElmIHNvbWV0aGluZyBpcyBzdXBlcmZpY2lhbGx5IGNoYW5nZWQsIHVwZGF0ZSB0aGUgYGhpZ2hsaWdodGAgYmFzZWQgb24gdGhlIGBuYXZgLlxuICAgICAgICAgICAgICAgIGlmICggIXRhcmdldERpc2FibGVkICYmIHRhcmdldERhdGEubmF2ICkge1xuICAgICAgICAgICAgICAgICAgICBQLnNldCggJ2hpZ2hsaWdodCcsIFAuY29tcG9uZW50Lml0ZW0uaGlnaGxpZ2h0LCB7IG5hdjogdGFyZ2V0RGF0YS5uYXYgfSApXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gSWYgc29tZXRoaW5nIGlzIHBpY2tlZCwgc2V0IGBzZWxlY3RgIHRoZW4gY2xvc2Ugd2l0aCBmb2N1cy5cbiAgICAgICAgICAgICAgICBlbHNlIGlmICggIXRhcmdldERpc2FibGVkICYmICdwaWNrJyBpbiB0YXJnZXREYXRhICkge1xuICAgICAgICAgICAgICAgICAgICBQLnNldCggJ3NlbGVjdCcsIHRhcmdldERhdGEucGljayApXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gSWYgYSDigJxjbGVhcuKAnSBidXR0b24gaXMgcHJlc3NlZCwgZW1wdHkgdGhlIHZhbHVlcyBhbmQgY2xvc2Ugd2l0aCBmb2N1cy5cbiAgICAgICAgICAgICAgICBlbHNlIGlmICggdGFyZ2V0RGF0YS5jbGVhciApIHtcbiAgICAgICAgICAgICAgICAgICAgUC5jbGVhcigpLmNsb3NlKCB0cnVlIClcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBlbHNlIGlmICggdGFyZ2V0RGF0YS5jbG9zZSApIHtcbiAgICAgICAgICAgICAgICAgICAgUC5jbG9zZSggdHJ1ZSApXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9KSAvL1AuJHJvb3RcblxuICAgICAgICBhcmlhKCBQLiRyb290WzBdLCAnaGlkZGVuJywgdHJ1ZSApXG4gICAgfVxuXG5cbiAgICAgLyoqXG4gICAgICAqIFByZXBhcmUgdGhlIGhpZGRlbiBpbnB1dCBlbGVtZW50IGFsb25nIHdpdGggYWxsIGJpbmRpbmdzLlxuICAgICAgKi9cbiAgICBmdW5jdGlvbiBwcmVwYXJlRWxlbWVudEhpZGRlbigpIHtcblxuICAgICAgICB2YXIgbmFtZVxuXG4gICAgICAgIGlmICggU0VUVElOR1MuaGlkZGVuTmFtZSA9PT0gdHJ1ZSApIHtcbiAgICAgICAgICAgIG5hbWUgPSBFTEVNRU5ULm5hbWVcbiAgICAgICAgICAgIEVMRU1FTlQubmFtZSA9ICcnXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBuYW1lID0gW1xuICAgICAgICAgICAgICAgIHR5cGVvZiBTRVRUSU5HUy5oaWRkZW5QcmVmaXggPT0gJ3N0cmluZycgPyBTRVRUSU5HUy5oaWRkZW5QcmVmaXggOiAnJyxcbiAgICAgICAgICAgICAgICB0eXBlb2YgU0VUVElOR1MuaGlkZGVuU3VmZml4ID09ICdzdHJpbmcnID8gU0VUVElOR1MuaGlkZGVuU3VmZml4IDogJ19zdWJtaXQnXG4gICAgICAgICAgICBdXG4gICAgICAgICAgICBuYW1lID0gbmFtZVswXSArIEVMRU1FTlQubmFtZSArIG5hbWVbMV1cbiAgICAgICAgfVxuXG4gICAgICAgIFAuX2hpZGRlbiA9ICQoXG4gICAgICAgICAgICAnPGlucHV0ICcgK1xuICAgICAgICAgICAgJ3R5cGU9aGlkZGVuICcgK1xuXG4gICAgICAgICAgICAvLyBDcmVhdGUgdGhlIG5hbWUgdXNpbmcgdGhlIG9yaWdpbmFsIGlucHV04oCZcyB3aXRoIGEgcHJlZml4IGFuZCBzdWZmaXguXG4gICAgICAgICAgICAnbmFtZT1cIicgKyBuYW1lICsgJ1wiJyArXG5cbiAgICAgICAgICAgIC8vIElmIHRoZSBlbGVtZW50IGhhcyBhIHZhbHVlLCBzZXQgdGhlIGhpZGRlbiB2YWx1ZSBhcyB3ZWxsLlxuICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICRFTEVNRU5ULmRhdGEoJ3ZhbHVlJykgfHwgRUxFTUVOVC52YWx1ZSA/XG4gICAgICAgICAgICAgICAgICAgICcgdmFsdWU9XCInICsgUC5nZXQoJ3NlbGVjdCcsIFNFVFRJTkdTLmZvcm1hdFN1Ym1pdCkgKyAnXCInIDpcbiAgICAgICAgICAgICAgICAgICAgJydcbiAgICAgICAgICAgICkgK1xuICAgICAgICAgICAgJz4nXG4gICAgICAgIClbMF1cblxuICAgICAgICAkRUxFTUVOVC5cblxuICAgICAgICAgICAgLy8gSWYgdGhlIHZhbHVlIGNoYW5nZXMsIHVwZGF0ZSB0aGUgaGlkZGVuIGlucHV0IHdpdGggdGhlIGNvcnJlY3QgZm9ybWF0LlxuICAgICAgICAgICAgb24oJ2NoYW5nZS4nICsgU1RBVEUuaWQsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIFAuX2hpZGRlbi52YWx1ZSA9IEVMRU1FTlQudmFsdWUgP1xuICAgICAgICAgICAgICAgICAgICBQLmdldCgnc2VsZWN0JywgU0VUVElOR1MuZm9ybWF0U3VibWl0KSA6XG4gICAgICAgICAgICAgICAgICAgICcnXG4gICAgICAgICAgICB9KVxuXG5cbiAgICAgICAgLy8gSW5zZXJ0IHRoZSBoaWRkZW4gaW5wdXQgYXMgc3BlY2lmaWVkIGluIHRoZSBzZXR0aW5ncy5cbiAgICAgICAgaWYgKCBTRVRUSU5HUy5jb250YWluZXIgKSAkKCBTRVRUSU5HUy5jb250YWluZXIgKS5hcHBlbmQoIFAuX2hpZGRlbiApXG4gICAgICAgIGVsc2UgJEVMRU1FTlQuYWZ0ZXIoIFAuX2hpZGRlbiApXG4gICAgfVxuXG5cbiAgICAvLyBGb3IgaU9TOC5cbiAgICBmdW5jdGlvbiBoYW5kbGVLZXlkb3duRXZlbnQoIGV2ZW50ICkge1xuXG4gICAgICAgIHZhciBrZXljb2RlID0gZXZlbnQua2V5Q29kZSxcblxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgb25lIG9mIHRoZSBkZWxldGUga2V5cyB3YXMgcHJlc3NlZC5cbiAgICAgICAgICAgIGlzS2V5Y29kZURlbGV0ZSA9IC9eKDh8NDYpJC8udGVzdChrZXljb2RlKVxuXG4gICAgICAgIC8vIEZvciBzb21lIHJlYXNvbiBJRSBjbGVhcnMgdGhlIGlucHV0IHZhbHVlIG9uIOKAnGVzY2FwZeKAnS5cbiAgICAgICAgaWYgKCBrZXljb2RlID09IDI3ICkge1xuICAgICAgICAgICAgUC5jbG9zZSgpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENoZWNrIGlmIGBzcGFjZWAgb3IgYGRlbGV0ZWAgd2FzIHByZXNzZWQgb3IgdGhlIHBpY2tlciBpcyBjbG9zZWQgd2l0aCBhIGtleSBtb3ZlbWVudC5cbiAgICAgICAgaWYgKCBrZXljb2RlID09IDMyIHx8IGlzS2V5Y29kZURlbGV0ZSB8fCAhU1RBVEUub3BlbiAmJiBQLmNvbXBvbmVudC5rZXlba2V5Y29kZV0gKSB7XG5cbiAgICAgICAgICAgIC8vIFByZXZlbnQgaXQgZnJvbSBtb3ZpbmcgdGhlIHBhZ2UgYW5kIGJ1YmJsaW5nIHRvIGRvYy5cbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG5cbiAgICAgICAgICAgIC8vIElmIGBkZWxldGVgIHdhcyBwcmVzc2VkLCBjbGVhciB0aGUgdmFsdWVzIGFuZCBjbG9zZSB0aGUgcGlja2VyLlxuICAgICAgICAgICAgLy8gT3RoZXJ3aXNlIG9wZW4gdGhlIHBpY2tlci5cbiAgICAgICAgICAgIGlmICggaXNLZXljb2RlRGVsZXRlICkgeyBQLmNsZWFyKCkuY2xvc2UoKSB9XG4gICAgICAgICAgICBlbHNlIHsgUC5vcGVuKCkgfVxuICAgICAgICB9XG4gICAgfVxuXG5cbiAgICAvLyBTZXBhcmF0ZWQgZm9yIElFXG4gICAgZnVuY3Rpb24gaGFuZGxlRm9jdXNUb09wZW5FdmVudCggZXZlbnQgKSB7XG5cbiAgICAgICAgLy8gU3RvcCB0aGUgZXZlbnQgZnJvbSBwcm9wYWdhdGluZyB0byB0aGUgZG9jLlxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuXG4gICAgICAgIC8vIElmIGl04oCZcyBhIGZvY3VzIGV2ZW50LCBhZGQgdGhlIOKAnGZvY3VzZWTigJ0gY2xhc3MgdG8gdGhlIHJvb3QuXG4gICAgICAgIGlmICggZXZlbnQudHlwZSA9PSAnZm9jdXMnICkge1xuICAgICAgICAgICAgUC4kcm9vdC5hZGRDbGFzcyggQ0xBU1NFUy5mb2N1c2VkIClcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFuZCB0aGVuIGZpbmFsbHkgb3BlbiB0aGUgcGlja2VyLlxuICAgICAgICBQLm9wZW4oKVxuICAgIH1cblxuXG4gICAgLy8gUmV0dXJuIGEgbmV3IHBpY2tlciBpbnN0YW5jZS5cbiAgICByZXR1cm4gbmV3IFBpY2tlckluc3RhbmNlKClcbn0gLy9QaWNrZXJDb25zdHJ1Y3RvclxuXG5cblxuLyoqXG4gKiBUaGUgZGVmYXVsdCBjbGFzc2VzIGFuZCBwcmVmaXggdG8gdXNlIGZvciB0aGUgSFRNTCBjbGFzc2VzLlxuICovXG5QaWNrZXJDb25zdHJ1Y3Rvci5rbGFzc2VzID0gZnVuY3Rpb24oIHByZWZpeCApIHtcbiAgICBwcmVmaXggPSBwcmVmaXggfHwgJ3BpY2tlcidcbiAgICByZXR1cm4ge1xuXG4gICAgICAgIHBpY2tlcjogcHJlZml4LFxuICAgICAgICBvcGVuZWQ6IHByZWZpeCArICctLW9wZW5lZCcsXG4gICAgICAgIGZvY3VzZWQ6IHByZWZpeCArICctLWZvY3VzZWQnLFxuXG4gICAgICAgIGlucHV0OiBwcmVmaXggKyAnX19pbnB1dCcsXG4gICAgICAgIGFjdGl2ZTogcHJlZml4ICsgJ19faW5wdXQtLWFjdGl2ZScsXG4gICAgICAgIHRhcmdldDogcHJlZml4ICsgJ19faW5wdXQtLXRhcmdldCcsXG5cbiAgICAgICAgaG9sZGVyOiBwcmVmaXggKyAnX19ob2xkZXInLFxuXG4gICAgICAgIGZyYW1lOiBwcmVmaXggKyAnX19mcmFtZScsXG4gICAgICAgIHdyYXA6IHByZWZpeCArICdfX3dyYXAnLFxuXG4gICAgICAgIGJveDogcHJlZml4ICsgJ19fYm94J1xuICAgIH1cbn0gLy9QaWNrZXJDb25zdHJ1Y3Rvci5rbGFzc2VzXG5cblxuXG4vKipcbiAqIENoZWNrIGlmIHRoZSBkZWZhdWx0IHRoZW1lIGlzIGJlaW5nIHVzZWQuXG4gKi9cbmZ1bmN0aW9uIGlzVXNpbmdEZWZhdWx0VGhlbWUoIGVsZW1lbnQgKSB7XG5cbiAgICB2YXIgdGhlbWUsXG4gICAgICAgIHByb3AgPSAncG9zaXRpb24nXG5cbiAgICAvLyBGb3IgSUUuXG4gICAgaWYgKCBlbGVtZW50LmN1cnJlbnRTdHlsZSApIHtcbiAgICAgICAgdGhlbWUgPSBlbGVtZW50LmN1cnJlbnRTdHlsZVtwcm9wXVxuICAgIH1cblxuICAgIC8vIEZvciBub3JtYWwgYnJvd3NlcnMuXG4gICAgZWxzZSBpZiAoIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlICkge1xuICAgICAgICB0aGVtZSA9IGdldENvbXB1dGVkU3R5bGUoIGVsZW1lbnQgKVtwcm9wXVxuICAgIH1cblxuICAgIHJldHVybiB0aGVtZSA9PSAnZml4ZWQnXG59XG5cblxuXG4vKipcbiAqIEdldCB0aGUgd2lkdGggb2YgdGhlIGJyb3dzZXLigJlzIHNjcm9sbGJhci5cbiAqIFRha2VuIGZyb206IGh0dHBzOi8vZ2l0aHViLmNvbS9Wb2RrYUJlYXJzL1JlbW9kYWwvYmxvYi9tYXN0ZXIvc3JjL2pxdWVyeS5yZW1vZGFsLmpzXG4gKi9cbmZ1bmN0aW9uIGdldFNjcm9sbGJhcldpZHRoKCkge1xuXG4gICAgaWYgKCAkaHRtbC5oZWlnaHQoKSA8PSAkd2luZG93LmhlaWdodCgpICkge1xuICAgICAgICByZXR1cm4gMFxuICAgIH1cblxuICAgIHZhciAkb3V0ZXIgPSAkKCAnPGRpdiBzdHlsZT1cInZpc2liaWxpdHk6aGlkZGVuO3dpZHRoOjEwMHB4XCIgLz4nICkuXG4gICAgICAgIGFwcGVuZFRvKCAnYm9keScgKVxuXG4gICAgLy8gR2V0IHRoZSB3aWR0aCB3aXRob3V0IHNjcm9sbGJhcnMuXG4gICAgdmFyIHdpZHRoV2l0aG91dFNjcm9sbCA9ICRvdXRlclswXS5vZmZzZXRXaWR0aFxuXG4gICAgLy8gRm9yY2UgYWRkaW5nIHNjcm9sbGJhcnMuXG4gICAgJG91dGVyLmNzcyggJ292ZXJmbG93JywgJ3Njcm9sbCcgKVxuXG4gICAgLy8gQWRkIHRoZSBpbm5lciBkaXYuXG4gICAgdmFyICRpbm5lciA9ICQoICc8ZGl2IHN0eWxlPVwid2lkdGg6MTAwJVwiIC8+JyApLmFwcGVuZFRvKCAkb3V0ZXIgKVxuXG4gICAgLy8gR2V0IHRoZSB3aWR0aCB3aXRoIHNjcm9sbGJhcnMuXG4gICAgdmFyIHdpZHRoV2l0aFNjcm9sbCA9ICRpbm5lclswXS5vZmZzZXRXaWR0aFxuXG4gICAgLy8gUmVtb3ZlIHRoZSBkaXZzLlxuICAgICRvdXRlci5yZW1vdmUoKVxuXG4gICAgLy8gUmV0dXJuIHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gdGhlIHdpZHRocy5cbiAgICByZXR1cm4gd2lkdGhXaXRob3V0U2Nyb2xsIC0gd2lkdGhXaXRoU2Nyb2xsXG59XG5cblxuXG4vKipcbiAqIFBpY2tlckNvbnN0cnVjdG9yIGhlbHBlciBtZXRob2RzLlxuICovXG5QaWNrZXJDb25zdHJ1Y3Rvci5fID0ge1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgZ3JvdXAgb2Ygbm9kZXMuIEV4cGVjdHM6XG4gICAgICogYFxuICAgICAgICB7XG4gICAgICAgICAgICBtaW46ICAgIHtJbnRlZ2VyfSxcbiAgICAgICAgICAgIG1heDogICAge0ludGVnZXJ9LFxuICAgICAgICAgICAgaTogICAgICB7SW50ZWdlcn0sXG4gICAgICAgICAgICBub2RlOiAgIHtTdHJpbmd9LFxuICAgICAgICAgICAgaXRlbTogICB7RnVuY3Rpb259XG4gICAgICAgIH1cbiAgICAgKiBgXG4gICAgICovXG4gICAgZ3JvdXA6IGZ1bmN0aW9uKCBncm91cE9iamVjdCApIHtcblxuICAgICAgICB2YXJcbiAgICAgICAgICAgIC8vIFNjb3BlIGZvciB0aGUgbG9vcGVkIG9iamVjdFxuICAgICAgICAgICAgbG9vcE9iamVjdFNjb3BlLFxuXG4gICAgICAgICAgICAvLyBDcmVhdGUgdGhlIG5vZGVzIGxpc3RcbiAgICAgICAgICAgIG5vZGVzTGlzdCA9ICcnLFxuXG4gICAgICAgICAgICAvLyBUaGUgY291bnRlciBzdGFydHMgZnJvbSB0aGUgYG1pbmBcbiAgICAgICAgICAgIGNvdW50ZXIgPSBQaWNrZXJDb25zdHJ1Y3Rvci5fLnRyaWdnZXIoIGdyb3VwT2JqZWN0Lm1pbiwgZ3JvdXBPYmplY3QgKVxuXG5cbiAgICAgICAgLy8gTG9vcCBmcm9tIHRoZSBgbWluYCB0byBgbWF4YCwgaW5jcmVtZW50aW5nIGJ5IGBpYFxuICAgICAgICBmb3IgKCA7IGNvdW50ZXIgPD0gUGlja2VyQ29uc3RydWN0b3IuXy50cmlnZ2VyKCBncm91cE9iamVjdC5tYXgsIGdyb3VwT2JqZWN0LCBbIGNvdW50ZXIgXSApOyBjb3VudGVyICs9IGdyb3VwT2JqZWN0LmkgKSB7XG5cbiAgICAgICAgICAgIC8vIFRyaWdnZXIgdGhlIGBpdGVtYCBmdW5jdGlvbiB3aXRoaW4gc2NvcGUgb2YgdGhlIG9iamVjdFxuICAgICAgICAgICAgbG9vcE9iamVjdFNjb3BlID0gUGlja2VyQ29uc3RydWN0b3IuXy50cmlnZ2VyKCBncm91cE9iamVjdC5pdGVtLCBncm91cE9iamVjdCwgWyBjb3VudGVyIF0gKVxuXG4gICAgICAgICAgICAvLyBTcGxpY2UgdGhlIHN1Ymdyb3VwIGFuZCBjcmVhdGUgbm9kZXMgb3V0IG9mIHRoZSBzdWIgbm9kZXNcbiAgICAgICAgICAgIG5vZGVzTGlzdCArPSBQaWNrZXJDb25zdHJ1Y3Rvci5fLm5vZGUoXG4gICAgICAgICAgICAgICAgZ3JvdXBPYmplY3Qubm9kZSxcbiAgICAgICAgICAgICAgICBsb29wT2JqZWN0U2NvcGVbIDAgXSwgICAvLyB0aGUgbm9kZVxuICAgICAgICAgICAgICAgIGxvb3BPYmplY3RTY29wZVsgMSBdLCAgIC8vIHRoZSBjbGFzc2VzXG4gICAgICAgICAgICAgICAgbG9vcE9iamVjdFNjb3BlWyAyIF0gICAgLy8gdGhlIGF0dHJpYnV0ZXNcbiAgICAgICAgICAgIClcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJldHVybiB0aGUgbGlzdCBvZiBub2Rlc1xuICAgICAgICByZXR1cm4gbm9kZXNMaXN0XG4gICAgfSwgLy9ncm91cFxuXG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBkb20gbm9kZSBzdHJpbmdcbiAgICAgKi9cbiAgICBub2RlOiBmdW5jdGlvbiggd3JhcHBlciwgaXRlbSwga2xhc3MsIGF0dHJpYnV0ZSApIHtcblxuICAgICAgICAvLyBJZiB0aGUgaXRlbSBpcyBmYWxzZS15LCBqdXN0IHJldHVybiBhbiBlbXB0eSBzdHJpbmdcbiAgICAgICAgaWYgKCAhaXRlbSApIHJldHVybiAnJ1xuXG4gICAgICAgIC8vIElmIHRoZSBpdGVtIGlzIGFuIGFycmF5LCBkbyBhIGpvaW5cbiAgICAgICAgaXRlbSA9ICQuaXNBcnJheSggaXRlbSApID8gaXRlbS5qb2luKCAnJyApIDogaXRlbVxuXG4gICAgICAgIC8vIENoZWNrIGZvciB0aGUgY2xhc3NcbiAgICAgICAga2xhc3MgPSBrbGFzcyA/ICcgY2xhc3M9XCInICsga2xhc3MgKyAnXCInIDogJydcblxuICAgICAgICAvLyBDaGVjayBmb3IgYW55IGF0dHJpYnV0ZXNcbiAgICAgICAgYXR0cmlidXRlID0gYXR0cmlidXRlID8gJyAnICsgYXR0cmlidXRlIDogJydcblxuICAgICAgICAvLyBSZXR1cm4gdGhlIHdyYXBwZWQgaXRlbVxuICAgICAgICByZXR1cm4gJzwnICsgd3JhcHBlciArIGtsYXNzICsgYXR0cmlidXRlICsgJz4nICsgaXRlbSArICc8LycgKyB3cmFwcGVyICsgJz4nXG4gICAgfSwgLy9ub2RlXG5cblxuICAgIC8qKlxuICAgICAqIExlYWQgbnVtYmVycyBiZWxvdyAxMCB3aXRoIGEgemVyby5cbiAgICAgKi9cbiAgICBsZWFkOiBmdW5jdGlvbiggbnVtYmVyICkge1xuICAgICAgICByZXR1cm4gKCBudW1iZXIgPCAxMCA/ICcwJzogJycgKSArIG51bWJlclxuICAgIH0sXG5cblxuICAgIC8qKlxuICAgICAqIFRyaWdnZXIgYSBmdW5jdGlvbiBvdGhlcndpc2UgcmV0dXJuIHRoZSB2YWx1ZS5cbiAgICAgKi9cbiAgICB0cmlnZ2VyOiBmdW5jdGlvbiggY2FsbGJhY2ssIHNjb3BlLCBhcmdzICkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIGNhbGxiYWNrID09ICdmdW5jdGlvbicgPyBjYWxsYmFjay5hcHBseSggc2NvcGUsIGFyZ3MgfHwgW10gKSA6IGNhbGxiYWNrXG4gICAgfSxcblxuXG4gICAgLyoqXG4gICAgICogSWYgdGhlIHNlY29uZCBjaGFyYWN0ZXIgaXMgYSBkaWdpdCwgbGVuZ3RoIGlzIDIgb3RoZXJ3aXNlIDEuXG4gICAgICovXG4gICAgZGlnaXRzOiBmdW5jdGlvbiggc3RyaW5nICkge1xuICAgICAgICByZXR1cm4gKCAvXFxkLyApLnRlc3QoIHN0cmluZ1sgMSBdICkgPyAyIDogMVxuICAgIH0sXG5cblxuICAgIC8qKlxuICAgICAqIFRlbGwgaWYgc29tZXRoaW5nIGlzIGEgZGF0ZSBvYmplY3QuXG4gICAgICovXG4gICAgaXNEYXRlOiBmdW5jdGlvbiggdmFsdWUgKSB7XG4gICAgICAgIHJldHVybiB7fS50b1N0cmluZy5jYWxsKCB2YWx1ZSApLmluZGV4T2YoICdEYXRlJyApID4gLTEgJiYgdGhpcy5pc0ludGVnZXIoIHZhbHVlLmdldERhdGUoKSApXG4gICAgfSxcblxuXG4gICAgLyoqXG4gICAgICogVGVsbCBpZiBzb21ldGhpbmcgaXMgYW4gaW50ZWdlci5cbiAgICAgKi9cbiAgICBpc0ludGVnZXI6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcbiAgICAgICAgcmV0dXJuIHt9LnRvU3RyaW5nLmNhbGwoIHZhbHVlICkuaW5kZXhPZiggJ051bWJlcicgKSA+IC0xICYmIHZhbHVlICUgMSA9PT0gMFxuICAgIH0sXG5cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBBUklBIGF0dHJpYnV0ZSBzdHJpbmdzLlxuICAgICAqL1xuICAgIGFyaWFBdHRyOiBhcmlhQXR0clxufSAvL1BpY2tlckNvbnN0cnVjdG9yLl9cblxuXG5cbi8qKlxuICogRXh0ZW5kIHRoZSBwaWNrZXIgd2l0aCBhIGNvbXBvbmVudCBhbmQgZGVmYXVsdHMuXG4gKi9cblBpY2tlckNvbnN0cnVjdG9yLmV4dGVuZCA9IGZ1bmN0aW9uKCBuYW1lLCBDb21wb25lbnQgKSB7XG5cbiAgICAvLyBFeHRlbmQgalF1ZXJ5LlxuICAgICQuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCBvcHRpb25zLCBhY3Rpb24gKSB7XG5cbiAgICAgICAgLy8gR3JhYiB0aGUgY29tcG9uZW50IGRhdGEuXG4gICAgICAgIHZhciBjb21wb25lbnREYXRhID0gdGhpcy5kYXRhKCBuYW1lIClcblxuICAgICAgICAvLyBJZiB0aGUgcGlja2VyIGlzIHJlcXVlc3RlZCwgcmV0dXJuIHRoZSBkYXRhIG9iamVjdC5cbiAgICAgICAgaWYgKCBvcHRpb25zID09ICdwaWNrZXInICkge1xuICAgICAgICAgICAgcmV0dXJuIGNvbXBvbmVudERhdGFcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIHRoZSBjb21wb25lbnQgZGF0YSBleGlzdHMgYW5kIGBvcHRpb25zYCBpcyBhIHN0cmluZywgY2Fycnkgb3V0IHRoZSBhY3Rpb24uXG4gICAgICAgIGlmICggY29tcG9uZW50RGF0YSAmJiB0eXBlb2Ygb3B0aW9ucyA9PSAnc3RyaW5nJyApIHtcbiAgICAgICAgICAgIHJldHVybiBQaWNrZXJDb25zdHJ1Y3Rvci5fLnRyaWdnZXIoIGNvbXBvbmVudERhdGFbIG9wdGlvbnMgXSwgY29tcG9uZW50RGF0YSwgWyBhY3Rpb24gXSApXG4gICAgICAgIH1cblxuICAgICAgICAvLyBPdGhlcndpc2UgZ28gdGhyb3VnaCBlYWNoIG1hdGNoZWQgZWxlbWVudCBhbmQgaWYgdGhlIGNvbXBvbmVudFxuICAgICAgICAvLyBkb2VzbuKAmXQgZXhpc3QsIGNyZWF0ZSBhIG5ldyBwaWNrZXIgdXNpbmcgYHRoaXNgIGVsZW1lbnRcbiAgICAgICAgLy8gYW5kIG1lcmdpbmcgdGhlIGRlZmF1bHRzIGFuZCBvcHRpb25zIHdpdGggYSBkZWVwIGNvcHkuXG4gICAgICAgIHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyICR0aGlzID0gJCggdGhpcyApXG4gICAgICAgICAgICBpZiAoICEkdGhpcy5kYXRhKCBuYW1lICkgKSB7XG4gICAgICAgICAgICAgICAgbmV3IFBpY2tlckNvbnN0cnVjdG9yKCB0aGlzLCBuYW1lLCBDb21wb25lbnQsIG9wdGlvbnMgKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIC8vIFNldCB0aGUgZGVmYXVsdHMuXG4gICAgJC5mblsgbmFtZSBdLmRlZmF1bHRzID0gQ29tcG9uZW50LmRlZmF1bHRzXG59IC8vUGlja2VyQ29uc3RydWN0b3IuZXh0ZW5kXG5cblxuXG5mdW5jdGlvbiBhcmlhKGVsZW1lbnQsIGF0dHJpYnV0ZSwgdmFsdWUpIHtcbiAgICBpZiAoICQuaXNQbGFpbk9iamVjdChhdHRyaWJ1dGUpICkge1xuICAgICAgICBmb3IgKCB2YXIga2V5IGluIGF0dHJpYnV0ZSApIHtcbiAgICAgICAgICAgIGFyaWFTZXQoZWxlbWVudCwga2V5LCBhdHRyaWJ1dGVba2V5XSlcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgYXJpYVNldChlbGVtZW50LCBhdHRyaWJ1dGUsIHZhbHVlKVxuICAgIH1cbn1cbmZ1bmN0aW9uIGFyaWFTZXQoZWxlbWVudCwgYXR0cmlidXRlLCB2YWx1ZSkge1xuICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKFxuICAgICAgICAoYXR0cmlidXRlID09ICdyb2xlJyA/ICcnIDogJ2FyaWEtJykgKyBhdHRyaWJ1dGUsXG4gICAgICAgIHZhbHVlXG4gICAgKVxufVxuZnVuY3Rpb24gYXJpYUF0dHIoYXR0cmlidXRlLCBkYXRhKSB7XG4gICAgaWYgKCAhJC5pc1BsYWluT2JqZWN0KGF0dHJpYnV0ZSkgKSB7XG4gICAgICAgIGF0dHJpYnV0ZSA9IHsgYXR0cmlidXRlOiBkYXRhIH1cbiAgICB9XG4gICAgZGF0YSA9ICcnXG4gICAgZm9yICggdmFyIGtleSBpbiBhdHRyaWJ1dGUgKSB7XG4gICAgICAgIHZhciBhdHRyID0gKGtleSA9PSAncm9sZScgPyAnJyA6ICdhcmlhLScpICsga2V5LFxuICAgICAgICAgICAgYXR0clZhbCA9IGF0dHJpYnV0ZVtrZXldXG4gICAgICAgIGRhdGEgKz0gYXR0clZhbCA9PSBudWxsID8gJycgOiBhdHRyICsgJz1cIicgKyBhdHRyaWJ1dGVba2V5XSArICdcIidcbiAgICB9XG4gICAgcmV0dXJuIGRhdGFcbn1cblxuLy8gSUU4IGJ1ZyB0aHJvd3MgYW4gZXJyb3IgZm9yIGFjdGl2ZUVsZW1lbnRzIHdpdGhpbiBpZnJhbWVzLlxuZnVuY3Rpb24gZ2V0QWN0aXZlRWxlbWVudCgpIHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gZG9jdW1lbnQuYWN0aXZlRWxlbWVudFxuICAgIH0gY2F0Y2ggKCBlcnIgKSB7IH1cbn1cblxuXG5cbi8vIEV4cG9zZSB0aGUgcGlja2VyIGNvbnN0cnVjdG9yLlxucmV0dXJuIFBpY2tlckNvbnN0cnVjdG9yXG5cblxufSkpO1xuXG5cbjsvKiFcbiAqIERhdGUgcGlja2VyIGZvciBwaWNrYWRhdGUuanMgdjMuNS4wXG4gKiBodHRwOi8vYW1zdWwuZ2l0aHViLmlvL3BpY2thZGF0ZS5qcy9kYXRlLmh0bVxuICovXG5cbihmdW5jdGlvbiAoIGZhY3RvcnkgKSB7XG5cbiAgICAvLyBBTUQuXG4gICAgaWYgKCB0eXBlb2YgZGVmaW5lID09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCApXG4gICAgICAgIGRlZmluZSggWydwaWNrZXInLCAnanF1ZXJ5J10sIGZhY3RvcnkgKVxuXG4gICAgLy8gTm9kZS5qcy9icm93c2VyaWZ5LlxuICAgIGVsc2UgaWYgKCB0eXBlb2YgZXhwb3J0cyA9PSAnb2JqZWN0JyApXG4gICAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSggcmVxdWlyZSgnLi9waWNrZXIuanMnKSwgcmVxdWlyZSgnanF1ZXJ5JykgKVxuXG4gICAgLy8gQnJvd3NlciBnbG9iYWxzLlxuICAgIGVsc2UgZmFjdG9yeSggUGlja2VyLCBqUXVlcnkgKVxuXG59KGZ1bmN0aW9uKCBQaWNrZXIsICQgKSB7XG5cblxuLyoqXG4gKiBHbG9iYWxzIGFuZCBjb25zdGFudHNcbiAqL1xudmFyIERBWVNfSU5fV0VFSyA9IDcsXG4gICAgV0VFS1NfSU5fQ0FMRU5EQVIgPSA2LFxuICAgIF8gPSBQaWNrZXIuX1xuXG5cblxuLyoqXG4gKiBUaGUgZGF0ZSBwaWNrZXIgY29uc3RydWN0b3JcbiAqL1xuZnVuY3Rpb24gRGF0ZVBpY2tlciggcGlja2VyLCBzZXR0aW5ncyApIHtcblxuICAgIHZhciBjYWxlbmRhciA9IHRoaXMsXG4gICAgICAgIGVsZW1lbnQgPSBwaWNrZXIuJG5vZGVbIDAgXSxcbiAgICAgICAgZWxlbWVudFZhbHVlID0gZWxlbWVudC52YWx1ZSxcbiAgICAgICAgZWxlbWVudERhdGFWYWx1ZSA9IHBpY2tlci4kbm9kZS5kYXRhKCAndmFsdWUnICksXG4gICAgICAgIHZhbHVlU3RyaW5nID0gZWxlbWVudERhdGFWYWx1ZSB8fCBlbGVtZW50VmFsdWUsXG4gICAgICAgIGZvcm1hdFN0cmluZyA9IGVsZW1lbnREYXRhVmFsdWUgPyBzZXR0aW5ncy5mb3JtYXRTdWJtaXQgOiBzZXR0aW5ncy5mb3JtYXQsXG4gICAgICAgIGlzUlRMID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50LmN1cnJlbnRTdHlsZSA/XG5cbiAgICAgICAgICAgICAgICAvLyBGb3IgSUUuXG4gICAgICAgICAgICAgICAgZWxlbWVudC5jdXJyZW50U3R5bGUuZGlyZWN0aW9uID09ICdydGwnIDpcblxuICAgICAgICAgICAgICAgIC8vIEZvciBub3JtYWwgYnJvd3NlcnMuXG4gICAgICAgICAgICAgICAgZ2V0Q29tcHV0ZWRTdHlsZSggcGlja2VyLiRyb290WzBdICkuZGlyZWN0aW9uID09ICdydGwnXG4gICAgICAgIH1cblxuICAgIGNhbGVuZGFyLnNldHRpbmdzID0gc2V0dGluZ3NcbiAgICBjYWxlbmRhci4kbm9kZSA9IHBpY2tlci4kbm9kZVxuXG4gICAgLy8gVGhlIHF1ZXVlIG9mIG1ldGhvZHMgdGhhdCB3aWxsIGJlIHVzZWQgdG8gYnVpbGQgaXRlbSBvYmplY3RzLlxuICAgIGNhbGVuZGFyLnF1ZXVlID0ge1xuICAgICAgICBtaW46ICdtZWFzdXJlIGNyZWF0ZScsXG4gICAgICAgIG1heDogJ21lYXN1cmUgY3JlYXRlJyxcbiAgICAgICAgbm93OiAnbm93IGNyZWF0ZScsXG4gICAgICAgIHNlbGVjdDogJ3BhcnNlIGNyZWF0ZSB2YWxpZGF0ZScsXG4gICAgICAgIGhpZ2hsaWdodDogJ3BhcnNlIG5hdmlnYXRlIGNyZWF0ZSB2YWxpZGF0ZScsXG4gICAgICAgIHZpZXc6ICdwYXJzZSBjcmVhdGUgdmFsaWRhdGUgdmlld3NldCcsXG4gICAgICAgIGRpc2FibGU6ICdkZWFjdGl2YXRlJyxcbiAgICAgICAgZW5hYmxlOiAnYWN0aXZhdGUnXG4gICAgfVxuXG4gICAgLy8gVGhlIGNvbXBvbmVudCdzIGl0ZW0gb2JqZWN0LlxuICAgIGNhbGVuZGFyLml0ZW0gPSB7fVxuXG4gICAgY2FsZW5kYXIuaXRlbS5jbGVhciA9IG51bGxcbiAgICBjYWxlbmRhci5pdGVtLmRpc2FibGUgPSAoIHNldHRpbmdzLmRpc2FibGUgfHwgW10gKS5zbGljZSggMCApXG4gICAgY2FsZW5kYXIuaXRlbS5lbmFibGUgPSAtKGZ1bmN0aW9uKCBjb2xsZWN0aW9uRGlzYWJsZWQgKSB7XG4gICAgICAgIHJldHVybiBjb2xsZWN0aW9uRGlzYWJsZWRbIDAgXSA9PT0gdHJ1ZSA/IGNvbGxlY3Rpb25EaXNhYmxlZC5zaGlmdCgpIDogLTFcbiAgICB9KSggY2FsZW5kYXIuaXRlbS5kaXNhYmxlIClcblxuICAgIGNhbGVuZGFyLlxuICAgICAgICBzZXQoICdtaW4nLCBzZXR0aW5ncy5taW4gKS5cbiAgICAgICAgc2V0KCAnbWF4Jywgc2V0dGluZ3MubWF4ICkuXG4gICAgICAgIHNldCggJ25vdycgKVxuXG4gICAgLy8gV2hlbiB0aGVyZeKAmXMgYSB2YWx1ZSwgc2V0IHRoZSBgc2VsZWN0YCwgd2hpY2ggaW4gdHVyblxuICAgIC8vIGFsc28gc2V0cyB0aGUgYGhpZ2hsaWdodGAgYW5kIGB2aWV3YC5cbiAgICBpZiAoIHZhbHVlU3RyaW5nICkge1xuICAgICAgICBjYWxlbmRhci5zZXQoICdzZWxlY3QnLCB2YWx1ZVN0cmluZywgeyBmb3JtYXQ6IGZvcm1hdFN0cmluZyB9KVxuICAgIH1cblxuICAgIC8vIElmIHRoZXJl4oCZcyBubyB2YWx1ZSwgZGVmYXVsdCB0byBoaWdobGlnaHRpbmcg4oCcdG9kYXnigJ0uXG4gICAgZWxzZSB7XG4gICAgICAgIGNhbGVuZGFyLlxuICAgICAgICAgICAgc2V0KCAnc2VsZWN0JywgbnVsbCApLlxuICAgICAgICAgICAgc2V0KCAnaGlnaGxpZ2h0JywgY2FsZW5kYXIuaXRlbS5ub3cgKVxuICAgIH1cblxuXG4gICAgLy8gVGhlIGtleWNvZGUgdG8gbW92ZW1lbnQgbWFwcGluZy5cbiAgICBjYWxlbmRhci5rZXkgPSB7XG4gICAgICAgIDQwOiA3LCAvLyBEb3duXG4gICAgICAgIDM4OiAtNywgLy8gVXBcbiAgICAgICAgMzk6IGZ1bmN0aW9uKCkgeyByZXR1cm4gaXNSVEwoKSA/IC0xIDogMSB9LCAvLyBSaWdodFxuICAgICAgICAzNzogZnVuY3Rpb24oKSB7IHJldHVybiBpc1JUTCgpID8gMSA6IC0xIH0sIC8vIExlZnRcbiAgICAgICAgZ286IGZ1bmN0aW9uKCB0aW1lQ2hhbmdlICkge1xuICAgICAgICAgICAgdmFyIGhpZ2hsaWdodGVkT2JqZWN0ID0gY2FsZW5kYXIuaXRlbS5oaWdobGlnaHQsXG4gICAgICAgICAgICAgICAgdGFyZ2V0RGF0ZSA9IG5ldyBEYXRlKCBoaWdobGlnaHRlZE9iamVjdC55ZWFyLCBoaWdobGlnaHRlZE9iamVjdC5tb250aCwgaGlnaGxpZ2h0ZWRPYmplY3QuZGF0ZSArIHRpbWVDaGFuZ2UgKVxuICAgICAgICAgICAgY2FsZW5kYXIuc2V0KFxuICAgICAgICAgICAgICAgICdoaWdobGlnaHQnLFxuICAgICAgICAgICAgICAgIHRhcmdldERhdGUsXG4gICAgICAgICAgICAgICAgeyBpbnRlcnZhbDogdGltZUNoYW5nZSB9XG4gICAgICAgICAgICApXG4gICAgICAgICAgICB0aGlzLnJlbmRlcigpXG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIC8vIEJpbmQgc29tZSBwaWNrZXIgZXZlbnRzLlxuICAgIHBpY2tlci5cbiAgICAgICAgb24oICdyZW5kZXInLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHBpY2tlci4kcm9vdC5maW5kKCAnLicgKyBzZXR0aW5ncy5rbGFzcy5zZWxlY3RNb250aCApLm9uKCAnY2hhbmdlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy52YWx1ZVxuICAgICAgICAgICAgICAgIGlmICggdmFsdWUgKSB7XG4gICAgICAgICAgICAgICAgICAgIHBpY2tlci5zZXQoICdoaWdobGlnaHQnLCBbIHBpY2tlci5nZXQoICd2aWV3JyApLnllYXIsIHZhbHVlLCBwaWNrZXIuZ2V0KCAnaGlnaGxpZ2h0JyApLmRhdGUgXSApXG4gICAgICAgICAgICAgICAgICAgIHBpY2tlci4kcm9vdC5maW5kKCAnLicgKyBzZXR0aW5ncy5rbGFzcy5zZWxlY3RNb250aCApLnRyaWdnZXIoICdmb2N1cycgKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBwaWNrZXIuJHJvb3QuZmluZCggJy4nICsgc2V0dGluZ3Mua2xhc3Muc2VsZWN0WWVhciApLm9uKCAnY2hhbmdlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy52YWx1ZVxuICAgICAgICAgICAgICAgIGlmICggdmFsdWUgKSB7XG4gICAgICAgICAgICAgICAgICAgIHBpY2tlci5zZXQoICdoaWdobGlnaHQnLCBbIHZhbHVlLCBwaWNrZXIuZ2V0KCAndmlldycgKS5tb250aCwgcGlja2VyLmdldCggJ2hpZ2hsaWdodCcgKS5kYXRlIF0gKVxuICAgICAgICAgICAgICAgICAgICBwaWNrZXIuJHJvb3QuZmluZCggJy4nICsgc2V0dGluZ3Mua2xhc3Muc2VsZWN0WWVhciApLnRyaWdnZXIoICdmb2N1cycgKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0sIDEgKS5cbiAgICAgICAgb24oICdvcGVuJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgaW5jbHVkZVRvZGF5ID0gJydcbiAgICAgICAgICAgIGlmICggY2FsZW5kYXIuZGlzYWJsZWQoIGNhbGVuZGFyLmdldCgnbm93JykgKSApIHtcbiAgICAgICAgICAgICAgICBpbmNsdWRlVG9kYXkgPSAnOm5vdCguJyArIHNldHRpbmdzLmtsYXNzLmJ1dHRvblRvZGF5ICsgJyknXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwaWNrZXIuJHJvb3QuZmluZCggJ2J1dHRvbicgKyBpbmNsdWRlVG9kYXkgKyAnLCBzZWxlY3QnICkuYXR0ciggJ2Rpc2FibGVkJywgZmFsc2UgKVxuICAgICAgICB9LCAxICkuXG4gICAgICAgIG9uKCAnY2xvc2UnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHBpY2tlci4kcm9vdC5maW5kKCAnYnV0dG9uLCBzZWxlY3QnICkuYXR0ciggJ2Rpc2FibGVkJywgdHJ1ZSApXG4gICAgICAgIH0sIDEgKVxuXG59IC8vRGF0ZVBpY2tlclxuXG5cbi8qKlxuICogU2V0IGEgZGF0ZXBpY2tlciBpdGVtIG9iamVjdC5cbiAqL1xuRGF0ZVBpY2tlci5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24oIHR5cGUsIHZhbHVlLCBvcHRpb25zICkge1xuXG4gICAgdmFyIGNhbGVuZGFyID0gdGhpcyxcbiAgICAgICAgY2FsZW5kYXJJdGVtID0gY2FsZW5kYXIuaXRlbVxuXG4gICAgLy8gSWYgdGhlIHZhbHVlIGlzIGBudWxsYCBqdXN0IHNldCBpdCBpbW1lZGlhdGVseS5cbiAgICBpZiAoIHZhbHVlID09PSBudWxsICkge1xuICAgICAgICBpZiAoIHR5cGUgPT0gJ2NsZWFyJyApIHR5cGUgPSAnc2VsZWN0J1xuICAgICAgICBjYWxlbmRhckl0ZW1bIHR5cGUgXSA9IHZhbHVlXG4gICAgICAgIHJldHVybiBjYWxlbmRhclxuICAgIH1cblxuICAgIC8vIE90aGVyd2lzZSBnbyB0aHJvdWdoIHRoZSBxdWV1ZSBvZiBtZXRob2RzLCBhbmQgaW52b2tlIHRoZSBmdW5jdGlvbnMuXG4gICAgLy8gVXBkYXRlIHRoaXMgYXMgdGhlIHRpbWUgdW5pdCwgYW5kIHNldCB0aGUgZmluYWwgdmFsdWUgYXMgdGhpcyBpdGVtLlxuICAgIC8vICogSW4gdGhlIGNhc2Ugb2YgYGVuYWJsZWAsIGtlZXAgdGhlIHF1ZXVlIGJ1dCBzZXQgYGRpc2FibGVgIGluc3RlYWQuXG4gICAgLy8gICBBbmQgaW4gdGhlIGNhc2Ugb2YgYGZsaXBgLCBrZWVwIHRoZSBxdWV1ZSBidXQgc2V0IGBlbmFibGVgIGluc3RlYWQuXG4gICAgY2FsZW5kYXJJdGVtWyAoIHR5cGUgPT0gJ2VuYWJsZScgPyAnZGlzYWJsZScgOiB0eXBlID09ICdmbGlwJyA/ICdlbmFibGUnIDogdHlwZSApIF0gPSBjYWxlbmRhci5xdWV1ZVsgdHlwZSBdLnNwbGl0KCAnICcgKS5tYXAoIGZ1bmN0aW9uKCBtZXRob2QgKSB7XG4gICAgICAgIHZhbHVlID0gY2FsZW5kYXJbIG1ldGhvZCBdKCB0eXBlLCB2YWx1ZSwgb3B0aW9ucyApXG4gICAgICAgIHJldHVybiB2YWx1ZVxuICAgIH0pLnBvcCgpXG5cbiAgICAvLyBDaGVjayBpZiB3ZSBuZWVkIHRvIGNhc2NhZGUgdGhyb3VnaCBtb3JlIHVwZGF0ZXMuXG4gICAgaWYgKCB0eXBlID09ICdzZWxlY3QnICkge1xuICAgICAgICBjYWxlbmRhci5zZXQoICdoaWdobGlnaHQnLCBjYWxlbmRhckl0ZW0uc2VsZWN0LCBvcHRpb25zIClcbiAgICB9XG4gICAgZWxzZSBpZiAoIHR5cGUgPT0gJ2hpZ2hsaWdodCcgKSB7XG4gICAgICAgIGNhbGVuZGFyLnNldCggJ3ZpZXcnLCBjYWxlbmRhckl0ZW0uaGlnaGxpZ2h0LCBvcHRpb25zIClcbiAgICB9XG4gICAgZWxzZSBpZiAoIHR5cGUubWF0Y2goIC9eKGZsaXB8bWlufG1heHxkaXNhYmxlfGVuYWJsZSkkLyApICkge1xuICAgICAgICBpZiAoIGNhbGVuZGFySXRlbS5zZWxlY3QgJiYgY2FsZW5kYXIuZGlzYWJsZWQoIGNhbGVuZGFySXRlbS5zZWxlY3QgKSApIHtcbiAgICAgICAgICAgIGNhbGVuZGFyLnNldCggJ3NlbGVjdCcsIGNhbGVuZGFySXRlbS5zZWxlY3QsIG9wdGlvbnMgKVxuICAgICAgICB9XG4gICAgICAgIGlmICggY2FsZW5kYXJJdGVtLmhpZ2hsaWdodCAmJiBjYWxlbmRhci5kaXNhYmxlZCggY2FsZW5kYXJJdGVtLmhpZ2hsaWdodCApICkge1xuICAgICAgICAgICAgY2FsZW5kYXIuc2V0KCAnaGlnaGxpZ2h0JywgY2FsZW5kYXJJdGVtLmhpZ2hsaWdodCwgb3B0aW9ucyApXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gY2FsZW5kYXJcbn0gLy9EYXRlUGlja2VyLnByb3RvdHlwZS5zZXRcblxuXG4vKipcbiAqIEdldCBhIGRhdGVwaWNrZXIgaXRlbSBvYmplY3QuXG4gKi9cbkRhdGVQaWNrZXIucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKCB0eXBlICkge1xuICAgIHJldHVybiB0aGlzLml0ZW1bIHR5cGUgXVxufSAvL0RhdGVQaWNrZXIucHJvdG90eXBlLmdldFxuXG5cbi8qKlxuICogQ3JlYXRlIGEgcGlja2VyIGRhdGUgb2JqZWN0LlxuICovXG5EYXRlUGlja2VyLnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbiggdHlwZSwgdmFsdWUsIG9wdGlvbnMgKSB7XG5cbiAgICB2YXIgaXNJbmZpbml0ZVZhbHVlLFxuICAgICAgICBjYWxlbmRhciA9IHRoaXNcblxuICAgIC8vIElmIHRoZXJl4oCZcyBubyB2YWx1ZSwgdXNlIHRoZSB0eXBlIGFzIHRoZSB2YWx1ZS5cbiAgICB2YWx1ZSA9IHZhbHVlID09PSB1bmRlZmluZWQgPyB0eXBlIDogdmFsdWVcblxuXG4gICAgLy8gSWYgaXTigJlzIGluZmluaXR5LCB1cGRhdGUgdGhlIHZhbHVlLlxuICAgIGlmICggdmFsdWUgPT0gLUluZmluaXR5IHx8IHZhbHVlID09IEluZmluaXR5ICkge1xuICAgICAgICBpc0luZmluaXRlVmFsdWUgPSB2YWx1ZVxuICAgIH1cblxuICAgIC8vIElmIGl04oCZcyBhbiBvYmplY3QsIHVzZSB0aGUgbmF0aXZlIGRhdGUgb2JqZWN0LlxuICAgIGVsc2UgaWYgKCAkLmlzUGxhaW5PYmplY3QoIHZhbHVlICkgJiYgXy5pc0ludGVnZXIoIHZhbHVlLnBpY2sgKSApIHtcbiAgICAgICAgdmFsdWUgPSB2YWx1ZS5vYmpcbiAgICB9XG5cbiAgICAvLyBJZiBpdOKAmXMgYW4gYXJyYXksIGNvbnZlcnQgaXQgaW50byBhIGRhdGUgYW5kIG1ha2Ugc3VyZVxuICAgIC8vIHRoYXQgaXTigJlzIGEgdmFsaWQgZGF0ZSDigJMgb3RoZXJ3aXNlIGRlZmF1bHQgdG8gdG9kYXkuXG4gICAgZWxzZSBpZiAoICQuaXNBcnJheSggdmFsdWUgKSApIHtcbiAgICAgICAgdmFsdWUgPSBuZXcgRGF0ZSggdmFsdWVbIDAgXSwgdmFsdWVbIDEgXSwgdmFsdWVbIDIgXSApXG4gICAgICAgIHZhbHVlID0gXy5pc0RhdGUoIHZhbHVlICkgPyB2YWx1ZSA6IGNhbGVuZGFyLmNyZWF0ZSgpLm9ialxuICAgIH1cblxuICAgIC8vIElmIGl04oCZcyBhIG51bWJlciBvciBkYXRlIG9iamVjdCwgbWFrZSBhIG5vcm1hbGl6ZWQgZGF0ZS5cbiAgICBlbHNlIGlmICggXy5pc0ludGVnZXIoIHZhbHVlICkgfHwgXy5pc0RhdGUoIHZhbHVlICkgKSB7XG4gICAgICAgIHZhbHVlID0gY2FsZW5kYXIubm9ybWFsaXplKCBuZXcgRGF0ZSggdmFsdWUgKSwgb3B0aW9ucyApXG4gICAgfVxuXG4gICAgLy8gSWYgaXTigJlzIGEgbGl0ZXJhbCB0cnVlIG9yIGFueSBvdGhlciBjYXNlLCBzZXQgaXQgdG8gbm93LlxuICAgIGVsc2UgLyppZiAoIHZhbHVlID09PSB0cnVlICkqLyB7XG4gICAgICAgIHZhbHVlID0gY2FsZW5kYXIubm93KCB0eXBlLCB2YWx1ZSwgb3B0aW9ucyApXG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIHRoZSBjb21waWxlZCBvYmplY3QuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgeWVhcjogaXNJbmZpbml0ZVZhbHVlIHx8IHZhbHVlLmdldEZ1bGxZZWFyKCksXG4gICAgICAgIG1vbnRoOiBpc0luZmluaXRlVmFsdWUgfHwgdmFsdWUuZ2V0TW9udGgoKSxcbiAgICAgICAgZGF0ZTogaXNJbmZpbml0ZVZhbHVlIHx8IHZhbHVlLmdldERhdGUoKSxcbiAgICAgICAgZGF5OiBpc0luZmluaXRlVmFsdWUgfHwgdmFsdWUuZ2V0RGF5KCksXG4gICAgICAgIG9iajogaXNJbmZpbml0ZVZhbHVlIHx8IHZhbHVlLFxuICAgICAgICBwaWNrOiBpc0luZmluaXRlVmFsdWUgfHwgdmFsdWUuZ2V0VGltZSgpXG4gICAgfVxufSAvL0RhdGVQaWNrZXIucHJvdG90eXBlLmNyZWF0ZVxuXG5cbi8qKlxuICogQ3JlYXRlIGEgcmFuZ2UgbGltaXQgb2JqZWN0IHVzaW5nIGFuIGFycmF5LCBkYXRlIG9iamVjdCxcbiAqIGxpdGVyYWwg4oCcdHJ1ZeKAnSwgb3IgaW50ZWdlciByZWxhdGl2ZSB0byBhbm90aGVyIHRpbWUuXG4gKi9cbkRhdGVQaWNrZXIucHJvdG90eXBlLmNyZWF0ZVJhbmdlID0gZnVuY3Rpb24oIGZyb20sIHRvICkge1xuXG4gICAgdmFyIGNhbGVuZGFyID0gdGhpcyxcbiAgICAgICAgY3JlYXRlRGF0ZSA9IGZ1bmN0aW9uKCBkYXRlICkge1xuICAgICAgICAgICAgaWYgKCBkYXRlID09PSB0cnVlIHx8ICQuaXNBcnJheSggZGF0ZSApIHx8IF8uaXNEYXRlKCBkYXRlICkgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGVuZGFyLmNyZWF0ZSggZGF0ZSApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZGF0ZVxuICAgICAgICB9XG5cbiAgICAvLyBDcmVhdGUgb2JqZWN0cyBpZiBwb3NzaWJsZS5cbiAgICBpZiAoICFfLmlzSW50ZWdlciggZnJvbSApICkge1xuICAgICAgICBmcm9tID0gY3JlYXRlRGF0ZSggZnJvbSApXG4gICAgfVxuICAgIGlmICggIV8uaXNJbnRlZ2VyKCB0byApICkge1xuICAgICAgICB0byA9IGNyZWF0ZURhdGUoIHRvIClcbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgcmVsYXRpdmUgZGF0ZXMuXG4gICAgaWYgKCBfLmlzSW50ZWdlciggZnJvbSApICYmICQuaXNQbGFpbk9iamVjdCggdG8gKSApIHtcbiAgICAgICAgZnJvbSA9IFsgdG8ueWVhciwgdG8ubW9udGgsIHRvLmRhdGUgKyBmcm9tIF07XG4gICAgfVxuICAgIGVsc2UgaWYgKCBfLmlzSW50ZWdlciggdG8gKSAmJiAkLmlzUGxhaW5PYmplY3QoIGZyb20gKSApIHtcbiAgICAgICAgdG8gPSBbIGZyb20ueWVhciwgZnJvbS5tb250aCwgZnJvbS5kYXRlICsgdG8gXTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBmcm9tOiBjcmVhdGVEYXRlKCBmcm9tICksXG4gICAgICAgIHRvOiBjcmVhdGVEYXRlKCB0byApXG4gICAgfVxufSAvL0RhdGVQaWNrZXIucHJvdG90eXBlLmNyZWF0ZVJhbmdlXG5cblxuLyoqXG4gKiBDaGVjayBpZiBhIGRhdGUgdW5pdCBmYWxscyB3aXRoaW4gYSBkYXRlIHJhbmdlIG9iamVjdC5cbiAqL1xuRGF0ZVBpY2tlci5wcm90b3R5cGUud2l0aGluUmFuZ2UgPSBmdW5jdGlvbiggcmFuZ2UsIGRhdGVVbml0ICkge1xuICAgIHJhbmdlID0gdGhpcy5jcmVhdGVSYW5nZShyYW5nZS5mcm9tLCByYW5nZS50bylcbiAgICByZXR1cm4gZGF0ZVVuaXQucGljayA+PSByYW5nZS5mcm9tLnBpY2sgJiYgZGF0ZVVuaXQucGljayA8PSByYW5nZS50by5waWNrXG59XG5cblxuLyoqXG4gKiBDaGVjayBpZiB0d28gZGF0ZSByYW5nZSBvYmplY3RzIG92ZXJsYXAuXG4gKi9cbkRhdGVQaWNrZXIucHJvdG90eXBlLm92ZXJsYXBSYW5nZXMgPSBmdW5jdGlvbiggb25lLCB0d28gKSB7XG5cbiAgICB2YXIgY2FsZW5kYXIgPSB0aGlzXG5cbiAgICAvLyBDb252ZXJ0IHRoZSByYW5nZXMgaW50byBjb21wYXJhYmxlIGRhdGVzLlxuICAgIG9uZSA9IGNhbGVuZGFyLmNyZWF0ZVJhbmdlKCBvbmUuZnJvbSwgb25lLnRvIClcbiAgICB0d28gPSBjYWxlbmRhci5jcmVhdGVSYW5nZSggdHdvLmZyb20sIHR3by50byApXG5cbiAgICByZXR1cm4gY2FsZW5kYXIud2l0aGluUmFuZ2UoIG9uZSwgdHdvLmZyb20gKSB8fCBjYWxlbmRhci53aXRoaW5SYW5nZSggb25lLCB0d28udG8gKSB8fFxuICAgICAgICBjYWxlbmRhci53aXRoaW5SYW5nZSggdHdvLCBvbmUuZnJvbSApIHx8IGNhbGVuZGFyLndpdGhpblJhbmdlKCB0d28sIG9uZS50byApXG59XG5cblxuLyoqXG4gKiBHZXQgdGhlIGRhdGUgdG9kYXkuXG4gKi9cbkRhdGVQaWNrZXIucHJvdG90eXBlLm5vdyA9IGZ1bmN0aW9uKCB0eXBlLCB2YWx1ZSwgb3B0aW9ucyApIHtcbiAgICB2YWx1ZSA9IG5ldyBEYXRlKClcbiAgICBpZiAoIG9wdGlvbnMgJiYgb3B0aW9ucy5yZWwgKSB7XG4gICAgICAgIHZhbHVlLnNldERhdGUoIHZhbHVlLmdldERhdGUoKSArIG9wdGlvbnMucmVsIClcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMubm9ybWFsaXplKCB2YWx1ZSwgb3B0aW9ucyApXG59XG5cblxuLyoqXG4gKiBOYXZpZ2F0ZSB0byBuZXh0L3ByZXYgbW9udGguXG4gKi9cbkRhdGVQaWNrZXIucHJvdG90eXBlLm5hdmlnYXRlID0gZnVuY3Rpb24oIHR5cGUsIHZhbHVlLCBvcHRpb25zICkge1xuXG4gICAgdmFyIHRhcmdldERhdGVPYmplY3QsXG4gICAgICAgIHRhcmdldFllYXIsXG4gICAgICAgIHRhcmdldE1vbnRoLFxuICAgICAgICB0YXJnZXREYXRlLFxuICAgICAgICBpc1RhcmdldEFycmF5ID0gJC5pc0FycmF5KCB2YWx1ZSApLFxuICAgICAgICBpc1RhcmdldE9iamVjdCA9ICQuaXNQbGFpbk9iamVjdCggdmFsdWUgKSxcbiAgICAgICAgdmlld3NldE9iamVjdCA9IHRoaXMuaXRlbS52aWV3LyosXG4gICAgICAgIHNhZmV0eSA9IDEwMCovXG5cblxuICAgIGlmICggaXNUYXJnZXRBcnJheSB8fCBpc1RhcmdldE9iamVjdCApIHtcblxuICAgICAgICBpZiAoIGlzVGFyZ2V0T2JqZWN0ICkge1xuICAgICAgICAgICAgdGFyZ2V0WWVhciA9IHZhbHVlLnllYXJcbiAgICAgICAgICAgIHRhcmdldE1vbnRoID0gdmFsdWUubW9udGhcbiAgICAgICAgICAgIHRhcmdldERhdGUgPSB2YWx1ZS5kYXRlXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0YXJnZXRZZWFyID0gK3ZhbHVlWzBdXG4gICAgICAgICAgICB0YXJnZXRNb250aCA9ICt2YWx1ZVsxXVxuICAgICAgICAgICAgdGFyZ2V0RGF0ZSA9ICt2YWx1ZVsyXVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gSWYgd2XigJlyZSBuYXZpZ2F0aW5nIG1vbnRocyBidXQgdGhlIHZpZXcgaXMgaW4gYSBkaWZmZXJlbnRcbiAgICAgICAgLy8gbW9udGgsIG5hdmlnYXRlIHRvIHRoZSB2aWV34oCZcyB5ZWFyIGFuZCBtb250aC5cbiAgICAgICAgaWYgKCBvcHRpb25zICYmIG9wdGlvbnMubmF2ICYmIHZpZXdzZXRPYmplY3QgJiYgdmlld3NldE9iamVjdC5tb250aCAhPT0gdGFyZ2V0TW9udGggKSB7XG4gICAgICAgICAgICB0YXJnZXRZZWFyID0gdmlld3NldE9iamVjdC55ZWFyXG4gICAgICAgICAgICB0YXJnZXRNb250aCA9IHZpZXdzZXRPYmplY3QubW9udGhcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZpZ3VyZSBvdXQgdGhlIGV4cGVjdGVkIHRhcmdldCB5ZWFyIGFuZCBtb250aC5cbiAgICAgICAgdGFyZ2V0RGF0ZU9iamVjdCA9IG5ldyBEYXRlKCB0YXJnZXRZZWFyLCB0YXJnZXRNb250aCArICggb3B0aW9ucyAmJiBvcHRpb25zLm5hdiA/IG9wdGlvbnMubmF2IDogMCApLCAxIClcbiAgICAgICAgdGFyZ2V0WWVhciA9IHRhcmdldERhdGVPYmplY3QuZ2V0RnVsbFllYXIoKVxuICAgICAgICB0YXJnZXRNb250aCA9IHRhcmdldERhdGVPYmplY3QuZ2V0TW9udGgoKVxuXG4gICAgICAgIC8vIElmIHRoZSBtb250aCB3ZeKAmXJlIGdvaW5nIHRvIGRvZXNu4oCZdCBoYXZlIGVub3VnaCBkYXlzLFxuICAgICAgICAvLyBrZWVwIGRlY3JlYXNpbmcgdGhlIGRhdGUgdW50aWwgd2UgcmVhY2ggdGhlIG1vbnRo4oCZcyBsYXN0IGRhdGUuXG4gICAgICAgIHdoaWxlICggLypzYWZldHkgJiYqLyBuZXcgRGF0ZSggdGFyZ2V0WWVhciwgdGFyZ2V0TW9udGgsIHRhcmdldERhdGUgKS5nZXRNb250aCgpICE9PSB0YXJnZXRNb250aCApIHtcbiAgICAgICAgICAgIHRhcmdldERhdGUgLT0gMVxuICAgICAgICAgICAgLypzYWZldHkgLT0gMVxuICAgICAgICAgICAgaWYgKCAhc2FmZXR5ICkge1xuICAgICAgICAgICAgICAgIHRocm93ICdGZWxsIGludG8gYW4gaW5maW5pdGUgbG9vcCB3aGlsZSBuYXZpZ2F0aW5nIHRvICcgKyBuZXcgRGF0ZSggdGFyZ2V0WWVhciwgdGFyZ2V0TW9udGgsIHRhcmdldERhdGUgKSArICcuJ1xuICAgICAgICAgICAgfSovXG4gICAgICAgIH1cblxuICAgICAgICB2YWx1ZSA9IFsgdGFyZ2V0WWVhciwgdGFyZ2V0TW9udGgsIHRhcmdldERhdGUgXVxuICAgIH1cblxuICAgIHJldHVybiB2YWx1ZVxufSAvL0RhdGVQaWNrZXIucHJvdG90eXBlLm5hdmlnYXRlXG5cblxuLyoqXG4gKiBOb3JtYWxpemUgYSBkYXRlIGJ5IHNldHRpbmcgdGhlIGhvdXJzIHRvIG1pZG5pZ2h0LlxuICovXG5EYXRlUGlja2VyLnByb3RvdHlwZS5ub3JtYWxpemUgPSBmdW5jdGlvbiggdmFsdWUvKiwgb3B0aW9ucyovICkge1xuICAgIHZhbHVlLnNldEhvdXJzKCAwLCAwLCAwLCAwIClcbiAgICByZXR1cm4gdmFsdWVcbn1cblxuXG4vKipcbiAqIE1lYXN1cmUgdGhlIHJhbmdlIG9mIGRhdGVzLlxuICovXG5EYXRlUGlja2VyLnByb3RvdHlwZS5tZWFzdXJlID0gZnVuY3Rpb24oIHR5cGUsIHZhbHVlLyosIG9wdGlvbnMqLyApIHtcblxuICAgIHZhciBjYWxlbmRhciA9IHRoaXNcblxuICAgIC8vIElmIGl04oCZcyBhbnl0aGluZyBmYWxzZS15LCByZW1vdmUgdGhlIGxpbWl0cy5cbiAgICBpZiAoICF2YWx1ZSApIHtcbiAgICAgICAgdmFsdWUgPSB0eXBlID09ICdtaW4nID8gLUluZmluaXR5IDogSW5maW5pdHlcbiAgICB9XG5cbiAgICAvLyBJZiBpdOKAmXMgYSBzdHJpbmcsIHBhcnNlIGl0LlxuICAgIGVsc2UgaWYgKCB0eXBlb2YgdmFsdWUgPT0gJ3N0cmluZycgKSB7XG4gICAgICAgIHZhbHVlID0gY2FsZW5kYXIucGFyc2UoIHR5cGUsIHZhbHVlIClcbiAgICB9XG5cbiAgICAvLyBJZiBpdCdzIGFuIGludGVnZXIsIGdldCBhIGRhdGUgcmVsYXRpdmUgdG8gdG9kYXkuXG4gICAgZWxzZSBpZiAoIF8uaXNJbnRlZ2VyKCB2YWx1ZSApICkge1xuICAgICAgICB2YWx1ZSA9IGNhbGVuZGFyLm5vdyggdHlwZSwgdmFsdWUsIHsgcmVsOiB2YWx1ZSB9IClcbiAgICB9XG5cbiAgICByZXR1cm4gdmFsdWVcbn0gLy8vRGF0ZVBpY2tlci5wcm90b3R5cGUubWVhc3VyZVxuXG5cbi8qKlxuICogQ3JlYXRlIGEgdmlld3NldCBvYmplY3QgYmFzZWQgb24gbmF2aWdhdGlvbi5cbiAqL1xuRGF0ZVBpY2tlci5wcm90b3R5cGUudmlld3NldCA9IGZ1bmN0aW9uKCB0eXBlLCBkYXRlT2JqZWN0LyosIG9wdGlvbnMqLyApIHtcbiAgICByZXR1cm4gdGhpcy5jcmVhdGUoWyBkYXRlT2JqZWN0LnllYXIsIGRhdGVPYmplY3QubW9udGgsIDEgXSlcbn1cblxuXG4vKipcbiAqIFZhbGlkYXRlIGEgZGF0ZSBhcyBlbmFibGVkIGFuZCBzaGlmdCBpZiBuZWVkZWQuXG4gKi9cbkRhdGVQaWNrZXIucHJvdG90eXBlLnZhbGlkYXRlID0gZnVuY3Rpb24oIHR5cGUsIGRhdGVPYmplY3QsIG9wdGlvbnMgKSB7XG5cbiAgICB2YXIgY2FsZW5kYXIgPSB0aGlzLFxuXG4gICAgICAgIC8vIEtlZXAgYSByZWZlcmVuY2UgdG8gdGhlIG9yaWdpbmFsIGRhdGUuXG4gICAgICAgIG9yaWdpbmFsRGF0ZU9iamVjdCA9IGRhdGVPYmplY3QsXG5cbiAgICAgICAgLy8gTWFrZSBzdXJlIHdlIGhhdmUgYW4gaW50ZXJ2YWwuXG4gICAgICAgIGludGVydmFsID0gb3B0aW9ucyAmJiBvcHRpb25zLmludGVydmFsID8gb3B0aW9ucy5pbnRlcnZhbCA6IDEsXG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGNhbGVuZGFyIGVuYWJsZWQgZGF0ZXMgYXJlIGludmVydGVkLlxuICAgICAgICBpc0ZsaXBwZWRCYXNlID0gY2FsZW5kYXIuaXRlbS5lbmFibGUgPT09IC0xLFxuXG4gICAgICAgIC8vIENoZWNrIGlmIHdlIGhhdmUgYW55IGVuYWJsZWQgZGF0ZXMgYWZ0ZXIvYmVmb3JlIG5vdy5cbiAgICAgICAgaGFzRW5hYmxlZEJlZm9yZVRhcmdldCwgaGFzRW5hYmxlZEFmdGVyVGFyZ2V0LFxuXG4gICAgICAgIC8vIFRoZSBtaW4gJiBtYXggbGltaXRzLlxuICAgICAgICBtaW5MaW1pdE9iamVjdCA9IGNhbGVuZGFyLml0ZW0ubWluLFxuICAgICAgICBtYXhMaW1pdE9iamVjdCA9IGNhbGVuZGFyLml0ZW0ubWF4LFxuXG4gICAgICAgIC8vIENoZWNrIGlmIHdl4oCZdmUgcmVhY2hlZCB0aGUgbGltaXQgZHVyaW5nIHNoaWZ0aW5nLlxuICAgICAgICByZWFjaGVkTWluLCByZWFjaGVkTWF4LFxuXG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSBjYWxlbmRhciBpcyBpbnZlcnRlZCBhbmQgYXQgbGVhc3Qgb25lIHdlZWtkYXkgaXMgZW5hYmxlZC5cbiAgICAgICAgaGFzRW5hYmxlZFdlZWtkYXlzID0gaXNGbGlwcGVkQmFzZSAmJiBjYWxlbmRhci5pdGVtLmRpc2FibGUuZmlsdGVyKCBmdW5jdGlvbiggdmFsdWUgKSB7XG5cbiAgICAgICAgICAgIC8vIElmIHRoZXJl4oCZcyBhIGRhdGUsIGNoZWNrIHdoZXJlIGl0IGlzIHJlbGF0aXZlIHRvIHRoZSB0YXJnZXQuXG4gICAgICAgICAgICBpZiAoICQuaXNBcnJheSggdmFsdWUgKSApIHtcbiAgICAgICAgICAgICAgICB2YXIgZGF0ZVRpbWUgPSBjYWxlbmRhci5jcmVhdGUoIHZhbHVlICkucGlja1xuICAgICAgICAgICAgICAgIGlmICggZGF0ZVRpbWUgPCBkYXRlT2JqZWN0LnBpY2sgKSBoYXNFbmFibGVkQmVmb3JlVGFyZ2V0ID0gdHJ1ZVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCBkYXRlVGltZSA+IGRhdGVPYmplY3QucGljayApIGhhc0VuYWJsZWRBZnRlclRhcmdldCA9IHRydWVcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gUmV0dXJuIG9ubHkgaW50ZWdlcnMgZm9yIGVuYWJsZWQgd2Vla2RheXMuXG4gICAgICAgICAgICByZXR1cm4gXy5pc0ludGVnZXIoIHZhbHVlIClcbiAgICAgICAgfSkubGVuZ3RoLyosXG5cbiAgICAgICAgc2FmZXR5ID0gMTAwKi9cblxuXG5cbiAgICAvLyBDYXNlcyB0byB2YWxpZGF0ZSBmb3I6XG4gICAgLy8gWzFdIE5vdCBpbnZlcnRlZCBhbmQgZGF0ZSBkaXNhYmxlZC5cbiAgICAvLyBbMl0gSW52ZXJ0ZWQgYW5kIHNvbWUgZGF0ZXMgZW5hYmxlZC5cbiAgICAvLyBbM10gTm90IGludmVydGVkIGFuZCBvdXQgb2YgcmFuZ2UuXG4gICAgLy9cbiAgICAvLyBDYXNlcyB0byAqKm5vdCoqIHZhbGlkYXRlIGZvcjpcbiAgICAvLyDigKIgTmF2aWdhdGluZyBtb250aHMuXG4gICAgLy8g4oCiIE5vdCBpbnZlcnRlZCBhbmQgZGF0ZSBlbmFibGVkLlxuICAgIC8vIOKAoiBJbnZlcnRlZCBhbmQgYWxsIGRhdGVzIGRpc2FibGVkLlxuICAgIC8vIOKAoiAuLmFuZCBhbnl0aGluZyBlbHNlLlxuICAgIGlmICggIW9wdGlvbnMgfHwgIW9wdGlvbnMubmF2ICkgaWYgKFxuICAgICAgICAvKiAxICovICggIWlzRmxpcHBlZEJhc2UgJiYgY2FsZW5kYXIuZGlzYWJsZWQoIGRhdGVPYmplY3QgKSApIHx8XG4gICAgICAgIC8qIDIgKi8gKCBpc0ZsaXBwZWRCYXNlICYmIGNhbGVuZGFyLmRpc2FibGVkKCBkYXRlT2JqZWN0ICkgJiYgKCBoYXNFbmFibGVkV2Vla2RheXMgfHwgaGFzRW5hYmxlZEJlZm9yZVRhcmdldCB8fCBoYXNFbmFibGVkQWZ0ZXJUYXJnZXQgKSApIHx8XG4gICAgICAgIC8qIDMgKi8gKCAhaXNGbGlwcGVkQmFzZSAmJiAoZGF0ZU9iamVjdC5waWNrIDw9IG1pbkxpbWl0T2JqZWN0LnBpY2sgfHwgZGF0ZU9iamVjdC5waWNrID49IG1heExpbWl0T2JqZWN0LnBpY2spIClcbiAgICApIHtcblxuXG4gICAgICAgIC8vIFdoZW4gaW52ZXJ0ZWQsIGZsaXAgdGhlIGRpcmVjdGlvbiBpZiB0aGVyZSBhcmVu4oCZdCBhbnkgZW5hYmxlZCB3ZWVrZGF5c1xuICAgICAgICAvLyBhbmQgdGhlcmUgYXJlIG5vIGVuYWJsZWQgZGF0ZXMgaW4gdGhlIGRpcmVjdGlvbiBvZiB0aGUgaW50ZXJ2YWwuXG4gICAgICAgIGlmICggaXNGbGlwcGVkQmFzZSAmJiAhaGFzRW5hYmxlZFdlZWtkYXlzICYmICggKCAhaGFzRW5hYmxlZEFmdGVyVGFyZ2V0ICYmIGludGVydmFsID4gMCApIHx8ICggIWhhc0VuYWJsZWRCZWZvcmVUYXJnZXQgJiYgaW50ZXJ2YWwgPCAwICkgKSApIHtcbiAgICAgICAgICAgIGludGVydmFsICo9IC0xXG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIEtlZXAgbG9vcGluZyB1bnRpbCB3ZSByZWFjaCBhbiBlbmFibGVkIGRhdGUuXG4gICAgICAgIHdoaWxlICggLypzYWZldHkgJiYqLyBjYWxlbmRhci5kaXNhYmxlZCggZGF0ZU9iamVjdCApICkge1xuXG4gICAgICAgICAgICAvKnNhZmV0eSAtPSAxXG4gICAgICAgICAgICBpZiAoICFzYWZldHkgKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgJ0ZlbGwgaW50byBhbiBpbmZpbml0ZSBsb29wIHdoaWxlIHZhbGlkYXRpbmcgJyArIGRhdGVPYmplY3Qub2JqICsgJy4nXG4gICAgICAgICAgICB9Ki9cblxuXG4gICAgICAgICAgICAvLyBJZiB3ZeKAmXZlIGxvb3BlZCBpbnRvIHRoZSBuZXh0L3ByZXYgbW9udGggd2l0aCBhIGxhcmdlIGludGVydmFsLCByZXR1cm4gdG8gdGhlIG9yaWdpbmFsIGRhdGUgYW5kIGZsYXR0ZW4gdGhlIGludGVydmFsLlxuICAgICAgICAgICAgaWYgKCBNYXRoLmFicyggaW50ZXJ2YWwgKSA+IDEgJiYgKCBkYXRlT2JqZWN0Lm1vbnRoIDwgb3JpZ2luYWxEYXRlT2JqZWN0Lm1vbnRoIHx8IGRhdGVPYmplY3QubW9udGggPiBvcmlnaW5hbERhdGVPYmplY3QubW9udGggKSApIHtcbiAgICAgICAgICAgICAgICBkYXRlT2JqZWN0ID0gb3JpZ2luYWxEYXRlT2JqZWN0XG4gICAgICAgICAgICAgICAgaW50ZXJ2YWwgPSBpbnRlcnZhbCA+IDAgPyAxIDogLTFcbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAvLyBJZiB3ZeKAmXZlIHJlYWNoZWQgdGhlIG1pbi9tYXggbGltaXQsIHJldmVyc2UgdGhlIGRpcmVjdGlvbiwgZmxhdHRlbiB0aGUgaW50ZXJ2YWwgYW5kIHNldCBpdCB0byB0aGUgbGltaXQuXG4gICAgICAgICAgICBpZiAoIGRhdGVPYmplY3QucGljayA8PSBtaW5MaW1pdE9iamVjdC5waWNrICkge1xuICAgICAgICAgICAgICAgIHJlYWNoZWRNaW4gPSB0cnVlXG4gICAgICAgICAgICAgICAgaW50ZXJ2YWwgPSAxXG4gICAgICAgICAgICAgICAgZGF0ZU9iamVjdCA9IGNhbGVuZGFyLmNyZWF0ZShbXG4gICAgICAgICAgICAgICAgICAgIG1pbkxpbWl0T2JqZWN0LnllYXIsXG4gICAgICAgICAgICAgICAgICAgIG1pbkxpbWl0T2JqZWN0Lm1vbnRoLFxuICAgICAgICAgICAgICAgICAgICBtaW5MaW1pdE9iamVjdC5kYXRlICsgKGRhdGVPYmplY3QucGljayA9PT0gbWluTGltaXRPYmplY3QucGljayA/IDAgOiAtMSlcbiAgICAgICAgICAgICAgICBdKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIGRhdGVPYmplY3QucGljayA+PSBtYXhMaW1pdE9iamVjdC5waWNrICkge1xuICAgICAgICAgICAgICAgIHJlYWNoZWRNYXggPSB0cnVlXG4gICAgICAgICAgICAgICAgaW50ZXJ2YWwgPSAtMVxuICAgICAgICAgICAgICAgIGRhdGVPYmplY3QgPSBjYWxlbmRhci5jcmVhdGUoW1xuICAgICAgICAgICAgICAgICAgICBtYXhMaW1pdE9iamVjdC55ZWFyLFxuICAgICAgICAgICAgICAgICAgICBtYXhMaW1pdE9iamVjdC5tb250aCxcbiAgICAgICAgICAgICAgICAgICAgbWF4TGltaXRPYmplY3QuZGF0ZSArIChkYXRlT2JqZWN0LnBpY2sgPT09IG1heExpbWl0T2JqZWN0LnBpY2sgPyAwIDogMSlcbiAgICAgICAgICAgICAgICBdKVxuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgIC8vIElmIHdl4oCZdmUgcmVhY2hlZCBib3RoIGxpbWl0cywganVzdCBicmVhayBvdXQgb2YgdGhlIGxvb3AuXG4gICAgICAgICAgICBpZiAoIHJlYWNoZWRNaW4gJiYgcmVhY2hlZE1heCApIHtcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgIC8vIEZpbmFsbHksIGNyZWF0ZSB0aGUgc2hpZnRlZCBkYXRlIHVzaW5nIHRoZSBpbnRlcnZhbCBhbmQga2VlcCBsb29waW5nLlxuICAgICAgICAgICAgZGF0ZU9iamVjdCA9IGNhbGVuZGFyLmNyZWF0ZShbIGRhdGVPYmplY3QueWVhciwgZGF0ZU9iamVjdC5tb250aCwgZGF0ZU9iamVjdC5kYXRlICsgaW50ZXJ2YWwgXSlcbiAgICAgICAgfVxuXG4gICAgfSAvL2VuZGlmXG5cblxuICAgIC8vIFJldHVybiB0aGUgZGF0ZSBvYmplY3Qgc2V0dGxlZCBvbi5cbiAgICByZXR1cm4gZGF0ZU9iamVjdFxufSAvL0RhdGVQaWNrZXIucHJvdG90eXBlLnZhbGlkYXRlXG5cblxuLyoqXG4gKiBDaGVjayBpZiBhIGRhdGUgaXMgZGlzYWJsZWQuXG4gKi9cbkRhdGVQaWNrZXIucHJvdG90eXBlLmRpc2FibGVkID0gZnVuY3Rpb24oIGRhdGVUb1ZlcmlmeSApIHtcblxuICAgIHZhclxuICAgICAgICBjYWxlbmRhciA9IHRoaXMsXG5cbiAgICAgICAgLy8gRmlsdGVyIHRocm91Z2ggdGhlIGRpc2FibGVkIGRhdGVzIHRvIGNoZWNrIGlmIHRoaXMgaXMgb25lLlxuICAgICAgICBpc0Rpc2FibGVkTWF0Y2ggPSBjYWxlbmRhci5pdGVtLmRpc2FibGUuZmlsdGVyKCBmdW5jdGlvbiggZGF0ZVRvRGlzYWJsZSApIHtcblxuICAgICAgICAgICAgLy8gSWYgdGhlIGRhdGUgaXMgYSBudW1iZXIsIG1hdGNoIHRoZSB3ZWVrZGF5IHdpdGggMGluZGV4IGFuZCBgZmlyc3REYXlgIGNoZWNrLlxuICAgICAgICAgICAgaWYgKCBfLmlzSW50ZWdlciggZGF0ZVRvRGlzYWJsZSApICkge1xuICAgICAgICAgICAgICAgIHJldHVybiBkYXRlVG9WZXJpZnkuZGF5ID09PSAoIGNhbGVuZGFyLnNldHRpbmdzLmZpcnN0RGF5ID8gZGF0ZVRvRGlzYWJsZSA6IGRhdGVUb0Rpc2FibGUgLSAxICkgJSA3XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIElmIGl04oCZcyBhbiBhcnJheSBvciBhIG5hdGl2ZSBKUyBkYXRlLCBjcmVhdGUgYW5kIG1hdGNoIHRoZSBleGFjdCBkYXRlLlxuICAgICAgICAgICAgaWYgKCAkLmlzQXJyYXkoIGRhdGVUb0Rpc2FibGUgKSB8fCBfLmlzRGF0ZSggZGF0ZVRvRGlzYWJsZSApICkge1xuICAgICAgICAgICAgICAgIHJldHVybiBkYXRlVG9WZXJpZnkucGljayA9PT0gY2FsZW5kYXIuY3JlYXRlKCBkYXRlVG9EaXNhYmxlICkucGlja1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBJZiBpdOKAmXMgYW4gb2JqZWN0LCBtYXRjaCBhIGRhdGUgd2l0aGluIHRoZSDigJxmcm9t4oCdIGFuZCDigJx0b+KAnSByYW5nZS5cbiAgICAgICAgICAgIGlmICggJC5pc1BsYWluT2JqZWN0KCBkYXRlVG9EaXNhYmxlICkgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGVuZGFyLndpdGhpblJhbmdlKCBkYXRlVG9EaXNhYmxlLCBkYXRlVG9WZXJpZnkgKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuXG4gICAgLy8gSWYgdGhpcyBkYXRlIG1hdGNoZXMgYSBkaXNhYmxlZCBkYXRlLCBjb25maXJtIGl04oCZcyBub3QgaW52ZXJ0ZWQuXG4gICAgaXNEaXNhYmxlZE1hdGNoID0gaXNEaXNhYmxlZE1hdGNoLmxlbmd0aCAmJiAhaXNEaXNhYmxlZE1hdGNoLmZpbHRlcihmdW5jdGlvbiggZGF0ZVRvRGlzYWJsZSApIHtcbiAgICAgICAgcmV0dXJuICQuaXNBcnJheSggZGF0ZVRvRGlzYWJsZSApICYmIGRhdGVUb0Rpc2FibGVbM10gPT0gJ2ludmVydGVkJyB8fFxuICAgICAgICAgICAgJC5pc1BsYWluT2JqZWN0KCBkYXRlVG9EaXNhYmxlICkgJiYgZGF0ZVRvRGlzYWJsZS5pbnZlcnRlZFxuICAgIH0pLmxlbmd0aFxuXG4gICAgLy8gQ2hlY2sgdGhlIGNhbGVuZGFyIOKAnGVuYWJsZWTigJ0gZmxhZyBhbmQgcmVzcGVjdGl2ZWx5IGZsaXAgdGhlXG4gICAgLy8gZGlzYWJsZWQgc3RhdGUuIFRoZW4gYWxzbyBjaGVjayBpZiBpdOKAmXMgYmV5b25kIHRoZSBtaW4vbWF4IGxpbWl0cy5cbiAgICByZXR1cm4gY2FsZW5kYXIuaXRlbS5lbmFibGUgPT09IC0xID8gIWlzRGlzYWJsZWRNYXRjaCA6IGlzRGlzYWJsZWRNYXRjaCB8fFxuICAgICAgICBkYXRlVG9WZXJpZnkucGljayA8IGNhbGVuZGFyLml0ZW0ubWluLnBpY2sgfHxcbiAgICAgICAgZGF0ZVRvVmVyaWZ5LnBpY2sgPiBjYWxlbmRhci5pdGVtLm1heC5waWNrXG5cbn0gLy9EYXRlUGlja2VyLnByb3RvdHlwZS5kaXNhYmxlZFxuXG5cbi8qKlxuICogUGFyc2UgYSBzdHJpbmcgaW50byBhIHVzYWJsZSB0eXBlLlxuICovXG5EYXRlUGlja2VyLnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uKCB0eXBlLCB2YWx1ZSwgb3B0aW9ucyApIHtcblxuICAgIHZhciBjYWxlbmRhciA9IHRoaXMsXG4gICAgICAgIHBhcnNpbmdPYmplY3QgPSB7fVxuXG4gICAgLy8gSWYgaXTigJlzIGFscmVhZHkgcGFyc2VkLCB3ZeKAmXJlIGdvb2QuXG4gICAgaWYgKCAhdmFsdWUgfHwgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnICkge1xuICAgICAgICByZXR1cm4gdmFsdWVcbiAgICB9XG5cbiAgICAvLyBXZSBuZWVkIGEgYC5mb3JtYXRgIHRvIHBhcnNlIHRoZSB2YWx1ZSB3aXRoLlxuICAgIGlmICggISggb3B0aW9ucyAmJiBvcHRpb25zLmZvcm1hdCApICkge1xuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fVxuICAgICAgICBvcHRpb25zLmZvcm1hdCA9IGNhbGVuZGFyLnNldHRpbmdzLmZvcm1hdFxuICAgIH1cblxuICAgIC8vIENvbnZlcnQgdGhlIGZvcm1hdCBpbnRvIGFuIGFycmF5IGFuZCB0aGVuIG1hcCB0aHJvdWdoIGl0LlxuICAgIGNhbGVuZGFyLmZvcm1hdHMudG9BcnJheSggb3B0aW9ucy5mb3JtYXQgKS5tYXAoIGZ1bmN0aW9uKCBsYWJlbCApIHtcblxuICAgICAgICB2YXJcbiAgICAgICAgICAgIC8vIEdyYWIgdGhlIGZvcm1hdHRpbmcgbGFiZWwuXG4gICAgICAgICAgICBmb3JtYXR0aW5nTGFiZWwgPSBjYWxlbmRhci5mb3JtYXRzWyBsYWJlbCBdLFxuXG4gICAgICAgICAgICAvLyBUaGUgZm9ybWF0IGxlbmd0aCBpcyBmcm9tIHRoZSBmb3JtYXR0aW5nIGxhYmVsIGZ1bmN0aW9uIG9yIHRoZVxuICAgICAgICAgICAgLy8gbGFiZWwgbGVuZ3RoIHdpdGhvdXQgdGhlIGVzY2FwaW5nIGV4Y2xhbWF0aW9uICghKSBtYXJrLlxuICAgICAgICAgICAgZm9ybWF0TGVuZ3RoID0gZm9ybWF0dGluZ0xhYmVsID8gXy50cmlnZ2VyKCBmb3JtYXR0aW5nTGFiZWwsIGNhbGVuZGFyLCBbIHZhbHVlLCBwYXJzaW5nT2JqZWN0IF0gKSA6IGxhYmVsLnJlcGxhY2UoIC9eIS8sICcnICkubGVuZ3RoXG5cbiAgICAgICAgLy8gSWYgdGhlcmUncyBhIGZvcm1hdCBsYWJlbCwgc3BsaXQgdGhlIHZhbHVlIHVwIHRvIHRoZSBmb3JtYXQgbGVuZ3RoLlxuICAgICAgICAvLyBUaGVuIGFkZCBpdCB0byB0aGUgcGFyc2luZyBvYmplY3Qgd2l0aCBhcHByb3ByaWF0ZSBsYWJlbC5cbiAgICAgICAgaWYgKCBmb3JtYXR0aW5nTGFiZWwgKSB7XG4gICAgICAgICAgICBwYXJzaW5nT2JqZWN0WyBsYWJlbCBdID0gdmFsdWUuc3Vic3RyKCAwLCBmb3JtYXRMZW5ndGggKVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gVXBkYXRlIHRoZSB2YWx1ZSBhcyB0aGUgc3Vic3RyaW5nIGZyb20gZm9ybWF0IGxlbmd0aCB0byBlbmQuXG4gICAgICAgIHZhbHVlID0gdmFsdWUuc3Vic3RyKCBmb3JtYXRMZW5ndGggKVxuICAgIH0pXG5cbiAgICAvLyBDb21wZW5zYXRlIGZvciBtb250aCAwaW5kZXguXG4gICAgcmV0dXJuIFtcbiAgICAgICAgcGFyc2luZ09iamVjdC55eXl5IHx8IHBhcnNpbmdPYmplY3QueXksXG4gICAgICAgICsoIHBhcnNpbmdPYmplY3QubW0gfHwgcGFyc2luZ09iamVjdC5tICkgLSAxLFxuICAgICAgICBwYXJzaW5nT2JqZWN0LmRkIHx8IHBhcnNpbmdPYmplY3QuZFxuICAgIF1cbn0gLy9EYXRlUGlja2VyLnByb3RvdHlwZS5wYXJzZVxuXG5cbi8qKlxuICogVmFyaW91cyBmb3JtYXRzIHRvIGRpc3BsYXkgdGhlIG9iamVjdCBpbi5cbiAqL1xuRGF0ZVBpY2tlci5wcm90b3R5cGUuZm9ybWF0cyA9IChmdW5jdGlvbigpIHtcblxuICAgIC8vIFJldHVybiB0aGUgbGVuZ3RoIG9mIHRoZSBmaXJzdCB3b3JkIGluIGEgY29sbGVjdGlvbi5cbiAgICBmdW5jdGlvbiBnZXRXb3JkTGVuZ3RoRnJvbUNvbGxlY3Rpb24oIHN0cmluZywgY29sbGVjdGlvbiwgZGF0ZU9iamVjdCApIHtcblxuICAgICAgICAvLyBHcmFiIHRoZSBmaXJzdCB3b3JkIGZyb20gdGhlIHN0cmluZy5cbiAgICAgICAgdmFyIHdvcmQgPSBzdHJpbmcubWF0Y2goIC9cXHcrLyApWyAwIF1cblxuICAgICAgICAvLyBJZiB0aGVyZSdzIG5vIG1vbnRoIGluZGV4LCBhZGQgaXQgdG8gdGhlIGRhdGUgb2JqZWN0XG4gICAgICAgIGlmICggIWRhdGVPYmplY3QubW0gJiYgIWRhdGVPYmplY3QubSApIHtcbiAgICAgICAgICAgIGRhdGVPYmplY3QubSA9IGNvbGxlY3Rpb24uaW5kZXhPZiggd29yZCApICsgMVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gUmV0dXJuIHRoZSBsZW5ndGggb2YgdGhlIHdvcmQuXG4gICAgICAgIHJldHVybiB3b3JkLmxlbmd0aFxuICAgIH1cblxuICAgIC8vIEdldCB0aGUgbGVuZ3RoIG9mIHRoZSBmaXJzdCB3b3JkIGluIGEgc3RyaW5nLlxuICAgIGZ1bmN0aW9uIGdldEZpcnN0V29yZExlbmd0aCggc3RyaW5nICkge1xuICAgICAgICByZXR1cm4gc3RyaW5nLm1hdGNoKCAvXFx3Ky8gKVsgMCBdLmxlbmd0aFxuICAgIH1cblxuICAgIHJldHVybiB7XG5cbiAgICAgICAgZDogZnVuY3Rpb24oIHN0cmluZywgZGF0ZU9iamVjdCApIHtcblxuICAgICAgICAgICAgLy8gSWYgdGhlcmUncyBzdHJpbmcsIHRoZW4gZ2V0IHRoZSBkaWdpdHMgbGVuZ3RoLlxuICAgICAgICAgICAgLy8gT3RoZXJ3aXNlIHJldHVybiB0aGUgc2VsZWN0ZWQgZGF0ZS5cbiAgICAgICAgICAgIHJldHVybiBzdHJpbmcgPyBfLmRpZ2l0cyggc3RyaW5nICkgOiBkYXRlT2JqZWN0LmRhdGVcbiAgICAgICAgfSxcbiAgICAgICAgZGQ6IGZ1bmN0aW9uKCBzdHJpbmcsIGRhdGVPYmplY3QgKSB7XG5cbiAgICAgICAgICAgIC8vIElmIHRoZXJlJ3MgYSBzdHJpbmcsIHRoZW4gdGhlIGxlbmd0aCBpcyBhbHdheXMgMi5cbiAgICAgICAgICAgIC8vIE90aGVyd2lzZSByZXR1cm4gdGhlIHNlbGVjdGVkIGRhdGUgd2l0aCBhIGxlYWRpbmcgemVyby5cbiAgICAgICAgICAgIHJldHVybiBzdHJpbmcgPyAyIDogXy5sZWFkKCBkYXRlT2JqZWN0LmRhdGUgKVxuICAgICAgICB9LFxuICAgICAgICBkZGQ6IGZ1bmN0aW9uKCBzdHJpbmcsIGRhdGVPYmplY3QgKSB7XG5cbiAgICAgICAgICAgIC8vIElmIHRoZXJlJ3MgYSBzdHJpbmcsIHRoZW4gZ2V0IHRoZSBsZW5ndGggb2YgdGhlIGZpcnN0IHdvcmQuXG4gICAgICAgICAgICAvLyBPdGhlcndpc2UgcmV0dXJuIHRoZSBzaG9ydCBzZWxlY3RlZCB3ZWVrZGF5LlxuICAgICAgICAgICAgcmV0dXJuIHN0cmluZyA/IGdldEZpcnN0V29yZExlbmd0aCggc3RyaW5nICkgOiB0aGlzLnNldHRpbmdzLndlZWtkYXlzU2hvcnRbIGRhdGVPYmplY3QuZGF5IF1cbiAgICAgICAgfSxcbiAgICAgICAgZGRkZDogZnVuY3Rpb24oIHN0cmluZywgZGF0ZU9iamVjdCApIHtcblxuICAgICAgICAgICAgLy8gSWYgdGhlcmUncyBhIHN0cmluZywgdGhlbiBnZXQgdGhlIGxlbmd0aCBvZiB0aGUgZmlyc3Qgd29yZC5cbiAgICAgICAgICAgIC8vIE90aGVyd2lzZSByZXR1cm4gdGhlIGZ1bGwgc2VsZWN0ZWQgd2Vla2RheS5cbiAgICAgICAgICAgIHJldHVybiBzdHJpbmcgPyBnZXRGaXJzdFdvcmRMZW5ndGgoIHN0cmluZyApIDogdGhpcy5zZXR0aW5ncy53ZWVrZGF5c0Z1bGxbIGRhdGVPYmplY3QuZGF5IF1cbiAgICAgICAgfSxcbiAgICAgICAgbTogZnVuY3Rpb24oIHN0cmluZywgZGF0ZU9iamVjdCApIHtcblxuICAgICAgICAgICAgLy8gSWYgdGhlcmUncyBhIHN0cmluZywgdGhlbiBnZXQgdGhlIGxlbmd0aCBvZiB0aGUgZGlnaXRzXG4gICAgICAgICAgICAvLyBPdGhlcndpc2UgcmV0dXJuIHRoZSBzZWxlY3RlZCBtb250aCB3aXRoIDBpbmRleCBjb21wZW5zYXRpb24uXG4gICAgICAgICAgICByZXR1cm4gc3RyaW5nID8gXy5kaWdpdHMoIHN0cmluZyApIDogZGF0ZU9iamVjdC5tb250aCArIDFcbiAgICAgICAgfSxcbiAgICAgICAgbW06IGZ1bmN0aW9uKCBzdHJpbmcsIGRhdGVPYmplY3QgKSB7XG5cbiAgICAgICAgICAgIC8vIElmIHRoZXJlJ3MgYSBzdHJpbmcsIHRoZW4gdGhlIGxlbmd0aCBpcyBhbHdheXMgMi5cbiAgICAgICAgICAgIC8vIE90aGVyd2lzZSByZXR1cm4gdGhlIHNlbGVjdGVkIG1vbnRoIHdpdGggMGluZGV4IGFuZCBsZWFkaW5nIHplcm8uXG4gICAgICAgICAgICByZXR1cm4gc3RyaW5nID8gMiA6IF8ubGVhZCggZGF0ZU9iamVjdC5tb250aCArIDEgKVxuICAgICAgICB9LFxuICAgICAgICBtbW06IGZ1bmN0aW9uKCBzdHJpbmcsIGRhdGVPYmplY3QgKSB7XG5cbiAgICAgICAgICAgIHZhciBjb2xsZWN0aW9uID0gdGhpcy5zZXR0aW5ncy5tb250aHNTaG9ydFxuXG4gICAgICAgICAgICAvLyBJZiB0aGVyZSdzIGEgc3RyaW5nLCBnZXQgbGVuZ3RoIG9mIHRoZSByZWxldmFudCBtb250aCBmcm9tIHRoZSBzaG9ydFxuICAgICAgICAgICAgLy8gbW9udGhzIGNvbGxlY3Rpb24uIE90aGVyd2lzZSByZXR1cm4gdGhlIHNlbGVjdGVkIG1vbnRoIGZyb20gdGhhdCBjb2xsZWN0aW9uLlxuICAgICAgICAgICAgcmV0dXJuIHN0cmluZyA/IGdldFdvcmRMZW5ndGhGcm9tQ29sbGVjdGlvbiggc3RyaW5nLCBjb2xsZWN0aW9uLCBkYXRlT2JqZWN0ICkgOiBjb2xsZWN0aW9uWyBkYXRlT2JqZWN0Lm1vbnRoIF1cbiAgICAgICAgfSxcbiAgICAgICAgbW1tbTogZnVuY3Rpb24oIHN0cmluZywgZGF0ZU9iamVjdCApIHtcblxuICAgICAgICAgICAgdmFyIGNvbGxlY3Rpb24gPSB0aGlzLnNldHRpbmdzLm1vbnRoc0Z1bGxcblxuICAgICAgICAgICAgLy8gSWYgdGhlcmUncyBhIHN0cmluZywgZ2V0IGxlbmd0aCBvZiB0aGUgcmVsZXZhbnQgbW9udGggZnJvbSB0aGUgZnVsbFxuICAgICAgICAgICAgLy8gbW9udGhzIGNvbGxlY3Rpb24uIE90aGVyd2lzZSByZXR1cm4gdGhlIHNlbGVjdGVkIG1vbnRoIGZyb20gdGhhdCBjb2xsZWN0aW9uLlxuICAgICAgICAgICAgcmV0dXJuIHN0cmluZyA/IGdldFdvcmRMZW5ndGhGcm9tQ29sbGVjdGlvbiggc3RyaW5nLCBjb2xsZWN0aW9uLCBkYXRlT2JqZWN0ICkgOiBjb2xsZWN0aW9uWyBkYXRlT2JqZWN0Lm1vbnRoIF1cbiAgICAgICAgfSxcbiAgICAgICAgeXk6IGZ1bmN0aW9uKCBzdHJpbmcsIGRhdGVPYmplY3QgKSB7XG5cbiAgICAgICAgICAgIC8vIElmIHRoZXJlJ3MgYSBzdHJpbmcsIHRoZW4gdGhlIGxlbmd0aCBpcyBhbHdheXMgMi5cbiAgICAgICAgICAgIC8vIE90aGVyd2lzZSByZXR1cm4gdGhlIHNlbGVjdGVkIHllYXIgYnkgc2xpY2luZyBvdXQgdGhlIGZpcnN0IDIgZGlnaXRzLlxuICAgICAgICAgICAgcmV0dXJuIHN0cmluZyA/IDIgOiAoICcnICsgZGF0ZU9iamVjdC55ZWFyICkuc2xpY2UoIDIgKVxuICAgICAgICB9LFxuICAgICAgICB5eXl5OiBmdW5jdGlvbiggc3RyaW5nLCBkYXRlT2JqZWN0ICkge1xuXG4gICAgICAgICAgICAvLyBJZiB0aGVyZSdzIGEgc3RyaW5nLCB0aGVuIHRoZSBsZW5ndGggaXMgYWx3YXlzIDQuXG4gICAgICAgICAgICAvLyBPdGhlcndpc2UgcmV0dXJuIHRoZSBzZWxlY3RlZCB5ZWFyLlxuICAgICAgICAgICAgcmV0dXJuIHN0cmluZyA/IDQgOiBkYXRlT2JqZWN0LnllYXJcbiAgICAgICAgfSxcblxuICAgICAgICAvLyBDcmVhdGUgYW4gYXJyYXkgYnkgc3BsaXR0aW5nIHRoZSBmb3JtYXR0aW5nIHN0cmluZyBwYXNzZWQuXG4gICAgICAgIHRvQXJyYXk6IGZ1bmN0aW9uKCBmb3JtYXRTdHJpbmcgKSB7IHJldHVybiBmb3JtYXRTdHJpbmcuc3BsaXQoIC8oZHsxLDR9fG17MSw0fXx5ezR9fHl5fCEuKS9nICkgfSxcblxuICAgICAgICAvLyBGb3JtYXQgYW4gb2JqZWN0IGludG8gYSBzdHJpbmcgdXNpbmcgdGhlIGZvcm1hdHRpbmcgb3B0aW9ucy5cbiAgICAgICAgdG9TdHJpbmc6IGZ1bmN0aW9uICggZm9ybWF0U3RyaW5nLCBpdGVtT2JqZWN0ICkge1xuICAgICAgICAgICAgdmFyIGNhbGVuZGFyID0gdGhpc1xuICAgICAgICAgICAgcmV0dXJuIGNhbGVuZGFyLmZvcm1hdHMudG9BcnJheSggZm9ybWF0U3RyaW5nICkubWFwKCBmdW5jdGlvbiggbGFiZWwgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF8udHJpZ2dlciggY2FsZW5kYXIuZm9ybWF0c1sgbGFiZWwgXSwgY2FsZW5kYXIsIFsgMCwgaXRlbU9iamVjdCBdICkgfHwgbGFiZWwucmVwbGFjZSggL14hLywgJycgKVxuICAgICAgICAgICAgfSkuam9pbiggJycgKVxuICAgICAgICB9XG4gICAgfVxufSkoKSAvL0RhdGVQaWNrZXIucHJvdG90eXBlLmZvcm1hdHNcblxuXG5cblxuLyoqXG4gKiBDaGVjayBpZiB0d28gZGF0ZSB1bml0cyBhcmUgdGhlIGV4YWN0LlxuICovXG5EYXRlUGlja2VyLnByb3RvdHlwZS5pc0RhdGVFeGFjdCA9IGZ1bmN0aW9uKCBvbmUsIHR3byApIHtcblxuICAgIHZhciBjYWxlbmRhciA9IHRoaXNcblxuICAgIC8vIFdoZW4gd2XigJlyZSB3b3JraW5nIHdpdGggd2Vla2RheXMsIGRvIGEgZGlyZWN0IGNvbXBhcmlzb24uXG4gICAgaWYgKFxuICAgICAgICAoIF8uaXNJbnRlZ2VyKCBvbmUgKSAmJiBfLmlzSW50ZWdlciggdHdvICkgKSB8fFxuICAgICAgICAoIHR5cGVvZiBvbmUgPT0gJ2Jvb2xlYW4nICYmIHR5cGVvZiB0d28gPT0gJ2Jvb2xlYW4nIClcbiAgICAgKSB7XG4gICAgICAgIHJldHVybiBvbmUgPT09IHR3b1xuICAgIH1cblxuICAgIC8vIFdoZW4gd2XigJlyZSB3b3JraW5nIHdpdGggZGF0ZSByZXByZXNlbnRhdGlvbnMsIGNvbXBhcmUgdGhlIOKAnHBpY2vigJ0gdmFsdWUuXG4gICAgaWYgKFxuICAgICAgICAoIF8uaXNEYXRlKCBvbmUgKSB8fCAkLmlzQXJyYXkoIG9uZSApICkgJiZcbiAgICAgICAgKCBfLmlzRGF0ZSggdHdvICkgfHwgJC5pc0FycmF5KCB0d28gKSApXG4gICAgKSB7XG4gICAgICAgIHJldHVybiBjYWxlbmRhci5jcmVhdGUoIG9uZSApLnBpY2sgPT09IGNhbGVuZGFyLmNyZWF0ZSggdHdvICkucGlja1xuICAgIH1cblxuICAgIC8vIFdoZW4gd2XigJlyZSB3b3JraW5nIHdpdGggcmFuZ2Ugb2JqZWN0cywgY29tcGFyZSB0aGUg4oCcZnJvbeKAnSBhbmQg4oCcdG/igJ0uXG4gICAgaWYgKCAkLmlzUGxhaW5PYmplY3QoIG9uZSApICYmICQuaXNQbGFpbk9iamVjdCggdHdvICkgKSB7XG4gICAgICAgIHJldHVybiBjYWxlbmRhci5pc0RhdGVFeGFjdCggb25lLmZyb20sIHR3by5mcm9tICkgJiYgY2FsZW5kYXIuaXNEYXRlRXhhY3QoIG9uZS50bywgdHdvLnRvIClcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2Vcbn1cblxuXG4vKipcbiAqIENoZWNrIGlmIHR3byBkYXRlIHVuaXRzIG92ZXJsYXAuXG4gKi9cbkRhdGVQaWNrZXIucHJvdG90eXBlLmlzRGF0ZU92ZXJsYXAgPSBmdW5jdGlvbiggb25lLCB0d28gKSB7XG5cbiAgICB2YXIgY2FsZW5kYXIgPSB0aGlzLFxuICAgICAgICBmaXJzdERheSA9IGNhbGVuZGFyLnNldHRpbmdzLmZpcnN0RGF5ID8gMSA6IDBcblxuICAgIC8vIFdoZW4gd2XigJlyZSB3b3JraW5nIHdpdGggYSB3ZWVrZGF5IGluZGV4LCBjb21wYXJlIHRoZSBkYXlzLlxuICAgIGlmICggXy5pc0ludGVnZXIoIG9uZSApICYmICggXy5pc0RhdGUoIHR3byApIHx8ICQuaXNBcnJheSggdHdvICkgKSApIHtcbiAgICAgICAgb25lID0gb25lICUgNyArIGZpcnN0RGF5XG4gICAgICAgIHJldHVybiBvbmUgPT09IGNhbGVuZGFyLmNyZWF0ZSggdHdvICkuZGF5ICsgMVxuICAgIH1cbiAgICBpZiAoIF8uaXNJbnRlZ2VyKCB0d28gKSAmJiAoIF8uaXNEYXRlKCBvbmUgKSB8fCAkLmlzQXJyYXkoIG9uZSApICkgKSB7XG4gICAgICAgIHR3byA9IHR3byAlIDcgKyBmaXJzdERheVxuICAgICAgICByZXR1cm4gdHdvID09PSBjYWxlbmRhci5jcmVhdGUoIG9uZSApLmRheSArIDFcbiAgICB9XG5cbiAgICAvLyBXaGVuIHdl4oCZcmUgd29ya2luZyB3aXRoIHJhbmdlIG9iamVjdHMsIGNoZWNrIGlmIHRoZSByYW5nZXMgb3ZlcmxhcC5cbiAgICBpZiAoICQuaXNQbGFpbk9iamVjdCggb25lICkgJiYgJC5pc1BsYWluT2JqZWN0KCB0d28gKSApIHtcbiAgICAgICAgcmV0dXJuIGNhbGVuZGFyLm92ZXJsYXBSYW5nZXMoIG9uZSwgdHdvIClcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2Vcbn1cblxuXG4vKipcbiAqIEZsaXAgdGhlIOKAnGVuYWJsZWTigJ0gc3RhdGUuXG4gKi9cbkRhdGVQaWNrZXIucHJvdG90eXBlLmZsaXBFbmFibGUgPSBmdW5jdGlvbih2YWwpIHtcbiAgICB2YXIgaXRlbU9iamVjdCA9IHRoaXMuaXRlbVxuICAgIGl0ZW1PYmplY3QuZW5hYmxlID0gdmFsIHx8IChpdGVtT2JqZWN0LmVuYWJsZSA9PSAtMSA/IDEgOiAtMSlcbn1cblxuXG4vKipcbiAqIE1hcmsgYSBjb2xsZWN0aW9uIG9mIGRhdGVzIGFzIOKAnGRpc2FibGVk4oCdLlxuICovXG5EYXRlUGlja2VyLnByb3RvdHlwZS5kZWFjdGl2YXRlID0gZnVuY3Rpb24oIHR5cGUsIGRhdGVzVG9EaXNhYmxlICkge1xuXG4gICAgdmFyIGNhbGVuZGFyID0gdGhpcyxcbiAgICAgICAgZGlzYWJsZWRJdGVtcyA9IGNhbGVuZGFyLml0ZW0uZGlzYWJsZS5zbGljZSgwKVxuXG5cbiAgICAvLyBJZiB3ZeKAmXJlIGZsaXBwaW5nLCB0aGF04oCZcyBhbGwgd2UgbmVlZCB0byBkby5cbiAgICBpZiAoIGRhdGVzVG9EaXNhYmxlID09ICdmbGlwJyApIHtcbiAgICAgICAgY2FsZW5kYXIuZmxpcEVuYWJsZSgpXG4gICAgfVxuXG4gICAgZWxzZSBpZiAoIGRhdGVzVG9EaXNhYmxlID09PSBmYWxzZSApIHtcbiAgICAgICAgY2FsZW5kYXIuZmxpcEVuYWJsZSgxKVxuICAgICAgICBkaXNhYmxlZEl0ZW1zID0gW11cbiAgICB9XG5cbiAgICBlbHNlIGlmICggZGF0ZXNUb0Rpc2FibGUgPT09IHRydWUgKSB7XG4gICAgICAgIGNhbGVuZGFyLmZsaXBFbmFibGUoLTEpXG4gICAgICAgIGRpc2FibGVkSXRlbXMgPSBbXVxuICAgIH1cblxuICAgIC8vIE90aGVyd2lzZSBnbyB0aHJvdWdoIHRoZSBkYXRlcyB0byBkaXNhYmxlLlxuICAgIGVsc2Uge1xuXG4gICAgICAgIGRhdGVzVG9EaXNhYmxlLm1hcChmdW5jdGlvbiggdW5pdFRvRGlzYWJsZSApIHtcblxuICAgICAgICAgICAgdmFyIG1hdGNoRm91bmRcblxuICAgICAgICAgICAgLy8gV2hlbiB3ZSBoYXZlIGRpc2FibGVkIGl0ZW1zLCBjaGVjayBmb3IgbWF0Y2hlcy5cbiAgICAgICAgICAgIC8vIElmIHNvbWV0aGluZyBpcyBtYXRjaGVkLCBpbW1lZGlhdGVseSBicmVhayBvdXQuXG4gICAgICAgICAgICBmb3IgKCB2YXIgaW5kZXggPSAwOyBpbmRleCA8IGRpc2FibGVkSXRlbXMubGVuZ3RoOyBpbmRleCArPSAxICkge1xuICAgICAgICAgICAgICAgIGlmICggY2FsZW5kYXIuaXNEYXRlRXhhY3QoIHVuaXRUb0Rpc2FibGUsIGRpc2FibGVkSXRlbXNbaW5kZXhdICkgKSB7XG4gICAgICAgICAgICAgICAgICAgIG1hdGNoRm91bmQgPSB0cnVlXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBJZiBub3RoaW5nIHdhcyBmb3VuZCwgYWRkIHRoZSB2YWxpZGF0ZWQgdW5pdCB0byB0aGUgY29sbGVjdGlvbi5cbiAgICAgICAgICAgIGlmICggIW1hdGNoRm91bmQgKSB7XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICBfLmlzSW50ZWdlciggdW5pdFRvRGlzYWJsZSApIHx8XG4gICAgICAgICAgICAgICAgICAgIF8uaXNEYXRlKCB1bml0VG9EaXNhYmxlICkgfHxcbiAgICAgICAgICAgICAgICAgICAgJC5pc0FycmF5KCB1bml0VG9EaXNhYmxlICkgfHxcbiAgICAgICAgICAgICAgICAgICAgKCAkLmlzUGxhaW5PYmplY3QoIHVuaXRUb0Rpc2FibGUgKSAmJiB1bml0VG9EaXNhYmxlLmZyb20gJiYgdW5pdFRvRGlzYWJsZS50byApXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkSXRlbXMucHVzaCggdW5pdFRvRGlzYWJsZSApXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIC8vIFJldHVybiB0aGUgdXBkYXRlZCBjb2xsZWN0aW9uLlxuICAgIHJldHVybiBkaXNhYmxlZEl0ZW1zXG59IC8vRGF0ZVBpY2tlci5wcm90b3R5cGUuZGVhY3RpdmF0ZVxuXG5cbi8qKlxuICogTWFyayBhIGNvbGxlY3Rpb24gb2YgZGF0ZXMgYXMg4oCcZW5hYmxlZOKAnS5cbiAqL1xuRGF0ZVBpY2tlci5wcm90b3R5cGUuYWN0aXZhdGUgPSBmdW5jdGlvbiggdHlwZSwgZGF0ZXNUb0VuYWJsZSApIHtcblxuICAgIHZhciBjYWxlbmRhciA9IHRoaXMsXG4gICAgICAgIGRpc2FibGVkSXRlbXMgPSBjYWxlbmRhci5pdGVtLmRpc2FibGUsXG4gICAgICAgIGRpc2FibGVkSXRlbXNDb3VudCA9IGRpc2FibGVkSXRlbXMubGVuZ3RoXG5cbiAgICAvLyBJZiB3ZeKAmXJlIGZsaXBwaW5nLCB0aGF04oCZcyBhbGwgd2UgbmVlZCB0byBkby5cbiAgICBpZiAoIGRhdGVzVG9FbmFibGUgPT0gJ2ZsaXAnICkge1xuICAgICAgICBjYWxlbmRhci5mbGlwRW5hYmxlKClcbiAgICB9XG5cbiAgICBlbHNlIGlmICggZGF0ZXNUb0VuYWJsZSA9PT0gdHJ1ZSApIHtcbiAgICAgICAgY2FsZW5kYXIuZmxpcEVuYWJsZSgxKVxuICAgICAgICBkaXNhYmxlZEl0ZW1zID0gW11cbiAgICB9XG5cbiAgICBlbHNlIGlmICggZGF0ZXNUb0VuYWJsZSA9PT0gZmFsc2UgKSB7XG4gICAgICAgIGNhbGVuZGFyLmZsaXBFbmFibGUoLTEpXG4gICAgICAgIGRpc2FibGVkSXRlbXMgPSBbXVxuICAgIH1cblxuICAgIC8vIE90aGVyd2lzZSBnbyB0aHJvdWdoIHRoZSBkaXNhYmxlZCBkYXRlcy5cbiAgICBlbHNlIHtcblxuICAgICAgICBkYXRlc1RvRW5hYmxlLm1hcChmdW5jdGlvbiggdW5pdFRvRW5hYmxlICkge1xuXG4gICAgICAgICAgICB2YXIgbWF0Y2hGb3VuZCxcbiAgICAgICAgICAgICAgICBkaXNhYmxlZFVuaXQsXG4gICAgICAgICAgICAgICAgaW5kZXgsXG4gICAgICAgICAgICAgICAgaXNFeGFjdFJhbmdlXG5cbiAgICAgICAgICAgIC8vIEdvIHRocm91Z2ggdGhlIGRpc2FibGVkIGl0ZW1zIGFuZCB0cnkgdG8gZmluZCBhIG1hdGNoLlxuICAgICAgICAgICAgZm9yICggaW5kZXggPSAwOyBpbmRleCA8IGRpc2FibGVkSXRlbXNDb3VudDsgaW5kZXggKz0gMSApIHtcblxuICAgICAgICAgICAgICAgIGRpc2FibGVkVW5pdCA9IGRpc2FibGVkSXRlbXNbaW5kZXhdXG5cbiAgICAgICAgICAgICAgICAvLyBXaGVuIGFuIGV4YWN0IG1hdGNoIGlzIGZvdW5kLCByZW1vdmUgaXQgZnJvbSB0aGUgY29sbGVjdGlvbi5cbiAgICAgICAgICAgICAgICBpZiAoIGNhbGVuZGFyLmlzRGF0ZUV4YWN0KCBkaXNhYmxlZFVuaXQsIHVuaXRUb0VuYWJsZSApICkge1xuICAgICAgICAgICAgICAgICAgICBtYXRjaEZvdW5kID0gZGlzYWJsZWRJdGVtc1tpbmRleF0gPSBudWxsXG4gICAgICAgICAgICAgICAgICAgIGlzRXhhY3RSYW5nZSA9IHRydWVcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBXaGVuIGFuIG92ZXJsYXBwZWQgbWF0Y2ggaXMgZm91bmQsIGFkZCB0aGUg4oCcaW52ZXJ0ZWTigJ0gc3RhdGUgdG8gaXQuXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoIGNhbGVuZGFyLmlzRGF0ZU92ZXJsYXAoIGRpc2FibGVkVW5pdCwgdW5pdFRvRW5hYmxlICkgKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICggJC5pc1BsYWluT2JqZWN0KCB1bml0VG9FbmFibGUgKSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuaXRUb0VuYWJsZS5pbnZlcnRlZCA9IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoRm91bmQgPSB1bml0VG9FbmFibGVcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICggJC5pc0FycmF5KCB1bml0VG9FbmFibGUgKSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoRm91bmQgPSB1bml0VG9FbmFibGVcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggIW1hdGNoRm91bmRbM10gKSBtYXRjaEZvdW5kLnB1c2goICdpbnZlcnRlZCcgKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCBfLmlzRGF0ZSggdW5pdFRvRW5hYmxlICkgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRjaEZvdW5kID0gWyB1bml0VG9FbmFibGUuZ2V0RnVsbFllYXIoKSwgdW5pdFRvRW5hYmxlLmdldE1vbnRoKCksIHVuaXRUb0VuYWJsZS5nZXREYXRlKCksICdpbnZlcnRlZCcgXVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBJZiBhIG1hdGNoIHdhcyBmb3VuZCwgcmVtb3ZlIGEgcHJldmlvdXMgZHVwbGljYXRlIGVudHJ5LlxuICAgICAgICAgICAgaWYgKCBtYXRjaEZvdW5kICkgZm9yICggaW5kZXggPSAwOyBpbmRleCA8IGRpc2FibGVkSXRlbXNDb3VudDsgaW5kZXggKz0gMSApIHtcbiAgICAgICAgICAgICAgICBpZiAoIGNhbGVuZGFyLmlzRGF0ZUV4YWN0KCBkaXNhYmxlZEl0ZW1zW2luZGV4XSwgdW5pdFRvRW5hYmxlICkgKSB7XG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkSXRlbXNbaW5kZXhdID0gbnVsbFxuICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gSW4gdGhlIGV2ZW50IHRoYXQgd2XigJlyZSBkZWFsaW5nIHdpdGggYW4gZXhhY3QgcmFuZ2Ugb2YgZGF0ZXMsXG4gICAgICAgICAgICAvLyBtYWtlIHN1cmUgdGhlcmUgYXJlIG5vIOKAnGludmVydGVk4oCdIGRhdGVzIGJlY2F1c2Ugb2YgaXQuXG4gICAgICAgICAgICBpZiAoIGlzRXhhY3RSYW5nZSApIGZvciAoIGluZGV4ID0gMDsgaW5kZXggPCBkaXNhYmxlZEl0ZW1zQ291bnQ7IGluZGV4ICs9IDEgKSB7XG4gICAgICAgICAgICAgICAgaWYgKCBjYWxlbmRhci5pc0RhdGVPdmVybGFwKCBkaXNhYmxlZEl0ZW1zW2luZGV4XSwgdW5pdFRvRW5hYmxlICkgKSB7XG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVkSXRlbXNbaW5kZXhdID0gbnVsbFxuICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gSWYgc29tZXRoaW5nIGlzIHN0aWxsIG1hdGNoZWQsIGFkZCBpdCBpbnRvIHRoZSBjb2xsZWN0aW9uLlxuICAgICAgICAgICAgaWYgKCBtYXRjaEZvdW5kICkge1xuICAgICAgICAgICAgICAgIGRpc2FibGVkSXRlbXMucHVzaCggbWF0Y2hGb3VuZCApXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIHRoZSB1cGRhdGVkIGNvbGxlY3Rpb24uXG4gICAgcmV0dXJuIGRpc2FibGVkSXRlbXMuZmlsdGVyKGZ1bmN0aW9uKCB2YWwgKSB7IHJldHVybiB2YWwgIT0gbnVsbCB9KVxufSAvL0RhdGVQaWNrZXIucHJvdG90eXBlLmFjdGl2YXRlXG5cblxuLyoqXG4gKiBDcmVhdGUgYSBzdHJpbmcgZm9yIHRoZSBub2RlcyBpbiB0aGUgcGlja2VyLlxuICovXG5EYXRlUGlja2VyLnByb3RvdHlwZS5ub2RlcyA9IGZ1bmN0aW9uKCBpc09wZW4gKSB7XG5cbiAgICB2YXJcbiAgICAgICAgY2FsZW5kYXIgPSB0aGlzLFxuICAgICAgICBzZXR0aW5ncyA9IGNhbGVuZGFyLnNldHRpbmdzLFxuICAgICAgICBjYWxlbmRhckl0ZW0gPSBjYWxlbmRhci5pdGVtLFxuICAgICAgICBub3dPYmplY3QgPSBjYWxlbmRhckl0ZW0ubm93LFxuICAgICAgICBzZWxlY3RlZE9iamVjdCA9IGNhbGVuZGFySXRlbS5zZWxlY3QsXG4gICAgICAgIGhpZ2hsaWdodGVkT2JqZWN0ID0gY2FsZW5kYXJJdGVtLmhpZ2hsaWdodCxcbiAgICAgICAgdmlld3NldE9iamVjdCA9IGNhbGVuZGFySXRlbS52aWV3LFxuICAgICAgICBkaXNhYmxlZENvbGxlY3Rpb24gPSBjYWxlbmRhckl0ZW0uZGlzYWJsZSxcbiAgICAgICAgbWluTGltaXRPYmplY3QgPSBjYWxlbmRhckl0ZW0ubWluLFxuICAgICAgICBtYXhMaW1pdE9iamVjdCA9IGNhbGVuZGFySXRlbS5tYXgsXG5cblxuICAgICAgICAvLyBDcmVhdGUgdGhlIGNhbGVuZGFyIHRhYmxlIGhlYWQgdXNpbmcgYSBjb3B5IG9mIHdlZWtkYXkgbGFiZWxzIGNvbGxlY3Rpb24uXG4gICAgICAgIC8vICogV2UgZG8gYSBjb3B5IHNvIHdlIGRvbid0IG11dGF0ZSB0aGUgb3JpZ2luYWwgYXJyYXkuXG4gICAgICAgIHRhYmxlSGVhZCA9IChmdW5jdGlvbiggY29sbGVjdGlvbiwgZnVsbENvbGxlY3Rpb24gKSB7XG5cbiAgICAgICAgICAgIC8vIElmIHRoZSBmaXJzdCBkYXkgc2hvdWxkIGJlIE1vbmRheSwgbW92ZSBTdW5kYXkgdG8gdGhlIGVuZC5cbiAgICAgICAgICAgIGlmICggc2V0dGluZ3MuZmlyc3REYXkgKSB7XG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbi5wdXNoKCBjb2xsZWN0aW9uLnNoaWZ0KCkgKVxuICAgICAgICAgICAgICAgIGZ1bGxDb2xsZWN0aW9uLnB1c2goIGZ1bGxDb2xsZWN0aW9uLnNoaWZ0KCkgKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBDcmVhdGUgYW5kIHJldHVybiB0aGUgdGFibGUgaGVhZCBncm91cC5cbiAgICAgICAgICAgIHJldHVybiBfLm5vZGUoXG4gICAgICAgICAgICAgICAgJ3RoZWFkJyxcbiAgICAgICAgICAgICAgICBfLm5vZGUoXG4gICAgICAgICAgICAgICAgICAgICd0cicsXG4gICAgICAgICAgICAgICAgICAgIF8uZ3JvdXAoe1xuICAgICAgICAgICAgICAgICAgICAgICAgbWluOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4OiBEQVlTX0lOX1dFRUsgLSAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgaTogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGU6ICd0aCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtOiBmdW5jdGlvbiggY291bnRlciApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uWyBjb3VudGVyIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdzLmtsYXNzLndlZWtkYXlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc2NvcGU9Y29sIHRpdGxlPVwiJyArIGZ1bGxDb2xsZWN0aW9uWyBjb3VudGVyIF0gKyAnXCInXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICkgLy9lbmRyZXR1cm5cblxuICAgICAgICAvLyBNYXRlcmlhbGl6ZSBtb2RpZmllZFxuICAgICAgICB9KSggKCBzZXR0aW5ncy5zaG93V2Vla2RheXNGdWxsID8gc2V0dGluZ3Mud2Vla2RheXNGdWxsIDogc2V0dGluZ3Mud2Vla2RheXNMZXR0ZXIgKS5zbGljZSggMCApLCBzZXR0aW5ncy53ZWVrZGF5c0Z1bGwuc2xpY2UoIDAgKSApLCAvL3RhYmxlSGVhZFxuXG5cbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBuYXYgZm9yIG5leHQvcHJldiBtb250aC5cbiAgICAgICAgY3JlYXRlTW9udGhOYXYgPSBmdW5jdGlvbiggbmV4dCApIHtcblxuICAgICAgICAgICAgLy8gT3RoZXJ3aXNlLCByZXR1cm4gdGhlIGNyZWF0ZWQgbW9udGggdGFnLlxuICAgICAgICAgICAgcmV0dXJuIF8ubm9kZShcbiAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICAnICcsXG4gICAgICAgICAgICAgICAgc2V0dGluZ3Mua2xhc3NbICduYXYnICsgKCBuZXh0ID8gJ05leHQnIDogJ1ByZXYnICkgXSArIChcblxuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgZm9jdXNlZCBtb250aCBpcyBvdXRzaWRlIHRoZSByYW5nZSwgZGlzYWJsZWQgdGhlIGJ1dHRvbi5cbiAgICAgICAgICAgICAgICAgICAgKCBuZXh0ICYmIHZpZXdzZXRPYmplY3QueWVhciA+PSBtYXhMaW1pdE9iamVjdC55ZWFyICYmIHZpZXdzZXRPYmplY3QubW9udGggPj0gbWF4TGltaXRPYmplY3QubW9udGggKSB8fFxuICAgICAgICAgICAgICAgICAgICAoICFuZXh0ICYmIHZpZXdzZXRPYmplY3QueWVhciA8PSBtaW5MaW1pdE9iamVjdC55ZWFyICYmIHZpZXdzZXRPYmplY3QubW9udGggPD0gbWluTGltaXRPYmplY3QubW9udGggKSA/XG4gICAgICAgICAgICAgICAgICAgICcgJyArIHNldHRpbmdzLmtsYXNzLm5hdkRpc2FibGVkIDogJydcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICdkYXRhLW5hdj0nICsgKCBuZXh0IHx8IC0xICkgKyAnICcgK1xuICAgICAgICAgICAgICAgIF8uYXJpYUF0dHIoe1xuICAgICAgICAgICAgICAgICAgICByb2xlOiAnYnV0dG9uJyxcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbHM6IGNhbGVuZGFyLiRub2RlWzBdLmlkICsgJ190YWJsZSdcbiAgICAgICAgICAgICAgICB9KSArICcgJyArXG4gICAgICAgICAgICAgICAgJ3RpdGxlPVwiJyArIChuZXh0ID8gc2V0dGluZ3MubGFiZWxNb250aE5leHQgOiBzZXR0aW5ncy5sYWJlbE1vbnRoUHJldiApICsgJ1wiJ1xuICAgICAgICAgICAgKSAvL2VuZHJldHVyblxuICAgICAgICB9LCAvL2NyZWF0ZU1vbnRoTmF2XG5cblxuICAgICAgICAvLyBDcmVhdGUgdGhlIG1vbnRoIGxhYmVsLlxuICAgICAgICAvL01hdGVyaWFsaXplIG1vZGlmaWVkXG4gICAgICAgIGNyZWF0ZU1vbnRoTGFiZWwgPSBmdW5jdGlvbihvdmVycmlkZSkge1xuXG4gICAgICAgICAgICB2YXIgbW9udGhzQ29sbGVjdGlvbiA9IHNldHRpbmdzLnNob3dNb250aHNTaG9ydCA/IHNldHRpbmdzLm1vbnRoc1Nob3J0IDogc2V0dGluZ3MubW9udGhzRnVsbFxuXG4gICAgICAgICAgICAgLy8gTWF0ZXJpYWxpemUgbW9kaWZpZWRcbiAgICAgICAgICAgIGlmIChvdmVycmlkZSA9PSBcInNob3J0X21vbnRoc1wiKSB7XG4gICAgICAgICAgICAgIG1vbnRoc0NvbGxlY3Rpb24gPSBzZXR0aW5ncy5tb250aHNTaG9ydDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gSWYgdGhlcmUgYXJlIG1vbnRocyB0byBzZWxlY3QsIGFkZCBhIGRyb3Bkb3duIG1lbnUuXG4gICAgICAgICAgICBpZiAoIHNldHRpbmdzLnNlbGVjdE1vbnRocyAgJiYgb3ZlcnJpZGUgPT0gdW5kZWZpbmVkKSB7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gXy5ub2RlKCAnc2VsZWN0JyxcbiAgICAgICAgICAgICAgICAgICAgXy5ncm91cCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBtaW46IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXg6IDExLFxuICAgICAgICAgICAgICAgICAgICAgICAgaTogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGU6ICdvcHRpb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbTogZnVuY3Rpb24oIGxvb3BlZE1vbnRoICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgbG9vcGVkIG1vbnRoIGFuZCBubyBjbGFzc2VzLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb250aHNDb2xsZWN0aW9uWyBsb29wZWRNb250aCBdLCAwLFxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCB0aGUgdmFsdWUgYW5kIHNlbGVjdGVkIGluZGV4LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAndmFsdWU9JyArIGxvb3BlZE1vbnRoICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCB2aWV3c2V0T2JqZWN0Lm1vbnRoID09IGxvb3BlZE1vbnRoID8gJyBzZWxlY3RlZCcgOiAnJyApICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICggdmlld3NldE9iamVjdC55ZWFyID09IG1pbkxpbWl0T2JqZWN0LnllYXIgJiYgbG9vcGVkTW9udGggPCBtaW5MaW1pdE9iamVjdC5tb250aCApIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCB2aWV3c2V0T2JqZWN0LnllYXIgPT0gbWF4TGltaXRPYmplY3QueWVhciAmJiBsb29wZWRNb250aCA+IG1heExpbWl0T2JqZWN0Lm1vbnRoIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyBkaXNhYmxlZCcgOiAnJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3Mua2xhc3Muc2VsZWN0TW9udGggKyAnIGJyb3dzZXItZGVmYXVsdCcsXG4gICAgICAgICAgICAgICAgICAgICggaXNPcGVuID8gJycgOiAnZGlzYWJsZWQnICkgKyAnICcgK1xuICAgICAgICAgICAgICAgICAgICBfLmFyaWFBdHRyKHsgY29udHJvbHM6IGNhbGVuZGFyLiRub2RlWzBdLmlkICsgJ190YWJsZScgfSkgKyAnICcgK1xuICAgICAgICAgICAgICAgICAgICAndGl0bGU9XCInICsgc2V0dGluZ3MubGFiZWxNb250aFNlbGVjdCArICdcIidcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIE1hdGVyaWFsaXplIG1vZGlmaWVkXG4gICAgICAgICAgICBpZiAob3ZlcnJpZGUgPT0gXCJzaG9ydF9tb250aHNcIilcbiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWRPYmplY3QgIT0gbnVsbClcbiAgICAgICAgICAgICAgICByZXR1cm4gXy5ub2RlKCAnZGl2JywgbW9udGhzQ29sbGVjdGlvblsgc2VsZWN0ZWRPYmplY3QubW9udGggXSApO1xuICAgICAgICAgICAgICAgIGVsc2UgcmV0dXJuIF8ubm9kZSggJ2RpdicsIG1vbnRoc0NvbGxlY3Rpb25bIHZpZXdzZXRPYmplY3QubW9udGggXSApO1xuXG4gICAgICAgICAgICAvLyBJZiB0aGVyZSdzIGEgbmVlZCBmb3IgYSBtb250aCBzZWxlY3RvclxuICAgICAgICAgICAgcmV0dXJuIF8ubm9kZSggJ2RpdicsIG1vbnRoc0NvbGxlY3Rpb25bIHZpZXdzZXRPYmplY3QubW9udGggXSwgc2V0dGluZ3Mua2xhc3MubW9udGggKVxuICAgICAgICB9LCAvL2NyZWF0ZU1vbnRoTGFiZWxcblxuXG4gICAgICAgIC8vIENyZWF0ZSB0aGUgeWVhciBsYWJlbC5cbiAgICAgICAgLy8gTWF0ZXJpYWxpemUgbW9kaWZpZWRcbiAgICAgICAgY3JlYXRlWWVhckxhYmVsID0gZnVuY3Rpb24ob3ZlcnJpZGUpIHtcblxuICAgICAgICAgICAgdmFyIGZvY3VzZWRZZWFyID0gdmlld3NldE9iamVjdC55ZWFyLFxuXG4gICAgICAgICAgICAvLyBJZiB5ZWFycyBzZWxlY3RvciBpcyBzZXQgdG8gYSBsaXRlcmFsIFwidHJ1ZVwiLCBzZXQgaXQgdG8gNS4gT3RoZXJ3aXNlXG4gICAgICAgICAgICAvLyBkaXZpZGUgaW4gaGFsZiB0byBnZXQgaGFsZiBiZWZvcmUgYW5kIGhhbGYgYWZ0ZXIgZm9jdXNlZCB5ZWFyLlxuICAgICAgICAgICAgbnVtYmVyWWVhcnMgPSBzZXR0aW5ncy5zZWxlY3RZZWFycyA9PT0gdHJ1ZSA/IDUgOiB+figgc2V0dGluZ3Muc2VsZWN0WWVhcnMgLyAyIClcblxuICAgICAgICAgICAgLy8gSWYgdGhlcmUgYXJlIHllYXJzIHRvIHNlbGVjdCwgYWRkIGEgZHJvcGRvd24gbWVudS5cbiAgICAgICAgICAgIGlmICggbnVtYmVyWWVhcnMgKSB7XG5cbiAgICAgICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgICAgICAgbWluWWVhciA9IG1pbkxpbWl0T2JqZWN0LnllYXIsXG4gICAgICAgICAgICAgICAgICAgIG1heFllYXIgPSBtYXhMaW1pdE9iamVjdC55ZWFyLFxuICAgICAgICAgICAgICAgICAgICBsb3dlc3RZZWFyID0gZm9jdXNlZFllYXIgLSBudW1iZXJZZWFycyxcbiAgICAgICAgICAgICAgICAgICAgaGlnaGVzdFllYXIgPSBmb2N1c2VkWWVhciArIG51bWJlclllYXJzXG5cbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgbWluIHllYXIgaXMgZ3JlYXRlciB0aGFuIHRoZSBsb3dlc3QgeWVhciwgaW5jcmVhc2UgdGhlIGhpZ2hlc3QgeWVhclxuICAgICAgICAgICAgICAgIC8vIGJ5IHRoZSBkaWZmZXJlbmNlIGFuZCBzZXQgdGhlIGxvd2VzdCB5ZWFyIHRvIHRoZSBtaW4geWVhci5cbiAgICAgICAgICAgICAgICBpZiAoIG1pblllYXIgPiBsb3dlc3RZZWFyICkge1xuICAgICAgICAgICAgICAgICAgICBoaWdoZXN0WWVhciArPSBtaW5ZZWFyIC0gbG93ZXN0WWVhclxuICAgICAgICAgICAgICAgICAgICBsb3dlc3RZZWFyID0gbWluWWVhclxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIElmIHRoZSBtYXggeWVhciBpcyBsZXNzIHRoYW4gdGhlIGhpZ2hlc3QgeWVhciwgZGVjcmVhc2UgdGhlIGxvd2VzdCB5ZWFyXG4gICAgICAgICAgICAgICAgLy8gYnkgdGhlIGxvd2VyIG9mIHRoZSB0d286IGF2YWlsYWJsZSBhbmQgbmVlZGVkIHllYXJzLiBUaGVuIHNldCB0aGVcbiAgICAgICAgICAgICAgICAvLyBoaWdoZXN0IHllYXIgdG8gdGhlIG1heCB5ZWFyLlxuICAgICAgICAgICAgICAgIGlmICggbWF4WWVhciA8IGhpZ2hlc3RZZWFyICkge1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBhdmFpbGFibGVZZWFycyA9IGxvd2VzdFllYXIgLSBtaW5ZZWFyLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmVlZGVkWWVhcnMgPSBoaWdoZXN0WWVhciAtIG1heFllYXJcblxuICAgICAgICAgICAgICAgICAgICBsb3dlc3RZZWFyIC09IGF2YWlsYWJsZVllYXJzID4gbmVlZGVkWWVhcnMgPyBuZWVkZWRZZWFycyA6IGF2YWlsYWJsZVllYXJzXG4gICAgICAgICAgICAgICAgICAgIGhpZ2hlc3RZZWFyID0gbWF4WWVhclxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICggc2V0dGluZ3Muc2VsZWN0WWVhcnMgICYmIG92ZXJyaWRlID09IHVuZGVmaW5lZCApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF8ubm9kZSggJ3NlbGVjdCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBfLmdyb3VwKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW46IGxvd2VzdFllYXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4OiBoaWdoZXN0WWVhcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpOiAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGU6ICdvcHRpb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW06IGZ1bmN0aW9uKCBsb29wZWRZZWFyICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgbG9vcGVkIHllYXIgYW5kIG5vIGNsYXNzZXMuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb29wZWRZZWFyLCAwLFxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXQgdGhlIHZhbHVlIGFuZCBzZWxlY3RlZCBpbmRleC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICd2YWx1ZT0nICsgbG9vcGVkWWVhciArICggZm9jdXNlZFllYXIgPT0gbG9vcGVkWWVhciA/ICcgc2VsZWN0ZWQnIDogJycgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5ncy5rbGFzcy5zZWxlY3RZZWFyICsgJyBicm93c2VyLWRlZmF1bHQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgKCBpc09wZW4gPyAnJyA6ICdkaXNhYmxlZCcgKSArICcgJyArIF8uYXJpYUF0dHIoeyBjb250cm9sczogY2FsZW5kYXIuJG5vZGVbMF0uaWQgKyAnX3RhYmxlJyB9KSArICcgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAndGl0bGU9XCInICsgc2V0dGluZ3MubGFiZWxZZWFyU2VsZWN0ICsgJ1wiJ1xuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBNYXRlcmlhbGl6ZSBtb2RpZmllZFxuICAgICAgICAgICAgaWYgKG92ZXJyaWRlID09IFwicmF3XCIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIF8ubm9kZSggJ2RpdicsIGZvY3VzZWRZZWFyIClcblxuICAgICAgICAgICAgLy8gT3RoZXJ3aXNlIGp1c3QgcmV0dXJuIHRoZSB5ZWFyIGZvY3VzZWRcbiAgICAgICAgICAgIHJldHVybiBfLm5vZGUoICdkaXYnLCBmb2N1c2VkWWVhciwgc2V0dGluZ3Mua2xhc3MueWVhciApXG4gICAgICAgIH0gLy9jcmVhdGVZZWFyTGFiZWxcblxuXG4gICAgICAgIC8vIE1hdGVyaWFsaXplIG1vZGlmaWVkXG4gICAgICAgIGNyZWF0ZURheUxhYmVsID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkT2JqZWN0ICE9IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfLm5vZGUoICdkaXYnLCBzZWxlY3RlZE9iamVjdC5kYXRlKVxuICAgICAgICAgICAgICAgIGVsc2UgcmV0dXJuIF8ubm9kZSggJ2RpdicsIG5vd09iamVjdC5kYXRlKVxuICAgICAgICAgICAgfVxuICAgICAgICBjcmVhdGVXZWVrZGF5TGFiZWwgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBkaXNwbGF5X2RheTtcblxuICAgICAgICAgICAgaWYgKHNlbGVjdGVkT2JqZWN0ICE9IG51bGwpXG4gICAgICAgICAgICAgICAgZGlzcGxheV9kYXkgPSBzZWxlY3RlZE9iamVjdC5kYXk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgZGlzcGxheV9kYXkgPSBub3dPYmplY3QuZGF5O1xuICAgICAgICAgICAgdmFyIHdlZWtkYXkgPSBzZXR0aW5ncy53ZWVrZGF5c0Z1bGxbIGRpc3BsYXlfZGF5IF1cbiAgICAgICAgICAgIHJldHVybiB3ZWVrZGF5XG4gICAgICAgIH1cblxuXG4gICAgLy8gQ3JlYXRlIGFuZCByZXR1cm4gdGhlIGVudGlyZSBjYWxlbmRhci5cbnJldHVybiBfLm5vZGUoXG4gICAgICAgIC8vIERhdGUgcHJlc2VudGF0aW9uIFZpZXdcbiAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICBfLm5vZGUoXG4gICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgY3JlYXRlV2Vla2RheUxhYmVsKCksXG4gICAgICAgICAgICAgICAgXCJwaWNrZXJfX3dlZWtkYXktZGlzcGxheVwiXG4gICAgICAgICAgICApK1xuICAgICAgICAgICAgXy5ub2RlKFxuICAgICAgICAgICAgICAgIC8vIERpdiBmb3Igc2hvcnQgTW9udGhcbiAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICBjcmVhdGVNb250aExhYmVsKFwic2hvcnRfbW9udGhzXCIpLFxuICAgICAgICAgICAgICAgIHNldHRpbmdzLmtsYXNzLm1vbnRoX2Rpc3BsYXlcbiAgICAgICAgICAgICkrXG4gICAgICAgICAgICBfLm5vZGUoXG4gICAgICAgICAgICAgICAgLy8gRGl2IGZvciBEYXlcbiAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICBjcmVhdGVEYXlMYWJlbCgpICxcbiAgICAgICAgICAgICAgICBzZXR0aW5ncy5rbGFzcy5kYXlfZGlzcGxheVxuICAgICAgICAgICAgKStcbiAgICAgICAgICAgIF8ubm9kZShcbiAgICAgICAgICAgICAgICAvLyBEaXYgZm9yIFllYXJcbiAgICAgICAgICAgICAgICAnZGl2JyxcbiAgICAgICAgICAgICAgICBjcmVhdGVZZWFyTGFiZWwoXCJyYXdcIikgLFxuICAgICAgICAgICAgICAgIHNldHRpbmdzLmtsYXNzLnllYXJfZGlzcGxheVxuICAgICAgICAgICAgKSxcbiAgICAgICAgc2V0dGluZ3Mua2xhc3MuZGF0ZV9kaXNwbGF5XG4gICAgKStcbiAgICAvLyBDYWxlbmRhciBjb250YWluZXJcbiAgICBfLm5vZGUoJ2RpdicsXG4gICAgICAgIF8ubm9kZSgnZGl2JyxcbiAgICAgICAgKCBzZXR0aW5ncy5zZWxlY3RZZWFycyA/ICBjcmVhdGVNb250aExhYmVsKCkgKyBjcmVhdGVZZWFyTGFiZWwoKSA6IGNyZWF0ZU1vbnRoTGFiZWwoKSArIGNyZWF0ZVllYXJMYWJlbCgpICkgK1xuICAgICAgICBjcmVhdGVNb250aE5hdigpICsgY3JlYXRlTW9udGhOYXYoIDEgKSxcbiAgICAgICAgc2V0dGluZ3Mua2xhc3MuaGVhZGVyXG4gICAgKSArIF8ubm9kZShcbiAgICAgICAgJ3RhYmxlJyxcbiAgICAgICAgdGFibGVIZWFkICtcbiAgICAgICAgXy5ub2RlKFxuICAgICAgICAgICAgJ3Rib2R5JyxcbiAgICAgICAgICAgIF8uZ3JvdXAoe1xuICAgICAgICAgICAgICAgIG1pbjogMCxcbiAgICAgICAgICAgICAgICBtYXg6IFdFRUtTX0lOX0NBTEVOREFSIC0gMSxcbiAgICAgICAgICAgICAgICBpOiAxLFxuICAgICAgICAgICAgICAgIG5vZGU6ICd0cicsXG4gICAgICAgICAgICAgICAgaXRlbTogZnVuY3Rpb24oIHJvd0NvdW50ZXIgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgTW9uZGF5IGlzIHRoZSBmaXJzdCBkYXkgYW5kIHRoZSBtb250aCBzdGFydHMgb24gU3VuZGF5LCBzaGlmdCB0aGUgZGF0ZSBiYWNrIGEgd2Vlay5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHNoaWZ0RGF0ZUJ5ID0gc2V0dGluZ3MuZmlyc3REYXkgJiYgY2FsZW5kYXIuY3JlYXRlKFsgdmlld3NldE9iamVjdC55ZWFyLCB2aWV3c2V0T2JqZWN0Lm1vbnRoLCAxIF0pLmRheSA9PT0gMCA/IC03IDogMFxuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgICAgICAgICBfLmdyb3VwKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW46IERBWVNfSU5fV0VFSyAqIHJvd0NvdW50ZXIgLSB2aWV3c2V0T2JqZWN0LmRheSArIHNoaWZ0RGF0ZUJ5ICsgMSwgLy8gQWRkIDEgZm9yIHdlZWtkYXkgMGluZGV4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubWluICsgREFZU19JTl9XRUVLIC0gMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaTogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlOiAndGQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW06IGZ1bmN0aW9uKCB0YXJnZXREYXRlICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbnZlcnQgdGhlIHRpbWUgZGF0ZSBmcm9tIGEgcmVsYXRpdmUgZGF0ZSB0byBhIHRhcmdldCBkYXRlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXREYXRlID0gY2FsZW5kYXIuY3JlYXRlKFsgdmlld3NldE9iamVjdC55ZWFyLCB2aWV3c2V0T2JqZWN0Lm1vbnRoLCB0YXJnZXREYXRlICsgKCBzZXR0aW5ncy5maXJzdERheSA/IDEgOiAwICkgXSlcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXNTZWxlY3RlZCA9IHNlbGVjdGVkT2JqZWN0ICYmIHNlbGVjdGVkT2JqZWN0LnBpY2sgPT0gdGFyZ2V0RGF0ZS5waWNrLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNIaWdobGlnaHRlZCA9IGhpZ2hsaWdodGVkT2JqZWN0ICYmIGhpZ2hsaWdodGVkT2JqZWN0LnBpY2sgPT0gdGFyZ2V0RGF0ZS5waWNrLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNEaXNhYmxlZCA9IGRpc2FibGVkQ29sbGVjdGlvbiAmJiBjYWxlbmRhci5kaXNhYmxlZCggdGFyZ2V0RGF0ZSApIHx8IHRhcmdldERhdGUucGljayA8IG1pbkxpbWl0T2JqZWN0LnBpY2sgfHwgdGFyZ2V0RGF0ZS5waWNrID4gbWF4TGltaXRPYmplY3QucGljayxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZERhdGUgPSBfLnRyaWdnZXIoIGNhbGVuZGFyLmZvcm1hdHMudG9TdHJpbmcsIGNhbGVuZGFyLCBbIHNldHRpbmdzLmZvcm1hdCwgdGFyZ2V0RGF0ZSBdIClcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXy5ub2RlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkaXYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldERhdGUuZGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZnVuY3Rpb24oIGtsYXNzZXMgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHRoZSBgaW5mb2N1c2Agb3IgYG91dGZvY3VzYCBjbGFzc2VzIGJhc2VkIG9uIG1vbnRoIGluIHZpZXcuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtsYXNzZXMucHVzaCggdmlld3NldE9iamVjdC5tb250aCA9PSB0YXJnZXREYXRlLm1vbnRoID8gc2V0dGluZ3Mua2xhc3MuaW5mb2N1cyA6IHNldHRpbmdzLmtsYXNzLm91dGZvY3VzIClcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdGhlIGB0b2RheWAgY2xhc3MgaWYgbmVlZGVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIG5vd09iamVjdC5waWNrID09IHRhcmdldERhdGUucGljayApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtsYXNzZXMucHVzaCggc2V0dGluZ3Mua2xhc3Mubm93IClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgYHNlbGVjdGVkYCBjbGFzcyBpZiBzb21ldGhpbmcncyBzZWxlY3RlZCBhbmQgdGhlIHRpbWUgbWF0Y2hlcy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBpc1NlbGVjdGVkICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2xhc3Nlcy5wdXNoKCBzZXR0aW5ncy5rbGFzcy5zZWxlY3RlZCApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdGhlIGBoaWdobGlnaHRlZGAgY2xhc3MgaWYgc29tZXRoaW5nJ3MgaGlnaGxpZ2h0ZWQgYW5kIHRoZSB0aW1lIG1hdGNoZXMuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggaXNIaWdobGlnaHRlZCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtsYXNzZXMucHVzaCggc2V0dGluZ3Mua2xhc3MuaGlnaGxpZ2h0ZWQgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHRoZSBgZGlzYWJsZWRgIGNsYXNzIGlmIHNvbWV0aGluZydzIGRpc2FibGVkIGFuZCB0aGUgb2JqZWN0IG1hdGNoZXMuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggaXNEaXNhYmxlZCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtsYXNzZXMucHVzaCggc2V0dGluZ3Mua2xhc3MuZGlzYWJsZWQgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGtsYXNzZXMuam9pbiggJyAnIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KShbIHNldHRpbmdzLmtsYXNzLmRheSBdKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGF0YS1waWNrPScgKyB0YXJnZXREYXRlLnBpY2sgKyAnICcgKyBfLmFyaWFBdHRyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9sZTogJ2dyaWRjZWxsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGZvcm1hdHRlZERhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkOiBpc1NlbGVjdGVkICYmIGNhbGVuZGFyLiRub2RlLnZhbCgpID09PSBmb3JtYXR0ZWREYXRlID8gdHJ1ZSA6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZWRlc2NlbmRhbnQ6IGlzSGlnaGxpZ2h0ZWQgPyB0cnVlIDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ6IGlzRGlzYWJsZWQgPyB0cnVlIDogbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfLmFyaWFBdHRyKHsgcm9sZTogJ3ByZXNlbnRhdGlvbicgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSAvL2VuZHJldHVyblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIF0gLy9lbmRyZXR1cm5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICApLFxuICAgICAgICBzZXR0aW5ncy5rbGFzcy50YWJsZSxcbiAgICAgICAgJ2lkPVwiJyArIGNhbGVuZGFyLiRub2RlWzBdLmlkICsgJ190YWJsZScgKyAnXCIgJyArIF8uYXJpYUF0dHIoe1xuICAgICAgICAgICAgcm9sZTogJ2dyaWQnLFxuICAgICAgICAgICAgY29udHJvbHM6IGNhbGVuZGFyLiRub2RlWzBdLmlkLFxuICAgICAgICAgICAgcmVhZG9ubHk6IHRydWVcbiAgICAgICAgfSlcbiAgICApXG4gICAgLCBzZXR0aW5ncy5rbGFzcy5jYWxlbmRhcl9jb250YWluZXIpIC8vIGVuZCBjYWxlbmRhclxuXG4gICAgICtcblxuICAgIC8vICogRm9yIEZpcmVmb3ggZm9ybXMgdG8gc3VibWl0LCBtYWtlIHN1cmUgdG8gc2V0IHRoZSBidXR0b25z4oCZIGB0eXBlYCBhdHRyaWJ1dGVzIGFzIOKAnGJ1dHRvbuKAnS5cbiAgICBfLm5vZGUoXG4gICAgICAgICdkaXYnLFxuICAgICAgICBfLm5vZGUoICdidXR0b24nLCBzZXR0aW5ncy50b2RheSwgXCJidG4tZmxhdCBwaWNrZXJfX3RvZGF5XCIsXG4gICAgICAgICAgICAndHlwZT1idXR0b24gZGF0YS1waWNrPScgKyBub3dPYmplY3QucGljayArXG4gICAgICAgICAgICAoIGlzT3BlbiAmJiAhY2FsZW5kYXIuZGlzYWJsZWQobm93T2JqZWN0KSA/ICcnIDogJyBkaXNhYmxlZCcgKSArICcgJyArXG4gICAgICAgICAgICBfLmFyaWFBdHRyKHsgY29udHJvbHM6IGNhbGVuZGFyLiRub2RlWzBdLmlkIH0pICkgK1xuICAgICAgICBfLm5vZGUoICdidXR0b24nLCBzZXR0aW5ncy5jbGVhciwgXCJidG4tZmxhdCBwaWNrZXJfX2NsZWFyXCIsXG4gICAgICAgICAgICAndHlwZT1idXR0b24gZGF0YS1jbGVhcj0xJyArXG4gICAgICAgICAgICAoIGlzT3BlbiA/ICcnIDogJyBkaXNhYmxlZCcgKSArICcgJyArXG4gICAgICAgICAgICBfLmFyaWFBdHRyKHsgY29udHJvbHM6IGNhbGVuZGFyLiRub2RlWzBdLmlkIH0pICkgK1xuICAgICAgICBfLm5vZGUoJ2J1dHRvbicsIHNldHRpbmdzLmNsb3NlLCBcImJ0bi1mbGF0IHBpY2tlcl9fY2xvc2VcIixcbiAgICAgICAgICAgICd0eXBlPWJ1dHRvbiBkYXRhLWNsb3NlPXRydWUgJyArXG4gICAgICAgICAgICAoIGlzT3BlbiA/ICcnIDogJyBkaXNhYmxlZCcgKSArICcgJyArXG4gICAgICAgICAgICBfLmFyaWFBdHRyKHsgY29udHJvbHM6IGNhbGVuZGFyLiRub2RlWzBdLmlkIH0pICksXG4gICAgICAgIHNldHRpbmdzLmtsYXNzLmZvb3RlclxuICAgICkgLy9lbmRyZXR1cm5cbn0gLy9EYXRlUGlja2VyLnByb3RvdHlwZS5ub2Rlc1xuXG5cblxuXG4vKipcbiAqIFRoZSBkYXRlIHBpY2tlciBkZWZhdWx0cy5cbiAqL1xuRGF0ZVBpY2tlci5kZWZhdWx0cyA9IChmdW5jdGlvbiggcHJlZml4ICkge1xuXG4gICAgcmV0dXJuIHtcblxuICAgICAgICAvLyBUaGUgdGl0bGUgbGFiZWwgdG8gdXNlIGZvciB0aGUgbW9udGggbmF2IGJ1dHRvbnNcbiAgICAgICAgbGFiZWxNb250aE5leHQ6ICdOZXh0IG1vbnRoJyxcbiAgICAgICAgbGFiZWxNb250aFByZXY6ICdQcmV2aW91cyBtb250aCcsXG5cbiAgICAgICAgLy8gVGhlIHRpdGxlIGxhYmVsIHRvIHVzZSBmb3IgdGhlIGRyb3Bkb3duIHNlbGVjdG9yc1xuICAgICAgICBsYWJlbE1vbnRoU2VsZWN0OiAnU2VsZWN0IGEgbW9udGgnLFxuICAgICAgICBsYWJlbFllYXJTZWxlY3Q6ICdTZWxlY3QgYSB5ZWFyJyxcblxuICAgICAgICAvLyBNb250aHMgYW5kIHdlZWtkYXlzXG4gICAgICAgIG1vbnRoc0Z1bGw6IFsgJ0phbnVhcnknLCAnRmVicnVhcnknLCAnTWFyY2gnLCAnQXByaWwnLCAnTWF5JywgJ0p1bmUnLCAnSnVseScsICdBdWd1c3QnLCAnU2VwdGVtYmVyJywgJ09jdG9iZXInLCAnTm92ZW1iZXInLCAnRGVjZW1iZXInIF0sXG4gICAgICAgIG1vbnRoc1Nob3J0OiBbICdKYW4nLCAnRmViJywgJ01hcicsICdBcHInLCAnTWF5JywgJ0p1bicsICdKdWwnLCAnQXVnJywgJ1NlcCcsICdPY3QnLCAnTm92JywgJ0RlYycgXSxcbiAgICAgICAgd2Vla2RheXNGdWxsOiBbICdTdW5kYXknLCAnTW9uZGF5JywgJ1R1ZXNkYXknLCAnV2VkbmVzZGF5JywgJ1RodXJzZGF5JywgJ0ZyaWRheScsICdTYXR1cmRheScgXSxcbiAgICAgICAgd2Vla2RheXNTaG9ydDogWyAnU3VuJywgJ01vbicsICdUdWUnLCAnV2VkJywgJ1RodScsICdGcmknLCAnU2F0JyBdLFxuXG4gICAgICAgIC8vIE1hdGVyaWFsaXplIG1vZGlmaWVkXG4gICAgICAgIHdlZWtkYXlzTGV0dGVyOiBbICdTJywgJ00nLCAnVCcsICdXJywgJ1QnLCAnRicsICdTJyBdLFxuXG4gICAgICAgIC8vIFRvZGF5IGFuZCBjbGVhclxuICAgICAgICB0b2RheTogJ1RvZGF5JyxcbiAgICAgICAgY2xlYXI6ICdDbGVhcicsXG4gICAgICAgIGNsb3NlOiAnQ2xvc2UnLFxuXG4gICAgICAgIC8vIFRoZSBmb3JtYXQgdG8gc2hvdyBvbiB0aGUgYGlucHV0YCBlbGVtZW50XG4gICAgICAgIGZvcm1hdDogJ2QgbW1tbSwgeXl5eScsXG5cbiAgICAgICAgLy8gQ2xhc3Nlc1xuICAgICAgICBrbGFzczoge1xuXG4gICAgICAgICAgICB0YWJsZTogcHJlZml4ICsgJ3RhYmxlJyxcblxuICAgICAgICAgICAgaGVhZGVyOiBwcmVmaXggKyAnaGVhZGVyJyxcblxuXG4gICAgICAgICAgICAvLyBNYXRlcmlhbGl6ZSBBZGRlZCBrbGFzc2VzXG4gICAgICAgICAgICBkYXRlX2Rpc3BsYXk6IHByZWZpeCArICdkYXRlLWRpc3BsYXknLFxuICAgICAgICAgICAgZGF5X2Rpc3BsYXk6IHByZWZpeCArICdkYXktZGlzcGxheScsXG4gICAgICAgICAgICBtb250aF9kaXNwbGF5OiBwcmVmaXggKyAnbW9udGgtZGlzcGxheScsXG4gICAgICAgICAgICB5ZWFyX2Rpc3BsYXk6IHByZWZpeCArICd5ZWFyLWRpc3BsYXknLFxuICAgICAgICAgICAgY2FsZW5kYXJfY29udGFpbmVyOiBwcmVmaXggKyAnY2FsZW5kYXItY29udGFpbmVyJyxcbiAgICAgICAgICAgIC8vIGVuZFxuXG5cblxuICAgICAgICAgICAgbmF2UHJldjogcHJlZml4ICsgJ25hdi0tcHJldicsXG4gICAgICAgICAgICBuYXZOZXh0OiBwcmVmaXggKyAnbmF2LS1uZXh0JyxcbiAgICAgICAgICAgIG5hdkRpc2FibGVkOiBwcmVmaXggKyAnbmF2LS1kaXNhYmxlZCcsXG5cbiAgICAgICAgICAgIG1vbnRoOiBwcmVmaXggKyAnbW9udGgnLFxuICAgICAgICAgICAgeWVhcjogcHJlZml4ICsgJ3llYXInLFxuXG4gICAgICAgICAgICBzZWxlY3RNb250aDogcHJlZml4ICsgJ3NlbGVjdC0tbW9udGgnLFxuICAgICAgICAgICAgc2VsZWN0WWVhcjogcHJlZml4ICsgJ3NlbGVjdC0teWVhcicsXG5cbiAgICAgICAgICAgIHdlZWtkYXlzOiBwcmVmaXggKyAnd2Vla2RheScsXG5cbiAgICAgICAgICAgIGRheTogcHJlZml4ICsgJ2RheScsXG4gICAgICAgICAgICBkaXNhYmxlZDogcHJlZml4ICsgJ2RheS0tZGlzYWJsZWQnLFxuICAgICAgICAgICAgc2VsZWN0ZWQ6IHByZWZpeCArICdkYXktLXNlbGVjdGVkJyxcbiAgICAgICAgICAgIGhpZ2hsaWdodGVkOiBwcmVmaXggKyAnZGF5LS1oaWdobGlnaHRlZCcsXG4gICAgICAgICAgICBub3c6IHByZWZpeCArICdkYXktLXRvZGF5JyxcbiAgICAgICAgICAgIGluZm9jdXM6IHByZWZpeCArICdkYXktLWluZm9jdXMnLFxuICAgICAgICAgICAgb3V0Zm9jdXM6IHByZWZpeCArICdkYXktLW91dGZvY3VzJyxcblxuICAgICAgICAgICAgZm9vdGVyOiBwcmVmaXggKyAnZm9vdGVyJyxcblxuICAgICAgICAgICAgYnV0dG9uQ2xlYXI6IHByZWZpeCArICdidXR0b24tLWNsZWFyJyxcbiAgICAgICAgICAgIGJ1dHRvblRvZGF5OiBwcmVmaXggKyAnYnV0dG9uLS10b2RheScsXG4gICAgICAgICAgICBidXR0b25DbG9zZTogcHJlZml4ICsgJ2J1dHRvbi0tY2xvc2UnXG4gICAgICAgIH1cbiAgICB9XG59KSggUGlja2VyLmtsYXNzZXMoKS5waWNrZXIgKyAnX18nIClcblxuXG5cblxuXG4vKipcbiAqIEV4dGVuZCB0aGUgcGlja2VyIHRvIGFkZCB0aGUgZGF0ZSBwaWNrZXIuXG4gKi9cblBpY2tlci5leHRlbmQoICdwaWNrYWRhdGUnLCBEYXRlUGlja2VyIClcblxuXG59KSk7XG5cblxuOyhmdW5jdGlvbiAoJCkge1xuXG4gICQuZm4uY2hhcmFjdGVyQ291bnRlciA9IGZ1bmN0aW9uKCl7XG4gICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe1xuICAgICAgdmFyICRpbnB1dCA9ICQodGhpcyk7XG4gICAgICB2YXIgJGNvdW50ZXJFbGVtZW50ID0gJGlucHV0LnBhcmVudCgpLmZpbmQoJ3NwYW5bY2xhc3M9XCJjaGFyYWN0ZXItY291bnRlclwiXScpO1xuXG4gICAgICAvLyBjaGFyYWN0ZXIgY291bnRlciBoYXMgYWxyZWFkeSBiZWVuIGFkZGVkIGFwcGVuZGVkIHRvIHRoZSBwYXJlbnQgY29udGFpbmVyXG4gICAgICBpZiAoJGNvdW50ZXJFbGVtZW50Lmxlbmd0aCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciBpdEhhc0xlbmd0aEF0dHJpYnV0ZSA9ICRpbnB1dC5hdHRyKCdsZW5ndGgnKSAhPT0gdW5kZWZpbmVkO1xuXG4gICAgICBpZihpdEhhc0xlbmd0aEF0dHJpYnV0ZSl7XG4gICAgICAgICRpbnB1dC5vbignaW5wdXQnLCB1cGRhdGVDb3VudGVyKTtcbiAgICAgICAgJGlucHV0Lm9uKCdmb2N1cycsIHVwZGF0ZUNvdW50ZXIpO1xuICAgICAgICAkaW5wdXQub24oJ2JsdXInLCByZW1vdmVDb3VudGVyRWxlbWVudCk7XG5cbiAgICAgICAgYWRkQ291bnRlckVsZW1lbnQoJGlucHV0KTtcbiAgICAgIH1cblxuICAgIH0pO1xuICB9O1xuXG4gIGZ1bmN0aW9uIHVwZGF0ZUNvdW50ZXIoKXtcbiAgICB2YXIgbWF4TGVuZ3RoICAgICA9ICskKHRoaXMpLmF0dHIoJ2xlbmd0aCcpLFxuICAgIGFjdHVhbExlbmd0aCAgICAgID0gKyQodGhpcykudmFsKCkubGVuZ3RoLFxuICAgIGlzVmFsaWRMZW5ndGggICAgID0gYWN0dWFsTGVuZ3RoIDw9IG1heExlbmd0aDtcblxuICAgICQodGhpcykucGFyZW50KCkuZmluZCgnc3BhbltjbGFzcz1cImNoYXJhY3Rlci1jb3VudGVyXCJdJylcbiAgICAgICAgICAgICAgICAgICAgLmh0bWwoIGFjdHVhbExlbmd0aCArICcvJyArIG1heExlbmd0aCk7XG5cbiAgICBhZGRJbnB1dFN0eWxlKGlzVmFsaWRMZW5ndGgsICQodGhpcykpO1xuICB9XG5cbiAgZnVuY3Rpb24gYWRkQ291bnRlckVsZW1lbnQoJGlucHV0KSB7XG4gICAgdmFyICRjb3VudGVyRWxlbWVudCA9ICRpbnB1dC5wYXJlbnQoKS5maW5kKCdzcGFuW2NsYXNzPVwiY2hhcmFjdGVyLWNvdW50ZXJcIl0nKTtcblxuICAgIGlmICgkY291bnRlckVsZW1lbnQubGVuZ3RoKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgJGNvdW50ZXJFbGVtZW50ID0gJCgnPHNwYW4vPicpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoJ2NoYXJhY3Rlci1jb3VudGVyJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jc3MoJ2Zsb2F0JywncmlnaHQnKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNzcygnZm9udC1zaXplJywnMTJweCcpXG4gICAgICAgICAgICAgICAgICAgICAgICAuY3NzKCdoZWlnaHQnLCAxKTtcblxuICAgICRpbnB1dC5wYXJlbnQoKS5hcHBlbmQoJGNvdW50ZXJFbGVtZW50KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZUNvdW50ZXJFbGVtZW50KCl7XG4gICAgJCh0aGlzKS5wYXJlbnQoKS5maW5kKCdzcGFuW2NsYXNzPVwiY2hhcmFjdGVyLWNvdW50ZXJcIl0nKS5odG1sKCcnKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZElucHV0U3R5bGUoaXNWYWxpZExlbmd0aCwgJGlucHV0KXtcbiAgICB2YXIgaW5wdXRIYXNJbnZhbGlkQ2xhc3MgPSAkaW5wdXQuaGFzQ2xhc3MoJ2ludmFsaWQnKTtcbiAgICBpZiAoaXNWYWxpZExlbmd0aCAmJiBpbnB1dEhhc0ludmFsaWRDbGFzcykge1xuICAgICAgJGlucHV0LnJlbW92ZUNsYXNzKCdpbnZhbGlkJyk7XG4gICAgfVxuICAgIGVsc2UgaWYoIWlzVmFsaWRMZW5ndGggJiYgIWlucHV0SGFzSW52YWxpZENsYXNzKXtcbiAgICAgICRpbnB1dC5yZW1vdmVDbGFzcygndmFsaWQnKTtcbiAgICAgICRpbnB1dC5hZGRDbGFzcygnaW52YWxpZCcpO1xuICAgIH1cbiAgfVxuXG4gICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCl7XG4gICAgJCgnaW5wdXQsIHRleHRhcmVhJykuY2hhcmFjdGVyQ291bnRlcigpO1xuICB9KTtcblxufSggalF1ZXJ5ICkpO1xuOyhmdW5jdGlvbiAoJCkge1xuXG4gIHZhciBtZXRob2RzID0ge1xuXG4gICAgaW5pdCA6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIHZhciBkZWZhdWx0cyA9IHtcbiAgICAgICAgdGltZV9jb25zdGFudDogMjAwLCAvLyBtc1xuICAgICAgICBkaXN0OiAtMTAwLCAvLyB6b29tIHNjYWxlIFRPRE86IG1ha2UgdGhpcyBtb3JlIGludHVpdGl2ZSBhcyBhbiBvcHRpb25cbiAgICAgICAgc2hpZnQ6IDAsIC8vIHNwYWNpbmcgZm9yIGNlbnRlciBpbWFnZVxuICAgICAgICBwYWRkaW5nOiAwLCAvLyBQYWRkaW5nIGJldHdlZW4gbm9uIGNlbnRlciBpdGVtc1xuICAgICAgICBmdWxsX3dpZHRoOiBmYWxzZSwgLy8gQ2hhbmdlIHRvIGZ1bGwgd2lkdGggc3R5bGVzXG4gICAgICAgIGluZGljYXRvcnM6IGZhbHNlLCAvLyBUb2dnbGUgaW5kaWNhdG9yc1xuICAgICAgICBub193cmFwOiBmYWxzZSAvLyBEb24ndCB3cmFwIGFyb3VuZCBhbmQgY3ljbGUgdGhyb3VnaCBpdGVtcy5cbiAgICAgIH07XG4gICAgICBvcHRpb25zID0gJC5leHRlbmQoZGVmYXVsdHMsIG9wdGlvbnMpO1xuXG4gICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIHZhciBpbWFnZXMsIG9mZnNldCwgY2VudGVyLCBwcmVzc2VkLCBkaW0sIGNvdW50LFxuICAgICAgICAgICAgcmVmZXJlbmNlLCByZWZlcmVuY2VZLCBhbXBsaXR1ZGUsIHRhcmdldCwgdmVsb2NpdHksXG4gICAgICAgICAgICB4Zm9ybSwgZnJhbWUsIHRpbWVzdGFtcCwgdGlja2VyLCBkcmFnZ2VkLCB2ZXJ0aWNhbF9kcmFnZ2VkO1xuICAgICAgICB2YXIgJGluZGljYXRvcnMgPSAkKCc8dWwgY2xhc3M9XCJpbmRpY2F0b3JzXCI+PC91bD4nKTtcblxuXG4gICAgICAgIC8vIEluaXRpYWxpemVcbiAgICAgICAgdmFyIHZpZXcgPSAkKHRoaXMpO1xuICAgICAgICB2YXIgc2hvd0luZGljYXRvcnMgPSB2aWV3LmF0dHIoJ2RhdGEtaW5kaWNhdG9ycycpIHx8IG9wdGlvbnMuaW5kaWNhdG9ycztcblxuICAgICAgICAvLyBEb24ndCBkb3VibGUgaW5pdGlhbGl6ZS5cbiAgICAgICAgaWYgKHZpZXcuaGFzQ2xhc3MoJ2luaXRpYWxpemVkJykpIHtcbiAgICAgICAgICAvLyBSZWRyYXcgY2Fyb3VzZWwuXG4gICAgICAgICAgJCh0aGlzKS50cmlnZ2VyKCdjYXJvdXNlbE5leHQnLCBbMC4wMDAwMDFdKTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gT3B0aW9uc1xuICAgICAgICBpZiAob3B0aW9ucy5mdWxsX3dpZHRoKSB7XG4gICAgICAgICAgb3B0aW9ucy5kaXN0ID0gMDtcbiAgICAgICAgICB2YXIgZmlyc3RJbWFnZSA9IHZpZXcuZmluZCgnLmNhcm91c2VsLWl0ZW0gaW1nJykuZmlyc3QoKTtcbiAgICAgICAgICBpZiAoZmlyc3RJbWFnZS5sZW5ndGgpIHtcbiAgICAgICAgICAgIGltYWdlSGVpZ2h0ID0gZmlyc3RJbWFnZS5vbignbG9hZCcsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgIHZpZXcuY3NzKCdoZWlnaHQnLCAkKHRoaXMpLmhlaWdodCgpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpbWFnZUhlaWdodCA9IHZpZXcuZmluZCgnLmNhcm91c2VsLWl0ZW0nKS5maXJzdCgpLmhlaWdodCgpO1xuICAgICAgICAgICAgdmlldy5jc3MoJ2hlaWdodCcsIGltYWdlSGVpZ2h0KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBPZmZzZXQgZml4ZWQgaXRlbXMgd2hlbiBpbmRpY2F0b3JzLlxuICAgICAgICAgIGlmIChzaG93SW5kaWNhdG9ycykge1xuICAgICAgICAgICAgdmlldy5maW5kKCcuY2Fyb3VzZWwtZml4ZWQtaXRlbScpLmFkZENsYXNzKCd3aXRoLWluZGljYXRvcnMnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuXG4gICAgICAgIHZpZXcuYWRkQ2xhc3MoJ2luaXRpYWxpemVkJyk7XG4gICAgICAgIHByZXNzZWQgPSBmYWxzZTtcbiAgICAgICAgb2Zmc2V0ID0gdGFyZ2V0ID0gMDtcbiAgICAgICAgaW1hZ2VzID0gW107XG4gICAgICAgIGl0ZW1fd2lkdGggPSB2aWV3LmZpbmQoJy5jYXJvdXNlbC1pdGVtJykuZmlyc3QoKS5pbm5lcldpZHRoKCk7XG4gICAgICAgIGRpbSA9IGl0ZW1fd2lkdGggKiAyICsgb3B0aW9ucy5wYWRkaW5nO1xuXG4gICAgICAgIHZpZXcuZmluZCgnLmNhcm91c2VsLWl0ZW0nKS5lYWNoKGZ1bmN0aW9uIChpKSB7XG4gICAgICAgICAgaW1hZ2VzLnB1c2goJCh0aGlzKVswXSk7XG4gICAgICAgICAgaWYgKHNob3dJbmRpY2F0b3JzKSB7XG4gICAgICAgICAgICB2YXIgJGluZGljYXRvciA9ICQoJzxsaSBjbGFzcz1cImluZGljYXRvci1pdGVtXCI+PC9saT4nKTtcblxuICAgICAgICAgICAgLy8gQWRkIGFjdGl2ZSB0byBmaXJzdCBieSBkZWZhdWx0LlxuICAgICAgICAgICAgaWYgKGkgPT09IDApIHtcbiAgICAgICAgICAgICAgJGluZGljYXRvci5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEhhbmRsZSBjbGlja3Mgb24gaW5kaWNhdG9ycy5cbiAgICAgICAgICAgICRpbmRpY2F0b3IuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICB2YXIgaW5kZXggPSAkKHRoaXMpLmluZGV4KCk7XG4gICAgICAgICAgICAgIGN5Y2xlVG8oaW5kZXgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAkaW5kaWNhdG9ycy5hcHBlbmQoJGluZGljYXRvcik7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoc2hvd0luZGljYXRvcnMpIHtcbiAgICAgICAgICB2aWV3LmFwcGVuZCgkaW5kaWNhdG9ycyk7XG4gICAgICAgIH1cbiAgICAgICAgY291bnQgPSBpbWFnZXMubGVuZ3RoO1xuXG5cbiAgICAgICAgZnVuY3Rpb24gc2V0dXBFdmVudHMoKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cub250b3VjaHN0YXJ0ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdmlld1swXS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdGFwKTtcbiAgICAgICAgICAgIHZpZXdbMF0uYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgZHJhZyk7XG4gICAgICAgICAgICB2aWV3WzBdLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgcmVsZWFzZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHZpZXdbMF0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGFwKTtcbiAgICAgICAgICB2aWV3WzBdLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGRyYWcpO1xuICAgICAgICAgIHZpZXdbMF0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHJlbGVhc2UpO1xuICAgICAgICAgIHZpZXdbMF0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIHJlbGVhc2UpO1xuICAgICAgICAgIHZpZXdbMF0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbGljayk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB4cG9zKGUpIHtcbiAgICAgICAgICAvLyB0b3VjaCBldmVudFxuICAgICAgICAgIGlmIChlLnRhcmdldFRvdWNoZXMgJiYgKGUudGFyZ2V0VG91Y2hlcy5sZW5ndGggPj0gMSkpIHtcbiAgICAgICAgICAgIHJldHVybiBlLnRhcmdldFRvdWNoZXNbMF0uY2xpZW50WDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBtb3VzZSBldmVudFxuICAgICAgICAgIHJldHVybiBlLmNsaWVudFg7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB5cG9zKGUpIHtcbiAgICAgICAgICAvLyB0b3VjaCBldmVudFxuICAgICAgICAgIGlmIChlLnRhcmdldFRvdWNoZXMgJiYgKGUudGFyZ2V0VG91Y2hlcy5sZW5ndGggPj0gMSkpIHtcbiAgICAgICAgICAgIHJldHVybiBlLnRhcmdldFRvdWNoZXNbMF0uY2xpZW50WTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBtb3VzZSBldmVudFxuICAgICAgICAgIHJldHVybiBlLmNsaWVudFk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB3cmFwKHgpIHtcbiAgICAgICAgICByZXR1cm4gKHggPj0gY291bnQpID8gKHggJSBjb3VudCkgOiAoeCA8IDApID8gd3JhcChjb3VudCArICh4ICUgY291bnQpKSA6IHg7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzY3JvbGwoeCkge1xuICAgICAgICAgIHZhciBpLCBoYWxmLCBkZWx0YSwgZGlyLCB0d2VlbiwgZWwsIGFsaWdubWVudCwgeFRyYW5zbGF0aW9uO1xuXG4gICAgICAgICAgb2Zmc2V0ID0gKHR5cGVvZiB4ID09PSAnbnVtYmVyJykgPyB4IDogb2Zmc2V0O1xuICAgICAgICAgIGNlbnRlciA9IE1hdGguZmxvb3IoKG9mZnNldCArIGRpbSAvIDIpIC8gZGltKTtcbiAgICAgICAgICBkZWx0YSA9IG9mZnNldCAtIGNlbnRlciAqIGRpbTtcbiAgICAgICAgICBkaXIgPSAoZGVsdGEgPCAwKSA/IDEgOiAtMTtcbiAgICAgICAgICB0d2VlbiA9IC1kaXIgKiBkZWx0YSAqIDIgLyBkaW07XG4gICAgICAgICAgaGFsZiA9IGNvdW50ID4+IDE7XG5cbiAgICAgICAgICBpZiAoIW9wdGlvbnMuZnVsbF93aWR0aCkge1xuICAgICAgICAgICAgYWxpZ25tZW50ID0gJ3RyYW5zbGF0ZVgoJyArICh2aWV3WzBdLmNsaWVudFdpZHRoIC0gaXRlbV93aWR0aCkgLyAyICsgJ3B4KSAnO1xuICAgICAgICAgICAgYWxpZ25tZW50ICs9ICd0cmFuc2xhdGVZKCcgKyAodmlld1swXS5jbGllbnRIZWlnaHQgLSBpdGVtX3dpZHRoKSAvIDIgKyAncHgpJztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYWxpZ25tZW50ID0gJ3RyYW5zbGF0ZVgoMCknO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFNldCBpbmRpY2F0b3IgYWN0aXZlXG4gICAgICAgICAgaWYgKHNob3dJbmRpY2F0b3JzKSB7XG4gICAgICAgICAgICB2YXIgZGlmZiA9IChjZW50ZXIgJSBjb3VudCk7XG4gICAgICAgICAgICB2YXIgYWN0aXZlSW5kaWNhdG9yID0gJGluZGljYXRvcnMuZmluZCgnLmluZGljYXRvci1pdGVtLmFjdGl2ZScpO1xuICAgICAgICAgICAgaWYgKGFjdGl2ZUluZGljYXRvci5pbmRleCgpICE9PSBkaWZmKSB7XG4gICAgICAgICAgICAgIGFjdGl2ZUluZGljYXRvci5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICRpbmRpY2F0b3JzLmZpbmQoJy5pbmRpY2F0b3ItaXRlbScpLmVxKGRpZmYpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBjZW50ZXJcbiAgICAgICAgICAvLyBEb24ndCBzaG93IHdyYXBwZWQgaXRlbXMuXG4gICAgICAgICAgaWYgKCFvcHRpb25zLm5vX3dyYXAgfHwgKGNlbnRlciA+PSAwICYmIGNlbnRlciA8IGNvdW50KSkge1xuICAgICAgICAgICAgZWwgPSBpbWFnZXNbd3JhcChjZW50ZXIpXTtcbiAgICAgICAgICAgIGVsLnN0eWxlW3hmb3JtXSA9IGFsaWdubWVudCArXG4gICAgICAgICAgICAgICcgdHJhbnNsYXRlWCgnICsgKC1kZWx0YSAvIDIpICsgJ3B4KScgK1xuICAgICAgICAgICAgICAnIHRyYW5zbGF0ZVgoJyArIChkaXIgKiBvcHRpb25zLnNoaWZ0ICogdHdlZW4gKiBpKSArICdweCknICtcbiAgICAgICAgICAgICAgJyB0cmFuc2xhdGVaKCcgKyAob3B0aW9ucy5kaXN0ICogdHdlZW4pICsgJ3B4KSc7XG4gICAgICAgICAgICBlbC5zdHlsZS56SW5kZXggPSAwO1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuZnVsbF93aWR0aCkgeyB0d2VlbmVkT3BhY2l0eSA9IDE7IH1cbiAgICAgICAgICAgIGVsc2UgeyB0d2VlbmVkT3BhY2l0eSA9IDEgLSAwLjIgKiB0d2VlbjsgfVxuICAgICAgICAgICAgZWwuc3R5bGUub3BhY2l0eSA9IHR3ZWVuZWRPcGFjaXR5O1xuICAgICAgICAgICAgZWwuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZm9yIChpID0gMTsgaSA8PSBoYWxmOyArK2kpIHtcbiAgICAgICAgICAgIC8vIHJpZ2h0IHNpZGVcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmZ1bGxfd2lkdGgpIHtcbiAgICAgICAgICAgICAgelRyYW5zbGF0aW9uID0gb3B0aW9ucy5kaXN0O1xuICAgICAgICAgICAgICB0d2VlbmVkT3BhY2l0eSA9IChpID09PSBoYWxmICYmIGRlbHRhIDwgMCkgPyAxIC0gdHdlZW4gOiAxO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgelRyYW5zbGF0aW9uID0gb3B0aW9ucy5kaXN0ICogKGkgKiAyICsgdHdlZW4gKiBkaXIpO1xuICAgICAgICAgICAgICB0d2VlbmVkT3BhY2l0eSA9IDEgLSAwLjIgKiAoaSAqIDIgKyB0d2VlbiAqIGRpcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBEb24ndCBzaG93IHdyYXBwZWQgaXRlbXMuXG4gICAgICAgICAgICBpZiAoIW9wdGlvbnMubm9fd3JhcCB8fCBjZW50ZXIgKyBpIDwgY291bnQpIHtcbiAgICAgICAgICAgICAgZWwgPSBpbWFnZXNbd3JhcChjZW50ZXIgKyBpKV07XG4gICAgICAgICAgICAgIGVsLnN0eWxlW3hmb3JtXSA9IGFsaWdubWVudCArXG4gICAgICAgICAgICAgICAgJyB0cmFuc2xhdGVYKCcgKyAob3B0aW9ucy5zaGlmdCArIChkaW0gKiBpIC0gZGVsdGEpIC8gMikgKyAncHgpJyArXG4gICAgICAgICAgICAgICAgJyB0cmFuc2xhdGVaKCcgKyB6VHJhbnNsYXRpb24gKyAncHgpJztcbiAgICAgICAgICAgICAgZWwuc3R5bGUuekluZGV4ID0gLWk7XG4gICAgICAgICAgICAgIGVsLnN0eWxlLm9wYWNpdHkgPSB0d2VlbmVkT3BhY2l0eTtcbiAgICAgICAgICAgICAgZWwuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgLy8gbGVmdCBzaWRlXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5mdWxsX3dpZHRoKSB7XG4gICAgICAgICAgICAgIHpUcmFuc2xhdGlvbiA9IG9wdGlvbnMuZGlzdDtcbiAgICAgICAgICAgICAgdHdlZW5lZE9wYWNpdHkgPSAoaSA9PT0gaGFsZiAmJiBkZWx0YSA+IDApID8gMSAtIHR3ZWVuIDogMTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHpUcmFuc2xhdGlvbiA9IG9wdGlvbnMuZGlzdCAqIChpICogMiAtIHR3ZWVuICogZGlyKTtcbiAgICAgICAgICAgICAgdHdlZW5lZE9wYWNpdHkgPSAxIC0gMC4yICogKGkgKiAyIC0gdHdlZW4gKiBkaXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRG9uJ3Qgc2hvdyB3cmFwcGVkIGl0ZW1zLlxuICAgICAgICAgICAgaWYgKCFvcHRpb25zLm5vX3dyYXAgfHwgY2VudGVyIC0gaSA+PSAwKSB7XG4gICAgICAgICAgICAgIGVsID0gaW1hZ2VzW3dyYXAoY2VudGVyIC0gaSldO1xuICAgICAgICAgICAgICBlbC5zdHlsZVt4Zm9ybV0gPSBhbGlnbm1lbnQgK1xuICAgICAgICAgICAgICAgICcgdHJhbnNsYXRlWCgnICsgKC1vcHRpb25zLnNoaWZ0ICsgKC1kaW0gKiBpIC0gZGVsdGEpIC8gMikgKyAncHgpJyArXG4gICAgICAgICAgICAgICAgJyB0cmFuc2xhdGVaKCcgKyB6VHJhbnNsYXRpb24gKyAncHgpJztcbiAgICAgICAgICAgICAgZWwuc3R5bGUuekluZGV4ID0gLWk7XG4gICAgICAgICAgICAgIGVsLnN0eWxlLm9wYWNpdHkgPSB0d2VlbmVkT3BhY2l0eTtcbiAgICAgICAgICAgICAgZWwuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gY2VudGVyXG4gICAgICAgICAgLy8gRG9uJ3Qgc2hvdyB3cmFwcGVkIGl0ZW1zLlxuICAgICAgICAgIGlmICghb3B0aW9ucy5ub193cmFwIHx8IChjZW50ZXIgPj0gMCAmJiBjZW50ZXIgPCBjb3VudCkpIHtcbiAgICAgICAgICAgIGVsID0gaW1hZ2VzW3dyYXAoY2VudGVyKV07XG4gICAgICAgICAgICBlbC5zdHlsZVt4Zm9ybV0gPSBhbGlnbm1lbnQgK1xuICAgICAgICAgICAgICAnIHRyYW5zbGF0ZVgoJyArICgtZGVsdGEgLyAyKSArICdweCknICtcbiAgICAgICAgICAgICAgJyB0cmFuc2xhdGVYKCcgKyAoZGlyICogb3B0aW9ucy5zaGlmdCAqIHR3ZWVuKSArICdweCknICtcbiAgICAgICAgICAgICAgJyB0cmFuc2xhdGVaKCcgKyAob3B0aW9ucy5kaXN0ICogdHdlZW4pICsgJ3B4KSc7XG4gICAgICAgICAgICBlbC5zdHlsZS56SW5kZXggPSAwO1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuZnVsbF93aWR0aCkgeyB0d2VlbmVkT3BhY2l0eSA9IDE7IH1cbiAgICAgICAgICAgIGVsc2UgeyB0d2VlbmVkT3BhY2l0eSA9IDEgLSAwLjIgKiB0d2VlbjsgfVxuICAgICAgICAgICAgZWwuc3R5bGUub3BhY2l0eSA9IHR3ZWVuZWRPcGFjaXR5O1xuICAgICAgICAgICAgZWwuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gdHJhY2soKSB7XG4gICAgICAgICAgdmFyIG5vdywgZWxhcHNlZCwgZGVsdGEsIHY7XG5cbiAgICAgICAgICBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgICAgIGVsYXBzZWQgPSBub3cgLSB0aW1lc3RhbXA7XG4gICAgICAgICAgdGltZXN0YW1wID0gbm93O1xuICAgICAgICAgIGRlbHRhID0gb2Zmc2V0IC0gZnJhbWU7XG4gICAgICAgICAgZnJhbWUgPSBvZmZzZXQ7XG5cbiAgICAgICAgICB2ID0gMTAwMCAqIGRlbHRhIC8gKDEgKyBlbGFwc2VkKTtcbiAgICAgICAgICB2ZWxvY2l0eSA9IDAuOCAqIHYgKyAwLjIgKiB2ZWxvY2l0eTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGF1dG9TY3JvbGwoKSB7XG4gICAgICAgICAgdmFyIGVsYXBzZWQsIGRlbHRhO1xuXG4gICAgICAgICAgaWYgKGFtcGxpdHVkZSkge1xuICAgICAgICAgICAgZWxhcHNlZCA9IERhdGUubm93KCkgLSB0aW1lc3RhbXA7XG4gICAgICAgICAgICBkZWx0YSA9IGFtcGxpdHVkZSAqIE1hdGguZXhwKC1lbGFwc2VkIC8gb3B0aW9ucy50aW1lX2NvbnN0YW50KTtcbiAgICAgICAgICAgIGlmIChkZWx0YSA+IDIgfHwgZGVsdGEgPCAtMikge1xuICAgICAgICAgICAgICAgIHNjcm9sbCh0YXJnZXQgLSBkZWx0YSk7XG4gICAgICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGF1dG9TY3JvbGwpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzY3JvbGwodGFyZ2V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBjbGljayhlKSB7XG4gICAgICAgICAgLy8gRGlzYWJsZSBjbGlja3MgaWYgY2Fyb3VzZWwgd2FzIGRyYWdnZWQuXG4gICAgICAgICAgaWYgKGRyYWdnZWQpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgICB9IGVsc2UgaWYgKCFvcHRpb25zLmZ1bGxfd2lkdGgpIHtcbiAgICAgICAgICAgIHZhciBjbGlja2VkSW5kZXggPSAkKGUudGFyZ2V0KS5jbG9zZXN0KCcuY2Fyb3VzZWwtaXRlbScpLmluZGV4KCk7XG4gICAgICAgICAgICB2YXIgZGlmZiA9IChjZW50ZXIgJSBjb3VudCkgLSBjbGlja2VkSW5kZXg7XG5cbiAgICAgICAgICAgIC8vIERpc2FibGUgY2xpY2tzIGlmIGNhcm91c2VsIHdhcyBzaGlmdGVkIGJ5IGNsaWNrXG4gICAgICAgICAgICBpZiAoZGlmZiAhPT0gMCkge1xuICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjeWNsZVRvKGNsaWNrZWRJbmRleCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gY3ljbGVUbyhuKSB7XG4gICAgICAgICAgdmFyIGRpZmYgPSAoY2VudGVyICUgY291bnQpIC0gbjtcblxuICAgICAgICAgIC8vIEFjY291bnQgZm9yIHdyYXBhcm91bmQuXG4gICAgICAgICAgaWYgKCFvcHRpb25zLm5vX3dyYXApIHtcbiAgICAgICAgICAgIGlmIChkaWZmIDwgMCkge1xuICAgICAgICAgICAgICBpZiAoTWF0aC5hYnMoZGlmZiArIGNvdW50KSA8IE1hdGguYWJzKGRpZmYpKSB7IGRpZmYgKz0gY291bnQ7IH1cblxuICAgICAgICAgICAgfSBlbHNlIGlmIChkaWZmID4gMCkge1xuICAgICAgICAgICAgICBpZiAoTWF0aC5hYnMoZGlmZiAtIGNvdW50KSA8IGRpZmYpIHsgZGlmZiAtPSBjb3VudDsgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIENhbGwgcHJldiBvciBuZXh0IGFjY29yZGluZ2x5LlxuICAgICAgICAgIGlmIChkaWZmIDwgMCkge1xuICAgICAgICAgICAgdmlldy50cmlnZ2VyKCdjYXJvdXNlbE5leHQnLCBbTWF0aC5hYnMoZGlmZildKTtcblxuICAgICAgICAgIH0gZWxzZSBpZiAoZGlmZiA+IDApIHtcbiAgICAgICAgICAgIHZpZXcudHJpZ2dlcignY2Fyb3VzZWxQcmV2JywgW2RpZmZdKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiB0YXAoZSkge1xuICAgICAgICAgIHByZXNzZWQgPSB0cnVlO1xuICAgICAgICAgIGRyYWdnZWQgPSBmYWxzZTtcbiAgICAgICAgICB2ZXJ0aWNhbF9kcmFnZ2VkID0gZmFsc2U7XG4gICAgICAgICAgcmVmZXJlbmNlID0geHBvcyhlKTtcbiAgICAgICAgICByZWZlcmVuY2VZID0geXBvcyhlKTtcblxuICAgICAgICAgIHZlbG9jaXR5ID0gYW1wbGl0dWRlID0gMDtcbiAgICAgICAgICBmcmFtZSA9IG9mZnNldDtcbiAgICAgICAgICB0aW1lc3RhbXAgPSBEYXRlLm5vdygpO1xuICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGlja2VyKTtcbiAgICAgICAgICB0aWNrZXIgPSBzZXRJbnRlcnZhbCh0cmFjaywgMTAwKTtcblxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZHJhZyhlKSB7XG4gICAgICAgICAgdmFyIHgsIGRlbHRhLCBkZWx0YVk7XG4gICAgICAgICAgaWYgKHByZXNzZWQpIHtcbiAgICAgICAgICAgIHggPSB4cG9zKGUpO1xuICAgICAgICAgICAgeSA9IHlwb3MoZSk7XG4gICAgICAgICAgICBkZWx0YSA9IHJlZmVyZW5jZSAtIHg7XG4gICAgICAgICAgICBkZWx0YVkgPSBNYXRoLmFicyhyZWZlcmVuY2VZIC0geSk7XG4gICAgICAgICAgICBpZiAoZGVsdGFZIDwgMzAgJiYgIXZlcnRpY2FsX2RyYWdnZWQpIHtcbiAgICAgICAgICAgICAgLy8gSWYgdmVydGljYWwgc2Nyb2xsaW5nIGRvbid0IGFsbG93IGRyYWdnaW5nLlxuICAgICAgICAgICAgICBpZiAoZGVsdGEgPiAyIHx8IGRlbHRhIDwgLTIpIHtcbiAgICAgICAgICAgICAgICBkcmFnZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByZWZlcmVuY2UgPSB4O1xuICAgICAgICAgICAgICAgIHNjcm9sbChvZmZzZXQgKyBkZWx0YSk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSBlbHNlIGlmIChkcmFnZ2VkKSB7XG4gICAgICAgICAgICAgIC8vIElmIGRyYWdnaW5nIGRvbid0IGFsbG93IHZlcnRpY2FsIHNjcm9sbC5cbiAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vIFZlcnRpY2FsIHNjcm9sbGluZy5cbiAgICAgICAgICAgICAgdmVydGljYWxfZHJhZ2dlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGRyYWdnZWQpIHtcbiAgICAgICAgICAgIC8vIElmIGRyYWdnaW5nIGRvbid0IGFsbG93IHZlcnRpY2FsIHNjcm9sbC5cbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcmVsZWFzZShlKSB7XG4gICAgICAgICAgaWYgKHByZXNzZWQpIHtcbiAgICAgICAgICAgIHByZXNzZWQgPSBmYWxzZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGlja2VyKTtcbiAgICAgICAgICB0YXJnZXQgPSBvZmZzZXQ7XG4gICAgICAgICAgaWYgKHZlbG9jaXR5ID4gMTAgfHwgdmVsb2NpdHkgPCAtMTApIHtcbiAgICAgICAgICAgIGFtcGxpdHVkZSA9IDAuOSAqIHZlbG9jaXR5O1xuICAgICAgICAgICAgdGFyZ2V0ID0gb2Zmc2V0ICsgYW1wbGl0dWRlO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0YXJnZXQgPSBNYXRoLnJvdW5kKHRhcmdldCAvIGRpbSkgKiBkaW07XG5cbiAgICAgICAgICAvLyBObyB3cmFwIG9mIGl0ZW1zLlxuICAgICAgICAgIGlmIChvcHRpb25zLm5vX3dyYXApIHtcbiAgICAgICAgICAgIGlmICh0YXJnZXQgPj0gZGltICogKGNvdW50IC0gMSkpIHtcbiAgICAgICAgICAgICAgdGFyZ2V0ID0gZGltICogKGNvdW50IC0gMSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRhcmdldCA8IDApIHtcbiAgICAgICAgICAgICAgdGFyZ2V0ID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYW1wbGl0dWRlID0gdGFyZ2V0IC0gb2Zmc2V0O1xuICAgICAgICAgIHRpbWVzdGFtcCA9IERhdGUubm93KCk7XG4gICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGF1dG9TY3JvbGwpO1xuXG4gICAgICAgICAgaWYgKGRyYWdnZWQpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHhmb3JtID0gJ3RyYW5zZm9ybSc7XG4gICAgICAgIFsnd2Via2l0JywgJ01veicsICdPJywgJ21zJ10uZXZlcnkoZnVuY3Rpb24gKHByZWZpeCkge1xuICAgICAgICAgIHZhciBlID0gcHJlZml4ICsgJ1RyYW5zZm9ybSc7XG4gICAgICAgICAgaWYgKHR5cGVvZiBkb2N1bWVudC5ib2R5LnN0eWxlW2VdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgeGZvcm0gPSBlO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSk7XG5cblxuXG4gICAgICAgIHdpbmRvdy5vbnJlc2l6ZSA9IHNjcm9sbDtcblxuICAgICAgICBzZXR1cEV2ZW50cygpO1xuICAgICAgICBzY3JvbGwob2Zmc2V0KTtcblxuICAgICAgICAkKHRoaXMpLm9uKCdjYXJvdXNlbE5leHQnLCBmdW5jdGlvbihlLCBuKSB7XG4gICAgICAgICAgaWYgKG4gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbiA9IDE7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRhcmdldCA9IG9mZnNldCArIGRpbSAqIG47XG4gICAgICAgICAgaWYgKG9mZnNldCAhPT0gdGFyZ2V0KSB7XG4gICAgICAgICAgICBhbXBsaXR1ZGUgPSB0YXJnZXQgLSBvZmZzZXQ7XG4gICAgICAgICAgICB0aW1lc3RhbXAgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGF1dG9TY3JvbGwpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgJCh0aGlzKS5vbignY2Fyb3VzZWxQcmV2JywgZnVuY3Rpb24oZSwgbikge1xuICAgICAgICAgIGlmIChuID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIG4gPSAxO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0YXJnZXQgPSBvZmZzZXQgLSBkaW0gKiBuO1xuICAgICAgICAgIGlmIChvZmZzZXQgIT09IHRhcmdldCkge1xuICAgICAgICAgICAgYW1wbGl0dWRlID0gdGFyZ2V0IC0gb2Zmc2V0O1xuICAgICAgICAgICAgdGltZXN0YW1wID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShhdXRvU2Nyb2xsKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQodGhpcykub24oJ2Nhcm91c2VsU2V0JywgZnVuY3Rpb24oZSwgbikge1xuICAgICAgICAgIGlmIChuID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIG4gPSAwO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjeWNsZVRvKG4pO1xuICAgICAgICB9KTtcblxuICAgICAgfSk7XG5cblxuXG4gICAgfSxcbiAgICBuZXh0IDogZnVuY3Rpb24obikge1xuICAgICAgJCh0aGlzKS50cmlnZ2VyKCdjYXJvdXNlbE5leHQnLCBbbl0pO1xuICAgIH0sXG4gICAgcHJldiA6IGZ1bmN0aW9uKG4pIHtcbiAgICAgICQodGhpcykudHJpZ2dlcignY2Fyb3VzZWxQcmV2JywgW25dKTtcbiAgICB9LFxuICAgIHNldCA6IGZ1bmN0aW9uKG4pIHtcbiAgICAgICQodGhpcykudHJpZ2dlcignY2Fyb3VzZWxTZXQnLCBbbl0pO1xuICAgIH1cbiAgfTtcblxuXG4gICAgJC5mbi5jYXJvdXNlbCA9IGZ1bmN0aW9uKG1ldGhvZE9yT3B0aW9ucykge1xuICAgICAgaWYgKCBtZXRob2RzW21ldGhvZE9yT3B0aW9uc10gKSB7XG4gICAgICAgIHJldHVybiBtZXRob2RzWyBtZXRob2RPck9wdGlvbnMgXS5hcHBseSggdGhpcywgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoIGFyZ3VtZW50cywgMSApKTtcbiAgICAgIH0gZWxzZSBpZiAoIHR5cGVvZiBtZXRob2RPck9wdGlvbnMgPT09ICdvYmplY3QnIHx8ICEgbWV0aG9kT3JPcHRpb25zICkge1xuICAgICAgICAvLyBEZWZhdWx0IHRvIFwiaW5pdFwiXG4gICAgICAgIHJldHVybiBtZXRob2RzLmluaXQuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJC5lcnJvciggJ01ldGhvZCAnICsgIG1ldGhvZE9yT3B0aW9ucyArICcgZG9lcyBub3QgZXhpc3Qgb24galF1ZXJ5LmNhcm91c2VsJyApO1xuICAgICAgfVxuICAgIH07IC8vIFBsdWdpbiBlbmRcbn0oIGpRdWVyeSApKTsiLCIvKiFcbiAqIE1hdGVyaWFsaXplIHYwLjk3LjggKGh0dHA6Ly9tYXRlcmlhbGl6ZWNzcy5jb20pXG4gKiBDb3B5cmlnaHQgMjAxNC0yMDE1IE1hdGVyaWFsaXplXG4gKiBNSVQgTGljZW5zZSAoaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL0RvZ2ZhbG8vbWF0ZXJpYWxpemUvbWFzdGVyL0xJQ0VOU0UpXG4gKi9cbmlmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBqUXVlcnkpe3ZhciBqUXVlcnk7alF1ZXJ5PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmU/JD1yZXF1aXJlKFwianF1ZXJ5XCIpOiR9alF1ZXJ5LmVhc2luZy5qc3dpbmc9alF1ZXJ5LmVhc2luZy5zd2luZyxqUXVlcnkuZXh0ZW5kKGpRdWVyeS5lYXNpbmcse2RlZjpcImVhc2VPdXRRdWFkXCIsc3dpbmc6ZnVuY3Rpb24oYSxiLGMsZCxlKXtyZXR1cm4galF1ZXJ5LmVhc2luZ1tqUXVlcnkuZWFzaW5nLmRlZl0oYSxiLGMsZCxlKX0sZWFzZUluUXVhZDpmdW5jdGlvbihhLGIsYyxkLGUpe3JldHVybiBkKihiLz1lKSpiK2N9LGVhc2VPdXRRdWFkOmZ1bmN0aW9uKGEsYixjLGQsZSl7cmV0dXJuLWQqKGIvPWUpKihiLTIpK2N9LGVhc2VJbk91dFF1YWQ6ZnVuY3Rpb24oYSxiLGMsZCxlKXtyZXR1cm4oYi89ZS8yKTwxP2QvMipiKmIrYzotZC8yKigtLWIqKGItMiktMSkrY30sZWFzZUluQ3ViaWM6ZnVuY3Rpb24oYSxiLGMsZCxlKXtyZXR1cm4gZCooYi89ZSkqYipiK2N9LGVhc2VPdXRDdWJpYzpmdW5jdGlvbihhLGIsYyxkLGUpe3JldHVybiBkKigoYj1iL2UtMSkqYipiKzEpK2N9LGVhc2VJbk91dEN1YmljOmZ1bmN0aW9uKGEsYixjLGQsZSl7cmV0dXJuKGIvPWUvMik8MT9kLzIqYipiKmIrYzpkLzIqKChiLT0yKSpiKmIrMikrY30sZWFzZUluUXVhcnQ6ZnVuY3Rpb24oYSxiLGMsZCxlKXtyZXR1cm4gZCooYi89ZSkqYipiKmIrY30sZWFzZU91dFF1YXJ0OmZ1bmN0aW9uKGEsYixjLGQsZSl7cmV0dXJuLWQqKChiPWIvZS0xKSpiKmIqYi0xKStjfSxlYXNlSW5PdXRRdWFydDpmdW5jdGlvbihhLGIsYyxkLGUpe3JldHVybihiLz1lLzIpPDE/ZC8yKmIqYipiKmIrYzotZC8yKigoYi09MikqYipiKmItMikrY30sZWFzZUluUXVpbnQ6ZnVuY3Rpb24oYSxiLGMsZCxlKXtyZXR1cm4gZCooYi89ZSkqYipiKmIqYitjfSxlYXNlT3V0UXVpbnQ6ZnVuY3Rpb24oYSxiLGMsZCxlKXtyZXR1cm4gZCooKGI9Yi9lLTEpKmIqYipiKmIrMSkrY30sZWFzZUluT3V0UXVpbnQ6ZnVuY3Rpb24oYSxiLGMsZCxlKXtyZXR1cm4oYi89ZS8yKTwxP2QvMipiKmIqYipiKmIrYzpkLzIqKChiLT0yKSpiKmIqYipiKzIpK2N9LGVhc2VJblNpbmU6ZnVuY3Rpb24oYSxiLGMsZCxlKXtyZXR1cm4tZCpNYXRoLmNvcyhiL2UqKE1hdGguUEkvMikpK2QrY30sZWFzZU91dFNpbmU6ZnVuY3Rpb24oYSxiLGMsZCxlKXtyZXR1cm4gZCpNYXRoLnNpbihiL2UqKE1hdGguUEkvMikpK2N9LGVhc2VJbk91dFNpbmU6ZnVuY3Rpb24oYSxiLGMsZCxlKXtyZXR1cm4tZC8yKihNYXRoLmNvcyhNYXRoLlBJKmIvZSktMSkrY30sZWFzZUluRXhwbzpmdW5jdGlvbihhLGIsYyxkLGUpe3JldHVybiAwPT1iP2M6ZCpNYXRoLnBvdygyLDEwKihiL2UtMSkpK2N9LGVhc2VPdXRFeHBvOmZ1bmN0aW9uKGEsYixjLGQsZSl7cmV0dXJuIGI9PWU/YytkOmQqKC1NYXRoLnBvdygyLC0xMCpiL2UpKzEpK2N9LGVhc2VJbk91dEV4cG86ZnVuY3Rpb24oYSxiLGMsZCxlKXtyZXR1cm4gMD09Yj9jOmI9PWU/YytkOihiLz1lLzIpPDE/ZC8yKk1hdGgucG93KDIsMTAqKGItMSkpK2M6ZC8yKigtTWF0aC5wb3coMiwtMTAqLS1iKSsyKStjfSxlYXNlSW5DaXJjOmZ1bmN0aW9uKGEsYixjLGQsZSl7cmV0dXJuLWQqKE1hdGguc3FydCgxLShiLz1lKSpiKS0xKStjfSxlYXNlT3V0Q2lyYzpmdW5jdGlvbihhLGIsYyxkLGUpe3JldHVybiBkKk1hdGguc3FydCgxLShiPWIvZS0xKSpiKStjfSxlYXNlSW5PdXRDaXJjOmZ1bmN0aW9uKGEsYixjLGQsZSl7cmV0dXJuKGIvPWUvMik8MT8tZC8yKihNYXRoLnNxcnQoMS1iKmIpLTEpK2M6ZC8yKihNYXRoLnNxcnQoMS0oYi09MikqYikrMSkrY30sZWFzZUluRWxhc3RpYzpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmPTEuNzAxNTgsZz0wLGg9ZDtpZigwPT1iKXJldHVybiBjO2lmKDE9PShiLz1lKSlyZXR1cm4gYytkO2lmKGd8fChnPS4zKmUpLGg8TWF0aC5hYnMoZCkpe2g9ZDt2YXIgZj1nLzR9ZWxzZSB2YXIgZj1nLygyKk1hdGguUEkpKk1hdGguYXNpbihkL2gpO3JldHVybi0oaCpNYXRoLnBvdygyLDEwKihiLT0xKSkqTWF0aC5zaW4oKGIqZS1mKSooMipNYXRoLlBJKS9nKSkrY30sZWFzZU91dEVsYXN0aWM6ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZj0xLjcwMTU4LGc9MCxoPWQ7aWYoMD09YilyZXR1cm4gYztpZigxPT0oYi89ZSkpcmV0dXJuIGMrZDtpZihnfHwoZz0uMyplKSxoPE1hdGguYWJzKGQpKXtoPWQ7dmFyIGY9Zy80fWVsc2UgdmFyIGY9Zy8oMipNYXRoLlBJKSpNYXRoLmFzaW4oZC9oKTtyZXR1cm4gaCpNYXRoLnBvdygyLC0xMCpiKSpNYXRoLnNpbigoYiplLWYpKigyKk1hdGguUEkpL2cpK2QrY30sZWFzZUluT3V0RWxhc3RpYzpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmPTEuNzAxNTgsZz0wLGg9ZDtpZigwPT1iKXJldHVybiBjO2lmKDI9PShiLz1lLzIpKXJldHVybiBjK2Q7aWYoZ3x8KGc9ZSooLjMqMS41KSksaDxNYXRoLmFicyhkKSl7aD1kO3ZhciBmPWcvNH1lbHNlIHZhciBmPWcvKDIqTWF0aC5QSSkqTWF0aC5hc2luKGQvaCk7cmV0dXJuIDE+Yj8tLjUqKGgqTWF0aC5wb3coMiwxMCooYi09MSkpKk1hdGguc2luKChiKmUtZikqKDIqTWF0aC5QSSkvZykpK2M6aCpNYXRoLnBvdygyLC0xMCooYi09MSkpKk1hdGguc2luKChiKmUtZikqKDIqTWF0aC5QSSkvZykqLjUrZCtjfSxlYXNlSW5CYWNrOmZ1bmN0aW9uKGEsYixjLGQsZSxmKXtyZXR1cm4gdm9pZCAwPT1mJiYoZj0xLjcwMTU4KSxkKihiLz1lKSpiKigoZisxKSpiLWYpK2N9LGVhc2VPdXRCYWNrOmZ1bmN0aW9uKGEsYixjLGQsZSxmKXtyZXR1cm4gdm9pZCAwPT1mJiYoZj0xLjcwMTU4KSxkKigoYj1iL2UtMSkqYiooKGYrMSkqYitmKSsxKStjfSxlYXNlSW5PdXRCYWNrOmZ1bmN0aW9uKGEsYixjLGQsZSxmKXtyZXR1cm4gdm9pZCAwPT1mJiYoZj0xLjcwMTU4KSwoYi89ZS8yKTwxP2QvMiooYipiKigoKGYqPTEuNTI1KSsxKSpiLWYpKStjOmQvMiooKGItPTIpKmIqKCgoZio9MS41MjUpKzEpKmIrZikrMikrY30sZWFzZUluQm91bmNlOmZ1bmN0aW9uKGEsYixjLGQsZSl7cmV0dXJuIGQtalF1ZXJ5LmVhc2luZy5lYXNlT3V0Qm91bmNlKGEsZS1iLDAsZCxlKStjfSxlYXNlT3V0Qm91bmNlOmZ1bmN0aW9uKGEsYixjLGQsZSl7cmV0dXJuKGIvPWUpPDEvMi43NT9kKig3LjU2MjUqYipiKStjOjIvMi43NT5iP2QqKDcuNTYyNSooYi09MS41LzIuNzUpKmIrLjc1KStjOjIuNS8yLjc1PmI/ZCooNy41NjI1KihiLT0yLjI1LzIuNzUpKmIrLjkzNzUpK2M6ZCooNy41NjI1KihiLT0yLjYyNS8yLjc1KSpiKy45ODQzNzUpK2N9LGVhc2VJbk91dEJvdW5jZTpmdW5jdGlvbihhLGIsYyxkLGUpe3JldHVybiBlLzI+Yj8uNSpqUXVlcnkuZWFzaW5nLmVhc2VJbkJvdW5jZShhLDIqYiwwLGQsZSkrYzouNSpqUXVlcnkuZWFzaW5nLmVhc2VPdXRCb3VuY2UoYSwyKmItZSwwLGQsZSkrLjUqZCtjfX0pLGpRdWVyeS5leHRlbmQoalF1ZXJ5LmVhc2luZyx7ZWFzZUluT3V0TWF0ZXJpYWw6ZnVuY3Rpb24oYSxiLGMsZCxlKXtyZXR1cm4oYi89ZS8yKTwxP2QvMipiKmIrYzpkLzQqKChiLT0yKSpiKmIrMikrY319KSxqUXVlcnkuVmVsb2NpdHk/Y29uc29sZS5sb2coXCJWZWxvY2l0eSBpcyBhbHJlYWR5IGxvYWRlZC4gWW91IG1heSBiZSBuZWVkbGVzc2x5IGltcG9ydGluZyBWZWxvY2l0eSBhZ2Fpbjsgbm90ZSB0aGF0IE1hdGVyaWFsaXplIGluY2x1ZGVzIFZlbG9jaXR5LlwiKTooIWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSl7dmFyIGI9YS5sZW5ndGgsZD1jLnR5cGUoYSk7cmV0dXJuXCJmdW5jdGlvblwiPT09ZHx8Yy5pc1dpbmRvdyhhKT8hMToxPT09YS5ub2RlVHlwZSYmYj8hMDpcImFycmF5XCI9PT1kfHwwPT09Ynx8XCJudW1iZXJcIj09dHlwZW9mIGImJmI+MCYmYi0xIGluIGF9aWYoIWEualF1ZXJ5KXt2YXIgYz1mdW5jdGlvbihhLGIpe3JldHVybiBuZXcgYy5mbi5pbml0KGEsYil9O2MuaXNXaW5kb3c9ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGwhPWEmJmE9PWEud2luZG93fSxjLnR5cGU9ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PWE/YStcIlwiOlwib2JqZWN0XCI9PXR5cGVvZiBhfHxcImZ1bmN0aW9uXCI9PXR5cGVvZiBhP2VbZy5jYWxsKGEpXXx8XCJvYmplY3RcIjp0eXBlb2YgYX0sYy5pc0FycmF5PUFycmF5LmlzQXJyYXl8fGZ1bmN0aW9uKGEpe3JldHVyblwiYXJyYXlcIj09PWMudHlwZShhKX0sYy5pc1BsYWluT2JqZWN0PWZ1bmN0aW9uKGEpe3ZhciBiO2lmKCFhfHxcIm9iamVjdFwiIT09Yy50eXBlKGEpfHxhLm5vZGVUeXBlfHxjLmlzV2luZG93KGEpKXJldHVybiExO3RyeXtpZihhLmNvbnN0cnVjdG9yJiYhZi5jYWxsKGEsXCJjb25zdHJ1Y3RvclwiKSYmIWYuY2FsbChhLmNvbnN0cnVjdG9yLnByb3RvdHlwZSxcImlzUHJvdG90eXBlT2ZcIikpcmV0dXJuITF9Y2F0Y2goZCl7cmV0dXJuITF9Zm9yKGIgaW4gYSk7cmV0dXJuIHZvaWQgMD09PWJ8fGYuY2FsbChhLGIpfSxjLmVhY2g9ZnVuY3Rpb24oYSxjLGQpe3ZhciBlLGY9MCxnPWEubGVuZ3RoLGg9YihhKTtpZihkKXtpZihoKWZvcig7Zz5mJiYoZT1jLmFwcGx5KGFbZl0sZCksZSE9PSExKTtmKyspO2Vsc2UgZm9yKGYgaW4gYSlpZihlPWMuYXBwbHkoYVtmXSxkKSxlPT09ITEpYnJlYWt9ZWxzZSBpZihoKWZvcig7Zz5mJiYoZT1jLmNhbGwoYVtmXSxmLGFbZl0pLGUhPT0hMSk7ZisrKTtlbHNlIGZvcihmIGluIGEpaWYoZT1jLmNhbGwoYVtmXSxmLGFbZl0pLGU9PT0hMSlicmVhaztyZXR1cm4gYX0sYy5kYXRhPWZ1bmN0aW9uKGEsYixlKXtpZih2b2lkIDA9PT1lKXt2YXIgZj1hW2MuZXhwYW5kb10sZz1mJiZkW2ZdO2lmKHZvaWQgMD09PWIpcmV0dXJuIGc7aWYoZyYmYiBpbiBnKXJldHVybiBnW2JdfWVsc2UgaWYodm9pZCAwIT09Yil7dmFyIGY9YVtjLmV4cGFuZG9dfHwoYVtjLmV4cGFuZG9dPSsrYy51dWlkKTtyZXR1cm4gZFtmXT1kW2ZdfHx7fSxkW2ZdW2JdPWUsZX19LGMucmVtb3ZlRGF0YT1mdW5jdGlvbihhLGIpe3ZhciBlPWFbYy5leHBhbmRvXSxmPWUmJmRbZV07ZiYmYy5lYWNoKGIsZnVuY3Rpb24oYSxiKXtkZWxldGUgZltiXX0pfSxjLmV4dGVuZD1mdW5jdGlvbigpe3ZhciBhLGIsZCxlLGYsZyxoPWFyZ3VtZW50c1swXXx8e30saT0xLGo9YXJndW1lbnRzLmxlbmd0aCxrPSExO2ZvcihcImJvb2xlYW5cIj09dHlwZW9mIGgmJihrPWgsaD1hcmd1bWVudHNbaV18fHt9LGkrKyksXCJvYmplY3RcIiE9dHlwZW9mIGgmJlwiZnVuY3Rpb25cIiE9PWMudHlwZShoKSYmKGg9e30pLGk9PT1qJiYoaD10aGlzLGktLSk7aj5pO2krKylpZihudWxsIT0oZj1hcmd1bWVudHNbaV0pKWZvcihlIGluIGYpYT1oW2VdLGQ9ZltlXSxoIT09ZCYmKGsmJmQmJihjLmlzUGxhaW5PYmplY3QoZCl8fChiPWMuaXNBcnJheShkKSkpPyhiPyhiPSExLGc9YSYmYy5pc0FycmF5KGEpP2E6W10pOmc9YSYmYy5pc1BsYWluT2JqZWN0KGEpP2E6e30saFtlXT1jLmV4dGVuZChrLGcsZCkpOnZvaWQgMCE9PWQmJihoW2VdPWQpKTtyZXR1cm4gaH0sYy5xdWV1ZT1mdW5jdGlvbihhLGQsZSl7ZnVuY3Rpb24gZihhLGMpe3ZhciBkPWN8fFtdO3JldHVybiBudWxsIT1hJiYoYihPYmplY3QoYSkpPyFmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0rYi5sZW5ndGgsZD0wLGU9YS5sZW5ndGg7Yz5kOylhW2UrK109YltkKytdO2lmKGMhPT1jKWZvcig7dm9pZCAwIT09YltkXTspYVtlKytdPWJbZCsrXTtyZXR1cm4gYS5sZW5ndGg9ZSxhfShkLFwic3RyaW5nXCI9PXR5cGVvZiBhP1thXTphKTpbXS5wdXNoLmNhbGwoZCxhKSksZH1pZihhKXtkPShkfHxcImZ4XCIpK1wicXVldWVcIjt2YXIgZz1jLmRhdGEoYSxkKTtyZXR1cm4gZT8oIWd8fGMuaXNBcnJheShlKT9nPWMuZGF0YShhLGQsZihlKSk6Zy5wdXNoKGUpLGcpOmd8fFtdfX0sYy5kZXF1ZXVlPWZ1bmN0aW9uKGEsYil7Yy5lYWNoKGEubm9kZVR5cGU/W2FdOmEsZnVuY3Rpb24oYSxkKXtiPWJ8fFwiZnhcIjt2YXIgZT1jLnF1ZXVlKGQsYiksZj1lLnNoaWZ0KCk7XCJpbnByb2dyZXNzXCI9PT1mJiYoZj1lLnNoaWZ0KCkpLGYmJihcImZ4XCI9PT1iJiZlLnVuc2hpZnQoXCJpbnByb2dyZXNzXCIpLGYuY2FsbChkLGZ1bmN0aW9uKCl7Yy5kZXF1ZXVlKGQsYil9KSl9KX0sYy5mbj1jLnByb3RvdHlwZT17aW5pdDpmdW5jdGlvbihhKXtpZihhLm5vZGVUeXBlKXJldHVybiB0aGlzWzBdPWEsdGhpczt0aHJvdyBuZXcgRXJyb3IoXCJOb3QgYSBET00gbm9kZS5cIil9LG9mZnNldDpmdW5jdGlvbigpe3ZhciBiPXRoaXNbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0P3RoaXNbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk6e3RvcDowLGxlZnQ6MH07cmV0dXJue3RvcDpiLnRvcCsoYS5wYWdlWU9mZnNldHx8ZG9jdW1lbnQuc2Nyb2xsVG9wfHwwKS0oZG9jdW1lbnQuY2xpZW50VG9wfHwwKSxsZWZ0OmIubGVmdCsoYS5wYWdlWE9mZnNldHx8ZG9jdW1lbnQuc2Nyb2xsTGVmdHx8MCktKGRvY3VtZW50LmNsaWVudExlZnR8fDApfX0scG9zaXRpb246ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKCl7Zm9yKHZhciBhPXRoaXMub2Zmc2V0UGFyZW50fHxkb2N1bWVudDthJiZcImh0bWxcIj09PSFhLm5vZGVUeXBlLnRvTG93ZXJDYXNlJiZcInN0YXRpY1wiPT09YS5zdHlsZS5wb3NpdGlvbjspYT1hLm9mZnNldFBhcmVudDtyZXR1cm4gYXx8ZG9jdW1lbnR9dmFyIGI9dGhpc1swXSxhPWEuYXBwbHkoYiksZD10aGlzLm9mZnNldCgpLGU9L14oPzpib2R5fGh0bWwpJC9pLnRlc3QoYS5ub2RlTmFtZSk/e3RvcDowLGxlZnQ6MH06YyhhKS5vZmZzZXQoKTtyZXR1cm4gZC50b3AtPXBhcnNlRmxvYXQoYi5zdHlsZS5tYXJnaW5Ub3ApfHwwLGQubGVmdC09cGFyc2VGbG9hdChiLnN0eWxlLm1hcmdpbkxlZnQpfHwwLGEuc3R5bGUmJihlLnRvcCs9cGFyc2VGbG9hdChhLnN0eWxlLmJvcmRlclRvcFdpZHRoKXx8MCxlLmxlZnQrPXBhcnNlRmxvYXQoYS5zdHlsZS5ib3JkZXJMZWZ0V2lkdGgpfHwwKSx7dG9wOmQudG9wLWUudG9wLGxlZnQ6ZC5sZWZ0LWUubGVmdH19fTt2YXIgZD17fTtjLmV4cGFuZG89XCJ2ZWxvY2l0eVwiKyhuZXcgRGF0ZSkuZ2V0VGltZSgpLGMudXVpZD0wO2Zvcih2YXIgZT17fSxmPWUuaGFzT3duUHJvcGVydHksZz1lLnRvU3RyaW5nLGg9XCJCb29sZWFuIE51bWJlciBTdHJpbmcgRnVuY3Rpb24gQXJyYXkgRGF0ZSBSZWdFeHAgT2JqZWN0IEVycm9yXCIuc3BsaXQoXCIgXCIpLGk9MDtpPGgubGVuZ3RoO2krKyllW1wiW29iamVjdCBcIitoW2ldK1wiXVwiXT1oW2ldLnRvTG93ZXJDYXNlKCk7Yy5mbi5pbml0LnByb3RvdHlwZT1jLmZuLGEuVmVsb2NpdHk9e1V0aWxpdGllczpjfX19KHdpbmRvdyksZnVuY3Rpb24oYSl7XCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZSYmXCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPWEoKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKGEpOmEoKX0oZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oYSxiLGMsZCl7ZnVuY3Rpb24gZShhKXtmb3IodmFyIGI9LTEsYz1hP2EubGVuZ3RoOjAsZD1bXTsrK2I8Yzspe3ZhciBlPWFbYl07ZSYmZC5wdXNoKGUpfXJldHVybiBkfWZ1bmN0aW9uIGYoYSl7cmV0dXJuIHAuaXNXcmFwcGVkKGEpP2E9W10uc2xpY2UuY2FsbChhKTpwLmlzTm9kZShhKSYmKGE9W2FdKSxhfWZ1bmN0aW9uIGcoYSl7dmFyIGI9bS5kYXRhKGEsXCJ2ZWxvY2l0eVwiKTtyZXR1cm4gbnVsbD09PWI/ZDpifWZ1bmN0aW9uIGgoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBNYXRoLnJvdW5kKGIqYSkqKDEvYSl9fWZ1bmN0aW9uIGkoYSxjLGQsZSl7ZnVuY3Rpb24gZihhLGIpe3JldHVybiAxLTMqYiszKmF9ZnVuY3Rpb24gZyhhLGIpe3JldHVybiAzKmItNiphfWZ1bmN0aW9uIGgoYSl7cmV0dXJuIDMqYX1mdW5jdGlvbiBpKGEsYixjKXtyZXR1cm4oKGYoYixjKSphK2coYixjKSkqYStoKGIpKSphfWZ1bmN0aW9uIGooYSxiLGMpe3JldHVybiAzKmYoYixjKSphKmErMipnKGIsYykqYStoKGIpfWZ1bmN0aW9uIGsoYixjKXtmb3IodmFyIGU9MDtwPmU7KytlKXt2YXIgZj1qKGMsYSxkKTtpZigwPT09ZilyZXR1cm4gYzt2YXIgZz1pKGMsYSxkKS1iO2MtPWcvZn1yZXR1cm4gY31mdW5jdGlvbiBsKCl7Zm9yKHZhciBiPTA7dD5iOysrYil4W2JdPWkoYip1LGEsZCl9ZnVuY3Rpb24gbShiLGMsZSl7dmFyIGYsZyxoPTA7ZG8gZz1jKyhlLWMpLzIsZj1pKGcsYSxkKS1iLGY+MD9lPWc6Yz1nO3doaWxlKE1hdGguYWJzKGYpPnImJisraDxzKTtyZXR1cm4gZ31mdW5jdGlvbiBuKGIpe2Zvcih2YXIgYz0wLGU9MSxmPXQtMTtlIT1mJiZ4W2VdPD1iOysrZSljKz11Oy0tZTt2YXIgZz0oYi14W2VdKS8oeFtlKzFdLXhbZV0pLGg9YytnKnUsaT1qKGgsYSxkKTtyZXR1cm4gaT49cT9rKGIsaCk6MD09aT9oOm0oYixjLGMrdSl9ZnVuY3Rpb24gbygpe3k9ITAsKGEhPWN8fGQhPWUpJiZsKCl9dmFyIHA9NCxxPS4wMDEscj0xZS03LHM9MTAsdD0xMSx1PTEvKHQtMSksdj1cIkZsb2F0MzJBcnJheVwiaW4gYjtpZig0IT09YXJndW1lbnRzLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIHc9MDs0Pnc7Kyt3KWlmKFwibnVtYmVyXCIhPXR5cGVvZiBhcmd1bWVudHNbd118fGlzTmFOKGFyZ3VtZW50c1t3XSl8fCFpc0Zpbml0ZShhcmd1bWVudHNbd10pKXJldHVybiExO2E9TWF0aC5taW4oYSwxKSxkPU1hdGgubWluKGQsMSksYT1NYXRoLm1heChhLDApLGQ9TWF0aC5tYXgoZCwwKTt2YXIgeD12P25ldyBGbG9hdDMyQXJyYXkodCk6bmV3IEFycmF5KHQpLHk9ITEsej1mdW5jdGlvbihiKXtyZXR1cm4geXx8bygpLGE9PT1jJiZkPT09ZT9iOjA9PT1iPzA6MT09PWI/MTppKG4oYiksYyxlKX07ei5nZXRDb250cm9sUG9pbnRzPWZ1bmN0aW9uKCl7cmV0dXJuW3t4OmEseTpjfSx7eDpkLHk6ZX1dfTt2YXIgQT1cImdlbmVyYXRlQmV6aWVyKFwiK1thLGMsZCxlXStcIilcIjtyZXR1cm4gei50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiBBfSx6fWZ1bmN0aW9uIGooYSxiKXt2YXIgYz1hO3JldHVybiBwLmlzU3RyaW5nKGEpP3QuRWFzaW5nc1thXXx8KGM9ITEpOmM9cC5pc0FycmF5KGEpJiYxPT09YS5sZW5ndGg/aC5hcHBseShudWxsLGEpOnAuaXNBcnJheShhKSYmMj09PWEubGVuZ3RoP3UuYXBwbHkobnVsbCxhLmNvbmNhdChbYl0pKTpwLmlzQXJyYXkoYSkmJjQ9PT1hLmxlbmd0aD9pLmFwcGx5KG51bGwsYSk6ITEsYz09PSExJiYoYz10LkVhc2luZ3NbdC5kZWZhdWx0cy5lYXNpbmddP3QuZGVmYXVsdHMuZWFzaW5nOnMpLGN9ZnVuY3Rpb24gayhhKXtpZihhKXt2YXIgYj0obmV3IERhdGUpLmdldFRpbWUoKSxjPXQuU3RhdGUuY2FsbHMubGVuZ3RoO2M+MWU0JiYodC5TdGF0ZS5jYWxscz1lKHQuU3RhdGUuY2FsbHMpKTtmb3IodmFyIGY9MDtjPmY7ZisrKWlmKHQuU3RhdGUuY2FsbHNbZl0pe3ZhciBoPXQuU3RhdGUuY2FsbHNbZl0saT1oWzBdLGo9aFsyXSxuPWhbM10sbz0hIW4scT1udWxsO258fChuPXQuU3RhdGUuY2FsbHNbZl1bM109Yi0xNik7Zm9yKHZhciByPU1hdGgubWluKChiLW4pL2ouZHVyYXRpb24sMSkscz0wLHU9aS5sZW5ndGg7dT5zO3MrKyl7dmFyIHc9aVtzXSx5PXcuZWxlbWVudDtpZihnKHkpKXt2YXIgej0hMTtpZihqLmRpc3BsYXkhPT1kJiZudWxsIT09ai5kaXNwbGF5JiZcIm5vbmVcIiE9PWouZGlzcGxheSl7aWYoXCJmbGV4XCI9PT1qLmRpc3BsYXkpe3ZhciBBPVtcIi13ZWJraXQtYm94XCIsXCItbW96LWJveFwiLFwiLW1zLWZsZXhib3hcIixcIi13ZWJraXQtZmxleFwiXTttLmVhY2goQSxmdW5jdGlvbihhLGIpe3Yuc2V0UHJvcGVydHlWYWx1ZSh5LFwiZGlzcGxheVwiLGIpfSl9di5zZXRQcm9wZXJ0eVZhbHVlKHksXCJkaXNwbGF5XCIsai5kaXNwbGF5KX1qLnZpc2liaWxpdHkhPT1kJiZcImhpZGRlblwiIT09ai52aXNpYmlsaXR5JiZ2LnNldFByb3BlcnR5VmFsdWUoeSxcInZpc2liaWxpdHlcIixqLnZpc2liaWxpdHkpO2Zvcih2YXIgQiBpbiB3KWlmKFwiZWxlbWVudFwiIT09Qil7dmFyIEMsRD13W0JdLEU9cC5pc1N0cmluZyhELmVhc2luZyk/dC5FYXNpbmdzW0QuZWFzaW5nXTpELmVhc2luZztpZigxPT09cilDPUQuZW5kVmFsdWU7ZWxzZXt2YXIgRj1ELmVuZFZhbHVlLUQuc3RhcnRWYWx1ZTtpZihDPUQuc3RhcnRWYWx1ZStGKkUocixqLEYpLCFvJiZDPT09RC5jdXJyZW50VmFsdWUpY29udGludWV9aWYoRC5jdXJyZW50VmFsdWU9QyxcInR3ZWVuXCI9PT1CKXE9QztlbHNle2lmKHYuSG9va3MucmVnaXN0ZXJlZFtCXSl7dmFyIEc9di5Ib29rcy5nZXRSb290KEIpLEg9Zyh5KS5yb290UHJvcGVydHlWYWx1ZUNhY2hlW0ddO0gmJihELnJvb3RQcm9wZXJ0eVZhbHVlPUgpfXZhciBJPXYuc2V0UHJvcGVydHlWYWx1ZSh5LEIsRC5jdXJyZW50VmFsdWUrKDA9PT1wYXJzZUZsb2F0KEMpP1wiXCI6RC51bml0VHlwZSksRC5yb290UHJvcGVydHlWYWx1ZSxELnNjcm9sbERhdGEpO3YuSG9va3MucmVnaXN0ZXJlZFtCXSYmKGcoeSkucm9vdFByb3BlcnR5VmFsdWVDYWNoZVtHXT12Lk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbR10/di5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW0ddKFwiZXh0cmFjdFwiLG51bGwsSVsxXSk6SVsxXSksXCJ0cmFuc2Zvcm1cIj09PUlbMF0mJih6PSEwKX19ai5tb2JpbGVIQSYmZyh5KS50cmFuc2Zvcm1DYWNoZS50cmFuc2xhdGUzZD09PWQmJihnKHkpLnRyYW5zZm9ybUNhY2hlLnRyYW5zbGF0ZTNkPVwiKDBweCwgMHB4LCAwcHgpXCIsej0hMCkseiYmdi5mbHVzaFRyYW5zZm9ybUNhY2hlKHkpfX1qLmRpc3BsYXkhPT1kJiZcIm5vbmVcIiE9PWouZGlzcGxheSYmKHQuU3RhdGUuY2FsbHNbZl1bMl0uZGlzcGxheT0hMSksai52aXNpYmlsaXR5IT09ZCYmXCJoaWRkZW5cIiE9PWoudmlzaWJpbGl0eSYmKHQuU3RhdGUuY2FsbHNbZl1bMl0udmlzaWJpbGl0eT0hMSksai5wcm9ncmVzcyYmai5wcm9ncmVzcy5jYWxsKGhbMV0saFsxXSxyLE1hdGgubWF4KDAsbitqLmR1cmF0aW9uLWIpLG4scSksMT09PXImJmwoZil9fXQuU3RhdGUuaXNUaWNraW5nJiZ4KGspfWZ1bmN0aW9uIGwoYSxiKXtpZighdC5TdGF0ZS5jYWxsc1thXSlyZXR1cm4hMTtmb3IodmFyIGM9dC5TdGF0ZS5jYWxsc1thXVswXSxlPXQuU3RhdGUuY2FsbHNbYV1bMV0sZj10LlN0YXRlLmNhbGxzW2FdWzJdLGg9dC5TdGF0ZS5jYWxsc1thXVs0XSxpPSExLGo9MCxrPWMubGVuZ3RoO2s+ajtqKyspe3ZhciBsPWNbal0uZWxlbWVudDtpZihifHxmLmxvb3B8fChcIm5vbmVcIj09PWYuZGlzcGxheSYmdi5zZXRQcm9wZXJ0eVZhbHVlKGwsXCJkaXNwbGF5XCIsZi5kaXNwbGF5KSxcImhpZGRlblwiPT09Zi52aXNpYmlsaXR5JiZ2LnNldFByb3BlcnR5VmFsdWUobCxcInZpc2liaWxpdHlcIixmLnZpc2liaWxpdHkpKSxmLmxvb3AhPT0hMCYmKG0ucXVldWUobClbMV09PT1kfHwhL1xcLnZlbG9jaXR5UXVldWVFbnRyeUZsYWcvaS50ZXN0KG0ucXVldWUobClbMV0pKSYmZyhsKSl7ZyhsKS5pc0FuaW1hdGluZz0hMSxnKGwpLnJvb3RQcm9wZXJ0eVZhbHVlQ2FjaGU9e307dmFyIG49ITE7bS5lYWNoKHYuTGlzdHMudHJhbnNmb3JtczNELGZ1bmN0aW9uKGEsYil7dmFyIGM9L15zY2FsZS8udGVzdChiKT8xOjAsZT1nKGwpLnRyYW5zZm9ybUNhY2hlW2JdO2cobCkudHJhbnNmb3JtQ2FjaGVbYl0hPT1kJiZuZXcgUmVnRXhwKFwiXlxcXFwoXCIrYytcIlteLl1cIikudGVzdChlKSYmKG49ITAsZGVsZXRlIGcobCkudHJhbnNmb3JtQ2FjaGVbYl0pfSksZi5tb2JpbGVIQSYmKG49ITAsZGVsZXRlIGcobCkudHJhbnNmb3JtQ2FjaGUudHJhbnNsYXRlM2QpLG4mJnYuZmx1c2hUcmFuc2Zvcm1DYWNoZShsKSx2LlZhbHVlcy5yZW1vdmVDbGFzcyhsLFwidmVsb2NpdHktYW5pbWF0aW5nXCIpfWlmKCFiJiZmLmNvbXBsZXRlJiYhZi5sb29wJiZqPT09ay0xKXRyeXtmLmNvbXBsZXRlLmNhbGwoZSxlKX1jYXRjaChvKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dGhyb3cgb30sMSl9aCYmZi5sb29wIT09ITAmJmgoZSksZyhsKSYmZi5sb29wPT09ITAmJiFiJiYobS5lYWNoKGcobCkudHdlZW5zQ29udGFpbmVyLGZ1bmN0aW9uKGEsYil7L15yb3RhdGUvLnRlc3QoYSkmJjM2MD09PXBhcnNlRmxvYXQoYi5lbmRWYWx1ZSkmJihiLmVuZFZhbHVlPTAsYi5zdGFydFZhbHVlPTM2MCksL15iYWNrZ3JvdW5kUG9zaXRpb24vLnRlc3QoYSkmJjEwMD09PXBhcnNlRmxvYXQoYi5lbmRWYWx1ZSkmJlwiJVwiPT09Yi51bml0VHlwZSYmKGIuZW5kVmFsdWU9MCxiLnN0YXJ0VmFsdWU9MTAwKX0pLHQobCxcInJldmVyc2VcIix7bG9vcDohMCxkZWxheTpmLmRlbGF5fSkpLGYucXVldWUhPT0hMSYmbS5kZXF1ZXVlKGwsZi5xdWV1ZSl9dC5TdGF0ZS5jYWxsc1thXT0hMTtmb3IodmFyIHA9MCxxPXQuU3RhdGUuY2FsbHMubGVuZ3RoO3E+cDtwKyspaWYodC5TdGF0ZS5jYWxsc1twXSE9PSExKXtpPSEwO2JyZWFrfWk9PT0hMSYmKHQuU3RhdGUuaXNUaWNraW5nPSExLGRlbGV0ZSB0LlN0YXRlLmNhbGxzLHQuU3RhdGUuY2FsbHM9W10pfXZhciBtLG49ZnVuY3Rpb24oKXtpZihjLmRvY3VtZW50TW9kZSlyZXR1cm4gYy5kb2N1bWVudE1vZGU7Zm9yKHZhciBhPTc7YT40O2EtLSl7dmFyIGI9Yy5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2lmKGIuaW5uZXJIVE1MPVwiPCEtLVtpZiBJRSBcIithK1wiXT48c3Bhbj48L3NwYW4+PCFbZW5kaWZdLS0+XCIsYi5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNwYW5cIikubGVuZ3RoKXJldHVybiBiPW51bGwsYX1yZXR1cm4gZH0oKSxvPWZ1bmN0aW9uKCl7dmFyIGE9MDtyZXR1cm4gYi53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fGIubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxmdW5jdGlvbihiKXt2YXIgYyxkPShuZXcgRGF0ZSkuZ2V0VGltZSgpO3JldHVybiBjPU1hdGgubWF4KDAsMTYtKGQtYSkpLGE9ZCtjLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtiKGQrYyl9LGMpfX0oKSxwPXtpc1N0cmluZzpmdW5jdGlvbihhKXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgYX0saXNBcnJheTpBcnJheS5pc0FycmF5fHxmdW5jdGlvbihhKXtyZXR1cm5cIltvYmplY3QgQXJyYXldXCI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYSl9LGlzRnVuY3Rpb246ZnVuY3Rpb24oYSl7cmV0dXJuXCJbb2JqZWN0IEZ1bmN0aW9uXVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEpfSxpc05vZGU6ZnVuY3Rpb24oYSl7cmV0dXJuIGEmJmEubm9kZVR5cGV9LGlzTm9kZUxpc3Q6ZnVuY3Rpb24oYSl7cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIGEmJi9eXFxbb2JqZWN0IChIVE1MQ29sbGVjdGlvbnxOb2RlTGlzdHxPYmplY3QpXFxdJC8udGVzdChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYSkpJiZhLmxlbmd0aCE9PWQmJigwPT09YS5sZW5ndGh8fFwib2JqZWN0XCI9PXR5cGVvZiBhWzBdJiZhWzBdLm5vZGVUeXBlPjApfSxpc1dyYXBwZWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEmJihhLmpxdWVyeXx8Yi5aZXB0byYmYi5aZXB0by56ZXB0by5pc1ooYSkpfSxpc1NWRzpmdW5jdGlvbihhKXtyZXR1cm4gYi5TVkdFbGVtZW50JiZhIGluc3RhbmNlb2YgYi5TVkdFbGVtZW50fSxpc0VtcHR5T2JqZWN0OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYiBpbiBhKXJldHVybiExO3JldHVybiEwfX0scT0hMTtpZihhLmZuJiZhLmZuLmpxdWVyeT8obT1hLHE9ITApOm09Yi5WZWxvY2l0eS5VdGlsaXRpZXMsOD49biYmIXEpdGhyb3cgbmV3IEVycm9yKFwiVmVsb2NpdHk6IElFOCBhbmQgYmVsb3cgcmVxdWlyZSBqUXVlcnkgdG8gYmUgbG9hZGVkIGJlZm9yZSBWZWxvY2l0eS5cIik7aWYoNz49bilyZXR1cm4gdm9pZChqUXVlcnkuZm4udmVsb2NpdHk9alF1ZXJ5LmZuLmFuaW1hdGUpO3ZhciByPTQwMCxzPVwic3dpbmdcIix0PXtTdGF0ZTp7aXNNb2JpbGU6L0FuZHJvaWR8d2ViT1N8aVBob25lfGlQYWR8aVBvZHxCbGFja0JlcnJ5fElFTW9iaWxlfE9wZXJhIE1pbmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLGlzQW5kcm9pZDovQW5kcm9pZC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksaXNHaW5nZXJicmVhZDovQW5kcm9pZCAyXFwuM1xcLlszLTddL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxpc0Nocm9tZTpiLmNocm9tZSxpc0ZpcmVmb3g6L0ZpcmVmb3gvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLHByZWZpeEVsZW1lbnQ6Yy5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHByZWZpeE1hdGNoZXM6e30sc2Nyb2xsQW5jaG9yOm51bGwsc2Nyb2xsUHJvcGVydHlMZWZ0Om51bGwsc2Nyb2xsUHJvcGVydHlUb3A6bnVsbCxpc1RpY2tpbmc6ITEsY2FsbHM6W119LENTUzp7fSxVdGlsaXRpZXM6bSxSZWRpcmVjdHM6e30sRWFzaW5nczp7fSxQcm9taXNlOmIuUHJvbWlzZSxkZWZhdWx0czp7cXVldWU6XCJcIixkdXJhdGlvbjpyLGVhc2luZzpzLGJlZ2luOmQsY29tcGxldGU6ZCxwcm9ncmVzczpkLGRpc3BsYXk6ZCx2aXNpYmlsaXR5OmQsbG9vcDohMSxkZWxheTohMSxtb2JpbGVIQTohMCxfY2FjaGVWYWx1ZXM6ITB9LGluaXQ6ZnVuY3Rpb24oYSl7bS5kYXRhKGEsXCJ2ZWxvY2l0eVwiLHtpc1NWRzpwLmlzU1ZHKGEpLGlzQW5pbWF0aW5nOiExLGNvbXB1dGVkU3R5bGU6bnVsbCx0d2VlbnNDb250YWluZXI6bnVsbCxyb290UHJvcGVydHlWYWx1ZUNhY2hlOnt9LHRyYW5zZm9ybUNhY2hlOnt9fSl9LGhvb2s6bnVsbCxtb2NrOiExLHZlcnNpb246e21ham9yOjEsbWlub3I6MixwYXRjaDoyfSxkZWJ1ZzohMX07Yi5wYWdlWU9mZnNldCE9PWQ/KHQuU3RhdGUuc2Nyb2xsQW5jaG9yPWIsdC5TdGF0ZS5zY3JvbGxQcm9wZXJ0eUxlZnQ9XCJwYWdlWE9mZnNldFwiLHQuU3RhdGUuc2Nyb2xsUHJvcGVydHlUb3A9XCJwYWdlWU9mZnNldFwiKToodC5TdGF0ZS5zY3JvbGxBbmNob3I9Yy5kb2N1bWVudEVsZW1lbnR8fGMuYm9keS5wYXJlbnROb2RlfHxjLmJvZHksdC5TdGF0ZS5zY3JvbGxQcm9wZXJ0eUxlZnQ9XCJzY3JvbGxMZWZ0XCIsdC5TdGF0ZS5zY3JvbGxQcm9wZXJ0eVRvcD1cInNjcm9sbFRvcFwiKTt2YXIgdT1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSl7cmV0dXJuLWEudGVuc2lvbiphLngtYS5mcmljdGlvbiphLnZ9ZnVuY3Rpb24gYihiLGMsZCl7dmFyIGU9e3g6Yi54K2QuZHgqYyx2OmIuditkLmR2KmMsdGVuc2lvbjpiLnRlbnNpb24sZnJpY3Rpb246Yi5mcmljdGlvbn07cmV0dXJue2R4OmUudixkdjphKGUpfX1mdW5jdGlvbiBjKGMsZCl7dmFyIGU9e2R4OmMudixkdjphKGMpfSxmPWIoYywuNSpkLGUpLGc9YihjLC41KmQsZiksaD1iKGMsZCxnKSxpPTEvNiooZS5keCsyKihmLmR4K2cuZHgpK2guZHgpLGo9MS82KihlLmR2KzIqKGYuZHYrZy5kdikraC5kdik7cmV0dXJuIGMueD1jLngraSpkLGMudj1jLnYraipkLGN9cmV0dXJuIGZ1bmN0aW9uIGQoYSxiLGUpe3ZhciBmLGcsaCxpPXt4Oi0xLHY6MCx0ZW5zaW9uOm51bGwsZnJpY3Rpb246bnVsbH0saj1bMF0saz0wLGw9MWUtNCxtPS4wMTY7Zm9yKGE9cGFyc2VGbG9hdChhKXx8NTAwLGI9cGFyc2VGbG9hdChiKXx8MjAsZT1lfHxudWxsLGkudGVuc2lvbj1hLGkuZnJpY3Rpb249YixmPW51bGwhPT1lLGY/KGs9ZChhLGIpLGc9ay9lKm0pOmc9bTtoPWMoaHx8aSxnKSxqLnB1c2goMStoLngpLGsrPTE2LE1hdGguYWJzKGgueCk+bCYmTWF0aC5hYnMoaC52KT5sOyk7cmV0dXJuIGY/ZnVuY3Rpb24oYSl7cmV0dXJuIGpbYSooai5sZW5ndGgtMSl8MF19Omt9fSgpO3QuRWFzaW5ncz17bGluZWFyOmZ1bmN0aW9uKGEpe3JldHVybiBhfSxzd2luZzpmdW5jdGlvbihhKXtyZXR1cm4uNS1NYXRoLmNvcyhhKk1hdGguUEkpLzJ9LHNwcmluZzpmdW5jdGlvbihhKXtyZXR1cm4gMS1NYXRoLmNvcyg0LjUqYSpNYXRoLlBJKSpNYXRoLmV4cCg2Ki1hKX19LG0uZWFjaChbW1wiZWFzZVwiLFsuMjUsLjEsLjI1LDFdXSxbXCJlYXNlLWluXCIsWy40MiwwLDEsMV1dLFtcImVhc2Utb3V0XCIsWzAsMCwuNTgsMV1dLFtcImVhc2UtaW4tb3V0XCIsWy40MiwwLC41OCwxXV0sW1wiZWFzZUluU2luZVwiLFsuNDcsMCwuNzQ1LC43MTVdXSxbXCJlYXNlT3V0U2luZVwiLFsuMzksLjU3NSwuNTY1LDFdXSxbXCJlYXNlSW5PdXRTaW5lXCIsWy40NDUsLjA1LC41NSwuOTVdXSxbXCJlYXNlSW5RdWFkXCIsWy41NSwuMDg1LC42OCwuNTNdXSxbXCJlYXNlT3V0UXVhZFwiLFsuMjUsLjQ2LC40NSwuOTRdXSxbXCJlYXNlSW5PdXRRdWFkXCIsWy40NTUsLjAzLC41MTUsLjk1NV1dLFtcImVhc2VJbkN1YmljXCIsWy41NSwuMDU1LC42NzUsLjE5XV0sW1wiZWFzZU91dEN1YmljXCIsWy4yMTUsLjYxLC4zNTUsMV1dLFtcImVhc2VJbk91dEN1YmljXCIsWy42NDUsLjA0NSwuMzU1LDFdXSxbXCJlYXNlSW5RdWFydFwiLFsuODk1LC4wMywuNjg1LC4yMl1dLFtcImVhc2VPdXRRdWFydFwiLFsuMTY1LC44NCwuNDQsMV1dLFtcImVhc2VJbk91dFF1YXJ0XCIsWy43NywwLC4xNzUsMV1dLFtcImVhc2VJblF1aW50XCIsWy43NTUsLjA1LC44NTUsLjA2XV0sW1wiZWFzZU91dFF1aW50XCIsWy4yMywxLC4zMiwxXV0sW1wiZWFzZUluT3V0UXVpbnRcIixbLjg2LDAsLjA3LDFdXSxbXCJlYXNlSW5FeHBvXCIsWy45NSwuMDUsLjc5NSwuMDM1XV0sW1wiZWFzZU91dEV4cG9cIixbLjE5LDEsLjIyLDFdXSxbXCJlYXNlSW5PdXRFeHBvXCIsWzEsMCwwLDFdXSxbXCJlYXNlSW5DaXJjXCIsWy42LC4wNCwuOTgsLjMzNV1dLFtcImVhc2VPdXRDaXJjXCIsWy4wNzUsLjgyLC4xNjUsMV1dLFtcImVhc2VJbk91dENpcmNcIixbLjc4NSwuMTM1LC4xNSwuODZdXV0sZnVuY3Rpb24oYSxiKXt0LkVhc2luZ3NbYlswXV09aS5hcHBseShudWxsLGJbMV0pfSk7dmFyIHY9dC5DU1M9e1JlZ0V4Ontpc0hleDovXiMoW0EtZlxcZF17M30pezEsMn0kL2ksdmFsdWVVbndyYXA6L15bQS16XStcXCgoLiopXFwpJC9pLHdyYXBwZWRWYWx1ZUFscmVhZHlFeHRyYWN0ZWQ6L1swLTkuXSsgWzAtOS5dKyBbMC05Ll0rKCBbMC05Ll0rKT8vLHZhbHVlU3BsaXQ6LyhbQS16XStcXCguK1xcKSl8KChbQS16MC05Iy0uXSs/KSg/PVxcc3wkKSkvZ2l9LExpc3RzOntjb2xvcnM6W1wiZmlsbFwiLFwic3Ryb2tlXCIsXCJzdG9wQ29sb3JcIixcImNvbG9yXCIsXCJiYWNrZ3JvdW5kQ29sb3JcIixcImJvcmRlckNvbG9yXCIsXCJib3JkZXJUb3BDb2xvclwiLFwiYm9yZGVyUmlnaHRDb2xvclwiLFwiYm9yZGVyQm90dG9tQ29sb3JcIixcImJvcmRlckxlZnRDb2xvclwiLFwib3V0bGluZUNvbG9yXCJdLHRyYW5zZm9ybXNCYXNlOltcInRyYW5zbGF0ZVhcIixcInRyYW5zbGF0ZVlcIixcInNjYWxlXCIsXCJzY2FsZVhcIixcInNjYWxlWVwiLFwic2tld1hcIixcInNrZXdZXCIsXCJyb3RhdGVaXCJdLHRyYW5zZm9ybXMzRDpbXCJ0cmFuc2Zvcm1QZXJzcGVjdGl2ZVwiLFwidHJhbnNsYXRlWlwiLFwic2NhbGVaXCIsXCJyb3RhdGVYXCIsXCJyb3RhdGVZXCJdfSxIb29rczp7dGVtcGxhdGVzOnt0ZXh0U2hhZG93OltcIkNvbG9yIFggWSBCbHVyXCIsXCJibGFjayAwcHggMHB4IDBweFwiXSxib3hTaGFkb3c6W1wiQ29sb3IgWCBZIEJsdXIgU3ByZWFkXCIsXCJibGFjayAwcHggMHB4IDBweCAwcHhcIl0sY2xpcDpbXCJUb3AgUmlnaHQgQm90dG9tIExlZnRcIixcIjBweCAwcHggMHB4IDBweFwiXSxiYWNrZ3JvdW5kUG9zaXRpb246W1wiWCBZXCIsXCIwJSAwJVwiXSx0cmFuc2Zvcm1PcmlnaW46W1wiWCBZIFpcIixcIjUwJSA1MCUgMHB4XCJdLHBlcnNwZWN0aXZlT3JpZ2luOltcIlggWVwiLFwiNTAlIDUwJVwiXX0scmVnaXN0ZXJlZDp7fSxyZWdpc3RlcjpmdW5jdGlvbigpe2Zvcih2YXIgYT0wO2E8di5MaXN0cy5jb2xvcnMubGVuZ3RoO2ErKyl7dmFyIGI9XCJjb2xvclwiPT09di5MaXN0cy5jb2xvcnNbYV0/XCIwIDAgMCAxXCI6XCIyNTUgMjU1IDI1NSAxXCI7di5Ib29rcy50ZW1wbGF0ZXNbdi5MaXN0cy5jb2xvcnNbYV1dPVtcIlJlZCBHcmVlbiBCbHVlIEFscGhhXCIsYl19dmFyIGMsZCxlO2lmKG4pZm9yKGMgaW4gdi5Ib29rcy50ZW1wbGF0ZXMpe2Q9di5Ib29rcy50ZW1wbGF0ZXNbY10sZT1kWzBdLnNwbGl0KFwiIFwiKTt2YXIgZj1kWzFdLm1hdGNoKHYuUmVnRXgudmFsdWVTcGxpdCk7XCJDb2xvclwiPT09ZVswXSYmKGUucHVzaChlLnNoaWZ0KCkpLGYucHVzaChmLnNoaWZ0KCkpLHYuSG9va3MudGVtcGxhdGVzW2NdPVtlLmpvaW4oXCIgXCIpLGYuam9pbihcIiBcIildKX1mb3IoYyBpbiB2Lkhvb2tzLnRlbXBsYXRlcyl7ZD12Lkhvb2tzLnRlbXBsYXRlc1tjXSxlPWRbMF0uc3BsaXQoXCIgXCIpO2Zvcih2YXIgYSBpbiBlKXt2YXIgZz1jK2VbYV0saD1hO3YuSG9va3MucmVnaXN0ZXJlZFtnXT1bYyxoXX19fSxnZXRSb290OmZ1bmN0aW9uKGEpe3ZhciBiPXYuSG9va3MucmVnaXN0ZXJlZFthXTtyZXR1cm4gYj9iWzBdOmF9LGNsZWFuUm9vdFByb3BlcnR5VmFsdWU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdi5SZWdFeC52YWx1ZVVud3JhcC50ZXN0KGIpJiYoYj1iLm1hdGNoKHYuUmVnRXgudmFsdWVVbndyYXApWzFdKSx2LlZhbHVlcy5pc0NTU051bGxWYWx1ZShiKSYmKGI9di5Ib29rcy50ZW1wbGF0ZXNbYV1bMV0pLGJ9LGV4dHJhY3RWYWx1ZTpmdW5jdGlvbihhLGIpe3ZhciBjPXYuSG9va3MucmVnaXN0ZXJlZFthXTtpZihjKXt2YXIgZD1jWzBdLGU9Y1sxXTtyZXR1cm4gYj12Lkhvb2tzLmNsZWFuUm9vdFByb3BlcnR5VmFsdWUoZCxiKSxiLnRvU3RyaW5nKCkubWF0Y2godi5SZWdFeC52YWx1ZVNwbGl0KVtlXX1yZXR1cm4gYn0saW5qZWN0VmFsdWU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXYuSG9va3MucmVnaXN0ZXJlZFthXTtpZihkKXt2YXIgZSxmLGc9ZFswXSxoPWRbMV07cmV0dXJuIGM9di5Ib29rcy5jbGVhblJvb3RQcm9wZXJ0eVZhbHVlKGcsYyksZT1jLnRvU3RyaW5nKCkubWF0Y2godi5SZWdFeC52YWx1ZVNwbGl0KSxlW2hdPWIsZj1lLmpvaW4oXCIgXCIpfXJldHVybiBjfX0sTm9ybWFsaXphdGlvbnM6e3JlZ2lzdGVyZWQ6e2NsaXA6ZnVuY3Rpb24oYSxiLGMpe3N3aXRjaChhKXtjYXNlXCJuYW1lXCI6cmV0dXJuXCJjbGlwXCI7Y2FzZVwiZXh0cmFjdFwiOnZhciBkO3JldHVybiB2LlJlZ0V4LndyYXBwZWRWYWx1ZUFscmVhZHlFeHRyYWN0ZWQudGVzdChjKT9kPWM6KGQ9Yy50b1N0cmluZygpLm1hdGNoKHYuUmVnRXgudmFsdWVVbndyYXApLGQ9ZD9kWzFdLnJlcGxhY2UoLywoXFxzKyk/L2csXCIgXCIpOmMpLGQ7Y2FzZVwiaW5qZWN0XCI6cmV0dXJuXCJyZWN0KFwiK2MrXCIpXCJ9fSxibHVyOmZ1bmN0aW9uKGEsYixjKXtzd2l0Y2goYSl7Y2FzZVwibmFtZVwiOnJldHVybiB0LlN0YXRlLmlzRmlyZWZveD9cImZpbHRlclwiOlwiLXdlYmtpdC1maWx0ZXJcIjtjYXNlXCJleHRyYWN0XCI6dmFyIGQ9cGFyc2VGbG9hdChjKTtpZighZCYmMCE9PWQpe3ZhciBlPWMudG9TdHJpbmcoKS5tYXRjaCgvYmx1clxcKChbMC05XStbQS16XSspXFwpL2kpO2Q9ZT9lWzFdOjB9cmV0dXJuIGQ7Y2FzZVwiaW5qZWN0XCI6cmV0dXJuIHBhcnNlRmxvYXQoYyk/XCJibHVyKFwiK2MrXCIpXCI6XCJub25lXCJ9fSxvcGFjaXR5OmZ1bmN0aW9uKGEsYixjKXtpZig4Pj1uKXN3aXRjaChhKXtjYXNlXCJuYW1lXCI6cmV0dXJuXCJmaWx0ZXJcIjtjYXNlXCJleHRyYWN0XCI6dmFyIGQ9Yy50b1N0cmluZygpLm1hdGNoKC9hbHBoYVxcKG9wYWNpdHk9KC4qKVxcKS9pKTtyZXR1cm4gYz1kP2RbMV0vMTAwOjE7Y2FzZVwiaW5qZWN0XCI6cmV0dXJuIGIuc3R5bGUuem9vbT0xLHBhcnNlRmxvYXQoYyk+PTE/XCJcIjpcImFscGhhKG9wYWNpdHk9XCIrcGFyc2VJbnQoMTAwKnBhcnNlRmxvYXQoYyksMTApK1wiKVwifWVsc2Ugc3dpdGNoKGEpe2Nhc2VcIm5hbWVcIjpyZXR1cm5cIm9wYWNpdHlcIjtjYXNlXCJleHRyYWN0XCI6cmV0dXJuIGM7Y2FzZVwiaW5qZWN0XCI6cmV0dXJuIGN9fX0scmVnaXN0ZXI6ZnVuY3Rpb24oKXs5Pj1ufHx0LlN0YXRlLmlzR2luZ2VyYnJlYWR8fCh2Lkxpc3RzLnRyYW5zZm9ybXNCYXNlPXYuTGlzdHMudHJhbnNmb3Jtc0Jhc2UuY29uY2F0KHYuTGlzdHMudHJhbnNmb3JtczNEKSk7Zm9yKHZhciBhPTA7YTx2Lkxpc3RzLnRyYW5zZm9ybXNCYXNlLmxlbmd0aDthKyspIWZ1bmN0aW9uKCl7dmFyIGI9di5MaXN0cy50cmFuc2Zvcm1zQmFzZVthXTt2Lk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbYl09ZnVuY3Rpb24oYSxjLGUpe3N3aXRjaChhKXtjYXNlXCJuYW1lXCI6cmV0dXJuXCJ0cmFuc2Zvcm1cIjtjYXNlXCJleHRyYWN0XCI6cmV0dXJuIGcoYyk9PT1kfHxnKGMpLnRyYW5zZm9ybUNhY2hlW2JdPT09ZD8vXnNjYWxlL2kudGVzdChiKT8xOjA6ZyhjKS50cmFuc2Zvcm1DYWNoZVtiXS5yZXBsYWNlKC9bKCldL2csXCJcIik7Y2FzZVwiaW5qZWN0XCI6dmFyIGY9ITE7c3dpdGNoKGIuc3Vic3RyKDAsYi5sZW5ndGgtMSkpe2Nhc2VcInRyYW5zbGF0ZVwiOmY9IS8oJXxweHxlbXxyZW18dnd8dmh8XFxkKSQvaS50ZXN0KGUpO2JyZWFrO2Nhc2VcInNjYWxcIjpjYXNlXCJzY2FsZVwiOnQuU3RhdGUuaXNBbmRyb2lkJiZnKGMpLnRyYW5zZm9ybUNhY2hlW2JdPT09ZCYmMT5lJiYoZT0xKSxmPSEvKFxcZCkkL2kudGVzdChlKTticmVhaztjYXNlXCJza2V3XCI6Zj0hLyhkZWd8XFxkKSQvaS50ZXN0KGUpO2JyZWFrO2Nhc2VcInJvdGF0ZVwiOmY9IS8oZGVnfFxcZCkkL2kudGVzdChlKX1yZXR1cm4gZnx8KGcoYykudHJhbnNmb3JtQ2FjaGVbYl09XCIoXCIrZStcIilcIiksZyhjKS50cmFuc2Zvcm1DYWNoZVtiXX19fSgpO2Zvcih2YXIgYT0wO2E8di5MaXN0cy5jb2xvcnMubGVuZ3RoO2ErKykhZnVuY3Rpb24oKXt2YXIgYj12Lkxpc3RzLmNvbG9yc1thXTt2Lk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbYl09ZnVuY3Rpb24oYSxjLGUpe3N3aXRjaChhKXtjYXNlXCJuYW1lXCI6cmV0dXJuIGI7Y2FzZVwiZXh0cmFjdFwiOnZhciBmO2lmKHYuUmVnRXgud3JhcHBlZFZhbHVlQWxyZWFkeUV4dHJhY3RlZC50ZXN0KGUpKWY9ZTtlbHNle3ZhciBnLGg9e2JsYWNrOlwicmdiKDAsIDAsIDApXCIsYmx1ZTpcInJnYigwLCAwLCAyNTUpXCIsZ3JheTpcInJnYigxMjgsIDEyOCwgMTI4KVwiLGdyZWVuOlwicmdiKDAsIDEyOCwgMClcIixyZWQ6XCJyZ2IoMjU1LCAwLCAwKVwiLHdoaXRlOlwicmdiKDI1NSwgMjU1LCAyNTUpXCJ9Oy9eW0Etel0rJC9pLnRlc3QoZSk/Zz1oW2VdIT09ZD9oW2VdOmguYmxhY2s6di5SZWdFeC5pc0hleC50ZXN0KGUpP2c9XCJyZ2IoXCIrdi5WYWx1ZXMuaGV4VG9SZ2IoZSkuam9pbihcIiBcIikrXCIpXCI6L15yZ2JhP1xcKC9pLnRlc3QoZSl8fChnPWguYmxhY2spLGY9KGd8fGUpLnRvU3RyaW5nKCkubWF0Y2godi5SZWdFeC52YWx1ZVVud3JhcClbMV0ucmVwbGFjZSgvLChcXHMrKT8vZyxcIiBcIil9cmV0dXJuIDg+PW58fDMhPT1mLnNwbGl0KFwiIFwiKS5sZW5ndGh8fChmKz1cIiAxXCIpLGY7Y2FzZVwiaW5qZWN0XCI6cmV0dXJuIDg+PW4/ND09PWUuc3BsaXQoXCIgXCIpLmxlbmd0aCYmKGU9ZS5zcGxpdCgvXFxzKy8pLnNsaWNlKDAsMykuam9pbihcIiBcIikpOjM9PT1lLnNwbGl0KFwiIFwiKS5sZW5ndGgmJihlKz1cIiAxXCIpLCg4Pj1uP1wicmdiXCI6XCJyZ2JhXCIpK1wiKFwiK2UucmVwbGFjZSgvXFxzKy9nLFwiLFwiKS5yZXBsYWNlKC9cXC4oXFxkKSsoPz0sKS9nLFwiXCIpK1wiKVwifX19KCl9fSxOYW1lczp7Y2FtZWxDYXNlOmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UoLy0oXFx3KS9nLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGIudG9VcHBlckNhc2UoKX0pfSxTVkdBdHRyaWJ1dGU6ZnVuY3Rpb24oYSl7dmFyIGI9XCJ3aWR0aHxoZWlnaHR8eHx5fGN4fGN5fHJ8cnh8cnl8eDF8eDJ8eTF8eTJcIjtyZXR1cm4obnx8dC5TdGF0ZS5pc0FuZHJvaWQmJiF0LlN0YXRlLmlzQ2hyb21lKSYmKGIrPVwifHRyYW5zZm9ybVwiKSxuZXcgUmVnRXhwKFwiXihcIitiK1wiKSRcIixcImlcIikudGVzdChhKX0scHJlZml4Q2hlY2s6ZnVuY3Rpb24oYSl7aWYodC5TdGF0ZS5wcmVmaXhNYXRjaGVzW2FdKXJldHVyblt0LlN0YXRlLnByZWZpeE1hdGNoZXNbYV0sITBdO2Zvcih2YXIgYj1bXCJcIixcIldlYmtpdFwiLFwiTW96XCIsXCJtc1wiLFwiT1wiXSxjPTAsZD1iLmxlbmd0aDtkPmM7YysrKXt2YXIgZTtpZihlPTA9PT1jP2E6YltjXSthLnJlcGxhY2UoL15cXHcvLGZ1bmN0aW9uKGEpe3JldHVybiBhLnRvVXBwZXJDYXNlKCl9KSxwLmlzU3RyaW5nKHQuU3RhdGUucHJlZml4RWxlbWVudC5zdHlsZVtlXSkpcmV0dXJuIHQuU3RhdGUucHJlZml4TWF0Y2hlc1thXT1lLFtlLCEwXX1yZXR1cm5bYSwhMV19fSxWYWx1ZXM6e2hleFRvUmdiOmZ1bmN0aW9uKGEpe3ZhciBiLGM9L14jPyhbYS1mXFxkXSkoW2EtZlxcZF0pKFthLWZcXGRdKSQvaSxkPS9eIz8oW2EtZlxcZF17Mn0pKFthLWZcXGRdezJ9KShbYS1mXFxkXXsyfSkkL2k7cmV0dXJuIGE9YS5yZXBsYWNlKGMsZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIGIrYitjK2MrZCtkfSksYj1kLmV4ZWMoYSksYj9bcGFyc2VJbnQoYlsxXSwxNikscGFyc2VJbnQoYlsyXSwxNikscGFyc2VJbnQoYlszXSwxNildOlswLDAsMF19LGlzQ1NTTnVsbFZhbHVlOmZ1bmN0aW9uKGEpe3JldHVybiAwPT1hfHwvXihub25lfGF1dG98dHJhbnNwYXJlbnR8KHJnYmFcXCgwLCA/MCwgPzAsID8wXFwpKSkkL2kudGVzdChhKX0sZ2V0VW5pdFR5cGU6ZnVuY3Rpb24oYSl7cmV0dXJuL14ocm90YXRlfHNrZXcpL2kudGVzdChhKT9cImRlZ1wiOi8oXihzY2FsZXxzY2FsZVh8c2NhbGVZfHNjYWxlWnxhbHBoYXxmbGV4R3Jvd3xmbGV4SGVpZ2h0fHpJbmRleHxmb250V2VpZ2h0KSQpfCgob3BhY2l0eXxyZWR8Z3JlZW58Ymx1ZXxhbHBoYSkkKS9pLnRlc3QoYSk/XCJcIjpcInB4XCJ9LGdldERpc3BsYXlUeXBlOmZ1bmN0aW9uKGEpe3ZhciBiPWEmJmEudGFnTmFtZS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCk7cmV0dXJuL14oYnxiaWd8aXxzbWFsbHx0dHxhYmJyfGFjcm9ueW18Y2l0ZXxjb2RlfGRmbnxlbXxrYmR8c3Ryb25nfHNhbXB8dmFyfGF8YmRvfGJyfGltZ3xtYXB8b2JqZWN0fHF8c2NyaXB0fHNwYW58c3VifHN1cHxidXR0b258aW5wdXR8bGFiZWx8c2VsZWN0fHRleHRhcmVhKSQvaS50ZXN0KGIpP1wiaW5saW5lXCI6L14obGkpJC9pLnRlc3QoYik/XCJsaXN0LWl0ZW1cIjovXih0cikkL2kudGVzdChiKT9cInRhYmxlLXJvd1wiOi9eKHRhYmxlKSQvaS50ZXN0KGIpP1widGFibGVcIjovXih0Ym9keSkkL2kudGVzdChiKT9cInRhYmxlLXJvdy1ncm91cFwiOlwiYmxvY2tcIn0sYWRkQ2xhc3M6ZnVuY3Rpb24oYSxiKXthLmNsYXNzTGlzdD9hLmNsYXNzTGlzdC5hZGQoYik6YS5jbGFzc05hbWUrPShhLmNsYXNzTmFtZS5sZW5ndGg/XCIgXCI6XCJcIikrYn0scmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oYSxiKXthLmNsYXNzTGlzdD9hLmNsYXNzTGlzdC5yZW1vdmUoYik6YS5jbGFzc05hbWU9YS5jbGFzc05hbWUudG9TdHJpbmcoKS5yZXBsYWNlKG5ldyBSZWdFeHAoXCIoXnxcXFxccylcIitiLnNwbGl0KFwiIFwiKS5qb2luKFwifFwiKStcIihcXFxcc3wkKVwiLFwiZ2lcIiksXCIgXCIpfX0sZ2V0UHJvcGVydHlWYWx1ZTpmdW5jdGlvbihhLGMsZSxmKXtmdW5jdGlvbiBoKGEsYyl7ZnVuY3Rpb24gZSgpe2omJnYuc2V0UHJvcGVydHlWYWx1ZShhLFwiZGlzcGxheVwiLFwibm9uZVwiKX12YXIgaT0wO2lmKDg+PW4paT1tLmNzcyhhLGMpO2Vsc2V7dmFyIGo9ITE7aWYoL14od2lkdGh8aGVpZ2h0KSQvLnRlc3QoYykmJjA9PT12LmdldFByb3BlcnR5VmFsdWUoYSxcImRpc3BsYXlcIikmJihqPSEwLHYuc2V0UHJvcGVydHlWYWx1ZShhLFwiZGlzcGxheVwiLHYuVmFsdWVzLmdldERpc3BsYXlUeXBlKGEpKSksIWYpe2lmKFwiaGVpZ2h0XCI9PT1jJiZcImJvcmRlci1ib3hcIiE9PXYuZ2V0UHJvcGVydHlWYWx1ZShhLFwiYm94U2l6aW5nXCIpLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKSl7dmFyIGs9YS5vZmZzZXRIZWlnaHQtKHBhcnNlRmxvYXQodi5nZXRQcm9wZXJ0eVZhbHVlKGEsXCJib3JkZXJUb3BXaWR0aFwiKSl8fDApLShwYXJzZUZsb2F0KHYuZ2V0UHJvcGVydHlWYWx1ZShhLFwiYm9yZGVyQm90dG9tV2lkdGhcIikpfHwwKS0ocGFyc2VGbG9hdCh2LmdldFByb3BlcnR5VmFsdWUoYSxcInBhZGRpbmdUb3BcIikpfHwwKS0ocGFyc2VGbG9hdCh2LmdldFByb3BlcnR5VmFsdWUoYSxcInBhZGRpbmdCb3R0b21cIikpfHwwKTtyZXR1cm4gZSgpLGt9aWYoXCJ3aWR0aFwiPT09YyYmXCJib3JkZXItYm94XCIhPT12LmdldFByb3BlcnR5VmFsdWUoYSxcImJveFNpemluZ1wiKS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkpe3ZhciBsPWEub2Zmc2V0V2lkdGgtKHBhcnNlRmxvYXQodi5nZXRQcm9wZXJ0eVZhbHVlKGEsXCJib3JkZXJMZWZ0V2lkdGhcIikpfHwwKS0ocGFyc2VGbG9hdCh2LmdldFByb3BlcnR5VmFsdWUoYSxcImJvcmRlclJpZ2h0V2lkdGhcIikpfHwwKS0ocGFyc2VGbG9hdCh2LmdldFByb3BlcnR5VmFsdWUoYSxcInBhZGRpbmdMZWZ0XCIpKXx8MCktKHBhcnNlRmxvYXQodi5nZXRQcm9wZXJ0eVZhbHVlKGEsXCJwYWRkaW5nUmlnaHRcIikpfHwwKTtyZXR1cm4gZSgpLGx9fXZhciBvO289ZyhhKT09PWQ/Yi5nZXRDb21wdXRlZFN0eWxlKGEsbnVsbCk6ZyhhKS5jb21wdXRlZFN0eWxlP2coYSkuY29tcHV0ZWRTdHlsZTpnKGEpLmNvbXB1dGVkU3R5bGU9Yi5nZXRDb21wdXRlZFN0eWxlKGEsbnVsbCksXCJib3JkZXJDb2xvclwiPT09YyYmKGM9XCJib3JkZXJUb3BDb2xvclwiKSxpPTk9PT1uJiZcImZpbHRlclwiPT09Yz9vLmdldFByb3BlcnR5VmFsdWUoYyk6b1tjXSwoXCJcIj09PWl8fG51bGw9PT1pKSYmKGk9YS5zdHlsZVtjXSksZSgpfWlmKFwiYXV0b1wiPT09aSYmL14odG9wfHJpZ2h0fGJvdHRvbXxsZWZ0KSQvaS50ZXN0KGMpKXt2YXIgcD1oKGEsXCJwb3NpdGlvblwiKTsoXCJmaXhlZFwiPT09cHx8XCJhYnNvbHV0ZVwiPT09cCYmL3RvcHxsZWZ0L2kudGVzdChjKSkmJihpPW0oYSkucG9zaXRpb24oKVtjXStcInB4XCIpfXJldHVybiBpfXZhciBpO2lmKHYuSG9va3MucmVnaXN0ZXJlZFtjXSl7dmFyIGo9YyxrPXYuSG9va3MuZ2V0Um9vdChqKTtlPT09ZCYmKGU9di5nZXRQcm9wZXJ0eVZhbHVlKGEsdi5OYW1lcy5wcmVmaXhDaGVjayhrKVswXSkpLHYuTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZFtrXSYmKGU9di5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW2tdKFwiZXh0cmFjdFwiLGEsZSkpLGk9di5Ib29rcy5leHRyYWN0VmFsdWUoaixlKX1lbHNlIGlmKHYuTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZFtjXSl7dmFyIGwsbztsPXYuTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZFtjXShcIm5hbWVcIixhKSxcInRyYW5zZm9ybVwiIT09bCYmKG89aChhLHYuTmFtZXMucHJlZml4Q2hlY2sobClbMF0pLHYuVmFsdWVzLmlzQ1NTTnVsbFZhbHVlKG8pJiZ2Lkhvb2tzLnRlbXBsYXRlc1tjXSYmKG89di5Ib29rcy50ZW1wbGF0ZXNbY11bMV0pKSxpPXYuTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZFtjXShcImV4dHJhY3RcIixhLG8pfWlmKCEvXltcXGQtXS8udGVzdChpKSlpZihnKGEpJiZnKGEpLmlzU1ZHJiZ2Lk5hbWVzLlNWR0F0dHJpYnV0ZShjKSlpZigvXihoZWlnaHR8d2lkdGgpJC9pLnRlc3QoYykpdHJ5e2k9YS5nZXRCQm94KClbY119Y2F0Y2gocCl7aT0wfWVsc2UgaT1hLmdldEF0dHJpYnV0ZShjKTtlbHNlIGk9aChhLHYuTmFtZXMucHJlZml4Q2hlY2soYylbMF0pO3JldHVybiB2LlZhbHVlcy5pc0NTU051bGxWYWx1ZShpKSYmKGk9MCksdC5kZWJ1Zz49MiYmY29uc29sZS5sb2coXCJHZXQgXCIrYytcIjogXCIraSksaX0sc2V0UHJvcGVydHlWYWx1ZTpmdW5jdGlvbihhLGMsZCxlLGYpe3ZhciBoPWM7aWYoXCJzY3JvbGxcIj09PWMpZi5jb250YWluZXI/Zi5jb250YWluZXJbXCJzY3JvbGxcIitmLmRpcmVjdGlvbl09ZDpcIkxlZnRcIj09PWYuZGlyZWN0aW9uP2Iuc2Nyb2xsVG8oZCxmLmFsdGVybmF0ZVZhbHVlKTpiLnNjcm9sbFRvKGYuYWx0ZXJuYXRlVmFsdWUsZCk7ZWxzZSBpZih2Lk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbY10mJlwidHJhbnNmb3JtXCI9PT12Lk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbY10oXCJuYW1lXCIsYSkpdi5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW2NdKFwiaW5qZWN0XCIsYSxkKSxoPVwidHJhbnNmb3JtXCIsZD1nKGEpLnRyYW5zZm9ybUNhY2hlW2NdO2Vsc2V7aWYodi5Ib29rcy5yZWdpc3RlcmVkW2NdKXt2YXIgaT1jLGo9di5Ib29rcy5nZXRSb290KGMpO2U9ZXx8di5nZXRQcm9wZXJ0eVZhbHVlKGEsaiksZD12Lkhvb2tzLmluamVjdFZhbHVlKGksZCxlKSxjPWp9aWYodi5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW2NdJiYoZD12Lk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyZWRbY10oXCJpbmplY3RcIixhLGQpLGM9di5Ob3JtYWxpemF0aW9ucy5yZWdpc3RlcmVkW2NdKFwibmFtZVwiLGEpKSxoPXYuTmFtZXMucHJlZml4Q2hlY2soYylbMF0sOD49bil0cnl7YS5zdHlsZVtoXT1kfWNhdGNoKGspe3QuZGVidWcmJmNvbnNvbGUubG9nKFwiQnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IFtcIitkK1wiXSBmb3IgW1wiK2grXCJdXCIpfWVsc2UgZyhhKSYmZyhhKS5pc1NWRyYmdi5OYW1lcy5TVkdBdHRyaWJ1dGUoYyk/YS5zZXRBdHRyaWJ1dGUoYyxkKTphLnN0eWxlW2hdPWQ7dC5kZWJ1Zz49MiYmY29uc29sZS5sb2coXCJTZXQgXCIrYytcIiAoXCIraCtcIik6IFwiK2QpfXJldHVybltoLGRdfSxmbHVzaFRyYW5zZm9ybUNhY2hlOmZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYil7cmV0dXJuIHBhcnNlRmxvYXQodi5nZXRQcm9wZXJ0eVZhbHVlKGEsYikpfXZhciBjPVwiXCI7aWYoKG58fHQuU3RhdGUuaXNBbmRyb2lkJiYhdC5TdGF0ZS5pc0Nocm9tZSkmJmcoYSkuaXNTVkcpe3ZhciBkPXt0cmFuc2xhdGU6W2IoXCJ0cmFuc2xhdGVYXCIpLGIoXCJ0cmFuc2xhdGVZXCIpXSxza2V3WDpbYihcInNrZXdYXCIpXSxza2V3WTpbYihcInNrZXdZXCIpXSxzY2FsZToxIT09YihcInNjYWxlXCIpP1tiKFwic2NhbGVcIiksYihcInNjYWxlXCIpXTpbYihcInNjYWxlWFwiKSxiKFwic2NhbGVZXCIpXSxyb3RhdGU6W2IoXCJyb3RhdGVaXCIpLDAsMF19O20uZWFjaChnKGEpLnRyYW5zZm9ybUNhY2hlLGZ1bmN0aW9uKGEpey9edHJhbnNsYXRlL2kudGVzdChhKT9hPVwidHJhbnNsYXRlXCI6L15zY2FsZS9pLnRlc3QoYSk/YT1cInNjYWxlXCI6L15yb3RhdGUvaS50ZXN0KGEpJiYoYT1cInJvdGF0ZVwiKSxkW2FdJiYoYys9YStcIihcIitkW2FdLmpvaW4oXCIgXCIpK1wiKSBcIixkZWxldGUgZFthXSl9KX1lbHNle3ZhciBlLGY7bS5lYWNoKGcoYSkudHJhbnNmb3JtQ2FjaGUsZnVuY3Rpb24oYil7cmV0dXJuIGU9ZyhhKS50cmFuc2Zvcm1DYWNoZVtiXSxcInRyYW5zZm9ybVBlcnNwZWN0aXZlXCI9PT1iPyhmPWUsITApOig5PT09biYmXCJyb3RhdGVaXCI9PT1iJiYoYj1cInJvdGF0ZVwiKSx2b2lkKGMrPWIrZStcIiBcIikpfSksZiYmKGM9XCJwZXJzcGVjdGl2ZVwiK2YrXCIgXCIrYyl9di5zZXRQcm9wZXJ0eVZhbHVlKGEsXCJ0cmFuc2Zvcm1cIixjKX19O3YuSG9va3MucmVnaXN0ZXIoKSx2Lk5vcm1hbGl6YXRpb25zLnJlZ2lzdGVyKCksdC5ob29rPWZ1bmN0aW9uKGEsYixjKXt2YXIgZT1kO3JldHVybiBhPWYoYSksbS5lYWNoKGEsZnVuY3Rpb24oYSxmKXtpZihnKGYpPT09ZCYmdC5pbml0KGYpLGM9PT1kKWU9PT1kJiYoZT10LkNTUy5nZXRQcm9wZXJ0eVZhbHVlKGYsYikpO2Vsc2V7dmFyIGg9dC5DU1Muc2V0UHJvcGVydHlWYWx1ZShmLGIsYyk7XCJ0cmFuc2Zvcm1cIj09PWhbMF0mJnQuQ1NTLmZsdXNoVHJhbnNmb3JtQ2FjaGUoZiksZT1ofX0pLGV9O3ZhciB3PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYSgpe3JldHVybiBoP0IucHJvbWlzZXx8bnVsbDppfWZ1bmN0aW9uIGUoKXtmdW5jdGlvbiBhKGEpe2Z1bmN0aW9uIGwoYSxiKXt2YXIgYz1kLGU9ZCxnPWQ7cmV0dXJuIHAuaXNBcnJheShhKT8oYz1hWzBdLCFwLmlzQXJyYXkoYVsxXSkmJi9eW1xcZC1dLy50ZXN0KGFbMV0pfHxwLmlzRnVuY3Rpb24oYVsxXSl8fHYuUmVnRXguaXNIZXgudGVzdChhWzFdKT9nPWFbMV06KHAuaXNTdHJpbmcoYVsxXSkmJiF2LlJlZ0V4LmlzSGV4LnRlc3QoYVsxXSl8fHAuaXNBcnJheShhWzFdKSkmJihlPWI/YVsxXTpqKGFbMV0saC5kdXJhdGlvbiksYVsyXSE9PWQmJihnPWFbMl0pKSk6Yz1hLGJ8fChlPWV8fGguZWFzaW5nKSxwLmlzRnVuY3Rpb24oYykmJihjPWMuY2FsbChmLHkseCkpLHAuaXNGdW5jdGlvbihnKSYmKGc9Zy5jYWxsKGYseSx4KSksW2N8fDAsZSxnXX1mdW5jdGlvbiBuKGEsYil7dmFyIGMsZDtyZXR1cm4gZD0oYnx8XCIwXCIpLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9bJUEtel0rJC8sZnVuY3Rpb24oYSl7cmV0dXJuIGM9YSxcIlwifSksY3x8KGM9di5WYWx1ZXMuZ2V0VW5pdFR5cGUoYSkpLFtkLGNdfWZ1bmN0aW9uIHIoKXt2YXIgYT17bXlQYXJlbnQ6Zi5wYXJlbnROb2RlfHxjLmJvZHkscG9zaXRpb246di5nZXRQcm9wZXJ0eVZhbHVlKGYsXCJwb3NpdGlvblwiKSxmb250U2l6ZTp2LmdldFByb3BlcnR5VmFsdWUoZixcImZvbnRTaXplXCIpfSxkPWEucG9zaXRpb249PT1JLmxhc3RQb3NpdGlvbiYmYS5teVBhcmVudD09PUkubGFzdFBhcmVudCxlPWEuZm9udFNpemU9PT1JLmxhc3RGb250U2l6ZTtJLmxhc3RQYXJlbnQ9YS5teVBhcmVudCxJLmxhc3RQb3NpdGlvbj1hLnBvc2l0aW9uLEkubGFzdEZvbnRTaXplPWEuZm9udFNpemU7dmFyIGg9MTAwLGk9e307aWYoZSYmZClpLmVtVG9QeD1JLmxhc3RFbVRvUHgsaS5wZXJjZW50VG9QeFdpZHRoPUkubGFzdFBlcmNlbnRUb1B4V2lkdGgsaS5wZXJjZW50VG9QeEhlaWdodD1JLmxhc3RQZXJjZW50VG9QeEhlaWdodDtlbHNle3ZhciBqPWcoZikuaXNTVkc/Yy5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLFwicmVjdFwiKTpjLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7dC5pbml0KGopLGEubXlQYXJlbnQuYXBwZW5kQ2hpbGQoaiksbS5lYWNoKFtcIm92ZXJmbG93XCIsXCJvdmVyZmxvd1hcIixcIm92ZXJmbG93WVwiXSxmdW5jdGlvbihhLGIpe3QuQ1NTLnNldFByb3BlcnR5VmFsdWUoaixiLFwiaGlkZGVuXCIpfSksdC5DU1Muc2V0UHJvcGVydHlWYWx1ZShqLFwicG9zaXRpb25cIixhLnBvc2l0aW9uKSx0LkNTUy5zZXRQcm9wZXJ0eVZhbHVlKGosXCJmb250U2l6ZVwiLGEuZm9udFNpemUpLHQuQ1NTLnNldFByb3BlcnR5VmFsdWUoaixcImJveFNpemluZ1wiLFwiY29udGVudC1ib3hcIiksbS5lYWNoKFtcIm1pbldpZHRoXCIsXCJtYXhXaWR0aFwiLFwid2lkdGhcIixcIm1pbkhlaWdodFwiLFwibWF4SGVpZ2h0XCIsXCJoZWlnaHRcIl0sZnVuY3Rpb24oYSxiKXt0LkNTUy5zZXRQcm9wZXJ0eVZhbHVlKGosYixoK1wiJVwiKX0pLHQuQ1NTLnNldFByb3BlcnR5VmFsdWUoaixcInBhZGRpbmdMZWZ0XCIsaCtcImVtXCIpLGkucGVyY2VudFRvUHhXaWR0aD1JLmxhc3RQZXJjZW50VG9QeFdpZHRoPShwYXJzZUZsb2F0KHYuZ2V0UHJvcGVydHlWYWx1ZShqLFwid2lkdGhcIixudWxsLCEwKSl8fDEpL2gsaS5wZXJjZW50VG9QeEhlaWdodD1JLmxhc3RQZXJjZW50VG9QeEhlaWdodD0ocGFyc2VGbG9hdCh2LmdldFByb3BlcnR5VmFsdWUoaixcImhlaWdodFwiLG51bGwsITApKXx8MSkvaCxpLmVtVG9QeD1JLmxhc3RFbVRvUHg9KHBhcnNlRmxvYXQodi5nZXRQcm9wZXJ0eVZhbHVlKGosXCJwYWRkaW5nTGVmdFwiKSl8fDEpL2gsYS5teVBhcmVudC5yZW1vdmVDaGlsZChqKX1yZXR1cm4gbnVsbD09PUkucmVtVG9QeCYmKEkucmVtVG9QeD1wYXJzZUZsb2F0KHYuZ2V0UHJvcGVydHlWYWx1ZShjLmJvZHksXCJmb250U2l6ZVwiKSl8fDE2KSxudWxsPT09SS52d1RvUHgmJihJLnZ3VG9QeD1wYXJzZUZsb2F0KGIuaW5uZXJXaWR0aCkvMTAwLEkudmhUb1B4PXBhcnNlRmxvYXQoYi5pbm5lckhlaWdodCkvMTAwKSxpLnJlbVRvUHg9SS5yZW1Ub1B4LGkudndUb1B4PUkudndUb1B4LGkudmhUb1B4PUkudmhUb1B4LHQuZGVidWc+PTEmJmNvbnNvbGUubG9nKFwiVW5pdCByYXRpb3M6IFwiK0pTT04uc3RyaW5naWZ5KGkpLGYpLGl9aWYoaC5iZWdpbiYmMD09PXkpdHJ5e2guYmVnaW4uY2FsbChvLG8pfWNhdGNoKHUpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXt0aHJvdyB1fSwxKX1pZihcInNjcm9sbFwiPT09Qyl7dmFyIHcseixBLEQ9L154JC9pLnRlc3QoaC5heGlzKT9cIkxlZnRcIjpcIlRvcFwiLEU9cGFyc2VGbG9hdChoLm9mZnNldCl8fDA7aC5jb250YWluZXI/cC5pc1dyYXBwZWQoaC5jb250YWluZXIpfHxwLmlzTm9kZShoLmNvbnRhaW5lcik/KGguY29udGFpbmVyPWguY29udGFpbmVyWzBdfHxoLmNvbnRhaW5lcix3PWguY29udGFpbmVyW1wic2Nyb2xsXCIrRF0sQT13K20oZikucG9zaXRpb24oKVtELnRvTG93ZXJDYXNlKCldK0UpOmguY29udGFpbmVyPW51bGw6KHc9dC5TdGF0ZS5zY3JvbGxBbmNob3JbdC5TdGF0ZVtcInNjcm9sbFByb3BlcnR5XCIrRF1dLHo9dC5TdGF0ZS5zY3JvbGxBbmNob3JbdC5TdGF0ZVtcInNjcm9sbFByb3BlcnR5XCIrKFwiTGVmdFwiPT09RD9cIlRvcFwiOlwiTGVmdFwiKV1dLEE9bShmKS5vZmZzZXQoKVtELnRvTG93ZXJDYXNlKCldK0UpLGk9e3Njcm9sbDp7cm9vdFByb3BlcnR5VmFsdWU6ITEsc3RhcnRWYWx1ZTp3LGN1cnJlbnRWYWx1ZTp3LGVuZFZhbHVlOkEsdW5pdFR5cGU6XCJcIixlYXNpbmc6aC5lYXNpbmcsc2Nyb2xsRGF0YTp7Y29udGFpbmVyOmguY29udGFpbmVyLGRpcmVjdGlvbjpELGFsdGVybmF0ZVZhbHVlOnp9fSxlbGVtZW50OmZ9LHQuZGVidWcmJmNvbnNvbGUubG9nKFwidHdlZW5zQ29udGFpbmVyIChzY3JvbGwpOiBcIixpLnNjcm9sbCxmKX1lbHNlIGlmKFwicmV2ZXJzZVwiPT09Qyl7aWYoIWcoZikudHdlZW5zQ29udGFpbmVyKXJldHVybiB2b2lkIG0uZGVxdWV1ZShmLGgucXVldWUpO1wibm9uZVwiPT09ZyhmKS5vcHRzLmRpc3BsYXkmJihnKGYpLm9wdHMuZGlzcGxheT1cImF1dG9cIiksXCJoaWRkZW5cIj09PWcoZikub3B0cy52aXNpYmlsaXR5JiYoZyhmKS5vcHRzLnZpc2liaWxpdHk9XCJ2aXNpYmxlXCIpLGcoZikub3B0cy5sb29wPSExLGcoZikub3B0cy5iZWdpbj1udWxsLGcoZikub3B0cy5jb21wbGV0ZT1udWxsLHMuZWFzaW5nfHxkZWxldGUgaC5lYXNpbmcscy5kdXJhdGlvbnx8ZGVsZXRlIGguZHVyYXRpb24saD1tLmV4dGVuZCh7fSxnKGYpLm9wdHMsaCk7dmFyIEY9bS5leHRlbmQoITAse30sZyhmKS50d2VlbnNDb250YWluZXIpO2Zvcih2YXIgRyBpbiBGKWlmKFwiZWxlbWVudFwiIT09Ryl7dmFyIEg9RltHXS5zdGFydFZhbHVlO0ZbR10uc3RhcnRWYWx1ZT1GW0ddLmN1cnJlbnRWYWx1ZT1GW0ddLmVuZFZhbHVlLEZbR10uZW5kVmFsdWU9SCxwLmlzRW1wdHlPYmplY3Qocyl8fChGW0ddLmVhc2luZz1oLmVhc2luZyksdC5kZWJ1ZyYmY29uc29sZS5sb2coXCJyZXZlcnNlIHR3ZWVuc0NvbnRhaW5lciAoXCIrRytcIik6IFwiK0pTT04uc3RyaW5naWZ5KEZbR10pLGYpfWk9Rn1lbHNlIGlmKFwic3RhcnRcIj09PUMpe3ZhciBGO2coZikudHdlZW5zQ29udGFpbmVyJiZnKGYpLmlzQW5pbWF0aW5nPT09ITAmJihGPWcoZikudHdlZW5zQ29udGFpbmVyKSxtLmVhY2gocSxmdW5jdGlvbihhLGIpe2lmKFJlZ0V4cChcIl5cIit2Lkxpc3RzLmNvbG9ycy5qb2luKFwiJHxeXCIpK1wiJFwiKS50ZXN0KGEpKXt2YXIgYz1sKGIsITApLGU9Y1swXSxmPWNbMV0sZz1jWzJdO2lmKHYuUmVnRXguaXNIZXgudGVzdChlKSl7Zm9yKHZhciBoPVtcIlJlZFwiLFwiR3JlZW5cIixcIkJsdWVcIl0saT12LlZhbHVlcy5oZXhUb1JnYihlKSxqPWc/di5WYWx1ZXMuaGV4VG9SZ2IoZyk6ZCxrPTA7azxoLmxlbmd0aDtrKyspe3ZhciBtPVtpW2tdXTtmJiZtLnB1c2goZiksaiE9PWQmJm0ucHVzaChqW2tdKSxxW2EraFtrXV09bX1kZWxldGUgcVthXX19fSk7Zm9yKHZhciBLIGluIHEpe3ZhciBMPWwocVtLXSksTT1MWzBdLE49TFsxXSxPPUxbMl07Sz12Lk5hbWVzLmNhbWVsQ2FzZShLKTt2YXIgUD12Lkhvb2tzLmdldFJvb3QoSyksUT0hMTtpZihnKGYpLmlzU1ZHfHxcInR3ZWVuXCI9PT1QfHx2Lk5hbWVzLnByZWZpeENoZWNrKFApWzFdIT09ITF8fHYuTm9ybWFsaXphdGlvbnMucmVnaXN0ZXJlZFtQXSE9PWQpeyhoLmRpc3BsYXkhPT1kJiZudWxsIT09aC5kaXNwbGF5JiZcIm5vbmVcIiE9PWguZGlzcGxheXx8aC52aXNpYmlsaXR5IT09ZCYmXCJoaWRkZW5cIiE9PWgudmlzaWJpbGl0eSkmJi9vcGFjaXR5fGZpbHRlci8udGVzdChLKSYmIU8mJjAhPT1NJiYoTz0wKSxoLl9jYWNoZVZhbHVlcyYmRiYmRltLXT8oTz09PWQmJihPPUZbS10uZW5kVmFsdWUrRltLXS51bml0VHlwZSksUT1nKGYpLnJvb3RQcm9wZXJ0eVZhbHVlQ2FjaGVbUF0pOnYuSG9va3MucmVnaXN0ZXJlZFtLXT9PPT09ZD8oUT12LmdldFByb3BlcnR5VmFsdWUoZixQKSxPPXYuZ2V0UHJvcGVydHlWYWx1ZShmLEssUSkpOlE9di5Ib29rcy50ZW1wbGF0ZXNbUF1bMV06Tz09PWQmJihPPXYuZ2V0UHJvcGVydHlWYWx1ZShmLEspKTt2YXIgUixTLFQsVT0hMTtpZihSPW4oSyxPKSxPPVJbMF0sVD1SWzFdLFI9bihLLE0pLE09UlswXS5yZXBsYWNlKC9eKFsrLVxcLypdKT0vLGZ1bmN0aW9uKGEsYil7cmV0dXJuIFU9YixcIlwifSksUz1SWzFdLE89cGFyc2VGbG9hdChPKXx8MCxNPXBhcnNlRmxvYXQoTSl8fDAsXCIlXCI9PT1TJiYoL14oZm9udFNpemV8bGluZUhlaWdodCkkLy50ZXN0KEspPyhNLz0xMDAsUz1cImVtXCIpOi9ec2NhbGUvLnRlc3QoSyk/KE0vPTEwMCxTPVwiXCIpOi8oUmVkfEdyZWVufEJsdWUpJC9pLnRlc3QoSykmJihNPU0vMTAwKjI1NSxTPVwiXCIpKSwvW1xcLypdLy50ZXN0KFUpKVM9VDtlbHNlIGlmKFQhPT1TJiYwIT09TylpZigwPT09TSlTPVQ7ZWxzZXtlPWV8fHIoKTt2YXIgVj0vbWFyZ2lufHBhZGRpbmd8bGVmdHxyaWdodHx3aWR0aHx0ZXh0fHdvcmR8bGV0dGVyL2kudGVzdChLKXx8L1gkLy50ZXN0KEspfHxcInhcIj09PUs/XCJ4XCI6XCJ5XCI7XG5zd2l0Y2goVCl7Y2FzZVwiJVwiOk8qPVwieFwiPT09Vj9lLnBlcmNlbnRUb1B4V2lkdGg6ZS5wZXJjZW50VG9QeEhlaWdodDticmVhaztjYXNlXCJweFwiOmJyZWFrO2RlZmF1bHQ6Tyo9ZVtUK1wiVG9QeFwiXX1zd2l0Y2goUyl7Y2FzZVwiJVwiOk8qPTEvKFwieFwiPT09Vj9lLnBlcmNlbnRUb1B4V2lkdGg6ZS5wZXJjZW50VG9QeEhlaWdodCk7YnJlYWs7Y2FzZVwicHhcIjpicmVhaztkZWZhdWx0Ok8qPTEvZVtTK1wiVG9QeFwiXX19c3dpdGNoKFUpe2Nhc2VcIitcIjpNPU8rTTticmVhaztjYXNlXCItXCI6TT1PLU07YnJlYWs7Y2FzZVwiKlwiOk09TypNO2JyZWFrO2Nhc2VcIi9cIjpNPU8vTX1pW0tdPXtyb290UHJvcGVydHlWYWx1ZTpRLHN0YXJ0VmFsdWU6TyxjdXJyZW50VmFsdWU6TyxlbmRWYWx1ZTpNLHVuaXRUeXBlOlMsZWFzaW5nOk59LHQuZGVidWcmJmNvbnNvbGUubG9nKFwidHdlZW5zQ29udGFpbmVyIChcIitLK1wiKTogXCIrSlNPTi5zdHJpbmdpZnkoaVtLXSksZil9ZWxzZSB0LmRlYnVnJiZjb25zb2xlLmxvZyhcIlNraXBwaW5nIFtcIitQK1wiXSBkdWUgdG8gYSBsYWNrIG9mIGJyb3dzZXIgc3VwcG9ydC5cIil9aS5lbGVtZW50PWZ9aS5lbGVtZW50JiYodi5WYWx1ZXMuYWRkQ2xhc3MoZixcInZlbG9jaXR5LWFuaW1hdGluZ1wiKSxKLnB1c2goaSksXCJcIj09PWgucXVldWUmJihnKGYpLnR3ZWVuc0NvbnRhaW5lcj1pLGcoZikub3B0cz1oKSxnKGYpLmlzQW5pbWF0aW5nPSEwLHk9PT14LTE/KHQuU3RhdGUuY2FsbHMucHVzaChbSixvLGgsbnVsbCxCLnJlc29sdmVyXSksdC5TdGF0ZS5pc1RpY2tpbmc9PT0hMSYmKHQuU3RhdGUuaXNUaWNraW5nPSEwLGsoKSkpOnkrKyl9dmFyIGUsZj10aGlzLGg9bS5leHRlbmQoe30sdC5kZWZhdWx0cyxzKSxpPXt9O3N3aXRjaChnKGYpPT09ZCYmdC5pbml0KGYpLHBhcnNlRmxvYXQoaC5kZWxheSkmJmgucXVldWUhPT0hMSYmbS5xdWV1ZShmLGgucXVldWUsZnVuY3Rpb24oYSl7dC52ZWxvY2l0eVF1ZXVlRW50cnlGbGFnPSEwLGcoZikuZGVsYXlUaW1lcj17c2V0VGltZW91dDpzZXRUaW1lb3V0KGEscGFyc2VGbG9hdChoLmRlbGF5KSksbmV4dDphfX0pLGguZHVyYXRpb24udG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpKXtjYXNlXCJmYXN0XCI6aC5kdXJhdGlvbj0yMDA7YnJlYWs7Y2FzZVwibm9ybWFsXCI6aC5kdXJhdGlvbj1yO2JyZWFrO2Nhc2VcInNsb3dcIjpoLmR1cmF0aW9uPTYwMDticmVhaztkZWZhdWx0OmguZHVyYXRpb249cGFyc2VGbG9hdChoLmR1cmF0aW9uKXx8MX10Lm1vY2shPT0hMSYmKHQubW9jaz09PSEwP2guZHVyYXRpb249aC5kZWxheT0xOihoLmR1cmF0aW9uKj1wYXJzZUZsb2F0KHQubW9jayl8fDEsaC5kZWxheSo9cGFyc2VGbG9hdCh0Lm1vY2spfHwxKSksaC5lYXNpbmc9aihoLmVhc2luZyxoLmR1cmF0aW9uKSxoLmJlZ2luJiYhcC5pc0Z1bmN0aW9uKGguYmVnaW4pJiYoaC5iZWdpbj1udWxsKSxoLnByb2dyZXNzJiYhcC5pc0Z1bmN0aW9uKGgucHJvZ3Jlc3MpJiYoaC5wcm9ncmVzcz1udWxsKSxoLmNvbXBsZXRlJiYhcC5pc0Z1bmN0aW9uKGguY29tcGxldGUpJiYoaC5jb21wbGV0ZT1udWxsKSxoLmRpc3BsYXkhPT1kJiZudWxsIT09aC5kaXNwbGF5JiYoaC5kaXNwbGF5PWguZGlzcGxheS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCksXCJhdXRvXCI9PT1oLmRpc3BsYXkmJihoLmRpc3BsYXk9dC5DU1MuVmFsdWVzLmdldERpc3BsYXlUeXBlKGYpKSksaC52aXNpYmlsaXR5IT09ZCYmbnVsbCE9PWgudmlzaWJpbGl0eSYmKGgudmlzaWJpbGl0eT1oLnZpc2liaWxpdHkudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpKSxoLm1vYmlsZUhBPWgubW9iaWxlSEEmJnQuU3RhdGUuaXNNb2JpbGUmJiF0LlN0YXRlLmlzR2luZ2VyYnJlYWQsaC5xdWV1ZT09PSExP2guZGVsYXk/c2V0VGltZW91dChhLGguZGVsYXkpOmEoKTptLnF1ZXVlKGYsaC5xdWV1ZSxmdW5jdGlvbihiLGMpe3JldHVybiBjPT09ITA/KEIucHJvbWlzZSYmQi5yZXNvbHZlcihvKSwhMCk6KHQudmVsb2NpdHlRdWV1ZUVudHJ5RmxhZz0hMCx2b2lkIGEoYikpfSksXCJcIiE9PWgucXVldWUmJlwiZnhcIiE9PWgucXVldWV8fFwiaW5wcm9ncmVzc1wiPT09bS5xdWV1ZShmKVswXXx8bS5kZXF1ZXVlKGYpfXZhciBoLGksbixvLHEscyx1PWFyZ3VtZW50c1swXSYmKGFyZ3VtZW50c1swXS5wfHxtLmlzUGxhaW5PYmplY3QoYXJndW1lbnRzWzBdLnByb3BlcnRpZXMpJiYhYXJndW1lbnRzWzBdLnByb3BlcnRpZXMubmFtZXN8fHAuaXNTdHJpbmcoYXJndW1lbnRzWzBdLnByb3BlcnRpZXMpKTtpZihwLmlzV3JhcHBlZCh0aGlzKT8oaD0hMSxuPTAsbz10aGlzLGk9dGhpcyk6KGg9ITAsbj0xLG89dT9hcmd1bWVudHNbMF0uZWxlbWVudHN8fGFyZ3VtZW50c1swXS5lOmFyZ3VtZW50c1swXSksbz1mKG8pKXt1PyhxPWFyZ3VtZW50c1swXS5wcm9wZXJ0aWVzfHxhcmd1bWVudHNbMF0ucCxzPWFyZ3VtZW50c1swXS5vcHRpb25zfHxhcmd1bWVudHNbMF0ubyk6KHE9YXJndW1lbnRzW25dLHM9YXJndW1lbnRzW24rMV0pO3ZhciB4PW8ubGVuZ3RoLHk9MDtpZighL14oc3RvcHxmaW5pc2gpJC9pLnRlc3QocSkmJiFtLmlzUGxhaW5PYmplY3Qocykpe3ZhciB6PW4rMTtzPXt9O2Zvcih2YXIgQT16O0E8YXJndW1lbnRzLmxlbmd0aDtBKyspcC5pc0FycmF5KGFyZ3VtZW50c1tBXSl8fCEvXihmYXN0fG5vcm1hbHxzbG93KSQvaS50ZXN0KGFyZ3VtZW50c1tBXSkmJiEvXlxcZC8udGVzdChhcmd1bWVudHNbQV0pP3AuaXNTdHJpbmcoYXJndW1lbnRzW0FdKXx8cC5pc0FycmF5KGFyZ3VtZW50c1tBXSk/cy5lYXNpbmc9YXJndW1lbnRzW0FdOnAuaXNGdW5jdGlvbihhcmd1bWVudHNbQV0pJiYocy5jb21wbGV0ZT1hcmd1bWVudHNbQV0pOnMuZHVyYXRpb249YXJndW1lbnRzW0FdfXZhciBCPXtwcm9taXNlOm51bGwscmVzb2x2ZXI6bnVsbCxyZWplY3RlcjpudWxsfTtoJiZ0LlByb21pc2UmJihCLnByb21pc2U9bmV3IHQuUHJvbWlzZShmdW5jdGlvbihhLGIpe0IucmVzb2x2ZXI9YSxCLnJlamVjdGVyPWJ9KSk7dmFyIEM7c3dpdGNoKHEpe2Nhc2VcInNjcm9sbFwiOkM9XCJzY3JvbGxcIjticmVhaztjYXNlXCJyZXZlcnNlXCI6Qz1cInJldmVyc2VcIjticmVhaztjYXNlXCJmaW5pc2hcIjpjYXNlXCJzdG9wXCI6bS5lYWNoKG8sZnVuY3Rpb24oYSxiKXtnKGIpJiZnKGIpLmRlbGF5VGltZXImJihjbGVhclRpbWVvdXQoZyhiKS5kZWxheVRpbWVyLnNldFRpbWVvdXQpLGcoYikuZGVsYXlUaW1lci5uZXh0JiZnKGIpLmRlbGF5VGltZXIubmV4dCgpLGRlbGV0ZSBnKGIpLmRlbGF5VGltZXIpfSk7dmFyIEQ9W107cmV0dXJuIG0uZWFjaCh0LlN0YXRlLmNhbGxzLGZ1bmN0aW9uKGEsYil7YiYmbS5lYWNoKGJbMV0sZnVuY3Rpb24oYyxlKXt2YXIgZj1zPT09ZD9cIlwiOnM7cmV0dXJuIGY9PT0hMHx8YlsyXS5xdWV1ZT09PWZ8fHM9PT1kJiZiWzJdLnF1ZXVlPT09ITE/dm9pZCBtLmVhY2gobyxmdW5jdGlvbihjLGQpe2Q9PT1lJiYoKHM9PT0hMHx8cC5pc1N0cmluZyhzKSkmJihtLmVhY2gobS5xdWV1ZShkLHAuaXNTdHJpbmcocyk/czpcIlwiKSxmdW5jdGlvbihhLGIpe3AuaXNGdW5jdGlvbihiKSYmYihudWxsLCEwKX0pLG0ucXVldWUoZCxwLmlzU3RyaW5nKHMpP3M6XCJcIixbXSkpLFwic3RvcFwiPT09cT8oZyhkKSYmZyhkKS50d2VlbnNDb250YWluZXImJmYhPT0hMSYmbS5lYWNoKGcoZCkudHdlZW5zQ29udGFpbmVyLGZ1bmN0aW9uKGEsYil7Yi5lbmRWYWx1ZT1iLmN1cnJlbnRWYWx1ZX0pLEQucHVzaChhKSk6XCJmaW5pc2hcIj09PXEmJihiWzJdLmR1cmF0aW9uPTEpKX0pOiEwfSl9KSxcInN0b3BcIj09PXEmJihtLmVhY2goRCxmdW5jdGlvbihhLGIpe2woYiwhMCl9KSxCLnByb21pc2UmJkIucmVzb2x2ZXIobykpLGEoKTtkZWZhdWx0OmlmKCFtLmlzUGxhaW5PYmplY3QocSl8fHAuaXNFbXB0eU9iamVjdChxKSl7aWYocC5pc1N0cmluZyhxKSYmdC5SZWRpcmVjdHNbcV0pe3ZhciBFPW0uZXh0ZW5kKHt9LHMpLEY9RS5kdXJhdGlvbixHPUUuZGVsYXl8fDA7cmV0dXJuIEUuYmFja3dhcmRzPT09ITAmJihvPW0uZXh0ZW5kKCEwLFtdLG8pLnJldmVyc2UoKSksbS5lYWNoKG8sZnVuY3Rpb24oYSxiKXtwYXJzZUZsb2F0KEUuc3RhZ2dlcik/RS5kZWxheT1HK3BhcnNlRmxvYXQoRS5zdGFnZ2VyKSphOnAuaXNGdW5jdGlvbihFLnN0YWdnZXIpJiYoRS5kZWxheT1HK0Uuc3RhZ2dlci5jYWxsKGIsYSx4KSksRS5kcmFnJiYoRS5kdXJhdGlvbj1wYXJzZUZsb2F0KEYpfHwoL14oY2FsbG91dHx0cmFuc2l0aW9uKS8udGVzdChxKT8xZTM6ciksRS5kdXJhdGlvbj1NYXRoLm1heChFLmR1cmF0aW9uKihFLmJhY2t3YXJkcz8xLWEveDooYSsxKS94KSwuNzUqRS5kdXJhdGlvbiwyMDApKSx0LlJlZGlyZWN0c1txXS5jYWxsKGIsYixFfHx7fSxhLHgsbyxCLnByb21pc2U/QjpkKX0pLGEoKX12YXIgSD1cIlZlbG9jaXR5OiBGaXJzdCBhcmd1bWVudCAoXCIrcStcIikgd2FzIG5vdCBhIHByb3BlcnR5IG1hcCwgYSBrbm93biBhY3Rpb24sIG9yIGEgcmVnaXN0ZXJlZCByZWRpcmVjdC4gQWJvcnRpbmcuXCI7cmV0dXJuIEIucHJvbWlzZT9CLnJlamVjdGVyKG5ldyBFcnJvcihIKSk6Y29uc29sZS5sb2coSCksYSgpfUM9XCJzdGFydFwifXZhciBJPXtsYXN0UGFyZW50Om51bGwsbGFzdFBvc2l0aW9uOm51bGwsbGFzdEZvbnRTaXplOm51bGwsbGFzdFBlcmNlbnRUb1B4V2lkdGg6bnVsbCxsYXN0UGVyY2VudFRvUHhIZWlnaHQ6bnVsbCxsYXN0RW1Ub1B4Om51bGwscmVtVG9QeDpudWxsLHZ3VG9QeDpudWxsLHZoVG9QeDpudWxsfSxKPVtdO20uZWFjaChvLGZ1bmN0aW9uKGEsYil7cC5pc05vZGUoYikmJmUuY2FsbChiKX0pO3ZhciBLLEU9bS5leHRlbmQoe30sdC5kZWZhdWx0cyxzKTtpZihFLmxvb3A9cGFyc2VJbnQoRS5sb29wKSxLPTIqRS5sb29wLTEsRS5sb29wKWZvcih2YXIgTD0wO0s+TDtMKyspe3ZhciBNPXtkZWxheTpFLmRlbGF5LHByb2dyZXNzOkUucHJvZ3Jlc3N9O0w9PT1LLTEmJihNLmRpc3BsYXk9RS5kaXNwbGF5LE0udmlzaWJpbGl0eT1FLnZpc2liaWxpdHksTS5jb21wbGV0ZT1FLmNvbXBsZXRlKSx3KG8sXCJyZXZlcnNlXCIsTSl9cmV0dXJuIGEoKX19O3Q9bS5leHRlbmQodyx0KSx0LmFuaW1hdGU9dzt2YXIgeD1iLnJlcXVlc3RBbmltYXRpb25GcmFtZXx8bztyZXR1cm4gdC5TdGF0ZS5pc01vYmlsZXx8Yy5oaWRkZW49PT1kfHxjLmFkZEV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsZnVuY3Rpb24oKXtjLmhpZGRlbj8oeD1mdW5jdGlvbihhKXtyZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpe2EoITApfSwxNil9LGsoKSk6eD1iLnJlcXVlc3RBbmltYXRpb25GcmFtZXx8b30pLGEuVmVsb2NpdHk9dCxhIT09YiYmKGEuZm4udmVsb2NpdHk9dyxhLmZuLnZlbG9jaXR5LmRlZmF1bHRzPXQuZGVmYXVsdHMpLG0uZWFjaChbXCJEb3duXCIsXCJVcFwiXSxmdW5jdGlvbihhLGIpe3QuUmVkaXJlY3RzW1wic2xpZGVcIitiXT1mdW5jdGlvbihhLGMsZSxmLGcsaCl7dmFyIGk9bS5leHRlbmQoe30sYyksaj1pLmJlZ2luLGs9aS5jb21wbGV0ZSxsPXtoZWlnaHQ6XCJcIixtYXJnaW5Ub3A6XCJcIixtYXJnaW5Cb3R0b206XCJcIixwYWRkaW5nVG9wOlwiXCIscGFkZGluZ0JvdHRvbTpcIlwifSxuPXt9O2kuZGlzcGxheT09PWQmJihpLmRpc3BsYXk9XCJEb3duXCI9PT1iP1wiaW5saW5lXCI9PT10LkNTUy5WYWx1ZXMuZ2V0RGlzcGxheVR5cGUoYSk/XCJpbmxpbmUtYmxvY2tcIjpcImJsb2NrXCI6XCJub25lXCIpLGkuYmVnaW49ZnVuY3Rpb24oKXtqJiZqLmNhbGwoZyxnKTtmb3IodmFyIGMgaW4gbCl7bltjXT1hLnN0eWxlW2NdO3ZhciBkPXQuQ1NTLmdldFByb3BlcnR5VmFsdWUoYSxjKTtsW2NdPVwiRG93blwiPT09Yj9bZCwwXTpbMCxkXX1uLm92ZXJmbG93PWEuc3R5bGUub3ZlcmZsb3csYS5zdHlsZS5vdmVyZmxvdz1cImhpZGRlblwifSxpLmNvbXBsZXRlPWZ1bmN0aW9uKCl7Zm9yKHZhciBiIGluIG4pYS5zdHlsZVtiXT1uW2JdO2smJmsuY2FsbChnLGcpLGgmJmgucmVzb2x2ZXIoZyl9LHQoYSxsLGkpfX0pLG0uZWFjaChbXCJJblwiLFwiT3V0XCJdLGZ1bmN0aW9uKGEsYil7dC5SZWRpcmVjdHNbXCJmYWRlXCIrYl09ZnVuY3Rpb24oYSxjLGUsZixnLGgpe3ZhciBpPW0uZXh0ZW5kKHt9LGMpLGo9e29wYWNpdHk6XCJJblwiPT09Yj8xOjB9LGs9aS5jb21wbGV0ZTtpLmNvbXBsZXRlPWUhPT1mLTE/aS5iZWdpbj1udWxsOmZ1bmN0aW9uKCl7ayYmay5jYWxsKGcsZyksaCYmaC5yZXNvbHZlcihnKX0saS5kaXNwbGF5PT09ZCYmKGkuZGlzcGxheT1cIkluXCI9PT1iP1wiYXV0b1wiOlwibm9uZVwiKSx0KHRoaXMsaixpKX19KSx0fSh3aW5kb3cualF1ZXJ5fHx3aW5kb3cuWmVwdG98fHdpbmRvdyx3aW5kb3csZG9jdW1lbnQpfSkpLCFmdW5jdGlvbihhLGIsYyxkKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBlKGEsYixjKXtyZXR1cm4gc2V0VGltZW91dChrKGEsYyksYil9ZnVuY3Rpb24gZihhLGIsYyl7cmV0dXJuIEFycmF5LmlzQXJyYXkoYSk/KGcoYSxjW2JdLGMpLCEwKTohMX1mdW5jdGlvbiBnKGEsYixjKXt2YXIgZTtpZihhKWlmKGEuZm9yRWFjaClhLmZvckVhY2goYixjKTtlbHNlIGlmKGEubGVuZ3RoIT09ZClmb3IoZT0wO2U8YS5sZW5ndGg7KWIuY2FsbChjLGFbZV0sZSxhKSxlKys7ZWxzZSBmb3IoZSBpbiBhKWEuaGFzT3duUHJvcGVydHkoZSkmJmIuY2FsbChjLGFbZV0sZSxhKX1mdW5jdGlvbiBoKGEsYixjKXtmb3IodmFyIGU9T2JqZWN0LmtleXMoYiksZj0wO2Y8ZS5sZW5ndGg7KSghY3x8YyYmYVtlW2ZdXT09PWQpJiYoYVtlW2ZdXT1iW2VbZl1dKSxmKys7cmV0dXJuIGF9ZnVuY3Rpb24gaShhLGIpe3JldHVybiBoKGEsYiwhMCl9ZnVuY3Rpb24gaihhLGIsYyl7dmFyIGQsZT1iLnByb3RvdHlwZTtkPWEucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZSksZC5jb25zdHJ1Y3Rvcj1hLGQuX3N1cGVyPWUsYyYmaChkLGMpfWZ1bmN0aW9uIGsoYSxiKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYS5hcHBseShiLGFyZ3VtZW50cyl9fWZ1bmN0aW9uIGwoYSxiKXtyZXR1cm4gdHlwZW9mIGE9PWthP2EuYXBwbHkoYj9iWzBdfHxkOmQsYik6YX1mdW5jdGlvbiBtKGEsYil7cmV0dXJuIGE9PT1kP2I6YX1mdW5jdGlvbiBuKGEsYixjKXtnKHIoYiksZnVuY3Rpb24oYil7YS5hZGRFdmVudExpc3RlbmVyKGIsYywhMSl9KX1mdW5jdGlvbiBvKGEsYixjKXtnKHIoYiksZnVuY3Rpb24oYil7YS5yZW1vdmVFdmVudExpc3RlbmVyKGIsYywhMSl9KX1mdW5jdGlvbiBwKGEsYil7Zm9yKDthOyl7aWYoYT09YilyZXR1cm4hMDthPWEucGFyZW50Tm9kZX1yZXR1cm4hMX1mdW5jdGlvbiBxKGEsYil7cmV0dXJuIGEuaW5kZXhPZihiKT4tMX1mdW5jdGlvbiByKGEpe3JldHVybiBhLnRyaW0oKS5zcGxpdCgvXFxzKy9nKX1mdW5jdGlvbiBzKGEsYixjKXtpZihhLmluZGV4T2YmJiFjKXJldHVybiBhLmluZGV4T2YoYik7Zm9yKHZhciBkPTA7ZDxhLmxlbmd0aDspe2lmKGMmJmFbZF1bY109PWJ8fCFjJiZhW2RdPT09YilyZXR1cm4gZDtkKyt9cmV0dXJuLTF9ZnVuY3Rpb24gdChhKXtyZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYSwwKX1mdW5jdGlvbiB1KGEsYixjKXtmb3IodmFyIGQ9W10sZT1bXSxmPTA7ZjxhLmxlbmd0aDspe3ZhciBnPWI/YVtmXVtiXTphW2ZdO3MoZSxnKTwwJiZkLnB1c2goYVtmXSksZVtmXT1nLGYrK31yZXR1cm4gYyYmKGQ9Yj9kLnNvcnQoZnVuY3Rpb24oYSxjKXtyZXR1cm4gYVtiXT5jW2JdfSk6ZC5zb3J0KCkpLGR9ZnVuY3Rpb24gdihhLGIpe2Zvcih2YXIgYyxlLGY9YlswXS50b1VwcGVyQ2FzZSgpK2Iuc2xpY2UoMSksZz0wO2c8aWEubGVuZ3RoOyl7aWYoYz1pYVtnXSxlPWM/YytmOmIsZSBpbiBhKXJldHVybiBlO2crK31yZXR1cm4gZH1mdW5jdGlvbiB3KCl7cmV0dXJuIG9hKyt9ZnVuY3Rpb24geChhKXt2YXIgYj1hLm93bmVyRG9jdW1lbnQ7cmV0dXJuIGIuZGVmYXVsdFZpZXd8fGIucGFyZW50V2luZG93fWZ1bmN0aW9uIHkoYSxiKXt2YXIgYz10aGlzO3RoaXMubWFuYWdlcj1hLHRoaXMuY2FsbGJhY2s9Yix0aGlzLmVsZW1lbnQ9YS5lbGVtZW50LHRoaXMudGFyZ2V0PWEub3B0aW9ucy5pbnB1dFRhcmdldCx0aGlzLmRvbUhhbmRsZXI9ZnVuY3Rpb24oYil7bChhLm9wdGlvbnMuZW5hYmxlLFthXSkmJmMuaGFuZGxlcihiKX0sdGhpcy5pbml0KCl9ZnVuY3Rpb24geihhKXt2YXIgYixjPWEub3B0aW9ucy5pbnB1dENsYXNzO3JldHVybiBuZXcoYj1jP2M6cmE/TjpzYT9ROnFhP1M6TSkoYSxBKX1mdW5jdGlvbiBBKGEsYixjKXt2YXIgZD1jLnBvaW50ZXJzLmxlbmd0aCxlPWMuY2hhbmdlZFBvaW50ZXJzLmxlbmd0aCxmPWImeWEmJjA9PT1kLWUsZz1iJihBYXxCYSkmJjA9PT1kLWU7Yy5pc0ZpcnN0PSEhZixjLmlzRmluYWw9ISFnLGYmJihhLnNlc3Npb249e30pLGMuZXZlbnRUeXBlPWIsQihhLGMpLGEuZW1pdChcImhhbW1lci5pbnB1dFwiLGMpLGEucmVjb2duaXplKGMpLGEuc2Vzc2lvbi5wcmV2SW5wdXQ9Y31mdW5jdGlvbiBCKGEsYil7dmFyIGM9YS5zZXNzaW9uLGQ9Yi5wb2ludGVycyxlPWQubGVuZ3RoO2MuZmlyc3RJbnB1dHx8KGMuZmlyc3RJbnB1dD1FKGIpKSxlPjEmJiFjLmZpcnN0TXVsdGlwbGU/Yy5maXJzdE11bHRpcGxlPUUoYik6MT09PWUmJihjLmZpcnN0TXVsdGlwbGU9ITEpO3ZhciBmPWMuZmlyc3RJbnB1dCxnPWMuZmlyc3RNdWx0aXBsZSxoPWc/Zy5jZW50ZXI6Zi5jZW50ZXIsaT1iLmNlbnRlcj1GKGQpO2IudGltZVN0YW1wPW5hKCksYi5kZWx0YVRpbWU9Yi50aW1lU3RhbXAtZi50aW1lU3RhbXAsYi5hbmdsZT1KKGgsaSksYi5kaXN0YW5jZT1JKGgsaSksQyhjLGIpLGIub2Zmc2V0RGlyZWN0aW9uPUgoYi5kZWx0YVgsYi5kZWx0YVkpLGIuc2NhbGU9Zz9MKGcucG9pbnRlcnMsZCk6MSxiLnJvdGF0aW9uPWc/SyhnLnBvaW50ZXJzLGQpOjAsRChjLGIpO3ZhciBqPWEuZWxlbWVudDtwKGIuc3JjRXZlbnQudGFyZ2V0LGopJiYoaj1iLnNyY0V2ZW50LnRhcmdldCksYi50YXJnZXQ9an1mdW5jdGlvbiBDKGEsYil7dmFyIGM9Yi5jZW50ZXIsZD1hLm9mZnNldERlbHRhfHx7fSxlPWEucHJldkRlbHRhfHx7fSxmPWEucHJldklucHV0fHx7fTsoYi5ldmVudFR5cGU9PT15YXx8Zi5ldmVudFR5cGU9PT1BYSkmJihlPWEucHJldkRlbHRhPXt4OmYuZGVsdGFYfHwwLHk6Zi5kZWx0YVl8fDB9LGQ9YS5vZmZzZXREZWx0YT17eDpjLngseTpjLnl9KSxiLmRlbHRhWD1lLngrKGMueC1kLngpLGIuZGVsdGFZPWUueSsoYy55LWQueSl9ZnVuY3Rpb24gRChhLGIpe3ZhciBjLGUsZixnLGg9YS5sYXN0SW50ZXJ2YWx8fGIsaT1iLnRpbWVTdGFtcC1oLnRpbWVTdGFtcDtpZihiLmV2ZW50VHlwZSE9QmEmJihpPnhhfHxoLnZlbG9jaXR5PT09ZCkpe3ZhciBqPWguZGVsdGFYLWIuZGVsdGFYLGs9aC5kZWx0YVktYi5kZWx0YVksbD1HKGksaixrKTtlPWwueCxmPWwueSxjPW1hKGwueCk+bWEobC55KT9sLng6bC55LGc9SChqLGspLGEubGFzdEludGVydmFsPWJ9ZWxzZSBjPWgudmVsb2NpdHksZT1oLnZlbG9jaXR5WCxmPWgudmVsb2NpdHlZLGc9aC5kaXJlY3Rpb247Yi52ZWxvY2l0eT1jLGIudmVsb2NpdHlYPWUsYi52ZWxvY2l0eVk9ZixiLmRpcmVjdGlvbj1nfWZ1bmN0aW9uIEUoYSl7Zm9yKHZhciBiPVtdLGM9MDtjPGEucG9pbnRlcnMubGVuZ3RoOyliW2NdPXtjbGllbnRYOmxhKGEucG9pbnRlcnNbY10uY2xpZW50WCksY2xpZW50WTpsYShhLnBvaW50ZXJzW2NdLmNsaWVudFkpfSxjKys7cmV0dXJue3RpbWVTdGFtcDpuYSgpLHBvaW50ZXJzOmIsY2VudGVyOkYoYiksZGVsdGFYOmEuZGVsdGFYLGRlbHRhWTphLmRlbHRhWX19ZnVuY3Rpb24gRihhKXt2YXIgYj1hLmxlbmd0aDtpZigxPT09YilyZXR1cm57eDpsYShhWzBdLmNsaWVudFgpLHk6bGEoYVswXS5jbGllbnRZKX07Zm9yKHZhciBjPTAsZD0wLGU9MDtiPmU7KWMrPWFbZV0uY2xpZW50WCxkKz1hW2VdLmNsaWVudFksZSsrO3JldHVybnt4OmxhKGMvYikseTpsYShkL2IpfX1mdW5jdGlvbiBHKGEsYixjKXtyZXR1cm57eDpiL2F8fDAseTpjL2F8fDB9fWZ1bmN0aW9uIEgoYSxiKXtyZXR1cm4gYT09PWI/Q2E6bWEoYSk+PW1hKGIpP2E+MD9EYTpFYTpiPjA/RmE6R2F9ZnVuY3Rpb24gSShhLGIsYyl7Y3x8KGM9S2EpO3ZhciBkPWJbY1swXV0tYVtjWzBdXSxlPWJbY1sxXV0tYVtjWzFdXTtyZXR1cm4gTWF0aC5zcXJ0KGQqZCtlKmUpfWZ1bmN0aW9uIEooYSxiLGMpe2N8fChjPUthKTt2YXIgZD1iW2NbMF1dLWFbY1swXV0sZT1iW2NbMV1dLWFbY1sxXV07cmV0dXJuIDE4MCpNYXRoLmF0YW4yKGUsZCkvTWF0aC5QSX1mdW5jdGlvbiBLKGEsYil7cmV0dXJuIEooYlsxXSxiWzBdLExhKS1KKGFbMV0sYVswXSxMYSl9ZnVuY3Rpb24gTChhLGIpe3JldHVybiBJKGJbMF0sYlsxXSxMYSkvSShhWzBdLGFbMV0sTGEpfWZ1bmN0aW9uIE0oKXt0aGlzLmV2RWw9TmEsdGhpcy5ldldpbj1PYSx0aGlzLmFsbG93PSEwLHRoaXMucHJlc3NlZD0hMSx5LmFwcGx5KHRoaXMsYXJndW1lbnRzKX1mdW5jdGlvbiBOKCl7dGhpcy5ldkVsPVJhLHRoaXMuZXZXaW49U2EseS5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5zdG9yZT10aGlzLm1hbmFnZXIuc2Vzc2lvbi5wb2ludGVyRXZlbnRzPVtdfWZ1bmN0aW9uIE8oKXt0aGlzLmV2VGFyZ2V0PVVhLHRoaXMuZXZXaW49VmEsdGhpcy5zdGFydGVkPSExLHkuYXBwbHkodGhpcyxhcmd1bWVudHMpfWZ1bmN0aW9uIFAoYSxiKXt2YXIgYz10KGEudG91Y2hlcyksZD10KGEuY2hhbmdlZFRvdWNoZXMpO3JldHVybiBiJihBYXxCYSkmJihjPXUoYy5jb25jYXQoZCksXCJpZGVudGlmaWVyXCIsITApKSxbYyxkXX1mdW5jdGlvbiBRKCl7dGhpcy5ldlRhcmdldD1YYSx0aGlzLnRhcmdldElkcz17fSx5LmFwcGx5KHRoaXMsYXJndW1lbnRzKX1mdW5jdGlvbiBSKGEsYil7dmFyIGM9dChhLnRvdWNoZXMpLGQ9dGhpcy50YXJnZXRJZHM7aWYoYiYoeWF8emEpJiYxPT09Yy5sZW5ndGgpcmV0dXJuIGRbY1swXS5pZGVudGlmaWVyXT0hMCxbYyxjXTt2YXIgZSxmLGc9dChhLmNoYW5nZWRUb3VjaGVzKSxoPVtdLGk9dGhpcy50YXJnZXQ7aWYoZj1jLmZpbHRlcihmdW5jdGlvbihhKXtyZXR1cm4gcChhLnRhcmdldCxpKX0pLGI9PT15YSlmb3IoZT0wO2U8Zi5sZW5ndGg7KWRbZltlXS5pZGVudGlmaWVyXT0hMCxlKys7Zm9yKGU9MDtlPGcubGVuZ3RoOylkW2dbZV0uaWRlbnRpZmllcl0mJmgucHVzaChnW2VdKSxiJihBYXxCYSkmJmRlbGV0ZSBkW2dbZV0uaWRlbnRpZmllcl0sZSsrO3JldHVybiBoLmxlbmd0aD9bdShmLmNvbmNhdChoKSxcImlkZW50aWZpZXJcIiwhMCksaF06dm9pZCAwfWZ1bmN0aW9uIFMoKXt5LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgYT1rKHRoaXMuaGFuZGxlcix0aGlzKTt0aGlzLnRvdWNoPW5ldyBRKHRoaXMubWFuYWdlcixhKSx0aGlzLm1vdXNlPW5ldyBNKHRoaXMubWFuYWdlcixhKX1mdW5jdGlvbiBUKGEsYil7dGhpcy5tYW5hZ2VyPWEsdGhpcy5zZXQoYil9ZnVuY3Rpb24gVShhKXtpZihxKGEsYmIpKXJldHVybiBiYjt2YXIgYj1xKGEsY2IpLGM9cShhLGRiKTtyZXR1cm4gYiYmYz9jYitcIiBcIitkYjpifHxjP2I/Y2I6ZGI6cShhLGFiKT9hYjpfYX1mdW5jdGlvbiBWKGEpe3RoaXMuaWQ9dygpLHRoaXMubWFuYWdlcj1udWxsLHRoaXMub3B0aW9ucz1pKGF8fHt9LHRoaXMuZGVmYXVsdHMpLHRoaXMub3B0aW9ucy5lbmFibGU9bSh0aGlzLm9wdGlvbnMuZW5hYmxlLCEwKSx0aGlzLnN0YXRlPWViLHRoaXMuc2ltdWx0YW5lb3VzPXt9LHRoaXMucmVxdWlyZUZhaWw9W119ZnVuY3Rpb24gVyhhKXtyZXR1cm4gYSZqYj9cImNhbmNlbFwiOmEmaGI/XCJlbmRcIjphJmdiP1wibW92ZVwiOmEmZmI/XCJzdGFydFwiOlwiXCJ9ZnVuY3Rpb24gWChhKXtyZXR1cm4gYT09R2E/XCJkb3duXCI6YT09RmE/XCJ1cFwiOmE9PURhP1wibGVmdFwiOmE9PUVhP1wicmlnaHRcIjpcIlwifWZ1bmN0aW9uIFkoYSxiKXt2YXIgYz1iLm1hbmFnZXI7cmV0dXJuIGM/Yy5nZXQoYSk6YX1mdW5jdGlvbiBaKCl7Vi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9ZnVuY3Rpb24gJCgpe1ouYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMucFg9bnVsbCx0aGlzLnBZPW51bGx9ZnVuY3Rpb24gXygpe1ouYXBwbHkodGhpcyxhcmd1bWVudHMpfWZ1bmN0aW9uIGFhKCl7Vi5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5fdGltZXI9bnVsbCx0aGlzLl9pbnB1dD1udWxsfWZ1bmN0aW9uIGJhKCl7Wi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9ZnVuY3Rpb24gY2EoKXtaLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1mdW5jdGlvbiBkYSgpe1YuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMucFRpbWU9ITEsdGhpcy5wQ2VudGVyPSExLHRoaXMuX3RpbWVyPW51bGwsdGhpcy5faW5wdXQ9bnVsbCx0aGlzLmNvdW50PTB9ZnVuY3Rpb24gZWEoYSxiKXtyZXR1cm4gYj1ifHx7fSxiLnJlY29nbml6ZXJzPW0oYi5yZWNvZ25pemVycyxlYS5kZWZhdWx0cy5wcmVzZXQpLG5ldyBmYShhLGIpfWZ1bmN0aW9uIGZhKGEsYil7Yj1ifHx7fSx0aGlzLm9wdGlvbnM9aShiLGVhLmRlZmF1bHRzKSx0aGlzLm9wdGlvbnMuaW5wdXRUYXJnZXQ9dGhpcy5vcHRpb25zLmlucHV0VGFyZ2V0fHxhLHRoaXMuaGFuZGxlcnM9e30sdGhpcy5zZXNzaW9uPXt9LHRoaXMucmVjb2duaXplcnM9W10sdGhpcy5lbGVtZW50PWEsdGhpcy5pbnB1dD16KHRoaXMpLHRoaXMudG91Y2hBY3Rpb249bmV3IFQodGhpcyx0aGlzLm9wdGlvbnMudG91Y2hBY3Rpb24pLGdhKHRoaXMsITApLGcoYi5yZWNvZ25pemVycyxmdW5jdGlvbihhKXt2YXIgYj10aGlzLmFkZChuZXcgYVswXShhWzFdKSk7YVsyXSYmYi5yZWNvZ25pemVXaXRoKGFbMl0pLGFbM10mJmIucmVxdWlyZUZhaWx1cmUoYVszXSl9LHRoaXMpfWZ1bmN0aW9uIGdhKGEsYil7dmFyIGM9YS5lbGVtZW50O2coYS5vcHRpb25zLmNzc1Byb3BzLGZ1bmN0aW9uKGEsZCl7Yy5zdHlsZVt2KGMuc3R5bGUsZCldPWI/YTpcIlwifSl9ZnVuY3Rpb24gaGEoYSxjKXt2YXIgZD1iLmNyZWF0ZUV2ZW50KFwiRXZlbnRcIik7ZC5pbml0RXZlbnQoYSwhMCwhMCksZC5nZXN0dXJlPWMsYy50YXJnZXQuZGlzcGF0Y2hFdmVudChkKX12YXIgaWE9W1wiXCIsXCJ3ZWJraXRcIixcIm1velwiLFwiTVNcIixcIm1zXCIsXCJvXCJdLGphPWIuY3JlYXRlRWxlbWVudChcImRpdlwiKSxrYT1cImZ1bmN0aW9uXCIsbGE9TWF0aC5yb3VuZCxtYT1NYXRoLmFicyxuYT1EYXRlLm5vdyxvYT0xLHBhPS9tb2JpbGV8dGFibGV0fGlwKGFkfGhvbmV8b2QpfGFuZHJvaWQvaSxxYT1cIm9udG91Y2hzdGFydFwiaW4gYSxyYT12KGEsXCJQb2ludGVyRXZlbnRcIikhPT1kLHNhPXFhJiZwYS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLHRhPVwidG91Y2hcIix1YT1cInBlblwiLHZhPVwibW91c2VcIix3YT1cImtpbmVjdFwiLHhhPTI1LHlhPTEsemE9MixBYT00LEJhPTgsQ2E9MSxEYT0yLEVhPTQsRmE9OCxHYT0xNixIYT1EYXxFYSxJYT1GYXxHYSxKYT1IYXxJYSxLYT1bXCJ4XCIsXCJ5XCJdLExhPVtcImNsaWVudFhcIixcImNsaWVudFlcIl07eS5wcm90b3R5cGU9e2hhbmRsZXI6ZnVuY3Rpb24oKXt9LGluaXQ6ZnVuY3Rpb24oKXt0aGlzLmV2RWwmJm4odGhpcy5lbGVtZW50LHRoaXMuZXZFbCx0aGlzLmRvbUhhbmRsZXIpLHRoaXMuZXZUYXJnZXQmJm4odGhpcy50YXJnZXQsdGhpcy5ldlRhcmdldCx0aGlzLmRvbUhhbmRsZXIpLHRoaXMuZXZXaW4mJm4oeCh0aGlzLmVsZW1lbnQpLHRoaXMuZXZXaW4sdGhpcy5kb21IYW5kbGVyKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuZXZFbCYmbyh0aGlzLmVsZW1lbnQsdGhpcy5ldkVsLHRoaXMuZG9tSGFuZGxlciksdGhpcy5ldlRhcmdldCYmbyh0aGlzLnRhcmdldCx0aGlzLmV2VGFyZ2V0LHRoaXMuZG9tSGFuZGxlciksdGhpcy5ldldpbiYmbyh4KHRoaXMuZWxlbWVudCksdGhpcy5ldldpbix0aGlzLmRvbUhhbmRsZXIpfX07dmFyIE1hPXttb3VzZWRvd246eWEsbW91c2Vtb3ZlOnphLG1vdXNldXA6QWF9LE5hPVwibW91c2Vkb3duXCIsT2E9XCJtb3VzZW1vdmUgbW91c2V1cFwiO2ooTSx5LHtoYW5kbGVyOmZ1bmN0aW9uKGEpe3ZhciBiPU1hW2EudHlwZV07YiZ5YSYmMD09PWEuYnV0dG9uJiYodGhpcy5wcmVzc2VkPSEwKSxiJnphJiYxIT09YS53aGljaCYmKGI9QWEpLHRoaXMucHJlc3NlZCYmdGhpcy5hbGxvdyYmKGImQWEmJih0aGlzLnByZXNzZWQ9ITEpLHRoaXMuY2FsbGJhY2sodGhpcy5tYW5hZ2VyLGIse3BvaW50ZXJzOlthXSxjaGFuZ2VkUG9pbnRlcnM6W2FdLHBvaW50ZXJUeXBlOnZhLHNyY0V2ZW50OmF9KSl9fSk7dmFyIFBhPXtwb2ludGVyZG93bjp5YSxwb2ludGVybW92ZTp6YSxwb2ludGVydXA6QWEscG9pbnRlcmNhbmNlbDpCYSxwb2ludGVyb3V0OkJhfSxRYT17Mjp0YSwzOnVhLDQ6dmEsNTp3YX0sUmE9XCJwb2ludGVyZG93blwiLFNhPVwicG9pbnRlcm1vdmUgcG9pbnRlcnVwIHBvaW50ZXJjYW5jZWxcIjthLk1TUG9pbnRlckV2ZW50JiYoUmE9XCJNU1BvaW50ZXJEb3duXCIsU2E9XCJNU1BvaW50ZXJNb3ZlIE1TUG9pbnRlclVwIE1TUG9pbnRlckNhbmNlbFwiKSxqKE4seSx7aGFuZGxlcjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnN0b3JlLGM9ITEsZD1hLnR5cGUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKFwibXNcIixcIlwiKSxlPVBhW2RdLGY9UWFbYS5wb2ludGVyVHlwZV18fGEucG9pbnRlclR5cGUsZz1mPT10YSxoPXMoYixhLnBvaW50ZXJJZCxcInBvaW50ZXJJZFwiKTtlJnlhJiYoMD09PWEuYnV0dG9ufHxnKT8wPmgmJihiLnB1c2goYSksaD1iLmxlbmd0aC0xKTplJihBYXxCYSkmJihjPSEwKSwwPmh8fChiW2hdPWEsdGhpcy5jYWxsYmFjayh0aGlzLm1hbmFnZXIsZSx7cG9pbnRlcnM6YixjaGFuZ2VkUG9pbnRlcnM6W2FdLHBvaW50ZXJUeXBlOmYsc3JjRXZlbnQ6YX0pLGMmJmIuc3BsaWNlKGgsMSkpfX0pO3ZhciBUYT17dG91Y2hzdGFydDp5YSx0b3VjaG1vdmU6emEsdG91Y2hlbmQ6QWEsdG91Y2hjYW5jZWw6QmF9LFVhPVwidG91Y2hzdGFydFwiLFZhPVwidG91Y2hzdGFydCB0b3VjaG1vdmUgdG91Y2hlbmQgdG91Y2hjYW5jZWxcIjtqKE8seSx7aGFuZGxlcjpmdW5jdGlvbihhKXt2YXIgYj1UYVthLnR5cGVdO2lmKGI9PT15YSYmKHRoaXMuc3RhcnRlZD0hMCksdGhpcy5zdGFydGVkKXt2YXIgYz1QLmNhbGwodGhpcyxhLGIpO2ImKEFhfEJhKSYmMD09PWNbMF0ubGVuZ3RoLWNbMV0ubGVuZ3RoJiYodGhpcy5zdGFydGVkPSExKSx0aGlzLmNhbGxiYWNrKHRoaXMubWFuYWdlcixiLHtwb2ludGVyczpjWzBdLGNoYW5nZWRQb2ludGVyczpjWzFdLHBvaW50ZXJUeXBlOnRhLHNyY0V2ZW50OmF9KX19fSk7dmFyIFdhPXt0b3VjaHN0YXJ0OnlhLHRvdWNobW92ZTp6YSx0b3VjaGVuZDpBYSx0b3VjaGNhbmNlbDpCYX0sWGE9XCJ0b3VjaHN0YXJ0IHRvdWNobW92ZSB0b3VjaGVuZCB0b3VjaGNhbmNlbFwiO2ooUSx5LHtoYW5kbGVyOmZ1bmN0aW9uKGEpe3ZhciBiPVdhW2EudHlwZV0sYz1SLmNhbGwodGhpcyxhLGIpO2MmJnRoaXMuY2FsbGJhY2sodGhpcy5tYW5hZ2VyLGIse3BvaW50ZXJzOmNbMF0sY2hhbmdlZFBvaW50ZXJzOmNbMV0scG9pbnRlclR5cGU6dGEsc3JjRXZlbnQ6YX0pfX0pLGooUyx5LHtoYW5kbGVyOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1jLnBvaW50ZXJUeXBlPT10YSxlPWMucG9pbnRlclR5cGU9PXZhO2lmKGQpdGhpcy5tb3VzZS5hbGxvdz0hMTtlbHNlIGlmKGUmJiF0aGlzLm1vdXNlLmFsbG93KXJldHVybjtiJihBYXxCYSkmJih0aGlzLm1vdXNlLmFsbG93PSEwKSx0aGlzLmNhbGxiYWNrKGEsYixjKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMudG91Y2guZGVzdHJveSgpLHRoaXMubW91c2UuZGVzdHJveSgpfX0pO3ZhciBZYT12KGphLnN0eWxlLFwidG91Y2hBY3Rpb25cIiksWmE9WWEhPT1kLCRhPVwiY29tcHV0ZVwiLF9hPVwiYXV0b1wiLGFiPVwibWFuaXB1bGF0aW9uXCIsYmI9XCJub25lXCIsY2I9XCJwYW4teFwiLGRiPVwicGFuLXlcIjtULnByb3RvdHlwZT17c2V0OmZ1bmN0aW9uKGEpe2E9PSRhJiYoYT10aGlzLmNvbXB1dGUoKSksWmEmJih0aGlzLm1hbmFnZXIuZWxlbWVudC5zdHlsZVtZYV09YSksdGhpcy5hY3Rpb25zPWEudG9Mb3dlckNhc2UoKS50cmltKCl9LHVwZGF0ZTpmdW5jdGlvbigpe3RoaXMuc2V0KHRoaXMubWFuYWdlci5vcHRpb25zLnRvdWNoQWN0aW9uKX0sY29tcHV0ZTpmdW5jdGlvbigpe3ZhciBhPVtdO3JldHVybiBnKHRoaXMubWFuYWdlci5yZWNvZ25pemVycyxmdW5jdGlvbihiKXtsKGIub3B0aW9ucy5lbmFibGUsW2JdKSYmKGE9YS5jb25jYXQoYi5nZXRUb3VjaEFjdGlvbigpKSl9KSxVKGEuam9pbihcIiBcIikpfSxwcmV2ZW50RGVmYXVsdHM6ZnVuY3Rpb24oYSl7aWYoIVphKXt2YXIgYj1hLnNyY0V2ZW50LGM9YS5vZmZzZXREaXJlY3Rpb247aWYodGhpcy5tYW5hZ2VyLnNlc3Npb24ucHJldmVudGVkKXJldHVybiB2b2lkIGIucHJldmVudERlZmF1bHQoKTt2YXIgZD10aGlzLmFjdGlvbnMsZT1xKGQsYmIpLGY9cShkLGRiKSxnPXEoZCxjYik7cmV0dXJuIGV8fGYmJmMmSGF8fGcmJmMmSWE/dGhpcy5wcmV2ZW50U3JjKGIpOnZvaWQgMH19LHByZXZlbnRTcmM6ZnVuY3Rpb24oYSl7dGhpcy5tYW5hZ2VyLnNlc3Npb24ucHJldmVudGVkPSEwLGEucHJldmVudERlZmF1bHQoKX19O3ZhciBlYj0xLGZiPTIsZ2I9NCxoYj04LGliPWhiLGpiPTE2LGtiPTMyO1YucHJvdG90eXBlPXtkZWZhdWx0czp7fSxzZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGgodGhpcy5vcHRpb25zLGEpLHRoaXMubWFuYWdlciYmdGhpcy5tYW5hZ2VyLnRvdWNoQWN0aW9uLnVwZGF0ZSgpLHRoaXN9LHJlY29nbml6ZVdpdGg6ZnVuY3Rpb24oYSl7aWYoZihhLFwicmVjb2duaXplV2l0aFwiLHRoaXMpKXJldHVybiB0aGlzO3ZhciBiPXRoaXMuc2ltdWx0YW5lb3VzO3JldHVybiBhPVkoYSx0aGlzKSxiW2EuaWRdfHwoYlthLmlkXT1hLGEucmVjb2duaXplV2l0aCh0aGlzKSksdGhpc30sZHJvcFJlY29nbml6ZVdpdGg6ZnVuY3Rpb24oYSl7cmV0dXJuIGYoYSxcImRyb3BSZWNvZ25pemVXaXRoXCIsdGhpcyk/dGhpczooYT1ZKGEsdGhpcyksZGVsZXRlIHRoaXMuc2ltdWx0YW5lb3VzW2EuaWRdLHRoaXMpfSxyZXF1aXJlRmFpbHVyZTpmdW5jdGlvbihhKXtpZihmKGEsXCJyZXF1aXJlRmFpbHVyZVwiLHRoaXMpKXJldHVybiB0aGlzO3ZhciBiPXRoaXMucmVxdWlyZUZhaWw7cmV0dXJuIGE9WShhLHRoaXMpLC0xPT09cyhiLGEpJiYoYi5wdXNoKGEpLGEucmVxdWlyZUZhaWx1cmUodGhpcykpLHRoaXN9LGRyb3BSZXF1aXJlRmFpbHVyZTpmdW5jdGlvbihhKXtpZihmKGEsXCJkcm9wUmVxdWlyZUZhaWx1cmVcIix0aGlzKSlyZXR1cm4gdGhpczthPVkoYSx0aGlzKTt2YXIgYj1zKHRoaXMucmVxdWlyZUZhaWwsYSk7cmV0dXJuIGI+LTEmJnRoaXMucmVxdWlyZUZhaWwuc3BsaWNlKGIsMSksdGhpc30saGFzUmVxdWlyZUZhaWx1cmVzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVxdWlyZUZhaWwubGVuZ3RoPjB9LGNhblJlY29nbml6ZVdpdGg6ZnVuY3Rpb24oYSl7cmV0dXJuISF0aGlzLnNpbXVsdGFuZW91c1thLmlkXX0sZW1pdDpmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGIpe2MubWFuYWdlci5lbWl0KGMub3B0aW9ucy5ldmVudCsoYj9XKGQpOlwiXCIpLGEpfXZhciBjPXRoaXMsZD10aGlzLnN0YXRlO2hiPmQmJmIoITApLGIoKSxkPj1oYiYmYighMCl9LHRyeUVtaXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY2FuRW1pdCgpP3RoaXMuZW1pdChhKTp2b2lkKHRoaXMuc3RhdGU9a2IpfSxjYW5FbWl0OmZ1bmN0aW9uKCl7Zm9yKHZhciBhPTA7YTx0aGlzLnJlcXVpcmVGYWlsLmxlbmd0aDspe2lmKCEodGhpcy5yZXF1aXJlRmFpbFthXS5zdGF0ZSYoa2J8ZWIpKSlyZXR1cm4hMTthKyt9cmV0dXJuITB9LHJlY29nbml6ZTpmdW5jdGlvbihhKXt2YXIgYj1oKHt9LGEpO3JldHVybiBsKHRoaXMub3B0aW9ucy5lbmFibGUsW3RoaXMsYl0pPyh0aGlzLnN0YXRlJihpYnxqYnxrYikmJih0aGlzLnN0YXRlPWViKSx0aGlzLnN0YXRlPXRoaXMucHJvY2VzcyhiKSx2b2lkKHRoaXMuc3RhdGUmKGZifGdifGhifGpiKSYmdGhpcy50cnlFbWl0KGIpKSk6KHRoaXMucmVzZXQoKSx2b2lkKHRoaXMuc3RhdGU9a2IpKX0scHJvY2VzczpmdW5jdGlvbigpe30sZ2V0VG91Y2hBY3Rpb246ZnVuY3Rpb24oKXt9LHJlc2V0OmZ1bmN0aW9uKCl7fX0saihaLFYse2RlZmF1bHRzOntwb2ludGVyczoxfSxhdHRyVGVzdDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLm9wdGlvbnMucG9pbnRlcnM7cmV0dXJuIDA9PT1ifHxhLnBvaW50ZXJzLmxlbmd0aD09PWJ9LHByb2Nlc3M6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5zdGF0ZSxjPWEuZXZlbnRUeXBlLGQ9YiYoZmJ8Z2IpLGU9dGhpcy5hdHRyVGVzdChhKTtyZXR1cm4gZCYmKGMmQmF8fCFlKT9ifGpiOmR8fGU/YyZBYT9ifGhiOmImZmI/YnxnYjpmYjprYn19KSxqKCQsWix7ZGVmYXVsdHM6e2V2ZW50OlwicGFuXCIsdGhyZXNob2xkOjEwLHBvaW50ZXJzOjEsZGlyZWN0aW9uOkphfSxnZXRUb3VjaEFjdGlvbjpmdW5jdGlvbigpe3ZhciBhPXRoaXMub3B0aW9ucy5kaXJlY3Rpb24sYj1bXTtyZXR1cm4gYSZIYSYmYi5wdXNoKGRiKSxhJklhJiZiLnB1c2goY2IpLGJ9LGRpcmVjdGlvblRlc3Q6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5vcHRpb25zLGM9ITAsZD1hLmRpc3RhbmNlLGU9YS5kaXJlY3Rpb24sZj1hLmRlbHRhWCxnPWEuZGVsdGFZO3JldHVybiBlJmIuZGlyZWN0aW9ufHwoYi5kaXJlY3Rpb24mSGE/KGU9MD09PWY/Q2E6MD5mP0RhOkVhLGM9ZiE9dGhpcy5wWCxkPU1hdGguYWJzKGEuZGVsdGFYKSk6KGU9MD09PWc/Q2E6MD5nP0ZhOkdhLGM9ZyE9dGhpcy5wWSxkPU1hdGguYWJzKGEuZGVsdGFZKSkpLGEuZGlyZWN0aW9uPWUsYyYmZD5iLnRocmVzaG9sZCYmZSZiLmRpcmVjdGlvbn0sYXR0clRlc3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIFoucHJvdG90eXBlLmF0dHJUZXN0LmNhbGwodGhpcyxhKSYmKHRoaXMuc3RhdGUmZmJ8fCEodGhpcy5zdGF0ZSZmYikmJnRoaXMuZGlyZWN0aW9uVGVzdChhKSl9LGVtaXQ6ZnVuY3Rpb24oYSl7dGhpcy5wWD1hLmRlbHRhWCx0aGlzLnBZPWEuZGVsdGFZO3ZhciBiPVgoYS5kaXJlY3Rpb24pO2ImJnRoaXMubWFuYWdlci5lbWl0KHRoaXMub3B0aW9ucy5ldmVudCtiLGEpLHRoaXMuX3N1cGVyLmVtaXQuY2FsbCh0aGlzLGEpfX0pLGooXyxaLHtkZWZhdWx0czp7ZXZlbnQ6XCJwaW5jaFwiLHRocmVzaG9sZDowLHBvaW50ZXJzOjJ9LGdldFRvdWNoQWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuW2JiXX0sYXR0clRlc3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuX3N1cGVyLmF0dHJUZXN0LmNhbGwodGhpcyxhKSYmKE1hdGguYWJzKGEuc2NhbGUtMSk+dGhpcy5vcHRpb25zLnRocmVzaG9sZHx8dGhpcy5zdGF0ZSZmYil9LGVtaXQ6ZnVuY3Rpb24oYSl7aWYodGhpcy5fc3VwZXIuZW1pdC5jYWxsKHRoaXMsYSksMSE9PWEuc2NhbGUpe3ZhciBiPWEuc2NhbGU8MT9cImluXCI6XCJvdXRcIjt0aGlzLm1hbmFnZXIuZW1pdCh0aGlzLm9wdGlvbnMuZXZlbnQrYixhKX19fSksaihhYSxWLHtkZWZhdWx0czp7ZXZlbnQ6XCJwcmVzc1wiLHBvaW50ZXJzOjEsdGltZTo1MDAsdGhyZXNob2xkOjV9LGdldFRvdWNoQWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuW19hXX0scHJvY2VzczpmdW5jdGlvbihhKXt2YXIgYj10aGlzLm9wdGlvbnMsYz1hLnBvaW50ZXJzLmxlbmd0aD09PWIucG9pbnRlcnMsZD1hLmRpc3RhbmNlPGIudGhyZXNob2xkLGY9YS5kZWx0YVRpbWU+Yi50aW1lO2lmKHRoaXMuX2lucHV0PWEsIWR8fCFjfHxhLmV2ZW50VHlwZSYoQWF8QmEpJiYhZil0aGlzLnJlc2V0KCk7ZWxzZSBpZihhLmV2ZW50VHlwZSZ5YSl0aGlzLnJlc2V0KCksdGhpcy5fdGltZXI9ZShmdW5jdGlvbigpe3RoaXMuc3RhdGU9aWIsdGhpcy50cnlFbWl0KCl9LGIudGltZSx0aGlzKTtlbHNlIGlmKGEuZXZlbnRUeXBlJkFhKXJldHVybiBpYjtyZXR1cm4ga2J9LHJlc2V0OmZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVyKX0sZW1pdDpmdW5jdGlvbihhKXt0aGlzLnN0YXRlPT09aWImJihhJiZhLmV2ZW50VHlwZSZBYT90aGlzLm1hbmFnZXIuZW1pdCh0aGlzLm9wdGlvbnMuZXZlbnQrXCJ1cFwiLGEpOih0aGlzLl9pbnB1dC50aW1lU3RhbXA9bmEoKSx0aGlzLm1hbmFnZXIuZW1pdCh0aGlzLm9wdGlvbnMuZXZlbnQsdGhpcy5faW5wdXQpKSl9fSksaihiYSxaLHtkZWZhdWx0czp7ZXZlbnQ6XCJyb3RhdGVcIix0aHJlc2hvbGQ6MCxwb2ludGVyczoyfSxnZXRUb3VjaEFjdGlvbjpmdW5jdGlvbigpe3JldHVybltiYl19LGF0dHJUZXN0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLl9zdXBlci5hdHRyVGVzdC5jYWxsKHRoaXMsYSkmJihNYXRoLmFicyhhLnJvdGF0aW9uKT50aGlzLm9wdGlvbnMudGhyZXNob2xkfHx0aGlzLnN0YXRlJmZiKX19KSxqKGNhLFose2RlZmF1bHRzOntldmVudDpcInN3aXBlXCIsdGhyZXNob2xkOjEwLHZlbG9jaXR5Oi42NSxkaXJlY3Rpb246SGF8SWEscG9pbnRlcnM6MX0sZ2V0VG91Y2hBY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gJC5wcm90b3R5cGUuZ2V0VG91Y2hBY3Rpb24uY2FsbCh0aGlzKX0sYXR0clRlc3Q6ZnVuY3Rpb24oYSl7dmFyIGIsYz10aGlzLm9wdGlvbnMuZGlyZWN0aW9uO3JldHVybiBjJihIYXxJYSk/Yj1hLnZlbG9jaXR5OmMmSGE/Yj1hLnZlbG9jaXR5WDpjJklhJiYoYj1hLnZlbG9jaXR5WSksdGhpcy5fc3VwZXIuYXR0clRlc3QuY2FsbCh0aGlzLGEpJiZjJmEuZGlyZWN0aW9uJiZhLmRpc3RhbmNlPnRoaXMub3B0aW9ucy50aHJlc2hvbGQmJm1hKGIpPnRoaXMub3B0aW9ucy52ZWxvY2l0eSYmYS5ldmVudFR5cGUmQWF9LGVtaXQ6ZnVuY3Rpb24oYSl7dmFyIGI9WChhLmRpcmVjdGlvbik7YiYmdGhpcy5tYW5hZ2VyLmVtaXQodGhpcy5vcHRpb25zLmV2ZW50K2IsYSksdGhpcy5tYW5hZ2VyLmVtaXQodGhpcy5vcHRpb25zLmV2ZW50LGEpfX0pLGooZGEsVix7ZGVmYXVsdHM6e2V2ZW50OlwidGFwXCIscG9pbnRlcnM6MSx0YXBzOjEsaW50ZXJ2YWw6MzAwLHRpbWU6MjUwLHRocmVzaG9sZDoyLHBvc1RocmVzaG9sZDoxMH0sZ2V0VG91Y2hBY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm5bYWJdfSxwcm9jZXNzOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMub3B0aW9ucyxjPWEucG9pbnRlcnMubGVuZ3RoPT09Yi5wb2ludGVycyxkPWEuZGlzdGFuY2U8Yi50aHJlc2hvbGQsZj1hLmRlbHRhVGltZTxiLnRpbWU7aWYodGhpcy5yZXNldCgpLGEuZXZlbnRUeXBlJnlhJiYwPT09dGhpcy5jb3VudClyZXR1cm4gdGhpcy5mYWlsVGltZW91dCgpO2lmKGQmJmYmJmMpe2lmKGEuZXZlbnRUeXBlIT1BYSlyZXR1cm4gdGhpcy5mYWlsVGltZW91dCgpO3ZhciBnPXRoaXMucFRpbWU/YS50aW1lU3RhbXAtdGhpcy5wVGltZTxiLmludGVydmFsOiEwLGg9IXRoaXMucENlbnRlcnx8SSh0aGlzLnBDZW50ZXIsYS5jZW50ZXIpPGIucG9zVGhyZXNob2xkO3RoaXMucFRpbWU9YS50aW1lU3RhbXAsdGhpcy5wQ2VudGVyPWEuY2VudGVyLGgmJmc/dGhpcy5jb3VudCs9MTp0aGlzLmNvdW50PTEsdGhpcy5faW5wdXQ9YTt2YXIgaT10aGlzLmNvdW50JWIudGFwcztpZigwPT09aSlyZXR1cm4gdGhpcy5oYXNSZXF1aXJlRmFpbHVyZXMoKT8odGhpcy5fdGltZXI9ZShmdW5jdGlvbigpe3RoaXMuc3RhdGU9aWIsdGhpcy50cnlFbWl0KCl9LGIuaW50ZXJ2YWwsdGhpcyksZmIpOmlifXJldHVybiBrYn0sZmFpbFRpbWVvdXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGltZXI9ZShmdW5jdGlvbigpe3RoaXMuc3RhdGU9a2J9LHRoaXMub3B0aW9ucy5pbnRlcnZhbCx0aGlzKSxrYn0scmVzZXQ6ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQodGhpcy5fdGltZXIpfSxlbWl0OmZ1bmN0aW9uKCl7dGhpcy5zdGF0ZT09aWImJih0aGlzLl9pbnB1dC50YXBDb3VudD10aGlzLmNvdW50LHRoaXMubWFuYWdlci5lbWl0KHRoaXMub3B0aW9ucy5ldmVudCx0aGlzLl9pbnB1dCkpfX0pLGVhLlZFUlNJT049XCIyLjAuNFwiLGVhLmRlZmF1bHRzPXtkb21FdmVudHM6ITEsdG91Y2hBY3Rpb246JGEsZW5hYmxlOiEwLGlucHV0VGFyZ2V0Om51bGwsaW5wdXRDbGFzczpudWxsLHByZXNldDpbW2JhLHtlbmFibGU6ITF9XSxbXyx7ZW5hYmxlOiExfSxbXCJyb3RhdGVcIl1dLFtjYSx7ZGlyZWN0aW9uOkhhfV0sWyQse2RpcmVjdGlvbjpIYX0sW1wic3dpcGVcIl1dLFtkYV0sW2RhLHtldmVudDpcImRvdWJsZXRhcFwiLHRhcHM6Mn0sW1widGFwXCJdXSxbYWFdXSxjc3NQcm9wczp7dXNlclNlbGVjdDpcImRlZmF1bHRcIix0b3VjaFNlbGVjdDpcIm5vbmVcIix0b3VjaENhbGxvdXQ6XCJub25lXCIsY29udGVudFpvb21pbmc6XCJub25lXCIsdXNlckRyYWc6XCJub25lXCIsdGFwSGlnaGxpZ2h0Q29sb3I6XCJyZ2JhKDAsMCwwLDApXCJ9fTt2YXIgbGI9MSxtYj0yO2ZhLnByb3RvdHlwZT17c2V0OmZ1bmN0aW9uKGEpe3JldHVybiBoKHRoaXMub3B0aW9ucyxhKSxhLnRvdWNoQWN0aW9uJiZ0aGlzLnRvdWNoQWN0aW9uLnVwZGF0ZSgpLGEuaW5wdXRUYXJnZXQmJih0aGlzLmlucHV0LmRlc3Ryb3koKSx0aGlzLmlucHV0LnRhcmdldD1hLmlucHV0VGFyZ2V0LHRoaXMuaW5wdXQuaW5pdCgpKSx0aGlzfSxzdG9wOmZ1bmN0aW9uKGEpe3RoaXMuc2Vzc2lvbi5zdG9wcGVkPWE/bWI6bGJ9LHJlY29nbml6ZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnNlc3Npb247aWYoIWIuc3RvcHBlZCl7dGhpcy50b3VjaEFjdGlvbi5wcmV2ZW50RGVmYXVsdHMoYSk7dmFyIGMsZD10aGlzLnJlY29nbml6ZXJzLGU9Yi5jdXJSZWNvZ25pemVyOyghZXx8ZSYmZS5zdGF0ZSZpYikmJihlPWIuY3VyUmVjb2duaXplcj1udWxsKTtmb3IodmFyIGY9MDtmPGQubGVuZ3RoOyljPWRbZl0sYi5zdG9wcGVkPT09bWJ8fGUmJmMhPWUmJiFjLmNhblJlY29nbml6ZVdpdGgoZSk/Yy5yZXNldCgpOmMucmVjb2duaXplKGEpLCFlJiZjLnN0YXRlJihmYnxnYnxoYikmJihlPWIuY3VyUmVjb2duaXplcj1jKSxmKyt9fSxnZXQ6ZnVuY3Rpb24oYSl7aWYoYSBpbnN0YW5jZW9mIFYpcmV0dXJuIGE7Zm9yKHZhciBiPXRoaXMucmVjb2duaXplcnMsYz0wO2M8Yi5sZW5ndGg7YysrKWlmKGJbY10ub3B0aW9ucy5ldmVudD09YSlyZXR1cm4gYltjXTtyZXR1cm4gbnVsbH0sYWRkOmZ1bmN0aW9uKGEpe2lmKGYoYSxcImFkZFwiLHRoaXMpKXJldHVybiB0aGlzO3ZhciBiPXRoaXMuZ2V0KGEub3B0aW9ucy5ldmVudCk7cmV0dXJuIGImJnRoaXMucmVtb3ZlKGIpLHRoaXMucmVjb2duaXplcnMucHVzaChhKSxhLm1hbmFnZXI9dGhpcyx0aGlzLnRvdWNoQWN0aW9uLnVwZGF0ZSgpLGF9LHJlbW92ZTpmdW5jdGlvbihhKXtpZihmKGEsXCJyZW1vdmVcIix0aGlzKSlyZXR1cm4gdGhpczt2YXIgYj10aGlzLnJlY29nbml6ZXJzO3JldHVybiBhPXRoaXMuZ2V0KGEpLGIuc3BsaWNlKHMoYixhKSwxKSx0aGlzLnRvdWNoQWN0aW9uLnVwZGF0ZSgpLHRoaXN9LG9uOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5oYW5kbGVycztyZXR1cm4gZyhyKGEpLGZ1bmN0aW9uKGEpe2NbYV09Y1thXXx8W10sY1thXS5wdXNoKGIpfSksdGhpc30sb2ZmOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5oYW5kbGVycztyZXR1cm4gZyhyKGEpLGZ1bmN0aW9uKGEpe2I/Y1thXS5zcGxpY2UocyhjW2FdLGIpLDEpOmRlbGV0ZSBjW2FdfSksdGhpc30sZW1pdDpmdW5jdGlvbihhLGIpe3RoaXMub3B0aW9ucy5kb21FdmVudHMmJmhhKGEsYik7dmFyIGM9dGhpcy5oYW5kbGVyc1thXSYmdGhpcy5oYW5kbGVyc1thXS5zbGljZSgpO2lmKGMmJmMubGVuZ3RoKXtiLnR5cGU9YSxiLnByZXZlbnREZWZhdWx0PWZ1bmN0aW9uKCl7Yi5zcmNFdmVudC5wcmV2ZW50RGVmYXVsdCgpfTtmb3IodmFyIGQ9MDtkPGMubGVuZ3RoOyljW2RdKGIpLGQrK319LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQmJmdhKHRoaXMsITEpLHRoaXMuaGFuZGxlcnM9e30sdGhpcy5zZXNzaW9uPXt9LHRoaXMuaW5wdXQuZGVzdHJveSgpLHRoaXMuZWxlbWVudD1udWxsfX0saChlYSx7SU5QVVRfU1RBUlQ6eWEsSU5QVVRfTU9WRTp6YSxJTlBVVF9FTkQ6QWEsSU5QVVRfQ0FOQ0VMOkJhLFNUQVRFX1BPU1NJQkxFOmViLFNUQVRFX0JFR0FOOmZiLFNUQVRFX0NIQU5HRUQ6Z2IsU1RBVEVfRU5ERUQ6aGIsU1RBVEVfUkVDT0dOSVpFRDppYixTVEFURV9DQU5DRUxMRUQ6amIsU1RBVEVfRkFJTEVEOmtiLERJUkVDVElPTl9OT05FOkNhLERJUkVDVElPTl9MRUZUOkRhLERJUkVDVElPTl9SSUdIVDpFYSxESVJFQ1RJT05fVVA6RmEsRElSRUNUSU9OX0RPV046R2EsRElSRUNUSU9OX0hPUklaT05UQUw6SGEsRElSRUNUSU9OX1ZFUlRJQ0FMOklhLERJUkVDVElPTl9BTEw6SmEsTWFuYWdlcjpmYSxJbnB1dDp5LFRvdWNoQWN0aW9uOlQsVG91Y2hJbnB1dDpRLE1vdXNlSW5wdXQ6TSxQb2ludGVyRXZlbnRJbnB1dDpOLFRvdWNoTW91c2VJbnB1dDpTLFNpbmdsZVRvdWNoSW5wdXQ6TyxSZWNvZ25pemVyOlYsQXR0clJlY29nbml6ZXI6WixUYXA6ZGEsUGFuOiQsU3dpcGU6Y2EsUGluY2g6XyxSb3RhdGU6YmEsUHJlc3M6YWEsb246bixvZmY6byxlYWNoOmcsbWVyZ2U6aSxleHRlbmQ6aCxpbmhlcml0OmosYmluZEZuOmsscHJlZml4ZWQ6dn0pLHR5cGVvZiBkZWZpbmU9PWthJiZkZWZpbmUuYW1kP2RlZmluZShmdW5jdGlvbigpe3JldHVybiBlYX0pOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGUmJm1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPWVhOmFbY109ZWF9KHdpbmRvdyxkb2N1bWVudCxcIkhhbW1lclwiKSxmdW5jdGlvbihhKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtcImpxdWVyeVwiLFwiaGFtbWVyanNcIl0sYSk6XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHM/YShyZXF1aXJlKFwianF1ZXJ5XCIpLHJlcXVpcmUoXCJoYW1tZXJqc1wiKSk6YShqUXVlcnksSGFtbWVyKX0oZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKGMsZCl7dmFyIGU9YShjKTtlLmRhdGEoXCJoYW1tZXJcIil8fGUuZGF0YShcImhhbW1lclwiLG5ldyBiKGVbMF0sZCkpfWEuZm4uaGFtbWVyPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtjKHRoaXMsYSl9KX0sYi5NYW5hZ2VyLnByb3RvdHlwZS5lbWl0PWZ1bmN0aW9uKGIpe3JldHVybiBmdW5jdGlvbihjLGQpe2IuY2FsbCh0aGlzLGMsZCksYSh0aGlzLmVsZW1lbnQpLnRyaWdnZXIoe3R5cGU6YyxnZXN0dXJlOmR9KX19KGIuTWFuYWdlci5wcm90b3R5cGUuZW1pdCl9KSxmdW5jdGlvbihhKXthLlBhY2thZ2U/TWF0ZXJpYWxpemU9e306YS5NYXRlcmlhbGl6ZT17fX0od2luZG93KSxmdW5jdGlvbihhKXtmb3IodmFyIGI9MCxjPVtcIndlYmtpdFwiLFwibW96XCJdLGQ9YS5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUsZT1hLmNhbmNlbEFuaW1hdGlvbkZyYW1lLGY9Yy5sZW5ndGg7LS1mPj0wJiYhZDspZD1hW2NbZl0rXCJSZXF1ZXN0QW5pbWF0aW9uRnJhbWVcIl0sZT1hW2NbZl0rXCJDYW5jZWxSZXF1ZXN0QW5pbWF0aW9uRnJhbWVcIl07ZCYmZXx8KGQ9ZnVuY3Rpb24oYSl7dmFyIGM9K0RhdGUubm93KCksZD1NYXRoLm1heChiKzE2LGMpO3JldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YShiPWQpfSxkLWMpfSxlPWNsZWFyVGltZW91dCksYS5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU9ZCxhLmNhbmNlbEFuaW1hdGlvbkZyYW1lPWV9KHdpbmRvdyksTWF0ZXJpYWxpemUuZ3VpZD1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXtyZXR1cm4gTWF0aC5mbG9vcig2NTUzNiooMStNYXRoLnJhbmRvbSgpKSkudG9TdHJpbmcoMTYpLnN1YnN0cmluZygxKX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYSgpK2EoKStcIi1cIithKCkrXCItXCIrYSgpK1wiLVwiK2EoKStcIi1cIithKCkrYSgpK2EoKX19KCksTWF0ZXJpYWxpemUuZXNjYXBlSGFzaD1mdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKC8oOnxcXC58XFxbfFxcXXwsfD0pL2csXCJcXFxcJDFcIil9LE1hdGVyaWFsaXplLmVsZW1lbnRPclBhcmVudElzRml4ZWQ9ZnVuY3Rpb24oYSl7dmFyIGI9JChhKSxjPWIuYWRkKGIucGFyZW50cygpKSxkPSExO3JldHVybiBjLmVhY2goZnVuY3Rpb24oKXtyZXR1cm5cImZpeGVkXCI9PT0kKHRoaXMpLmNzcyhcInBvc2l0aW9uXCIpPyhkPSEwLCExKTp2b2lkIDB9KSxkfTt2YXIgVmVsO1ZlbD1qUXVlcnk/alF1ZXJ5LlZlbG9jaXR5OiQ/JC5WZWxvY2l0eTpWZWxvY2l0eSxmdW5jdGlvbihhKXthLmZuLmNvbGxhcHNpYmxlPWZ1bmN0aW9uKGIpe3ZhciBjPXthY2NvcmRpb246dm9pZCAwLG9uT3Blbjp2b2lkIDAsb25DbG9zZTp2b2lkIDB9O3JldHVybiBiPWEuZXh0ZW5kKGMsYiksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYyhiKXtqPWkuZmluZChcIj4gbGkgPiAuY29sbGFwc2libGUtaGVhZGVyXCIpLGIuaGFzQ2xhc3MoXCJhY3RpdmVcIik/Yi5wYXJlbnQoKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTpiLnBhcmVudCgpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpLGIucGFyZW50KCkuaGFzQ2xhc3MoXCJhY3RpdmVcIik/Yi5zaWJsaW5ncyhcIi5jb2xsYXBzaWJsZS1ib2R5XCIpLnN0b3AoITAsITEpLnNsaWRlRG93bih7ZHVyYXRpb246MzUwLGVhc2luZzpcImVhc2VPdXRRdWFydFwiLHF1ZXVlOiExLGNvbXBsZXRlOmZ1bmN0aW9uKCl7YSh0aGlzKS5jc3MoXCJoZWlnaHRcIixcIlwiKX19KTpiLnNpYmxpbmdzKFwiLmNvbGxhcHNpYmxlLWJvZHlcIikuc3RvcCghMCwhMSkuc2xpZGVVcCh7ZHVyYXRpb246MzUwLGVhc2luZzpcImVhc2VPdXRRdWFydFwiLHF1ZXVlOiExLGNvbXBsZXRlOmZ1bmN0aW9uKCl7YSh0aGlzKS5jc3MoXCJoZWlnaHRcIixcIlwiKX19KSxqLm5vdChiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKS5wYXJlbnQoKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKSxqLm5vdChiKS5wYXJlbnQoKS5jaGlsZHJlbihcIi5jb2xsYXBzaWJsZS1ib2R5XCIpLnN0b3AoITAsITEpLmVhY2goZnVuY3Rpb24oKXthKHRoaXMpLmlzKFwiOnZpc2libGVcIikmJmEodGhpcykuc2xpZGVVcCh7ZHVyYXRpb246MzUwLGVhc2luZzpcImVhc2VPdXRRdWFydFwiLHF1ZXVlOiExLGNvbXBsZXRlOmZ1bmN0aW9uKCl7YSh0aGlzKS5jc3MoXCJoZWlnaHRcIixcIlwiKSxmKGEodGhpcykuc2libGluZ3MoXCIuY29sbGFwc2libGUtaGVhZGVyXCIpKX19KX0pfWZ1bmN0aW9uIGQoYil7Yi5oYXNDbGFzcyhcImFjdGl2ZVwiKT9iLnBhcmVudCgpLmFkZENsYXNzKFwiYWN0aXZlXCIpOmIucGFyZW50KCkucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIiksYi5wYXJlbnQoKS5oYXNDbGFzcyhcImFjdGl2ZVwiKT9iLnNpYmxpbmdzKFwiLmNvbGxhcHNpYmxlLWJvZHlcIikuc3RvcCghMCwhMSkuc2xpZGVEb3duKHtkdXJhdGlvbjozNTAsZWFzaW5nOlwiZWFzZU91dFF1YXJ0XCIscXVldWU6ITEsY29tcGxldGU6ZnVuY3Rpb24oKXthKHRoaXMpLmNzcyhcImhlaWdodFwiLFwiXCIpfX0pOmIuc2libGluZ3MoXCIuY29sbGFwc2libGUtYm9keVwiKS5zdG9wKCEwLCExKS5zbGlkZVVwKHtkdXJhdGlvbjozNTAsZWFzaW5nOlwiZWFzZU91dFF1YXJ0XCIscXVldWU6ITEsY29tcGxldGU6ZnVuY3Rpb24oKXthKHRoaXMpLmNzcyhcImhlaWdodFwiLFwiXCIpfX0pfWZ1bmN0aW9uIGUoYSl7Yi5hY2NvcmRpb258fFwiYWNjb3JkaW9uXCI9PT1rfHx2b2lkIDA9PT1rP2MoYSk6ZChhKSxmKGEpfWZ1bmN0aW9uIGYoYSl7YS5oYXNDbGFzcyhcImFjdGl2ZVwiKT9cImZ1bmN0aW9uXCI9PXR5cGVvZiBiLm9uT3BlbiYmYi5vbk9wZW4uY2FsbCh0aGlzLGEucGFyZW50KCkpOlwiZnVuY3Rpb25cIj09dHlwZW9mIGIub25DbG9zZSYmYi5vbkNsb3NlLmNhbGwodGhpcyxhLnBhcmVudCgpKX1mdW5jdGlvbiBnKGEpe3ZhciBiPWgoYSk7cmV0dXJuIGIubGVuZ3RoPjB9ZnVuY3Rpb24gaChhKXtyZXR1cm4gYS5jbG9zZXN0KFwibGkgPiAuY29sbGFwc2libGUtaGVhZGVyXCIpfXZhciBpPWEodGhpcyksaj1hKHRoaXMpLmZpbmQoXCI+IGxpID4gLmNvbGxhcHNpYmxlLWhlYWRlclwiKSxrPWkuZGF0YShcImNvbGxhcHNpYmxlXCIpO2kub2ZmKFwiY2xpY2suY29sbGFwc2VcIixcIj4gbGkgPiAuY29sbGFwc2libGUtaGVhZGVyXCIpLGoub2ZmKFwiY2xpY2suY29sbGFwc2VcIiksaS5vbihcImNsaWNrLmNvbGxhcHNlXCIsXCI+IGxpID4gLmNvbGxhcHNpYmxlLWhlYWRlclwiLGZ1bmN0aW9uKGIpe3ZhciBjPWEoYi50YXJnZXQpO2coYykmJihjPWgoYykpLGMudG9nZ2xlQ2xhc3MoXCJhY3RpdmVcIiksZShjKX0pLGIuYWNjb3JkaW9ufHxcImFjY29yZGlvblwiPT09a3x8dm9pZCAwPT09az9lKGouZmlsdGVyKFwiLmFjdGl2ZVwiKS5maXJzdCgpKTpqLmZpbHRlcihcIi5hY3RpdmVcIikuZWFjaChmdW5jdGlvbigpe2UoYSh0aGlzKSl9KX0pfSxhKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe2EoXCIuY29sbGFwc2libGVcIikuY29sbGFwc2libGUoKX0pfShqUXVlcnkpLGZ1bmN0aW9uKGEpe2EuZm4uc2Nyb2xsVG89ZnVuY3Rpb24oYil7cmV0dXJuIGEodGhpcykuc2Nyb2xsVG9wKGEodGhpcykuc2Nyb2xsVG9wKCktYSh0aGlzKS5vZmZzZXQoKS50b3ArYShiKS5vZmZzZXQoKS50b3ApLHRoaXN9LGEuZm4uZHJvcGRvd249ZnVuY3Rpb24oYil7dmFyIGM9e2luRHVyYXRpb246MzAwLG91dER1cmF0aW9uOjIyNSxjb25zdHJhaW5fd2lkdGg6ITAsaG92ZXI6ITEsZ3V0dGVyOjAsYmVsb3dPcmlnaW46ITEsYWxpZ25tZW50OlwibGVmdFwiLHN0b3BQcm9wYWdhdGlvbjohMX07cmV0dXJuXCJvcGVuXCI9PT1iPyh0aGlzLmVhY2goZnVuY3Rpb24oKXthKHRoaXMpLnRyaWdnZXIoXCJvcGVuXCIpfSksITEpOlwiY2xvc2VcIj09PWI/KHRoaXMuZWFjaChmdW5jdGlvbigpe2EodGhpcykudHJpZ2dlcihcImNsb3NlXCIpfSksITEpOnZvaWQgdGhpcy5lYWNoKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZCgpe3ZvaWQgMCE9PWcuZGF0YShcImluZHVyYXRpb25cIikmJihoLmluRHVyYXRpb249Zy5kYXRhKFwiaW5kdXJhdGlvblwiKSksdm9pZCAwIT09Zy5kYXRhKFwib3V0ZHVyYXRpb25cIikmJihoLm91dER1cmF0aW9uPWcuZGF0YShcIm91dGR1cmF0aW9uXCIpKSx2b2lkIDAhPT1nLmRhdGEoXCJjb25zdHJhaW53aWR0aFwiKSYmKGguY29uc3RyYWluX3dpZHRoPWcuZGF0YShcImNvbnN0cmFpbndpZHRoXCIpKSx2b2lkIDAhPT1nLmRhdGEoXCJob3ZlclwiKSYmKGguaG92ZXI9Zy5kYXRhKFwiaG92ZXJcIikpLHZvaWQgMCE9PWcuZGF0YShcImd1dHRlclwiKSYmKGguZ3V0dGVyPWcuZGF0YShcImd1dHRlclwiKSksdm9pZCAwIT09Zy5kYXRhKFwiYmVsb3dvcmlnaW5cIikmJihoLmJlbG93T3JpZ2luPWcuZGF0YShcImJlbG93b3JpZ2luXCIpKSx2b2lkIDAhPT1nLmRhdGEoXCJhbGlnbm1lbnRcIikmJihoLmFsaWdubWVudD1nLmRhdGEoXCJhbGlnbm1lbnRcIikpLHZvaWQgMCE9PWcuZGF0YShcInN0b3Bwcm9wYWdhdGlvblwiKSYmKGguc3RvcFByb3BhZ2F0aW9uPWcuZGF0YShcInN0b3Bwcm9wYWdhdGlvblwiKSl9ZnVuY3Rpb24gZShiKXtcImZvY3VzXCI9PT1iJiYoaT0hMCksZCgpLGouYWRkQ2xhc3MoXCJhY3RpdmVcIiksZy5hZGRDbGFzcyhcImFjdGl2ZVwiKSxoLmNvbnN0cmFpbl93aWR0aD09PSEwP2ouY3NzKFwid2lkdGhcIixnLm91dGVyV2lkdGgoKSk6ai5jc3MoXCJ3aGl0ZS1zcGFjZVwiLFwibm93cmFwXCIpO3ZhciBjPXdpbmRvdy5pbm5lckhlaWdodCxlPWcuaW5uZXJIZWlnaHQoKSxmPWcub2Zmc2V0KCkubGVmdCxrPWcub2Zmc2V0KCkudG9wLWEod2luZG93KS5zY3JvbGxUb3AoKSxsPWguYWxpZ25tZW50LG09MCxuPTAsbz0wO2guYmVsb3dPcmlnaW49PT0hMCYmKG89ZSk7dmFyIHA9MCxxPTAscj1nLnBhcmVudCgpO2lmKHIuaXMoXCJib2R5XCIpfHwoclswXS5zY3JvbGxIZWlnaHQ+clswXS5jbGllbnRIZWlnaHQmJihwPXJbMF0uc2Nyb2xsVG9wKSxyWzBdLnNjcm9sbFdpZHRoPnJbMF0uY2xpZW50V2lkdGgmJihxPXJbMF0uc2Nyb2xsTGVmdCkpLGYrai5pbm5lcldpZHRoKCk+YSh3aW5kb3cpLndpZHRoKCk/bD1cInJpZ2h0XCI6Zi1qLmlubmVyV2lkdGgoKStnLmlubmVyV2lkdGgoKTwwJiYobD1cImxlZnRcIiksaytqLmlubmVySGVpZ2h0KCk+YylpZihrK2Utai5pbm5lckhlaWdodCgpPDApe3ZhciBzPWMtay1vO2ouY3NzKFwibWF4LWhlaWdodFwiLHMpfWVsc2Ugb3x8KG8rPWUpLG8tPWouaW5uZXJIZWlnaHQoKTtpZihcImxlZnRcIj09PWwpbT1oLmd1dHRlcixuPWcucG9zaXRpb24oKS5sZWZ0K207ZWxzZSBpZihcInJpZ2h0XCI9PT1sKXt2YXIgdD1nLnBvc2l0aW9uKCkubGVmdCtnLm91dGVyV2lkdGgoKS1qLm91dGVyV2lkdGgoKTttPS1oLmd1dHRlcixuPXQrbX1qLmNzcyh7cG9zaXRpb246XCJhYnNvbHV0ZVwiLHRvcDpnLnBvc2l0aW9uKCkudG9wK28rcCxsZWZ0Om4rcX0pLGouc3RvcCghMCwhMCkuY3NzKFwib3BhY2l0eVwiLDApLnNsaWRlRG93bih7cXVldWU6ITEsZHVyYXRpb246aC5pbkR1cmF0aW9uLGVhc2luZzpcImVhc2VPdXRDdWJpY1wiLGNvbXBsZXRlOmZ1bmN0aW9uKCl7YSh0aGlzKS5jc3MoXCJoZWlnaHRcIixcIlwiKX19KS5hbmltYXRlKHtvcGFjaXR5OjF9LHtxdWV1ZTohMSxkdXJhdGlvbjpoLmluRHVyYXRpb24sZWFzaW5nOlwiZWFzZU91dFNpbmVcIn0pfWZ1bmN0aW9uIGYoKXtpPSExLGouZmFkZU91dChoLm91dER1cmF0aW9uKSxqLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpLGcucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIiksc2V0VGltZW91dChmdW5jdGlvbigpe2ouY3NzKFwibWF4LWhlaWdodFwiLFwiXCIpfSxoLm91dER1cmF0aW9uKX12YXIgZz1hKHRoaXMpLGg9YS5leHRlbmQoe30sYyxiKSxpPSExLGo9YShcIiNcIitnLmF0dHIoXCJkYXRhLWFjdGl2YXRlc1wiKSk7aWYoZCgpLGcuYWZ0ZXIoaiksaC5ob3Zlcil7dmFyIGs9ITE7Zy51bmJpbmQoXCJjbGljay5cIitnLmF0dHIoXCJpZFwiKSksZy5vbihcIm1vdXNlZW50ZXJcIixmdW5jdGlvbihhKXtrPT09ITEmJihlKCksaz0hMCl9KSxnLm9uKFwibW91c2VsZWF2ZVwiLGZ1bmN0aW9uKGIpe3ZhciBjPWIudG9FbGVtZW50fHxiLnJlbGF0ZWRUYXJnZXQ7YShjKS5jbG9zZXN0KFwiLmRyb3Bkb3duLWNvbnRlbnRcIikuaXMoail8fChqLnN0b3AoITAsITApLGYoKSxrPSExKX0pLGoub24oXCJtb3VzZWxlYXZlXCIsZnVuY3Rpb24oYil7dmFyIGM9Yi50b0VsZW1lbnR8fGIucmVsYXRlZFRhcmdldDthKGMpLmNsb3Nlc3QoXCIuZHJvcGRvd24tYnV0dG9uXCIpLmlzKGcpfHwoai5zdG9wKCEwLCEwKSxmKCksaz0hMSl9KX1lbHNlIGcudW5iaW5kKFwiY2xpY2suXCIrZy5hdHRyKFwiaWRcIikpLGcuYmluZChcImNsaWNrLlwiK2cuYXR0cihcImlkXCIpLGZ1bmN0aW9uKGIpe2l8fChnWzBdIT1iLmN1cnJlbnRUYXJnZXR8fGcuaGFzQ2xhc3MoXCJhY3RpdmVcIil8fDAhPT1hKGIudGFyZ2V0KS5jbG9zZXN0KFwiLmRyb3Bkb3duLWNvbnRlbnRcIikubGVuZ3RoP2cuaGFzQ2xhc3MoXCJhY3RpdmVcIikmJihmKCksYShkb2N1bWVudCkudW5iaW5kKFwiY2xpY2suXCIrai5hdHRyKFwiaWRcIikrXCIgdG91Y2hzdGFydC5cIitqLmF0dHIoXCJpZFwiKSkpOihiLnByZXZlbnREZWZhdWx0KCksaC5zdG9wUHJvcGFnYXRpb24mJmIuc3RvcFByb3BhZ2F0aW9uKCksZShcImNsaWNrXCIpKSxqLmhhc0NsYXNzKFwiYWN0aXZlXCIpJiZhKGRvY3VtZW50KS5iaW5kKFwiY2xpY2suXCIrai5hdHRyKFwiaWRcIikrXCIgdG91Y2hzdGFydC5cIitqLmF0dHIoXCJpZFwiKSxmdW5jdGlvbihiKXtqLmlzKGIudGFyZ2V0KXx8Zy5pcyhiLnRhcmdldCl8fGcuZmluZChiLnRhcmdldCkubGVuZ3RofHwoZigpLGEoZG9jdW1lbnQpLnVuYmluZChcImNsaWNrLlwiK2ouYXR0cihcImlkXCIpK1wiIHRvdWNoc3RhcnQuXCIrai5hdHRyKFwiaWRcIikpKX0pKX0pO2cub24oXCJvcGVuXCIsZnVuY3Rpb24oYSxiKXtlKGIpfSksZy5vbihcImNsb3NlXCIsZil9KX0sYShkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXthKFwiLmRyb3Bkb3duLWJ1dHRvblwiKS5kcm9wZG93bigpfSl9KGpRdWVyeSksZnVuY3Rpb24oYSl7dmFyIGI9MCxjPTAsZD1mdW5jdGlvbigpe3JldHVybiBjKyssXCJtYXRlcmlhbGl6ZS1tb2RhbC1vdmVybGF5LVwiK2N9LGU9e2luaXQ6ZnVuY3Rpb24oYyl7dmFyIGU9e29wYWNpdHk6LjUsaW5fZHVyYXRpb246MzUwLG91dF9kdXJhdGlvbjoyNTAscmVhZHk6dm9pZCAwLGNvbXBsZXRlOnZvaWQgMCxkaXNtaXNzaWJsZTohMCxzdGFydGluZ190b3A6XCI0JVwiLGVuZGluZ190b3A6XCIxMCVcIn07cmV0dXJuIGM9YS5leHRlbmQoZSxjKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZT1hKHRoaXMpLGY9YSh0aGlzKS5hdHRyKFwiaWRcIil8fFwiI1wiK2EodGhpcykuZGF0YShcInRhcmdldFwiKSxnPWZ1bmN0aW9uKCl7dmFyIGQ9ZS5kYXRhKFwib3ZlcmxheS1pZFwiKSxmPWEoXCIjXCIrZCk7ZS5yZW1vdmVDbGFzcyhcIm9wZW5cIiksYShcImJvZHlcIikuY3NzKHtvdmVyZmxvdzpcIlwiLHdpZHRoOlwiXCJ9KSxlLmZpbmQoXCIubW9kYWwtY2xvc2VcIikub2ZmKFwiY2xpY2suY2xvc2VcIiksYShkb2N1bWVudCkub2ZmKFwia2V5dXAubW9kYWxcIitkKSxmLnZlbG9jaXR5KHtvcGFjaXR5OjB9LHtkdXJhdGlvbjpjLm91dF9kdXJhdGlvbixxdWV1ZTohMSxlYXNlOlwiZWFzZU91dFF1YXJ0XCJ9KTt2YXIgZz17XG5kdXJhdGlvbjpjLm91dF9kdXJhdGlvbixxdWV1ZTohMSxlYXNlOlwiZWFzZU91dEN1YmljXCIsY29tcGxldGU6ZnVuY3Rpb24oKXthKHRoaXMpLmNzcyh7ZGlzcGxheTpcIm5vbmVcIn0pLFwiZnVuY3Rpb25cIj09dHlwZW9mIGMuY29tcGxldGUmJmMuY29tcGxldGUuY2FsbCh0aGlzLGUpLGYucmVtb3ZlKCksYi0tfX07ZS5oYXNDbGFzcyhcImJvdHRvbS1zaGVldFwiKT9lLnZlbG9jaXR5KHtib3R0b206XCItMTAwJVwiLG9wYWNpdHk6MH0sZyk6ZS52ZWxvY2l0eSh7dG9wOmMuc3RhcnRpbmdfdG9wLG9wYWNpdHk6MCxzY2FsZVg6Ljd9LGcpfSxoPWZ1bmN0aW9uKGYpe3ZhciBoPWEoXCJib2R5XCIpLGk9aC5pbm5lcldpZHRoKCk7aWYoaC5jc3MoXCJvdmVyZmxvd1wiLFwiaGlkZGVuXCIpLGgud2lkdGgoaSksIWUuaGFzQ2xhc3MoXCJvcGVuXCIpKXt2YXIgaj1kKCksaz1hKCc8ZGl2IGNsYXNzPVwibW9kYWwtb3ZlcmxheVwiPjwvZGl2PicpO2xTdGFjaz0rK2Isay5hdHRyKFwiaWRcIixqKS5jc3MoXCJ6LWluZGV4XCIsMWUzKzIqbFN0YWNrKSxlLmRhdGEoXCJvdmVybGF5LWlkXCIsaikuY3NzKFwiei1pbmRleFwiLDFlMysyKmxTdGFjaysxKSxlLmFkZENsYXNzKFwib3BlblwiKSxhKFwiYm9keVwiKS5hcHBlbmQoayksYy5kaXNtaXNzaWJsZSYmKGsuY2xpY2soZnVuY3Rpb24oKXtnKCl9KSxhKGRvY3VtZW50KS5vbihcImtleXVwLm1vZGFsXCIraixmdW5jdGlvbihhKXsyNz09PWEua2V5Q29kZSYmZygpfSkpLGUuZmluZChcIi5tb2RhbC1jbG9zZVwiKS5vbihcImNsaWNrLmNsb3NlXCIsZnVuY3Rpb24oYSl7ZygpfSksay5jc3Moe2Rpc3BsYXk6XCJibG9ja1wiLG9wYWNpdHk6MH0pLGUuY3NzKHtkaXNwbGF5OlwiYmxvY2tcIixvcGFjaXR5OjB9KSxrLnZlbG9jaXR5KHtvcGFjaXR5OmMub3BhY2l0eX0se2R1cmF0aW9uOmMuaW5fZHVyYXRpb24scXVldWU6ITEsZWFzZTpcImVhc2VPdXRDdWJpY1wifSksZS5kYXRhKFwiYXNzb2NpYXRlZC1vdmVybGF5XCIsa1swXSk7dmFyIGw9e2R1cmF0aW9uOmMuaW5fZHVyYXRpb24scXVldWU6ITEsZWFzZTpcImVhc2VPdXRDdWJpY1wiLGNvbXBsZXRlOmZ1bmN0aW9uKCl7XCJmdW5jdGlvblwiPT10eXBlb2YgYy5yZWFkeSYmYy5yZWFkeS5jYWxsKHRoaXMsZSxmKX19O2UuaGFzQ2xhc3MoXCJib3R0b20tc2hlZXRcIik/ZS52ZWxvY2l0eSh7Ym90dG9tOlwiMFwiLG9wYWNpdHk6MX0sbCk6KGEuVmVsb2NpdHkuaG9vayhlLFwic2NhbGVYXCIsLjcpLGUuY3NzKHt0b3A6Yy5zdGFydGluZ190b3B9KSxlLnZlbG9jaXR5KHt0b3A6Yy5lbmRpbmdfdG9wLG9wYWNpdHk6MSxzY2FsZVg6XCIxXCJ9LGwpKX19O2EoZG9jdW1lbnQpLm9mZihcImNsaWNrLm1vZGFsVHJpZ2dlclwiLCdhW2hyZWY9XCIjJytmKydcIl0sIFtkYXRhLXRhcmdldD1cIicrZisnXCJdJyksYSh0aGlzKS5vZmYoXCJvcGVuTW9kYWxcIiksYSh0aGlzKS5vZmYoXCJjbG9zZU1vZGFsXCIpLGEoZG9jdW1lbnQpLm9uKFwiY2xpY2subW9kYWxUcmlnZ2VyXCIsJ2FbaHJlZj1cIiMnK2YrJ1wiXSwgW2RhdGEtdGFyZ2V0PVwiJytmKydcIl0nLGZ1bmN0aW9uKGIpe2Muc3RhcnRpbmdfdG9wPShhKHRoaXMpLm9mZnNldCgpLnRvcC1hKHdpbmRvdykuc2Nyb2xsVG9wKCkpLzEuMTUsaChhKHRoaXMpKSxiLnByZXZlbnREZWZhdWx0KCl9KSxhKHRoaXMpLm9uKFwib3Blbk1vZGFsXCIsZnVuY3Rpb24oKXthKHRoaXMpLmF0dHIoXCJocmVmXCIpfHxcIiNcIithKHRoaXMpLmRhdGEoXCJ0YXJnZXRcIik7aCgpfSksYSh0aGlzKS5vbihcImNsb3NlTW9kYWxcIixmdW5jdGlvbigpe2coKX0pfSl9LG9wZW46ZnVuY3Rpb24oKXthKHRoaXMpLnRyaWdnZXIoXCJvcGVuTW9kYWxcIil9LGNsb3NlOmZ1bmN0aW9uKCl7YSh0aGlzKS50cmlnZ2VyKFwiY2xvc2VNb2RhbFwiKX19O2EuZm4ubW9kYWw9ZnVuY3Rpb24oYil7cmV0dXJuIGVbYl0/ZVtiXS5hcHBseSh0aGlzLEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKSk6XCJvYmplY3RcIiE9dHlwZW9mIGImJmI/dm9pZCBhLmVycm9yKFwiTWV0aG9kIFwiK2IrXCIgZG9lcyBub3QgZXhpc3Qgb24galF1ZXJ5Lm1vZGFsXCIpOmUuaW5pdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fShqUXVlcnkpLGZ1bmN0aW9uKGEpe2EuZm4ubWF0ZXJpYWxib3g9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYigpe2Y9ITE7dmFyIGI9aS5wYXJlbnQoXCIubWF0ZXJpYWwtcGxhY2Vob2xkZXJcIiksZD0od2luZG93LmlubmVyV2lkdGgsd2luZG93LmlubmVySGVpZ2h0LGkuZGF0YShcIndpZHRoXCIpKSxnPWkuZGF0YShcImhlaWdodFwiKTtpLnZlbG9jaXR5KFwic3RvcFwiLCEwKSxhKFwiI21hdGVyaWFsYm94LW92ZXJsYXlcIikudmVsb2NpdHkoXCJzdG9wXCIsITApLGEoXCIubWF0ZXJpYWxib3gtY2FwdGlvblwiKS52ZWxvY2l0eShcInN0b3BcIiwhMCksYShcIiNtYXRlcmlhbGJveC1vdmVybGF5XCIpLnZlbG9jaXR5KHtvcGFjaXR5OjB9LHtkdXJhdGlvbjpoLHF1ZXVlOiExLGVhc2luZzpcImVhc2VPdXRRdWFkXCIsY29tcGxldGU6ZnVuY3Rpb24oKXtlPSExLGEodGhpcykucmVtb3ZlKCl9fSksaS52ZWxvY2l0eSh7d2lkdGg6ZCxoZWlnaHQ6ZyxsZWZ0OjAsdG9wOjB9LHtkdXJhdGlvbjpoLHF1ZXVlOiExLGVhc2luZzpcImVhc2VPdXRRdWFkXCJ9KSxhKFwiLm1hdGVyaWFsYm94LWNhcHRpb25cIikudmVsb2NpdHkoe29wYWNpdHk6MH0se2R1cmF0aW9uOmgscXVldWU6ITEsZWFzaW5nOlwiZWFzZU91dFF1YWRcIixjb21wbGV0ZTpmdW5jdGlvbigpe2IuY3NzKHtoZWlnaHQ6XCJcIix3aWR0aDpcIlwiLHBvc2l0aW9uOlwiXCIsdG9wOlwiXCIsbGVmdDpcIlwifSksaS5jc3Moe2hlaWdodDpcIlwiLHRvcDpcIlwiLGxlZnQ6XCJcIix3aWR0aDpcIlwiLFwibWF4LXdpZHRoXCI6XCJcIixwb3NpdGlvbjpcIlwiLFwiei1pbmRleFwiOlwiXCJ9KSxpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpLGY9ITAsYSh0aGlzKS5yZW1vdmUoKSxjJiZjLmNzcyhcIm92ZXJmbG93XCIsXCJcIil9fSl9aWYoIWEodGhpcykuaGFzQ2xhc3MoXCJpbml0aWFsaXplZFwiKSl7YSh0aGlzKS5hZGRDbGFzcyhcImluaXRpYWxpemVkXCIpO3ZhciBjLGQsZT0hMSxmPSEwLGc9Mjc1LGg9MjAwLGk9YSh0aGlzKSxqPWEoXCI8ZGl2PjwvZGl2PlwiKS5hZGRDbGFzcyhcIm1hdGVyaWFsLXBsYWNlaG9sZGVyXCIpO2kud3JhcChqKSxpLm9uKFwiY2xpY2tcIixmdW5jdGlvbigpe3ZhciBoPWkucGFyZW50KFwiLm1hdGVyaWFsLXBsYWNlaG9sZGVyXCIpLGo9d2luZG93LmlubmVyV2lkdGgsaz13aW5kb3cuaW5uZXJIZWlnaHQsbD1pLndpZHRoKCksbT1pLmhlaWdodCgpO2lmKGY9PT0hMSlyZXR1cm4gYigpLCExO2lmKGUmJmY9PT0hMClyZXR1cm4gYigpLCExO2Y9ITEsaS5hZGRDbGFzcyhcImFjdGl2ZVwiKSxlPSEwLGguY3NzKHt3aWR0aDpoWzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoLGhlaWdodDpoWzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodCxwb3NpdGlvbjpcInJlbGF0aXZlXCIsdG9wOjAsbGVmdDowfSksYz12b2lkIDAsZD1oWzBdLnBhcmVudE5vZGU7Zm9yKDtudWxsIT09ZCYmIWEoZCkuaXMoZG9jdW1lbnQpOyl7dmFyIG49YShkKTtcInZpc2libGVcIiE9PW4uY3NzKFwib3ZlcmZsb3dcIikmJihuLmNzcyhcIm92ZXJmbG93XCIsXCJ2aXNpYmxlXCIpLGM9dm9pZCAwPT09Yz9uOmMuYWRkKG4pKSxkPWQucGFyZW50Tm9kZX1pLmNzcyh7cG9zaXRpb246XCJhYnNvbHV0ZVwiLFwiei1pbmRleFwiOjFlM30pLmRhdGEoXCJ3aWR0aFwiLGwpLmRhdGEoXCJoZWlnaHRcIixtKTt2YXIgbz1hKCc8ZGl2IGlkPVwibWF0ZXJpYWxib3gtb3ZlcmxheVwiPjwvZGl2PicpLmNzcyh7b3BhY2l0eTowfSkuY2xpY2soZnVuY3Rpb24oKXtmPT09ITAmJmIoKX0pO2lmKGkuYmVmb3JlKG8pLG8udmVsb2NpdHkoe29wYWNpdHk6MX0se2R1cmF0aW9uOmcscXVldWU6ITEsZWFzaW5nOlwiZWFzZU91dFF1YWRcIn0pLFwiXCIhPT1pLmRhdGEoXCJjYXB0aW9uXCIpKXt2YXIgcD1hKCc8ZGl2IGNsYXNzPVwibWF0ZXJpYWxib3gtY2FwdGlvblwiPjwvZGl2PicpO3AudGV4dChpLmRhdGEoXCJjYXB0aW9uXCIpKSxhKFwiYm9keVwiKS5hcHBlbmQocCkscC5jc3Moe2Rpc3BsYXk6XCJpbmxpbmVcIn0pLHAudmVsb2NpdHkoe29wYWNpdHk6MX0se2R1cmF0aW9uOmcscXVldWU6ITEsZWFzaW5nOlwiZWFzZU91dFF1YWRcIn0pfXZhciBxPTAscj1sL2oscz1tL2ssdD0wLHU9MDtyPnM/KHE9bS9sLHQ9Ljkqaix1PS45KmoqcSk6KHE9bC9tLHQ9LjkqaypxLHU9LjkqayksaS5oYXNDbGFzcyhcInJlc3BvbnNpdmUtaW1nXCIpP2kudmVsb2NpdHkoe1wibWF4LXdpZHRoXCI6dCx3aWR0aDpsfSx7ZHVyYXRpb246MCxxdWV1ZTohMSxjb21wbGV0ZTpmdW5jdGlvbigpe2kuY3NzKHtsZWZ0OjAsdG9wOjB9KS52ZWxvY2l0eSh7aGVpZ2h0OnUsd2lkdGg6dCxsZWZ0OmEoZG9jdW1lbnQpLnNjcm9sbExlZnQoKStqLzItaS5wYXJlbnQoXCIubWF0ZXJpYWwtcGxhY2Vob2xkZXJcIikub2Zmc2V0KCkubGVmdC10LzIsdG9wOmEoZG9jdW1lbnQpLnNjcm9sbFRvcCgpK2svMi1pLnBhcmVudChcIi5tYXRlcmlhbC1wbGFjZWhvbGRlclwiKS5vZmZzZXQoKS50b3AtdS8yfSx7ZHVyYXRpb246ZyxxdWV1ZTohMSxlYXNpbmc6XCJlYXNlT3V0UXVhZFwiLGNvbXBsZXRlOmZ1bmN0aW9uKCl7Zj0hMH19KX19KTppLmNzcyhcImxlZnRcIiwwKS5jc3MoXCJ0b3BcIiwwKS52ZWxvY2l0eSh7aGVpZ2h0OnUsd2lkdGg6dCxsZWZ0OmEoZG9jdW1lbnQpLnNjcm9sbExlZnQoKStqLzItaS5wYXJlbnQoXCIubWF0ZXJpYWwtcGxhY2Vob2xkZXJcIikub2Zmc2V0KCkubGVmdC10LzIsdG9wOmEoZG9jdW1lbnQpLnNjcm9sbFRvcCgpK2svMi1pLnBhcmVudChcIi5tYXRlcmlhbC1wbGFjZWhvbGRlclwiKS5vZmZzZXQoKS50b3AtdS8yfSx7ZHVyYXRpb246ZyxxdWV1ZTohMSxlYXNpbmc6XCJlYXNlT3V0UXVhZFwiLGNvbXBsZXRlOmZ1bmN0aW9uKCl7Zj0hMH19KX0pLGEod2luZG93KS5zY3JvbGwoZnVuY3Rpb24oKXtlJiZiKCl9KSxhKGRvY3VtZW50KS5rZXl1cChmdW5jdGlvbihhKXsyNz09PWEua2V5Q29kZSYmZj09PSEwJiZlJiZiKCl9KX19KX0sYShkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXthKFwiLm1hdGVyaWFsYm94ZWRcIikubWF0ZXJpYWxib3goKX0pfShqUXVlcnkpLGZ1bmN0aW9uKGEpe2EuZm4ucGFyYWxsYXg9ZnVuY3Rpb24oKXt2YXIgYj1hKHdpbmRvdykud2lkdGgoKTtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGMpe2Z1bmN0aW9uIGQoYyl7dmFyIGQ7ZD02MDE+Yj9lLmhlaWdodCgpPjA/ZS5oZWlnaHQoKTplLmNoaWxkcmVuKFwiaW1nXCIpLmhlaWdodCgpOmUuaGVpZ2h0KCk+MD9lLmhlaWdodCgpOjUwMDt2YXIgZj1lLmNoaWxkcmVuKFwiaW1nXCIpLmZpcnN0KCksZz1mLmhlaWdodCgpLGg9Zy1kLGk9ZS5vZmZzZXQoKS50b3ArZCxqPWUub2Zmc2V0KCkudG9wLGs9YSh3aW5kb3cpLnNjcm9sbFRvcCgpLGw9d2luZG93LmlubmVySGVpZ2h0LG09aytsLG49KG0taikvKGQrbCksbz1NYXRoLnJvdW5kKGgqbik7YyYmZi5jc3MoXCJkaXNwbGF5XCIsXCJibG9ja1wiKSxpPmsmJmsrbD5qJiZmLmNzcyhcInRyYW5zZm9ybVwiLFwidHJhbnNsYXRlM0QoLTUwJSxcIitvK1wicHgsIDApXCIpfXZhciBlPWEodGhpcyk7ZS5hZGRDbGFzcyhcInBhcmFsbGF4XCIpLGUuY2hpbGRyZW4oXCJpbWdcIikub25lKFwibG9hZFwiLGZ1bmN0aW9uKCl7ZCghMCl9KS5lYWNoKGZ1bmN0aW9uKCl7dGhpcy5jb21wbGV0ZSYmYSh0aGlzKS50cmlnZ2VyKFwibG9hZFwiKX0pLGEod2luZG93KS5zY3JvbGwoZnVuY3Rpb24oKXtiPWEod2luZG93KS53aWR0aCgpLGQoITEpfSksYSh3aW5kb3cpLnJlc2l6ZShmdW5jdGlvbigpe2I9YSh3aW5kb3cpLndpZHRoKCksZCghMSl9KX0pfX0oalF1ZXJ5KSxmdW5jdGlvbihhKXt2YXIgYj17aW5pdDpmdW5jdGlvbihiKXt2YXIgYz17b25TaG93Om51bGx9O3JldHVybiBiPWEuZXh0ZW5kKGMsYiksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGMsZCxlPWEodGhpcyksZj0oYSh3aW5kb3cpLndpZHRoKCksZS5maW5kKFwibGkudGFiIGFcIikpLGc9ZS53aWR0aCgpLGg9TWF0aC5tYXgoZyxlWzBdLnNjcm9sbFdpZHRoKS9mLmxlbmd0aCxpPTAsaj1mdW5jdGlvbihhKXtyZXR1cm4gZy1hLnBvc2l0aW9uKCkubGVmdC1hLm91dGVyV2lkdGgoKS1lLnNjcm9sbExlZnQoKX0saz1mdW5jdGlvbihhKXtyZXR1cm4gYS5wb3NpdGlvbigpLmxlZnQrZS5zY3JvbGxMZWZ0KCl9O2M9YShmLmZpbHRlcignW2hyZWY9XCInK2xvY2F0aW9uLmhhc2grJ1wiXScpKSwwPT09Yy5sZW5ndGgmJihjPWEodGhpcykuZmluZChcImxpLnRhYiBhLmFjdGl2ZVwiKS5maXJzdCgpKSwwPT09Yy5sZW5ndGgmJihjPWEodGhpcykuZmluZChcImxpLnRhYiBhXCIpLmZpcnN0KCkpLGMuYWRkQ2xhc3MoXCJhY3RpdmVcIiksaT1mLmluZGV4KGMpLDA+aSYmKGk9MCksdm9pZCAwIT09Y1swXSYmKGQ9YShjWzBdLmhhc2gpKSxlLmFwcGVuZCgnPGRpdiBjbGFzcz1cImluZGljYXRvclwiPjwvZGl2PicpO3ZhciBsPWUuZmluZChcIi5pbmRpY2F0b3JcIik7ZS5pcyhcIjp2aXNpYmxlXCIpJiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bC5jc3Moe3JpZ2h0OmooYyl9KSxsLmNzcyh7bGVmdDprKGMpfSl9LDApLGEod2luZG93KS5yZXNpemUoZnVuY3Rpb24oKXtnPWUud2lkdGgoKSxoPU1hdGgubWF4KGcsZVswXS5zY3JvbGxXaWR0aCkvZi5sZW5ndGgsMD5pJiYoaT0wKSwwIT09aCYmMCE9PWcmJihsLmNzcyh7cmlnaHQ6aihjKX0pLGwuY3NzKHtsZWZ0OmsoYyl9KSl9KSxmLm5vdChjKS5lYWNoKGZ1bmN0aW9uKCl7YShNYXRlcmlhbGl6ZS5lc2NhcGVIYXNoKHRoaXMuaGFzaCkpLmhpZGUoKX0pLGUub24oXCJjbGlja1wiLFwiYVwiLGZ1bmN0aW9uKG0pe2lmKGEodGhpcykucGFyZW50KCkuaGFzQ2xhc3MoXCJkaXNhYmxlZFwiKSlyZXR1cm4gdm9pZCBtLnByZXZlbnREZWZhdWx0KCk7aWYoIWEodGhpcykuYXR0cihcInRhcmdldFwiKSl7Zz1lLndpZHRoKCksaD1NYXRoLm1heChnLGVbMF0uc2Nyb2xsV2lkdGgpL2YubGVuZ3RoLGMucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIiksdm9pZCAwIT09ZCYmZC5oaWRlKCksYz1hKHRoaXMpLGQ9YShNYXRlcmlhbGl6ZS5lc2NhcGVIYXNoKHRoaXMuaGFzaCkpLGY9ZS5maW5kKFwibGkudGFiIGFcIik7Yy5wb3NpdGlvbigpO2MuYWRkQ2xhc3MoXCJhY3RpdmVcIik7dmFyIG49aTtpPWYuaW5kZXgoYSh0aGlzKSksMD5pJiYoaT0wKSx2b2lkIDAhPT1kJiYoZC5zaG93KCksXCJmdW5jdGlvblwiPT10eXBlb2YgYi5vblNob3cmJmIub25TaG93LmNhbGwodGhpcyxkKSksaS1uPj0wPyhsLnZlbG9jaXR5KHtyaWdodDpqKGMpfSx7ZHVyYXRpb246MzAwLHF1ZXVlOiExLGVhc2luZzpcImVhc2VPdXRRdWFkXCJ9KSxsLnZlbG9jaXR5KHtsZWZ0OmsoYyl9LHtkdXJhdGlvbjozMDAscXVldWU6ITEsZWFzaW5nOlwiZWFzZU91dFF1YWRcIixkZWxheTo5MH0pKToobC52ZWxvY2l0eSh7bGVmdDprKGMpfSx7ZHVyYXRpb246MzAwLHF1ZXVlOiExLGVhc2luZzpcImVhc2VPdXRRdWFkXCJ9KSxsLnZlbG9jaXR5KHtyaWdodDpqKGMpfSx7ZHVyYXRpb246MzAwLHF1ZXVlOiExLGVhc2luZzpcImVhc2VPdXRRdWFkXCIsZGVsYXk6OTB9KSksbS5wcmV2ZW50RGVmYXVsdCgpfX0pfSl9LHNlbGVjdF90YWI6ZnVuY3Rpb24oYSl7dGhpcy5maW5kKCdhW2hyZWY9XCIjJythKydcIl0nKS50cmlnZ2VyKFwiY2xpY2tcIil9fTthLmZuLnRhYnM9ZnVuY3Rpb24oYyl7cmV0dXJuIGJbY10/YltjXS5hcHBseSh0aGlzLEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKSk6XCJvYmplY3RcIiE9dHlwZW9mIGMmJmM/dm9pZCBhLmVycm9yKFwiTWV0aG9kIFwiK2MrXCIgZG9lcyBub3QgZXhpc3Qgb24galF1ZXJ5LnRhYnNcIik6Yi5pbml0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sYShkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXthKFwidWwudGFic1wiKS50YWJzKCl9KX0oalF1ZXJ5KSxmdW5jdGlvbihhKXthLmZuLnRvb2x0aXA9ZnVuY3Rpb24oYyl7dmFyIGQ9NSxlPXtkZWxheTozNTAsdG9vbHRpcDpcIlwiLHBvc2l0aW9uOlwiYm90dG9tXCIsaHRtbDohMX07cmV0dXJuXCJyZW1vdmVcIj09PWM/KHRoaXMuZWFjaChmdW5jdGlvbigpe2EoXCIjXCIrYSh0aGlzKS5hdHRyKFwiZGF0YS10b29sdGlwLWlkXCIpKS5yZW1vdmUoKSxhKHRoaXMpLm9mZihcIm1vdXNlZW50ZXIudG9vbHRpcCBtb3VzZWxlYXZlLnRvb2x0aXBcIil9KSwhMSk6KGM9YS5leHRlbmQoZSxjKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZT1NYXRlcmlhbGl6ZS5ndWlkKCksZj1hKHRoaXMpO2YuYXR0cihcImRhdGEtdG9vbHRpcC1pZFwiKSYmYShcIiNcIitmLmF0dHIoXCJkYXRhLXRvb2x0aXAtaWRcIikpLnJlbW92ZSgpLGYuYXR0cihcImRhdGEtdG9vbHRpcC1pZFwiLGUpO3ZhciBnLGgsaSxqLGssbCxtPWZ1bmN0aW9uKCl7Zz1mLmF0dHIoXCJkYXRhLWh0bWxcIik/XCJ0cnVlXCI9PT1mLmF0dHIoXCJkYXRhLWh0bWxcIik6Yy5odG1sLGg9Zi5hdHRyKFwiZGF0YS1kZWxheVwiKSxoPXZvaWQgMD09PWh8fFwiXCI9PT1oP2MuZGVsYXk6aCxpPWYuYXR0cihcImRhdGEtcG9zaXRpb25cIiksaT12b2lkIDA9PT1pfHxcIlwiPT09aT9jLnBvc2l0aW9uOmksaj1mLmF0dHIoXCJkYXRhLXRvb2x0aXBcIiksaj12b2lkIDA9PT1qfHxcIlwiPT09aj9jLnRvb2x0aXA6an07bSgpO3ZhciBuPWZ1bmN0aW9uKCl7dmFyIGI9YSgnPGRpdiBjbGFzcz1cIm1hdGVyaWFsLXRvb2x0aXBcIj48L2Rpdj4nKTtyZXR1cm4gaj1nP2EoXCI8c3Bhbj48L3NwYW4+XCIpLmh0bWwoaik6YShcIjxzcGFuPjwvc3Bhbj5cIikudGV4dChqKSxiLmFwcGVuZChqKS5hcHBlbmRUbyhhKFwiYm9keVwiKSkuYXR0cihcImlkXCIsZSksbD1hKCc8ZGl2IGNsYXNzPVwiYmFja2Ryb3BcIj48L2Rpdj4nKSxsLmFwcGVuZFRvKGIpLGJ9O2s9bigpLGYub2ZmKFwibW91c2VlbnRlci50b29sdGlwIG1vdXNlbGVhdmUudG9vbHRpcFwiKTt2YXIgbyxwPSExO2Yub24oe1wibW91c2VlbnRlci50b29sdGlwXCI6ZnVuY3Rpb24oYSl7dmFyIGM9ZnVuY3Rpb24oKXttKCkscD0hMCxrLnZlbG9jaXR5KFwic3RvcFwiKSxsLnZlbG9jaXR5KFwic3RvcFwiKSxrLmNzcyh7ZGlzcGxheTpcImJsb2NrXCIsbGVmdDpcIjBweFwiLHRvcDpcIjBweFwifSk7dmFyIGEsYyxlLGc9Zi5vdXRlcldpZHRoKCksaD1mLm91dGVySGVpZ2h0KCksaj1rLm91dGVySGVpZ2h0KCksbj1rLm91dGVyV2lkdGgoKSxvPVwiMHB4XCIscT1cIjBweFwiLHI9OCxzPTg7XCJ0b3BcIj09PWk/KGE9Zi5vZmZzZXQoKS50b3Atai1kLGM9Zi5vZmZzZXQoKS5sZWZ0K2cvMi1uLzIsZT1iKGMsYSxuLGopLG89XCItMTBweFwiLGwuY3NzKHtib3R0b206MCxsZWZ0OjAsYm9yZGVyUmFkaXVzOlwiMTRweCAxNHB4IDAgMFwiLHRyYW5zZm9ybU9yaWdpbjpcIjUwJSAxMDAlXCIsbWFyZ2luVG9wOmosbWFyZ2luTGVmdDpuLzItbC53aWR0aCgpLzJ9KSk6XCJsZWZ0XCI9PT1pPyhhPWYub2Zmc2V0KCkudG9wK2gvMi1qLzIsYz1mLm9mZnNldCgpLmxlZnQtbi1kLGU9YihjLGEsbixqKSxxPVwiLTEwcHhcIixsLmNzcyh7dG9wOlwiLTdweFwiLHJpZ2h0OjAsd2lkdGg6XCIxNHB4XCIsaGVpZ2h0OlwiMTRweFwiLGJvcmRlclJhZGl1czpcIjE0cHggMCAwIDE0cHhcIix0cmFuc2Zvcm1PcmlnaW46XCI5NSUgNTAlXCIsbWFyZ2luVG9wOmovMixtYXJnaW5MZWZ0Om59KSk6XCJyaWdodFwiPT09aT8oYT1mLm9mZnNldCgpLnRvcCtoLzItai8yLGM9Zi5vZmZzZXQoKS5sZWZ0K2crZCxlPWIoYyxhLG4saikscT1cIisxMHB4XCIsbC5jc3Moe3RvcDpcIi03cHhcIixsZWZ0OjAsd2lkdGg6XCIxNHB4XCIsaGVpZ2h0OlwiMTRweFwiLGJvcmRlclJhZGl1czpcIjAgMTRweCAxNHB4IDBcIix0cmFuc2Zvcm1PcmlnaW46XCI1JSA1MCVcIixtYXJnaW5Ub3A6ai8yLG1hcmdpbkxlZnQ6XCIwcHhcIn0pKTooYT1mLm9mZnNldCgpLnRvcCtmLm91dGVySGVpZ2h0KCkrZCxjPWYub2Zmc2V0KCkubGVmdCtnLzItbi8yLGU9YihjLGEsbixqKSxvPVwiKzEwcHhcIixsLmNzcyh7dG9wOjAsbGVmdDowLG1hcmdpbkxlZnQ6bi8yLWwud2lkdGgoKS8yfSkpLGsuY3NzKHt0b3A6ZS55LGxlZnQ6ZS54fSkscj1NYXRoLlNRUlQyKm4vcGFyc2VJbnQobC5jc3MoXCJ3aWR0aFwiKSkscz1NYXRoLlNRUlQyKmovcGFyc2VJbnQobC5jc3MoXCJoZWlnaHRcIikpLGsudmVsb2NpdHkoe21hcmdpblRvcDpvLG1hcmdpbkxlZnQ6cX0se2R1cmF0aW9uOjM1MCxxdWV1ZTohMX0pLnZlbG9jaXR5KHtvcGFjaXR5OjF9LHtkdXJhdGlvbjozMDAsZGVsYXk6NTAscXVldWU6ITF9KSxsLmNzcyh7ZGlzcGxheTpcImJsb2NrXCJ9KS52ZWxvY2l0eSh7b3BhY2l0eToxfSx7ZHVyYXRpb246NTUsZGVsYXk6MCxxdWV1ZTohMX0pLnZlbG9jaXR5KHtzY2FsZVg6cixzY2FsZVk6c30se2R1cmF0aW9uOjMwMCxkZWxheTowLHF1ZXVlOiExLGVhc2luZzpcImVhc2VJbk91dFF1YWRcIn0pfTtvPXNldFRpbWVvdXQoYyxoKX0sXCJtb3VzZWxlYXZlLnRvb2x0aXBcIjpmdW5jdGlvbigpe3A9ITEsY2xlYXJUaW1lb3V0KG8pLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtwIT09ITAmJihrLnZlbG9jaXR5KHtvcGFjaXR5OjAsbWFyZ2luVG9wOjAsbWFyZ2luTGVmdDowfSx7ZHVyYXRpb246MjI1LHF1ZXVlOiExfSksbC52ZWxvY2l0eSh7b3BhY2l0eTowLHNjYWxlWDoxLHNjYWxlWToxfSx7ZHVyYXRpb246MjI1LHF1ZXVlOiExLGNvbXBsZXRlOmZ1bmN0aW9uKCl7bC5jc3MoXCJkaXNwbGF5XCIsXCJub25lXCIpLGsuY3NzKFwiZGlzcGxheVwiLFwibm9uZVwiKSxwPSExfX0pKX0sMjI1KX19KX0pKX07dmFyIGI9ZnVuY3Rpb24oYixjLGQsZSl7dmFyIGY9YixnPWM7cmV0dXJuIDA+Zj9mPTQ6ZitkPndpbmRvdy5pbm5lcldpZHRoJiYoZi09ZitkLXdpbmRvdy5pbm5lcldpZHRoKSwwPmc/Zz00OmcrZT53aW5kb3cuaW5uZXJIZWlnaHQrYSh3aW5kb3cpLnNjcm9sbFRvcCYmKGctPWcrZS13aW5kb3cuaW5uZXJIZWlnaHQpLHt4OmYseTpnfX07YShkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXthKFwiLnRvb2x0aXBwZWRcIikudG9vbHRpcCgpfSl9KGpRdWVyeSksZnVuY3Rpb24oYSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gYihhKXtyZXR1cm4gbnVsbCE9PWEmJmE9PT1hLndpbmRvd31mdW5jdGlvbiBjKGEpe3JldHVybiBiKGEpP2E6OT09PWEubm9kZVR5cGUmJmEuZGVmYXVsdFZpZXd9ZnVuY3Rpb24gZChhKXt2YXIgYixkLGU9e3RvcDowLGxlZnQ6MH0sZj1hJiZhLm93bmVyRG9jdW1lbnQ7cmV0dXJuIGI9Zi5kb2N1bWVudEVsZW1lbnQsXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0JiYoZT1hLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKSxkPWMoZikse3RvcDplLnRvcCtkLnBhZ2VZT2Zmc2V0LWIuY2xpZW50VG9wLGxlZnQ6ZS5sZWZ0K2QucGFnZVhPZmZzZXQtYi5jbGllbnRMZWZ0fX1mdW5jdGlvbiBlKGEpe3ZhciBiPVwiXCI7Zm9yKHZhciBjIGluIGEpYS5oYXNPd25Qcm9wZXJ0eShjKSYmKGIrPWMrXCI6XCIrYVtjXStcIjtcIik7cmV0dXJuIGJ9ZnVuY3Rpb24gZihhKXtpZihrLmFsbG93RXZlbnQoYSk9PT0hMSlyZXR1cm4gbnVsbDtmb3IodmFyIGI9bnVsbCxjPWEudGFyZ2V0fHxhLnNyY0VsZW1lbnQ7bnVsbCE9PWMucGFyZW50RWxlbWVudDspe2lmKCEoYyBpbnN0YW5jZW9mIFNWR0VsZW1lbnR8fC0xPT09Yy5jbGFzc05hbWUuaW5kZXhPZihcIndhdmVzLWVmZmVjdFwiKSkpe2I9YzticmVha31pZihjLmNsYXNzTGlzdC5jb250YWlucyhcIndhdmVzLWVmZmVjdFwiKSl7Yj1jO2JyZWFrfWM9Yy5wYXJlbnRFbGVtZW50fXJldHVybiBifWZ1bmN0aW9uIGcoYil7dmFyIGM9ZihiKTtudWxsIT09YyYmKGouc2hvdyhiLGMpLFwib250b3VjaHN0YXJ0XCJpbiBhJiYoYy5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIixqLmhpZGUsITEpLGMuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoY2FuY2VsXCIsai5oaWRlLCExKSksYy5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLGouaGlkZSwhMSksYy5hZGRFdmVudExpc3RlbmVyKFwibW91c2VsZWF2ZVwiLGouaGlkZSwhMSkpfXZhciBoPWh8fHt9LGk9ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbC5iaW5kKGRvY3VtZW50KSxqPXtkdXJhdGlvbjo3NTAsc2hvdzpmdW5jdGlvbihhLGIpe2lmKDI9PT1hLmJ1dHRvbilyZXR1cm4hMTt2YXIgYz1ifHx0aGlzLGY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtmLmNsYXNzTmFtZT1cIndhdmVzLXJpcHBsZVwiLGMuYXBwZW5kQ2hpbGQoZik7dmFyIGc9ZChjKSxoPWEucGFnZVktZy50b3AsaT1hLnBhZ2VYLWcubGVmdCxrPVwic2NhbGUoXCIrYy5jbGllbnRXaWR0aC8xMDAqMTArXCIpXCI7XCJ0b3VjaGVzXCJpbiBhJiYoaD1hLnRvdWNoZXNbMF0ucGFnZVktZy50b3AsaT1hLnRvdWNoZXNbMF0ucGFnZVgtZy5sZWZ0KSxmLnNldEF0dHJpYnV0ZShcImRhdGEtaG9sZFwiLERhdGUubm93KCkpLGYuc2V0QXR0cmlidXRlKFwiZGF0YS1zY2FsZVwiLGspLGYuc2V0QXR0cmlidXRlKFwiZGF0YS14XCIsaSksZi5zZXRBdHRyaWJ1dGUoXCJkYXRhLXlcIixoKTt2YXIgbD17dG9wOmgrXCJweFwiLGxlZnQ6aStcInB4XCJ9O2YuY2xhc3NOYW1lPWYuY2xhc3NOYW1lK1wiIHdhdmVzLW5vdHJhbnNpdGlvblwiLGYuc2V0QXR0cmlidXRlKFwic3R5bGVcIixlKGwpKSxmLmNsYXNzTmFtZT1mLmNsYXNzTmFtZS5yZXBsYWNlKFwid2F2ZXMtbm90cmFuc2l0aW9uXCIsXCJcIiksbFtcIi13ZWJraXQtdHJhbnNmb3JtXCJdPWssbFtcIi1tb3otdHJhbnNmb3JtXCJdPWssbFtcIi1tcy10cmFuc2Zvcm1cIl09ayxsW1wiLW8tdHJhbnNmb3JtXCJdPWssbC50cmFuc2Zvcm09ayxsLm9wYWNpdHk9XCIxXCIsbFtcIi13ZWJraXQtdHJhbnNpdGlvbi1kdXJhdGlvblwiXT1qLmR1cmF0aW9uK1wibXNcIixsW1wiLW1vei10cmFuc2l0aW9uLWR1cmF0aW9uXCJdPWouZHVyYXRpb24rXCJtc1wiLGxbXCItby10cmFuc2l0aW9uLWR1cmF0aW9uXCJdPWouZHVyYXRpb24rXCJtc1wiLGxbXCJ0cmFuc2l0aW9uLWR1cmF0aW9uXCJdPWouZHVyYXRpb24rXCJtc1wiLGxbXCItd2Via2l0LXRyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uXCJdPVwiY3ViaWMtYmV6aWVyKDAuMjUwLCAwLjQ2MCwgMC40NTAsIDAuOTQwKVwiLGxbXCItbW96LXRyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uXCJdPVwiY3ViaWMtYmV6aWVyKDAuMjUwLCAwLjQ2MCwgMC40NTAsIDAuOTQwKVwiLGxbXCItby10cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvblwiXT1cImN1YmljLWJlemllcigwLjI1MCwgMC40NjAsIDAuNDUwLCAwLjk0MClcIixsW1widHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb25cIl09XCJjdWJpYy1iZXppZXIoMC4yNTAsIDAuNDYwLCAwLjQ1MCwgMC45NDApXCIsZi5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLGUobCkpfSxoaWRlOmZ1bmN0aW9uKGEpe2sudG91Y2h1cChhKTt2YXIgYj10aGlzLGM9KDEuNCpiLmNsaWVudFdpZHRoLG51bGwpLGQ9Yi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwid2F2ZXMtcmlwcGxlXCIpO2lmKCEoZC5sZW5ndGg+MCkpcmV0dXJuITE7Yz1kW2QubGVuZ3RoLTFdO3ZhciBmPWMuZ2V0QXR0cmlidXRlKFwiZGF0YS14XCIpLGc9Yy5nZXRBdHRyaWJ1dGUoXCJkYXRhLXlcIiksaD1jLmdldEF0dHJpYnV0ZShcImRhdGEtc2NhbGVcIiksaT1EYXRlLm5vdygpLU51bWJlcihjLmdldEF0dHJpYnV0ZShcImRhdGEtaG9sZFwiKSksbD0zNTAtaTswPmwmJihsPTApLHNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgYT17dG9wOmcrXCJweFwiLGxlZnQ6ZitcInB4XCIsb3BhY2l0eTpcIjBcIixcIi13ZWJraXQtdHJhbnNpdGlvbi1kdXJhdGlvblwiOmouZHVyYXRpb24rXCJtc1wiLFwiLW1vei10cmFuc2l0aW9uLWR1cmF0aW9uXCI6ai5kdXJhdGlvbitcIm1zXCIsXCItby10cmFuc2l0aW9uLWR1cmF0aW9uXCI6ai5kdXJhdGlvbitcIm1zXCIsXCJ0cmFuc2l0aW9uLWR1cmF0aW9uXCI6ai5kdXJhdGlvbitcIm1zXCIsXCItd2Via2l0LXRyYW5zZm9ybVwiOmgsXCItbW96LXRyYW5zZm9ybVwiOmgsXCItbXMtdHJhbnNmb3JtXCI6aCxcIi1vLXRyYW5zZm9ybVwiOmgsdHJhbnNmb3JtOmh9O2Muc2V0QXR0cmlidXRlKFwic3R5bGVcIixlKGEpKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dHJ5e2IucmVtb3ZlQ2hpbGQoYyl9Y2F0Y2goYSl7cmV0dXJuITF9fSxqLmR1cmF0aW9uKX0sbCl9LHdyYXBJbnB1dDpmdW5jdGlvbihhKXtmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKyl7dmFyIGM9YVtiXTtpZihcImlucHV0XCI9PT1jLnRhZ05hbWUudG9Mb3dlckNhc2UoKSl7dmFyIGQ9Yy5wYXJlbnROb2RlO2lmKFwiaVwiPT09ZC50YWdOYW1lLnRvTG93ZXJDYXNlKCkmJi0xIT09ZC5jbGFzc05hbWUuaW5kZXhPZihcIndhdmVzLWVmZmVjdFwiKSljb250aW51ZTt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaVwiKTtlLmNsYXNzTmFtZT1jLmNsYXNzTmFtZStcIiB3YXZlcy1pbnB1dC13cmFwcGVyXCI7dmFyIGY9Yy5nZXRBdHRyaWJ1dGUoXCJzdHlsZVwiKTtmfHwoZj1cIlwiKSxlLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsZiksYy5jbGFzc05hbWU9XCJ3YXZlcy1idXR0b24taW5wdXRcIixjLnJlbW92ZUF0dHJpYnV0ZShcInN0eWxlXCIpLGQucmVwbGFjZUNoaWxkKGUsYyksZS5hcHBlbmRDaGlsZChjKX19fX0saz17dG91Y2hlczowLGFsbG93RXZlbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9ITA7cmV0dXJuXCJ0b3VjaHN0YXJ0XCI9PT1hLnR5cGU/ay50b3VjaGVzKz0xOlwidG91Y2hlbmRcIj09PWEudHlwZXx8XCJ0b3VjaGNhbmNlbFwiPT09YS50eXBlP3NldFRpbWVvdXQoZnVuY3Rpb24oKXtrLnRvdWNoZXM+MCYmKGsudG91Y2hlcy09MSl9LDUwMCk6XCJtb3VzZWRvd25cIj09PWEudHlwZSYmay50b3VjaGVzPjAmJihiPSExKSxifSx0b3VjaHVwOmZ1bmN0aW9uKGEpe2suYWxsb3dFdmVudChhKX19O2guZGlzcGxheUVmZmVjdD1mdW5jdGlvbihiKXtiPWJ8fHt9LFwiZHVyYXRpb25cImluIGImJihqLmR1cmF0aW9uPWIuZHVyYXRpb24pLGoud3JhcElucHV0KGkoXCIud2F2ZXMtZWZmZWN0XCIpKSxcIm9udG91Y2hzdGFydFwiaW4gYSYmZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLGcsITEpLGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLGcsITEpfSxoLmF0dGFjaD1mdW5jdGlvbihiKXtcImlucHV0XCI9PT1iLnRhZ05hbWUudG9Mb3dlckNhc2UoKSYmKGoud3JhcElucHV0KFtiXSksYj1iLnBhcmVudEVsZW1lbnQpLFwib250b3VjaHN0YXJ0XCJpbiBhJiZiLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsZywhMSksYi5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsZywhMSl9LGEuV2F2ZXM9aCxkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLGZ1bmN0aW9uKCl7aC5kaXNwbGF5RWZmZWN0KCl9LCExKX0od2luZG93KSxNYXRlcmlhbGl6ZS50b2FzdD1mdW5jdGlvbihhLGIsYyxkKXtmdW5jdGlvbiBlKGEpe3ZhciBiPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7aWYoYi5jbGFzc0xpc3QuYWRkKFwidG9hc3RcIiksYylmb3IodmFyIGU9Yy5zcGxpdChcIiBcIiksZj0wLGc9ZS5sZW5ndGg7Zz5mO2YrKyliLmNsYXNzTGlzdC5hZGQoZVtmXSk7KFwib2JqZWN0XCI9PXR5cGVvZiBIVE1MRWxlbWVudD9hIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQ6YSYmXCJvYmplY3RcIj09dHlwZW9mIGEmJm51bGwhPT1hJiYxPT09YS5ub2RlVHlwZSYmXCJzdHJpbmdcIj09dHlwZW9mIGEubm9kZU5hbWUpP2IuYXBwZW5kQ2hpbGQoYSk6YSBpbnN0YW5jZW9mIGpRdWVyeT9iLmFwcGVuZENoaWxkKGFbMF0pOmIuaW5uZXJIVE1MPWE7dmFyIGg9bmV3IEhhbW1lcihiLHtwcmV2ZW50X2RlZmF1bHQ6ITF9KTtyZXR1cm4gaC5vbihcInBhblwiLGZ1bmN0aW9uKGEpe3ZhciBjPWEuZGVsdGFYLGQ9ODA7Yi5jbGFzc0xpc3QuY29udGFpbnMoXCJwYW5uaW5nXCIpfHxiLmNsYXNzTGlzdC5hZGQoXCJwYW5uaW5nXCIpO3ZhciBlPTEtTWF0aC5hYnMoYy9kKTswPmUmJihlPTApLFZlbChiLHtsZWZ0OmMsb3BhY2l0eTplfSx7ZHVyYXRpb246NTAscXVldWU6ITEsZWFzaW5nOlwiZWFzZU91dFF1YWRcIn0pfSksaC5vbihcInBhbmVuZFwiLGZ1bmN0aW9uKGEpe3ZhciBjPWEuZGVsdGFYLGU9ODA7TWF0aC5hYnMoYyk+ZT9WZWwoYix7bWFyZ2luVG9wOlwiLTQwcHhcIn0se2R1cmF0aW9uOjM3NSxlYXNpbmc6XCJlYXNlT3V0RXhwb1wiLHF1ZXVlOiExLGNvbXBsZXRlOmZ1bmN0aW9uKCl7XCJmdW5jdGlvblwiPT10eXBlb2YgZCYmZCgpLGIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKX19KTooYi5jbGFzc0xpc3QucmVtb3ZlKFwicGFubmluZ1wiKSxWZWwoYix7bGVmdDowLG9wYWNpdHk6MX0se2R1cmF0aW9uOjMwMCxlYXNpbmc6XCJlYXNlT3V0RXhwb1wiLHF1ZXVlOiExfSkpfSksYn1jPWN8fFwiXCI7dmFyIGY9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0b2FzdC1jb250YWluZXJcIik7bnVsbD09PWYmJihmPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksZi5pZD1cInRvYXN0LWNvbnRhaW5lclwiLGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZikpO3ZhciBnPWUoYSk7YSYmZi5hcHBlbmRDaGlsZChnKSxnLnN0eWxlLnRvcD1cIjM1cHhcIixnLnN0eWxlLm9wYWNpdHk9MCxWZWwoZyx7dG9wOlwiMHB4XCIsb3BhY2l0eToxfSx7ZHVyYXRpb246MzAwLGVhc2luZzpcImVhc2VPdXRDdWJpY1wiLHF1ZXVlOiExfSk7dmFyIGgsaT1iO251bGwhPWkmJihoPXNldEludGVydmFsKGZ1bmN0aW9uKCl7bnVsbD09PWcucGFyZW50Tm9kZSYmd2luZG93LmNsZWFySW50ZXJ2YWwoaCksZy5jbGFzc0xpc3QuY29udGFpbnMoXCJwYW5uaW5nXCIpfHwoaS09MjApLDA+PWkmJihWZWwoZyx7b3BhY2l0eTowLG1hcmdpblRvcDpcIi00MHB4XCJ9LHtkdXJhdGlvbjozNzUsZWFzaW5nOlwiZWFzZU91dEV4cG9cIixxdWV1ZTohMSxjb21wbGV0ZTpmdW5jdGlvbigpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGQmJmQoKSx0aGlzWzBdLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpc1swXSl9fSksd2luZG93LmNsZWFySW50ZXJ2YWwoaCkpfSwyMCkpfSxmdW5jdGlvbihhKXt2YXIgYj17aW5pdDpmdW5jdGlvbihiKXt2YXIgYz17bWVudVdpZHRoOjMwMCxlZGdlOlwibGVmdFwiLGNsb3NlT25DbGljazohMSxkcmFnZ2FibGU6ITB9O2I9YS5leHRlbmQoYyxiKSxhKHRoaXMpLmVhY2goZnVuY3Rpb24oKXt2YXIgYz1hKHRoaXMpLGQ9YShcIiNcIitjLmF0dHIoXCJkYXRhLWFjdGl2YXRlc1wiKSk7MzAwIT1iLm1lbnVXaWR0aCYmZC5jc3MoXCJ3aWR0aFwiLGIubWVudVdpZHRoKTt2YXIgZTtiLmRyYWdnYWJsZT8oZT1hKCc8ZGl2IGNsYXNzPVwiZHJhZy10YXJnZXRcIj48L2Rpdj4nKS5hdHRyKFwiZGF0YS1zaWRlbmF2XCIsYy5hdHRyKFwiZGF0YS1hY3RpdmF0ZXNcIikpLGEoXCJib2R5XCIpLmFwcGVuZChlKSk6ZT1hKCksXCJsZWZ0XCI9PWIuZWRnZT8oZC5jc3MoXCJ0cmFuc2Zvcm1cIixcInRyYW5zbGF0ZVgoLTEwMCUpXCIpLGUuY3NzKHtsZWZ0OjB9KSk6KGQuYWRkQ2xhc3MoXCJyaWdodC1hbGlnbmVkXCIpLmNzcyhcInRyYW5zZm9ybVwiLFwidHJhbnNsYXRlWCgxMDAlKVwiKSxlLmNzcyh7cmlnaHQ6MH0pKSxkLmhhc0NsYXNzKFwiZml4ZWRcIikmJndpbmRvdy5pbm5lcldpZHRoPjk5MiYmZC5jc3MoXCJ0cmFuc2Zvcm1cIixcInRyYW5zbGF0ZVgoMClcIiksZC5oYXNDbGFzcyhcImZpeGVkXCIpJiZhKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uKCl7d2luZG93LmlubmVyV2lkdGg+OTkyPzAhPT1hKFwiI3NpZGVuYXYtb3ZlcmxheVwiKS5sZW5ndGgmJmg/ZighMCk6ZC5jc3MoXCJ0cmFuc2Zvcm1cIixcInRyYW5zbGF0ZVgoMCUpXCIpOmg9PT0hMSYmKFwibGVmdFwiPT09Yi5lZGdlP2QuY3NzKFwidHJhbnNmb3JtXCIsXCJ0cmFuc2xhdGVYKC0xMDAlKVwiKTpkLmNzcyhcInRyYW5zZm9ybVwiLFwidHJhbnNsYXRlWCgxMDAlKVwiKSl9KSxiLmNsb3NlT25DbGljaz09PSEwJiZkLm9uKFwiY2xpY2suaXRlbWNsaWNrXCIsXCJhOm5vdCguY29sbGFwc2libGUtaGVhZGVyKVwiLGZ1bmN0aW9uKCl7ZigpfSk7dmFyIGY9ZnVuY3Rpb24oYyl7Zz0hMSxoPSExLGEoXCJib2R5XCIpLmNzcyh7b3ZlcmZsb3c6XCJcIix3aWR0aDpcIlwifSksYShcIiNzaWRlbmF2LW92ZXJsYXlcIikudmVsb2NpdHkoe29wYWNpdHk6MH0se2R1cmF0aW9uOjIwMCxxdWV1ZTohMSxlYXNpbmc6XCJlYXNlT3V0UXVhZFwiLGNvbXBsZXRlOmZ1bmN0aW9uKCl7YSh0aGlzKS5yZW1vdmUoKX19KSxcImxlZnRcIj09PWIuZWRnZT8oZS5jc3Moe3dpZHRoOlwiXCIscmlnaHQ6XCJcIixsZWZ0OlwiMFwifSksZC52ZWxvY2l0eSh7dHJhbnNsYXRlWDpcIi0xMDAlXCJ9LHtkdXJhdGlvbjoyMDAscXVldWU6ITEsZWFzaW5nOlwiZWFzZU91dEN1YmljXCIsY29tcGxldGU6ZnVuY3Rpb24oKXtjPT09ITAmJihkLnJlbW92ZUF0dHIoXCJzdHlsZVwiKSxkLmNzcyhcIndpZHRoXCIsYi5tZW51V2lkdGgpKX19KSk6KGUuY3NzKHt3aWR0aDpcIlwiLHJpZ2h0OlwiMFwiLGxlZnQ6XCJcIn0pLGQudmVsb2NpdHkoe3RyYW5zbGF0ZVg6XCIxMDAlXCJ9LHtkdXJhdGlvbjoyMDAscXVldWU6ITEsZWFzaW5nOlwiZWFzZU91dEN1YmljXCIsY29tcGxldGU6ZnVuY3Rpb24oKXtjPT09ITAmJihkLnJlbW92ZUF0dHIoXCJzdHlsZVwiKSxkLmNzcyhcIndpZHRoXCIsYi5tZW51V2lkdGgpKX19KSl9LGc9ITEsaD0hMTtiLmRyYWdnYWJsZSYmKGUub24oXCJjbGlja1wiLGZ1bmN0aW9uKCl7aCYmZigpfSksZS5oYW1tZXIoe3ByZXZlbnRfZGVmYXVsdDohMX0pLmJpbmQoXCJwYW5cIixmdW5jdGlvbihjKXtpZihcInRvdWNoXCI9PWMuZ2VzdHVyZS5wb2ludGVyVHlwZSl7dmFyIGU9KGMuZ2VzdHVyZS5kaXJlY3Rpb24sYy5nZXN0dXJlLmNlbnRlci54KSxnPShjLmdlc3R1cmUuY2VudGVyLnksYy5nZXN0dXJlLnZlbG9jaXR5WCxhKFwiYm9keVwiKSksaT1hKFwiI3NpZGVuYXYtb3ZlcmxheVwiKSxqPWcuaW5uZXJXaWR0aCgpO2lmKGcuY3NzKFwib3ZlcmZsb3dcIixcImhpZGRlblwiKSxnLndpZHRoKGopLDA9PT1pLmxlbmd0aCYmKGk9YSgnPGRpdiBpZD1cInNpZGVuYXYtb3ZlcmxheVwiPjwvZGl2PicpLGkuY3NzKFwib3BhY2l0eVwiLDApLmNsaWNrKGZ1bmN0aW9uKCl7ZigpfSksYShcImJvZHlcIikuYXBwZW5kKGkpKSxcImxlZnRcIj09PWIuZWRnZSYmKGU+Yi5tZW51V2lkdGg/ZT1iLm1lbnVXaWR0aDowPmUmJihlPTApKSxcImxlZnRcIj09PWIuZWRnZSllPGIubWVudVdpZHRoLzI/aD0hMTplPj1iLm1lbnVXaWR0aC8yJiYoaD0hMCksZC5jc3MoXCJ0cmFuc2Zvcm1cIixcInRyYW5zbGF0ZVgoXCIrKGUtYi5tZW51V2lkdGgpK1wicHgpXCIpO2Vsc2V7ZTx3aW5kb3cuaW5uZXJXaWR0aC1iLm1lbnVXaWR0aC8yP2g9ITA6ZT49d2luZG93LmlubmVyV2lkdGgtYi5tZW51V2lkdGgvMiYmKGg9ITEpO3ZhciBrPWUtYi5tZW51V2lkdGgvMjswPmsmJihrPTApLGQuY3NzKFwidHJhbnNmb3JtXCIsXCJ0cmFuc2xhdGVYKFwiK2srXCJweClcIil9dmFyIGw7XCJsZWZ0XCI9PT1iLmVkZ2U/KGw9ZS9iLm1lbnVXaWR0aCxpLnZlbG9jaXR5KHtvcGFjaXR5Omx9LHtkdXJhdGlvbjoxMCxxdWV1ZTohMSxlYXNpbmc6XCJlYXNlT3V0UXVhZFwifSkpOihsPU1hdGguYWJzKChlLXdpbmRvdy5pbm5lcldpZHRoKS9iLm1lbnVXaWR0aCksaS52ZWxvY2l0eSh7b3BhY2l0eTpsfSx7ZHVyYXRpb246MTAscXVldWU6ITEsZWFzaW5nOlwiZWFzZU91dFF1YWRcIn0pKX19KS5iaW5kKFwicGFuZW5kXCIsZnVuY3Rpb24oYyl7aWYoXCJ0b3VjaFwiPT1jLmdlc3R1cmUucG9pbnRlclR5cGUpe3ZhciBmPWEoJzxkaXYgaWQ9XCJzaWRlbmF2LW92ZXJsYXlcIj48L2Rpdj4nKSxpPWMuZ2VzdHVyZS52ZWxvY2l0eVgsaj1jLmdlc3R1cmUuY2VudGVyLngsaz1qLWIubWVudVdpZHRoLGw9ai1iLm1lbnVXaWR0aC8yO2s+MCYmKGs9MCksMD5sJiYobD0wKSxnPSExLFwibGVmdFwiPT09Yi5lZGdlP2gmJi4zPj1pfHwtLjU+aT8oMCE9PWsmJmQudmVsb2NpdHkoe3RyYW5zbGF0ZVg6WzAsa119LHtkdXJhdGlvbjozMDAscXVldWU6ITEsZWFzaW5nOlwiZWFzZU91dFF1YWRcIn0pLGYudmVsb2NpdHkoe29wYWNpdHk6MX0se2R1cmF0aW9uOjUwLHF1ZXVlOiExLGVhc2luZzpcImVhc2VPdXRRdWFkXCJ9KSxlLmNzcyh7d2lkdGg6XCI1MCVcIixyaWdodDowLGxlZnQ6XCJcIn0pLGg9ITApOighaHx8aT4uMykmJihhKFwiYm9keVwiKS5jc3Moe292ZXJmbG93OlwiXCIsd2lkdGg6XCJcIn0pLGQudmVsb2NpdHkoe3RyYW5zbGF0ZVg6Wy0xKmIubWVudVdpZHRoLTEwLGtdfSx7ZHVyYXRpb246MjAwLHF1ZXVlOiExLGVhc2luZzpcImVhc2VPdXRRdWFkXCJ9KSxmLnZlbG9jaXR5KHtvcGFjaXR5OjB9LHtkdXJhdGlvbjoyMDAscXVldWU6ITEsZWFzaW5nOlwiZWFzZU91dFF1YWRcIixjb21wbGV0ZTpmdW5jdGlvbigpe2EodGhpcykucmVtb3ZlKCl9fSksZS5jc3Moe3dpZHRoOlwiMTBweFwiLHJpZ2h0OlwiXCIsbGVmdDowfSkpOmgmJmk+PS0uM3x8aT4uNT8oMCE9PWwmJmQudmVsb2NpdHkoe3RyYW5zbGF0ZVg6WzAsbF19LHtkdXJhdGlvbjozMDAscXVldWU6ITEsZWFzaW5nOlwiZWFzZU91dFF1YWRcIn0pLGYudmVsb2NpdHkoe29wYWNpdHk6MX0se2R1cmF0aW9uOjUwLHF1ZXVlOiExLGVhc2luZzpcImVhc2VPdXRRdWFkXCJ9KSxlLmNzcyh7d2lkdGg6XCI1MCVcIixyaWdodDpcIlwiLGxlZnQ6MH0pLGg9ITApOighaHx8LS4zPmkpJiYoYShcImJvZHlcIikuY3NzKHtvdmVyZmxvdzpcIlwiLHdpZHRoOlwiXCJ9KSxkLnZlbG9jaXR5KHt0cmFuc2xhdGVYOltiLm1lbnVXaWR0aCsxMCxsXX0se2R1cmF0aW9uOjIwMCxxdWV1ZTohMSxlYXNpbmc6XCJlYXNlT3V0UXVhZFwifSksZi52ZWxvY2l0eSh7b3BhY2l0eTowfSx7ZHVyYXRpb246MjAwLHF1ZXVlOiExLGVhc2luZzpcImVhc2VPdXRRdWFkXCIsY29tcGxldGU6ZnVuY3Rpb24oKXthKHRoaXMpLnJlbW92ZSgpfX0pLGUuY3NzKHt3aWR0aDpcIjEwcHhcIixyaWdodDowLGxlZnQ6XCJcIn0pKX19KSksYy5jbGljayhmdW5jdGlvbigpe2lmKGg9PT0hMCloPSExLGc9ITEsZigpO2Vsc2V7dmFyIGM9YShcImJvZHlcIiksaT1hKCc8ZGl2IGlkPVwic2lkZW5hdi1vdmVybGF5XCI+PC9kaXY+Jyksaj1jLmlubmVyV2lkdGgoKTtjLmNzcyhcIm92ZXJmbG93XCIsXCJoaWRkZW5cIiksYy53aWR0aChqKSxhKFwiYm9keVwiKS5hcHBlbmQoZSksXCJsZWZ0XCI9PT1iLmVkZ2U/KGUuY3NzKHt3aWR0aDpcIjUwJVwiLHJpZ2h0OjAsbGVmdDpcIlwifSksZC52ZWxvY2l0eSh7dHJhbnNsYXRlWDpbMCwtMSpiLm1lbnVXaWR0aF19LHtkdXJhdGlvbjozMDAscXVldWU6ITEsZWFzaW5nOlwiZWFzZU91dFF1YWRcIn0pKTooZS5jc3Moe3dpZHRoOlwiNTAlXCIscmlnaHQ6XCJcIixsZWZ0OjB9KSxkLnZlbG9jaXR5KHt0cmFuc2xhdGVYOlswLGIubWVudVdpZHRoXX0se2R1cmF0aW9uOjMwMCxxdWV1ZTohMSxlYXNpbmc6XCJlYXNlT3V0UXVhZFwifSkpLGkuY3NzKFwib3BhY2l0eVwiLDApLmNsaWNrKGZ1bmN0aW9uKCl7aD0hMSxnPSExLGYoKSxpLnZlbG9jaXR5KHtvcGFjaXR5OjB9LHtkdXJhdGlvbjozMDAscXVldWU6ITEsZWFzaW5nOlwiZWFzZU91dFF1YWRcIixjb21wbGV0ZTpmdW5jdGlvbigpe2EodGhpcykucmVtb3ZlKCl9fSl9KSxhKFwiYm9keVwiKS5hcHBlbmQoaSksaS52ZWxvY2l0eSh7b3BhY2l0eToxfSx7ZHVyYXRpb246MzAwLHF1ZXVlOiExLGVhc2luZzpcImVhc2VPdXRRdWFkXCIsY29tcGxldGU6ZnVuY3Rpb24oKXtoPSEwLGc9ITF9fSl9cmV0dXJuITF9KX0pfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGI9YShcIiNzaWRlbmF2LW92ZXJsYXlcIiksYz1hKCcuZHJhZy10YXJnZXRbZGF0YS1zaWRlbmF2PVwiJythKHRoaXMpLmF0dHIoXCJkYXRhLWFjdGl2YXRlc1wiKSsnXCJdJyk7Yi50cmlnZ2VyKFwiY2xpY2tcIiksYy5yZW1vdmUoKSxhKHRoaXMpLm9mZihcImNsaWNrXCIpLGIucmVtb3ZlKCl9LHNob3c6ZnVuY3Rpb24oKXt0aGlzLnRyaWdnZXIoXCJjbGlja1wiKX0saGlkZTpmdW5jdGlvbigpe2EoXCIjc2lkZW5hdi1vdmVybGF5XCIpLnRyaWdnZXIoXCJjbGlja1wiKX19O2EuZm4uc2lkZU5hdj1mdW5jdGlvbihjKXtyZXR1cm4gYltjXT9iW2NdLmFwcGx5KHRoaXMsQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpKTpcIm9iamVjdFwiIT10eXBlb2YgYyYmYz92b2lkIGEuZXJyb3IoXCJNZXRob2QgXCIrYytcIiBkb2VzIG5vdCBleGlzdCBvbiBqUXVlcnkuc2lkZU5hdlwiKTpiLmluaXQuYXBwbHkodGhpcyxhcmd1bWVudHMpfX0oalF1ZXJ5KSxmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGIsYyxkLGUpe3ZhciBmPWEoKTtyZXR1cm4gYS5lYWNoKGcsZnVuY3Rpb24oYSxnKXtpZihnLmhlaWdodCgpPjApe3ZhciBoPWcub2Zmc2V0KCkudG9wLGk9Zy5vZmZzZXQoKS5sZWZ0LGo9aStnLndpZHRoKCksaz1oK2cuaGVpZ2h0KCksbD0hKGk+Y3x8ZT5qfHxoPmR8fGI+ayk7bCYmZi5wdXNoKGcpfX0pLGZ9ZnVuY3Rpb24gYyhjKXsrK2o7dmFyIGQ9Zi5zY3JvbGxUb3AoKSxlPWYuc2Nyb2xsTGVmdCgpLGc9ZStmLndpZHRoKCksaT1kK2YuaGVpZ2h0KCksbD1iKGQray50b3ArY3x8MjAwLGcray5yaWdodCxpK2suYm90dG9tLGUray5sZWZ0KTthLmVhY2gobCxmdW5jdGlvbihhLGIpe3ZhciBjPWIuZGF0YShcInNjcm9sbFNweTp0aWNrc1wiKTtcIm51bWJlclwiIT10eXBlb2YgYyYmYi50cmlnZ2VySGFuZGxlcihcInNjcm9sbFNweTplbnRlclwiKSxiLmRhdGEoXCJzY3JvbGxTcHk6dGlja3NcIixqKX0pLGEuZWFjaChoLGZ1bmN0aW9uKGEsYil7dmFyIGM9Yi5kYXRhKFwic2Nyb2xsU3B5OnRpY2tzXCIpO1wibnVtYmVyXCI9PXR5cGVvZiBjJiZjIT09aiYmKGIudHJpZ2dlckhhbmRsZXIoXCJzY3JvbGxTcHk6ZXhpdFwiKSxiLmRhdGEoXCJzY3JvbGxTcHk6dGlja3NcIixudWxsKSl9KSxoPWx9ZnVuY3Rpb24gZCgpe2YudHJpZ2dlcihcInNjcm9sbFNweTp3aW5TaXplXCIpfWZ1bmN0aW9uIGUoYSxiLGMpe3ZhciBkLGUsZixnPW51bGwsaD0wO2N8fChjPXt9KTt2YXIgaT1mdW5jdGlvbigpe2g9Yy5sZWFkaW5nPT09ITE/MDpsKCksZz1udWxsLGY9YS5hcHBseShkLGUpLGQ9ZT1udWxsfTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgaj1sKCk7aHx8Yy5sZWFkaW5nIT09ITF8fChoPWopO3ZhciBrPWItKGotaCk7cmV0dXJuIGQ9dGhpcyxlPWFyZ3VtZW50cywwPj1rPyhjbGVhclRpbWVvdXQoZyksZz1udWxsLGg9aixmPWEuYXBwbHkoZCxlKSxkPWU9bnVsbCk6Z3x8Yy50cmFpbGluZz09PSExfHwoZz1zZXRUaW1lb3V0KGksaykpLGZ9fXZhciBmPWEod2luZG93KSxnPVtdLGg9W10saT0hMSxqPTAsaz17dG9wOjAscmlnaHQ6MCxib3R0b206MCxsZWZ0OjB9LGw9RGF0ZS5ub3d8fGZ1bmN0aW9uKCl7cmV0dXJuKG5ldyBEYXRlKS5nZXRUaW1lKCl9O2Euc2Nyb2xsU3B5PWZ1bmN0aW9uKGIsZCl7dmFyIGg9e3Rocm90dGxlOjEwMCxzY3JvbGxPZmZzZXQ6MjAwfTtkPWEuZXh0ZW5kKGgsZCk7dmFyIGo9W107Yj1hKGIpLGIuZWFjaChmdW5jdGlvbihiLGMpe2cucHVzaChhKGMpKSxhKGMpLmRhdGEoXCJzY3JvbGxTcHk6aWRcIixiKSxhKCdhW2hyZWY9XCIjJythKGMpLmF0dHIoXCJpZFwiKSsnXCJdJykuY2xpY2soZnVuY3Rpb24oYil7Yi5wcmV2ZW50RGVmYXVsdCgpO3ZhciBjPWEoTWF0ZXJpYWxpemUuZXNjYXBlSGFzaCh0aGlzLmhhc2gpKS5vZmZzZXQoKS50b3ArMTthKFwiaHRtbCwgYm9keVwiKS5hbmltYXRlKHtzY3JvbGxUb3A6Yy1kLnNjcm9sbE9mZnNldH0se2R1cmF0aW9uOjQwMCxxdWV1ZTohMSxlYXNpbmc6XCJlYXNlT3V0Q3ViaWNcIn0pfSl9KSxrLnRvcD1kLm9mZnNldFRvcHx8MCxrLnJpZ2h0PWQub2Zmc2V0UmlnaHR8fDAsay5ib3R0b209ZC5vZmZzZXRCb3R0b218fDAsay5sZWZ0PWQub2Zmc2V0TGVmdHx8MDt2YXIgbD1lKGZ1bmN0aW9uKCl7YyhkLnNjcm9sbE9mZnNldCl9LGQudGhyb3R0bGV8fDEwMCksbT1mdW5jdGlvbigpe2EoZG9jdW1lbnQpLnJlYWR5KGwpfTtyZXR1cm4gaXx8KGYub24oXCJzY3JvbGxcIixtKSxmLm9uKFwicmVzaXplXCIsbSksaT0hMCksc2V0VGltZW91dChtLDApLGIub24oXCJzY3JvbGxTcHk6ZW50ZXJcIixmdW5jdGlvbigpe2o9YS5ncmVwKGosZnVuY3Rpb24oYSl7cmV0dXJuIDAhPWEuaGVpZ2h0KCl9KTt2YXIgYj1hKHRoaXMpO2pbMF0/KGEoJ2FbaHJlZj1cIiMnK2pbMF0uYXR0cihcImlkXCIpKydcIl0nKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKSxiLmRhdGEoXCJzY3JvbGxTcHk6aWRcIik8alswXS5kYXRhKFwic2Nyb2xsU3B5OmlkXCIpP2oudW5zaGlmdChhKHRoaXMpKTpqLnB1c2goYSh0aGlzKSkpOmoucHVzaChhKHRoaXMpKSxhKCdhW2hyZWY9XCIjJytqWzBdLmF0dHIoXCJpZFwiKSsnXCJdJykuYWRkQ2xhc3MoXCJhY3RpdmVcIil9KSxiLm9uKFwic2Nyb2xsU3B5OmV4aXRcIixmdW5jdGlvbigpe2lmKGo9YS5ncmVwKGosZnVuY3Rpb24oYSl7cmV0dXJuIDAhPWEuaGVpZ2h0KCl9KSxqWzBdKXthKCdhW2hyZWY9XCIjJytqWzBdLmF0dHIoXCJpZFwiKSsnXCJdJykucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7dmFyIGI9YSh0aGlzKTtqPWEuZ3JlcChqLGZ1bmN0aW9uKGEpe3JldHVybiBhLmF0dHIoXCJpZFwiKSE9Yi5hdHRyKFwiaWRcIil9KSxqWzBdJiZhKCdhW2hyZWY9XCIjJytqWzBdLmF0dHIoXCJpZFwiKSsnXCJdJykuYWRkQ2xhc3MoXCJhY3RpdmVcIil9fSksYn0sYS53aW5TaXplU3B5PWZ1bmN0aW9uKGIpe3JldHVybiBhLndpblNpemVTcHk9ZnVuY3Rpb24oKXtyZXR1cm4gZn0sYj1ifHx7dGhyb3R0bGU6MTAwfSxmLm9uKFwicmVzaXplXCIsZShkLGIudGhyb3R0bGV8fDEwMCkpfSxhLmZuLnNjcm9sbFNweT1mdW5jdGlvbihiKXtyZXR1cm4gYS5zY3JvbGxTcHkoYSh0aGlzKSxiKX19KGpRdWVyeSksZnVuY3Rpb24oYSl7YShkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXtmdW5jdGlvbiBiKGIpe3ZhciBjPWIuY3NzKFwiZm9udC1mYW1pbHlcIiksZD1iLmNzcyhcImZvbnQtc2l6ZVwiKSxmPWIuY3NzKFwibGluZS1oZWlnaHRcIik7ZCYmZS5jc3MoXCJmb250LXNpemVcIixkKSxjJiZlLmNzcyhcImZvbnQtZmFtaWx5XCIsYyksZiYmZS5jc3MoXCJsaW5lLWhlaWdodFwiLGYpLFwib2ZmXCI9PT1iLmF0dHIoXCJ3cmFwXCIpJiZlLmNzcyhcIm92ZXJmbG93LXdyYXBcIixcIm5vcm1hbFwiKS5jc3MoXCJ3aGl0ZS1zcGFjZVwiLFwicHJlXCIpLGUudGV4dChiLnZhbCgpK1wiXFxuXCIpO3ZhciBnPWUuaHRtbCgpLnJlcGxhY2UoL1xcbi9nLFwiPGJyPlwiKTtlLmh0bWwoZyksYi5pcyhcIjp2aXNpYmxlXCIpP2UuY3NzKFwid2lkdGhcIixiLndpZHRoKCkpOmUuY3NzKFwid2lkdGhcIixhKHdpbmRvdykud2lkdGgoKS8yKSxiLmNzcyhcImhlaWdodFwiLGUuaGVpZ2h0KCkpfU1hdGVyaWFsaXplLnVwZGF0ZVRleHRGaWVsZHM9ZnVuY3Rpb24oKXt2YXIgYj1cImlucHV0W3R5cGU9dGV4dF0sIGlucHV0W3R5cGU9cGFzc3dvcmRdLCBpbnB1dFt0eXBlPWVtYWlsXSwgaW5wdXRbdHlwZT11cmxdLCBpbnB1dFt0eXBlPXRlbF0sIGlucHV0W3R5cGU9bnVtYmVyXSwgaW5wdXRbdHlwZT1zZWFyY2hdLCB0ZXh0YXJlYVwiO2EoYikuZWFjaChmdW5jdGlvbihiLGMpe2EoYykudmFsKCkubGVuZ3RoPjB8fGMuYXV0b2ZvY3VzfHx2b2lkIDAhPT1hKHRoaXMpLmF0dHIoXCJwbGFjZWhvbGRlclwiKXx8YShjKVswXS52YWxpZGl0eS5iYWRJbnB1dD09PSEwP2EodGhpcykuc2libGluZ3MoXCJsYWJlbFwiKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTphKHRoaXMpLnNpYmxpbmdzKFwibGFiZWxcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIil9KX07dmFyIGM9XCJpbnB1dFt0eXBlPXRleHRdLCBpbnB1dFt0eXBlPXBhc3N3b3JkXSwgaW5wdXRbdHlwZT1lbWFpbF0sIGlucHV0W3R5cGU9dXJsXSwgaW5wdXRbdHlwZT10ZWxdLCBpbnB1dFt0eXBlPW51bWJlcl0sIGlucHV0W3R5cGU9c2VhcmNoXSwgdGV4dGFyZWFcIjthKGRvY3VtZW50KS5vbihcImNoYW5nZVwiLGMsZnVuY3Rpb24oKXsoMCE9PWEodGhpcykudmFsKCkubGVuZ3RofHx2b2lkIDAhPT1hKHRoaXMpLmF0dHIoXCJwbGFjZWhvbGRlclwiKSkmJmEodGhpcykuc2libGluZ3MoXCJsYWJlbFwiKS5hZGRDbGFzcyhcImFjdGl2ZVwiKSx2YWxpZGF0ZV9maWVsZChhKHRoaXMpKX0pLGEoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCl7TWF0ZXJpYWxpemUudXBkYXRlVGV4dEZpZWxkcygpfSksYShkb2N1bWVudCkub24oXCJyZXNldFwiLGZ1bmN0aW9uKGIpe3ZhciBkPWEoYi50YXJnZXQpO2QuaXMoXCJmb3JtXCIpJiYoZC5maW5kKGMpLnJlbW92ZUNsYXNzKFwidmFsaWRcIikucmVtb3ZlQ2xhc3MoXCJpbnZhbGlkXCIpLGQuZmluZChjKS5lYWNoKGZ1bmN0aW9uKCl7XCJcIj09PWEodGhpcykuYXR0cihcInZhbHVlXCIpJiZhKHRoaXMpLnNpYmxpbmdzKFwibGFiZWxcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIil9KSxkLmZpbmQoXCJzZWxlY3QuaW5pdGlhbGl6ZWRcIikuZWFjaChmdW5jdGlvbigpe3ZhciBhPWQuZmluZChcIm9wdGlvbltzZWxlY3RlZF1cIikudGV4dCgpO2Quc2libGluZ3MoXCJpbnB1dC5zZWxlY3QtZHJvcGRvd25cIikudmFsKGEpfSkpfSksYShkb2N1bWVudCkub24oXCJmb2N1c1wiLGMsZnVuY3Rpb24oKXthKHRoaXMpLnNpYmxpbmdzKFwibGFiZWwsIC5wcmVmaXhcIikuYWRkQ2xhc3MoXCJhY3RpdmVcIil9KSxhKGRvY3VtZW50KS5vbihcImJsdXJcIixjLGZ1bmN0aW9uKCl7dmFyIGI9YSh0aGlzKSxjPVwiLnByZWZpeFwiOzA9PT1iLnZhbCgpLmxlbmd0aCYmYlswXS52YWxpZGl0eS5iYWRJbnB1dCE9PSEwJiZ2b2lkIDA9PT1iLmF0dHIoXCJwbGFjZWhvbGRlclwiKSYmKGMrPVwiLCBsYWJlbFwiKSxiLnNpYmxpbmdzKGMpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpLHZhbGlkYXRlX2ZpZWxkKGIpfSksd2luZG93LnZhbGlkYXRlX2ZpZWxkPWZ1bmN0aW9uKGEpe3ZhciBiPXZvaWQgMCE9PWEuYXR0cihcImxlbmd0aFwiKSxjPXBhcnNlSW50KGEuYXR0cihcImxlbmd0aFwiKSksZD1hLnZhbCgpLmxlbmd0aDswPT09YS52YWwoKS5sZW5ndGgmJmFbMF0udmFsaWRpdHkuYmFkSW5wdXQ9PT0hMT9hLmhhc0NsYXNzKFwidmFsaWRhdGVcIikmJihhLnJlbW92ZUNsYXNzKFwidmFsaWRcIiksYS5yZW1vdmVDbGFzcyhcImludmFsaWRcIikpOmEuaGFzQ2xhc3MoXCJ2YWxpZGF0ZVwiKSYmKGEuaXMoXCI6dmFsaWRcIikmJmImJmM+PWR8fGEuaXMoXCI6dmFsaWRcIikmJiFiPyhhLnJlbW92ZUNsYXNzKFwiaW52YWxpZFwiKSxhLmFkZENsYXNzKFwidmFsaWRcIikpOihhLnJlbW92ZUNsYXNzKFwidmFsaWRcIiksYS5hZGRDbGFzcyhcImludmFsaWRcIikpKX07dmFyIGQ9XCJpbnB1dFt0eXBlPXJhZGlvXSwgaW5wdXRbdHlwZT1jaGVja2JveF1cIjthKGRvY3VtZW50KS5vbihcImtleXVwLnJhZGlvXCIsZCxmdW5jdGlvbihiKXtpZig5PT09Yi53aGljaCl7YSh0aGlzKS5hZGRDbGFzcyhcInRhYmJlZFwiKTt2YXIgYz1hKHRoaXMpO3JldHVybiB2b2lkIGMub25lKFwiYmx1clwiLGZ1bmN0aW9uKGIpe2EodGhpcykucmVtb3ZlQ2xhc3MoXCJ0YWJiZWRcIil9KX19KTt2YXIgZT1hKFwiLmhpZGRlbmRpdlwiKS5maXJzdCgpO2UubGVuZ3RofHwoZT1hKCc8ZGl2IGNsYXNzPVwiaGlkZGVuZGl2IGNvbW1vblwiPjwvZGl2PicpLGEoXCJib2R5XCIpLmFwcGVuZChlKSk7dmFyIGY9XCIubWF0ZXJpYWxpemUtdGV4dGFyZWFcIjthKGYpLmVhY2goZnVuY3Rpb24oKXt2YXIgYz1hKHRoaXMpO2MudmFsKCkubGVuZ3RoJiZiKGMpfSksYShcImJvZHlcIikub24oXCJrZXl1cCBrZXlkb3duIGF1dG9yZXNpemVcIixmLGZ1bmN0aW9uKCl7YihhKHRoaXMpKX0pLGEoZG9jdW1lbnQpLm9uKFwiY2hhbmdlXCIsJy5maWxlLWZpZWxkIGlucHV0W3R5cGU9XCJmaWxlXCJdJyxmdW5jdGlvbigpe2Zvcih2YXIgYj1hKHRoaXMpLmNsb3Nlc3QoXCIuZmlsZS1maWVsZFwiKSxjPWIuZmluZChcImlucHV0LmZpbGUtcGF0aFwiKSxkPWEodGhpcylbMF0uZmlsZXMsZT1bXSxmPTA7ZjxkLmxlbmd0aDtmKyspZS5wdXNoKGRbZl0ubmFtZSk7Yy52YWwoZS5qb2luKFwiLCBcIikpLGMudHJpZ2dlcihcImNoYW5nZVwiKX0pO3ZhciBnLGg9XCJpbnB1dFt0eXBlPXJhbmdlXVwiLGk9ITE7YShoKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGI9YSgnPHNwYW4gY2xhc3M9XCJ0aHVtYlwiPjxzcGFuIGNsYXNzPVwidmFsdWVcIj48L3NwYW4+PC9zcGFuPicpO2EodGhpcykuYWZ0ZXIoYil9KTt2YXIgaj1cIi5yYW5nZS1maWVsZFwiO2EoZG9jdW1lbnQpLm9uKFwiY2hhbmdlXCIsaCxmdW5jdGlvbihiKXt2YXIgYz1hKHRoaXMpLnNpYmxpbmdzKFwiLnRodW1iXCIpO2MuZmluZChcIi52YWx1ZVwiKS5odG1sKGEodGhpcykudmFsKCkpfSksYShkb2N1bWVudCkub24oXCJpbnB1dCBtb3VzZWRvd24gdG91Y2hzdGFydFwiLGgsZnVuY3Rpb24oYil7dmFyIGM9YSh0aGlzKS5zaWJsaW5ncyhcIi50aHVtYlwiKSxkPWEodGhpcykub3V0ZXJXaWR0aCgpO2MubGVuZ3RoPD0wJiYoYz1hKCc8c3BhbiBjbGFzcz1cInRodW1iXCI+PHNwYW4gY2xhc3M9XCJ2YWx1ZVwiPjwvc3Bhbj48L3NwYW4+JyksYSh0aGlzKS5hZnRlcihjKSksYy5maW5kKFwiLnZhbHVlXCIpLmh0bWwoYSh0aGlzKS52YWwoKSksaT0hMCxhKHRoaXMpLmFkZENsYXNzKFwiYWN0aXZlXCIpLGMuaGFzQ2xhc3MoXCJhY3RpdmVcIil8fGMudmVsb2NpdHkoe2hlaWdodDpcIjMwcHhcIix3aWR0aDpcIjMwcHhcIix0b3A6XCItMjBweFwiLG1hcmdpbkxlZnQ6XCItMTVweFwifSx7ZHVyYXRpb246MzAwLGVhc2luZzpcImVhc2VPdXRFeHBvXCJ9KSxcImlucHV0XCIhPT1iLnR5cGUmJihnPXZvaWQgMD09PWIucGFnZVh8fG51bGw9PT1iLnBhZ2VYP2Iub3JpZ2luYWxFdmVudC50b3VjaGVzWzBdLnBhZ2VYLWEodGhpcykub2Zmc2V0KCkubGVmdDpiLnBhZ2VYLWEodGhpcykub2Zmc2V0KCkubGVmdCwwPmc/Zz0wOmc+ZCYmKGc9ZCksYy5hZGRDbGFzcyhcImFjdGl2ZVwiKS5jc3MoXCJsZWZ0XCIsZykpLGMuZmluZChcIi52YWx1ZVwiKS5odG1sKGEodGhpcykudmFsKCkpfSksYShkb2N1bWVudCkub24oXCJtb3VzZXVwIHRvdWNoZW5kXCIsaixmdW5jdGlvbigpe2k9ITEsYSh0aGlzKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKX0pLGEoZG9jdW1lbnQpLm9uKFwibW91c2Vtb3ZlIHRvdWNobW92ZVwiLGosZnVuY3Rpb24oYil7dmFyIGMsZD1hKHRoaXMpLmNoaWxkcmVuKFwiLnRodW1iXCIpO2lmKGkpe2QuaGFzQ2xhc3MoXCJhY3RpdmVcIil8fGQudmVsb2NpdHkoe2hlaWdodDpcIjMwcHhcIix3aWR0aDpcIjMwcHhcIix0b3A6XCItMjBweFwiLG1hcmdpbkxlZnQ6XCItMTVweFwifSx7ZHVyYXRpb246MzAwLGVhc2luZzpcImVhc2VPdXRFeHBvXCJ9KSxjPXZvaWQgMD09PWIucGFnZVh8fG51bGw9PT1iLnBhZ2VYP2Iub3JpZ2luYWxFdmVudC50b3VjaGVzWzBdLnBhZ2VYLWEodGhpcykub2Zmc2V0KCkubGVmdDpiLnBhZ2VYLWEodGhpcykub2Zmc2V0KCkubGVmdDt2YXIgZT1hKHRoaXMpLm91dGVyV2lkdGgoKTswPmM/Yz0wOmM+ZSYmKGM9ZSksZC5hZGRDbGFzcyhcImFjdGl2ZVwiKS5jc3MoXCJsZWZ0XCIsYyksZC5maW5kKFwiLnZhbHVlXCIpLmh0bWwoZC5zaWJsaW5ncyhoKS52YWwoKSl9fSksYShkb2N1bWVudCkub24oXCJtb3VzZW91dCB0b3VjaGxlYXZlXCIsaixmdW5jdGlvbigpe2lmKCFpKXt2YXIgYj1hKHRoaXMpLmNoaWxkcmVuKFwiLnRodW1iXCIpO2IuaGFzQ2xhc3MoXCJhY3RpdmVcIikmJmIudmVsb2NpdHkoe2hlaWdodDpcIjBcIix3aWR0aDpcIjBcIix0b3A6XCIxMHB4XCIsbWFyZ2luTGVmdDpcIi02cHhcIn0se2R1cmF0aW9uOjEwMH0pLGIucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIil9fSksYS5mbi5hdXRvY29tcGxldGU9ZnVuY3Rpb24oYil7dmFyIGM9e2RhdGE6e319O3JldHVybiBiPWEuZXh0ZW5kKGMsYiksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGM9YSh0aGlzKSxkPWIuZGF0YSxlPWMuY2xvc2VzdChcIi5pbnB1dC1maWVsZFwiKTtpZighYS5pc0VtcHR5T2JqZWN0KGQpKXt2YXIgZj1hKCc8dWwgY2xhc3M9XCJhdXRvY29tcGxldGUtY29udGVudCBkcm9wZG93bi1jb250ZW50XCI+PC91bD4nKTtlLmxlbmd0aD9lLmFwcGVuZChmKTpjLmFmdGVyKGYpO3ZhciBnPWZ1bmN0aW9uKGEsYil7dmFyIGM9Yi5maW5kKFwiaW1nXCIpLGQ9Yi50ZXh0KCkudG9Mb3dlckNhc2UoKS5pbmRleE9mKFwiXCIrYS50b0xvd2VyQ2FzZSgpKSxlPWQrYS5sZW5ndGgtMSxmPWIudGV4dCgpLnNsaWNlKDAsZCksZz1iLnRleHQoKS5zbGljZShkLGUrMSksaD1iLnRleHQoKS5zbGljZShlKzEpO2IuaHRtbChcIjxzcGFuPlwiK2YrXCI8c3BhbiBjbGFzcz0naGlnaGxpZ2h0Jz5cIitnK1wiPC9zcGFuPlwiK2grXCI8L3NwYW4+XCIpLGMubGVuZ3RoJiZiLnByZXBlbmQoYyl9O2Mub24oXCJrZXl1cFwiLGZ1bmN0aW9uKGIpe2lmKDEzPT09Yi53aGljaClyZXR1cm4gdm9pZCBmLmZpbmQoXCJsaVwiKS5maXJzdCgpLmNsaWNrKCk7dmFyIGU9Yy52YWwoKS50b0xvd2VyQ2FzZSgpO2lmKGYuZW1wdHkoKSxcIlwiIT09ZSlmb3IodmFyIGggaW4gZClpZihkLmhhc093blByb3BlcnR5KGgpJiYtMSE9PWgudG9Mb3dlckNhc2UoKS5pbmRleE9mKGUpJiZoLnRvTG93ZXJDYXNlKCkhPT1lKXt2YXIgaT1hKFwiPGxpPjwvbGk+XCIpO2RbaF0/aS5hcHBlbmQoJzxpbWcgc3JjPVwiJytkW2hdKydcIiBjbGFzcz1cInJpZ2h0IGNpcmNsZVwiPjxzcGFuPicraCtcIjwvc3Bhbj5cIik6aS5hcHBlbmQoXCI8c3Bhbj5cIitoK1wiPC9zcGFuPlwiKSxmLmFwcGVuZChpKSxnKGUsaSl9fSksZi5vbihcImNsaWNrXCIsXCJsaVwiLGZ1bmN0aW9uKCl7Yy52YWwoYSh0aGlzKS50ZXh0KCkudHJpbSgpKSxjLnRyaWdnZXIoXCJjaGFuZ2VcIiksZi5lbXB0eSgpfSl9fSl9fSksYS5mbi5tYXRlcmlhbF9zZWxlY3Q9ZnVuY3Rpb24oYil7ZnVuY3Rpb24gYyhhLGIsYyl7dmFyIGU9YS5pbmRleE9mKGIpLGY9LTE9PT1lO3JldHVybiBmP2EucHVzaChiKTphLnNwbGljZShlLDEpLGMuc2libGluZ3MoXCJ1bC5kcm9wZG93bi1jb250ZW50XCIpLmZpbmQoXCJsaVwiKS5lcShiKS50b2dnbGVDbGFzcyhcImFjdGl2ZVwiKSxjLmZpbmQoXCJvcHRpb25cIikuZXEoYikucHJvcChcInNlbGVjdGVkXCIsZiksZChhLGMpLGZ9ZnVuY3Rpb24gZChhLGIpe2Zvcih2YXIgYz1cIlwiLGQ9MCxlPWEubGVuZ3RoO2U+ZDtkKyspe3ZhciBmPWIuZmluZChcIm9wdGlvblwiKS5lcShhW2RdKS50ZXh0KCk7Yys9MD09PWQ/ZjpcIiwgXCIrZn1cIlwiPT09YyYmKGM9Yi5maW5kKFwib3B0aW9uOmRpc2FibGVkXCIpLmVxKDApLnRleHQoKSksYi5zaWJsaW5ncyhcImlucHV0LnNlbGVjdC1kcm9wZG93blwiKS52YWwoYyl9YSh0aGlzKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGQ9YSh0aGlzKTtpZighZC5oYXNDbGFzcyhcImJyb3dzZXItZGVmYXVsdFwiKSl7dmFyIGU9ZC5hdHRyKFwibXVsdGlwbGVcIik/ITA6ITEsZj1kLmRhdGEoXCJzZWxlY3QtaWRcIik7aWYoZiYmKGQucGFyZW50KCkuZmluZChcInNwYW4uY2FyZXRcIikucmVtb3ZlKCksZC5wYXJlbnQoKS5maW5kKFwiaW5wdXRcIikucmVtb3ZlKCksZC51bndyYXAoKSxhKFwidWwjc2VsZWN0LW9wdGlvbnMtXCIrZikucmVtb3ZlKCkpLFwiZGVzdHJveVwiPT09YilyZXR1cm4gdm9pZCBkLmRhdGEoXCJzZWxlY3QtaWRcIixudWxsKS5yZW1vdmVDbGFzcyhcImluaXRpYWxpemVkXCIpO3ZhciBnPU1hdGVyaWFsaXplLmd1aWQoKTtkLmRhdGEoXCJzZWxlY3QtaWRcIixnKTt2YXIgaD1hKCc8ZGl2IGNsYXNzPVwic2VsZWN0LXdyYXBwZXJcIj48L2Rpdj4nKTtoLmFkZENsYXNzKGQuYXR0cihcImNsYXNzXCIpKTt2YXIgaT1hKCc8dWwgaWQ9XCJzZWxlY3Qtb3B0aW9ucy0nK2crJ1wiIGNsYXNzPVwiZHJvcGRvd24tY29udGVudCBzZWxlY3QtZHJvcGRvd24gJysoZT9cIm11bHRpcGxlLXNlbGVjdC1kcm9wZG93blwiOlwiXCIpKydcIj48L3VsPicpLGo9ZC5jaGlsZHJlbihcIm9wdGlvbiwgb3B0Z3JvdXBcIiksaz1bXSxsPSExLG09ZC5maW5kKFwib3B0aW9uOnNlbGVjdGVkXCIpLmh0bWwoKXx8ZC5maW5kKFwib3B0aW9uOmZpcnN0XCIpLmh0bWwoKXx8XCJcIixuPWZ1bmN0aW9uKGIsYyxkKXt2YXIgZT1jLmlzKFwiOmRpc2FibGVkXCIpP1wiZGlzYWJsZWQgXCI6XCJcIixmPVwib3B0Z3JvdXAtb3B0aW9uXCI9PT1kP1wib3B0Z3JvdXAtb3B0aW9uIFwiOlwiXCIsZz1jLmRhdGEoXCJpY29uXCIpLGg9Yy5hdHRyKFwiY2xhc3NcIik7aWYoZyl7dmFyIGo9XCJcIjtyZXR1cm4gaCYmKGo9JyBjbGFzcz1cIicraCsnXCInKSxcIm11bHRpcGxlXCI9PT1kP2kuYXBwZW5kKGEoJzxsaSBjbGFzcz1cIicrZSsnXCI+PGltZyBhbHQ9XCJcIiBzcmM9XCInK2crJ1wiJytqKyc+PHNwYW4+PGlucHV0IHR5cGU9XCJjaGVja2JveFwiJytlK1wiLz48bGFiZWw+PC9sYWJlbD5cIitjLmh0bWwoKStcIjwvc3Bhbj48L2xpPlwiKSk6aS5hcHBlbmQoYSgnPGxpIGNsYXNzPVwiJytlK2YrJ1wiPjxpbWcgYWx0PVwiXCIgc3JjPVwiJytnKydcIicraitcIj48c3Bhbj5cIitjLmh0bWwoKStcIjwvc3Bhbj48L2xpPlwiKSksITB9XCJtdWx0aXBsZVwiPT09ZD9pLmFwcGVuZChhKCc8bGkgY2xhc3M9XCInK2UrJ1wiPjxzcGFuPjxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIicrZStcIi8+PGxhYmVsPjwvbGFiZWw+XCIrYy5odG1sKCkrXCI8L3NwYW4+PC9saT5cIikpOmkuYXBwZW5kKGEoJzxsaSBjbGFzcz1cIicrZStmKydcIj48c3Bhbj4nK2MuaHRtbCgpK1wiPC9zcGFuPjwvbGk+XCIpKX07ai5sZW5ndGgmJmouZWFjaChmdW5jdGlvbigpe2lmKGEodGhpcykuaXMoXCJvcHRpb25cIikpZT9uKGQsYSh0aGlzKSxcIm11bHRpcGxlXCIpOm4oZCxhKHRoaXMpKTtlbHNlIGlmKGEodGhpcykuaXMoXCJvcHRncm91cFwiKSl7dmFyIGI9YSh0aGlzKS5jaGlsZHJlbihcIm9wdGlvblwiKTtpLmFwcGVuZChhKCc8bGkgY2xhc3M9XCJvcHRncm91cFwiPjxzcGFuPicrYSh0aGlzKS5hdHRyKFwibGFiZWxcIikrXCI8L3NwYW4+PC9saT5cIikpLGIuZWFjaChmdW5jdGlvbigpe24oZCxhKHRoaXMpLFwib3B0Z3JvdXAtb3B0aW9uXCIpfSl9fSksaS5maW5kKFwibGk6bm90KC5vcHRncm91cClcIikuZWFjaChmdW5jdGlvbihmKXthKHRoaXMpLmNsaWNrKGZ1bmN0aW9uKGcpe2lmKCFhKHRoaXMpLmhhc0NsYXNzKFwiZGlzYWJsZWRcIikmJiFhKHRoaXMpLmhhc0NsYXNzKFwib3B0Z3JvdXBcIikpe1xudmFyIGg9ITA7ZT8oYSgnaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJyx0aGlzKS5wcm9wKFwiY2hlY2tlZFwiLGZ1bmN0aW9uKGEsYil7cmV0dXJuIWJ9KSxoPWMoayxhKHRoaXMpLmluZGV4KCksZCkscS50cmlnZ2VyKFwiZm9jdXNcIikpOihpLmZpbmQoXCJsaVwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKSxhKHRoaXMpLnRvZ2dsZUNsYXNzKFwiYWN0aXZlXCIpLHEudmFsKGEodGhpcykudGV4dCgpKSkscihpLGEodGhpcykpLGQuZmluZChcIm9wdGlvblwiKS5lcShmKS5wcm9wKFwic2VsZWN0ZWRcIixoKSxkLnRyaWdnZXIoXCJjaGFuZ2VcIiksXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGImJmIoKX1nLnN0b3BQcm9wYWdhdGlvbigpfSl9KSxkLndyYXAoaCk7dmFyIG89YSgnPHNwYW4gY2xhc3M9XCJjYXJldFwiPiYjOTY2MDs8L3NwYW4+Jyk7ZC5pcyhcIjpkaXNhYmxlZFwiKSYmby5hZGRDbGFzcyhcImRpc2FibGVkXCIpO3ZhciBwPW0ucmVwbGFjZSgvXCIvZyxcIiZxdW90O1wiKSxxPWEoJzxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwic2VsZWN0LWRyb3Bkb3duXCIgcmVhZG9ubHk9XCJ0cnVlXCIgJysoZC5pcyhcIjpkaXNhYmxlZFwiKT9cImRpc2FibGVkXCI6XCJcIikrJyBkYXRhLWFjdGl2YXRlcz1cInNlbGVjdC1vcHRpb25zLScrZysnXCIgdmFsdWU9XCInK3ArJ1wiLz4nKTtkLmJlZm9yZShxKSxxLmJlZm9yZShvKSxxLmFmdGVyKGkpLGQuaXMoXCI6ZGlzYWJsZWRcIil8fHEuZHJvcGRvd24oe2hvdmVyOiExLGNsb3NlT25DbGljazohMX0pLGQuYXR0cihcInRhYmluZGV4XCIpJiZhKHFbMF0pLmF0dHIoXCJ0YWJpbmRleFwiLGQuYXR0cihcInRhYmluZGV4XCIpKSxkLmFkZENsYXNzKFwiaW5pdGlhbGl6ZWRcIikscS5vbih7Zm9jdXM6ZnVuY3Rpb24oKXtpZihhKFwidWwuc2VsZWN0LWRyb3Bkb3duXCIpLm5vdChpWzBdKS5pcyhcIjp2aXNpYmxlXCIpJiZhKFwiaW5wdXQuc2VsZWN0LWRyb3Bkb3duXCIpLnRyaWdnZXIoXCJjbG9zZVwiKSwhaS5pcyhcIjp2aXNpYmxlXCIpKXthKHRoaXMpLnRyaWdnZXIoXCJvcGVuXCIsW1wiZm9jdXNcIl0pO3ZhciBiPWEodGhpcykudmFsKCksYz1pLmZpbmQoXCJsaVwiKS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4gYSh0aGlzKS50ZXh0KCkudG9Mb3dlckNhc2UoKT09PWIudG9Mb3dlckNhc2UoKX0pWzBdO3IoaSxjKX19LGNsaWNrOmZ1bmN0aW9uKGEpe2Euc3RvcFByb3BhZ2F0aW9uKCl9fSkscS5vbihcImJsdXJcIixmdW5jdGlvbigpe2V8fGEodGhpcykudHJpZ2dlcihcImNsb3NlXCIpLGkuZmluZChcImxpLnNlbGVjdGVkXCIpLnJlbW92ZUNsYXNzKFwic2VsZWN0ZWRcIil9KSxpLmhvdmVyKGZ1bmN0aW9uKCl7bD0hMH0sZnVuY3Rpb24oKXtsPSExfSksYSh3aW5kb3cpLm9uKHtjbGljazpmdW5jdGlvbigpe2UmJihsfHxxLnRyaWdnZXIoXCJjbG9zZVwiKSl9fSksZSYmZC5maW5kKFwib3B0aW9uOnNlbGVjdGVkOm5vdCg6ZGlzYWJsZWQpXCIpLmVhY2goZnVuY3Rpb24oKXt2YXIgYj1hKHRoaXMpLmluZGV4KCk7YyhrLGIsZCksaS5maW5kKFwibGlcIikuZXEoYikuZmluZChcIjpjaGVja2JveFwiKS5wcm9wKFwiY2hlY2tlZFwiLCEwKX0pO3ZhciByPWZ1bmN0aW9uKGIsYyl7aWYoYyl7Yi5maW5kKFwibGkuc2VsZWN0ZWRcIikucmVtb3ZlQ2xhc3MoXCJzZWxlY3RlZFwiKTt2YXIgZD1hKGMpO2QuYWRkQ2xhc3MoXCJzZWxlY3RlZFwiKSxpLnNjcm9sbFRvKGQpfX0scz1bXSx0PWZ1bmN0aW9uKGIpe2lmKDk9PWIud2hpY2gpcmV0dXJuIHZvaWQgcS50cmlnZ2VyKFwiY2xvc2VcIik7aWYoNDA9PWIud2hpY2gmJiFpLmlzKFwiOnZpc2libGVcIikpcmV0dXJuIHZvaWQgcS50cmlnZ2VyKFwib3BlblwiKTtpZigxMyE9Yi53aGljaHx8aS5pcyhcIjp2aXNpYmxlXCIpKXtiLnByZXZlbnREZWZhdWx0KCk7dmFyIGM9U3RyaW5nLmZyb21DaGFyQ29kZShiLndoaWNoKS50b0xvd2VyQ2FzZSgpLGQ9WzksMTMsMjcsMzgsNDBdO2lmKGMmJi0xPT09ZC5pbmRleE9mKGIud2hpY2gpKXtzLnB1c2goYyk7dmFyIGY9cy5qb2luKFwiXCIpLGc9aS5maW5kKFwibGlcIikuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuIDA9PT1hKHRoaXMpLnRleHQoKS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoZil9KVswXTtnJiZyKGksZyl9aWYoMTM9PWIud2hpY2gpe3ZhciBoPWkuZmluZChcImxpLnNlbGVjdGVkOm5vdCguZGlzYWJsZWQpXCIpWzBdO2gmJihhKGgpLnRyaWdnZXIoXCJjbGlja1wiKSxlfHxxLnRyaWdnZXIoXCJjbG9zZVwiKSl9NDA9PWIud2hpY2gmJihnPWkuZmluZChcImxpLnNlbGVjdGVkXCIpLmxlbmd0aD9pLmZpbmQoXCJsaS5zZWxlY3RlZFwiKS5uZXh0KFwibGk6bm90KC5kaXNhYmxlZClcIilbMF06aS5maW5kKFwibGk6bm90KC5kaXNhYmxlZClcIilbMF0scihpLGcpKSwyNz09Yi53aGljaCYmcS50cmlnZ2VyKFwiY2xvc2VcIiksMzg9PWIud2hpY2gmJihnPWkuZmluZChcImxpLnNlbGVjdGVkXCIpLnByZXYoXCJsaTpub3QoLmRpc2FibGVkKVwiKVswXSxnJiZyKGksZykpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtzPVtdfSwxZTMpfX07cS5vbihcImtleWRvd25cIix0KX19KX19KGpRdWVyeSksZnVuY3Rpb24oYSl7dmFyIGI9e2luaXQ6ZnVuY3Rpb24oYil7dmFyIGM9e2luZGljYXRvcnM6ITAsaGVpZ2h0OjQwMCx0cmFuc2l0aW9uOjUwMCxpbnRlcnZhbDo2ZTN9O3JldHVybiBiPWEuZXh0ZW5kKGMsYiksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYyhhLGIpe2EuaGFzQ2xhc3MoXCJjZW50ZXItYWxpZ25cIik/YS52ZWxvY2l0eSh7b3BhY2l0eTowLHRyYW5zbGF0ZVk6LTEwMH0se2R1cmF0aW9uOmIscXVldWU6ITF9KTphLmhhc0NsYXNzKFwicmlnaHQtYWxpZ25cIik/YS52ZWxvY2l0eSh7b3BhY2l0eTowLHRyYW5zbGF0ZVg6MTAwfSx7ZHVyYXRpb246YixxdWV1ZTohMX0pOmEuaGFzQ2xhc3MoXCJsZWZ0LWFsaWduXCIpJiZhLnZlbG9jaXR5KHtvcGFjaXR5OjAsdHJhbnNsYXRlWDotMTAwfSx7ZHVyYXRpb246YixxdWV1ZTohMX0pfWZ1bmN0aW9uIGQoYSl7YT49ai5sZW5ndGg/YT0wOjA+YSYmKGE9ai5sZW5ndGgtMSksaz1pLmZpbmQoXCIuYWN0aXZlXCIpLmluZGV4KCksayE9YSYmKGU9ai5lcShrKSwkY2FwdGlvbj1lLmZpbmQoXCIuY2FwdGlvblwiKSxlLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpLGUudmVsb2NpdHkoe29wYWNpdHk6MH0se2R1cmF0aW9uOmIudHJhbnNpdGlvbixxdWV1ZTohMSxlYXNpbmc6XCJlYXNlT3V0UXVhZFwiLGNvbXBsZXRlOmZ1bmN0aW9uKCl7ai5ub3QoXCIuYWN0aXZlXCIpLnZlbG9jaXR5KHtvcGFjaXR5OjAsdHJhbnNsYXRlWDowLHRyYW5zbGF0ZVk6MH0se2R1cmF0aW9uOjAscXVldWU6ITF9KX19KSxjKCRjYXB0aW9uLGIudHJhbnNpdGlvbiksYi5pbmRpY2F0b3JzJiZmLmVxKGspLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpLGouZXEoYSkudmVsb2NpdHkoe29wYWNpdHk6MX0se2R1cmF0aW9uOmIudHJhbnNpdGlvbixxdWV1ZTohMSxlYXNpbmc6XCJlYXNlT3V0UXVhZFwifSksai5lcShhKS5maW5kKFwiLmNhcHRpb25cIikudmVsb2NpdHkoe29wYWNpdHk6MSx0cmFuc2xhdGVYOjAsdHJhbnNsYXRlWTowfSx7ZHVyYXRpb246Yi50cmFuc2l0aW9uLGRlbGF5OmIudHJhbnNpdGlvbixxdWV1ZTohMSxlYXNpbmc6XCJlYXNlT3V0UXVhZFwifSksai5lcShhKS5hZGRDbGFzcyhcImFjdGl2ZVwiKSxiLmluZGljYXRvcnMmJmYuZXEoYSkuYWRkQ2xhc3MoXCJhY3RpdmVcIikpfXZhciBlLGYsZyxoPWEodGhpcyksaT1oLmZpbmQoXCJ1bC5zbGlkZXNcIikuZmlyc3QoKSxqPWkuZmluZChcIj4gbGlcIiksaz1pLmZpbmQoXCIuYWN0aXZlXCIpLmluZGV4KCk7LTEhPWsmJihlPWouZXEoaykpLGguaGFzQ2xhc3MoXCJmdWxsc2NyZWVuXCIpfHwoYi5pbmRpY2F0b3JzP2guaGVpZ2h0KGIuaGVpZ2h0KzQwKTpoLmhlaWdodChiLmhlaWdodCksaS5oZWlnaHQoYi5oZWlnaHQpKSxqLmZpbmQoXCIuY2FwdGlvblwiKS5lYWNoKGZ1bmN0aW9uKCl7YyhhKHRoaXMpLDApfSksai5maW5kKFwiaW1nXCIpLmVhY2goZnVuY3Rpb24oKXt2YXIgYj1cImRhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEFRQUJBSUFCQVAvLy93QUFBQ0g1QkFFS0FBRUFMQUFBQUFBQkFBRUFBQUlDVEFFQU93PT1cIjthKHRoaXMpLmF0dHIoXCJzcmNcIikhPT1iJiYoYSh0aGlzKS5jc3MoXCJiYWNrZ3JvdW5kLWltYWdlXCIsXCJ1cmwoXCIrYSh0aGlzKS5hdHRyKFwic3JjXCIpK1wiKVwiKSxhKHRoaXMpLmF0dHIoXCJzcmNcIixiKSl9KSxiLmluZGljYXRvcnMmJihmPWEoJzx1bCBjbGFzcz1cImluZGljYXRvcnNcIj48L3VsPicpLGouZWFjaChmdW5jdGlvbihjKXt2YXIgZT1hKCc8bGkgY2xhc3M9XCJpbmRpY2F0b3ItaXRlbVwiPjwvbGk+Jyk7ZS5jbGljayhmdW5jdGlvbigpe3ZhciBjPWkucGFyZW50KCksZT1jLmZpbmQoYSh0aGlzKSkuaW5kZXgoKTtkKGUpLGNsZWFySW50ZXJ2YWwoZyksZz1zZXRJbnRlcnZhbChmdW5jdGlvbigpe2s9aS5maW5kKFwiLmFjdGl2ZVwiKS5pbmRleCgpLGoubGVuZ3RoPT1rKzE/az0wOmsrPTEsZChrKX0sYi50cmFuc2l0aW9uK2IuaW50ZXJ2YWwpfSksZi5hcHBlbmQoZSl9KSxoLmFwcGVuZChmKSxmPWguZmluZChcInVsLmluZGljYXRvcnNcIikuZmluZChcImxpLmluZGljYXRvci1pdGVtXCIpKSxlP2Uuc2hvdygpOihqLmZpcnN0KCkuYWRkQ2xhc3MoXCJhY3RpdmVcIikudmVsb2NpdHkoe29wYWNpdHk6MX0se2R1cmF0aW9uOmIudHJhbnNpdGlvbixxdWV1ZTohMSxlYXNpbmc6XCJlYXNlT3V0UXVhZFwifSksaz0wLGU9ai5lcShrKSxiLmluZGljYXRvcnMmJmYuZXEoaykuYWRkQ2xhc3MoXCJhY3RpdmVcIikpLGUuZmluZChcImltZ1wiKS5lYWNoKGZ1bmN0aW9uKCl7ZS5maW5kKFwiLmNhcHRpb25cIikudmVsb2NpdHkoe29wYWNpdHk6MSx0cmFuc2xhdGVYOjAsdHJhbnNsYXRlWTowfSx7ZHVyYXRpb246Yi50cmFuc2l0aW9uLHF1ZXVlOiExLGVhc2luZzpcImVhc2VPdXRRdWFkXCJ9KX0pLGc9c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtrPWkuZmluZChcIi5hY3RpdmVcIikuaW5kZXgoKSxkKGsrMSl9LGIudHJhbnNpdGlvbitiLmludGVydmFsKTt2YXIgbD0hMSxtPSExLG49ITE7aC5oYW1tZXIoe3ByZXZlbnRfZGVmYXVsdDohMX0pLmJpbmQoXCJwYW5cIixmdW5jdGlvbihhKXtpZihcInRvdWNoXCI9PT1hLmdlc3R1cmUucG9pbnRlclR5cGUpe2NsZWFySW50ZXJ2YWwoZyk7dmFyIGI9YS5nZXN0dXJlLmRpcmVjdGlvbixjPWEuZ2VzdHVyZS5kZWx0YVgsZD1hLmdlc3R1cmUudmVsb2NpdHlYOyRjdXJyX3NsaWRlPWkuZmluZChcIi5hY3RpdmVcIiksJGN1cnJfc2xpZGUudmVsb2NpdHkoe3RyYW5zbGF0ZVg6Y30se2R1cmF0aW9uOjUwLHF1ZXVlOiExLGVhc2luZzpcImVhc2VPdXRRdWFkXCJ9KSw0PT09YiYmKGM+aC5pbm5lcldpZHRoKCkvMnx8LS42NT5kKT9uPSEwOjI9PT1iJiYoYzwtMSpoLmlubmVyV2lkdGgoKS8yfHxkPi42NSkmJihtPSEwKTt2YXIgZTttJiYoZT0kY3Vycl9zbGlkZS5uZXh0KCksMD09PWUubGVuZ3RoJiYoZT1qLmZpcnN0KCkpLGUudmVsb2NpdHkoe29wYWNpdHk6MX0se2R1cmF0aW9uOjMwMCxxdWV1ZTohMSxlYXNpbmc6XCJlYXNlT3V0UXVhZFwifSkpLG4mJihlPSRjdXJyX3NsaWRlLnByZXYoKSwwPT09ZS5sZW5ndGgmJihlPWoubGFzdCgpKSxlLnZlbG9jaXR5KHtvcGFjaXR5OjF9LHtkdXJhdGlvbjozMDAscXVldWU6ITEsZWFzaW5nOlwiZWFzZU91dFF1YWRcIn0pKX19KS5iaW5kKFwicGFuZW5kXCIsZnVuY3Rpb24oYSl7XCJ0b3VjaFwiPT09YS5nZXN0dXJlLnBvaW50ZXJUeXBlJiYoJGN1cnJfc2xpZGU9aS5maW5kKFwiLmFjdGl2ZVwiKSxsPSExLGN1cnJfaW5kZXg9aS5maW5kKFwiLmFjdGl2ZVwiKS5pbmRleCgpLCFuJiYhbXx8ai5sZW5ndGg8PTE/JGN1cnJfc2xpZGUudmVsb2NpdHkoe3RyYW5zbGF0ZVg6MH0se2R1cmF0aW9uOjMwMCxxdWV1ZTohMSxlYXNpbmc6XCJlYXNlT3V0UXVhZFwifSk6bT8oZChjdXJyX2luZGV4KzEpLCRjdXJyX3NsaWRlLnZlbG9jaXR5KHt0cmFuc2xhdGVYOi0xKmguaW5uZXJXaWR0aCgpfSx7ZHVyYXRpb246MzAwLHF1ZXVlOiExLGVhc2luZzpcImVhc2VPdXRRdWFkXCIsY29tcGxldGU6ZnVuY3Rpb24oKXskY3Vycl9zbGlkZS52ZWxvY2l0eSh7b3BhY2l0eTowLHRyYW5zbGF0ZVg6MH0se2R1cmF0aW9uOjAscXVldWU6ITF9KX19KSk6biYmKGQoY3Vycl9pbmRleC0xKSwkY3Vycl9zbGlkZS52ZWxvY2l0eSh7dHJhbnNsYXRlWDpoLmlubmVyV2lkdGgoKX0se2R1cmF0aW9uOjMwMCxxdWV1ZTohMSxlYXNpbmc6XCJlYXNlT3V0UXVhZFwiLGNvbXBsZXRlOmZ1bmN0aW9uKCl7JGN1cnJfc2xpZGUudmVsb2NpdHkoe29wYWNpdHk6MCx0cmFuc2xhdGVYOjB9LHtkdXJhdGlvbjowLHF1ZXVlOiExfSl9fSkpLG09ITEsbj0hMSxjbGVhckludGVydmFsKGcpLGc9c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtrPWkuZmluZChcIi5hY3RpdmVcIikuaW5kZXgoKSxqLmxlbmd0aD09aysxP2s9MDprKz0xLGQoayl9LGIudHJhbnNpdGlvbitiLmludGVydmFsKSl9KSxoLm9uKFwic2xpZGVyUGF1c2VcIixmdW5jdGlvbigpe2NsZWFySW50ZXJ2YWwoZyl9KSxoLm9uKFwic2xpZGVyU3RhcnRcIixmdW5jdGlvbigpe2NsZWFySW50ZXJ2YWwoZyksZz1zZXRJbnRlcnZhbChmdW5jdGlvbigpe2s9aS5maW5kKFwiLmFjdGl2ZVwiKS5pbmRleCgpLGoubGVuZ3RoPT1rKzE/az0wOmsrPTEsZChrKX0sYi50cmFuc2l0aW9uK2IuaW50ZXJ2YWwpfSksaC5vbihcInNsaWRlck5leHRcIixmdW5jdGlvbigpe2s9aS5maW5kKFwiLmFjdGl2ZVwiKS5pbmRleCgpLGQoaysxKX0pLGgub24oXCJzbGlkZXJQcmV2XCIsZnVuY3Rpb24oKXtrPWkuZmluZChcIi5hY3RpdmVcIikuaW5kZXgoKSxkKGstMSl9KX0pfSxwYXVzZTpmdW5jdGlvbigpe2EodGhpcykudHJpZ2dlcihcInNsaWRlclBhdXNlXCIpfSxzdGFydDpmdW5jdGlvbigpe2EodGhpcykudHJpZ2dlcihcInNsaWRlclN0YXJ0XCIpfSxuZXh0OmZ1bmN0aW9uKCl7YSh0aGlzKS50cmlnZ2VyKFwic2xpZGVyTmV4dFwiKX0scHJldjpmdW5jdGlvbigpe2EodGhpcykudHJpZ2dlcihcInNsaWRlclByZXZcIil9fTthLmZuLnNsaWRlcj1mdW5jdGlvbihjKXtyZXR1cm4gYltjXT9iW2NdLmFwcGx5KHRoaXMsQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpKTpcIm9iamVjdFwiIT10eXBlb2YgYyYmYz92b2lkIGEuZXJyb3IoXCJNZXRob2QgXCIrYytcIiBkb2VzIG5vdCBleGlzdCBvbiBqUXVlcnkudG9vbHRpcFwiKTpiLmluaXQuYXBwbHkodGhpcyxhcmd1bWVudHMpfX0oalF1ZXJ5KSxmdW5jdGlvbihhKXthKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe2EoZG9jdW1lbnQpLm9uKFwiY2xpY2suY2FyZFwiLFwiLmNhcmRcIixmdW5jdGlvbihiKXthKHRoaXMpLmZpbmQoXCI+IC5jYXJkLXJldmVhbFwiKS5sZW5ndGgmJihhKGIudGFyZ2V0KS5pcyhhKFwiLmNhcmQtcmV2ZWFsIC5jYXJkLXRpdGxlXCIpKXx8YShiLnRhcmdldCkuaXMoYShcIi5jYXJkLXJldmVhbCAuY2FyZC10aXRsZSBpXCIpKT9hKHRoaXMpLmZpbmQoXCIuY2FyZC1yZXZlYWxcIikudmVsb2NpdHkoe3RyYW5zbGF0ZVk6MH0se2R1cmF0aW9uOjIyNSxxdWV1ZTohMSxlYXNpbmc6XCJlYXNlSW5PdXRRdWFkXCIsY29tcGxldGU6ZnVuY3Rpb24oKXthKHRoaXMpLmNzcyh7ZGlzcGxheTpcIm5vbmVcIn0pfX0pOihhKGIudGFyZ2V0KS5pcyhhKFwiLmNhcmQgLmFjdGl2YXRvclwiKSl8fGEoYi50YXJnZXQpLmlzKGEoXCIuY2FyZCAuYWN0aXZhdG9yIGlcIikpKSYmKGEoYi50YXJnZXQpLmNsb3Nlc3QoXCIuY2FyZFwiKS5jc3MoXCJvdmVyZmxvd1wiLFwiaGlkZGVuXCIpLGEodGhpcykuZmluZChcIi5jYXJkLXJldmVhbFwiKS5jc3Moe2Rpc3BsYXk6XCJibG9ja1wifSkudmVsb2NpdHkoXCJzdG9wXCIsITEpLnZlbG9jaXR5KHt0cmFuc2xhdGVZOlwiLTEwMCVcIn0se2R1cmF0aW9uOjMwMCxxdWV1ZTohMSxlYXNpbmc6XCJlYXNlSW5PdXRRdWFkXCJ9KSkpfSl9KX0oalF1ZXJ5KSxmdW5jdGlvbihhKXt2YXIgYj0hMSxjPXtkYXRhOltdLHBsYWNlaG9sZGVyOlwiXCIsc2Vjb25kYXJ5UGxhY2Vob2xkZXI6XCJcIn07YShkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXthKGRvY3VtZW50KS5vbihcImNsaWNrXCIsXCIuY2hpcCAuY2xvc2VcIixmdW5jdGlvbihiKXt2YXIgYz1hKHRoaXMpLmNsb3Nlc3QoXCIuY2hpcHNcIik7Yy5hdHRyKFwiZGF0YS1pbml0aWFsaXplZFwiKXx8YSh0aGlzKS5jbG9zZXN0KFwiLmNoaXBcIikucmVtb3ZlKCl9KX0pLGEuZm4ubWF0ZXJpYWxfY2hpcD1mdW5jdGlvbihkKXt2YXIgZT10aGlzO2lmKHRoaXMuJGVsPWEodGhpcyksdGhpcy4kZG9jdW1lbnQ9YShkb2N1bWVudCksdGhpcy5TRUxTPXtDSElQUzpcIi5jaGlwc1wiLENISVA6XCIuY2hpcFwiLElOUFVUOlwiaW5wdXRcIixERUxFVEU6XCIubWF0ZXJpYWwtaWNvbnNcIixTRUxFQ1RFRF9DSElQOlwiLnNlbGVjdGVkXCJ9LFwiZGF0YVwiPT09ZClyZXR1cm4gdGhpcy4kZWwuZGF0YShcImNoaXBzXCIpO3ZhciBmPWEuZXh0ZW5kKHt9LGMsZCk7dGhpcy5pbml0PWZ1bmN0aW9uKCl7dmFyIGI9MDtlLiRlbC5lYWNoKGZ1bmN0aW9uKCl7dmFyIGM9YSh0aGlzKSxkPU1hdGVyaWFsaXplLmd1aWQoKTtmLmRhdGEmJmYuZGF0YSBpbnN0YW5jZW9mIEFycmF5fHwoZi5kYXRhPVtdKSxjLmRhdGEoXCJjaGlwc1wiLGYuZGF0YSksYy5hdHRyKFwiZGF0YS1pbmRleFwiLGIpLGMuYXR0cihcImRhdGEtaW5pdGlhbGl6ZWRcIiwhMCksYy5oYXNDbGFzcyhlLlNFTFMuQ0hJUFMpfHxjLmFkZENsYXNzKFwiY2hpcHNcIiksZS5jaGlwcyhjLGQpLGIrK30pfSx0aGlzLmhhbmRsZUV2ZW50cz1mdW5jdGlvbigpe3ZhciBiPWUuU0VMUztlLiRkb2N1bWVudC5vZmYoXCJjbGljay5jaGlwcy1mb2N1c1wiLGIuQ0hJUFMpLm9uKFwiY2xpY2suY2hpcHMtZm9jdXNcIixiLkNISVBTLGZ1bmN0aW9uKGMpe2EoYy50YXJnZXQpLmZpbmQoYi5JTlBVVCkuZm9jdXMoKX0pLGUuJGRvY3VtZW50Lm9mZihcImNsaWNrLmNoaXBzLXNlbGVjdFwiLGIuQ0hJUCkub24oXCJjbGljay5jaGlwcy1zZWxlY3RcIixiLkNISVAsZnVuY3Rpb24oYyl7YShiLkNISVApLnJlbW92ZUNsYXNzKFwic2VsZWN0ZWRcIiksYSh0aGlzKS50b2dnbGVDbGFzcyhcInNlbGVjdGVkXCIpfSksZS4kZG9jdW1lbnQub2ZmKFwia2V5ZG93bi5jaGlwc1wiKS5vbihcImtleWRvd24uY2hpcHNcIixmdW5jdGlvbihjKXtpZighYShjLnRhcmdldCkuaXMoXCJpbnB1dCwgdGV4dGFyZWFcIikpe3ZhciBkLGY9ZS4kZG9jdW1lbnQuZmluZChiLkNISVArYi5TRUxFQ1RFRF9DSElQKSxnPWYuY2xvc2VzdChiLkNISVBTKSxoPWYuc2libGluZ3MoYi5DSElQKS5sZW5ndGg7aWYoZi5sZW5ndGgpaWYoOD09PWMud2hpY2h8fDQ2PT09Yy53aGljaCl7Yy5wcmV2ZW50RGVmYXVsdCgpLGQ9Zi5pbmRleCgpLGUuZGVsZXRlQ2hpcChkLGcpO3ZhciBpPW51bGw7aD5kKzE/aT1kOihkPT09aHx8ZCsxPT09aCkmJihpPWgtMSksMD5pJiYoaT1udWxsKSxudWxsIT09aSYmZS5zZWxlY3RDaGlwKGksZyksaHx8Zy5maW5kKFwiaW5wdXRcIikuZm9jdXMoKX1lbHNlIGlmKDM3PT09Yy53aGljaCl7aWYoZD1mLmluZGV4KCktMSwwPmQpcmV0dXJuO2EoYi5DSElQKS5yZW1vdmVDbGFzcyhcInNlbGVjdGVkXCIpLGUuc2VsZWN0Q2hpcChkLGcpfWVsc2UgaWYoMzk9PT1jLndoaWNoKXtpZihkPWYuaW5kZXgoKSsxLGEoYi5DSElQKS5yZW1vdmVDbGFzcyhcInNlbGVjdGVkXCIpLGQ+aClyZXR1cm4gdm9pZCBnLmZpbmQoXCJpbnB1dFwiKS5mb2N1cygpO2Uuc2VsZWN0Q2hpcChkLGcpfX19KSxlLiRkb2N1bWVudC5vZmYoXCJmb2N1c2luLmNoaXBzXCIsYi5DSElQUytcIiBcIitiLklOUFVUKS5vbihcImZvY3VzaW4uY2hpcHNcIixiLkNISVBTK1wiIFwiK2IuSU5QVVQsZnVuY3Rpb24oYyl7dmFyIGQ9YShjLnRhcmdldCkuY2xvc2VzdChiLkNISVBTKTtkLmFkZENsYXNzKFwiZm9jdXNcIiksZC5zaWJsaW5ncyhcImxhYmVsLCAucHJlZml4XCIpLmFkZENsYXNzKFwiYWN0aXZlXCIpLGEoYi5DSElQKS5yZW1vdmVDbGFzcyhcInNlbGVjdGVkXCIpfSksZS4kZG9jdW1lbnQub2ZmKFwiZm9jdXNvdXQuY2hpcHNcIixiLkNISVBTK1wiIFwiK2IuSU5QVVQpLm9uKFwiZm9jdXNvdXQuY2hpcHNcIixiLkNISVBTK1wiIFwiK2IuSU5QVVQsZnVuY3Rpb24oYyl7dmFyIGQ9YShjLnRhcmdldCkuY2xvc2VzdChiLkNISVBTKTtkLnJlbW92ZUNsYXNzKFwiZm9jdXNcIiksZC5kYXRhKFwiY2hpcHNcIikubGVuZ3RofHxkLnNpYmxpbmdzKFwibGFiZWxcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIiksZC5zaWJsaW5ncyhcIi5wcmVmaXhcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIil9KSxlLiRkb2N1bWVudC5vZmYoXCJrZXlkb3duLmNoaXBzLWFkZFwiLGIuQ0hJUFMrXCIgXCIrYi5JTlBVVCkub24oXCJrZXlkb3duLmNoaXBzLWFkZFwiLGIuQ0hJUFMrXCIgXCIrYi5JTlBVVCxmdW5jdGlvbihjKXt2YXIgZD1hKGMudGFyZ2V0KSxmPWQuY2xvc2VzdChiLkNISVBTKSxnPWYuY2hpbGRyZW4oYi5DSElQKS5sZW5ndGg7cmV0dXJuIDEzPT09Yy53aGljaD8oYy5wcmV2ZW50RGVmYXVsdCgpLGUuYWRkQ2hpcCh7dGFnOmQudmFsKCl9LGYpLHZvaWQgZC52YWwoXCJcIikpOjghPT1jLmtleUNvZGUmJjM3IT09Yy5rZXlDb2RlfHxcIlwiIT09ZC52YWwoKXx8IWc/dm9pZCAwOihlLnNlbGVjdENoaXAoZy0xLGYpLHZvaWQgZC5ibHVyKCkpfSksZS4kZG9jdW1lbnQub2ZmKFwiY2xpY2suY2hpcHMtZGVsZXRlXCIsYi5DSElQUytcIiBcIitiLkRFTEVURSkub24oXCJjbGljay5jaGlwcy1kZWxldGVcIixiLkNISVBTK1wiIFwiK2IuREVMRVRFLGZ1bmN0aW9uKGMpe3ZhciBkPWEoYy50YXJnZXQpLGY9ZC5jbG9zZXN0KGIuQ0hJUFMpLGc9ZC5jbG9zZXN0KGIuQ0hJUCk7Yy5zdG9wUHJvcGFnYXRpb24oKSxlLmRlbGV0ZUNoaXAoZy5pbmRleCgpLGYpLGYuZmluZChcImlucHV0XCIpLmZvY3VzKCl9KX0sdGhpcy5jaGlwcz1mdW5jdGlvbihhLGIpe3ZhciBjPVwiXCI7YS5kYXRhKFwiY2hpcHNcIikuZm9yRWFjaChmdW5jdGlvbihhKXtjKz1lLnJlbmRlckNoaXAoYSl9KSxjKz0nPGlucHV0IGlkPVwiJytiKydcIiBjbGFzcz1cImlucHV0XCIgcGxhY2Vob2xkZXI9XCJcIj4nLGEuaHRtbChjKSxlLnNldFBsYWNlaG9sZGVyKGEpO3ZhciBkPWEubmV4dChcImxhYmVsXCIpO2QubGVuZ3RoJiYoZC5hdHRyKFwiZm9yXCIsYiksYS5kYXRhKFwiY2hpcHNcIikubGVuZ3RoJiZkLmFkZENsYXNzKFwiYWN0aXZlXCIpKX0sdGhpcy5yZW5kZXJDaGlwPWZ1bmN0aW9uKGEpe2lmKGEudGFnKXt2YXIgYj0nPGRpdiBjbGFzcz1cImNoaXBcIj4nK2EudGFnO3JldHVybiBhLmltYWdlJiYoYis9JyA8aW1nIHNyYz1cIicrYS5pbWFnZSsnXCI+ICcpLGIrPSc8aSBjbGFzcz1cIm1hdGVyaWFsLWljb25zIGNsb3NlXCI+Y2xvc2U8L2k+JyxiKz1cIjwvZGl2PlwifX0sdGhpcy5zZXRQbGFjZWhvbGRlcj1mdW5jdGlvbihhKXthLmRhdGEoXCJjaGlwc1wiKS5sZW5ndGgmJmYucGxhY2Vob2xkZXI/YS5maW5kKFwiaW5wdXRcIikucHJvcChcInBsYWNlaG9sZGVyXCIsZi5wbGFjZWhvbGRlcik6IWEuZGF0YShcImNoaXBzXCIpLmxlbmd0aCYmZi5zZWNvbmRhcnlQbGFjZWhvbGRlciYmYS5maW5kKFwiaW5wdXRcIikucHJvcChcInBsYWNlaG9sZGVyXCIsZi5zZWNvbmRhcnlQbGFjZWhvbGRlcil9LHRoaXMuaXNWYWxpZD1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1hLmRhdGEoXCJjaGlwc1wiKSxkPSExLGU9MDtlPGMubGVuZ3RoO2UrKylpZihjW2VdLnRhZz09PWIudGFnKXJldHVybiB2b2lkKGQ9ITApO3JldHVyblwiXCIhPT1iLnRhZyYmIWR9LHRoaXMuYWRkQ2hpcD1mdW5jdGlvbihiLGMpe2lmKGUuaXNWYWxpZChjLGIpKXtmb3IodmFyIGQ9ZS5yZW5kZXJDaGlwKGIpLGY9W10sZz1jLmRhdGEoXCJjaGlwc1wiKSxoPTA7aDxnLmxlbmd0aDtoKyspZi5wdXNoKGdbaF0pO2YucHVzaChiKSxjLmRhdGEoXCJjaGlwc1wiLGYpLGEoZCkuaW5zZXJ0QmVmb3JlKGMuZmluZChcImlucHV0XCIpKSxjLnRyaWdnZXIoXCJjaGlwLmFkZFwiLGIpLGUuc2V0UGxhY2Vob2xkZXIoYyl9fSx0aGlzLmRlbGV0ZUNoaXA9ZnVuY3Rpb24oYSxiKXt2YXIgYz1iLmRhdGEoXCJjaGlwc1wiKVthXTtiLmZpbmQoXCIuY2hpcFwiKS5lcShhKS5yZW1vdmUoKTtmb3IodmFyIGQ9W10sZj1iLmRhdGEoXCJjaGlwc1wiKSxnPTA7ZzxmLmxlbmd0aDtnKyspZyE9PWEmJmQucHVzaChmW2ddKTtiLmRhdGEoXCJjaGlwc1wiLGQpLGIudHJpZ2dlcihcImNoaXAuZGVsZXRlXCIsYyksZS5zZXRQbGFjZWhvbGRlcihiKX0sdGhpcy5zZWxlY3RDaGlwPWZ1bmN0aW9uKGEsYil7dmFyIGM9Yi5maW5kKFwiLmNoaXBcIikuZXEoYSk7YyYmITE9PT1jLmhhc0NsYXNzKFwic2VsZWN0ZWRcIikmJihjLmFkZENsYXNzKFwic2VsZWN0ZWRcIiksYi50cmlnZ2VyKFwiY2hpcC5zZWxlY3RcIixiLmRhdGEoXCJjaGlwc1wiKVthXSkpfSx0aGlzLmdldENoaXBzRWxlbWVudD1mdW5jdGlvbihhLGIpe3JldHVybiBiLmVxKGEpfSx0aGlzLmluaXQoKSxifHwodGhpcy5oYW5kbGVFdmVudHMoKSxiPSEwKX19KGpRdWVyeSksZnVuY3Rpb24oYSl7YS5mbi5wdXNocGluPWZ1bmN0aW9uKGIpe3ZhciBjPXt0b3A6MCxib3R0b206MS8wLG9mZnNldDowfTtyZXR1cm5cInJlbW92ZVwiPT09Yj8odGhpcy5lYWNoKGZ1bmN0aW9uKCl7KGlkPWEodGhpcykuZGF0YShcInB1c2hwaW4taWRcIikpJiYoYSh3aW5kb3cpLm9mZihcInNjcm9sbC5cIitpZCksYSh0aGlzKS5yZW1vdmVEYXRhKFwicHVzaHBpbi1pZFwiKS5yZW1vdmVDbGFzcyhcInBpbi10b3AgcGlubmVkIHBpbi1ib3R0b21cIikucmVtb3ZlQXR0cihcInN0eWxlXCIpKX0pLCExKTooYj1hLmV4dGVuZChjLGIpLCRpbmRleD0wLHRoaXMuZWFjaChmdW5jdGlvbigpe2Z1bmN0aW9uIGMoYSl7YS5yZW1vdmVDbGFzcyhcInBpbi10b3BcIiksYS5yZW1vdmVDbGFzcyhcInBpbm5lZFwiKSxhLnJlbW92ZUNsYXNzKFwicGluLWJvdHRvbVwiKX1mdW5jdGlvbiBkKGQsZSl7ZC5lYWNoKGZ1bmN0aW9uKCl7Yi50b3A8PWUmJmIuYm90dG9tPj1lJiYhYSh0aGlzKS5oYXNDbGFzcyhcInBpbm5lZFwiKSYmKGMoYSh0aGlzKSksYSh0aGlzKS5jc3MoXCJ0b3BcIixiLm9mZnNldCksYSh0aGlzKS5hZGRDbGFzcyhcInBpbm5lZFwiKSksZTxiLnRvcCYmIWEodGhpcykuaGFzQ2xhc3MoXCJwaW4tdG9wXCIpJiYoYyhhKHRoaXMpKSxhKHRoaXMpLmNzcyhcInRvcFwiLDApLGEodGhpcykuYWRkQ2xhc3MoXCJwaW4tdG9wXCIpKSxlPmIuYm90dG9tJiYhYSh0aGlzKS5oYXNDbGFzcyhcInBpbi1ib3R0b21cIikmJihjKGEodGhpcykpLGEodGhpcykuYWRkQ2xhc3MoXCJwaW4tYm90dG9tXCIpLGEodGhpcykuY3NzKFwidG9wXCIsYi5ib3R0b20tZykpfSl9dmFyIGU9TWF0ZXJpYWxpemUuZ3VpZCgpLGY9YSh0aGlzKSxnPWEodGhpcykub2Zmc2V0KCkudG9wO2EodGhpcykuZGF0YShcInB1c2hwaW4taWRcIixlKSxkKGYsYSh3aW5kb3cpLnNjcm9sbFRvcCgpKSxhKHdpbmRvdykub24oXCJzY3JvbGwuXCIrZSxmdW5jdGlvbigpe3ZhciBjPWEod2luZG93KS5zY3JvbGxUb3AoKStiLm9mZnNldDtkKGYsYyl9KX0pKX19KGpRdWVyeSksZnVuY3Rpb24oYSl7YShkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXthLmZuLnJldmVyc2U9W10ucmV2ZXJzZSxhKGRvY3VtZW50KS5vbihcIm1vdXNlZW50ZXIuZml4ZWRBY3Rpb25CdG5cIixcIi5maXhlZC1hY3Rpb24tYnRuOm5vdCguY2xpY2stdG8tdG9nZ2xlKTpub3QoLnRvb2xiYXIpXCIsZnVuY3Rpb24oYyl7dmFyIGQ9YSh0aGlzKTtiKGQpfSksYShkb2N1bWVudCkub24oXCJtb3VzZWxlYXZlLmZpeGVkQWN0aW9uQnRuXCIsXCIuZml4ZWQtYWN0aW9uLWJ0bjpub3QoLmNsaWNrLXRvLXRvZ2dsZSk6bm90KC50b29sYmFyKVwiLGZ1bmN0aW9uKGIpe3ZhciBkPWEodGhpcyk7YyhkKX0pLGEoZG9jdW1lbnQpLm9uKFwiY2xpY2suZmFiQ2xpY2tUb2dnbGVcIixcIi5maXhlZC1hY3Rpb24tYnRuLmNsaWNrLXRvLXRvZ2dsZSA+IGFcIixmdW5jdGlvbihkKXt2YXIgZT1hKHRoaXMpLGY9ZS5wYXJlbnQoKTtmLmhhc0NsYXNzKFwiYWN0aXZlXCIpP2MoZik6YihmKX0pLGEoZG9jdW1lbnQpLm9uKFwiY2xpY2suZmFiVG9vbGJhclwiLFwiLmZpeGVkLWFjdGlvbi1idG4udG9vbGJhciA+IGFcIixmdW5jdGlvbihiKXt2YXIgYz1hKHRoaXMpLGU9Yy5wYXJlbnQoKTtkKGUpfSl9KSxhLmZuLmV4dGVuZCh7b3BlbkZBQjpmdW5jdGlvbigpe2IoYSh0aGlzKSl9LGNsb3NlRkFCOmZ1bmN0aW9uKCl7YyhhKHRoaXMpKX0sb3BlblRvb2xiYXI6ZnVuY3Rpb24oKXtkKGEodGhpcykpfSxjbG9zZVRvb2xiYXI6ZnVuY3Rpb24oKXtlKGEodGhpcykpfX0pO3ZhciBiPWZ1bmN0aW9uKGIpe3ZhciBjPWI7aWYoYy5oYXNDbGFzcyhcImFjdGl2ZVwiKT09PSExKXt2YXIgZCxlLGY9Yy5oYXNDbGFzcyhcImhvcml6b250YWxcIik7Zj09PSEwP2U9NDA6ZD00MCxjLmFkZENsYXNzKFwiYWN0aXZlXCIpLGMuZmluZChcInVsIC5idG4tZmxvYXRpbmdcIikudmVsb2NpdHkoe3NjYWxlWTpcIi40XCIsc2NhbGVYOlwiLjRcIix0cmFuc2xhdGVZOmQrXCJweFwiLHRyYW5zbGF0ZVg6ZStcInB4XCJ9LHtkdXJhdGlvbjowfSk7dmFyIGc9MDtjLmZpbmQoXCJ1bCAuYnRuLWZsb2F0aW5nXCIpLnJldmVyc2UoKS5lYWNoKGZ1bmN0aW9uKCl7YSh0aGlzKS52ZWxvY2l0eSh7b3BhY2l0eTpcIjFcIixzY2FsZVg6XCIxXCIsc2NhbGVZOlwiMVwiLHRyYW5zbGF0ZVk6XCIwXCIsdHJhbnNsYXRlWDpcIjBcIn0se2R1cmF0aW9uOjgwLGRlbGF5Omd9KSxnKz00MH0pfX0sYz1mdW5jdGlvbihhKXt2YXIgYixjLGQ9YSxlPWQuaGFzQ2xhc3MoXCJob3Jpem9udGFsXCIpO2U9PT0hMD9jPTQwOmI9NDAsZC5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtkLmZpbmQoXCJ1bCAuYnRuLWZsb2F0aW5nXCIpLnZlbG9jaXR5KFwic3RvcFwiLCEwKSxkLmZpbmQoXCJ1bCAuYnRuLWZsb2F0aW5nXCIpLnZlbG9jaXR5KHtvcGFjaXR5OlwiMFwiLHNjYWxlWDpcIi40XCIsc2NhbGVZOlwiLjRcIix0cmFuc2xhdGVZOmIrXCJweFwiLHRyYW5zbGF0ZVg6YytcInB4XCJ9LHtkdXJhdGlvbjo4MH0pfSxkPWZ1bmN0aW9uKGIpe2lmKFwidHJ1ZVwiIT09Yi5hdHRyKFwiZGF0YS1vcGVuXCIpKXt2YXIgYyxkLGYsZz13aW5kb3cuaW5uZXJXaWR0aCxoPXdpbmRvdy5pbm5lckhlaWdodCxpPWJbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksaj1iLmZpbmQoXCI+IGFcIikuZmlyc3QoKSxrPWIuZmluZChcIj4gdWxcIikuZmlyc3QoKSxsPWEoJzxkaXYgY2xhc3M9XCJmYWItYmFja2Ryb3BcIj48L2Rpdj4nKSxtPWouY3NzKFwiYmFja2dyb3VuZC1jb2xvclwiKTtqLmFwcGVuZChsKSxjPWkubGVmdC1nLzIraS53aWR0aC8yLGQ9aC1pLmJvdHRvbSxmPWcvbC53aWR0aCgpLGIuYXR0cihcImRhdGEtb3JpZ2luLWJvdHRvbVwiLGkuYm90dG9tKSxiLmF0dHIoXCJkYXRhLW9yaWdpbi1sZWZ0XCIsaS5sZWZ0KSxiLmF0dHIoXCJkYXRhLW9yaWdpbi13aWR0aFwiLGkud2lkdGgpLGIuYWRkQ2xhc3MoXCJhY3RpdmVcIiksYi5hdHRyKFwiZGF0YS1vcGVuXCIsITApLGIuY3NzKHtcInRleHQtYWxpZ25cIjpcImNlbnRlclwiLHdpZHRoOlwiMTAwJVwiLGJvdHRvbTowLGxlZnQ6MCx0cmFuc2Zvcm06XCJ0cmFuc2xhdGVYKFwiK2MrXCJweClcIix0cmFuc2l0aW9uOlwibm9uZVwifSksai5jc3Moe3RyYW5zZm9ybTpcInRyYW5zbGF0ZVkoXCIrLWQrXCJweClcIix0cmFuc2l0aW9uOlwibm9uZVwifSksbC5jc3Moe1wiYmFja2dyb3VuZC1jb2xvclwiOm19KSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yi5jc3Moe3RyYW5zZm9ybTpcIlwiLHRyYW5zaXRpb246XCJ0cmFuc2Zvcm0gLjJzIGN1YmljLWJlemllcigwLjU1MCwgMC4wODUsIDAuNjgwLCAwLjUzMCksIGJhY2tncm91bmQtY29sb3IgMHMgbGluZWFyIC4yc1wifSksai5jc3Moe292ZXJmbG93OlwidmlzaWJsZVwiLHRyYW5zZm9ybTpcIlwiLHRyYW5zaXRpb246XCJ0cmFuc2Zvcm0gLjJzXCJ9KSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yi5jc3Moe292ZXJmbG93OlwiaGlkZGVuXCIsXCJiYWNrZ3JvdW5kLWNvbG9yXCI6bX0pLGwuY3NzKHt0cmFuc2Zvcm06XCJzY2FsZShcIitmK1wiKVwiLHRyYW5zaXRpb246XCJ0cmFuc2Zvcm0gLjJzIGN1YmljLWJlemllcigwLjU1MCwgMC4wNTUsIDAuNjc1LCAwLjE5MClcIn0pLGsuZmluZChcIj4gbGkgPiBhXCIpLmNzcyh7b3BhY2l0eToxfSksYSh3aW5kb3cpLm9uKFwic2Nyb2xsLmZhYlRvb2xiYXJDbG9zZVwiLGZ1bmN0aW9uKCl7ZShiKSxhKHdpbmRvdykub2ZmKFwic2Nyb2xsLmZhYlRvb2xiYXJDbG9zZVwiKSxhKGRvY3VtZW50KS5vZmYoXCJjbGljay5mYWJUb29sYmFyQ2xvc2VcIil9KSxhKGRvY3VtZW50KS5vbihcImNsaWNrLmZhYlRvb2xiYXJDbG9zZVwiLGZ1bmN0aW9uKGMpe2EoYy50YXJnZXQpLmNsb3Nlc3QoaykubGVuZ3RofHwoZShiKSxhKHdpbmRvdykub2ZmKFwic2Nyb2xsLmZhYlRvb2xiYXJDbG9zZVwiKSxhKGRvY3VtZW50KS5vZmYoXCJjbGljay5mYWJUb29sYmFyQ2xvc2VcIikpfSl9LDEwMCl9LDApfX0sZT1mdW5jdGlvbihhKXtpZihcInRydWVcIj09PWEuYXR0cihcImRhdGEtb3BlblwiKSl7dmFyIGIsYyxkLGU9d2luZG93LmlubmVyV2lkdGgsZj13aW5kb3cuaW5uZXJIZWlnaHQsZz1hLmF0dHIoXCJkYXRhLW9yaWdpbi13aWR0aFwiKSxoPWEuYXR0cihcImRhdGEtb3JpZ2luLWJvdHRvbVwiKSxpPWEuYXR0cihcImRhdGEtb3JpZ2luLWxlZnRcIiksaj1hLmZpbmQoXCI+IC5idG4tZmxvYXRpbmdcIikuZmlyc3QoKSxrPWEuZmluZChcIj4gdWxcIikuZmlyc3QoKSxsPWEuZmluZChcIi5mYWItYmFja2Ryb3BcIiksbT1qLmNzcyhcImJhY2tncm91bmQtY29sb3JcIik7Yj1pLWUvMitnLzIsYz1mLWgsZD1lL2wud2lkdGgoKSxhLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpLGEuYXR0cihcImRhdGEtb3BlblwiLCExKSxhLmNzcyh7XCJiYWNrZ3JvdW5kLWNvbG9yXCI6XCJ0cmFuc3BhcmVudFwiLHRyYW5zaXRpb246XCJub25lXCJ9KSxqLmNzcyh7dHJhbnNpdGlvbjpcIm5vbmVcIn0pLGwuY3NzKHt0cmFuc2Zvcm06XCJzY2FsZSgwKVwiLFwiYmFja2dyb3VuZC1jb2xvclwiOm19KSxrLmZpbmQoXCI+IGxpID4gYVwiKS5jc3Moe29wYWNpdHk6XCJcIn0pLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtsLnJlbW92ZSgpLGEuY3NzKHtcInRleHQtYWxpZ25cIjpcIlwiLHdpZHRoOlwiXCIsYm90dG9tOlwiXCIsbGVmdDpcIlwiLG92ZXJmbG93OlwiXCIsXCJiYWNrZ3JvdW5kLWNvbG9yXCI6XCJcIix0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZChcIistYitcInB4LDAsMClcIn0pLGouY3NzKHtvdmVyZmxvdzpcIlwiLHRyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsXCIrYytcInB4LDApXCJ9KSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YS5jc3Moe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsMCwwKVwiLHRyYW5zaXRpb246XCJ0cmFuc2Zvcm0gLjJzXCJ9KSxqLmNzcyh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwwLDApXCIsdHJhbnNpdGlvbjpcInRyYW5zZm9ybSAuMnMgY3ViaWMtYmV6aWVyKDAuNTUwLCAwLjA1NSwgMC42NzUsIDAuMTkwKVwifSl9LDIwKX0sMjAwKX19fShqUXVlcnkpLGZ1bmN0aW9uKGEpe01hdGVyaWFsaXplLmZhZGVJbkltYWdlPWZ1bmN0aW9uKGIpe3ZhciBjO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBiKWM9YShiKTtlbHNle2lmKFwib2JqZWN0XCIhPXR5cGVvZiBiKXJldHVybjtjPWJ9Yy5jc3Moe29wYWNpdHk6MH0pLGEoYykudmVsb2NpdHkoe29wYWNpdHk6MX0se2R1cmF0aW9uOjY1MCxxdWV1ZTohMSxlYXNpbmc6XCJlYXNlT3V0U2luZVwifSksYShjKS52ZWxvY2l0eSh7b3BhY2l0eToxfSx7ZHVyYXRpb246MTMwMCxxdWV1ZTohMSxlYXNpbmc6XCJzd2luZ1wiLHN0ZXA6ZnVuY3Rpb24oYixjKXtjLnN0YXJ0PTEwMDt2YXIgZD1iLzEwMCxlPTE1MC0oMTAwLWIpLzEuNzU7MTAwPmUmJihlPTEwMCksYj49MCYmYSh0aGlzKS5jc3Moe1wiLXdlYmtpdC1maWx0ZXJcIjpcImdyYXlzY2FsZShcIitkK1wiKWJyaWdodG5lc3MoXCIrZStcIiUpXCIsZmlsdGVyOlwiZ3JheXNjYWxlKFwiK2QrXCIpYnJpZ2h0bmVzcyhcIitlK1wiJSlcIn0pfX0pfSxNYXRlcmlhbGl6ZS5zaG93U3RhZ2dlcmVkTGlzdD1mdW5jdGlvbihiKXt2YXIgYztpZihcInN0cmluZ1wiPT10eXBlb2YgYiljPWEoYik7ZWxzZXtpZihcIm9iamVjdFwiIT10eXBlb2YgYilyZXR1cm47Yz1ifXZhciBkPTA7Yy5maW5kKFwibGlcIikudmVsb2NpdHkoe3RyYW5zbGF0ZVg6XCItMTAwcHhcIn0se2R1cmF0aW9uOjB9KSxjLmZpbmQoXCJsaVwiKS5lYWNoKGZ1bmN0aW9uKCl7YSh0aGlzKS52ZWxvY2l0eSh7b3BhY2l0eTpcIjFcIix0cmFuc2xhdGVYOlwiMFwifSx7ZHVyYXRpb246ODAwLGRlbGF5OmQsZWFzaW5nOls2MCwxMF19KSxkKz0xMjB9KX0sYShkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXt2YXIgYj0hMSxjPSExO2EoXCIuZGlzbWlzc2FibGVcIikuZWFjaChmdW5jdGlvbigpe2EodGhpcykuaGFtbWVyKHtwcmV2ZW50X2RlZmF1bHQ6ITF9KS5iaW5kKFwicGFuXCIsZnVuY3Rpb24oZCl7aWYoXCJ0b3VjaFwiPT09ZC5nZXN0dXJlLnBvaW50ZXJUeXBlKXt2YXIgZT1hKHRoaXMpLGY9ZC5nZXN0dXJlLmRpcmVjdGlvbixnPWQuZ2VzdHVyZS5kZWx0YVgsaD1kLmdlc3R1cmUudmVsb2NpdHlYO2UudmVsb2NpdHkoe3RyYW5zbGF0ZVg6Z30se2R1cmF0aW9uOjUwLHF1ZXVlOiExLGVhc2luZzpcImVhc2VPdXRRdWFkXCJ9KSw0PT09ZiYmKGc+ZS5pbm5lcldpZHRoKCkvMnx8LS43NT5oKSYmKGI9ITApLDI9PT1mJiYoZzwtMSplLmlubmVyV2lkdGgoKS8yfHxoPi43NSkmJihjPSEwKX19KS5iaW5kKFwicGFuZW5kXCIsZnVuY3Rpb24oZCl7aWYoTWF0aC5hYnMoZC5nZXN0dXJlLmRlbHRhWCk8YSh0aGlzKS5pbm5lcldpZHRoKCkvMiYmKGM9ITEsYj0hMSksXCJ0b3VjaFwiPT09ZC5nZXN0dXJlLnBvaW50ZXJUeXBlKXt2YXIgZT1hKHRoaXMpO2lmKGJ8fGMpe3ZhciBmO2Y9Yj9lLmlubmVyV2lkdGgoKTotMSplLmlubmVyV2lkdGgoKSxlLnZlbG9jaXR5KHt0cmFuc2xhdGVYOmZ9LHtkdXJhdGlvbjoxMDAscXVldWU6ITEsZWFzaW5nOlwiZWFzZU91dFF1YWRcIixjb21wbGV0ZTpmdW5jdGlvbigpe2UuY3NzKFwiYm9yZGVyXCIsXCJub25lXCIpLGUudmVsb2NpdHkoe2hlaWdodDowLHBhZGRpbmc6MH0se2R1cmF0aW9uOjIwMCxxdWV1ZTohMSxlYXNpbmc6XCJlYXNlT3V0UXVhZFwiLGNvbXBsZXRlOmZ1bmN0aW9uKCl7ZS5yZW1vdmUoKX19KX19KX1lbHNlIGUudmVsb2NpdHkoe3RyYW5zbGF0ZVg6MH0se2R1cmF0aW9uOjEwMCxxdWV1ZTohMSxlYXNpbmc6XCJlYXNlT3V0UXVhZFwifSk7Yj0hMSxjPSExfX0pfSl9KX0oalF1ZXJ5KSxmdW5jdGlvbihhKXtNYXRlcmlhbGl6ZS5zY3JvbGxGaXJlPWZ1bmN0aW9uKGEpe3ZhciBiPSExO3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsZnVuY3Rpb24oKXtiPSEwfSksc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtpZihiKXtiPSExO2Zvcih2YXIgYz13aW5kb3cucGFnZVlPZmZzZXQrd2luZG93LmlubmVySGVpZ2h0LGQ9MDtkPGEubGVuZ3RoO2QrKyl7dmFyIGU9YVtkXSxmPWUuc2VsZWN0b3IsZz1lLm9mZnNldCxoPWUuY2FsbGJhY2ssaT1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKGYpO2lmKG51bGwhPT1pKXt2YXIgaj1pLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCt3aW5kb3cucGFnZVlPZmZzZXQ7aWYoYz5qK2cmJmUuZG9uZSE9PSEwKXtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBoKWguY2FsbCh0aGlzLGkpO2Vsc2UgaWYoXCJzdHJpbmdcIj09dHlwZW9mIGgpe3ZhciBrPW5ldyBGdW5jdGlvbihoKTtrKGkpfWUuZG9uZT0hMH19fX19LDEwMCl9fShqUXVlcnkpLGZ1bmN0aW9uKGEpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoXCJwaWNrZXJcIixbXCJqcXVlcnlcIl0sYSk6XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9YShyZXF1aXJlKFwianF1ZXJ5XCIpKTp0aGlzLlBpY2tlcj1hKGpRdWVyeSl9KGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoZixnLGksbCl7ZnVuY3Rpb24gbSgpe3JldHVybiBiLl8ubm9kZShcImRpdlwiLGIuXy5ub2RlKFwiZGl2XCIsYi5fLm5vZGUoXCJkaXZcIixiLl8ubm9kZShcImRpdlwiLHkuY29tcG9uZW50Lm5vZGVzKHQub3Blbiksdi5ib3gpLHYud3JhcCksdi5mcmFtZSksdi5ob2xkZXIpfWZ1bmN0aW9uIG4oKXt3LmRhdGEoZyx5KS5hZGRDbGFzcyh2LmlucHV0KS5hdHRyKFwidGFiaW5kZXhcIiwtMSkudmFsKHcuZGF0YShcInZhbHVlXCIpP3kuZ2V0KFwic2VsZWN0XCIsdS5mb3JtYXQpOmYudmFsdWUpLHUuZWRpdGFibGV8fHcub24oXCJmb2N1cy5cIit0LmlkK1wiIGNsaWNrLlwiK3QuaWQsZnVuY3Rpb24oYSl7YS5wcmV2ZW50RGVmYXVsdCgpLHkuJHJvb3QuZXEoMCkuZm9jdXMoKX0pLm9uKFwia2V5ZG93bi5cIit0LmlkLHEpLGUoZix7aGFzcG9wdXA6ITAsZXhwYW5kZWQ6ITEscmVhZG9ubHk6ITEsb3duczpmLmlkK1wiX3Jvb3RcIn0pfWZ1bmN0aW9uIG8oKXt5LiRyb290Lm9uKHtrZXlkb3duOnEsZm9jdXNpbjpmdW5jdGlvbihhKXt5LiRyb290LnJlbW92ZUNsYXNzKHYuZm9jdXNlZCksYS5zdG9wUHJvcGFnYXRpb24oKX0sXCJtb3VzZWRvd24gY2xpY2tcIjpmdW5jdGlvbihiKXt2YXIgYz1iLnRhcmdldDtjIT15LiRyb290LmNoaWxkcmVuKClbMF0mJihiLnN0b3BQcm9wYWdhdGlvbigpLFwibW91c2Vkb3duXCIhPWIudHlwZXx8YShjKS5pcyhcImlucHV0LCBzZWxlY3QsIHRleHRhcmVhLCBidXR0b24sIG9wdGlvblwiKXx8KGIucHJldmVudERlZmF1bHQoKSx5LiRyb290LmVxKDApLmZvY3VzKCkpKX19KS5vbih7Zm9jdXM6ZnVuY3Rpb24oKXt3LmFkZENsYXNzKHYudGFyZ2V0KX0sYmx1cjpmdW5jdGlvbigpe3cucmVtb3ZlQ2xhc3Modi50YXJnZXQpfX0pLm9uKFwiZm9jdXMudG9PcGVuXCIscikub24oXCJjbGlja1wiLFwiW2RhdGEtcGlja10sIFtkYXRhLW5hdl0sIFtkYXRhLWNsZWFyXSwgW2RhdGEtY2xvc2VdXCIsZnVuY3Rpb24oKXt2YXIgYj1hKHRoaXMpLGM9Yi5kYXRhKCksZD1iLmhhc0NsYXNzKHYubmF2RGlzYWJsZWQpfHxiLmhhc0NsYXNzKHYuZGlzYWJsZWQpLGU9aCgpO2U9ZSYmKGUudHlwZXx8ZS5ocmVmKSwoZHx8ZSYmIWEuY29udGFpbnMoeS4kcm9vdFswXSxlKSkmJnkuJHJvb3QuZXEoMCkuZm9jdXMoKSwhZCYmYy5uYXY/eS5zZXQoXCJoaWdobGlnaHRcIix5LmNvbXBvbmVudC5pdGVtLmhpZ2hsaWdodCx7bmF2OmMubmF2fSk6IWQmJlwicGlja1wiaW4gYz95LnNldChcInNlbGVjdFwiLGMucGljayk6Yy5jbGVhcj95LmNsZWFyKCkuY2xvc2UoITApOmMuY2xvc2UmJnkuY2xvc2UoITApfSksZSh5LiRyb290WzBdLFwiaGlkZGVuXCIsITApfWZ1bmN0aW9uIHAoKXt2YXIgYjt1LmhpZGRlbk5hbWU9PT0hMD8oYj1mLm5hbWUsZi5uYW1lPVwiXCIpOihiPVtcInN0cmluZ1wiPT10eXBlb2YgdS5oaWRkZW5QcmVmaXg/dS5oaWRkZW5QcmVmaXg6XCJcIixcInN0cmluZ1wiPT10eXBlb2YgdS5oaWRkZW5TdWZmaXg/dS5oaWRkZW5TdWZmaXg6XCJfc3VibWl0XCJdLGI9YlswXStmLm5hbWUrYlsxXSkseS5faGlkZGVuPWEoJzxpbnB1dCB0eXBlPWhpZGRlbiBuYW1lPVwiJytiKydcIicrKHcuZGF0YShcInZhbHVlXCIpfHxmLnZhbHVlPycgdmFsdWU9XCInK3kuZ2V0KFwic2VsZWN0XCIsdS5mb3JtYXRTdWJtaXQpKydcIic6XCJcIikrXCI+XCIpWzBdLHcub24oXCJjaGFuZ2UuXCIrdC5pZCxmdW5jdGlvbigpe3kuX2hpZGRlbi52YWx1ZT1mLnZhbHVlP3kuZ2V0KFwic2VsZWN0XCIsdS5mb3JtYXRTdWJtaXQpOlwiXCJ9KSx1LmNvbnRhaW5lcj9hKHUuY29udGFpbmVyKS5hcHBlbmQoeS5faGlkZGVuKTp3LmFmdGVyKHkuX2hpZGRlbil9ZnVuY3Rpb24gcShhKXt2YXIgYj1hLmtleUNvZGUsYz0vXig4fDQ2KSQvLnRlc3QoYik7cmV0dXJuIDI3PT1iPyh5LmNsb3NlKCksITEpOnZvaWQoKDMyPT1ifHxjfHwhdC5vcGVuJiZ5LmNvbXBvbmVudC5rZXlbYl0pJiYoYS5wcmV2ZW50RGVmYXVsdCgpLGEuc3RvcFByb3BhZ2F0aW9uKCksYz95LmNsZWFyKCkuY2xvc2UoKTp5Lm9wZW4oKSkpfWZ1bmN0aW9uIHIoYSl7YS5zdG9wUHJvcGFnYXRpb24oKSxcImZvY3VzXCI9PWEudHlwZSYmeS4kcm9vdC5hZGRDbGFzcyh2LmZvY3VzZWQpLHkub3BlbigpfWlmKCFmKXJldHVybiBiO3ZhciBzPSExLHQ9e2lkOmYuaWR8fFwiUFwiK01hdGguYWJzKH5+KE1hdGgucmFuZG9tKCkqbmV3IERhdGUpKX0sdT1pP2EuZXh0ZW5kKCEwLHt9LGkuZGVmYXVsdHMsbCk6bHx8e30sdj1hLmV4dGVuZCh7fSxiLmtsYXNzZXMoKSx1LmtsYXNzKSx3PWEoZikseD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnN0YXJ0KCl9LHk9eC5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOngsJG5vZGU6dyxzdGFydDpmdW5jdGlvbigpe3JldHVybiB0JiZ0LnN0YXJ0P3k6KHQubWV0aG9kcz17fSx0LnN0YXJ0PSEwLHQub3Blbj0hMSx0LnR5cGU9Zi50eXBlLGYuYXV0b2ZvY3VzPWY9PWgoKSxmLnJlYWRPbmx5PSF1LmVkaXRhYmxlLGYuaWQ9Zi5pZHx8dC5pZCxcInRleHRcIiE9Zi50eXBlJiYoZi50eXBlPVwidGV4dFwiKSx5LmNvbXBvbmVudD1uZXcgaSh5LHUpLHkuJHJvb3Q9YShiLl8ubm9kZShcImRpdlwiLG0oKSx2LnBpY2tlciwnaWQ9XCInK2YuaWQrJ19yb290XCIgdGFiaW5kZXg9XCIwXCInKSksbygpLHUuZm9ybWF0U3VibWl0JiZwKCksbigpLHUuY29udGFpbmVyP2EodS5jb250YWluZXIpLmFwcGVuZCh5LiRyb290KTp3LmFmdGVyKHkuJHJvb3QpLHkub24oe3N0YXJ0OnkuY29tcG9uZW50Lm9uU3RhcnQscmVuZGVyOnkuY29tcG9uZW50Lm9uUmVuZGVyLHN0b3A6eS5jb21wb25lbnQub25TdG9wLG9wZW46eS5jb21wb25lbnQub25PcGVuLGNsb3NlOnkuY29tcG9uZW50Lm9uQ2xvc2Usc2V0OnkuY29tcG9uZW50Lm9uU2V0fSkub24oe3N0YXJ0OnUub25TdGFydCxyZW5kZXI6dS5vblJlbmRlcixzdG9wOnUub25TdG9wLG9wZW46dS5vbk9wZW4sY2xvc2U6dS5vbkNsb3NlLHNldDp1Lm9uU2V0fSkscz1jKHkuJHJvb3QuY2hpbGRyZW4oKVswXSksZi5hdXRvZm9jdXMmJnkub3BlbigpLHkudHJpZ2dlcihcInN0YXJ0XCIpLnRyaWdnZXIoXCJyZW5kZXJcIikpfSxyZW5kZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGE/eS4kcm9vdC5odG1sKG0oKSk6eS4kcm9vdC5maW5kKFwiLlwiK3YuYm94KS5odG1sKHkuY29tcG9uZW50Lm5vZGVzKHQub3BlbikpLHkudHJpZ2dlcihcInJlbmRlclwiKX0sc3RvcDpmdW5jdGlvbigpe3JldHVybiB0LnN0YXJ0Pyh5LmNsb3NlKCkseS5faGlkZGVuJiZ5Ll9oaWRkZW4ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh5Ll9oaWRkZW4pLHkuJHJvb3QucmVtb3ZlKCksdy5yZW1vdmVDbGFzcyh2LmlucHV0KS5yZW1vdmVEYXRhKGcpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXt3Lm9mZihcIi5cIit0LmlkKX0sMCksZi50eXBlPXQudHlwZSxmLnJlYWRPbmx5PSExLHkudHJpZ2dlcihcInN0b3BcIiksdC5tZXRob2RzPXt9LHQuc3RhcnQ9ITEseSk6eX0sb3BlbjpmdW5jdGlvbihjKXtyZXR1cm4gdC5vcGVuP3k6KHcuYWRkQ2xhc3Modi5hY3RpdmUpLGUoZixcImV4cGFuZGVkXCIsITApLHNldFRpbWVvdXQoZnVuY3Rpb24oKXt5LiRyb290LmFkZENsYXNzKHYub3BlbmVkKSxlKHkuJHJvb3RbMF0sXCJoaWRkZW5cIiwhMSl9LDApLGMhPT0hMSYmKHQub3Blbj0hMCxzJiZrLmNzcyhcIm92ZXJmbG93XCIsXCJoaWRkZW5cIikuY3NzKFwicGFkZGluZy1yaWdodFwiLFwiKz1cIitkKCkpLHkuJHJvb3QuZXEoMCkuZm9jdXMoKSxqLm9uKFwiY2xpY2suXCIrdC5pZCtcIiBmb2N1c2luLlwiK3QuaWQsZnVuY3Rpb24oYSl7dmFyIGI9YS50YXJnZXQ7YiE9ZiYmYiE9ZG9jdW1lbnQmJjMhPWEud2hpY2gmJnkuY2xvc2UoYj09PXkuJHJvb3QuY2hpbGRyZW4oKVswXSl9KS5vbihcImtleWRvd24uXCIrdC5pZCxmdW5jdGlvbihjKXt2YXIgZD1jLmtleUNvZGUsZT15LmNvbXBvbmVudC5rZXlbZF0sZj1jLnRhcmdldDsyNz09ZD95LmNsb3NlKCEwKTpmIT15LiRyb290WzBdfHwhZSYmMTMhPWQ/YS5jb250YWlucyh5LiRyb290WzBdLGYpJiYxMz09ZCYmKGMucHJldmVudERlZmF1bHQoKSxmLmNsaWNrKCkpOihjLnByZXZlbnREZWZhdWx0KCksZT9iLl8udHJpZ2dlcih5LmNvbXBvbmVudC5rZXkuZ28seSxbYi5fLnRyaWdnZXIoZSldKTp5LiRyb290LmZpbmQoXCIuXCIrdi5oaWdobGlnaHRlZCkuaGFzQ2xhc3Modi5kaXNhYmxlZCl8fHkuc2V0KFwic2VsZWN0XCIseS5jb21wb25lbnQuaXRlbS5oaWdobGlnaHQpLmNsb3NlKCkpfSkpLHkudHJpZ2dlcihcIm9wZW5cIikpfSxjbG9zZTpmdW5jdGlvbihhKXtyZXR1cm4gYSYmKHkuJHJvb3Qub2ZmKFwiZm9jdXMudG9PcGVuXCIpLmVxKDApLmZvY3VzKCksc2V0VGltZW91dChmdW5jdGlvbigpe3kuJHJvb3Qub24oXCJmb2N1cy50b09wZW5cIixyKX0sMCkpLHcucmVtb3ZlQ2xhc3Modi5hY3RpdmUpLGUoZixcImV4cGFuZGVkXCIsITEpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXt5LiRyb290LnJlbW92ZUNsYXNzKHYub3BlbmVkK1wiIFwiK3YuZm9jdXNlZCksZSh5LiRyb290WzBdLFwiaGlkZGVuXCIsITApfSwwKSx0Lm9wZW4/KHQub3Blbj0hMSxzJiZrLmNzcyhcIm92ZXJmbG93XCIsXCJcIikuY3NzKFwicGFkZGluZy1yaWdodFwiLFwiLT1cIitkKCkpLGoub2ZmKFwiLlwiK3QuaWQpLHkudHJpZ2dlcihcImNsb3NlXCIpKTp5fSxjbGVhcjpmdW5jdGlvbihhKXtyZXR1cm4geS5zZXQoXCJjbGVhclwiLG51bGwsYSl9LHNldDpmdW5jdGlvbihiLGMsZCl7dmFyIGUsZixnPWEuaXNQbGFpbk9iamVjdChiKSxoPWc/Yjp7fTtpZihkPWcmJmEuaXNQbGFpbk9iamVjdChjKT9jOmR8fHt9LGIpe2d8fChoW2JdPWMpO2ZvcihlIGluIGgpZj1oW2VdLGUgaW4geS5jb21wb25lbnQuaXRlbSYmKHZvaWQgMD09PWYmJihmPW51bGwpLHkuY29tcG9uZW50LnNldChlLGYsZCkpLChcInNlbGVjdFwiPT1lfHxcImNsZWFyXCI9PWUpJiZ3LnZhbChcImNsZWFyXCI9PWU/XCJcIjp5LmdldChlLHUuZm9ybWF0KSkudHJpZ2dlcihcImNoYW5nZVwiKTt5LnJlbmRlcigpfXJldHVybiBkLm11dGVkP3k6eS50cmlnZ2VyKFwic2V0XCIsaCl9LGdldDpmdW5jdGlvbihhLGMpe2lmKGE9YXx8XCJ2YWx1ZVwiLG51bGwhPXRbYV0pcmV0dXJuIHRbYV07aWYoXCJ2YWx1ZVN1Ym1pdFwiPT1hKXtpZih5Ll9oaWRkZW4pcmV0dXJuIHkuX2hpZGRlbi52YWx1ZTthPVwidmFsdWVcIn1pZihcInZhbHVlXCI9PWEpcmV0dXJuIGYudmFsdWU7aWYoYSBpbiB5LmNvbXBvbmVudC5pdGVtKXtpZihcInN0cmluZ1wiPT10eXBlb2YgYyl7dmFyIGQ9eS5jb21wb25lbnQuZ2V0KGEpO3JldHVybiBkP2IuXy50cmlnZ2VyKHkuY29tcG9uZW50LmZvcm1hdHMudG9TdHJpbmcseS5jb21wb25lbnQsW2MsZF0pOlwiXCJ9cmV0dXJuIHkuY29tcG9uZW50LmdldChhKX19LG9uOmZ1bmN0aW9uKGIsYyxkKXt2YXIgZSxmLGc9YS5pc1BsYWluT2JqZWN0KGIpLGg9Zz9iOnt9O2lmKGIpe2d8fChoW2JdPWMpO2ZvcihlIGluIGgpZj1oW2VdLGQmJihlPVwiX1wiK2UpLHQubWV0aG9kc1tlXT10Lm1ldGhvZHNbZV18fFtdLHQubWV0aG9kc1tlXS5wdXNoKGYpfXJldHVybiB5fSxvZmY6ZnVuY3Rpb24oKXt2YXIgYSxiLGM9YXJndW1lbnRzO2ZvcihhPTAsbmFtZXNDb3VudD1jLmxlbmd0aDthPG5hbWVzQ291bnQ7YSs9MSliPWNbYV0sYiBpbiB0Lm1ldGhvZHMmJmRlbGV0ZSB0Lm1ldGhvZHNbYl07cmV0dXJuIHl9LHRyaWdnZXI6ZnVuY3Rpb24oYSxjKXt2YXIgZD1mdW5jdGlvbihhKXt2YXIgZD10Lm1ldGhvZHNbYV07ZCYmZC5tYXAoZnVuY3Rpb24oYSl7Yi5fLnRyaWdnZXIoYSx5LFtjXSl9KX07cmV0dXJuIGQoXCJfXCIrYSksZChhKSx5fX07cmV0dXJuIG5ldyB4fWZ1bmN0aW9uIGMoYSl7dmFyIGIsYz1cInBvc2l0aW9uXCI7cmV0dXJuIGEuY3VycmVudFN0eWxlP2I9YS5jdXJyZW50U3R5bGVbY106d2luZG93LmdldENvbXB1dGVkU3R5bGUmJihiPWdldENvbXB1dGVkU3R5bGUoYSlbY10pLFwiZml4ZWRcIj09Yn1mdW5jdGlvbiBkKCl7aWYoay5oZWlnaHQoKTw9aS5oZWlnaHQoKSlyZXR1cm4gMDt2YXIgYj1hKCc8ZGl2IHN0eWxlPVwidmlzaWJpbGl0eTpoaWRkZW47d2lkdGg6MTAwcHhcIiAvPicpLmFwcGVuZFRvKFwiYm9keVwiKSxjPWJbMF0ub2Zmc2V0V2lkdGg7Yi5jc3MoXCJvdmVyZmxvd1wiLFwic2Nyb2xsXCIpO3ZhciBkPWEoJzxkaXYgc3R5bGU9XCJ3aWR0aDoxMDAlXCIgLz4nKS5hcHBlbmRUbyhiKSxlPWRbMF0ub2Zmc2V0V2lkdGg7cmV0dXJuIGIucmVtb3ZlKCksYy1lfWZ1bmN0aW9uIGUoYixjLGQpe2lmKGEuaXNQbGFpbk9iamVjdChjKSlmb3IodmFyIGUgaW4gYylmKGIsZSxjW2VdKTtlbHNlIGYoYixjLGQpfWZ1bmN0aW9uIGYoYSxiLGMpe2Euc2V0QXR0cmlidXRlKChcInJvbGVcIj09Yj9cIlwiOlwiYXJpYS1cIikrYixjKX1mdW5jdGlvbiBnKGIsYyl7YS5pc1BsYWluT2JqZWN0KGIpfHwoYj17YXR0cmlidXRlOmN9KSxjPVwiXCI7Zm9yKHZhciBkIGluIGIpe3ZhciBlPShcInJvbGVcIj09ZD9cIlwiOlwiYXJpYS1cIikrZCxmPWJbZF07Yys9bnVsbD09Zj9cIlwiOmUrJz1cIicrYltkXSsnXCInfXJldHVybiBjfWZ1bmN0aW9uIGgoKXt0cnl7cmV0dXJuIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnR9Y2F0Y2goYSl7fX12YXIgaT1hKHdpbmRvdyksaj1hKGRvY3VtZW50KSxrPWEoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KTtyZXR1cm4gYi5rbGFzc2VzPWZ1bmN0aW9uKGEpe3JldHVybiBhPWF8fFwicGlja2VyXCIse3BpY2tlcjphLG9wZW5lZDphK1wiLS1vcGVuZWRcIixmb2N1c2VkOmErXCItLWZvY3VzZWRcIixpbnB1dDphK1wiX19pbnB1dFwiLGFjdGl2ZTphK1wiX19pbnB1dC0tYWN0aXZlXCIsdGFyZ2V0OmErXCJfX2lucHV0LS10YXJnZXRcIixob2xkZXI6YStcIl9faG9sZGVyXCIsZnJhbWU6YStcIl9fZnJhbWVcIix3cmFwOmErXCJfX3dyYXBcIixib3g6YStcIl9fYm94XCJ9fSxiLl89e2dyb3VwOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYyxkPVwiXCIsZT1iLl8udHJpZ2dlcihhLm1pbixhKTtlPD1iLl8udHJpZ2dlcihhLm1heCxhLFtlXSk7ZSs9YS5pKWM9Yi5fLnRyaWdnZXIoYS5pdGVtLGEsW2VdKSxkKz1iLl8ubm9kZShhLm5vZGUsY1swXSxjWzFdLGNbMl0pO3JldHVybiBkfSxub2RlOmZ1bmN0aW9uKGIsYyxkLGUpe3JldHVybiBjPyhjPWEuaXNBcnJheShjKT9jLmpvaW4oXCJcIik6YyxkPWQ/JyBjbGFzcz1cIicrZCsnXCInOlwiXCIsZT1lP1wiIFwiK2U6XCJcIixcIjxcIitiK2QrZStcIj5cIitjK1wiPC9cIitiK1wiPlwiKTpcIlwifSxsZWFkOmZ1bmN0aW9uKGEpe3JldHVybigxMD5hP1wiMFwiOlwiXCIpK2F9LHRyaWdnZXI6ZnVuY3Rpb24oYSxiLGMpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIGE/YS5hcHBseShiLGN8fFtdKTphfSxkaWdpdHM6ZnVuY3Rpb24oYSl7cmV0dXJuL1xcZC8udGVzdChhWzFdKT8yOjF9LGlzRGF0ZTpmdW5jdGlvbihhKXtyZXR1cm57fS50b1N0cmluZy5jYWxsKGEpLmluZGV4T2YoXCJEYXRlXCIpPi0xJiZ0aGlzLmlzSW50ZWdlcihhLmdldERhdGUoKSl9LGlzSW50ZWdlcjpmdW5jdGlvbihhKXtyZXR1cm57fS50b1N0cmluZy5jYWxsKGEpLmluZGV4T2YoXCJOdW1iZXJcIik+LTEmJmElMT09PTB9LGFyaWFBdHRyOmd9LGIuZXh0ZW5kPWZ1bmN0aW9uKGMsZCl7YS5mbltjXT1mdW5jdGlvbihlLGYpe3ZhciBnPXRoaXMuZGF0YShjKTtyZXR1cm5cInBpY2tlclwiPT1lP2c6ZyYmXCJzdHJpbmdcIj09dHlwZW9mIGU/Yi5fLnRyaWdnZXIoZ1tlXSxnLFtmXSk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGY9YSh0aGlzKTtmLmRhdGEoYyl8fG5ldyBiKHRoaXMsYyxkLGUpfSl9LGEuZm5bY10uZGVmYXVsdHM9ZC5kZWZhdWx0c30sYn0pLGZ1bmN0aW9uKGEpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW1wicGlja2VyXCIsXCJqcXVlcnlcIl0sYSk6XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9YShyZXF1aXJlKFwiLi9waWNrZXIuanNcIikscmVxdWlyZShcImpxdWVyeVwiKSk6YShQaWNrZXIsalF1ZXJ5KX0oZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKGEsYil7dmFyIGM9dGhpcyxkPWEuJG5vZGVbMF0sZT1kLnZhbHVlLGY9YS4kbm9kZS5kYXRhKFwidmFsdWVcIiksZz1mfHxlLGg9Zj9iLmZvcm1hdFN1Ym1pdDpiLmZvcm1hdCxpPWZ1bmN0aW9uKCl7cmV0dXJuIGQuY3VycmVudFN0eWxlP1wicnRsXCI9PWQuY3VycmVudFN0eWxlLmRpcmVjdGlvbjpcInJ0bFwiPT1nZXRDb21wdXRlZFN0eWxlKGEuJHJvb3RbMF0pLmRpcmVjdGlvbn07Yy5zZXR0aW5ncz1iLGMuJG5vZGU9YS4kbm9kZSxjLnF1ZXVlPXttaW46XCJtZWFzdXJlIGNyZWF0ZVwiLG1heDpcIm1lYXN1cmUgY3JlYXRlXCIsbm93Olwibm93IGNyZWF0ZVwiLHNlbGVjdDpcInBhcnNlIGNyZWF0ZSB2YWxpZGF0ZVwiLGhpZ2hsaWdodDpcInBhcnNlIG5hdmlnYXRlIGNyZWF0ZSB2YWxpZGF0ZVwiLHZpZXc6XCJwYXJzZSBjcmVhdGUgdmFsaWRhdGUgdmlld3NldFwiLGRpc2FibGU6XCJkZWFjdGl2YXRlXCIsZW5hYmxlOlwiYWN0aXZhdGVcIn0sYy5pdGVtPXt9LGMuaXRlbS5jbGVhcj1udWxsLGMuaXRlbS5kaXNhYmxlPShiLmRpc2FibGV8fFtdKS5zbGljZSgwKSxjLml0ZW0uZW5hYmxlPS1mdW5jdGlvbihhKXtyZXR1cm4gYVswXT09PSEwP2Euc2hpZnQoKTotMX0oYy5pdGVtLmRpc2FibGUpLGMuc2V0KFwibWluXCIsYi5taW4pLnNldChcIm1heFwiLGIubWF4KS5zZXQoXCJub3dcIiksZz9jLnNldChcInNlbGVjdFwiLGcse2Zvcm1hdDpofSk6Yy5zZXQoXCJzZWxlY3RcIixudWxsKS5zZXQoXCJoaWdobGlnaHRcIixjLml0ZW0ubm93KSxjLmtleT17NDA6NywzODotNywzOTpmdW5jdGlvbigpe3JldHVybiBpKCk/LTE6MX0sMzc6ZnVuY3Rpb24oKXtyZXR1cm4gaSgpPzE6LTF9LGdvOmZ1bmN0aW9uKGEpe3ZhciBiPWMuaXRlbS5oaWdobGlnaHQsZD1uZXcgRGF0ZShiLnllYXIsYi5tb250aCxiLmRhdGUrYSk7Yy5zZXQoXCJoaWdobGlnaHRcIixkLHtpbnRlcnZhbDphfSksdGhpcy5yZW5kZXIoKX19LGEub24oXCJyZW5kZXJcIixmdW5jdGlvbigpe2EuJHJvb3QuZmluZChcIi5cIitiLmtsYXNzLnNlbGVjdE1vbnRoKS5vbihcImNoYW5nZVwiLGZ1bmN0aW9uKCl7dmFyIGM9dGhpcy52YWx1ZTtjJiYoYS5zZXQoXCJoaWdobGlnaHRcIixbYS5nZXQoXCJ2aWV3XCIpLnllYXIsYyxhLmdldChcImhpZ2hsaWdodFwiKS5kYXRlXSksYS4kcm9vdC5maW5kKFwiLlwiK2Iua2xhc3Muc2VsZWN0TW9udGgpLnRyaWdnZXIoXCJmb2N1c1wiKSl9KSxhLiRyb290LmZpbmQoXCIuXCIrYi5rbGFzcy5zZWxlY3RZZWFyKS5vbihcImNoYW5nZVwiLGZ1bmN0aW9uKCl7dmFyIGM9dGhpcy52YWx1ZTtjJiYoYS5zZXQoXCJoaWdobGlnaHRcIixbYyxhLmdldChcInZpZXdcIikubW9udGgsYS5nZXQoXCJoaWdobGlnaHRcIikuZGF0ZV0pLGEuJHJvb3QuZmluZChcIi5cIitiLmtsYXNzLnNlbGVjdFllYXIpLnRyaWdnZXIoXCJmb2N1c1wiKSl9KX0sMSkub24oXCJvcGVuXCIsZnVuY3Rpb24oKXt2YXIgZD1cIlwiO2MuZGlzYWJsZWQoYy5nZXQoXCJub3dcIikpJiYoZD1cIjpub3QoLlwiK2Iua2xhc3MuYnV0dG9uVG9kYXkrXCIpXCIpLGEuJHJvb3QuZmluZChcImJ1dHRvblwiK2QrXCIsIHNlbGVjdFwiKS5hdHRyKFwiZGlzYWJsZWRcIiwhMSl9LDEpLm9uKFwiY2xvc2VcIixmdW5jdGlvbigpe2EuJHJvb3QuZmluZChcImJ1dHRvbiwgc2VsZWN0XCIpLmF0dHIoXCJkaXNhYmxlZFwiLCEwKX0sMSl9dmFyIGQ9NyxlPTYsZj1hLl87Yy5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLGU9ZC5pdGVtO3JldHVybiBudWxsPT09Yj8oXCJjbGVhclwiPT1hJiYoYT1cInNlbGVjdFwiKSxlW2FdPWIsZCk6KGVbXCJlbmFibGVcIj09YT9cImRpc2FibGVcIjpcImZsaXBcIj09YT9cImVuYWJsZVwiOmFdPWQucXVldWVbYV0uc3BsaXQoXCIgXCIpLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gYj1kW2VdKGEsYixjKX0pLnBvcCgpLFwic2VsZWN0XCI9PWE/ZC5zZXQoXCJoaWdobGlnaHRcIixlLnNlbGVjdCxjKTpcImhpZ2hsaWdodFwiPT1hP2Quc2V0KFwidmlld1wiLGUuaGlnaGxpZ2h0LGMpOmEubWF0Y2goL14oZmxpcHxtaW58bWF4fGRpc2FibGV8ZW5hYmxlKSQvKSYmKGUuc2VsZWN0JiZkLmRpc2FibGVkKGUuc2VsZWN0KSYmZC5zZXQoXCJzZWxlY3RcIixlLnNlbGVjdCxjKSxlLmhpZ2hsaWdodCYmZC5kaXNhYmxlZChlLmhpZ2hsaWdodCkmJmQuc2V0KFwiaGlnaGxpZ2h0XCIsZS5oaWdobGlnaHQsYykpLGQpfSxjLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaXRlbVthXX0sYy5wcm90b3R5cGUuY3JlYXRlPWZ1bmN0aW9uKGEsYyxkKXt2YXIgZSxnPXRoaXM7cmV0dXJuIGM9dm9pZCAwPT09Yz9hOmMsYz09LSgxLzApfHxjPT0xLzA/ZT1jOmIuaXNQbGFpbk9iamVjdChjKSYmZi5pc0ludGVnZXIoYy5waWNrKT9jPWMub2JqOmIuaXNBcnJheShjKT8oYz1uZXcgRGF0ZShjWzBdLGNbMV0sY1syXSksYz1mLmlzRGF0ZShjKT9jOmcuY3JlYXRlKCkub2JqKTpjPWYuaXNJbnRlZ2VyKGMpfHxmLmlzRGF0ZShjKT9nLm5vcm1hbGl6ZShuZXcgRGF0ZShjKSxkKTpnLm5vdyhhLGMsZCkse3llYXI6ZXx8Yy5nZXRGdWxsWWVhcigpLG1vbnRoOmV8fGMuZ2V0TW9udGgoKSxkYXRlOmV8fGMuZ2V0RGF0ZSgpLGRheTplfHxjLmdldERheSgpLG9iajplfHxjLHBpY2s6ZXx8Yy5nZXRUaW1lKCl9fSxjLnByb3RvdHlwZS5jcmVhdGVSYW5nZT1mdW5jdGlvbihhLGMpe3ZhciBkPXRoaXMsZT1mdW5jdGlvbihhKXtyZXR1cm4gYT09PSEwfHxiLmlzQXJyYXkoYSl8fGYuaXNEYXRlKGEpP2QuY3JlYXRlKGEpOmF9O3JldHVybiBmLmlzSW50ZWdlcihhKXx8KGE9ZShhKSksZi5pc0ludGVnZXIoYyl8fChjPWUoYykpLGYuaXNJbnRlZ2VyKGEpJiZiLmlzUGxhaW5PYmplY3QoYyk/YT1bYy55ZWFyLGMubW9udGgsYy5kYXRlK2FdOmYuaXNJbnRlZ2VyKGMpJiZiLmlzUGxhaW5PYmplY3QoYSkmJihjPVthLnllYXIsYS5tb250aCxhLmRhdGUrY10pLHtmcm9tOmUoYSksdG86ZShjKX19LGMucHJvdG90eXBlLndpdGhpblJhbmdlPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9dGhpcy5jcmVhdGVSYW5nZShhLmZyb20sYS50byksYi5waWNrPj1hLmZyb20ucGljayYmYi5waWNrPD1hLnRvLnBpY2t9LGMucHJvdG90eXBlLm92ZXJsYXBSYW5nZXM9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzO3JldHVybiBhPWMuY3JlYXRlUmFuZ2UoYS5mcm9tLGEudG8pLGI9Yy5jcmVhdGVSYW5nZShiLmZyb20sYi50byksYy53aXRoaW5SYW5nZShhLGIuZnJvbSl8fGMud2l0aGluUmFuZ2UoYSxiLnRvKXx8Yy53aXRoaW5SYW5nZShiLGEuZnJvbSl8fGMud2l0aGluUmFuZ2UoYixhLnRvKX0sYy5wcm90b3R5cGUubm93PWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYj1uZXcgRGF0ZSxjJiZjLnJlbCYmYi5zZXREYXRlKGIuZ2V0RGF0ZSgpK2MucmVsKSx0aGlzLm5vcm1hbGl6ZShiLGMpfSxjLnByb3RvdHlwZS5uYXZpZ2F0ZT1mdW5jdGlvbihhLGMsZCl7dmFyIGUsZixnLGgsaT1iLmlzQXJyYXkoYyksaj1iLmlzUGxhaW5PYmplY3QoYyksaz10aGlzLml0ZW0udmlldztpZihpfHxqKXtmb3Ioaj8oZj1jLnllYXIsZz1jLm1vbnRoLGg9Yy5kYXRlKTooZj0rY1swXSxnPStjWzFdLGg9K2NbMl0pLGQmJmQubmF2JiZrJiZrLm1vbnRoIT09ZyYmKGY9ay55ZWFyLGc9ay5tb250aCksZT1uZXcgRGF0ZShmLGcrKGQmJmQubmF2P2QubmF2OjApLDEpLGY9ZS5nZXRGdWxsWWVhcigpLGc9ZS5nZXRNb250aCgpO25ldyBEYXRlKGYsZyxoKS5nZXRNb250aCgpIT09ZzspaC09MTtjPVtmLGcsaF19cmV0dXJuIGN9LGMucHJvdG90eXBlLm5vcm1hbGl6ZT1mdW5jdGlvbihhKXtyZXR1cm4gYS5zZXRIb3VycygwLDAsMCwwKSxhfSxjLnByb3RvdHlwZS5tZWFzdXJlPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcztyZXR1cm4gYj9cInN0cmluZ1wiPT10eXBlb2YgYj9iPWMucGFyc2UoYSxiKTpmLmlzSW50ZWdlcihiKSYmKGI9Yy5ub3coYSxiLHtyZWw6Yn0pKTpiPVwibWluXCI9PWE/LSgxLzApOjEvMCxifSxjLnByb3RvdHlwZS52aWV3c2V0PWZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuY3JlYXRlKFtiLnllYXIsYi5tb250aCwxXSl9LGMucHJvdG90eXBlLnZhbGlkYXRlPWZ1bmN0aW9uKGEsYyxkKXt2YXIgZSxnLGgsaSxqPXRoaXMsaz1jLGw9ZCYmZC5pbnRlcnZhbD9kLmludGVydmFsOjEsbT0tMT09PWouaXRlbS5lbmFibGUsbj1qLml0ZW0ubWluLG89ai5pdGVtLm1heCxwPW0mJmouaXRlbS5kaXNhYmxlLmZpbHRlcihmdW5jdGlvbihhKXtpZihiLmlzQXJyYXkoYSkpe3ZhciBkPWouY3JlYXRlKGEpLnBpY2s7ZDxjLnBpY2s/ZT0hMDpkPmMucGljayYmKGc9ITApfXJldHVybiBmLmlzSW50ZWdlcihhKX0pLmxlbmd0aDtpZigoIWR8fCFkLm5hdikmJighbSYmai5kaXNhYmxlZChjKXx8bSYmai5kaXNhYmxlZChjKSYmKHB8fGV8fGcpfHwhbSYmKGMucGljazw9bi5waWNrfHxjLnBpY2s+PW8ucGljaykpKWZvcihtJiYhcCYmKCFnJiZsPjB8fCFlJiYwPmwpJiYobCo9LTEpO2ouZGlzYWJsZWQoYykmJihNYXRoLmFicyhsKT4xJiYoYy5tb250aDxrLm1vbnRofHxjLm1vbnRoPmsubW9udGgpJiYoYz1rLGw9bD4wPzE6LTEpLGMucGljazw9bi5waWNrPyhoPSEwLGw9MSxjPWouY3JlYXRlKFtuLnllYXIsbi5tb250aCxuLmRhdGUrKGMucGljaz09PW4ucGljaz8wOi0xKV0pKTpjLnBpY2s+PW8ucGljayYmKGk9ITAsbD0tMSxjPWouY3JlYXRlKFtvLnllYXIsby5tb250aCxvLmRhdGUrKGMucGljaz09PW8ucGljaz8wOjEpXSkpLCFofHwhaSk7KWM9ai5jcmVhdGUoW2MueWVhcixjLm1vbnRoLGMuZGF0ZStsXSk7cmV0dXJuIGN9LGMucHJvdG90eXBlLmRpc2FibGVkPWZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMsZD1jLml0ZW0uZGlzYWJsZS5maWx0ZXIoZnVuY3Rpb24oZCl7cmV0dXJuIGYuaXNJbnRlZ2VyKGQpP2EuZGF5PT09KGMuc2V0dGluZ3MuZmlyc3REYXk/ZDpkLTEpJTc6Yi5pc0FycmF5KGQpfHxmLmlzRGF0ZShkKT9hLnBpY2s9PT1jLmNyZWF0ZShkKS5waWNrOmIuaXNQbGFpbk9iamVjdChkKT9jLndpdGhpblJhbmdlKGQsYSk6dm9pZCAwO1xufSk7cmV0dXJuIGQ9ZC5sZW5ndGgmJiFkLmZpbHRlcihmdW5jdGlvbihhKXtyZXR1cm4gYi5pc0FycmF5KGEpJiZcImludmVydGVkXCI9PWFbM118fGIuaXNQbGFpbk9iamVjdChhKSYmYS5pbnZlcnRlZH0pLmxlbmd0aCwtMT09PWMuaXRlbS5lbmFibGU/IWQ6ZHx8YS5waWNrPGMuaXRlbS5taW4ucGlja3x8YS5waWNrPmMuaXRlbS5tYXgucGlja30sYy5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMsZT17fTtyZXR1cm4gYiYmXCJzdHJpbmdcIj09dHlwZW9mIGI/KGMmJmMuZm9ybWF0fHwoYz1jfHx7fSxjLmZvcm1hdD1kLnNldHRpbmdzLmZvcm1hdCksZC5mb3JtYXRzLnRvQXJyYXkoYy5mb3JtYXQpLm1hcChmdW5jdGlvbihhKXt2YXIgYz1kLmZvcm1hdHNbYV0sZz1jP2YudHJpZ2dlcihjLGQsW2IsZV0pOmEucmVwbGFjZSgvXiEvLFwiXCIpLmxlbmd0aDtjJiYoZVthXT1iLnN1YnN0cigwLGcpKSxiPWIuc3Vic3RyKGcpfSksW2UueXl5eXx8ZS55eSwrKGUubW18fGUubSktMSxlLmRkfHxlLmRdKTpifSxjLnByb3RvdHlwZS5mb3JtYXRzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhLGIsYyl7dmFyIGQ9YS5tYXRjaCgvXFx3Ky8pWzBdO3JldHVybiBjLm1tfHxjLm18fChjLm09Yi5pbmRleE9mKGQpKzEpLGQubGVuZ3RofWZ1bmN0aW9uIGIoYSl7cmV0dXJuIGEubWF0Y2goL1xcdysvKVswXS5sZW5ndGh9cmV0dXJue2Q6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT9mLmRpZ2l0cyhhKTpiLmRhdGV9LGRkOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE/MjpmLmxlYWQoYi5kYXRlKX0sZGRkOmZ1bmN0aW9uKGEsYyl7cmV0dXJuIGE/YihhKTp0aGlzLnNldHRpbmdzLndlZWtkYXlzU2hvcnRbYy5kYXldfSxkZGRkOmZ1bmN0aW9uKGEsYyl7cmV0dXJuIGE/YihhKTp0aGlzLnNldHRpbmdzLndlZWtkYXlzRnVsbFtjLmRheV19LG06ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT9mLmRpZ2l0cyhhKTpiLm1vbnRoKzF9LG1tOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE/MjpmLmxlYWQoYi5tb250aCsxKX0sbW1tOmZ1bmN0aW9uKGIsYyl7dmFyIGQ9dGhpcy5zZXR0aW5ncy5tb250aHNTaG9ydDtyZXR1cm4gYj9hKGIsZCxjKTpkW2MubW9udGhdfSxtbW1tOmZ1bmN0aW9uKGIsYyl7dmFyIGQ9dGhpcy5zZXR0aW5ncy5tb250aHNGdWxsO3JldHVybiBiP2EoYixkLGMpOmRbYy5tb250aF19LHl5OmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE/MjooXCJcIitiLnllYXIpLnNsaWNlKDIpfSx5eXl5OmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE/NDpiLnllYXJ9LHRvQXJyYXk6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuc3BsaXQoLyhkezEsNH18bXsxLDR9fHl7NH18eXl8IS4pL2cpfSx0b1N0cmluZzpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXM7cmV0dXJuIGMuZm9ybWF0cy50b0FycmF5KGEpLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gZi50cmlnZ2VyKGMuZm9ybWF0c1thXSxjLFswLGJdKXx8YS5yZXBsYWNlKC9eIS8sXCJcIil9KS5qb2luKFwiXCIpfX19KCksYy5wcm90b3R5cGUuaXNEYXRlRXhhY3Q9ZnVuY3Rpb24oYSxjKXt2YXIgZD10aGlzO3JldHVybiBmLmlzSW50ZWdlcihhKSYmZi5pc0ludGVnZXIoYyl8fFwiYm9vbGVhblwiPT10eXBlb2YgYSYmXCJib29sZWFuXCI9PXR5cGVvZiBjP2E9PT1jOihmLmlzRGF0ZShhKXx8Yi5pc0FycmF5KGEpKSYmKGYuaXNEYXRlKGMpfHxiLmlzQXJyYXkoYykpP2QuY3JlYXRlKGEpLnBpY2s9PT1kLmNyZWF0ZShjKS5waWNrOmIuaXNQbGFpbk9iamVjdChhKSYmYi5pc1BsYWluT2JqZWN0KGMpP2QuaXNEYXRlRXhhY3QoYS5mcm9tLGMuZnJvbSkmJmQuaXNEYXRlRXhhY3QoYS50byxjLnRvKTohMX0sYy5wcm90b3R5cGUuaXNEYXRlT3ZlcmxhcD1mdW5jdGlvbihhLGMpe3ZhciBkPXRoaXMsZT1kLnNldHRpbmdzLmZpcnN0RGF5PzE6MDtyZXR1cm4gZi5pc0ludGVnZXIoYSkmJihmLmlzRGF0ZShjKXx8Yi5pc0FycmF5KGMpKT8oYT1hJTcrZSxhPT09ZC5jcmVhdGUoYykuZGF5KzEpOmYuaXNJbnRlZ2VyKGMpJiYoZi5pc0RhdGUoYSl8fGIuaXNBcnJheShhKSk/KGM9YyU3K2UsYz09PWQuY3JlYXRlKGEpLmRheSsxKTpiLmlzUGxhaW5PYmplY3QoYSkmJmIuaXNQbGFpbk9iamVjdChjKT9kLm92ZXJsYXBSYW5nZXMoYSxjKTohMX0sYy5wcm90b3R5cGUuZmxpcEVuYWJsZT1mdW5jdGlvbihhKXt2YXIgYj10aGlzLml0ZW07Yi5lbmFibGU9YXx8KC0xPT1iLmVuYWJsZT8xOi0xKX0sYy5wcm90b3R5cGUuZGVhY3RpdmF0ZT1mdW5jdGlvbihhLGMpe3ZhciBkPXRoaXMsZT1kLml0ZW0uZGlzYWJsZS5zbGljZSgwKTtyZXR1cm5cImZsaXBcIj09Yz9kLmZsaXBFbmFibGUoKTpjPT09ITE/KGQuZmxpcEVuYWJsZSgxKSxlPVtdKTpjPT09ITA/KGQuZmxpcEVuYWJsZSgtMSksZT1bXSk6Yy5tYXAoZnVuY3Rpb24oYSl7Zm9yKHZhciBjLGc9MDtnPGUubGVuZ3RoO2crPTEpaWYoZC5pc0RhdGVFeGFjdChhLGVbZ10pKXtjPSEwO2JyZWFrfWN8fChmLmlzSW50ZWdlcihhKXx8Zi5pc0RhdGUoYSl8fGIuaXNBcnJheShhKXx8Yi5pc1BsYWluT2JqZWN0KGEpJiZhLmZyb20mJmEudG8pJiZlLnB1c2goYSl9KSxlfSxjLnByb3RvdHlwZS5hY3RpdmF0ZT1mdW5jdGlvbihhLGMpe3ZhciBkPXRoaXMsZT1kLml0ZW0uZGlzYWJsZSxnPWUubGVuZ3RoO3JldHVyblwiZmxpcFwiPT1jP2QuZmxpcEVuYWJsZSgpOmM9PT0hMD8oZC5mbGlwRW5hYmxlKDEpLGU9W10pOmM9PT0hMT8oZC5mbGlwRW5hYmxlKC0xKSxlPVtdKTpjLm1hcChmdW5jdGlvbihhKXt2YXIgYyxoLGksajtmb3IoaT0wO2c+aTtpKz0xKXtpZihoPWVbaV0sZC5pc0RhdGVFeGFjdChoLGEpKXtjPWVbaV09bnVsbCxqPSEwO2JyZWFrfWlmKGQuaXNEYXRlT3ZlcmxhcChoLGEpKXtiLmlzUGxhaW5PYmplY3QoYSk/KGEuaW52ZXJ0ZWQ9ITAsYz1hKTpiLmlzQXJyYXkoYSk/KGM9YSxjWzNdfHxjLnB1c2goXCJpbnZlcnRlZFwiKSk6Zi5pc0RhdGUoYSkmJihjPVthLmdldEZ1bGxZZWFyKCksYS5nZXRNb250aCgpLGEuZ2V0RGF0ZSgpLFwiaW52ZXJ0ZWRcIl0pO2JyZWFrfX1pZihjKWZvcihpPTA7Zz5pO2krPTEpaWYoZC5pc0RhdGVFeGFjdChlW2ldLGEpKXtlW2ldPW51bGw7YnJlYWt9aWYoailmb3IoaT0wO2c+aTtpKz0xKWlmKGQuaXNEYXRlT3ZlcmxhcChlW2ldLGEpKXtlW2ldPW51bGw7YnJlYWt9YyYmZS5wdXNoKGMpfSksZS5maWx0ZXIoZnVuY3Rpb24oYSl7cmV0dXJuIG51bGwhPWF9KX0sYy5wcm90b3R5cGUubm9kZXM9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcyxjPWIuc2V0dGluZ3MsZz1iLml0ZW0saD1nLm5vdyxpPWcuc2VsZWN0LGo9Zy5oaWdobGlnaHQsaz1nLnZpZXcsbD1nLmRpc2FibGUsbT1nLm1pbixuPWcubWF4LG89ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYy5maXJzdERheSYmKGEucHVzaChhLnNoaWZ0KCkpLGIucHVzaChiLnNoaWZ0KCkpKSxmLm5vZGUoXCJ0aGVhZFwiLGYubm9kZShcInRyXCIsZi5ncm91cCh7bWluOjAsbWF4OmQtMSxpOjEsbm9kZTpcInRoXCIsaXRlbTpmdW5jdGlvbihkKXtyZXR1cm5bYVtkXSxjLmtsYXNzLndlZWtkYXlzLCdzY29wZT1jb2wgdGl0bGU9XCInK2JbZF0rJ1wiJ119fSkpKX0oKGMuc2hvd1dlZWtkYXlzRnVsbD9jLndlZWtkYXlzRnVsbDpjLndlZWtkYXlzTGV0dGVyKS5zbGljZSgwKSxjLndlZWtkYXlzRnVsbC5zbGljZSgwKSkscD1mdW5jdGlvbihhKXtyZXR1cm4gZi5ub2RlKFwiZGl2XCIsXCIgXCIsYy5rbGFzc1tcIm5hdlwiKyhhP1wiTmV4dFwiOlwiUHJldlwiKV0rKGEmJmsueWVhcj49bi55ZWFyJiZrLm1vbnRoPj1uLm1vbnRofHwhYSYmay55ZWFyPD1tLnllYXImJmsubW9udGg8PW0ubW9udGg/XCIgXCIrYy5rbGFzcy5uYXZEaXNhYmxlZDpcIlwiKSxcImRhdGEtbmF2PVwiKyhhfHwtMSkrXCIgXCIrZi5hcmlhQXR0cih7cm9sZTpcImJ1dHRvblwiLGNvbnRyb2xzOmIuJG5vZGVbMF0uaWQrXCJfdGFibGVcIn0pKycgdGl0bGU9XCInKyhhP2MubGFiZWxNb250aE5leHQ6Yy5sYWJlbE1vbnRoUHJldikrJ1wiJyl9LHE9ZnVuY3Rpb24oZCl7dmFyIGU9Yy5zaG93TW9udGhzU2hvcnQ/Yy5tb250aHNTaG9ydDpjLm1vbnRoc0Z1bGw7cmV0dXJuXCJzaG9ydF9tb250aHNcIj09ZCYmKGU9Yy5tb250aHNTaG9ydCksYy5zZWxlY3RNb250aHMmJnZvaWQgMD09ZD9mLm5vZGUoXCJzZWxlY3RcIixmLmdyb3VwKHttaW46MCxtYXg6MTEsaToxLG5vZGU6XCJvcHRpb25cIixpdGVtOmZ1bmN0aW9uKGEpe3JldHVybltlW2FdLDAsXCJ2YWx1ZT1cIithKyhrLm1vbnRoPT1hP1wiIHNlbGVjdGVkXCI6XCJcIikrKGsueWVhcj09bS55ZWFyJiZhPG0ubW9udGh8fGsueWVhcj09bi55ZWFyJiZhPm4ubW9udGg/XCIgZGlzYWJsZWRcIjpcIlwiKV19fSksYy5rbGFzcy5zZWxlY3RNb250aCtcIiBicm93c2VyLWRlZmF1bHRcIiwoYT9cIlwiOlwiZGlzYWJsZWRcIikrXCIgXCIrZi5hcmlhQXR0cih7Y29udHJvbHM6Yi4kbm9kZVswXS5pZCtcIl90YWJsZVwifSkrJyB0aXRsZT1cIicrYy5sYWJlbE1vbnRoU2VsZWN0KydcIicpOlwic2hvcnRfbW9udGhzXCI9PWQ/bnVsbCE9aT9mLm5vZGUoXCJkaXZcIixlW2kubW9udGhdKTpmLm5vZGUoXCJkaXZcIixlW2subW9udGhdKTpmLm5vZGUoXCJkaXZcIixlW2subW9udGhdLGMua2xhc3MubW9udGgpfSxyPWZ1bmN0aW9uKGQpe3ZhciBlPWsueWVhcixnPWMuc2VsZWN0WWVhcnM9PT0hMD81On5+KGMuc2VsZWN0WWVhcnMvMik7aWYoZyl7dmFyIGg9bS55ZWFyLGk9bi55ZWFyLGo9ZS1nLGw9ZStnO2lmKGg+aiYmKGwrPWgtaixqPWgpLGw+aSl7dmFyIG89ai1oLHA9bC1pO2otPW8+cD9wOm8sbD1pfWlmKGMuc2VsZWN0WWVhcnMmJnZvaWQgMD09ZClyZXR1cm4gZi5ub2RlKFwic2VsZWN0XCIsZi5ncm91cCh7bWluOmosbWF4OmwsaToxLG5vZGU6XCJvcHRpb25cIixpdGVtOmZ1bmN0aW9uKGEpe3JldHVyblthLDAsXCJ2YWx1ZT1cIithKyhlPT1hP1wiIHNlbGVjdGVkXCI6XCJcIildfX0pLGMua2xhc3Muc2VsZWN0WWVhcitcIiBicm93c2VyLWRlZmF1bHRcIiwoYT9cIlwiOlwiZGlzYWJsZWRcIikrXCIgXCIrZi5hcmlhQXR0cih7Y29udHJvbHM6Yi4kbm9kZVswXS5pZCtcIl90YWJsZVwifSkrJyB0aXRsZT1cIicrYy5sYWJlbFllYXJTZWxlY3QrJ1wiJyl9cmV0dXJuXCJyYXdcIj09ZD9mLm5vZGUoXCJkaXZcIixlKTpmLm5vZGUoXCJkaXZcIixlLGMua2xhc3MueWVhcil9O3JldHVybiBjcmVhdGVEYXlMYWJlbD1mdW5jdGlvbigpe3JldHVybiBudWxsIT1pP2Yubm9kZShcImRpdlwiLGkuZGF0ZSk6Zi5ub2RlKFwiZGl2XCIsaC5kYXRlKX0sY3JlYXRlV2Vla2RheUxhYmVsPWZ1bmN0aW9uKCl7dmFyIGE7YT1udWxsIT1pP2kuZGF5OmguZGF5O3ZhciBiPWMud2Vla2RheXNGdWxsW2FdO3JldHVybiBifSxmLm5vZGUoXCJkaXZcIixmLm5vZGUoXCJkaXZcIixjcmVhdGVXZWVrZGF5TGFiZWwoKSxcInBpY2tlcl9fd2Vla2RheS1kaXNwbGF5XCIpK2Yubm9kZShcImRpdlwiLHEoXCJzaG9ydF9tb250aHNcIiksYy5rbGFzcy5tb250aF9kaXNwbGF5KStmLm5vZGUoXCJkaXZcIixjcmVhdGVEYXlMYWJlbCgpLGMua2xhc3MuZGF5X2Rpc3BsYXkpK2Yubm9kZShcImRpdlwiLHIoXCJyYXdcIiksYy5rbGFzcy55ZWFyX2Rpc3BsYXkpLGMua2xhc3MuZGF0ZV9kaXNwbGF5KStmLm5vZGUoXCJkaXZcIixmLm5vZGUoXCJkaXZcIiwoYy5zZWxlY3RZZWFycz9xKCkrcigpOnEoKStyKCkpK3AoKStwKDEpLGMua2xhc3MuaGVhZGVyKStmLm5vZGUoXCJ0YWJsZVwiLG8rZi5ub2RlKFwidGJvZHlcIixmLmdyb3VwKHttaW46MCxtYXg6ZS0xLGk6MSxub2RlOlwidHJcIixpdGVtOmZ1bmN0aW9uKGEpe3ZhciBlPWMuZmlyc3REYXkmJjA9PT1iLmNyZWF0ZShbay55ZWFyLGsubW9udGgsMV0pLmRheT8tNzowO3JldHVybltmLmdyb3VwKHttaW46ZCphLWsuZGF5K2UrMSxtYXg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5taW4rZC0xfSxpOjEsbm9kZTpcInRkXCIsaXRlbTpmdW5jdGlvbihhKXthPWIuY3JlYXRlKFtrLnllYXIsay5tb250aCxhKyhjLmZpcnN0RGF5PzE6MCldKTt2YXIgZD1pJiZpLnBpY2s9PWEucGljayxlPWomJmoucGljaz09YS5waWNrLGc9bCYmYi5kaXNhYmxlZChhKXx8YS5waWNrPG0ucGlja3x8YS5waWNrPm4ucGljayxvPWYudHJpZ2dlcihiLmZvcm1hdHMudG9TdHJpbmcsYixbYy5mb3JtYXQsYV0pO3JldHVybltmLm5vZGUoXCJkaXZcIixhLmRhdGUsZnVuY3Rpb24oYil7cmV0dXJuIGIucHVzaChrLm1vbnRoPT1hLm1vbnRoP2Mua2xhc3MuaW5mb2N1czpjLmtsYXNzLm91dGZvY3VzKSxoLnBpY2s9PWEucGljayYmYi5wdXNoKGMua2xhc3Mubm93KSxkJiZiLnB1c2goYy5rbGFzcy5zZWxlY3RlZCksZSYmYi5wdXNoKGMua2xhc3MuaGlnaGxpZ2h0ZWQpLGcmJmIucHVzaChjLmtsYXNzLmRpc2FibGVkKSxiLmpvaW4oXCIgXCIpfShbYy5rbGFzcy5kYXldKSxcImRhdGEtcGljaz1cIithLnBpY2srXCIgXCIrZi5hcmlhQXR0cih7cm9sZTpcImdyaWRjZWxsXCIsbGFiZWw6byxzZWxlY3RlZDpkJiZiLiRub2RlLnZhbCgpPT09bz8hMDpudWxsLGFjdGl2ZWRlc2NlbmRhbnQ6ZT8hMDpudWxsLGRpc2FibGVkOmc/ITA6bnVsbH0pKSxcIlwiLGYuYXJpYUF0dHIoe3JvbGU6XCJwcmVzZW50YXRpb25cIn0pXX19KV19fSkpLGMua2xhc3MudGFibGUsJ2lkPVwiJytiLiRub2RlWzBdLmlkKydfdGFibGVcIiAnK2YuYXJpYUF0dHIoe3JvbGU6XCJncmlkXCIsY29udHJvbHM6Yi4kbm9kZVswXS5pZCxyZWFkb25seTohMH0pKSxjLmtsYXNzLmNhbGVuZGFyX2NvbnRhaW5lcikrZi5ub2RlKFwiZGl2XCIsZi5ub2RlKFwiYnV0dG9uXCIsYy50b2RheSxcImJ0bi1mbGF0IHBpY2tlcl9fdG9kYXlcIixcInR5cGU9YnV0dG9uIGRhdGEtcGljaz1cIitoLnBpY2srKGEmJiFiLmRpc2FibGVkKGgpP1wiXCI6XCIgZGlzYWJsZWRcIikrXCIgXCIrZi5hcmlhQXR0cih7Y29udHJvbHM6Yi4kbm9kZVswXS5pZH0pKStmLm5vZGUoXCJidXR0b25cIixjLmNsZWFyLFwiYnRuLWZsYXQgcGlja2VyX19jbGVhclwiLFwidHlwZT1idXR0b24gZGF0YS1jbGVhcj0xXCIrKGE/XCJcIjpcIiBkaXNhYmxlZFwiKStcIiBcIitmLmFyaWFBdHRyKHtjb250cm9sczpiLiRub2RlWzBdLmlkfSkpK2Yubm9kZShcImJ1dHRvblwiLGMuY2xvc2UsXCJidG4tZmxhdCBwaWNrZXJfX2Nsb3NlXCIsXCJ0eXBlPWJ1dHRvbiBkYXRhLWNsb3NlPXRydWUgXCIrKGE/XCJcIjpcIiBkaXNhYmxlZFwiKStcIiBcIitmLmFyaWFBdHRyKHtjb250cm9sczpiLiRub2RlWzBdLmlkfSkpLGMua2xhc3MuZm9vdGVyKX0sYy5kZWZhdWx0cz1mdW5jdGlvbihhKXtyZXR1cm57bGFiZWxNb250aE5leHQ6XCJOZXh0IG1vbnRoXCIsbGFiZWxNb250aFByZXY6XCJQcmV2aW91cyBtb250aFwiLGxhYmVsTW9udGhTZWxlY3Q6XCJTZWxlY3QgYSBtb250aFwiLGxhYmVsWWVhclNlbGVjdDpcIlNlbGVjdCBhIHllYXJcIixtb250aHNGdWxsOltcIkphbnVhcnlcIixcIkZlYnJ1YXJ5XCIsXCJNYXJjaFwiLFwiQXByaWxcIixcIk1heVwiLFwiSnVuZVwiLFwiSnVseVwiLFwiQXVndXN0XCIsXCJTZXB0ZW1iZXJcIixcIk9jdG9iZXJcIixcIk5vdmVtYmVyXCIsXCJEZWNlbWJlclwiXSxtb250aHNTaG9ydDpbXCJKYW5cIixcIkZlYlwiLFwiTWFyXCIsXCJBcHJcIixcIk1heVwiLFwiSnVuXCIsXCJKdWxcIixcIkF1Z1wiLFwiU2VwXCIsXCJPY3RcIixcIk5vdlwiLFwiRGVjXCJdLHdlZWtkYXlzRnVsbDpbXCJTdW5kYXlcIixcIk1vbmRheVwiLFwiVHVlc2RheVwiLFwiV2VkbmVzZGF5XCIsXCJUaHVyc2RheVwiLFwiRnJpZGF5XCIsXCJTYXR1cmRheVwiXSx3ZWVrZGF5c1Nob3J0OltcIlN1blwiLFwiTW9uXCIsXCJUdWVcIixcIldlZFwiLFwiVGh1XCIsXCJGcmlcIixcIlNhdFwiXSx3ZWVrZGF5c0xldHRlcjpbXCJTXCIsXCJNXCIsXCJUXCIsXCJXXCIsXCJUXCIsXCJGXCIsXCJTXCJdLHRvZGF5OlwiVG9kYXlcIixjbGVhcjpcIkNsZWFyXCIsY2xvc2U6XCJDbG9zZVwiLGZvcm1hdDpcImQgbW1tbSwgeXl5eVwiLGtsYXNzOnt0YWJsZTphK1widGFibGVcIixoZWFkZXI6YStcImhlYWRlclwiLGRhdGVfZGlzcGxheTphK1wiZGF0ZS1kaXNwbGF5XCIsZGF5X2Rpc3BsYXk6YStcImRheS1kaXNwbGF5XCIsbW9udGhfZGlzcGxheTphK1wibW9udGgtZGlzcGxheVwiLHllYXJfZGlzcGxheTphK1wieWVhci1kaXNwbGF5XCIsY2FsZW5kYXJfY29udGFpbmVyOmErXCJjYWxlbmRhci1jb250YWluZXJcIixuYXZQcmV2OmErXCJuYXYtLXByZXZcIixuYXZOZXh0OmErXCJuYXYtLW5leHRcIixuYXZEaXNhYmxlZDphK1wibmF2LS1kaXNhYmxlZFwiLG1vbnRoOmErXCJtb250aFwiLHllYXI6YStcInllYXJcIixzZWxlY3RNb250aDphK1wic2VsZWN0LS1tb250aFwiLHNlbGVjdFllYXI6YStcInNlbGVjdC0teWVhclwiLHdlZWtkYXlzOmErXCJ3ZWVrZGF5XCIsZGF5OmErXCJkYXlcIixkaXNhYmxlZDphK1wiZGF5LS1kaXNhYmxlZFwiLHNlbGVjdGVkOmErXCJkYXktLXNlbGVjdGVkXCIsaGlnaGxpZ2h0ZWQ6YStcImRheS0taGlnaGxpZ2h0ZWRcIixub3c6YStcImRheS0tdG9kYXlcIixpbmZvY3VzOmErXCJkYXktLWluZm9jdXNcIixvdXRmb2N1czphK1wiZGF5LS1vdXRmb2N1c1wiLGZvb3RlcjphK1wiZm9vdGVyXCIsYnV0dG9uQ2xlYXI6YStcImJ1dHRvbi0tY2xlYXJcIixidXR0b25Ub2RheTphK1wiYnV0dG9uLS10b2RheVwiLGJ1dHRvbkNsb3NlOmErXCJidXR0b24tLWNsb3NlXCJ9fX0oYS5rbGFzc2VzKCkucGlja2VyK1wiX19cIiksYS5leHRlbmQoXCJwaWNrYWRhdGVcIixjKX0pLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoKXt2YXIgYj0rYSh0aGlzKS5hdHRyKFwibGVuZ3RoXCIpLGM9K2EodGhpcykudmFsKCkubGVuZ3RoLGQ9Yj49YzthKHRoaXMpLnBhcmVudCgpLmZpbmQoJ3NwYW5bY2xhc3M9XCJjaGFyYWN0ZXItY291bnRlclwiXScpLmh0bWwoYytcIi9cIitiKSxlKGQsYSh0aGlzKSl9ZnVuY3Rpb24gYyhiKXt2YXIgYz1iLnBhcmVudCgpLmZpbmQoJ3NwYW5bY2xhc3M9XCJjaGFyYWN0ZXItY291bnRlclwiXScpO2MubGVuZ3RofHwoYz1hKFwiPHNwYW4vPlwiKS5hZGRDbGFzcyhcImNoYXJhY3Rlci1jb3VudGVyXCIpLmNzcyhcImZsb2F0XCIsXCJyaWdodFwiKS5jc3MoXCJmb250LXNpemVcIixcIjEycHhcIikuY3NzKFwiaGVpZ2h0XCIsMSksYi5wYXJlbnQoKS5hcHBlbmQoYykpfWZ1bmN0aW9uIGQoKXthKHRoaXMpLnBhcmVudCgpLmZpbmQoJ3NwYW5bY2xhc3M9XCJjaGFyYWN0ZXItY291bnRlclwiXScpLmh0bWwoXCJcIil9ZnVuY3Rpb24gZShhLGIpe3ZhciBjPWIuaGFzQ2xhc3MoXCJpbnZhbGlkXCIpO2EmJmM/Yi5yZW1vdmVDbGFzcyhcImludmFsaWRcIik6YXx8Y3x8KGIucmVtb3ZlQ2xhc3MoXCJ2YWxpZFwiKSxiLmFkZENsYXNzKFwiaW52YWxpZFwiKSl9YS5mbi5jaGFyYWN0ZXJDb3VudGVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBlPWEodGhpcyksZj1lLnBhcmVudCgpLmZpbmQoJ3NwYW5bY2xhc3M9XCJjaGFyYWN0ZXItY291bnRlclwiXScpO2lmKCFmLmxlbmd0aCl7dmFyIGc9dm9pZCAwIT09ZS5hdHRyKFwibGVuZ3RoXCIpO2cmJihlLm9uKFwiaW5wdXRcIixiKSxlLm9uKFwiZm9jdXNcIixiKSxlLm9uKFwiYmx1clwiLGQpLGMoZSkpfX0pfSxhKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe2EoXCJpbnB1dCwgdGV4dGFyZWFcIikuY2hhcmFjdGVyQ291bnRlcigpfSl9KGpRdWVyeSksZnVuY3Rpb24oYSl7dmFyIGI9e2luaXQ6ZnVuY3Rpb24oYil7dmFyIGM9e3RpbWVfY29uc3RhbnQ6MjAwLGRpc3Q6LTEwMCxzaGlmdDowLHBhZGRpbmc6MCxmdWxsX3dpZHRoOiExLGluZGljYXRvcnM6ITEsbm9fd3JhcDohMX07cmV0dXJuIGI9YS5leHRlbmQoYyxiKSx0aGlzLmVhY2goZnVuY3Rpb24oKXtmdW5jdGlvbiBjKCl7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdy5vbnRvdWNoc3RhcnQmJihIWzBdLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsbCksSFswXS5hZGRFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsbSksSFswXS5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIixuKSksSFswXS5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsbCksSFswXS5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsbSksSFswXS5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLG4pLEhbMF0uYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbGVhdmVcIixuKSxIWzBdLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLGopfWZ1bmN0aW9uIGQoYSl7cmV0dXJuIGEudGFyZ2V0VG91Y2hlcyYmYS50YXJnZXRUb3VjaGVzLmxlbmd0aD49MT9hLnRhcmdldFRvdWNoZXNbMF0uY2xpZW50WDphLmNsaWVudFh9ZnVuY3Rpb24gZShhKXtyZXR1cm4gYS50YXJnZXRUb3VjaGVzJiZhLnRhcmdldFRvdWNoZXMubGVuZ3RoPj0xP2EudGFyZ2V0VG91Y2hlc1swXS5jbGllbnRZOmEuY2xpZW50WX1mdW5jdGlvbiBmKGEpe3JldHVybiBhPj10P2EldDowPmE/Zih0K2EldCk6YX1mdW5jdGlvbiBnKGEpe3ZhciBjLGQsZSxnLGgsaSxqO2lmKHA9XCJudW1iZXJcIj09dHlwZW9mIGE/YTpwLHE9TWF0aC5mbG9vcigocCtzLzIpL3MpLGU9cC1xKnMsZz0wPmU/MTotMSxoPS1nKmUqMi9zLGQ9dD4+MSxiLmZ1bGxfd2lkdGg/aj1cInRyYW5zbGF0ZVgoMClcIjooaj1cInRyYW5zbGF0ZVgoXCIrKEhbMF0uY2xpZW50V2lkdGgtaXRlbV93aWR0aCkvMitcInB4KSBcIixqKz1cInRyYW5zbGF0ZVkoXCIrKEhbMF0uY2xpZW50SGVpZ2h0LWl0ZW1fd2lkdGgpLzIrXCJweClcIiksSSl7dmFyIGs9cSV0LGw9Ry5maW5kKFwiLmluZGljYXRvci1pdGVtLmFjdGl2ZVwiKTtsLmluZGV4KCkhPT1rJiYobC5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKSxHLmZpbmQoXCIuaW5kaWNhdG9yLWl0ZW1cIikuZXEoaykuYWRkQ2xhc3MoXCJhY3RpdmVcIikpfWZvcigoIWIubm9fd3JhcHx8cT49MCYmdD5xKSYmKGk9b1tmKHEpXSxpLnN0eWxlW0FdPWorXCIgdHJhbnNsYXRlWChcIistZS8yK1wicHgpIHRyYW5zbGF0ZVgoXCIrZypiLnNoaWZ0KmgqYytcInB4KSB0cmFuc2xhdGVaKFwiK2IuZGlzdCpoK1wicHgpXCIsaS5zdHlsZS56SW5kZXg9MCxiLmZ1bGxfd2lkdGg/dHdlZW5lZE9wYWNpdHk9MTp0d2VlbmVkT3BhY2l0eT0xLS4yKmgsaS5zdHlsZS5vcGFjaXR5PXR3ZWVuZWRPcGFjaXR5LGkuc3R5bGUuZGlzcGxheT1cImJsb2NrXCIpLGM9MTtkPj1jOysrYyliLmZ1bGxfd2lkdGg/KHpUcmFuc2xhdGlvbj1iLmRpc3QsdHdlZW5lZE9wYWNpdHk9Yz09PWQmJjA+ZT8xLWg6MSk6KHpUcmFuc2xhdGlvbj1iLmRpc3QqKDIqYytoKmcpLHR3ZWVuZWRPcGFjaXR5PTEtLjIqKDIqYytoKmcpKSwoIWIubm9fd3JhcHx8dD5xK2MpJiYoaT1vW2YocStjKV0saS5zdHlsZVtBXT1qK1wiIHRyYW5zbGF0ZVgoXCIrKGIuc2hpZnQrKHMqYy1lKS8yKStcInB4KSB0cmFuc2xhdGVaKFwiK3pUcmFuc2xhdGlvbitcInB4KVwiLGkuc3R5bGUuekluZGV4PS1jLGkuc3R5bGUub3BhY2l0eT10d2VlbmVkT3BhY2l0eSxpLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiKSxiLmZ1bGxfd2lkdGg/KHpUcmFuc2xhdGlvbj1iLmRpc3QsdHdlZW5lZE9wYWNpdHk9Yz09PWQmJmU+MD8xLWg6MSk6KHpUcmFuc2xhdGlvbj1iLmRpc3QqKDIqYy1oKmcpLHR3ZWVuZWRPcGFjaXR5PTEtLjIqKDIqYy1oKmcpKSwoIWIubm9fd3JhcHx8cS1jPj0wKSYmKGk9b1tmKHEtYyldLGkuc3R5bGVbQV09aitcIiB0cmFuc2xhdGVYKFwiKygtYi5zaGlmdCsoLXMqYy1lKS8yKStcInB4KSB0cmFuc2xhdGVaKFwiK3pUcmFuc2xhdGlvbitcInB4KVwiLGkuc3R5bGUuekluZGV4PS1jLGkuc3R5bGUub3BhY2l0eT10d2VlbmVkT3BhY2l0eSxpLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiKTsoIWIubm9fd3JhcHx8cT49MCYmdD5xKSYmKGk9b1tmKHEpXSxpLnN0eWxlW0FdPWorXCIgdHJhbnNsYXRlWChcIistZS8yK1wicHgpIHRyYW5zbGF0ZVgoXCIrZypiLnNoaWZ0KmgrXCJweCkgdHJhbnNsYXRlWihcIitiLmRpc3QqaCtcInB4KVwiLGkuc3R5bGUuekluZGV4PTAsYi5mdWxsX3dpZHRoP3R3ZWVuZWRPcGFjaXR5PTE6dHdlZW5lZE9wYWNpdHk9MS0uMipoLGkuc3R5bGUub3BhY2l0eT10d2VlbmVkT3BhY2l0eSxpLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiKX1mdW5jdGlvbiBoKCl7dmFyIGEsYixjLGQ7YT1EYXRlLm5vdygpLGI9YS1DLEM9YSxjPXAtQixCPXAsZD0xZTMqYy8oMStiKSx6PS44KmQrLjIqen1mdW5jdGlvbiBpKCl7dmFyIGEsYzt3JiYoYT1EYXRlLm5vdygpLUMsYz13Kk1hdGguZXhwKC1hL2IudGltZV9jb25zdGFudCksYz4yfHwtMj5jPyhnKHgtYykscmVxdWVzdEFuaW1hdGlvbkZyYW1lKGkpKTpnKHgpKX1mdW5jdGlvbiBqKGMpe2lmKEUpcmV0dXJuIGMucHJldmVudERlZmF1bHQoKSxjLnN0b3BQcm9wYWdhdGlvbigpLCExO2lmKCFiLmZ1bGxfd2lkdGgpe3ZhciBkPWEoYy50YXJnZXQpLmNsb3Nlc3QoXCIuY2Fyb3VzZWwtaXRlbVwiKS5pbmRleCgpLGU9cSV0LWQ7MCE9PWUmJihjLnByZXZlbnREZWZhdWx0KCksYy5zdG9wUHJvcGFnYXRpb24oKSksayhkKX19ZnVuY3Rpb24gayhhKXt2YXIgYz1xJXQtYTtiLm5vX3dyYXB8fCgwPmM/TWF0aC5hYnMoYyt0KTxNYXRoLmFicyhjKSYmKGMrPXQpOmM+MCYmTWF0aC5hYnMoYy10KTxjJiYoYy09dCkpLDA+Yz9ILnRyaWdnZXIoXCJjYXJvdXNlbE5leHRcIixbTWF0aC5hYnMoYyldKTpjPjAmJkgudHJpZ2dlcihcImNhcm91c2VsUHJldlwiLFtjXSl9ZnVuY3Rpb24gbChhKXtyPSEwLEU9ITEsRj0hMSx1PWQoYSksdj1lKGEpLHo9dz0wLEI9cCxDPURhdGUubm93KCksY2xlYXJJbnRlcnZhbChEKSxEPXNldEludGVydmFsKGgsMTAwKX1mdW5jdGlvbiBtKGEpe3ZhciBiLGMsZjtpZihyKWlmKGI9ZChhKSx5PWUoYSksYz11LWIsZj1NYXRoLmFicyh2LXkpLDMwPmYmJiFGKShjPjJ8fC0yPmMpJiYoRT0hMCx1PWIsZyhwK2MpKTtlbHNle2lmKEUpcmV0dXJuIGEucHJldmVudERlZmF1bHQoKSxhLnN0b3BQcm9wYWdhdGlvbigpLCExO0Y9ITB9cmV0dXJuIEU/KGEucHJldmVudERlZmF1bHQoKSxhLnN0b3BQcm9wYWdhdGlvbigpLCExKTp2b2lkIDB9ZnVuY3Rpb24gbihhKXtyZXR1cm4gcj8ocj0hMSxjbGVhckludGVydmFsKEQpLHg9cCwoej4xMHx8LTEwPnopJiYodz0uOSp6LHg9cCt3KSx4PU1hdGgucm91bmQoeC9zKSpzLGIubm9fd3JhcCYmKHg+PXMqKHQtMSk/eD1zKih0LTEpOjA+eCYmKHg9MCkpLHc9eC1wLEM9RGF0ZS5ub3coKSxyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoaSksRSYmKGEucHJldmVudERlZmF1bHQoKSxhLnN0b3BQcm9wYWdhdGlvbigpKSwhMSk6dm9pZCAwfXZhciBvLHAscSxyLHMsdCx1LHYsdyx4LHosQSxCLEMsRCxFLEYsRz1hKCc8dWwgY2xhc3M9XCJpbmRpY2F0b3JzXCI+PC91bD4nKSxIPWEodGhpcyksST1ILmF0dHIoXCJkYXRhLWluZGljYXRvcnNcIil8fGIuaW5kaWNhdG9ycztpZihILmhhc0NsYXNzKFwiaW5pdGlhbGl6ZWRcIikpcmV0dXJuIGEodGhpcykudHJpZ2dlcihcImNhcm91c2VsTmV4dFwiLFsxZS02XSksITA7aWYoYi5mdWxsX3dpZHRoKXtiLmRpc3Q9MDt2YXIgSj1ILmZpbmQoXCIuY2Fyb3VzZWwtaXRlbSBpbWdcIikuZmlyc3QoKTtKLmxlbmd0aD9pbWFnZUhlaWdodD1KLm9uKFwibG9hZFwiLGZ1bmN0aW9uKCl7SC5jc3MoXCJoZWlnaHRcIixhKHRoaXMpLmhlaWdodCgpKX0pOihpbWFnZUhlaWdodD1ILmZpbmQoXCIuY2Fyb3VzZWwtaXRlbVwiKS5maXJzdCgpLmhlaWdodCgpLEguY3NzKFwiaGVpZ2h0XCIsaW1hZ2VIZWlnaHQpKSxJJiZILmZpbmQoXCIuY2Fyb3VzZWwtZml4ZWQtaXRlbVwiKS5hZGRDbGFzcyhcIndpdGgtaW5kaWNhdG9yc1wiKX1ILmFkZENsYXNzKFwiaW5pdGlhbGl6ZWRcIikscj0hMSxwPXg9MCxvPVtdLGl0ZW1fd2lkdGg9SC5maW5kKFwiLmNhcm91c2VsLWl0ZW1cIikuZmlyc3QoKS5pbm5lcldpZHRoKCkscz0yKml0ZW1fd2lkdGgrYi5wYWRkaW5nLEguZmluZChcIi5jYXJvdXNlbC1pdGVtXCIpLmVhY2goZnVuY3Rpb24oYil7aWYoby5wdXNoKGEodGhpcylbMF0pLEkpe3ZhciBjPWEoJzxsaSBjbGFzcz1cImluZGljYXRvci1pdGVtXCI+PC9saT4nKTswPT09YiYmYy5hZGRDbGFzcyhcImFjdGl2ZVwiKSxjLmNsaWNrKGZ1bmN0aW9uKCl7dmFyIGI9YSh0aGlzKS5pbmRleCgpO2soYil9KSxHLmFwcGVuZChjKX19KSxJJiZILmFwcGVuZChHKSx0PW8ubGVuZ3RoLEE9XCJ0cmFuc2Zvcm1cIixbXCJ3ZWJraXRcIixcIk1velwiLFwiT1wiLFwibXNcIl0uZXZlcnkoZnVuY3Rpb24oYSl7dmFyIGI9YStcIlRyYW5zZm9ybVwiO3JldHVyblwidW5kZWZpbmVkXCIhPXR5cGVvZiBkb2N1bWVudC5ib2R5LnN0eWxlW2JdPyhBPWIsITEpOiEwfSksd2luZG93Lm9ucmVzaXplPWcsYygpLGcocCksYSh0aGlzKS5vbihcImNhcm91c2VsTmV4dFwiLGZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YiYmKGI9MSkseD1wK3MqYixwIT09eCYmKHc9eC1wLEM9RGF0ZS5ub3coKSxyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoaSkpfSksYSh0aGlzKS5vbihcImNhcm91c2VsUHJldlwiLGZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YiYmKGI9MSkseD1wLXMqYixwIT09eCYmKHc9eC1wLEM9RGF0ZS5ub3coKSxyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoaSkpfSksYSh0aGlzKS5vbihcImNhcm91c2VsU2V0XCIsZnVuY3Rpb24oYSxiKXt2b2lkIDA9PT1iJiYoYj0wKSxrKGIpfSl9KX0sbmV4dDpmdW5jdGlvbihiKXthKHRoaXMpLnRyaWdnZXIoXCJjYXJvdXNlbE5leHRcIixbYl0pfSxwcmV2OmZ1bmN0aW9uKGIpe2EodGhpcykudHJpZ2dlcihcImNhcm91c2VsUHJldlwiLFtiXSl9LHNldDpmdW5jdGlvbihiKXthKHRoaXMpLnRyaWdnZXIoXCJjYXJvdXNlbFNldFwiLFtiXSl9fTthLmZuLmNhcm91c2VsPWZ1bmN0aW9uKGMpe3JldHVybiBiW2NdP2JbY10uYXBwbHkodGhpcyxBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSkpOlwib2JqZWN0XCIhPXR5cGVvZiBjJiZjP3ZvaWQgYS5lcnJvcihcIk1ldGhvZCBcIitjK1wiIGRvZXMgbm90IGV4aXN0IG9uIGpRdWVyeS5jYXJvdXNlbFwiKTpiLmluaXQuYXBwbHkodGhpcyxhcmd1bWVudHMpfX0oalF1ZXJ5KTsiXX0=
